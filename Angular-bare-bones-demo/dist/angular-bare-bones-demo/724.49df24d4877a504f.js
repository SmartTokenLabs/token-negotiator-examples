"use strict";(self.webpackChunkAngular_bare_bones_demo=self.webpackChunkAngular_bare_bones_demo||[]).push([[724],{23724:(W,y,c)=>{c.r(y),c.d(y,{Web3WalletProvider:()=>b,default:()=>C});var v=c(59267),h=c(14033),l=function(o,r,e,s){return new(e||(e=Promise))(function(t,u){function f(a){try{n(s.next(a))}catch(g){u(g)}}function w(a){try{n(s.throw(a))}catch(g){u(g)}}function n(a){a.done?t(a.value):function i(t){return t instanceof e?t:new e(function(u){u(t)})}(a.value).then(f,w)}n((s=s.apply(o,r||[])).next())})},d=function(o,r){var s,i,t,u,e={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return u={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function f(n){return function(a){return function w(n){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,i&&(t=2&n[0]?i.return:n[0]?i.throw||((t=i.return)&&t.call(i),0):i.next)&&!(t=t.call(i,n[1])).done)return t;switch(i=0,t&&(n=[2&n[0],t.value]),n[0]){case 0:case 1:t=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,i=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(!(t=(t=e.trys).length>0&&t[t.length-1])&&(6===n[0]||2===n[0])){e=0;continue}if(3===n[0]&&(!t||n[1]>t[0]&&n[1]<t[3])){e.label=n[1];break}if(6===n[0]&&e.label<t[1]){e.label=t[1],t=n;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(n);break}t[2]&&e.ops.pop(),e.trys.pop();continue}n=r.call(o,e)}catch(a){n=[6,a],i=0}finally{s=t=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},b=function(){function o(r,e){this.state={addresses:[]},this.client=r,this.safeConnectOptions=e}return o.prototype.connectWith=function(r){return l(this,void 0,void 0,function(){var e;return d(this,function(s){switch(s.label){case 0:if(!r)throw new Error("Please provide a Wallet type to connect with.");return this[r]?[4,this[r]()]:[3,2];case 1:return e=s.sent(),(0,h.kg)(2,"address",e),[2,e];case 2:throw new Error("Wallet type not found")}})})},o.prototype.signWith=function(r,e){return l(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return[4,new v.Q(e).getSigner().signMessage(r)];case 1:return[2,t.sent()]}})})},o.prototype.getConnectedWalletData=function(){return this.state.addresses},o.prototype.registerNewWalletAddress=function(r,e,s){return this.state.addresses.push({address:r,chainId:e,provider:s}),this.state.addresses},o.prototype.MetaMask=function(){return l(this,void 0,void 0,function(){var r,e;return d(this,function(i){switch(i.label){case 0:return(0,h.kg)(2,"connect MetaMask"),typeof window.ethereum<"u"?[4,window.ethereum.request({method:"eth_requestAccounts"})]:[3,3];case 1:return r=i.sent(),[4,window.ethereum.request({method:"eth_chainId"})];case 2:return e=i.sent(),[2,this.registerNewWalletAddress(r[0],parseInt(e,16),ethereum)];case 3:throw new Error("MetaMask is not available. Please check the extension is supported and active.")}})})},o.prototype.WalletConnect=function(){return l(this,void 0,void 0,function(){var e,i;return d(this,function(t){switch(t.label){case 0:return(0,h.kg)(2,"connect Wallet Connect"),[4,Promise.all([c.e(255),c.e(228)]).then(c.bind(c,62228))];case 1:return[4,t.sent().getWalletConnectProviderInstance()];case 2:return[4,(e=t.sent()).enable()];case 3:return t.sent(),[4,new v.Q(e).listAccounts()];case 4:if(0===(i=t.sent()).length)throw new Error("No accounts found via wallet-connect.");return[2,this.registerNewWalletAddress(i[0],"1",e)]}})})},o.prototype.Torus=function(){return l(this,void 0,void 0,function(){var e,i;return d(this,function(t){switch(t.label){case 0:return[4,Promise.all([c.e(255),c.e(678)]).then(c.bind(c,87678))];case 1:return[4,t.sent().getTorusProviderInstance()];case 2:return[4,(e=t.sent()).init()];case 3:return t.sent(),[4,e.login()];case 4:return t.sent(),[4,new v.Q(e.provider).listAccounts()];case 5:if(0===(i=t.sent()).length)throw new Error("No accounts found via wallet-connect.");return[2,this.registerNewWalletAddress(i[0],"1",e.provider)]}})})},o.prototype.SafeConnect=function(){return l(this,void 0,void 0,function(){var r,e;return d(this,function(s){switch(s.label){case 0:return(0,h.kg)(2,"connect SafeConnect"),[4,this.getSafeConnectProvider()];case 1:return[4,(r=s.sent()).initSafeConnect()];case 2:return e=s.sent(),this.registerNewWalletAddress(e,"1",r),[2,e]}})})},o.prototype.safeConnectAvailable=function(){return void 0!==this.safeConnectOptions},o.prototype.getSafeConnectProvider=function(){return l(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,Promise.resolve().then(c.bind(c,48227))];case 1:return[2,new(0,e.sent().SafeConnectProvider)(this.client.getUi(),this.safeConnectOptions)]}})})},o}();const C=b}}]);