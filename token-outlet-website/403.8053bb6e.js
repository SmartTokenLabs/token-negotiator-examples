"use strict";

(self.webpackChunktoken_outlet_website = self.webpackChunktoken_outlet_website || []).push([ [ 403 ], {
  88403: (e, t, n) => {
    n.r(t), n.d(t, {
      Web3WalletProvider: () => a,
      default: () => u
    });
    var r = n(241);
    var o = n(76677);
    var s = n(25108);
    var i = function(e, t, n, r) {
      return new (n || (n = Promise))((function(o, s) {
        function i(e) {
          try {
            a(r.next(e));
          } catch (t) {
            s(t);
          }
        }
        function c(e) {
          try {
            a(r.throw(e));
          } catch (t) {
            s(t);
          }
        }
        function a(e) {
          e.done ? o(e.value) : function(e) {
            return e instanceof n ? e : new n((function(t) {
              t(e);
            }));
          }(e.value).then(i, c);
        }
        a((r = r.apply(e, t || [])).next());
      }));
    };
    var c = function(e, t) {
      var n, r, o, s, i = {
        label: 0,
        sent: function() {
          if (1 & o[0]) throw o[1];
          return o[1];
        },
        trys: [],
        ops: []
      };
      return s = {
        next: c(0),
        throw: c(1),
        return: c(2)
      }, "function" == typeof Symbol && (s[Symbol.iterator] = function() {
        return this;
      }), s;
      function c(s) {
        return function(c) {
          return function(s) {
            if (n) throw new TypeError("Generator is already executing.");
            for (;i; ) try {
              if (n = 1, r && (o = 2 & s[0] ? r.return : s[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, s[1])).done) return o;
              switch (r = 0, o && (s = [ 2 & s[0], o.value ]), s[0]) {
               case 0:
               case 1:
                o = s;
                break;

               case 4:
                return i.label++, {
                  value: s[1],
                  done: !1
                };

               case 5:
                i.label++, r = s[1], s = [ 0 ];
                continue;

               case 7:
                s = i.ops.pop(), i.trys.pop();
                continue;

               default:
                if (!(o = i.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                  i = 0;
                  continue;
                }
                if (3 === s[0] && (!o || s[1] > o[0] && s[1] < o[3])) {
                  i.label = s[1];
                  break;
                }
                if (6 === s[0] && i.label < o[1]) {
                  i.label = o[1], o = s;
                  break;
                }
                if (o && i.label < o[2]) {
                  i.label = o[2], i.ops.push(s);
                  break;
                }
                o[2] && i.ops.pop(), i.trys.pop();
                continue;
              }
              s = t.call(e, i);
            } catch (c) {
              s = [ 6, c ], r = 0;
            } finally {
              n = o = 0;
            }
            if (5 & s[0]) throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            };
          }([ s, c ]);
        };
      }
    };
    var a = function() {
      function e(e) {
        this.state = {
          addresses: []
        }, this.safeConnectOptions = e;
      }
      return e.prototype.connectWith = function(e) {
        return i(this, void 0, void 0, (function() {
          var t;
          return c(this, (function(n) {
            switch (n.label) {
             case 0:
              if (!e) throw new Error('Please provide a Wallet type to connect with.');
              return this[e] ? [ 4, this[e]() ] : [ 3, 2 ];

             case 1:
              return t = n.sent(), (0, o.kg)(2, 'address', t), [ 2, t ];

             case 2:
              throw new Error('Wallet type not found');
            }
          }));
        }));
      }, e.prototype.signWith = function(e, t) {
        return i(this, void 0, void 0, (function() {
          var n;
          return c(this, (function(o) {
            switch (o.label) {
             case 0:
              return n = new r.Q(t), [ 4, n.getSigner().signMessage(e) ];

             case 1:
              return [ 2, o.sent() ];
            }
          }));
        }));
      }, e.prototype.getConnectedWalletData = function() {
        return this.state.addresses;
      }, e.prototype.registerNewWalletAddress = function(e, t, n) {
        return this.state.addresses.push({
          address: e,
          chainId: t,
          provider: n
        }), this.state.addresses;
      }, e.prototype.getWeb3ChainId = function(e) {
        return i(this, void 0, void 0, (function() {
          return c(this, (function(t) {
            return [ 2, e.eth.getChainId() ];
          }));
        }));
      }, e.prototype.getWeb3Accounts = function(e) {
        return i(this, void 0, void 0, (function() {
          return c(this, (function(t) {
            return [ 2, e.eth.getAccounts() ];
          }));
        }));
      }, e.prototype.getWeb3ChainIdAndAccounts = function(e) {
        return i(this, void 0, void 0, (function() {
          var t, n;
          return c(this, (function(r) {
            switch (r.label) {
             case 0:
              return [ 4, this.getWeb3ChainId(e) ];

             case 1:
              return t = r.sent(), [ 4, this.getWeb3Accounts(e) ];

             case 2:
              return n = r.sent(), [ 2, {
                chainId: t,
                accounts: n
              } ];
            }
          }));
        }));
      }, e.prototype.MetaMask = function() {
        return i(this, void 0, void 0, (function() {
          var e, t, n;
          return c(this, (function(r) {
            switch (r.label) {
             case 0:
              return (0, o.kg)(2, 'connect MetaMask'), void 0 === window.ethereum ? [ 3, 3 ] : [ 4, window.ethereum.request({
                method: 'eth_requestAccounts'
              }) ];

             case 1:
              return e = r.sent(), [ 4, window.ethereum.request({
                method: 'eth_chainId'
              }) ];

             case 2:
              return t = r.sent(), n = e[0], [ 2, this.registerNewWalletAddress(n, parseInt(t, 16), ethereum) ];

             case 3:
              throw new Error("MetaMask is not available. Please check the extension is supported and active.");
            }
          }));
        }));
      }, e.prototype.WalletConnect = function() {
        return i(this, void 0, void 0, (function() {
          var e, t;
          return c(this, (function(s) {
            switch (s.label) {
             case 0:
              return (0, o.kg)(2, 'connect Wallet Connect'), [ 4, Promise.all([ n.e(220), n.e(578), n.e(717) ]).then(n.bind(n, 26578)) ];

             case 1:
              return [ 4, s.sent().getWalletConnectProviderInstance() ];

             case 2:
              return [ 4, (e = s.sent()).enable() ];

             case 3:
              return s.sent(), [ 4, new r.Q(e).listAccounts() ];

             case 4:
              if (0 === (t = s.sent()).length) throw new Error("No accounts found via wallet-connect.");
              return [ 2, this.registerNewWalletAddress(t[0], '1', e) ];
            }
          }));
        }));
      }, e.prototype.Torus = function() {
        return i(this, void 0, void 0, (function() {
          var e, t, o, s, i;
          return c(this, (function(c) {
            switch (c.label) {
             case 0:
              return [ 4, Promise.all([ n.e(220), n.e(65), n.e(88) ]).then(n.bind(n, 42065)) ];

             case 1:
              return [ 4, c.sent().getTorusProviderInstance() ];

             case 2:
              return [ 4, (e = c.sent()).init() ];

             case 3:
              return c.sent(), [ 4, e.login() ];

             case 4:
              return c.sent(), t = new r.Q(e.provider), [ 4, this.getWeb3ChainIdAndAccounts(t) ];

             case 5:
              return o = c.sent(), s = o.accounts, i = o.chainId, [ 2, this.registerNewWalletAddress(s[0], i, e.provider) ];
            }
          }));
        }));
      }, e.prototype.SafeConnect = function() {
        return i(this, void 0, void 0, (function() {
          var e, t;
          return c(this, (function(n) {
            switch (n.label) {
             case 0:
              return (0, o.kg)(2, 'connect SafeConnect'), [ 4, this.getSafeConnectProvider() ];

             case 1:
              return [ 4, (e = n.sent()).initSafeConnect() ];

             case 2:
              return t = n.sent(), s.log(t), this.registerNewWalletAddress(t, "1", e), [ 2, t ];
            }
          }));
        }));
      }, e.prototype.safeConnectAvailable = function() {
        return void 0 !== this.safeConnectOptions;
      }, e.prototype.getSafeConnectProvider = function() {
        return i(this, void 0, void 0, (function() {
          return c(this, (function(e) {
            switch (e.label) {
             case 0:
              return [ 4, Promise.resolve().then(n.bind(n, 18551)) ];

             case 1:
              return [ 2, new (0, e.sent().SafeConnectProvider)(this.safeConnectOptions) ];
            }
          }));
        }));
      }, e;
    }();
    const u = a;
  }
} ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUFDbkMsSUFBSXVCLEdBQVVOO1VBQ2QsT0FBTy9CLEVBQVljLE9BQU0sU0FBVWtCO1lBQy9CLFFBQVFBLEVBQUd6QjthQUNQLEtBQUs7Y0FFRCxRQURBLFNBQU8sR0FBRyx3QkFDSCxFQUFDLEdBQUdPLEtBQUt5RDs7YUFDcEIsS0FBSztjQUVELE9BQU8sRUFBQyxJQURSbEMsSUFBV0wsRUFBR3hCLFFBQ01nRTs7YUFDeEIsS0FBSztjQUlELE9BSEF6QyxJQUFVQyxFQUFHeEIsUUFDYmlFLEVBQVFDLElBQUkzQyxJQUNaakIsS0FBSzJCLHlCQUF5QlYsR0FBUyxLQUFLTSxJQUNyQyxFQUFDLEdBQUdOOztBQUV2QjtBQUNKO0FBQ0osU0FDQVIsRUFBbUJLLFVBQVUrQyx1QkFBdUI7UUFDaEQsWUFBbUNDLE1BQTVCOUQsS0FBS2E7QUFDaEIsU0FDQUosRUFBbUJLLFVBQVUyQyx5QkFBeUI7UUFDbEQsT0FBTzFGLEVBQVVpQyxXQUFNLFFBQVEsSUFBUTtVQUVuQyxPQUFPZCxFQUFZYyxPQUFNLFNBQVVrQjtZQUMvQixRQUFRQSxFQUFHekI7YUFDUCxLQUFLO2NBQUcsT0FBTyxFQUFDLEdBQUc7O2FBQ25CLEtBQUs7Y0FFRCxPQUFPLEVBQUMsR0FBRyxLQURYc0UsR0FBdUI3QyxFQUFHeEIsT0FBUXFFLHFCQUNDL0QsS0FBS2E7O0FBRXBEO0FBQ0o7QUFDSixTQUNPSjtBQUNYLEtBNUx5QjtJQThMekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2tlbi1vdXRsZXQtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AdG9rZW5zY3JpcHQvdG9rZW4tbmVnb3RpYXRvci9kaXN0L3dhbGxldC9XZWIzV2FsbGV0UHJvdmlkZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbmltcG9ydCB7IGV0aGVycyB9IGZyb20gXCJldGhlcnNcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCIuLi91dGlsc1wiO1xudmFyIFdlYjNXYWxsZXRQcm92aWRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gV2ViM1dhbGxldFByb3ZpZGVyKHNhZmVDb25uZWN0VXJsKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7IGFkZHJlc3NlczogW10gfTtcbiAgICAgICAgdGhpcy5zYWZlQ29ubmVjdE9wdGlvbnMgPSBzYWZlQ29ubmVjdFVybDtcbiAgICB9XG4gICAgV2ViM1dhbGxldFByb3ZpZGVyLnByb3RvdHlwZS5jb25uZWN0V2l0aCA9IGZ1bmN0aW9uICh3YWxsZXRUeXBlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhZGRyZXNzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3YWxsZXRUeXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIHByb3ZpZGUgYSBXYWxsZXQgdHlwZSB0byBjb25uZWN0IHdpdGguJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXNbd2FsbGV0VHlwZV0pIHJldHVybiBbMywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIHRoaXNbd2FsbGV0VHlwZV0oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIoMiwgJ2FkZHJlc3MnLCBhZGRyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgYWRkcmVzc107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IEVycm9yKCdXYWxsZXQgdHlwZSBub3QgZm91bmQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBXZWIzV2FsbGV0UHJvdmlkZXIucHJvdG90eXBlLnNpZ25XaXRoID0gZnVuY3Rpb24gKG1lc3NhZ2UsIHdhbGxldFByb3ZpZGVyKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwcm92aWRlciwgc2lnbmVyO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIgPSBuZXcgZXRoZXJzLnByb3ZpZGVycy5XZWIzUHJvdmlkZXIod2FsbGV0UHJvdmlkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmVyID0gcHJvdmlkZXIuZ2V0U2lnbmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIHNpZ25lci5zaWduTWVzc2FnZShtZXNzYWdlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFsyLCBfYS5zZW50KCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFdlYjNXYWxsZXRQcm92aWRlci5wcm90b3R5cGUuZ2V0Q29ubmVjdGVkV2FsbGV0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuYWRkcmVzc2VzO1xuICAgIH07XG4gICAgV2ViM1dhbGxldFByb3ZpZGVyLnByb3RvdHlwZS5yZWdpc3Rlck5ld1dhbGxldEFkZHJlc3MgPSBmdW5jdGlvbiAoYWRkcmVzcywgY2hhaW5JZCwgcHJvdmlkZXIpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5hZGRyZXNzZXMucHVzaCh7IGFkZHJlc3M6IGFkZHJlc3MsIGNoYWluSWQ6IGNoYWluSWQsIHByb3ZpZGVyOiBwcm92aWRlciB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuYWRkcmVzc2VzO1xuICAgIH07XG4gICAgV2ViM1dhbGxldFByb3ZpZGVyLnByb3RvdHlwZS5nZXRXZWIzQ2hhaW5JZCA9IGZ1bmN0aW9uICh3ZWIzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIsIHdlYjMuZXRoLmdldENoYWluSWQoKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBXZWIzV2FsbGV0UHJvdmlkZXIucHJvdG90eXBlLmdldFdlYjNBY2NvdW50cyA9IGZ1bmN0aW9uICh3ZWIzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIsIHdlYjMuZXRoLmdldEFjY291bnRzKCldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgV2ViM1dhbGxldFByb3ZpZGVyLnByb3RvdHlwZS5nZXRXZWIzQ2hhaW5JZEFuZEFjY291bnRzID0gZnVuY3Rpb24gKHdlYjMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoYWluSWQsIGFjY291bnRzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQsIHRoaXMuZ2V0V2ViM0NoYWluSWQod2ViMyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCB0aGlzLmdldFdlYjNBY2NvdW50cyh3ZWIzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRzID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCB7IGNoYWluSWQ6IGNoYWluSWQsIGFjY291bnRzOiBhY2NvdW50cyB9XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBXZWIzV2FsbGV0UHJvdmlkZXIucHJvdG90eXBlLk1ldGFNYXNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYWNjb3VudHMsIGhleENoYWluSWQsIGFjY291bnRBZGRyZXNzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyKDIsICdjb25uZWN0IE1ldGFNYXNrJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0eXBlb2Ygd2luZG93LmV0aGVyZXVtICE9PSAndW5kZWZpbmVkJykpIHJldHVybiBbMywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIHdpbmRvdy5ldGhlcmV1bS5yZXF1ZXN0KHsgbWV0aG9kOiAnZXRoX3JlcXVlc3RBY2NvdW50cycgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50cyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgd2luZG93LmV0aGVyZXVtLnJlcXVlc3QoeyBtZXRob2Q6ICdldGhfY2hhaW5JZCcgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBoZXhDaGFpbklkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudEFkZHJlc3MgPSBhY2NvdW50c1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgdGhpcy5yZWdpc3Rlck5ld1dhbGxldEFkZHJlc3MoYWNjb3VudEFkZHJlc3MsIHBhcnNlSW50KGhleENoYWluSWQsIDE2KSwgZXRoZXJldW0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiB0aHJvdyBuZXcgRXJyb3IoXCJNZXRhTWFzayBpcyBub3QgYXZhaWxhYmxlLiBQbGVhc2UgY2hlY2sgdGhlIGV4dGVuc2lvbiBpcyBzdXBwb3J0ZWQgYW5kIGFjdGl2ZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgV2ViM1dhbGxldFByb3ZpZGVyLnByb3RvdHlwZS5XYWxsZXRDb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2FsbGV0Q29ubmVjdFByb3ZpZGVyLCB3YWxsZXRDb25uZWN0LCBwcm92aWRlciwgYWNjb3VudHM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIoMiwgJ2Nvbm5lY3QgV2FsbGV0IENvbm5lY3QnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgaW1wb3J0KFwiLi9XYWxsZXRDb25uZWN0UHJvdmlkZXJcIildO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXRDb25uZWN0UHJvdmlkZXIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIHdhbGxldENvbm5lY3RQcm92aWRlci5nZXRXYWxsZXRDb25uZWN0UHJvdmlkZXJJbnN0YW5jZSgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgd2FsbGV0Q29ubmVjdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgd2FsbGV0Q29ubmVjdC5lbmFibGUoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyID0gbmV3IGV0aGVycy5wcm92aWRlcnMuV2ViM1Byb3ZpZGVyKHdhbGxldENvbm5lY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBwcm92aWRlci5saXN0QWNjb3VudHMoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRzID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjY291bnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFjY291bnRzIGZvdW5kIHZpYSB3YWxsZXQtY29ubmVjdC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIsIHRoaXMucmVnaXN0ZXJOZXdXYWxsZXRBZGRyZXNzKGFjY291bnRzWzBdLCAnMScsIHdhbGxldENvbm5lY3QpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBXZWIzV2FsbGV0UHJvdmlkZXIucHJvdG90eXBlLlRvcnVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgVG9ydXNQcm92aWRlciwgdG9ydXMsIHdlYjMsIF9hLCBhY2NvdW50cywgY2hhaW5JZCwgcmVnaXN0ZXJlZFdhbGxldEFkZHJlc3M7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCwgaW1wb3J0KFwiLi9Ub3J1c1Byb3ZpZGVyXCIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgVG9ydXNQcm92aWRlciA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgVG9ydXNQcm92aWRlci5nZXRUb3J1c1Byb3ZpZGVySW5zdGFuY2UoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcnVzID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCB0b3J1cy5pbml0KCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIHRvcnVzLmxvZ2luKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWIzID0gbmV3IGV0aGVycy5wcm92aWRlcnMuV2ViM1Byb3ZpZGVyKHRvcnVzLnByb3ZpZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgdGhpcy5nZXRXZWIzQ2hhaW5JZEFuZEFjY291bnRzKHdlYjMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBfYi5zZW50KCksIGFjY291bnRzID0gX2EuYWNjb3VudHMsIGNoYWluSWQgPSBfYS5jaGFpbklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJlZFdhbGxldEFkZHJlc3MgPSB0aGlzLnJlZ2lzdGVyTmV3V2FsbGV0QWRkcmVzcyhhY2NvdW50c1swXSwgY2hhaW5JZCwgdG9ydXMucHJvdmlkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCByZWdpc3RlcmVkV2FsbGV0QWRkcmVzc107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgV2ViM1dhbGxldFByb3ZpZGVyLnByb3RvdHlwZS5TYWZlQ29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHByb3ZpZGVyLCBhZGRyZXNzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyKDIsICdjb25uZWN0IFNhZmVDb25uZWN0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIHRoaXMuZ2V0U2FmZUNvbm5lY3RQcm92aWRlcigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIHByb3ZpZGVyLmluaXRTYWZlQ29ubmVjdCgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFkZHJlc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3Rlck5ld1dhbGxldEFkZHJlc3MoYWRkcmVzcywgXCIxXCIsIHByb3ZpZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgYWRkcmVzc107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgV2ViM1dhbGxldFByb3ZpZGVyLnByb3RvdHlwZS5zYWZlQ29ubmVjdEF2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2FmZUNvbm5lY3RPcHRpb25zICE9PSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBXZWIzV2FsbGV0UHJvdmlkZXIucHJvdG90eXBlLmdldFNhZmVDb25uZWN0UHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBTYWZlQ29ubmVjdFByb3ZpZGVyO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQsIGltcG9ydChcIi4vU2FmZUNvbm5lY3RQcm92aWRlclwiKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIFNhZmVDb25uZWN0UHJvdmlkZXIgPSAoX2Euc2VudCgpKS5TYWZlQ29ubmVjdFByb3ZpZGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCBuZXcgU2FmZUNvbm5lY3RQcm92aWRlcih0aGlzLnNhZmVDb25uZWN0T3B0aW9ucyldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBXZWIzV2FsbGV0UHJvdmlkZXI7XG59KCkpO1xuZXhwb3J0IHsgV2ViM1dhbGxldFByb3ZpZGVyIH07XG5leHBvcnQgZGVmYXVsdCBXZWIzV2FsbGV0UHJvdmlkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1XZWIzV2FsbGV0UHJvdmlkZXIuanMubWFwIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJhZG9wdCIsInRoZW4iLCJhcHBseSIsIl9fZ2VuZXJhdG9yIiwiYm9keSIsImYiLCJ5IiwidCIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJTeW1ib2wiLCJpdGVyYXRvciIsInRoaXMiLCJuIiwidiIsIm9wIiwiVHlwZUVycm9yIiwiY2FsbCIsInBvcCIsImxlbmd0aCIsInB1c2giLCJXZWIzV2FsbGV0UHJvdmlkZXIiLCJzYWZlQ29ubmVjdFVybCIsInN0YXRlIiwiYWRkcmVzc2VzIiwic2FmZUNvbm5lY3RPcHRpb25zIiwicHJvdG90eXBlIiwiY29ubmVjdFdpdGgiLCJ3YWxsZXRUeXBlIiwiYWRkcmVzcyIsIl9hIiwiRXJyb3IiLCJzaWduV2l0aCIsIm1lc3NhZ2UiLCJ3YWxsZXRQcm92aWRlciIsInByb3ZpZGVyIiwiZ2V0U2lnbmVyIiwic2lnbk1lc3NhZ2UiLCJnZXRDb25uZWN0ZWRXYWxsZXREYXRhIiwicmVnaXN0ZXJOZXdXYWxsZXRBZGRyZXNzIiwiY2hhaW5JZCIsImdldFdlYjNDaGFpbklkIiwid2ViMyIsImV0aCIsImdldENoYWluSWQiLCJnZXRXZWIzQWNjb3VudHMiLCJnZXRBY2NvdW50cyIsImdldFdlYjNDaGFpbklkQW5kQWNjb3VudHMiLCJhY2NvdW50cyIsIk1ldGFNYXNrIiwiaGV4Q2hhaW5JZCIsImFjY291bnRBZGRyZXNzIiwid2luZG93IiwiZXRoZXJldW0iLCJyZXF1ZXN0IiwibWV0aG9kIiwicGFyc2VJbnQiLCJXYWxsZXRDb25uZWN0Iiwid2FsbGV0Q29ubmVjdCIsImdldFdhbGxldENvbm5lY3RQcm92aWRlckluc3RhbmNlIiwiZW5hYmxlIiwibGlzdEFjY291bnRzIiwiVG9ydXMiLCJ0b3J1cyIsIl9iIiwiZ2V0VG9ydXNQcm92aWRlckluc3RhbmNlIiwiaW5pdCIsImxvZ2luIiwiU2FmZUNvbm5lY3QiLCJnZXRTYWZlQ29ubmVjdFByb3ZpZGVyIiwiaW5pdFNhZmVDb25uZWN0IiwiY29uc29sZSIsImxvZyIsInNhZmVDb25uZWN0QXZhaWxhYmxlIiwidW5kZWZpbmVkIiwiU2FmZUNvbm5lY3RQcm92aWRlciJdLCJzb3VyY2VSb290IjoiIn0=