"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{7e4:function(e,t,n){n.r(t),n.d(t,{AppUtils:function(){return hn},InteractionTemplateUtils:function(){return sr},TestUtils:function(){return c.kW},VERSION:function(){return Z},WalletUtils:function(){return on},account:function(){return c.JT},arg:function(){return c.R9},args:function(){return c.WC},atBlockHeight:function(){return c.o9},atBlockId:function(){return c.$x},authenticate:function(){return ur},authorization:function(){return c.jL},authorizations:function(){return c.KX},authz:function(){return pr},block:function(){return c.Ge},build:function(){return c.J_},cadence:function(){return S.X},cdc:function(){return S.X},config:function(){return u.v},createSignableVoucher:function(){return c.c0},currentUser:function(){return Kt},decode:function(){return c.Jx},discovery:function(){return wt},display:function(){return v.jf},events:function(){return Tn},getAccount:function(){return c.D0},getBlock:function(){return c.Qg},getBlockHeader:function(){return c.Nx},getCollection:function(){return c._N},getEvents:function(){return c.vw},getEventsAtBlockHeightRange:function(){return c.oL},getEventsAtBlockIds:function(){return c.aU},getTransaction:function(){return c.fo},getTransactionStatus:function(){return c.Lv},invariant:function(){return c.kG},isBad:function(){return c.Pe},isOk:function(){return c.IY},limit:function(){return c.b9},logIn:function(){return lr},mutate:function(){return $t},param:function(){return c.wu},params:function(){return c.f},payer:function(){return c.$C},ping:function(){return c.qE},pipe:function(){return c.zG},pluginRegistry:function(){return tt},proposer:function(){return c.iB},query:function(){return Q},reauthenticate:function(){return cr},ref:function(){return c.iH},sansPrefix:function(){return v.CH},script:function(){return c._v},send:function(){return c.Jd},serialize:function(){return yn},signUp:function(){return dr},t:function(){return fr},transaction:function(){return c.PS},tx:function(){return Cn},unauthenticate:function(){return ir},validator:function(){return c.sC},verifyUserSignatures:function(){return gn},voucherIntercept:function(){return c.Hv},voucherToTxId:function(){return c.fI},why:function(){return c.zq},withPrefix:function(){return v.dq}});var r=n(97685),a=n(15861),o=n(64687),s=n.n(o),u=n(62191),i=n(79489),c=n(44792),d=n(71002),l=n(16060),p=n(83300),f=n.n(p),v=n(83100),m=n(37762),h=n(4942),g=n(1413),y=n(83878),b=n(53026),w=n(74902),k=n(84366),x=n(89747),E=n(48764),S=n(88999),I={can:!("undefined"===typeof window),get:function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(sessionStorage.getItem(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),put:function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sessionStorage.setItem(t,JSON.stringify(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};function R(e){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.t1=Object,e.next=4,(0,u.v)().where(t);case 4:return e.t2=e.sent,e.t3=e.t1.entries.call(e.t1,e.t2).map((function(e){var n=(0,r.Z)(e,2),a=n[0],o=n[1];return[a.replace(t,""),o]})),e.abrupt("return",e.t0.fromEntries.call(e.t0,e.t3));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,u.v)({"discovery.wallet.method.default":"IFRAME/RPC","fcl.storage.default":I});var Z="1.3.2",P=function(e){return function(t){return(0,d.Z)(t)===e}},A=function(e){return null!=e},_=P("object"),D=P("string"),T=P("function"),N=P("number");function O(e){return T(e)?e(c.R9,l):[]}function L(e){return F.apply(this,arguments)}function F(){return(F=(0,a.Z)(s().mark((function e(t){var n,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,(0,i.k)("undefined"!==typeof n,"retrieve({ url }) -- url must be defined"),e.prev=2,e.next=5,f()(n);case 5:r=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),new Error("httpDocumentResolver Error: Failed to retrieve document.");case 11:if(!r.ok){e.next=17;break}return e.next=14,r.json();case 14:e.t1=e.sent,e.next=18;break;case 17:e.t1=null;case 18:return a=e.t1,e.abrupt("return",a);case 20:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}var j=new Map([["http",L],["https",L]]);function M(e){return U.apply(this,arguments)}function U(){return(U=(0,a.Z)(s().mark((function e(t){var n,r,a,o,c,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,(0,i.k)("undefined"!==typeof n,"retrieve({ url }) -- url must be defined"),(0,i.k)("string"===typeof n,"retrieve({ url }) -- url must be a string"),e.next=5,(0,u.v)().where(/^document\.resolver\./);case 5:return r=e.sent,Object.keys(r).map((function(e){var t=r[e],n=e.replace(/^document\.resolver\./,"");j.set(n,t)})),a=/^(.*):\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/.exec(n),(0,i.k)(a,"Failed to parse URL"),o=a[1],(0,i.k)(a,"Failed to parse URL protocol"),c=j.get(o),(0,i.k)(c,"No resolver found for protcol=".concat(o)),e.next=15,c({url:n});case 15:return d=e.sent,e.abrupt("return",d);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){if(null==e)return null;if("1.0.0"===e.f_version)return e;throw new Error("normalizeInteractionTemplate Error: Invalid InteractionTemplate")}function G(e){var t,n,a=e.network,o=e.template;if((0,c.kG)(void 0!=a,"deriveCadenceByNetwork({ network }) -- network must be defined"),(0,c.kG)("string"===typeof a,"deriveCadenceByNetwork({ network }) -- network must be a string"),(0,c.kG)(void 0!=o,"generateDependencyPin({ template }) -- template must be defined"),(0,c.kG)("object"===(0,d.Z)(o),"generateDependencyPin({ template }) -- template must be an object"),(0,c.kG)("InteractionTemplate"===o.f_type,"generateDependencyPin({ template }) -- template must be an InteractionTemplate"),"1.0.0"===(o=z(o)).f_version)return Object.keys(null===(t=o)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.dependencies).map((function(e){var t,n,r,s=Object.values(null===(t=o)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.dependencies)||void 0===r?void 0:r[e]);(0,c.kG)(s,"deriveCadenceByNetwork -- Could not find contracts for dependency placeholder: ".concat(e)),(0,c.kG)(0===s.length,"deriveCadenceByNetwork -- Could not find contracts for dependency placeholder: ".concat(e));var u=s[0],i=null===u||void 0===u?void 0:u[a];return(0,c.kG)(i,"deriveCadenceByNetwork -- Could not find ".concat(a," network information for dependency: ").concat(e)),[e,i.address]})).reduce((function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1],s=new RegExp("(\\b"+a+"\\b)","g");return e.replace(s,o)}),o.data.cadence);throw new Error("deriveCadenceByNetwork Error: Unsupported template version")}function H(e){return q.apply(this,arguments)}function q(){return(q=(0,a.Z)(s().mark((function e(t){var n,r,a,o,c,d,l,p,f,m,h,g,y;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.template,e.next=3,u.v.get("flow.network");case 3:a=e.sent,(0,i.k)(a,"FCL configureDependencies Error: Missing configuration value for 'flow.network'"),o={},e.t0=r.f_version,e.next="1.0.0"===e.t0?9:12;break;case 9:for(c=Object.keys(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.dependencies),d=0,l=c;d<l.length;d++)f=l[d],m=null===r||void 0===r||null===(p=r.data)||void 0===p?void 0:p.dependencies[f],h=Object.keys(m),(0,i.k)(h.length>0,"FCL configureDependencies Error: No contracts found in template for placeholder=".concat(f)),g=m[h[0]],y=g[a],(0,i.k)(y,"FCL configureDependencies Error: No dependency information for placeholder=".concat(f," contract=").concat(h[0]," network=").concat(a)),(0,i.k)(null===y||void 0===y?void 0:y.address,"FCL configureDependencies Error: No address information for placeholder=".concat(f," contract=").concat(h[0]," network=").concat(a)),o[f]=(0,v.dq)(null===y||void 0===y?void 0:y.address);return e.abrupt("return",o);case 12:throw new Error("FCL configureDependencies Error: Unsupported template version");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return V.apply(this,arguments)}function V(){return(V=(0,a.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D(null===t||void 0===t?void 0:t.template)){e.next=4;break}return e.next=3,M({url:null===t||void 0===t?void 0:t.template});case 3:t.template=e.sent;case 4:if(n={},null===t||void 0===t||!t.template){e.next=10;break}return t.template=z(null===t||void 0===t?void 0:t.template),e.next=9,H({template:t.template});case 9:n=e.sent;case 10:if(e.t0=t.cadence,e.t0){e.next=19;break}return e.t1=G,e.t2=t.template,e.next=16,c.vc().get("flow.network");case 16:e.t3=e.sent,e.t4={template:e.t2,network:e.t3},e.t0=(0,e.t1)(e.t4);case 19:return r=e.t0,t.cadence=r,t.dependencies=n,e.abrupt("return",t);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){return J.apply(this,arguments)}function J(){return(J=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,i.k)(A(n),"".concat(t,"(opts) -- opts is required")),(0,i.k)(_(n),"".concat(t,"(opts) -- opts must be an object")),(0,i.k)(!(n.cadence&&n.template),"".concat(t,"({ template, cadence }) -- cannot pass both cadence and template")),(0,i.k)(A(n.cadence||(null===n||void 0===n?void 0:n.template)),"".concat(t,"({ cadence }) -- cadence is required")),(0,i.k)(D(n.cadence)||(null===n||void 0===n?void 0:n.template),"".concat(t,"({ cadence }) -- cadence must be a string")),e.t0=i.k,e.t1=n.cadence,e.t1){e.next=11;break}return e.next=10,c.vc().get("flow.network");case 10:e.t1=e.sent;case 11:return e.t2=e.t1,e.t3="".concat(t,'(opts) -- Required value for "flow.network" not defined in config. See: ',"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration"),(0,e.t0)(e.t2,e.t3),e.t4=i.k,e.next=17,c.vc().get("accessNode.api");case 17:e.t5=e.sent,e.t6="".concat(t,'(opts) -- Required value for "accessNode.api" not defined in config. See: ',"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration"),(0,e.t4)(e.t5,e.t6);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return K.apply(this,arguments)}function K(){return(K=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("mutate",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return X.apply(this,arguments)}function X(){return(X=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("query",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return ee.apply(this,arguments)}function ee(){return ee=(0,a.Z)(s().mark((function e(){var t,n=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,$(t);case 3:return e.next=5,W(t);case 5:return t=e.sent,e.abrupt("return",c.vc().overload(t.dependencies||{},(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.Jd([c._v(t.cadence),c.WC(O(t.args||[])),t.limit&&"number"===typeof t.limit&&c.b9(t.limit)]).then(c.Jx));case 1:case"end":return e.stop()}}),e)})))));case 7:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=(0,a.Z)(s().mark((function e(t,n){var r,a,o,u,i,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&null!=n){e.next=2;break}return e.abrupt("return",[]);case 2:return(r=new URL(t)).searchParams.append("code",n),e.next=6,fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 6:if(a=e.sent,!Array.isArray(a)){e.next=9;break}return e.abrupt("return",a);case 9:if(o=[],Array.isArray(a.authorizations)){u=(0,m.Z)(a.authorizations);try{for(u.s();!(i=u.n()).done;)c=i.value,o.push((0,g.Z)({type:"authz",keyId:a.keyId},c))}catch(s){u.e(s)}finally{u.f()}}return null!=a.provider&&o.push((0,g.Z)({type:"authn",id:"wallet-provider#authn"},a.provider)),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat((0,w.Z)(e),(0,w.Z)(t))}var ae={f_type:"Service",f_vsn:"1.0.0"},oe={f_type:"Identity",f_vsn:"1.0.0"},se={f_type:"USER",f_vsn:"1.0.0"},ue={f_type:"PollingResponse",f_vsn:"1.0.0"},ie={f_type:"CompositeSignature",f_vsn:"1.0.0"};function ce(e){return null==e?null:"1.0.0"===e.f_vsn?e:(0,g.Z)((0,g.Z)({old:e},ae),{},{type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}})}function de(e){return null==e?null:"1.0.0"===e.f_vsn?e:(0,g.Z)((0,g.Z)({},ae),{},{type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}})}function le(e){return null==e?null:(null==e.method&&(e=(0,g.Z)((0,g.Z)({},e),{},{type:"local-view",method:"VIEW/IFRAME"})),"1.0.0"===e.f_vsn?e:(0,g.Z)((0,g.Z)({},ae),{},{type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}}))}var pe={"back-channel-rpc":de,"pre-authz":function(e){return null==e?null:"1.0.0"===e.f_vsn?e:(0,g.Z)((0,g.Z)({},ae),{},{type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:(0,g.Z)((0,g.Z)({},oe),{},{address:(0,v.dq)(e.addr),keyId:e.keyId}),params:e.params,data:e.data})},authz:function(e){return null==e?null:"1.0.0"===e.f_vsn?e:(0,g.Z)((0,g.Z)({},ae),{},{type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:(0,g.Z)((0,g.Z)({},oe),{},{address:(0,v.dq)(e.addr),keyId:e.keyId}),params:e.params,data:e.data})},authn:function(e){return null==e?null:"1.0.0"===e.f_vsn?e:(0,g.Z)((0,g.Z)({},ae),{},{type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:(0,v.dq)(e.addr),name:e.name,icon:e.icon}})},frame:ce,"open-id":function(e){return null==e?null:"1.0.0"===e.f_vsn?e:null},"user-signature":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("Invalid user-signature service")},"local-view":le,"account-proof":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("FCL Normalizer Error: Invalid account-proof service")},"authn-refresh":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("Invalid authn-refresh service")}};function fe(e,t){try{return pe[e.type](e,t)}catch(n){return console.error("Unrecognized FCL Service Type [".concat(e.type,"]"),e,n),e}}function ve(e){return b.cv([e.provider.address||e.provider.name||"UNSPECIFIED",e.id]).toString("hex")}function me(e){return e.addr=e.addr?(0,v.dq)(e.addr):null,e.paddr=e.paddr?(0,v.dq)(e.paddr):null,e}function he(e,t){return t.find((function(t){return t.type===e}))}function ge(e){return ye.apply(this,arguments)}function ye(){return ye=(0,a.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=me(t),e.t0=re,e.t1=t.services||[],e.next=5,te(t.hks,t.code);case 5:return e.t2=e.sent,n=(0,e.t0)(e.t1,e.t2).map((function(e){return fe(e,t)})),r=he("authn",n),e.abrupt("return",(0,g.Z)((0,g.Z)({},se),{},{addr:(0,v.dq)(t.addr),cid:ve(r),loggedIn:!0,services:n,expiresAt:t.expires}));case 9:case"end":return e.stop()}}),e)}))),ye.apply(this,arguments)}function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find((function(e){return e.type===t}))}function we(e){var t=new URL(e.endpoint);if(t.searchParams.append("l6n",window.location.origin),null!=e.params)for(var n=0,a=Object.entries(e.params||{});n<a.length;n++){var o=(0,r.Z)(a[n],2),s=o[0],u=o[1];t.searchParams.append(s,u)}return t}function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.method||"POST",r="GET"===n?void 0:JSON.stringify(t.data||e.data||{});return fetch(we(e),{method:n,headers:(0,g.Z)((0,g.Z)((0,g.Z)({},e.headers||{}),t.headers||{}),{},{"Content-Type":"application/json"}),body:r}).then((function(e){return e.json()}))}function xe(e){var t,n;return null==e?null:"1.0.0"===e.f_vsn?e:(0,g.Z)((0,g.Z)({},ue),{},{status:null!==(t=e.status)&&void 0!==t?t:"APPROVED",reason:null!==(n=e.reason)&&void 0!==n?n:null,data:e.compositeSignature||e.data||(0,g.Z)({},e)||{},updates:de(e.authorizationUpdates),local:ce((e.local||[])[0])})}var Ee={"HTTP/GET":"GET","HTTP/POST":"POST"},Se=function(e){return(0,i.k)(Ee[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),Ee[e.method]};function Ie(e){return Re.apply(this,arguments)}function Re(){return Re=(0,a.Z)(s().mark((function e(t){var n,r,a=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:function(){return!0},(0,i.k)(t,"Missing Polling Service",{service:t}),n()){e.next=4;break}throw new Error("Externally Halted");case 4:return e.next=6,ke(t,{method:Se(t)}).then(xe);case 6:r=e.sent,e.t0=r.status,e.next="APPROVED"===e.t0?10:"DECLINED"===e.t0?11:12;break;case 10:return e.abrupt("return",r.data);case 11:throw new Error("Declined: ".concat(r.reason||"No reason supplied."));case 12:return e.next=14,new Promise((function(e){return setTimeout(e,500)}));case 14:return e.abrupt("return",Ie(r.updates,n));case 15:case"end":return e.stop()}}),e)}))),Re.apply(this,arguments)}var Ce="FCL_IFRAME";function Ze(e){(0,i.k)(!document.getElementById(Ce),"Attempt at triggering multiple Frames",{src:e});var t=document.createElement("iframe");t.src=e,t.id=Ce,t.allow="usb *; hid *",t.frameBorder="0",t.style.cssText="\n  position:fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  height: 100%;\n  width: 100vw;\n  display:block;\n  background:rgba(0,0,0,0.25);\n  z-index: 2147483647;\n  box-sizing: border-box;\n  color-scheme: light;\n",document.body.append(t);return[t.contentWindow,function(){document.getElementById(Ce)&&document.getElementById(Ce).remove()}]}var Pe=null,Ae=null;function _e(e){var t;null==Pe||null!==(t=Pe)&&void 0!==t&&t.closed?Pe=function(e,t,n,r,a){var o=n.top.outerHeight/2+n.top.screenY-a/2,s=n.top.outerWidth/2+n.top.screenX-r/2,u=n.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=".concat(r,", height=").concat(a,", top=").concat(o,", left=").concat(s));if(!u)throw new Error("Popup failed to open (was it blocked by a popup blocker?)");return u}(e,"FCL_POP",window,640,770):Ae!==e?(Pe.location.replace(e),Pe.focus()):Pe.focus(),Ae=e;return[Pe,function(){Pe&&!Pe.closed&&Pe.close(),Pe=null}]}var De=null,Te=null;function Ne(e){var t;if(null==De||null!==(t=De)&&void 0!==t&&t.closed){if(!(De=window.open(e,"_blank")))throw new Error("Tab failed to open (was it blocked by the browser?)")}else Te!==e?(De.location.replace(e),De.focus()):De.focus();Te=e;return[De,function(){De&&!De.closed&&De.close(),De=null}]}var Oe={"VIEW/IFRAME":Ze,"VIEW/POP":_e,"VIEW/TAB":Ne};function Le(e){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,a.Z)(s().mark((function e(t){var n,r=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.prev=1,e.abrupt("return",Oe[t.method](we(t),n));case 5:throw e.prev=5,e.t0=e.catch(1),console.error("execLocal({service, opts = {}})",e.t0,{service:t,opts:n}),e.t0;case 9:case"end":return e.stop()}}),e,null,[[1,5]])}))),Fe.apply(this,arguments)}function je(e){return Me.apply(this,arguments)}function Me(){return Me=(0,a.Z)(s().mark((function e(t){var n,a,o,u,i,c,d,l,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.service,a=t.body,o=t.config,t.opts,e.next=3,ke(n,{data:(0,g.Z)({fclVersion:Z,service:{params:n.params,data:n.data,type:n.type},config:o},a)}).then(xe);case 3:if("APPROVED"!==(u=e.sent).status){e.next=8;break}return e.abrupt("return",u.data);case 8:if("DECLINED"!==u.status){e.next=12;break}throw new Error("Declined: ".concat(u.reason||"No reason supplied."));case 12:if("REDIRECT"!==u.status){e.next=16;break}return e.abrupt("return",u);case 16:if("PENDING"!==u.status){e.next=28;break}return i=!0,e.next=20,Le(le(u.local));case 20:return c=e.sent,(d=(0,r.Z)(c,2))[0],l=d[1],p=function(){try{l(),i=!1}catch(e){console.error("Frame Close Error",e)}},e.abrupt("return",Ie(u.updates,(function(){return i})).then((function(e){return p(),e})).catch((function(e){throw console.error(e),p(),e})));case 28:throw console.error("Auto Decline: Invalid Response",{service:n,resp:u}),new Error("Auto Decline: Invalid Response");case 30:case"end":return e.stop()}}),e)}))),Me.apply(this,arguments)}var Ue="FCL:VIEW:CLOSE",ze="FCL:VIEW:READY",Ge="FCL:VIEW:RESPONSE",He=function(e){return"string"===typeof e&&e.toLowerCase()},qe=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),We=function(e,t){return console.warn("DEPRECATION NOTICE","Received ".concat(e,", please use ").concat(t," for this and future versions of FCL"))},Ve=function(e){var t=e.close,n=e.send,r=e.onReady,a=e.onResponse,o=e.onMessage;return function(e){try{if("object"!==(0,d.Z)(e.data))return;if(qe.has(e.data.type))return;He(e.data.type)===He(Ue)&&t(),He(e.data.type)===He(ze)&&r(e,{send:n,close:t}),He(e.data.type)===He(Ge)&&a(e,{send:n,close:t}),o(e,{send:n,close:t}),He(e.data.type)===He("FCL:FRAME:READY")&&(We(e.data.type,ze),r(e,{send:n,close:t})),He(e.data.type)===He("FCL:FRAME:RESPONSE")&&(We(e.data.type,Ge),a(e,{send:n,close:t})),He(e.data.type)===He("FCL:FRAME:CLOSE")&&(We(e.data.type,Ue),t()),He(e.data.type)===He("FCL::CHALLENGE::RESPONSE")&&(We(e.data.type,Ge),a(e,{send:n,close:t})),He(e.data.type)===He("FCL::AUTHZ_READY")&&(We(e.data.type,ze),r(e,{send:n,close:t})),He(e.data.type)===He("FCL::CHALLENGE::CANCEL")&&(We(e.data.type,Ue),t()),He(e.data.type)===He("FCL::CANCEL")&&(We(e.data.type,Ue),t())}catch(s){console.error("Frame Callback Error",s),t()}}},Be=function(){};var Je=function(){};var Ye=function(){};var Ke=function(){};var $e={"HTTP/RPC":je,"HTTP/POST":je,"IFRAME/RPC":function(e){var t=e.service,n=e.body,o=e.config,u=e.opts;return new Promise((function(e,i){var c=(0,x.h)(),l=u.includeOlderJsonRpcCall;!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return{send:Be,close:Be};var n=t.onClose||Be,a=t.onMessage||Be,o=t.onReady||Be,s=t.onResponse||Be,u=Ve({close:p,send:f,onReady:o,onResponse:s,onMessage:a});window.addEventListener("message",u);var i=Ze(we(e)),c=(0,r.Z)(i,2),d=c[0],l=c[1];return{send:f,close:p};function p(){try{window.removeEventListener("message",u),l(),n()}catch(e){console.error("Frame Close Error",e)}}function f(e){try{d.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Frame Send Error",e,t)}}}(t,{onReady:function(e,r){return(0,a.Z)(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.send,e.prev=1,a({type:"FCL:VIEW:READY:RESPONSE",fclVersion:Z,body:n,service:{params:t.params,data:t.data,type:t.type},config:o}),a({fclVersion:Z,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:o,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),l&&a({jsonrpc:"2.0",id:c,method:"fcl:sign",params:[n,t.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))()},onResponse:function(t,n){var r=n.close;try{if("object"!==(0,d.Z)(t.data))return;var a=xe(t.data);switch(a.status){case"APPROVED":e(a.data),r();break;case"DECLINED":i("Declined: ".concat(a.reason||"No reason supplied")),r();break;case"REDIRECT":e(a),r();break;default:i("Declined: No reason supplied"),r()}}catch(o){throw console.error("execIframeRPC onResponse error",o),o}},onMessage:function(t,n){var r=n.close;try{if("object"!==(0,d.Z)(t.data))return;if("2.0"!==t.data.jsonrpc)return;if(t.data.id!==c)return;var a=xe(t.data.result);switch(a.status){case"APPROVED":e(a.data),r();break;case"DECLINED":i("Declined: ".concat(a.reason||"No reason supplied")),r();break;case"REDIRECT":e(a),r();break;default:i("Declined: No reason supplied"),r()}}catch(o){throw console.error("execIframeRPC onMessage error",o),o}},onClose:function(){i("Declined: Externally Halted")}})}))},"POP/RPC":function(e){var t=e.service,n=e.body,o=e.config,u=e.opts;return new Promise((function(e,i){var c=(0,x.h)(),l=u.redir,p=u.includeOlderJsonRpcCall;!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return{send:Je,close:Je};var n=t.onClose||Je,a=t.onMessage||Je,o=t.onReady||Je,s=t.onResponse||Je,u=Ve({close:f,send:v,onReady:o,onResponse:s,onMessage:a});window.addEventListener("message",u);var i=_e(we(e)),c=(0,r.Z)(i,2),d=c[0],l=c[1],p=setInterval((function(){d&&d.closed&&f()}),500);return{send:v,close:f};function f(){try{window.removeEventListener("message",u),clearInterval(p),l(),n()}catch(e){console.error("Popup Close Error",e)}}function v(e){try{d.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Popup Send Error",e,t)}}}(t,{onReady:function(e,r){return(0,a.Z)(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.send,e.prev=1,a({fclVersion:Z,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:o}),a({fclVersion:Z,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:o,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),p&&a({jsonrpc:"2.0",id:c,method:"fcl:sign",params:[n,t.params]}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))()},onResponse:function(t,n){var r=n.close;try{if("object"!==(0,d.Z)(t.data))return;var a=xe(t.data);switch(a.status){case"APPROVED":e(a.data),!l&&r();break;case"DECLINED":i("Declined: ".concat(a.reason||"No reason supplied")),r();break;case"REDIRECT":e(a),r();break;default:i("Declined: No reason supplied"),r()}}catch(o){throw console.error("execPopRPC onResponse error",o),o}},onMessage:function(t,n){var r=n.close;try{if("object"!==(0,d.Z)(t.data))return;if("2.0"!==t.data.jsonrpc)return;if(t.data.id!==c)return;var a=xe(t.data.result);switch(a.status){case"APPROVED":e(a.data),!l&&r();break;case"DECLINED":i("Declined: ".concat(a.reason||"No reason supplied")),r();break;case"REDIRECT":e(a),r();break;default:i("Declined: No reason supplied"),r()}}catch(o){throw console.error("execPopRPC onMessage error",o),o}},onClose:function(){i("Declined: Externally Halted")}})}))},"TAB/RPC":function(e){var t=e.service,n=e.body,o=e.config,u=e.opts;return new Promise((function(e,i){var c=(0,x.h)(),l=u.redir,p=u.includeOlderJsonRpcCall;!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return{send:Ye,close:Ye};var n=t.onClose||Ye,a=t.onMessage||Ye,o=t.onReady||Ye,s=t.onResponse||Ye,u=Ve({close:f,send:v,onReady:o,onResponse:s,onMessage:a});window.addEventListener("message",u);var i=Ne(we(e)),c=(0,r.Z)(i,2),d=c[0],l=c[1],p=setInterval((function(){d&&d.closed&&f()}),500);return{send:v,close:f};function f(){try{window.removeEventListener("message",u),clearInterval(p),l(),n()}catch(e){console.error("Tab Close Error",e)}}function v(e){try{d.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Tab Send Error",e,t)}}}(t,{onReady:function(e,r){return(0,a.Z)(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.send,e.prev=1,a({fclVersion:Z,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:o}),a({fclVersion:Z,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:o,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),p&&a({jsonrpc:"2.0",id:c,method:"fcl:sign",params:[n,t.params]}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))()},onResponse:function(t,n){var r=n.close;try{if("object"!==(0,d.Z)(t.data))return;var a=xe(t.data);switch(a.status){case"APPROVED":e(a.data),!l&&r();break;case"DECLINED":i("Declined: ".concat(a.reason||"No reason supplied")),r();break;case"REDIRECT":e(a),r();break;default:i("Declined: No reason supplied"),r()}}catch(o){throw console.error("execPopRPC onResponse error",o),o}},onMessage:function(t,n){var r=n.close;try{if("object"!==(0,d.Z)(t.data))return;if("2.0"!==t.data.jsonrpc)return;if(t.data.id!==c)return;var a=xe(t.data.result);switch(a.status){case"APPROVED":e(a.data),!l&&r();break;case"DECLINED":i("Declined: ".concat(a.reason||"No reason supplied")),r();break;case"REDIRECT":e(a),r();break;default:i("Declined: No reason supplied"),r()}}catch(o){throw console.error("execPopRPC onMessage error",o),o}},onClose:function(){i("Declined: Externally Halted")}})}))},"EXT/RPC":function(e){var t=e.service,n=e.body,r=e.config;return e.opts,new Promise((function(e,o){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return{send:Ke,close:Ke};var n=t.onClose||Ke,r=t.onMessage||Ke,a=t.onReady||Ke,o=t.onResponse||Ke,s=Ve({close:u,send:i,onReady:a,onResponse:o,onMessage:r});return window.addEventListener("message",s),i({service:e}),{send:i,close:u};function u(){try{window.removeEventListener("message",s),n()}catch(e){console.error("Ext Close Error",e)}}function i(e){try{window&&window.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Ext Send Error",e,t)}}}(t,{onReady:function(e,o){return(0,a.Z)(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=o.send,e.prev=1,a({fclVersion:Z,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(1),e.t0;case 8:case"end":return e.stop()}}),e,null,[[1,5]])})))()},onResponse:function(t,n){var r=n.close;try{if("object"!==(0,d.Z)(t.data))return;var a=xe(t.data);switch(a.status){case"APPROVED":e(a.data),r();break;case"DECLINED":o("Declined: ".concat(a.reason||"No reason supplied")),r();break;case"REDIRECT":e(a),r();break;default:o("Declined: No reason supplied"),r()}}catch(s){throw console.error("execExtRPC onResponse error",s),s}},onClose:function(){o("Declined: Externally Halted")}})}))}},Xe=["ServicePlugin"],Qe=["discovery-service"],et=function(){var e=new Set,t=new Map(Object.entries($e)),n=function(t){return e=new Set((0,w.Z)(t))};return Object.freeze({add:function(e){if((0,i.k)(Qe.includes(e.type),"Service Plugin type ".concat(e.type," is not supported")),"discovery-service"===e.type){var r=function(e){var t=e.services,n=e.serviceStrategy;(0,i.k)(Array.isArray(t)&&t.length,"Array of Discovery Services is required");var r,a=(0,m.Z)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;(0,i.k)(A(o.f_type)&&"Service"===o.f_type,"Service is required"),(0,i.k)(A(o.type)&&"authn"===o.type,"Service must be type authn. Received ".concat(o.type)),(0,i.k)(o.method in $e||n.method===o.method,"Service method ".concat(o.method," is not supported"))}}catch(s){a.e(s)}finally{a.f()}return(0,i.k)(A(n),"Service strategy is required"),(0,i.k)(A(n.method)&&D(n.method),"Service strategy method is required"),(0,i.k)(A(n.exec)&&T(n.exec),"Service strategy exec function is required"),{discoveryServices:t,serviceStrategy:n}}(e),a=r.discoveryServices,o=r.serviceStrategy;n(a),t.has(o.method)?(0,k.c)({title:"Add Service Plugin",message:"Service strategy for ".concat(o.method," already exists"),level:k.z.warn}):t.set(o.method,o.exec)}},getServices:function(){return(0,w.Z)(e)},getStrategy:function(e){return t.get(e)},getStrategies:function(){return(0,w.Z)(t.keys())}})}(),tt=function(){var e=new Map;return Object.freeze({add:function(t){var n,r=function(e){var t;(0,i.k)(e,"No plugins supplied"),t=Array.isArray(e)?(0,w.Z)(e):[e];var n,r=(0,m.Z)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;(0,i.k)(A(a.name),"Plugin name is required"),(0,i.k)(A(a.f_type),"Plugin f_type is required"),(0,i.k)(Xe.includes(a.f_type),"Plugin type ".concat(a.f_type," is not supported"))}}catch(o){r.e(o)}finally{r.f()}return t}(t),a=(0,m.Z)(r);try{for(a.s();!(n=a.n()).done;){var o=n.value;e.set(o.name,o),"ServicePlugin"===o.f_type&&et.add(o)}}catch(s){a.e(s)}finally{a.f()}},getPlugins:function(){return e}})}(),nt=function(){var e=(0,a.Z)(s().mark((function e(t){var n,r,a,o,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.service,r=t.body,a=t.config,o=t.opts,u=et.getStrategy(n.method),e.abrupt("return",u({service:n,body:r,config:a,opts:o}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function rt(e){return at.apply(this,arguments)}function at(){return(at=(0,a.Z)(s().mark((function e(t){var n,r,a,o,u,c,d,l,p,f,v,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.service,u=t.msg,c=void 0===u?{}:u,d=t.config,l=void 0===d?{}:d,p=t.opts,f=void 0===p?{}:p,c.data=o.data,e.next=4,R(/^service\./);case 4:return e.t0=e.sent,e.next=7,R(/^app\.detail\./);case 7:return e.t1=e.sent,e.t2=(0,g.Z)((0,g.Z)({},l.client),{},{fclVersion:Z,fclLibrary:"https://github.com/onflow/fcl-js",hostname:null!==(n=null===(r=window)||void 0===r||null===(a=r.location)||void 0===a?void 0:a.hostname)&&void 0!==n?n:null}),v={services:e.t0,app:e.t1,client:e.t2},e.prev=10,e.next=13,nt({service:o,body:c,config:v,opts:f});case 13:if("REDIRECT"!==(m=e.sent).status){e.next=21;break}return(0,i.k)(o.type===m.data.type,"Cannot shift recursive service type in execService"),e.next=18,rt({service:m.data,msg:c,config:v,opts:f});case 18:return e.abrupt("return",e.sent);case 21:return e.abrupt("return",m);case 22:e.next=28;break;case 24:throw e.prev=24,e.t3=e.catch(10),(0,k.c)({title:"Error on execService ".concat(null===o||void 0===o?void 0:o.type),message:e.t3,level:k.z.error}),e.t3;case 28:case"end":return e.stop()}}),e,null,[[10,24]])})))).apply(this,arguments)}function ot(e){return null==e?null:"1.0.0"===e.f_vsn?e:(0,g.Z)((0,g.Z)({},ie),{},{addr:(0,v.CH)(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId})}var st,ut=function(){var e=(0,a.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(null===(t=window)||void 0===t?void 0:t.fcl_extensions)||[],e.abrupt("return",[].concat((0,w.Z)(n),(0,w.Z)(et.getServices())));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function it(e){return ct.apply(this,arguments)}function ct(){return(ct=(0,a.Z)(s().mark((function e(t){var n,r,a,o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.v.get("discovery.authn.include",[]);case 2:return r=e.sent,e.next=5,u.v.first(["discovery.wallet.method","discovery.wallet.method.default"]);case 5:if(a=e.sent,o=null!==t&&void 0!==t&&t.method?t.method:a,null===(n=null===t||void 0===t?void 0:t.endpoint)||void 0===n){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,u.v.first(["discovery.wallet","challenge.handshake"]);case 13:e.t0=e.sent;case 14:return c=e.t0,(0,i.k)(c,'\n    If no service is passed to "authenticate," then "discovery.wallet" must be defined in fcl config.\n    See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"\n    '),e.abrupt("return",(0,g.Z)((0,g.Z)({},t),{},{type:"authn",endpoint:c,method:o,discoveryAuthnInclude:r}));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){return lt.apply(this,arguments)}function lt(){return(lt=(0,a.Z)(s().mark((function e(t){var n,r,a,o,c,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.types,e.next=3,u.v.get("discovery.authn.endpoint");case 3:return o=e.sent,(0,i.k)(Boolean(o),'"discovery.authn.endpoint" in config must be defined.'),e.next=7,u.v.get("discovery.authn.include",[]);case 7:return c=e.sent,d=new URL(o),e.t0=fetch,e.t1=d,e.t2={"Content-Type":"application/json"},e.t3=JSON,e.t4=a,e.t5=Z,e.t6=c,e.next=18,ut();case 18:return e.t7=e.sent,e.t8=et.getStrategies(),e.t9=null===(n=window)||void 0===n||null===(r=n.navigator)||void 0===r?void 0:r.userAgent,e.t10={type:e.t4,fclVersion:e.t5,include:e.t6,clientServices:e.t7,supportedStrategies:e.t8,userAgent:e.t9},e.t11=e.t3.stringify.call(e.t3,e.t10),e.t12={method:"POST",headers:e.t2,body:e.t11},e.abrupt("return",(0,e.t0)(e.t1,e.t12).then((function(e){return e.json()})));case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pt,ft="authn",vt="SNAPSHOT",mt="UPDATED",ht="UPDATE_RESULTS",gt=function(){var e=(0,a.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dt({types:[ft]});case 3:t=e.sent,(0,y.lW)(ft,ht,{results:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,k.c)({title:"".concat(e.t0.name," Error fetching Discovery API services."),message:e.t0.message,level:k.z.error});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),yt=(st={},(0,h.Z)(st,y.qg,function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="undefined"===typeof window,n='"fcl.discovery" is only available in the browser.',t&&console.warn("\n      %cFCL Warning\n      ============================\n      ".concat(n,"\n      For more info, please see the docs: https://docs.onflow.org/fcl/\n      ============================\n      "),"font-weight:bold;font-family:monospace;"),"complete"===document.readyState?gt():window.onload=(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gt();case 1:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}var t,n}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)(st,ht,(function(e,t,n){e.merge(n),e.broadcast(mt,(0,g.Z)({},e.all()))})),(0,h.Z)(st,y.kD,(function(e,t){e.subscribe(t.from),e.send(t.from,mt,(0,g.Z)({},e.all()))})),(0,h.Z)(st,y.By,(function(e,t){return e.unsubscribe(t.from)})),(0,h.Z)(st,vt,function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.reply((0,g.Z)({},t.all())));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),st),bt=function(){return(0,y.Cs)(yt,ft)},wt={authn:{subscribe:function(e){return(0,y.qP)(ft,bt,e)},snapshot:function(){return(0,y.L6)(ft,bt)},update:function(){return gt()}}};function kt(){return"undefined"!==typeof navigator&&/iPhone|iPod/.test(navigator.userAgent)||"undefined"!==typeof navigator&&/iPad/.test(navigator.userAgent)}function xt(){return"undefined"!==typeof navigator&&/android/i.test(navigator.userAgent)||kt()}var Et=function(e){return"function"===typeof e},St="CURRENT_USER",It="CURRENT_USER/UPDATED",Rt="SNAPSHOT",Ct="SET_CURRENT_USER",Zt="DEL_CURRENT_USER",Pt='{\n  "f_type": "User",\n  "f_vsn": "1.0.0",\n  "addr":null,\n  "cid":null,\n  "loggedIn":null,\n  "expiresAt":null,\n  "services":[]\n}',At=function(){var e=(0,a.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(Pt),e.next=3,t.get(St);case 3:if(null==(r=e.sent)||n.f_vsn===r.f_vsn){e.next=7;break}return t.removeItem(St),e.abrupt("return",n);case 7:return e.abrupt("return",r||n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_t=(pt={},(0,h.Z)(pt,y.qg,function(){var e=(0,a.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"undefined"===typeof window&&console.warn('\n        %cFCL Warning\n        ============================\n        "currentUser" is only available in the browser.\n        For more info, please see the docs: https://docs.onflow.org/fcl/\n        ============================\n        ',"font-weight:bold;font-family:monospace;"),t.merge(JSON.parse(Pt)),e.next=4,u.v.first(["fcl.storage","fcl.storage.default"]);case 4:if(!(n=e.sent).can){e.next=10;break}return e.next=8,At(n);case 8:Tt(r=e.sent)&&t.merge(r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)(pt,y.kD,(function(e,t){e.subscribe(t.from),e.send(t.from,It,(0,g.Z)({},e.all()))})),(0,h.Z)(pt,y.By,(function(e,t){e.unsubscribe(t.from)})),(0,h.Z)(pt,Rt,function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.reply((0,g.Z)({},t.all()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,h.Z)(pt,Ct,function(){var e=(0,a.Z)(s().mark((function e(t,n,r){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.merge(r),e.next=3,u.v.first(["fcl.storage","fcl.storage.default"]);case 3:(a=e.sent).can&&a.put(St,t.all()),t.broadcast(It,(0,g.Z)({},t.all()));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),(0,h.Z)(pt,Zt,function(){var e=(0,a.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.merge(JSON.parse(Pt)),e.next=3,u.v.first(["fcl.storage","fcl.storage.default"]);case 3:(r=e.sent).can&&r.put(St,t.all()),t.broadcast(It,(0,g.Z)({},t.all()));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),pt),Dt=function(){return(0,y.Cs)(_t,St)};function Tt(e){return null==e.expiresAt||0===e.expiresAt||e.expiresAt>Date.now()}function Nt(){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,a.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.v.get("fcl.accountProof.resolver");case 2:if(t=e.sent,Et(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t();case 7:if(null!=(n=e.sent)){e.next=10;break}return e.abrupt("return");case 10:return(0,i.k)("string"===typeof n.appIdentifier,"appIdentifier must be a string"),(0,i.k)(/^[0-9a-f]+$/i.test(n.nonce),"Nonce must be a hex string"),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lt=function(){var e=(0,a.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.discoveryAuthnInclude,e.t0=n,e.next=4,ut();case 4:return e.t1=e.sent,e.t2=et.getStrategies(),e.t3={discoveryAuthnInclude:e.t0,clientServices:e.t1,supportedStrategies:e.t2},e.abrupt("return",{client:e.t3});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ft(){return jt.apply(this,arguments)}function jt(){return jt=(0,a.Z)(s().mark((function e(){var t,n,r,o,u,i,c,d=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>0&&void 0!==d[0]?d[0]:{},o=r.service,u=r.redir,i=void 0!==u&&u,!o||null!==o&&void 0!==o&&null!==(t=o.provider)&&void 0!==t&&t.is_installed||null===o||void 0===o||null===(n=o.provider)||void 0===n||!n.requires_install){e.next=4;break}return window.location.href=null===o||void 0===o||null===(c=o.provider)||void 0===c?void 0:c.install_link,e.abrupt("return");case 4:return e.abrupt("return",new Promise(function(){var e=(0,a.Z)(s().mark((function e(t,n){var r,a,u,c,d,l,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dt(),r={redir:i},e.next=4,qt();case 4:return a=e.sent,e.next=7,it(o);case 7:return u=e.sent,c=be(a.services,"authn-refresh"),e.prev=9,e.next=12,Nt();case 12:d=e.sent,e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(9),console.error("Error During Authentication: Could not resolve account proof data.\n        ".concat(e.t0)),e.abrupt("return",n(e.t0));case 19:if(!a.loggedIn){e.next=47;break}if(!c){e.next=46;break}return e.prev=21,e.next=24,rt({service:c,msg:d,opts:r});case 24:return l=e.sent,e.t1=y.lW,e.t2=St,e.t3=Ct,e.next=30,ge(l);case 30:e.t4=e.sent,(0,e.t1)(e.t2,e.t3,e.t4),e.next=37;break;case 34:e.prev=34,e.t5=e.catch(21),console.error("Error: Could not refresh authentication.",e.t5);case 37:return e.prev=37,e.t6=t,e.next=41,qt();case 41:return e.t7=e.sent,e.abrupt("return",(0,e.t6)(e.t7));case 44:e.next=47;break;case 46:return e.abrupt("return",t(a));case 47:return e.prev=47,e.t8=rt,e.t9=u,e.t10=d,e.next=53,Lt(u);case 53:return e.t11=e.sent,e.t12=r,e.t13={service:e.t9,msg:e.t10,config:e.t11,opts:e.t12},e.next=58,(0,e.t8)(e.t13);case 58:return p=e.sent,e.t14=y.lW,e.t15=St,e.t16=Ct,e.next=64,ge(p);case 64:e.t17=e.sent,(0,e.t14)(e.t15,e.t16,e.t17),e.next=71;break;case 68:e.prev=68,e.t18=e.catch(47),console.error("Error while authenticating",e.t18);case 71:return e.prev=71,e.t19=t,e.next=75,qt();case 75:return e.t20=e.sent,(0,e.t19)(e.t20),e.finish(71);case 78:case"end":return e.stop()}}),e,null,[[9,15],[21,34,37,44],[47,68,71,78]])})));return function(t,n){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)}))),jt.apply(this,arguments)}function Mt(){Dt(),(0,y.lW)(St,Zt)}function Ut(e){var t=function(e){return{f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}}(e),n=[];null!=t.proposer&&n.push(["PROPOSER",t.proposer]);var a,o=(0,m.Z)(t.payer||[]);try{for(o.s();!(a=o.n()).done;){var s=a.value;n.push(["PAYER",s])}}catch(l){o.e(l)}finally{o.f()}var u,i=(0,m.Z)(t.authorization||[]);try{for(i.s();!(u=i.n()).done;){var c=u.value;n.push(["AUTHORIZER",c])}}catch(l){i.e(l)}finally{i.f()}var d=n.map((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return{tempId:[a.identity.address,a.identity.keyId].join("|"),addr:a.identity.address,keyId:a.identity.keyId,signingFunction:function(e){return rt({service:a,msg:e})},role:{proposer:"PROPOSER"===n,payer:"PAYER"===n,authorizer:"AUTHORIZER"===n}}}));return d}function zt(e){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dt(),e.abrupt("return",(0,g.Z)((0,g.Z)({},t),{},{tempId:"CURRENT_USER",resolve:function(e,t){return(0,a.Z)(s().mark((function n(){var r,o,u,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ft({redir:!0});case 2:if(r=n.sent,o=be(r.services,"authz"),!(u=be(r.services,"pre-authz"))){n.next=11;break}return n.t0=Ut,n.next=9,rt({service:u,msg:t});case 9:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 11:if(!o){n.next=14;break}return xt()&&"WC/RPC"===o.method&&(i=window.open("","_blank")),n.abrupt("return",(0,g.Z)((0,g.Z)({},e),{},{tempId:"CURRENT_USER",resolve:null,addr:(0,v.CH)(o.identity.address),keyId:o.identity.keyId,sequenceNum:null,signature:null,signingFunction:function(e){return(0,a.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ot,t.next=3,rt({service:o,msg:e,opts:{includeOlderJsonRpcCall:!0,windowRef:i}});case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})))()}}));case 14:throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER");case 15:case"end":return n.stop()}}),n)})))()}}));case 2:case"end":return e.stop()}}),e)}))),Gt.apply(this,arguments)}function Ht(e){Dt();var t="@EXIT",n=(0,y.Cs)(function(){var n=(0,a.Z)(s().mark((function n(r){var a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.send(St,y.kD);case 1:return n.next=4,r.receive();case 4:if((a=n.sent).tag!==t){n.next=8;break}return r.send(St,y.By),n.abrupt("return");case 8:e(a.data),n.next=1;break;case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());return function(){return(0,y.lW)(n,t)}}function qt(){return Dt(),(0,y.lW)(St,Rt,null,{expectReply:!0,timeout:0})}function Wt(){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,a.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft();case 2:return t=e.sent,n=t.addr,e.abrupt("return",(0,c.R9)((0,v.dq)(n),l.Address));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bt=function(e){return(0,i.k)(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}};function Jt(e){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,a.Z)(s().mark((function e(t){var n,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dt(),e.next=3,Ft({redir:!0});case 3:return n=e.sent,r=be(n.services,"user-signature"),(0,i.k)(r,"Current user must have authorized a signing service."),e.prev=6,e.next=9,rt({service:r,msg:Bt(t)});case 9:if(a=e.sent,!Array.isArray(a)){e.next=14;break}return e.abrupt("return",a.map((function(e){return ot(e)})));case 14:return e.abrupt("return",[ot(a)]);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(6),e.abrupt("return",e.t0);case 20:case"end":return e.stop()}}),e,null,[[6,17]])})))).apply(this,arguments)}var Kt=function(){return{authenticate:Ft,unauthenticate:Mt,authorization:zt,signUserMessage:Jt,subscribe:Ht,snapshot:qt,resolveArgument:Wt}};function $t(){return Xt.apply(this,arguments)}function Xt(){return Xt=(0,a.Z)(s().mark((function e(){var t,n,r,o=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.prev=1,e.next=4,Y(t);case 4:return e.next=6,W(t);case 6:return t=e.sent,e.next=9,c.vc().get("fcl.authz",Kt().authorization);case 9:return r=e.sent,n=c.vc().overload(t.dependencies||{},(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.Jd([c.PS(t.cadence),c.WC(O(t.args||[])),t.limit&&N(t.limit)&&c.b9(t.limit),c.iB(t.proposer||t.authz||r),c.$C(t.payer||t.authz||r),c.KX(t.authorizations||[t.authz||r])]).then(c.Jx));case 1:case"end":return e.stop()}}),e)})))),e.abrupt("return",n);case 14:throw e.prev=14,e.t0=e.catch(1),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,14]])}))),Xt.apply(this,arguments)}Kt.authenticate=Ft,Kt.unauthenticate=Mt,Kt.authorization=zt,Kt.signUserMessage=Jt,Kt.subscribe=Ht,Kt.snapshot=qt,Kt.resolveArgument=Wt;var Qt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=function(e){var t;return e.deprecated&&console.warn("DEPRECATION NOTICE",e.deprecated.message),null===e||void 0===e||(null===(t=e.body)||void 0===t||delete t.interaction),e},r=function(r){var a=r.data;"object"===(0,d.Z)(a)&&null!=(0,d.Z)(a)&&a.type===e&&t(n(a))};return window.addEventListener("message",r),function(){return window.removeEventListener("message",r)}},en=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window.location!==window.parent.location)window.parent.postMessage((0,g.Z)((0,g.Z)({},t),{},{type:e}),"*");else{if(!window.opener)throw new Error("Unable to communicate with parent FCL instance");window.opener.postMessage((0,g.Z)((0,g.Z)({},t),{},{type:e}),"*")}};var tn=function(e,t){return b.lW.from(e.padEnd(2*t,"0"),"hex")},nn=function(e){return t=e,n=8,b.lW.from(t.padStart(2*n,"0"),"hex");var t,n},rn=function(e){return b.lW.from(e,"hex")},an=function(e){var t=e.address,n=e.nonce,r=e.appIdentifier,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,i.k)(t,"Encode Message For Provable Authn Error: address must be defined"),(0,i.k)(n,"Encode Message For Provable Authn Error: nonce must be defined"),(0,i.k)(r,"Encode Message For Provable Authn Error: appIdentifier must be defined"),(0,i.k)(n.length>=64,"Encode Message For Provable Authn Error: nonce must be minimum of 32 bytes");var o=tn(b.lW.from("FCL-ACCOUNT-PROOF-V0.0").toString("hex"),32);return a?b.lW.concat([o,(0,b.cv)([r,nn((0,v.CH)(t)),rn(n)])]).toString("hex"):(0,b.cv)([r,nn((0,v.CH)(t)),rn(n)]).toString("hex")};var on=Object.freeze({__proto__:null,sendMsgToFCL:en,ready:function(e){Qt("FCL:VIEW:READY:RESPONSE",e),en("FCL:VIEW:READY")},close:function(){en("FCL:VIEW:CLOSE")},approve:function(e){en("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"APPROVED",reason:null,data:e})},decline:function(e){en("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"DECLINED",reason:e,data:null})},redirect:function(e){en("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"REDIRECT",reason:null,data:e})},onMessageFromFCL:Qt,encodeMessageFromSignable:c.Oq,CompositeSignature:function(e,t,n){this.f_type=ie.f_type,this.f_vsn=ie.f_vsn,this.addr=(0,v.dq)(e),this.keyId=Number(t),this.signature=n},encodeAccountProof:an,injectExtService:function(e){"authn"===e.type&&null!=e.endpoint?(Array.isArray(window.fcl_extensions)||(window.fcl_extensions=[]),window.fcl_extensions.push(e)):console.warn("Authn service is required")}}),sn="ACCOUNT_PROOF",un="USER_SIGNATURE",cn=function(e){if(e.appIdentifier){var t=e.appIdentifier,n=e.address,r=e.nonce,a=e.signatures;return(0,i.k)(D(t),"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string"),(0,i.k)(D(n)&&16===(0,v.CH)(n).length,"verifyAccountProof({ address }) -- address must be a valid address"),(0,i.k)(/^[0-9a-f]+$/i.test(r),"nonce must be a hex string"),(0,i.k)(Array.isArray(a)&&a.every((function(e,t,n){return"CompositeSignature"===e.f_type})),"Must include an Array of CompositeSignatures to verify"),(0,i.k)(a.map((function(e){return e.addr})).every((function(e,t,n){return e===n[0]})),"User signatures to be verified must be from a single account address"),!0}var o=e.message,s=e.address,u=e.compSigs;return(0,i.k)(/^[0-9a-f]+$/i.test(o),"Signed message must be a hex string"),(0,i.k)(D(s)&&16===(0,v.CH)(s).length,"verifyUserSignatures({ address }) -- address must be a valid address"),(0,i.k)(Array.isArray(u)&&u.every((function(e,t,n){return"CompositeSignature"===e.f_type})),"Must include an Array of CompositeSignatures to verify"),(0,i.k)(u.map((function(e){return e.addr})).every((function(e,t,n){return e===n[0]})),"User signatures to be verified must be from a single account address"),!0},dn=function(){var e=(0,a.Z)(s().mark((function e(t,n){var r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="ACCOUNT_PROOF"===t?"verifyAccountProofSignatures":"verifyUserSignatures",e.next=3,u.v.get("flow.network");case 3:if(a=e.sent){e.next=9;break}return e.next=7,u.v.get("env");case 7:(a=e.sent)&&k.c.deprecate({pkg:"FCL",subject:'Using the "env" configuration key for specifying the flow network',message:'Please use "flow.network" instead.',transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key"});case 9:return(0,i.k)(n.fclCryptoContract||"testnet"===a||"mainnet"===a,"${verifyFunction}({ fclCryptoContract }) -- config.flow.network must be specified (testnet || mainnet) or contract address provided via opts.fclCryptoContract"),o=n.fclCryptoContract?n.fclCryptoContract:"testnet"===a?"0x74daa6f9c7ef24b1":"0xb4b82a1c9d21d284",e.abrupt("return","\n      import FCLCrypto from ".concat(o,"\n\n      pub fun main(\n          address: Address, \n          message: String, \n          keyIndices: [Int], \n          signatures: [String]\n      ): Bool {\n        return FCLCrypto.").concat(r,"(address: address, message: message, keyIndices: keyIndices, signatures: signatures)\n      }\n    "));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function ln(){return ln=(0,a.Z)(s().mark((function e(t,n){var r,a,o,u,i,c,d,l,p,f,h=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.address,a=n.nonce,o=n.signatures,u=h.length>2&&void 0!==h[2]?h[2]:{},cn({appIdentifier:t,address:r,nonce:a,signatures:o}),i=an({address:r,nonce:a,appIdentifier:t},!1),c=[],d=[],l=(0,m.Z)(o);try{for(l.s();!(p=l.n()).done;)f=p.value,c.push(f.signature),d.push(f.keyId.toString())}catch(s){l.e(s)}finally{l.f()}return e.t0=Q,e.next=11,dn(sn,u);case 11:return e.t1=e.sent,e.t2=function(e,t){return[e((0,v.dq)(r),t.Address),e(i,t.String),e(d,t.Array(t.Int)),e(c,t.Array(t.String))]},e.t3={cadence:e.t1,args:e.t2},e.abrupt("return",(0,e.t0)(e.t3));case 15:case"end":return e.stop()}}),e)}))),ln.apply(this,arguments)}function pn(e,t){return fn.apply(this,arguments)}function fn(){return fn=(0,a.Z)(s().mark((function e(t,n){var r,a,o,u,i,c,d,l=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=l.length>2&&void 0!==l[2]?l[2]:{},a=(0,v.dq)(n[0].addr),cn({message:t,address:a,compSigs:n}),o=[],u=[],i=(0,m.Z)(n);try{for(i.s();!(c=i.n()).done;)d=c.value,o.push(d.signature),u.push(d.keyId.toString())}catch(s){i.e(s)}finally{i.f()}return e.t0=Q,e.next=10,dn(un,r);case 10:return e.t1=e.sent,e.t2=function(e,n){return[e(a,n.Address),e(t,n.String),e(u,n.Array(n.Int)),e(o,n.Array(n.String))]},e.t3={cadence:e.t1,args:e.t2},e.abrupt("return",(0,e.t0)(e.t3));case 14:case"end":return e.stop()}}),e)}))),fn.apply(this,arguments)}var vn,mn,hn=Object.freeze({__proto__:null,verifyAccountProof:function(e,t){return ln.apply(this,arguments)},verifyUserSignatures:pn}),gn=k.c.deprecate({pkg:"FCL",subject:"fcl.verifyUserSignatures()",message:"Please use fcl.AppUtils.verifyUserSignatures()",callback:function(e,t){return pn(e,t)}}),yn=function(){var e=(0,a.Z)(s().mark((function e(){var t,n,r,a=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],n=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,c.vc.first(["sdk.resolve"],n.resolve||c.DB);case 4:if(r=e.sent,!Array.isArray(t)){e.next=9;break}return e.next=8,(0,c.zG)((0,c.Tl)(),t);case 8:t=e.sent;case 9:return e.t0=JSON,e.t1=c.c0,e.next=13,r(t);case 13:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",e.t0.stringify.call(e.t0,e.t3,null,2));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bn="POLL",wn=function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.Jd)([(0,c.Lv)(t)]).then(c.Jx));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kn=function(e){return e.status>=4},xn=function(e){return e.status>=3},En=function(e){return e.status>=2},Sn=(vn={},(0,h.Z)(vn,y.qg,function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.sendSelf(bn);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)(vn,y.kD,(function(e,t){e.subscribe(t.from),e.send(t.from,y.SH,e.all())})),(0,h.Z)(vn,y.By,(function(e,t){e.unsubscribe(t.from)})),(0,h.Z)(vn,y.kT,function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.reply(t.all());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,h.Z)(vn,bn,function(){var e=(0,a.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wn(t.self());case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",t.fatalError(e.t0));case 9:kn(n)||setTimeout((function(){return t.sendSelf(bn)}),2500),r=t.all(),a=n,JSON.stringify(r)!==JSON.stringify(a)&&t.broadcast(y.SH,n),t.merge(n);case 12:case"end":return e.stop()}var r,a}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),vn),In=function(e){if("object"===(0,d.Z)(e)&&(e=e.transactionId),null==e)throw new Error("transactionId required");return e},Rn=function(e){return(0,y.Cs)(Sn,In(e))};function Cn(e){function t(t){return(0,y.qP)(In(e),Rn,t)}function n(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.suppress||!1;return new Promise((function(n,a){var o=t((function(t,s){!s&&!t.statusCode||r?e(t)&&(n(t),o()):(a(s||t.errorMessage),o())}))}))}}return{snapshot:function(){return(0,y.L6)(e,Rn)},subscribe:t,onceFinalized:n(En),onceExecuted:n(xn),onceSealed:n(kn)}}Cn.isUnknown=function(e){return e.status>=0},Cn.isPending=function(e){return e.status>=1},Cn.isFinalized=En,Cn.isExecuted=xn,Cn.isSealed=kn,Cn.isExpired=function(e){return 5===e.status};var Zn="TICK",Pn="hwm",An=function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=setTimeout,e.t1=function(){return t.sendSelf(Zn)},e.next=4,(0,c.vc)().get("fcl.eventPollRate",1e4);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_n=(mn={},(0,h.Z)(mn,Zn,function(){var e=(0,a.Z)(s().mark((function e(t){var n,r,a,o,u,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hasSubs()){e.next=2;break}return e.abrupt("return");case 2:if(null!=(n=t.get(Pn))){e.next=18;break}return e.t0=t,e.t1=Pn,e.next=8,(0,c.Ge)();case 8:return e.t2=e.sent,e.t0.put.call(e.t0,e.t1,e.t2),e.t3=t,e.t4=Zn,e.next=14,An(t);case 14:e.t5=e.sent,e.t3.put.call(e.t3,e.t4,e.t5),e.next=34;break;case 18:return e.next=20,(0,c.Ge)();case 20:if(r=e.sent,t.put(Pn,r),!(n.height<r.height)){e.next=28;break}return e.next=25,(0,c.Jd)([(0,c.oL)(t.self(),n.height+1,r.height)]).then(c.Jx);case 25:a=e.sent,o=(0,m.Z)(a);try{for(o.s();!(u=o.n()).done;)i=u.value,t.broadcast("UPDATED",i.data)}catch(s){o.e(s)}finally{o.f()}case 28:return e.t6=t,e.t7=Zn,e.next=32,An(t);case 32:e.t8=e.sent,e.t6.put.call(e.t6,e.t7,e.t8);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)(mn,y.kD,function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hasSubs()){e.next=7;break}return e.t0=t,e.t1=Zn,e.next=5,An(t);case 5:e.t2=e.sent,e.t0.put.call(e.t0,e.t1,e.t2);case 7:t.subscribe(n.from);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,h.Z)(mn,y.By,(function(e,t){e.unsubscribe(t.from),e.hasSubs()||(clearTimeout(e.get(Zn)),e.delete(Zn),e.delete(Pn))})),mn),Dn=function(e){return(0,y.Cs)(_n,e)};function Tn(e){return{subscribe:function(t){return(0,y.qP)(e,Dn,t)}}}var Nn={},On={},Ln={},Fn={},jn=function(e,t){return function(n,r){var a=2*r,o=2*t;n[a]=e[o],n[a+1]=e[o+1]}};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=jn)&&t.__esModule?t:{default:t};var r=function(e){for(var t=e.A,r=e.C,a=0;a<25;a+=5){for(var o=0;o<5;o++)(0,n.default)(t,a+o)(r,o);for(var s=0;s<5;s++){var u=2*(a+s),i=(s+1)%5*2,c=(s+2)%5*2;t[u]^=~r[i]&r[c],t[u+1]^=~r[i+1]&r[c+1]}}};e.default=r}(Fn);var Mn={},Un={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]);e.default=t}(Un),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=Un)&&t.__esModule?t:{default:t};var r=function(e){var t=e.A,r=2*e.roundIndex;t[0]^=n.default[r],t[1]^=n.default[r+1]};e.default=r}(Mn);var zn={},Gn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1];e.default=t}(Gn);var Hn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44];e.default=t}(Hn),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(Gn),n=a(Hn),r=a(jn);function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var a=e.A,o=e.C,s=e.W;(0,r.default)(a,1)(s,0);for(var u=0,i=0,c=0,d=32,l=0;l<24;l++){var p=t.default[l],f=n.default[l];(0,r.default)(a,p)(o,0),u=s[0],i=s[1],d=32-f,s[c=f<32?0:1]=u<<f|i>>>d,s[(c+1)%2]=i<<f|u>>>d,(0,r.default)(s,0)(a,p),(0,r.default)(o,0)(s,0)}};e.default=o}(zn);var qn={};function Wn(e){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,a.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Nn.SHA3(256)).update(b.lW.from(t,"utf8")),e.abrupt("return",n.digest("hex"));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bn(e){return Jn.apply(this,arguments)}function Jn(){return Jn=(0,a.Z)(s().mark((function e(t){var n,r,o,u,i,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.template,(0,c.kG)(void 0!=n,"generateTemplateId({ template }) -- template must be defined"),(0,c.kG)("object"===(0,d.Z)(n),"generateTemplateId({ template }) -- template must be an object"),(0,c.kG)("InteractionTemplate"===typeof n.f_type,"generateTemplateId({ template }) -- template object must be an InteractionTemplate"),n=z(n),e.t0=n.f_version,e.next="1.0.0"===e.t0?8:40;break;case 8:return r=n.data,e.next=11,Promise.all(Object.keys(r.messages).map(function(){var e=(0,a.Z)(s().mark((function e(t){var n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(t);case 2:return e.t0=e.sent,e.next=5,Promise.all(Object.keys(null===(n=r.messages)||void 0===n||null===(o=n[t])||void 0===o?void 0:o.i18n).map(function(){var e=(0,a.Z)(s().mark((function e(n){var a,o,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(n);case 2:return e.t0=e.sent,e.next=5,Wn(null===(a=r.messages)||void 0===a||null===(o=a[t])||void 0===o||null===(u=o.i18n)||void 0===u?void 0:u[n]);case 5:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return o=e.sent,e.next=14,Promise.all(Object.keys(null===r||void 0===r?void 0:r.dependencies).map(function(){var e=(0,a.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(t);case 2:return e.t0=e.sent,e.next=5,Promise.all(Object.keys(null===r||void 0===r||null===(n=r.dependencies)||void 0===n?void 0:n[t]).map(function(){var e=(0,a.Z)(s().mark((function e(n){var o,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(n);case 2:return e.t0=e.sent,e.next=5,Promise.all(Object.keys(null===r||void 0===r||null===(o=r.dependencies)||void 0===o||null===(u=o[t])||void 0===u?void 0:u[n]).map(function(){var e=(0,a.Z)(s().mark((function e(a){var o,u,i,c,d,l,p,f,v,m,h,g,y,b,w;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(a);case 2:return e.t0=e.sent,e.next=5,Wn(null===r||void 0===r||null===(o=r.dependencies)||void 0===o||null===(u=o[t])||void 0===u||null===(i=u[n])||void 0===i?void 0:i[a].address);case 5:return e.t1=e.sent,e.next=8,Wn(null===r||void 0===r||null===(c=r.dependencies)||void 0===c||null===(d=c[t])||void 0===d||null===(l=d[n])||void 0===l?void 0:l[a].contract);case 8:return e.t2=e.sent,e.next=11,Wn(null===r||void 0===r||null===(p=r.dependencies)||void 0===p||null===(f=p[t])||void 0===f||null===(v=f[n])||void 0===v?void 0:v[a].fq_address);case 11:return e.t3=e.sent,e.next=14,Wn(null===r||void 0===r||null===(m=r.dependencies)||void 0===m||null===(h=m[t])||void 0===h||null===(g=h[n])||void 0===g?void 0:g[a].pin);case 14:return e.t4=e.sent,e.next=17,Wn(String(null===r||void 0===r||null===(y=r.dependencies)||void 0===y||null===(b=y[t])||void 0===b||null===(w=b[n])||void 0===w?void 0:w[a].pin_block_height));case 17:return e.t5=e.sent,e.t6=[e.t1,e.t2,e.t3,e.t4,e.t5],e.abrupt("return",[e.t0,e.t6]);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return u=e.sent,e.next=17,Promise.all(Object.keys(null===r||void 0===r?void 0:r.arguments).map(function(){var e=(0,a.Z)(s().mark((function e(t){var n,o,u,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(t);case 2:return e.t0=e.sent,e.next=5,Wn(String(null===r||void 0===r||null===(n=r.arguments)||void 0===n?void 0:n[t].index));case 5:return e.t1=e.sent,e.next=8,Wn(null===r||void 0===r||null===(o=r.arguments)||void 0===o?void 0:o[t].type);case 8:return e.t2=e.sent,e.next=11,Wn((null===r||void 0===r||null===(u=r.arguments)||void 0===u?void 0:u[t].balance)||"");case 11:return e.t3=e.sent,e.next=14,Promise.all(Object.keys(null===r||void 0===r||null===(i=r.arguments)||void 0===i?void 0:i[t].messages).map(function(){var e=(0,a.Z)(s().mark((function e(n){var o,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(n);case 2:return e.t0=e.sent,e.next=5,Promise.all(Object.keys(null===r||void 0===r||null===(o=r.arguments)||void 0===o||null===(u=o[t].messages)||void 0===u?void 0:u[n].i18n).map(function(){var e=(0,a.Z)(s().mark((function e(a){var o,u,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(a);case 2:return e.t0=e.sent,e.next=5,Wn(null===r||void 0===r||null===(o=r.arguments)||void 0===o||null===(u=o[t].messages)||void 0===u||null===(i=u[n].i18n)||void 0===i?void 0:i[a]);case 5:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return e.t4=e.sent,e.t5=[e.t1,e.t2,e.t3,e.t4],e.abrupt("return",[e.t0,e.t5]);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 17:return i=e.sent,e.t1=b.cv,e.next=21,Wn("InteractionTemplate");case 21:return e.t2=e.sent,e.next=24,Wn("1.0.0");case 24:return e.t3=e.sent,e.next=27,Wn(null===r||void 0===r?void 0:r.type);case 27:return e.t4=e.sent,e.next=30,Wn(null===r||void 0===r?void 0:r.interface);case 30:return e.t5=e.sent,e.t6=o,e.next=34,Wn(null===r||void 0===r?void 0:r.cadence);case 34:return e.t7=e.sent,e.t8=u,e.t9=i,e.t10=[e.t2,e.t3,e.t4,e.t5,e.t6,e.t7,e.t8,e.t9],l=(0,e.t1)(e.t10).toString("hex"),e.abrupt("return",Wn(l));case 40:throw new Error("generateTemplateId Error: Unsupported template version");case 41:case"end":return e.stop()}}),e)}))),Jn.apply(this,arguments)}function Yn(){return Yn=(0,a.Z)(s().mark((function e(t){var n,r,a,o,u,i,d,l,p=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.template,r=t.auditors,a=p.length>1&&void 0!==p[1]?p[1]:{},(0,c.kG)(void 0!=n,"getInteractionTemplateAudits({ template }) -- template must be defined"),n=z(n),(0,c.kG)("InteractionTemplate"===n.f_type,"getInteractionTemplateAudits({ template }) -- template must be an InteractionTemplate"),e.next=7,Bn({template:n});case 7:if((o=e.sent)===n.id){e.next=11;break}throw(0,k.c)({title:"getInteractionTemplateAudits Debug Error",message:"Could not recompute and match template ID\n                computed: ".concat(o,"\n                template: ").concat(n.id,"\n            "),level:k.z.debug}),new Error("getInteractionTemplateAudits Error: Could not recompute and match template ID");case 11:e.t0=n.f_version,e.next="1.0.0"===e.t0?14:33;break;case 14:if(e.t1=r,e.t1){e.next=19;break}return e.next=18,(0,c.vc)().get("flow.auditors");case 18:e.t1=e.sent;case 19:if(u=e.t1,(0,c.kG)(u,"getInteractionTemplateAudits Error: Required configuration for 'fcl.auditors' is not set"),(0,c.kG)(Array.isArray(u),"getInteractionTemplateAudits Error: Required configuration for 'fcl.auditors' is not an array"),i=a.flowInteractionAuditContract){e.next=29;break}return e.next=26,(0,c.vc)().get("flow.network");case 26:d=e.sent,(0,c.kG)("mainnet"===d||"testnet"===d,"getInteractionTemplateAudits Error: Unable to determine address for FlowInteractionTemplateAudit contract. Set configuration for 'fcl.network' to 'mainnet' or 'testnet'"),i="mainnet"===d?"0xfd100e39d50a13e6":"0xf78bfc12d0a786dc";case 29:return e.next=31,Q({cadence:"\n        import FlowInteractionTemplateAudit from ".concat(i,"\n        pub fun main(templateId: String, auditors: [Address]): {Address:Bool} {\n          return FlowInteractionTemplateAudit.getHasTemplateBeenAuditedByAuditors(templateId: templateId, auditors: auditors)\n        }\n        "),args:function(e,t){return[e(o,t.String),e(u,t.Array(t.Address))]}});case 31:return l=e.sent,e.abrupt("return",l);case 33:throw new Error("getInteractionTemplateAudits Error: Unsupported template version");case 34:case"end":return e.stop()}}),e)}))),Yn.apply(this,arguments)}function Kn(e){return{contractName:e.contractName,address:e.address,contract:""}}function $n(e){var t,n=[],r=e.match(/import ((\w|,| )+)* from 0x\w+/g)||[],a=(0,m.Z)(r);try{for(a.s();!(t=a.n()).done;){var o,s=t.value,u=/import ((\w+|, |)*) from (0x\w+)/g.exec(s),i=u[1].match(/((?:\w+)+),?/g)||[],c=(0,m.Z)(i);try{for(c.s();!(o=c.n()).done;){var d=o.value;n.push(Kn({address:u[3],contractName:d.replace(/,/g,"")}))}}catch(l){c.e(l)}finally{c.f()}}}catch(l){a.e(l)}finally{a.f()}return n}function Xn(e){return Qn.apply(this,arguments)}function Qn(){return Qn=(0,a.Z)(s().mark((function e(t){var n,r,a,o,u,i,d,l,p,f,v,m,h,g=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.address,r=t.contractName,a=t.blockHeight,o=g.length>1&&void 0!==g[1]?g[1]:{},(0,c.kG)(void 0!=n,"generateDependencyPin({ address }) -- address must be defined"),(0,c.kG)(void 0!=r,"generateDependencyPin({ contractName }) -- contractName must be defined"),(0,c.kG)(void 0!=a,"generateDependencyPin({ blockHeight }) -- blockHeight must be defined"),(0,c.kG)("string"===typeof n,"generateDependencyPin({ address }) -- address must be a string"),(0,c.kG)("string"===typeof r,"generateDependencyPin({ contractName }) -- contractName must be a string"),(0,c.kG)("number"===typeof a,"generateDependencyPin({ blockHeight }) -- blockHeight must be a number"),u=[Kn({contractName:r,address:n})],i=0,d=u;case 10:if(!(i<d.length)){e.next=33;break}return p=d[i],e.t0=c.Jd,e.t1=c.D0,e.next=16,(0,c.vc)().get(p.address,p.address);case 16:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=(0,c.o9)(a),e.t5=[e.t3,e.t4],e.t6=o,e.next=23,(0,e.t0)(e.t5,e.t6).then(c.Jx);case 23:if(f=e.sent,p.contract=null===(l=f.contracts)||void 0===l?void 0:l[p.contractName],p.contract){e.next=28;break}throw console.error("Did not find expected contract",p,f),new Error("Did not find expected contract");case 28:v=$n(p.contract),u.push.apply(u,(0,w.Z)(v));case 30:i++,e.next=10;break;case 33:return m=u.map((function(e){return Wn(e.contract)})),h=m.join(""),e.abrupt("return",Wn(h));case 36:case"end":return e.stop()}}),e)}))),Qn.apply(this,arguments)}function er(){return er=(0,a.Z)(s().mark((function e(t){var n,r,a,o,u,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.address,r=t.contractName,a=i.length>1&&void 0!==i[1]?i[1]:{},e.next=4,(0,c.Ge)({sealed:!0},a);case 4:return o=e.sent,u=null===o||void 0===o?void 0:o.height,e.abrupt("return",Xn({address:n,contractName:r,blockHeight:u},a));case 7:case"end":return e.stop()}}),e)}))),er.apply(this,arguments)}function tr(e){if(null==e)return null;if("1.0.0"===e.f_version)return e;throw new Error("normalizeInteractionTemplateInterface Error: Invalid InteractionTemplateInterface")}function nr(){return nr=(0,a.Z)(s().mark((function e(t){var n,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.templateInterface,(0,c.kG)(void 0!=n,"generateTemplateInterfaceId({ templateInterface }) -- templateInterface must be defined"),(0,c.kG)("object"===(0,d.Z)(n),"generateTemplateInterfaceId({ templateInterface }) -- templateInterface must be an object"),(0,c.kG)("InteractionTemplateInterface"===typeof n.f_type,"generateTemplateInterfaceId({ templateInterface }) -- templateInterface object must be an InteractionTemplate"),n=tr(n),e.t0=n.f_version,e.next="1.0.0"===e.t0?8:25;break;case 8:return r=n.data,e.t1=b.cv,e.next=12,Wn("InteractionTemplateInterface");case 12:return e.t2=e.sent,e.next=15,Wn("1.0.0");case 15:return e.t3=e.sent,e.next=18,Wn(r.flip);case 18:return e.t4=e.sent,e.next=21,Promise.all(Object.keys(r.arguments).map(function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(t);case 2:return e.t0=e.sent,e.next=5,Wn(String(r.arguments[t].index));case 5:return e.t1=e.sent,e.next=8,Wn(r.arguments[t].type);case 8:return e.t2=e.sent,e.abrupt("return",[e.t0,e.t1,e.t2]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 21:return e.t5=e.sent,e.t6=[e.t2,e.t3,e.t4,e.t5],o=(0,e.t1)(e.t6).toString("hex"),e.abrupt("return",Wn(o));case 25:throw new Error("generateTemplateInterfaceId Error: Unsupported templateInterface version");case 26:case"end":return e.stop()}}),e)}))),nr.apply(this,arguments)}function rr(e){return ar.apply(this,arguments)}function ar(){return ar=(0,a.Z)(s().mark((function e(t){var n,r,a,o,u,i,l,p,f,v,m,h,g,y,b,w,x=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.template,r=t.blockHeight,a=t.network,o=x.length>1&&void 0!==x[1]?x[1]:{},(0,c.kG)(void 0!=n,"generateDependencyPin({ template }) -- template must be defined"),(0,c.kG)("object"===(0,d.Z)(n),"generateDependencyPin({ template }) -- template must be an object"),(0,c.kG)("InteractionTemplate"===n.f_type,"generateDependencyPin({ template }) -- template must be an InteractionTemplate"),n=z(n),(0,c.kG)(void 0!=a,"generateDependencyPin({ network }) network must be defined"),(0,c.kG)(void 0!=r,"generateDependencyPin({ blockHeight }) blockHeight must be defined"),(0,c.kG)("number"===typeof r,"generateDependencyPin({ blockHeight }) blockHeight must be a number"),e.t0=n.f_version,e.next="1.0.0"===e.t0?12:38;break;case 12:u=Object.keys(n.data.dependencies),i=0,l=u;case 14:if(!(i<l.length)){e.next=37;break}p=l[i],f=n.data.dependencies[p],v=Object.keys(f),m=0,h=v;case 19:if(!(m<h.length)){e.next=34;break}if(g=h[m],y=n.data.dependencies[p][g],"undefined"!==typeof(b=y[a])){e.next=25;break}return e.abrupt("continue",31);case 25:return e.next=27,Xn({address:b.address,contractName:b.contract,blockHeight:r},o);case 27:if((w=e.sent)===b.pin){e.next=31;break}return(0,k.c)({title:"verifyDependencyPinsSame Debug Error",message:"Could not recompute and match dependency pin.\n                                address: ".concat(b.address," | contract: ").concat(b.contract,"\n                                computed: ").concat(w,"\n                                template: ").concat(b.pin,"\n                            "),level:k.z.debug}),e.abrupt("return",!1);case 31:m++,e.next=19;break;case 34:i++,e.next=14;break;case 37:return e.abrupt("return",!0);case 38:throw new Error("verifyDependencyPinsSame Error: Unsupported template version");case 39:case"end":return e.stop()}}),e)}))),ar.apply(this,arguments)}function or(){return or=(0,a.Z)(s().mark((function e(t){var n,r,a,o,u,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.template,r=t.network,a=i.length>1&&void 0!==i[1]?i[1]:{},e.next=4,(0,c.Ge)({sealed:!0});case 4:return o=e.sent,u=null===o||void 0===o?void 0:o.height,e.abrupt("return",rr({template:n,network:r,blockHeight:u},a));case 7:case"end":return e.stop()}}),e)}))),or.apply(this,arguments)}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=jn)&&t.__esModule?t:{default:t};var r=function(e){for(var t=e.A,r=e.C,a=e.D,o=e.W,s=0,u=0,i=0;i<5;i++){var c=2*i,d=2*(i+5),l=2*(i+10),p=2*(i+15),f=2*(i+20);r[c]=t[c]^t[d]^t[l]^t[p]^t[f],r[c+1]=t[c+1]^t[d+1]^t[l+1]^t[p+1]^t[f+1]}for(var v=0;v<5;v++){(0,n.default)(r,(v+1)%5)(o,0),s=o[0],u=o[1],o[0]=s<<1|u>>>31,o[1]=u<<1|s>>>31,a[2*v]=r[(v+4)%5*2]^o[0],a[2*v+1]=r[(v+4)%5*2+1]^o[1];for(var m=0;m<25;m+=5)t[2*(m+v)]^=a[2*v],t[2*(m+v)+1]^=a[2*v+1]}};e.default=r}(qn),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(Fn),n=o(Mn),r=o(zn),a=o(qn);function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){var e=new Uint32Array(10),o=new Uint32Array(10),s=new Uint32Array(2);return function(u){for(var i=0;i<24;i++)(0,a.default)({A:u,C:e,D:o,W:s}),(0,r.default)({A:u,C:e,W:s}),(0,t.default)({A:u,C:e}),(0,n.default)({A:u,roundIndex:i});e.fill(0),o.fill(0),s.fill(0)}};e.default=s}(Ln),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=E,r=(t=Ln)&&t.__esModule?t:{default:t};var a=function(e,t){for(var n=0;n<e.length;n+=8){var r=n/4;t[r]^=e[n+7]<<24|e[n+6]<<16|e[n+5]<<8|e[n+4],t[r+1]^=e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]}return t},o=function(e,t){for(var n=0;n<t.length;n+=8){var r=n/4;t[n]=e[r+1],t[n+1]=e[r+1]>>>8,t[n+2]=e[r+1]>>>16,t[n+3]=e[r+1]>>>24,t[n+4]=e[r],t[n+5]=e[r]>>>8,t[n+6]=e[r]>>>16,t[n+7]=e[r]>>>24}return t},s=function(e){var t=this,s=e.capacity,u=e.padding,i=(0,r.default)(),c=s/8,d=200-s/4,l=0,p=new Uint32Array(50),f=n.Buffer.allocUnsafe(d);return this.absorb=function(e){for(var n=0;n<e.length;n++)f[l]=e[n],(l+=1)>=d&&(a(f,p),i(p),l=0);return t},this.squeeze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={buffer:e.buffer||n.Buffer.allocUnsafe(c),padding:e.padding||u,queue:n.Buffer.allocUnsafe(f.length),state:new Uint32Array(p.length)};f.copy(t.queue);for(var r=0;r<p.length;r++)t.state[r]=p[r];t.queue.fill(0,l),t.queue[l]|=t.padding,t.queue[d-1]|=128,a(t.queue,t.state);for(var s=0;s<t.buffer.length;s+=d)i(t.state),o(t.state,t.buffer.slice(s,s+d));return t.buffer},this.reset=function(){return f.fill(0),p.fill(0),l=0,t},this};e.default=s}(On),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var t,n=E,r=(t=On)&&t.__esModule?t:{default:t};var a=function(e){var t=e.allowedSizes,a=e.defaultSize,o=e.padding;return function e(){var s=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;if(!this||this.constructor!==e)return new e(u);if(t&&!t.includes(u))throw new Error("Unsupported hash length");var i=new r.default({capacity:u});return this.update=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(n.Buffer.isBuffer(e))return i.absorb(e),s;if("string"===typeof e)return s.update(n.Buffer.from(e,t));throw new TypeError("Not a string or buffer")},this.digest=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"binary",t="string"===typeof e?{format:e}:e,n=i.squeeze({buffer:t.buffer,padding:t.padding||o});return t.format&&"binary"!==t.format?n.toString(t.format):n},this.reset=function(){return i.reset(),s},this}},o=a({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=o;var s=a({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=s;var u=a({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=u;var i=o;e.SHA3Hash=i,s.SHA3Hash=i;var c=s;e.default=c}(Nn);var sr=Object.freeze({__proto__:null,getInteractionTemplateAudits:function(e){return Yn.apply(this,arguments)},generateDependencyPin:Xn,generateDependencyPinAtLatestSealedBlock:function(e){return er.apply(this,arguments)},generateTemplateId:Bn,generateTemplateInterfaceId:function(e){return nr.apply(this,arguments)},verifyDependencyPinsSame:rr,verifyDependencyPinsSameAtLatestSealedBlock:function(e){return or.apply(this,arguments)},deriveCadenceByNetwork:G,getTemplateMessage:function(e){var t,n,r,a=e.localization,o=void 0===a?"en-US":a,s=e.messageKey,u=e.template;(0,c.kG)(s,"getMessage({ messageKey }) -- messageKey must be defined"),(0,c.kG)("stirng"===typeof s,"getMessage({ messageKey }) -- messageKey must be a string"),(0,c.kG)(o,"getMessage({ localization }) -- localization must be defined"),(0,c.kG)("stirng"===typeof o,"getMessage({ localization }) -- localization must be a string"),(0,c.kG)(void 0!=u,"generateTemplateId({ template }) -- template must be defined"),(0,c.kG)("object"===(0,d.Z)(u),"generateTemplateId({ template }) -- template must be an object"),(0,c.kG)("InteractionTemplate"===typeof u.f_type,"generateTemplateId({ template }) -- template object must be an InteractionTemplate");var i=null===u||void 0===u||null===(t=u.data)||void 0===t?void 0:t.messages;return null===i||void 0===i||null===(n=i[s])||void 0===n||null===(r=n.i18n)||void 0===r?void 0:r[o]},getTemplateArgumentMessage:function(e){var t,n,r,a,o,s=e.localization,u=void 0===s?"en-US":s,i=e.argumentLabel,l=e.messageKey,p=e.template;(0,c.kG)(l,"getMessage({ messageKey }) -- messageKey must be defined"),(0,c.kG)("stirng"===typeof l,"getMessage({ messageKey }) -- messageKey must be a string"),(0,c.kG)(i,"getMessage({ argumentLabel }) -- argumentLabel must be defined"),(0,c.kG)("stirng"===typeof l,"getMessage({ argumentLabel }) -- argumentLabel must be a string"),(0,c.kG)(u,"getMessage({ localization }) -- localization must be defined"),(0,c.kG)("stirng"===typeof u,"getMessage({ localization }) -- localization must be a string"),(0,c.kG)(void 0!=p,"generateTemplateId({ template }) -- template must be defined"),(0,c.kG)("object"===(0,d.Z)(p),"generateTemplateId({ template }) -- template must be an object"),(0,c.kG)("InteractionTemplate"===typeof p.f_type,"generateTemplateId({ template }) -- template object must be an InteractionTemplate");var f=null===p||void 0===p||null===(t=p.data)||void 0===t?void 0:t.arguments;return null===f||void 0===f||null===(n=f[i])||void 0===n||null===(r=n.messages)||void 0===r||null===(a=r[l])||void 0===a||null===(o=a.i18n)||void 0===o?void 0:o[u]}}),ur=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Kt().authenticate(e)},ir=function(){return Kt().unauthenticate()},cr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Kt().unauthenticate(),Kt().authenticate(e)},dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Kt().authenticate(e)},lr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Kt().authenticate(e)},pr=Kt().authorization,fr=l}}]);