{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar Semaphore_1 = require(\"./Semaphore\");\n\nvar Mutex =\n/** @class */\nfunction () {\n  function Mutex() {\n    this._semaphore = new Semaphore_1.default(1);\n  }\n\n  Mutex.prototype.acquire = function () {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n      var _a, releaser;\n\n      return tslib_1.__generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this._semaphore.acquire()];\n\n          case 1:\n            _a = _b.sent(), releaser = _a[1];\n            return [2\n            /*return*/\n            , releaser];\n        }\n      });\n    });\n  };\n\n  Mutex.prototype.runExclusive = function (callback) {\n    return this._semaphore.runExclusive(function () {\n      return callback();\n    });\n  };\n\n  Mutex.prototype.isLocked = function () {\n    return this._semaphore.isLocked();\n  };\n\n  Mutex.prototype.release = function () {\n    this._semaphore.release();\n  };\n\n  return Mutex;\n}();\n\nexports.default = Mutex;","map":null,"metadata":{},"sourceType":"script"}