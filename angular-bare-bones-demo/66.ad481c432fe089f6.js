(self.webpackChunkAngular_bare_bones_demo=self.webpackChunkAngular_bare_bones_demo||[]).push([[66],{6066:(Un,Qr,er)=>{"use strict";er.r(Qr),er.d(Qr,{CUSTOM_RPCS_FOR_WC_V2:()=>kt,WC_V2_CHAINS:()=>kn,getWalletConnectV2ProviderInstance:()=>Dn});var I=er(3648),hr=er.n(I),kt={1:"https://ethereum.publicnode.com",5:"https://eth-goerli.g.alchemy.com/v2/yVhq9zPJorAWsw-F87fEabSUl7cCU6z4",137:"https://polygon-rpc.com/",80001:"https://polygon-mumbai.g.alchemy.com/v2/rVI6pOV4irVsrw20cJxc1fxK_1cSeiY0",56:"https://bsc-dataseed.binance.org/",43114:"https://api.avax.network/ext/bc/C/rpc",250:"https://rpc.fantom.network/",25:"https://evm-cronos.crypto.org",42161:"https://arb1.arbitrum.io/rpc",10:"https://mainnet.optimism.io"},kn=["eip155:1","eip155:137","eip155:250","eip155:25","eip155:42161","eip155:10"],Dn=function(){return Vt=void 0,fr=void 0,yt=function(){return function(Vt,fr){var yt,gt,fe,ke,Fe={label:0,sent:function(){if(1&fe[0])throw fe[1];return fe[1]},trys:[],ops:[]};return ke={next:Ot(0),throw:Ot(1),return:Ot(2)},"function"==typeof Symbol&&(ke[Symbol.iterator]=function(){return this}),ke;function Ot(ye){return function(at){return function wr(ye){if(yt)throw new TypeError("Generator is already executing.");for(;ke&&(ke=0,ye[0]&&(Fe=0)),Fe;)try{if(yt=1,gt&&(fe=2&ye[0]?gt.return:ye[0]?gt.throw||((fe=gt.return)&&fe.call(gt),0):gt.next)&&!(fe=fe.call(gt,ye[1])).done)return fe;switch(gt=0,fe&&(ye=[2&ye[0],fe.value]),ye[0]){case 0:case 1:fe=ye;break;case 4:return Fe.label++,{value:ye[1],done:!1};case 5:Fe.label++,gt=ye[1],ye=[0];continue;case 7:ye=Fe.ops.pop(),Fe.trys.pop();continue;default:if(!(fe=(fe=Fe.trys).length>0&&fe[fe.length-1])&&(6===ye[0]||2===ye[0])){Fe=0;continue}if(3===ye[0]&&(!fe||ye[1]>fe[0]&&ye[1]<fe[3])){Fe.label=ye[1];break}if(6===ye[0]&&Fe.label<fe[1]){Fe.label=fe[1],fe=ye;break}if(fe&&Fe.label<fe[2]){Fe.label=fe[2],Fe.ops.push(ye);break}fe[2]&&Fe.ops.pop(),Fe.trys.pop();continue}ye=fr.call(Vt,Fe)}catch(at){ye=[6,at],gt=0}finally{yt=fe=0}if(5&ye[0])throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}([ye,at])}}}(this,function(Vt){switch(Vt.label){case 0:return[4,hr().init({projectId:"2ec7ead81da1226703ad789c0b2f7b30",logger:"debug",relayUrl:"wss://relay.walletconnect.com"})];case 1:return[2,Vt.sent()]}})},new((Fe=void 0)||(Fe=Promise))(function(fe,ke){function Ot(at){try{ye(yt.next(at))}catch(Lt){ke(Lt)}}function wr(at){try{ye(yt.throw(at))}catch(Lt){ke(Lt)}}function ye(at){at.done?fe(at.value):function gt(fe){return fe instanceof Fe?fe:new Fe(function(ke){ke(fe)})}(at.value).then(Ot,wr)}ye((yt=yt.apply(Vt,fr||[])).next())});var Vt,fr,Fe,yt}},3648:function(Un,Qr,er){var I=er(1052).default;!function(hr){"use strict";var dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kt(r){var e=r.default;if("function"==typeof e){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}function kn(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}const fr=function Vt(r,e,t){var n=t&&t.stringify||kn;if("object"==typeof r&&null!==r){var o=e.length+1;if(1===o)return r;var s=new Array(o);s[0]=n(r);for(var a=1;a<o;a++)s[a]=n(e[a]);return s.join(" ")}if("string"!=typeof r)return r;var h=e.length;if(0===h)return r;for(var l="",f=0,_=-1,v=r&&r.length||0,b=0;b<v;){if(37===r.charCodeAt(b)&&b+1<v){switch(_=_>-1?_:0,r.charCodeAt(b+1)){case 100:case 102:if(f>=h||null==e[f])break;_<b&&(l+=r.slice(_,b)),l+=Number(e[f]),_=b+2,b++;break;case 105:if(f>=h||null==e[f])break;_<b&&(l+=r.slice(_,b)),l+=Math.floor(Number(e[f])),_=b+2,b++;break;case 79:case 111:case 106:if(f>=h||void 0===e[f])break;_<b&&(l+=r.slice(_,b));var m=typeof e[f];if("string"===m){l+="'"+e[f]+"'",_=b+2,b++;break}if("function"===m){l+=e[f].name||"<anonymous>",_=b+2,b++;break}l+=n(e[f]),_=b+2,b++;break;case 115:if(f>=h)break;_<b&&(l+=r.slice(_,b)),l+=String(e[f]),_=b+2,b++;break;case 37:_<b&&(l+=r.slice(_,b)),l+="%",_=b+2,b++,f--}++f}++b}return-1===_?r:(_<v&&(l+=r.slice(_)),l)};var Fe=ke;const yt=function Fc(){function r(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return r(self)||r(window)||r(this)||{}}}().console||{},gt={mapHttpRequest:en,mapHttpResponse:en,wrapRequestSerializer:Kn,wrapResponseSerializer:Kn,wrapErrorSerializer:Kn,req:en,res:en,err:function Oc(r){const e={type:r.constructor.name,msg:r.message,stack:r.stack};for(const t in r)void 0===e[t]&&(e[t]=r[t]);return e}};function ke(r){(r=r||{}).browser=r.browser||{};const e=r.browser.transmit;if(e&&"function"!=typeof e.send)throw Error("pino: transmit option must have a send function");const t=r.browser.write||yt;r.browser.write&&(r.browser.asObject=!0);const n=r.serializers||{},i=function fe(r,e){return Array.isArray(r)?r.filter(function(t){return"!stdSerializers.err"!==t}):!0===r&&Object.keys(e)}(r.browser.serialize,n);let o=r.browser.serialize;Array.isArray(r.browser.serialize)&&r.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);"function"==typeof t&&(t.error=t.fatal=t.warn=t.info=t.debug=t.trace=t),!1===r.enabled&&(r.level="silent");const a=r.level||"info",h=Object.create(t);h.log||(h.log=Er),Object.defineProperty(h,"levelVal",{get:function f(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(h,"level",{get:function _(){return this._level},set:function v(m){if("silent"!==m&&!this.levels.values[m])throw Error("unknown level "+m);this._level=m,Ot(l,h,"error","log"),Ot(l,h,"fatal","error"),Ot(l,h,"warn","error"),Ot(l,h,"info","log"),Ot(l,h,"debug","log"),Ot(l,h,"trace","log")}});const l={transmit:e,serialize:i,asObject:r.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:Ic(r)};return h.levels=ke.levels,h.level=a,h.setMaxListeners=h.getMaxListeners=h.emit=h.addListener=h.on=h.prependListener=h.once=h.prependOnceListener=h.removeListener=h.removeAllListeners=h.listeners=h.listenerCount=h.eventNames=h.write=h.flush=Er,h.serializers=n,h._serialize=i,h._stdErrSerialize=o,h.child=function b(m,L){if(!m)throw new Error("missing bindings for child Pino");L=L||{},i&&m.serializers&&(L.serializers=m.serializers);const j=L.serializers;if(i&&j){var B=Object.assign({},n,j),P=!0===r.browser.serialize?Object.keys(B):i;delete m.serializers,at([m],P,B,this._stdErrSerialize)}function A(g){this._childLevel=1+(0|g._childLevel),this.error=Lt(g,m,"error"),this.fatal=Lt(g,m,"fatal"),this.warn=Lt(g,m,"warn"),this.info=Lt(g,m,"info"),this.debug=Lt(g,m,"debug"),this.trace=Lt(g,m,"trace"),B&&(this.serializers=B,this._serialize=P),e&&(this._logEvent=zn([].concat(g._logEvent.bindings,m)))}return A.prototype=this,new A(this)},e&&(h._logEvent=zn()),h}function Ot(r,e,t,n){const i=Object.getPrototypeOf(e);e[t]=e.levelVal>e.levels.values[t]?Er:i[t]?i[t]:yt[t]||yt[n]||Er,function wr(r,e,t){var n;!r.transmit&&e[t]===Er||(e[t]=(n=e[t],function(){const i=r.timestamp(),o=new Array(arguments.length),s=Object.getPrototypeOf&&Object.getPrototypeOf(this)===yt?yt:this;for(var a=0;a<o.length;a++)o[a]=arguments[a];if(r.serialize&&!r.asObject&&at(o,this._serialize,this.serializers,this._stdErrSerialize),r.asObject?n.call(s,ye(this,t,o,i)):n.apply(s,o),r.transmit){const h=r.transmit.level||e.level,f=ke.levels.values[t];if(f<ke.levels.values[h])return;Sc(this,{ts:i,methodLevel:t,methodValue:f,transmitLevel:h,transmitValue:ke.levels.values[r.transmit.level||e.level],send:r.transmit.send,val:e.levelVal},o)}}))}(r,e,t)}function ye(r,e,t,n){r._serialize&&at(t,r._serialize,r.serializers,r._stdErrSerialize);const i=t.slice();let o=i[0];const s={};n&&(s.time=n),s.level=ke.levels.values[e];let a=1+(0|r._childLevel);if(a<1&&(a=1),null!==o&&"object"==typeof o){for(;a--&&"object"==typeof i[0];)Object.assign(s,i.shift());o=i.length?fr(i.shift(),i):void 0}else"string"==typeof o&&(o=fr(i.shift(),i));return void 0!==o&&(s.msg=o),s}function at(r,e,t,n){for(const i in r)if(n&&r[i]instanceof Error)r[i]=ke.stdSerializers.err(r[i]);else if("object"==typeof r[i]&&!Array.isArray(r[i]))for(const o in r[i])e&&e.indexOf(o)>-1&&o in t&&(r[i][o]=t[o](r[i][o]))}function Lt(r,e,t){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return r[t].apply(this,n)}}function Sc(r,e,t){const n=e.send,i=e.ts,o=e.methodLevel,s=e.methodValue,a=e.val,h=r._logEvent.bindings;at(t,r._serialize||Object.keys(r.serializers),r.serializers,void 0===r._stdErrSerialize||r._stdErrSerialize),r._logEvent.ts=i,r._logEvent.messages=t.filter(function(l){return-1===h.indexOf(l)}),r._logEvent.level.label=o,r._logEvent.level.value=s,n(o,r._logEvent,a),r._logEvent=zn(h)}function zn(r){return{ts:0,messages:[],bindings:r||[],level:{label:"",value:0}}}function Ic(r){return"function"==typeof r.timestamp?r.timestamp:!1===r.timestamp?Xi:Zi}function en(){return{}}function Kn(r){return r}function Er(){}function Xi(){return!1}function Zi(){return Date.now()}ke.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},ke.stdSerializers=gt,ke.stdTimeFunctions=Object.assign({},{nullTime:Xi,epochTime:Zi,unixTime:function Pc(){return Math.round(Date.now()/1e3)},isoTime:function xc(){return new Date(Date.now()).toISOString()}});var tn,ct={exports:{}},pr="object"==typeof Reflect?Reflect:null,Qi=pr&&"function"==typeof pr.apply?pr.apply:function(r,e,t){return Function.prototype.apply.call(r,e,t)};tn=pr&&"function"==typeof pr.ownKeys?pr.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)};var eo=Number.isNaN||function(r){return r!=r};function Ae(){Ae.init.call(this)}ct.exports=Ae,ct.exports.once=function Rc(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){"function"==typeof r.removeListener&&r.removeListener("error",i),t([].slice.call(arguments))}co(r,e,o,{once:!0}),"error"!==e&&function Cc(r,e,t){"function"==typeof r.on&&co(r,"error",e,t)}(r,i,{once:!0})})},Ae.EventEmitter=Ae,Ae.prototype._events=void 0,Ae.prototype._eventsCount=0,Ae.prototype._maxListeners=void 0;var to=10;function rn(r){if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function ro(r){return void 0===r._maxListeners?Ae.defaultMaxListeners:r._maxListeners}function no(r,e,t,n){var i,o,s;if(rn(t),void 0===(o=r._events)?(o=r._events=Object.create(null),r._eventsCount=0):(void 0!==o.newListener&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),void 0===s)s=o[e]=t,++r._eventsCount;else if("function"==typeof s?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),(i=ro(r))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=s.length,function Ac(r){console&&console.warn&&console.warn(r)}(a)}return r}function Nc(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function io(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=Nc.bind(n);return i.listener=t,n.wrapFn=i,i}function oo(r,e,t){var n=r._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?t?[i.listener||i]:[i]:t?function Lc(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}(i):ao(i,i.length)}function so(r){var e=this._events;if(void 0!==e){var t=e[r];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function ao(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function co(r,e,t,n){if("function"==typeof r.on)n.once?r.once(e,t):r.on(e,t);else{if("function"!=typeof r.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r);r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)})}}Object.defineProperty(Ae,"defaultMaxListeners",{enumerable:!0,get:function(){return to},set:function(r){if("number"!=typeof r||r<0||eo(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");to=r}}),Ae.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ae.prototype.setMaxListeners=function(r){if("number"!=typeof r||r<0||eo(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},Ae.prototype.getMaxListeners=function(){return ro(this)},Ae.prototype.emit=function(r){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var n="error"===r,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[r];if(void 0===a)return!1;if("function"==typeof a)Qi(a,this,e);else{var h=a.length,l=ao(a,h);for(t=0;t<h;++t)Qi(l[t],this,e)}return!0},Ae.prototype.on=Ae.prototype.addListener=function(r,e){return no(this,r,e,!1)},Ae.prototype.prependListener=function(r,e){return no(this,r,e,!0)},Ae.prototype.once=function(r,e){return rn(e),this.on(r,io(this,r,e)),this},Ae.prototype.prependOnceListener=function(r,e){return rn(e),this.prependListener(r,io(this,r,e)),this},Ae.prototype.off=Ae.prototype.removeListener=function(r,e){var t,n,i,o,s;if(rn(e),void 0===(n=this._events))return this;if(void 0===(t=n[r]))return this;if(t===e||t.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[r],n.removeListener&&this.emit("removeListener",r,t.listener||e));else if("function"!=typeof t){for(i=-1,o=t.length-1;o>=0;o--)if(t[o]===e||t[o].listener===e){s=t[o].listener,i=o;break}if(i<0)return this;0===i?t.shift():function Tc(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}(t,i),1===t.length&&(n[r]=t[0]),void 0!==n.removeListener&&this.emit("removeListener",r,s||e)}return this},Ae.prototype.removeAllListeners=function(r){var e,t,n;if(void 0===(t=this._events))return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[r]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[r]),this;if(0===arguments.length){var o,i=Object.keys(t);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=t[r]))this.removeListener(r,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(r,e[n]);return this},Ae.prototype.listeners=function(r){return oo(this,r,!0)},Ae.prototype.rawListeners=function(r){return oo(this,r,!1)},Ae.listenerCount=function(r,e){return"function"==typeof r.listenerCount?r.listenerCount(e):so.call(r,e)},Ae.prototype.listenerCount=so,Ae.prototype.eventNames=function(){return this._eventsCount>0?tn(this._events):[]};var nn={},Hn=function(r,e){return(Hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Bn=function(){return Bn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Bn.apply(this,arguments)};function Vn(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function uo(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Sr(r){return this instanceof Sr?(this.v=r,this):new Sr(r)}var lo=kt(Object.freeze({__proto__:null,__extends:function jc(r,e){function t(){this.constructor=r}Hn(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Bn},__rest:function Uc(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function Mc(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function kc(r,e){return function(t,n){e(t,n,r)}},__metadata:function Dc(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function zc(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function Kc(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function Hc(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function Bc(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:Vn,__read:uo,__spread:function Vc(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(uo(arguments[e]));return r},__spreadArrays:function $c(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Sr,__asyncGenerator:function qc(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(b){return new Promise(function(m,L){o.push([v,b,m,L])>1||a(v,b)})})}function a(v,b){try{!function h(v){v.value instanceof Sr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](b))}catch(m){_(o[0][3],m)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,b){v(b),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function Gc(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Sr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function Wc(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=Vn(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function Yc(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function Jc(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function Xc(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function Zc(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function Qc(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),Or={};Object.defineProperty(Or,"__esModule",{value:!0}),Or.safeJsonParse=function tu(r){if("string"!=typeof r)throw new Error("Cannot safe json parse value of type "+typeof r);try{return JSON.parse(r)}catch{return r}},Or.safeJsonStringify=function ru(r){return"string"==typeof r?r:JSON.stringify(r,(e,t)=>typeof t>"u"?null:t)};var ho,on={exports:{}};var po,fo={},Ir={};var yo,go,Pr={};Object.defineProperty(nn,"__esModule",{value:!0}),nn.KeyValueStorage=void 0;const dr=lo,_o=Or,au=dr.__importDefault(function nu(){return ho||(ho=1,function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,n){this[t]=String(n)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(n){t[n]=void 0,delete t[n]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),on.exports=typeof dt<"u"&&dt.localStorage?dt.localStorage:typeof window<"u"&&window.localStorage?window.localStorage:new e}()),on.exports}()),cu=function su(){return go||(go=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=lo;e.__exportStar(function iu(){return po||(po=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.IKeyValueStorage=void 0,Ir.IKeyValueStorage=class r{}),Ir}(),r),e.__exportStar(function ou(){if(yo)return Pr;yo=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.parseEntry=void 0;const r=Or;return Pr.parseEntry=function e(t){var n;return[t[0],r.safeJsonParse(null!==(n=t[1])&&void 0!==n?n:"")]},Pr}(),r)}(fo)),fo}();class vo{constructor(){this.localStorage=au.default}getKeys(){return dr.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return dr.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(cu.parseEntry)})}getItem(e){return dr.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(null!==t)return _o.safeJsonParse(t)})}setItem(e,t){return dr.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,_o.safeJsonStringify(t))})}removeItem(e){return dr.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}nn.KeyValueStorage=vo;var uu=nn.default=vo,xr={},$n=function(r,e){return($n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var qn=function(){return qn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},qn.apply(this,arguments)};function Gn(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mo(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Fr(r){return this instanceof Fr?(this.v=r,this):new Fr(r)}var sn=kt(Object.freeze({__proto__:null,__extends:function lu(r,e){function t(){this.constructor=r}$n(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return qn},__rest:function hu(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function fu(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function pu(r,e){return function(t,n){e(t,n,r)}},__metadata:function du(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function yu(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function gu(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function _u(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function vu(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:Gn,__read:mo,__spread:function mu(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(mo(arguments[e]));return r},__spreadArrays:function bu(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Fr,__asyncGenerator:function wu(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(b){return new Promise(function(m,L){o.push([v,b,m,L])>1||a(v,b)})})}function a(v,b){try{!function h(v){v.value instanceof Fr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](b))}catch(m){_(o[0][3],m)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,b){v(b),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function Eu(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Fr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function Su(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=Gn(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function Ou(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function Iu(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function Pu(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function xu(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function Fu(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),Ar={},Q={},Wn=function(r,e){return(Wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Yn=function(){return Yn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Yn.apply(this,arguments)};function Jn(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bo(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Nr(r){return this instanceof Nr?(this.v=r,this):new Nr(r)}var Eo,an=kt(Object.freeze({__proto__:null,__extends:function Nu(r,e){function t(){this.constructor=r}Wn(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Yn},__rest:function Tu(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function Lu(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function Ru(r,e){return function(t,n){e(t,n,r)}},__metadata:function Cu(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function ju(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function Uu(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function Mu(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function ku(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:Jn,__read:bo,__spread:function Du(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(bo(arguments[e]));return r},__spreadArrays:function zu(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Nr,__asyncGenerator:function Ku(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(b){return new Promise(function(m,L){o.push([v,b,m,L])>1||a(v,b)})})}function a(v,b){try{!function h(v){v.value instanceof Nr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](b))}catch(m){_(o[0][3],m)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,b){v(b),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function Hu(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Nr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function Bu(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=Jn(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function Vu(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function $u(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function qu(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function Gu(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function Wu(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),wo={},Tr={};var Oo,tr={},So={},yr={};var Po,xo,Ao,No,Io={};function Fo(){return xo||(xo=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=an;e.__exportStar(function Xu(){return Oo||(Oo=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.ONE_THOUSAND=yr.ONE_HUNDRED=void 0,yr.ONE_HUNDRED=100,yr.ONE_THOUSAND=1e3),yr}(),r),e.__exportStar(function Zu(){return Po||(Po=1,r=Io,Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=5*r.ONE_MINUTE,r.TEN_MINUTES=10*r.ONE_MINUTE,r.THIRTY_MINUTES=30*r.ONE_MINUTE,r.SIXTY_MINUTES=60*r.ONE_MINUTE,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=3*r.ONE_HOUR,r.SIX_HOURS=6*r.ONE_HOUR,r.TWELVE_HOURS=12*r.ONE_HOUR,r.TWENTY_FOUR_HOURS=24*r.ONE_HOUR,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=3*r.ONE_DAY,r.FIVE_DAYS=5*r.ONE_DAY,r.SEVEN_DAYS=7*r.ONE_DAY,r.THIRTY_DAYS=30*r.ONE_DAY,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=2*r.ONE_WEEK,r.THREE_WEEKS=3*r.ONE_WEEK,r.FOUR_WEEKS=4*r.ONE_WEEK,r.ONE_YEAR=365*r.ONE_DAY),Io;var r}(),r)}(So)),So}function el(){return No||(No=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=an;e.__exportStar(function Ju(){return Eo||(Eo=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.delay=void 0,Tr.delay=function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}),Tr}(),r),e.__exportStar(function Qu(){if(Ao)return tr;Ao=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.fromMiliseconds=tr.toMiliseconds=void 0;const r=Fo();return tr.toMiliseconds=function e(n){return n*r.ONE_THOUSAND},tr.fromMiliseconds=function t(n){return Math.floor(n/r.ONE_THOUSAND)},tr}(),r)}(wo)),wo}var To,gr={};var Ro,Co,Lo={},Lr={};function nl(){return Co||(Co=1,r=Lo,Object.defineProperty(r,"__esModule",{value:!0}),an.__exportStar(function rl(){return Ro||(Ro=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.IWatch=void 0,Lr.IWatch=class r{}),Lr}(),r)),Lo;var r}!function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=an;e.__exportStar(el(),r),e.__exportStar(function tl(){if(To)return gr;To=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const n=this.get(t);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const i=Date.now()-n.started;this.timestamps.set(t,{started:n.started,elapsed:i})}get(t){const n=this.timestamps.get(t);if(typeof n>"u")throw new Error(`No timestamp found for label: ${t}`);return n}elapsed(t){const n=this.get(t);return n.elapsed||Date.now()-n.started}}return gr.Watch=r,gr.default=r,gr}(),r),e.__exportStar(nl(),r),e.__exportStar(Fo(),r)}(Q);var jo={},Rr={};class rr{}var Uo,Mo,ol=kt(Object.freeze({__proto__:null,IEvents:rr}));function ko(){return Mo||(Mo=1,r=jo,Object.defineProperty(r,"__esModule",{value:!0}),sn.__exportStar(function sl(){if(Uo)return Rr;Uo=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.IHeartBeat=void 0;const r=ol;return Rr.IHeartBeat=class e extends r.IEvents{constructor(n){super()}},Rr}(),r)),jo;var r}var zo,Ko,Bo,Do={},nr={};function Ho(){return Ko||(Ko=1,r=Do,Object.defineProperty(r,"__esModule",{value:!0}),sn.__exportStar(function al(){return zo||(zo=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.HEARTBEAT_EVENTS=nr.HEARTBEAT_INTERVAL=void 0,nr.HEARTBEAT_INTERVAL=Q.FIVE_SECONDS,nr.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}),nr}(),r)),Do;var r}!function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=sn;e.__exportStar(function cl(){if(Bo)return Ar;Bo=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.HeartBeat=void 0;const r=sn,e=ct.exports,t=Q,n=ko(),i=Ho();class o extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=a?.interval||i.HEARTBEAT_INTERVAL}static init(a){return r.__awaiter(this,void 0,void 0,function*(){const h=new o(a);return yield h.init(),h})}init(){return r.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,h){this.events.on(a,h)}once(a,h){this.events.once(a,h)}off(a,h){this.events.off(a,h)}removeListener(a,h){this.events.removeListener(a,h)}initialize(){return r.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Ar.HeartBeat=o,Ar}(),r),e.__exportStar(ko(),r),e.__exportStar(Ho(),r)}(xr);var xe={},Xn=function(r,e){return(Xn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Zn=function(){return Zn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Zn.apply(this,arguments)};function Qn(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vo(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Cr(r){return this instanceof Cr?(this.v=r,this):new Cr(r)}var $o,Al=kt(Object.freeze({__proto__:null,__extends:function ul(r,e){function t(){this.constructor=r}Xn(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Zn},__rest:function ll(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function hl(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function fl(r,e){return function(t,n){e(t,n,r)}},__metadata:function pl(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function dl(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function yl(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function gl(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function _l(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:Qn,__read:Vo,__spread:function vl(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Vo(arguments[e]));return r},__spreadArrays:function ml(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Cr,__asyncGenerator:function bl(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(b){return new Promise(function(m,L){o.push([v,b,m,L])>1||a(v,b)})})}function a(v,b){try{!function h(v){v.value instanceof Cr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](b))}catch(m){_(o[0][3],m)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,b){v(b),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function wl(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Cr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function El(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=Qn(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function Sl(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function Ol(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function Il(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function Pl(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function xl(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),_r={};function qo(){return $o||($o=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.PINO_CUSTOM_CONTEXT_KEY=_r.PINO_LOGGER_DEFAULTS=void 0,_r.PINO_LOGGER_DEFAULTS={level:"info"},_r.PINO_CUSTOM_CONTEXT_KEY="custom_context"),_r}var Go,ht={};!function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.pino=void 0;const e=Al,t=e.__importDefault(Fe);Object.defineProperty(r,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(qo(),r),e.__exportStar(function Nl(){if(Go)return ht;Go=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.generateChildLogger=ht.formatChildLoggerContext=ht.getLoggerContext=ht.setBrowserLoggerContext=ht.getBrowserLoggerContext=ht.getDefaultLoggerOptions=void 0;const r=qo();function t(a,h=r.PINO_CUSTOM_CONTEXT_KEY){return a[h]||""}function n(a,h,l=r.PINO_CUSTOM_CONTEXT_KEY){return a[l]=h,a}function i(a,h=r.PINO_CUSTOM_CONTEXT_KEY){let l="";return l=typeof a.bindings>"u"?t(a,h):a.bindings().context||"",l}function o(a,h,l=r.PINO_CUSTOM_CONTEXT_KEY){const f=i(a,l);return f.trim()?`${f}/${h}`:h}return ht.getDefaultLoggerOptions=function e(a){return Object.assign(Object.assign({},a),{level:a?.level||r.PINO_LOGGER_DEFAULTS.level})},ht.getBrowserLoggerContext=t,ht.setBrowserLoggerContext=n,ht.getLoggerContext=i,ht.formatChildLoggerContext=o,ht.generateChildLogger=function s(a,h,l=r.PINO_CUSTOM_CONTEXT_KEY){const f=o(a,h,l);return n(a.child({context:f}),f,l)},ht}(),r)}(xe);class Tl extends rr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class Ll extends rr{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class Cl extends rr{constructor(e,t){super(),this.relayer=e,this.logger=t}}class jl extends rr{constructor(e){super()}}class Ml extends rr{constructor(e,t){super(),this.relayer=e,this.logger=t}}class kl extends rr{constructor(e,t){super(),this.core=e,this.logger=t}}function ei(r){if("string"!=typeof r)throw new Error("Cannot safe json parse value of type "+typeof r);try{return JSON.parse(r)}catch{return r}}function jr(r){return"string"==typeof r?r:JSON.stringify(r)}var ti={},vr={},cn={},un={};Object.defineProperty(un,"__esModule",{value:!0}),un.BrowserRandomSource=void 0;un.BrowserRandomSource=class Kl{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let n=0;n<t.length;n+=65536)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,65536)));return t}};var ln={},wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.wipe=function Bl(r){for(var e=0;e<r.length;e++)r[e]=0;return r};var ql=kt(Object.freeze({__proto__:null,default:{}}));Object.defineProperty(ln,"__esModule",{value:!0}),ln.NodeRandomSource=void 0;const Gl=wt;ln.NodeRandomSource=class Wl{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=ql;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=t[i];return(0,Gl.wipe)(t),n}},Object.defineProperty(cn,"__esModule",{value:!0}),cn.SystemRandomSource=void 0;const Yl=un,Jl=ln;cn.SystemRandomSource=class Xl{constructor(){return this.isAvailable=!1,this.name="",this._source=new Yl.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new Jl.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};var r,ne={},Yo={};r=Yo,Object.defineProperty(r,"__esModule",{value:!0}),r.mul=Math.imul||function e(a,h){var f=65535&a,v=65535&h;return f*v+((a>>>16&65535)*v+f*(h>>>16&65535)<<16>>>0)|0},r.add=function t(a,h){return a+h|0},r.sub=function n(a,h){return a-h|0},r.rotl=function i(a,h){return a<<h|a>>>32-h},r.rotr=function o(a,h){return a<<32-h|a>>>h},r.isInteger=Number.isInteger||function s(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(a){return r.isInteger(a)&&a>=-r.MAX_SAFE_INTEGER&&a<=r.MAX_SAFE_INTEGER},Object.defineProperty(ne,"__esModule",{value:!0});var Jo=Yo;function Xo(r,e,t){return void 0===e&&(e=new Uint8Array(2)),void 0===t&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}function Zo(r,e,t){return void 0===e&&(e=new Uint8Array(2)),void 0===t&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}function ri(r,e){return void 0===e&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function ni(r,e){return void 0===e&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}function ii(r,e){return void 0===e&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}function oi(r,e){return void 0===e&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}function hn(r,e,t){return void 0===e&&(e=new Uint8Array(4)),void 0===t&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}function fn(r,e,t){return void 0===e&&(e=new Uint8Array(4)),void 0===t&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}function Qo(r,e,t){return void 0===e&&(e=new Uint8Array(8)),void 0===t&&(t=0),hn(r/4294967296>>>0,e,t),hn(r>>>0,e,t+4),e}function es(r,e,t){return void 0===e&&(e=new Uint8Array(8)),void 0===t&&(t=0),fn(r>>>0,e,t),fn(r/4294967296>>>0,e,t+4),e}ne.readInt16BE=function Zl(r,e){return void 0===e&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16},ne.readUint16BE=function Ql(r,e){return void 0===e&&(e=0),(r[e+0]<<8|r[e+1])>>>0},ne.readInt16LE=function eh(r,e){return void 0===e&&(e=0),(r[e+1]<<8|r[e])<<16>>16},ne.readUint16LE=function th(r,e){return void 0===e&&(e=0),(r[e+1]<<8|r[e])>>>0},ne.writeUint16BE=Xo,ne.writeInt16BE=Xo,ne.writeUint16LE=Zo,ne.writeInt16LE=Zo,ne.readInt32BE=ri,ne.readUint32BE=ni,ne.readInt32LE=ii,ne.readUint32LE=oi,ne.writeUint32BE=hn,ne.writeInt32BE=hn,ne.writeUint32LE=fn,ne.writeInt32LE=fn,ne.readInt64BE=function rh(r,e){void 0===e&&(e=0);var t=ri(r,e),n=ri(r,e+4);return 4294967296*t+n-4294967296*(n>>31)},ne.readUint64BE=function nh(r,e){return void 0===e&&(e=0),4294967296*ni(r,e)+ni(r,e+4)},ne.readInt64LE=function ih(r,e){void 0===e&&(e=0);var t=ii(r,e);return 4294967296*ii(r,e+4)+t-4294967296*(t>>31)},ne.readUint64LE=function oh(r,e){void 0===e&&(e=0);var t=oi(r,e);return 4294967296*oi(r,e+4)+t},ne.writeUint64BE=Qo,ne.writeInt64BE=Qo,ne.writeUint64LE=es,ne.writeInt64LE=es,ne.readUintBE=function sh(r,e,t){if(void 0===t&&(t=0),r%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=r/8+t-1;o>=t;o--)n+=e[o]*i,i*=256;return n},ne.readUintLE=function ah(r,e,t){if(void 0===t&&(t=0),r%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=t;o<t+r/8;o++)n+=e[o]*i,i*=256;return n},ne.writeUintBE=function ch(r,e,t,n){if(void 0===t&&(t=new Uint8Array(r/8)),void 0===n&&(n=0),r%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Jo.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,o=r/8+n-1;o>=n;o--)t[o]=e/i&255,i*=256;return t},ne.writeUintLE=function uh(r,e,t,n){if(void 0===t&&(t=new Uint8Array(r/8)),void 0===n&&(n=0),r%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Jo.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,o=n;o<n+r/8;o++)t[o]=e/i&255,i*=256;return t},ne.readFloat32BE=function lh(r,e){return void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(e)},ne.readFloat32LE=function hh(r,e){return void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(e,!0)},ne.readFloat64BE=function fh(r,e){return void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(e)},ne.readFloat64LE=function ph(r,e){return void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(e,!0)},ne.writeFloat32BE=function dh(r,e,t){return void 0===e&&(e=new Uint8Array(4)),void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(t,r),e},ne.writeFloat32LE=function yh(r,e,t){return void 0===e&&(e=new Uint8Array(4)),void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(t,r,!0),e},ne.writeFloat64BE=function gh(r,e,t){return void 0===e&&(e=new Uint8Array(8)),void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(t,r),e},ne.writeFloat64LE=function _h(r,e,t){return void 0===e&&(e=new Uint8Array(8)),void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(t,r,!0),e},function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const t=ne,n=wt;function i(l,f=r.defaultRandomSource){return f.randomBytes(l)}r.defaultRandomSource=new cn.SystemRandomSource,r.randomBytes=i,r.randomUint32=function o(l=r.defaultRandomSource){const f=i(4,l),_=(0,t.readUint32LE)(f);return(0,n.wipe)(f),_};const s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,f=s,_=r.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let v="";const b=f.length,m=256-256%b;for(;l>0;){const L=i(Math.ceil(256*l/m),_);for(let j=0;j<L.length&&l>0;j++){const B=L[j];B<m&&(v+=f.charAt(B%b),l--)}(0,n.wipe)(L)}return v}r.randomString=a,r.randomStringForEntropy=function h(l,f=s,_=r.defaultRandomSource){return a(Math.ceil(l/(Math.log(f.length)/Math.LN2)),f,_)}}(vr);var ts={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=ne,t=wt;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},a.prototype.update=function(h,l){if(void 0===l&&(l=h.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=h[f++],l--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,h,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=h[f++],l--;return this},a.prototype.finish=function(h){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,_=l/536870912|0,v=l<<3,b=l%128<112?128:256;this._buffer[f]=128;for(var m=f+1;m<b-8;m++)this._buffer[m]=0;e.writeUint32BE(_,this._buffer,b-8),e.writeUint32BE(v,this._buffer,b-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,b),this._finished=!0}for(m=0;m<this.digestLength/8;m++)e.writeUint32BE(this._stateHi[m],h,8*m),e.writeUint32BE(this._stateLo[m],h,8*m+4);return this},a.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(h){return this._stateHi.set(h.stateHi),this._stateLo.set(h.stateLo),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(h){t.wipe(h.stateHi),t.wipe(h.stateLo),h.buffer&&t.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},a}();r.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(a,h,l,f,_,v,b){for(var d,S,M,k,C,R,z,K,m=l[0],L=l[1],j=l[2],B=l[3],P=l[4],A=l[5],g=l[6],O=l[7],w=f[0],c=f[1],p=f[2],D=f[3],H=f[4],G=f[5],X=f[6],Z=f[7];b>=128;){for(var ee=0;ee<16;ee++)a[ee]=e.readUint32BE(_,V=8*ee+v),h[ee]=e.readUint32BE(_,V+4);for(ee=0;ee<80;ee++){var E,Ce,J=L,ce=j,T=B,N=P,x=A,u=g,W=c,pe=p,be=D,ge=H,Se=G,ze=X;if(C=65535&(S=Z),R=S>>>16,z=65535&(d=O),K=d>>>16,C+=65535&(S=(H>>>14|P<<18)^(H>>>18|P<<14)^(P>>>9|H<<23)),R+=S>>>16,z+=65535&(d=(P>>>14|H<<18)^(P>>>18|H<<14)^(H>>>9|P<<23)),K+=d>>>16,C+=65535&(S=H&G^~H&X),R+=S>>>16,z+=65535&(d=P&A^~P&g),K+=d>>>16,C+=65535&(S=i[2*ee+1]),R+=S>>>16,z+=65535&(d=i[2*ee]),K+=d>>>16,R+=(S=h[ee%16])>>>16,z+=65535&(d=a[ee%16]),K+=d>>>16,z+=(R+=(C+=65535&S)>>>16)>>>16,C=65535&(S=k=65535&C|R<<16),R=S>>>16,z=65535&(d=M=65535&z|(K+=z>>>16)<<16),K=d>>>16,C+=65535&(S=(w>>>28|m<<4)^(m>>>2|w<<30)^(m>>>7|w<<25)),R+=S>>>16,z+=65535&(d=(m>>>28|w<<4)^(w>>>2|m<<30)^(w>>>7|m<<25)),K+=d>>>16,R+=(S=w&c^w&p^c&p)>>>16,z+=65535&(d=m&L^m&j^L&j),K+=d>>>16,E=65535&(z+=(R+=(C+=65535&S)>>>16)>>>16)|(K+=z>>>16)<<16,Ce=65535&C|R<<16,C=65535&(S=be),R=S>>>16,z=65535&(d=T),K=d>>>16,R+=(S=k)>>>16,z+=65535&(d=M),K+=d>>>16,L=m,j=J,B=ce,P=T=65535&(z+=(R+=(C+=65535&S)>>>16)>>>16)|(K+=z>>>16)<<16,A=N,g=x,O=u,m=E,c=w,p=W,D=pe,H=be=65535&C|R<<16,G=ge,X=Se,Z=ze,w=Ce,ee%16==15)for(var V=0;V<16;V++)C=65535&(S=h[V]),R=S>>>16,z=65535&(d=a[V]),K=d>>>16,C+=65535&(S=h[(V+9)%16]),R+=S>>>16,z+=65535&(d=a[(V+9)%16]),K+=d>>>16,C+=65535&(S=((k=h[(V+1)%16])>>>1|(M=a[(V+1)%16])<<31)^(k>>>8|M<<24)^(k>>>7|M<<25)),R+=S>>>16,z+=65535&(d=(M>>>1|k<<31)^(M>>>8|k<<24)^M>>>7),K+=d>>>16,R+=(S=((k=h[(V+14)%16])>>>19|(M=a[(V+14)%16])<<13)^(M>>>29|k<<3)^(k>>>6|M<<26))>>>16,z+=65535&(d=(M>>>19|k<<13)^(k>>>29|M<<3)^M>>>6),K+=d>>>16,a[V]=65535&(z+=(R+=(C+=65535&S)>>>16)>>>16)|(K+=z>>>16)<<16,h[V]=65535&C|R<<16}C=65535&(S=w),R=S>>>16,z=65535&(d=m),K=d>>>16,R+=(S=f[0])>>>16,z+=65535&(d=l[0]),K+=d>>>16,l[0]=m=65535&(z+=(R+=(C+=65535&S)>>>16)>>>16)|(K+=z>>>16)<<16,f[0]=w=65535&C|R<<16,C=65535&(S=c),R=S>>>16,z=65535&(d=L),K=d>>>16,R+=(S=f[1])>>>16,z+=65535&(d=l[1]),K+=d>>>16,l[1]=L=65535&(z+=(R+=(C+=65535&S)>>>16)>>>16)|(K+=z>>>16)<<16,f[1]=c=65535&C|R<<16,C=65535&(S=p),R=S>>>16,z=65535&(d=j),K=d>>>16,R+=(S=f[2])>>>16,z+=65535&(d=l[2]),K+=d>>>16,l[2]=j=65535&(z+=(R+=(C+=65535&S)>>>16)>>>16)|(K+=z>>>16)<<16,f[2]=p=65535&C|R<<16,C=65535&(S=D),R=S>>>16,z=65535&(d=B),K=d>>>16,R+=(S=f[3])>>>16,z+=65535&(d=l[3]),K+=d>>>16,l[3]=B=65535&(z+=(R+=(C+=65535&S)>>>16)>>>16)|(K+=z>>>16)<<16,f[3]=D=65535&C|R<<16,C=65535&(S=H),R=S>>>16,z=65535&(d=P),K=d>>>16,R+=(S=f[4])>>>16,z+=65535&(d=l[4]),K+=d>>>16,l[4]=P=65535&(z+=(R+=(C+=65535&S)>>>16)>>>16)|(K+=z>>>16)<<16,f[4]=H=65535&C|R<<16,C=65535&(S=G),R=S>>>16,z=65535&(d=A),K=d>>>16,R+=(S=f[5])>>>16,z+=65535&(d=l[5]),K+=d>>>16,l[5]=A=65535&(z+=(R+=(C+=65535&S)>>>16)>>>16)|(K+=z>>>16)<<16,f[5]=G=65535&C|R<<16,C=65535&(S=X),R=S>>>16,z=65535&(d=g),K=d>>>16,R+=(S=f[6])>>>16,z+=65535&(d=l[6]),K+=d>>>16,l[6]=g=65535&(z+=(R+=(C+=65535&S)>>>16)>>>16)|(K+=z>>>16)<<16,f[6]=X=65535&C|R<<16,C=65535&(S=Z),R=S>>>16,z=65535&(d=O),K=d>>>16,R+=(S=f[7])>>>16,z+=65535&(d=l[7]),K+=d>>>16,l[7]=O=65535&(z+=(R+=(C+=65535&S)>>>16)>>>16)|(K+=z>>>16)<<16,f[7]=Z=65535&C|R<<16,v+=128,b-=128}return v}r.hash=function s(a){var h=new n;h.update(a);var l=h.digest();return h.clean(),l}})(ts),function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=vr,t=ts,n=wt;function i(T){const N=new Float64Array(16);if(T)for(let x=0;x<T.length;x++)N[x]=T[x];return N}r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32,new Uint8Array(32)[0]=9;const s=i(),a=i([1]),h=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),v=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function b(T,N){for(let x=0;x<16;x++)T[x]=0|N[x]}function m(T){let N=1;for(let x=0;x<16;x++){let u=T[x]+N+65535;N=Math.floor(u/65536),T[x]=u-65536*N}T[0]+=N-1+37*(N-1)}function L(T,N,x){const u=~(x-1);for(let E=0;E<16;E++){const $=u&(T[E]^N[E]);T[E]^=$,N[E]^=$}}function j(T,N){const x=i(),u=i();for(let E=0;E<16;E++)u[E]=N[E];m(u),m(u),m(u);for(let E=0;E<2;E++){x[0]=u[0]-65517;for(let W=1;W<15;W++)x[W]=u[W]-65535-(x[W-1]>>16&1),x[W-1]&=65535;x[15]=u[15]-32767-(x[14]>>16&1);const $=x[15]>>16&1;x[14]&=65535,L(u,x,1-$)}for(let E=0;E<16;E++)T[2*E]=255&u[E],T[2*E+1]=u[E]>>8}function B(T,N){let x=0;for(let u=0;u<32;u++)x|=T[u]^N[u];return(1&x-1>>>8)-1}function P(T,N){const x=new Uint8Array(32),u=new Uint8Array(32);return j(x,T),j(u,N),B(x,u)}function A(T){const N=new Uint8Array(32);return j(N,T),1&N[0]}function O(T,N,x){for(let u=0;u<16;u++)T[u]=N[u]+x[u]}function w(T,N,x){for(let u=0;u<16;u++)T[u]=N[u]-x[u]}function c(T,N,x){let u,E,$=0,W=0,pe=0,be=0,ge=0,Se=0,ze=0,Ce=0,me=0,_e=0,de=0,le=0,ue=0,ae=0,oe=0,re=0,he=0,ve=0,ie=0,we=0,Ee=0,Ie=0,Pe=0,Oe=0,Nt=0,Mt=0,Jt=0,Et=0,ar=0,Jr=0,An=0,He=x[0],je=x[1],Be=x[2],Ve=x[3],$e=x[4],Ue=x[5],Je=x[6],Xe=x[7],Ze=x[8],Qe=x[9],et=x[10],We=x[11],qe=x[12],Le=x[13],tt=x[14],rt=x[15];u=N[0],$+=u*He,W+=u*je,pe+=u*Be,be+=u*Ve,ge+=u*$e,Se+=u*Ue,ze+=u*Je,Ce+=u*Xe,me+=u*Ze,_e+=u*Qe,de+=u*et,le+=u*We,ue+=u*qe,ae+=u*Le,oe+=u*tt,re+=u*rt,u=N[1],W+=u*He,pe+=u*je,be+=u*Be,ge+=u*Ve,Se+=u*$e,ze+=u*Ue,Ce+=u*Je,me+=u*Xe,_e+=u*Ze,de+=u*Qe,le+=u*et,ue+=u*We,ae+=u*qe,oe+=u*Le,re+=u*tt,he+=u*rt,u=N[2],pe+=u*He,be+=u*je,ge+=u*Be,Se+=u*Ve,ze+=u*$e,Ce+=u*Ue,me+=u*Je,_e+=u*Xe,de+=u*Ze,le+=u*Qe,ue+=u*et,ae+=u*We,oe+=u*qe,re+=u*Le,he+=u*tt,ve+=u*rt,u=N[3],be+=u*He,ge+=u*je,Se+=u*Be,ze+=u*Ve,Ce+=u*$e,me+=u*Ue,_e+=u*Je,de+=u*Xe,le+=u*Ze,ue+=u*Qe,ae+=u*et,oe+=u*We,re+=u*qe,he+=u*Le,ve+=u*tt,ie+=u*rt,u=N[4],ge+=u*He,Se+=u*je,ze+=u*Be,Ce+=u*Ve,me+=u*$e,_e+=u*Ue,de+=u*Je,le+=u*Xe,ue+=u*Ze,ae+=u*Qe,oe+=u*et,re+=u*We,he+=u*qe,ve+=u*Le,ie+=u*tt,we+=u*rt,u=N[5],Se+=u*He,ze+=u*je,Ce+=u*Be,me+=u*Ve,_e+=u*$e,de+=u*Ue,le+=u*Je,ue+=u*Xe,ae+=u*Ze,oe+=u*Qe,re+=u*et,he+=u*We,ve+=u*qe,ie+=u*Le,we+=u*tt,Ee+=u*rt,u=N[6],ze+=u*He,Ce+=u*je,me+=u*Be,_e+=u*Ve,de+=u*$e,le+=u*Ue,ue+=u*Je,ae+=u*Xe,oe+=u*Ze,re+=u*Qe,he+=u*et,ve+=u*We,ie+=u*qe,we+=u*Le,Ee+=u*tt,Ie+=u*rt,u=N[7],Ce+=u*He,me+=u*je,_e+=u*Be,de+=u*Ve,le+=u*$e,ue+=u*Ue,ae+=u*Je,oe+=u*Xe,re+=u*Ze,he+=u*Qe,ve+=u*et,ie+=u*We,we+=u*qe,Ee+=u*Le,Ie+=u*tt,Pe+=u*rt,u=N[8],me+=u*He,_e+=u*je,de+=u*Be,le+=u*Ve,ue+=u*$e,ae+=u*Ue,oe+=u*Je,re+=u*Xe,he+=u*Ze,ve+=u*Qe,ie+=u*et,we+=u*We,Ee+=u*qe,Ie+=u*Le,Pe+=u*tt,Oe+=u*rt,u=N[9],_e+=u*He,de+=u*je,le+=u*Be,ue+=u*Ve,ae+=u*$e,oe+=u*Ue,re+=u*Je,he+=u*Xe,ve+=u*Ze,ie+=u*Qe,we+=u*et,Ee+=u*We,Ie+=u*qe,Pe+=u*Le,Oe+=u*tt,Nt+=u*rt,u=N[10],de+=u*He,le+=u*je,ue+=u*Be,ae+=u*Ve,oe+=u*$e,re+=u*Ue,he+=u*Je,ve+=u*Xe,ie+=u*Ze,we+=u*Qe,Ee+=u*et,Ie+=u*We,Pe+=u*qe,Oe+=u*Le,Nt+=u*tt,Mt+=u*rt,u=N[11],le+=u*He,ue+=u*je,ae+=u*Be,oe+=u*Ve,re+=u*$e,he+=u*Ue,ve+=u*Je,ie+=u*Xe,we+=u*Ze,Ee+=u*Qe,Ie+=u*et,Pe+=u*We,Oe+=u*qe,Nt+=u*Le,Mt+=u*tt,Jt+=u*rt,u=N[12],ue+=u*He,ae+=u*je,oe+=u*Be,re+=u*Ve,he+=u*$e,ve+=u*Ue,ie+=u*Je,we+=u*Xe,Ee+=u*Ze,Ie+=u*Qe,Pe+=u*et,Oe+=u*We,Nt+=u*qe,Mt+=u*Le,Jt+=u*tt,Et+=u*rt,u=N[13],ae+=u*He,oe+=u*je,re+=u*Be,he+=u*Ve,ve+=u*$e,ie+=u*Ue,we+=u*Je,Ee+=u*Xe,Ie+=u*Ze,Pe+=u*Qe,Oe+=u*et,Nt+=u*We,Mt+=u*qe,Jt+=u*Le,Et+=u*tt,ar+=u*rt,u=N[14],oe+=u*He,re+=u*je,he+=u*Be,ve+=u*Ve,ie+=u*$e,we+=u*Ue,Ee+=u*Je,Ie+=u*Xe,Pe+=u*Ze,Oe+=u*Qe,Nt+=u*et,Mt+=u*We,Jt+=u*qe,Et+=u*Le,ar+=u*tt,Jr+=u*rt,u=N[15],re+=u*He,he+=u*je,ve+=u*Be,ie+=u*Ve,we+=u*$e,Ee+=u*Ue,Ie+=u*Je,Pe+=u*Xe,Oe+=u*Ze,Nt+=u*Qe,Mt+=u*et,Jt+=u*We,Et+=u*qe,ar+=u*Le,Jr+=u*tt,An+=u*rt,$+=38*he,W+=38*ve,pe+=38*ie,be+=38*we,ge+=38*Ee,Se+=38*Ie,ze+=38*Pe,Ce+=38*Oe,me+=38*Nt,_e+=38*Mt,de+=38*Jt,le+=38*Et,ue+=38*ar,ae+=38*Jr,oe+=38*An,E=1,u=$+E+65535,E=Math.floor(u/65536),$=u-65536*E,u=W+E+65535,E=Math.floor(u/65536),W=u-65536*E,u=pe+E+65535,E=Math.floor(u/65536),pe=u-65536*E,u=be+E+65535,E=Math.floor(u/65536),be=u-65536*E,u=ge+E+65535,E=Math.floor(u/65536),ge=u-65536*E,u=Se+E+65535,E=Math.floor(u/65536),Se=u-65536*E,u=ze+E+65535,E=Math.floor(u/65536),ze=u-65536*E,u=Ce+E+65535,E=Math.floor(u/65536),Ce=u-65536*E,u=me+E+65535,E=Math.floor(u/65536),me=u-65536*E,u=_e+E+65535,E=Math.floor(u/65536),_e=u-65536*E,u=de+E+65535,E=Math.floor(u/65536),de=u-65536*E,u=le+E+65535,E=Math.floor(u/65536),le=u-65536*E,u=ue+E+65535,E=Math.floor(u/65536),ue=u-65536*E,u=ae+E+65535,E=Math.floor(u/65536),ae=u-65536*E,u=oe+E+65535,E=Math.floor(u/65536),oe=u-65536*E,u=re+E+65535,E=Math.floor(u/65536),re=u-65536*E,$+=E-1+37*(E-1),E=1,u=$+E+65535,E=Math.floor(u/65536),$=u-65536*E,u=W+E+65535,E=Math.floor(u/65536),W=u-65536*E,u=pe+E+65535,E=Math.floor(u/65536),pe=u-65536*E,u=be+E+65535,E=Math.floor(u/65536),be=u-65536*E,u=ge+E+65535,E=Math.floor(u/65536),ge=u-65536*E,u=Se+E+65535,E=Math.floor(u/65536),Se=u-65536*E,u=ze+E+65535,E=Math.floor(u/65536),ze=u-65536*E,u=Ce+E+65535,E=Math.floor(u/65536),Ce=u-65536*E,u=me+E+65535,E=Math.floor(u/65536),me=u-65536*E,u=_e+E+65535,E=Math.floor(u/65536),_e=u-65536*E,u=de+E+65535,E=Math.floor(u/65536),de=u-65536*E,u=le+E+65535,E=Math.floor(u/65536),le=u-65536*E,u=ue+E+65535,E=Math.floor(u/65536),ue=u-65536*E,u=ae+E+65535,E=Math.floor(u/65536),ae=u-65536*E,u=oe+E+65535,E=Math.floor(u/65536),oe=u-65536*E,u=re+E+65535,E=Math.floor(u/65536),re=u-65536*E,$+=E-1+37*(E-1),T[0]=$,T[1]=W,T[2]=pe,T[3]=be,T[4]=ge,T[5]=Se,T[6]=ze,T[7]=Ce,T[8]=me,T[9]=_e,T[10]=de,T[11]=le,T[12]=ue,T[13]=ae,T[14]=oe,T[15]=re}function p(T,N){c(T,N,N)}function D(T,N){const x=i();let u;for(u=0;u<16;u++)x[u]=N[u];for(u=253;u>=0;u--)p(x,x),2!==u&&4!==u&&c(x,x,N);for(u=0;u<16;u++)T[u]=x[u]}function G(T,N){const x=i(),u=i(),E=i(),$=i(),W=i(),pe=i(),be=i(),ge=i(),Se=i();w(x,T[1],T[0]),w(Se,N[1],N[0]),c(x,x,Se),O(u,T[0],T[1]),O(Se,N[0],N[1]),c(u,u,Se),c(E,T[3],N[3]),c(E,E,l),c($,T[2],N[2]),O($,$,$),w(W,u,x),w(pe,$,E),O(be,$,E),O(ge,u,x),c(T[0],W,pe),c(T[1],ge,be),c(T[2],be,pe),c(T[3],W,ge)}function X(T,N,x){for(let u=0;u<4;u++)L(T[u],N[u],x)}function Z(T,N){const x=i(),u=i(),E=i();D(E,N[2]),c(x,N[0],E),c(u,N[1],E),j(T,u),T[31]^=A(x)<<7}function d(T,N,x){b(T[0],s),b(T[1],a),b(T[2],a),b(T[3],s);for(let u=255;u>=0;--u){const E=x[u/8|0]>>(7&u)&1;X(T,N,E),G(N,T),G(T,T),X(T,N,E)}}function S(T,N){const x=[i(),i(),i(),i()];b(x[0],f),b(x[1],_),b(x[2],a),c(x[3],f,_),d(T,x,N)}function M(T){if(T.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const N=(0,t.hash)(T);N[0]&=248,N[31]&=127,N[31]|=64;const x=new Uint8Array(32),u=[i(),i(),i(),i()];S(u,N),Z(x,u);const E=new Uint8Array(64);return E.set(T),E.set(x,32),{publicKey:x,secretKey:E}}r.generateKeyPairFromSeed=M,r.generateKeyPair=function k(T){const N=(0,e.randomBytes)(32,T),x=M(N);return(0,n.wipe)(N),x},r.extractPublicKeyFromSecretKey=function C(T){if(T.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(T.subarray(32))};const R=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function z(T,N){let x,u,E,$;for(u=63;u>=32;--u){for(x=0,E=u-32,$=u-12;E<$;++E)N[E]+=x-16*N[u]*R[E-(u-32)],x=Math.floor((N[E]+128)/256),N[E]-=256*x;N[E]+=x,N[u]=0}for(x=0,E=0;E<32;E++)N[E]+=x-(N[31]>>4)*R[E],x=N[E]>>8,N[E]&=255;for(E=0;E<32;E++)N[E]-=x*R[E];for(u=0;u<32;u++)N[u+1]+=N[u]>>8,T[u]=255&N[u]}function K(T){const N=new Float64Array(64);for(let x=0;x<64;x++)N[x]=T[x];for(let x=0;x<64;x++)T[x]=0;z(T,N)}function V(T,N){const x=i(),u=i(),E=i(),$=i(),W=i(),pe=i(),be=i();return b(T[2],a),function g(T,N){for(let x=0;x<16;x++)T[x]=N[2*x]+(N[2*x+1]<<8);T[15]&=32767}(T[1],N),p(E,T[1]),c($,E,h),w(E,E,T[2]),O($,T[2],$),p(W,$),p(pe,W),c(be,pe,W),c(x,be,E),c(x,x,$),function H(T,N){const x=i();let u;for(u=0;u<16;u++)x[u]=N[u];for(u=250;u>=0;u--)p(x,x),1!==u&&c(x,x,N);for(u=0;u<16;u++)T[u]=x[u]}(x,x),c(x,x,E),c(x,x,$),c(x,x,$),c(T[0],x,$),p(u,T[0]),c(u,u,$),P(u,E)&&c(T[0],T[0],v),p(u,T[0]),c(u,u,$),P(u,E)?-1:(A(T[0])===N[31]>>7&&w(T[0],s,T[0]),c(T[3],T[0],T[1]),0)}r.sign=function ee(T,N){const x=new Float64Array(64),u=[i(),i(),i(),i()],E=(0,t.hash)(T.subarray(0,32));E[0]&=248,E[31]&=127,E[31]|=64;const $=new Uint8Array(64);$.set(E.subarray(32),32);const W=new t.SHA512;W.update($.subarray(32)),W.update(N);const pe=W.digest();W.clean(),K(pe),S(u,pe),Z($,u),W.reset(),W.update($.subarray(0,32)),W.update(T.subarray(32)),W.update(N);const be=W.digest();K(be);for(let ge=0;ge<32;ge++)x[ge]=pe[ge];for(let ge=0;ge<32;ge++)for(let Se=0;Se<32;Se++)x[ge+Se]+=be[ge]*E[Se];return z($.subarray(32),x),$},r.verify=function te(T,N,x){const u=new Uint8Array(32),E=[i(),i(),i(),i()],$=[i(),i(),i(),i()];if(x.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(V($,T))return!1;const W=new t.SHA512;W.update(x.subarray(0,32)),W.update(T),W.update(N);const pe=W.digest();return K(pe),d(E,$,pe),S($,x.subarray(32)),G(E,$),Z(u,E),!B(x,u)},r.convertPublicKeyToX25519=function J(T){let N=[i(),i(),i(),i()];if(V(N,T))throw new Error("Ed25519: invalid public key");let x=i(),u=i(),E=N[1];O(x,a,E),w(u,a,E),D(u,u),c(x,x,u);let $=new Uint8Array(32);return j($,x),$},r.convertSecretKeyToX25519=function ce(T){const N=(0,t.hash)(T.subarray(0,32));N[0]&=248,N[31]&=127,N[31]|=64;const x=new Uint8Array(N.subarray(0,32));return(0,n.wipe)(N),x}}(ti);const ns="base64url",Sh="did",Oh="key",is="base58btc";function os(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function si(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));const t=os(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return t}var Nh=function Fh(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(255!==t[s])throw new TypeError(o+" is ambiguous");t[s]=i}var a=r.length,h=r.charAt(0),l=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function v(m){if("string"!=typeof m)throw new TypeError("Expected String");if(0===m.length)return new Uint8Array;var L=0;if(" "!==m[L]){for(var j=0,B=0;m[L]===h;)j++,L++;for(var P=(m.length-L)*l+1>>>0,A=new Uint8Array(P);m[L];){var g=t[m.charCodeAt(L)];if(255===g)return;for(var O=0,w=P-1;(0!==g||O<B)&&-1!==w;w--,O++)A[w]=(g+=a*A[w]>>>0)%256>>>0,g=g/256>>>0;if(0!==g)throw new Error("Non-zero carry");B=O,L++}if(" "!==m[L]){for(var c=P-B;c!==P&&0===A[c];)c++;for(var p=new Uint8Array(j+(P-c)),D=j;c!==P;)p[D++]=A[c++];return p}}}return{encode:function _(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===m.length)return"";for(var L=0,j=0,B=0,P=m.length;B!==P&&0===m[B];)B++,L++;for(var A=(P-B)*f+1>>>0,g=new Uint8Array(A);B!==P;){for(var O=m[B],w=0,c=A-1;(0!==O||w<j)&&-1!==c;c--,w++)g[c]=(O+=256*g[c]>>>0)%a>>>0,O=O/a>>>0;if(0!==O)throw new Error("Non-zero carry");j=w,B++}for(var p=A-j;p!==A&&0===g[p];)p++;for(var D=h.repeat(L);p<A;++p)D+=r.charAt(g[p]);return D},decodeUnsafe:v,decode:function b(m){var L=v(m);if(L)return L;throw new Error(`Non-${e} character`)}}};const ss=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};class Rh{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ch{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return as(this,e)}}class jh{constructor(e){this.decoders=e}or(e){return as(this,e)}decode(e){const n=this.decoders[e[0]];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const as=(r,e)=>new jh({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Uh{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Rh(e,t,n),this.decoder=new Ch(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const pn=({name:r,prefix:e,encode:t,decode:n})=>new Uh(r,e,t,n),Ur=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=Nh(t,e);return pn({prefix:r,name:e,encode:n,decode:o=>ss(i(o))})},it=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>pn({prefix:e,name:r,encode:i=>((r,e,t)=>{const n="="===e[e.length-1],i=(1<<t)-1;let o="",s=0,a=0;for(let h=0;h<r.length;++h)for(a=a<<8|r[h],s+=8;s>t;)s-=t,o+=e[i&a>>s];if(s&&(o+=e[i&a<<t-s]),n)for(;o.length*t&7;)o+="=";return o})(i,n,t),decode:i=>((r,e,t,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=r.length;for(;"="===r[o-1];)--o;const s=new Uint8Array(o*t/8|0);let a=0,h=0,l=0;for(let f=0;f<o;++f){const _=i[r[f]];if(void 0===_)throw new SyntaxError(`Non-${n} character`);h=h<<t|_,a+=t,a>=8&&(a-=8,s[l++]=255&h>>a)}if(a>=t||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return s})(i,n,t,r)}),Dh=pn({prefix:"\0",name:"identity",encode:r=>(r=>(new TextDecoder).decode(r))(r),decode:r=>(r=>(new TextEncoder).encode(r))(r)});var zh=Object.freeze({__proto__:null,identity:Dh});const Kh=it({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Hh=Object.freeze({__proto__:null,base2:Kh});const Bh=it({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Vh=Object.freeze({__proto__:null,base8:Bh});const $h=Ur({prefix:"9",name:"base10",alphabet:"0123456789"});var qh=Object.freeze({__proto__:null,base10:$h});const Gh=it({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Wh=it({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Yh=Object.freeze({__proto__:null,base16:Gh,base16upper:Wh});const Jh=it({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Xh=it({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Zh=it({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Qh=it({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ef=it({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),tf=it({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rf=it({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nf=it({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),of=it({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var sf=Object.freeze({__proto__:null,base32:Jh,base32upper:Xh,base32pad:Zh,base32padupper:Qh,base32hex:ef,base32hexupper:tf,base32hexpad:rf,base32hexpadupper:nf,base32z:of});const af=Ur({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),cf=Ur({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var uf=Object.freeze({__proto__:null,base36:af,base36upper:cf});const lf=Ur({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hf=Ur({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ff=Object.freeze({__proto__:null,base58btc:lf,base58flickr:hf});const pf=it({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),df=it({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yf=it({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gf=it({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var _f=Object.freeze({__proto__:null,base64:pf,base64pad:df,base64url:yf,base64urlpad:gf});const cs=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),vf=cs.reduce((r,e,t)=>(r[t]=e,r),[]),mf=cs.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);const Ef=pn({prefix:"\u{1f680}",name:"base256emoji",encode:function bf(r){return r.reduce((e,t)=>e+vf[t],"")},decode:function wf(r){const e=[];for(const t of r){const n=mf[t.codePointAt(0)];if(void 0===n)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}});var Sf=Object.freeze({__proto__:null,base256emoji:Ef}),Of=function ls(r,e,t){e=e||[];for(var n=t=t||0;r>=xf;)e[t++]=255&r|128,r/=128;for(;-128&r;)e[t++]=255&r|128,r>>>=7;return e[t]=0|r,ls.bytes=t-n+1,e},xf=Math.pow(2,31);var Ff=function ai(r,n){var s,t=0,i=0,o=n=n||0,a=r.length;do{if(o>=a)throw ai.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(127&s)<<i:(127&s)*Math.pow(2,i),i+=7}while(s>=128);return ai.bytes=o-n,t};var Nf=Math.pow(2,7),Tf=Math.pow(2,14),Lf=Math.pow(2,21),Rf=Math.pow(2,28),Cf=Math.pow(2,35),jf=Math.pow(2,42),Uf=Math.pow(2,49),Mf=Math.pow(2,56),kf=Math.pow(2,63),fs={encode:Of,decode:Ff,encodingLength:function(r){return r<Nf?1:r<Tf?2:r<Lf?3:r<Rf?4:r<Cf?5:r<jf?6:r<Uf?7:r<Mf?8:r<kf?9:10}};const ps=(r,e,t=0)=>(fs.encode(r,e,t),e),ds=r=>fs.encodingLength(r),ci=(r,e)=>{const t=e.byteLength,n=ds(r),i=n+ds(t),o=new Uint8Array(i+t);return ps(r,o,0),ps(t,o,n),o.set(e,i),new Kf(r,t,e,o)};class Kf{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}const ys=({name:r,code:e,encode:t})=>new Hf(r,e,t);class Hf{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ci(this.code,t):t.then(n=>ci(this.code,n))}throw Error("Unknown type, must be binary type")}}const gs=r=>function(){var e=I(function*(t){return new Uint8Array(yield crypto.subtle.digest(r,t))});return function(t){return e.apply(this,arguments)}}(),Bf=ys({name:"sha2-256",code:18,encode:gs("SHA-256")}),Vf=ys({name:"sha2-512",code:19,encode:gs("SHA-512")});Object.freeze({__proto__:null,sha256:Bf,sha512:Vf});const vs=ss;Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:vs,digest:r=>ci(0,vs(r))}}),new TextEncoder,new TextDecoder;const ms={...zh,...Hh,...Vh,...qh,...Yh,...sf,...uf,...ff,..._f,...Sf};function bs(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const ws=bs("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>(new TextEncoder).encode(r.substring(1))),ui=bs("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{const e=os((r=r.substring(1)).length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Es={utf8:ws,"utf-8":ws,hex:ms.base16,latin1:ui,ascii:ui,binary:ui,...ms};function _t(r,e="utf8"){const t=Es[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.encoder.encode(r).substring(1):globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8")}function vt(r,e="utf8"){const t=Es[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${r}`):globalThis.Buffer.from(r,"utf8")}function dn(r){return _t(vt(jr(r),"utf8"),ns)}function Ss(r){const t="z"+_t(si([vt("K36",is),r]),is);return[Sh,Oh,t].join(":")}function Wf(r){return _t(r,ns)}function Yf(r){return vt([dn(r.header),dn(r.payload)].join("."),"utf8")}function Jf(r){return[dn(r.header),dn(r.payload),Wf(r.signature)].join(".")}function Os(r=vr.randomBytes(32)){return ti.generateKeyPairFromSeed(r)}function li(){return(li=I(function*(r,e,t,n,i=Q.fromMiliseconds(Date.now())){const o={alg:"EdDSA",typ:"JWT"},h={iss:Ss(n.publicKey),sub:r,aud:e,iat:i,exp:i+t},l=Yf({header:o,payload:h});return Jf({header:o,payload:h,signature:ti.sign(n.secretKey,l)})})).apply(this,arguments)}var hi={},yn={};Object.defineProperty(yn,"__esModule",{value:!0});var ut=ne,fi=wt;function Qf(r,e,t){for(var n=1634760805,i=857760878,o=2036477234,s=1797285236,a=t[3]<<24|t[2]<<16|t[1]<<8|t[0],h=t[7]<<24|t[6]<<16|t[5]<<8|t[4],l=t[11]<<24|t[10]<<16|t[9]<<8|t[8],f=t[15]<<24|t[14]<<16|t[13]<<8|t[12],_=t[19]<<24|t[18]<<16|t[17]<<8|t[16],v=t[23]<<24|t[22]<<16|t[21]<<8|t[20],b=t[27]<<24|t[26]<<16|t[25]<<8|t[24],m=t[31]<<24|t[30]<<16|t[29]<<8|t[28],L=e[3]<<24|e[2]<<16|e[1]<<8|e[0],j=e[7]<<24|e[6]<<16|e[5]<<8|e[4],B=e[11]<<24|e[10]<<16|e[9]<<8|e[8],P=e[15]<<24|e[14]<<16|e[13]<<8|e[12],A=n,g=i,O=o,w=s,c=a,p=h,D=l,H=f,G=_,X=v,Z=b,d=m,S=L,M=j,k=B,C=P,R=0;R<20;R+=2)c=(c^=G=G+(S=(S^=A=A+c|0)>>>16|S<<16)|0)>>>20|c<<12,p=(p^=X=X+(M=(M^=g=g+p|0)>>>16|M<<16)|0)>>>20|p<<12,D=(D^=Z=Z+(k=(k^=O=O+D|0)>>>16|k<<16)|0)>>>20|D<<12,H=(H^=d=d+(C=(C^=w=w+H|0)>>>16|C<<16)|0)>>>20|H<<12,D=(D^=Z=Z+(k=(k^=O=O+D|0)>>>24|k<<8)|0)>>>25|D<<7,H=(H^=d=d+(C=(C^=w=w+H|0)>>>24|C<<8)|0)>>>25|H<<7,p=(p^=X=X+(M=(M^=g=g+p|0)>>>24|M<<8)|0)>>>25|p<<7,c=(c^=G=G+(S=(S^=A=A+c|0)>>>24|S<<8)|0)>>>25|c<<7,p=(p^=Z=Z+(C=(C^=A=A+p|0)>>>16|C<<16)|0)>>>20|p<<12,D=(D^=d=d+(S=(S^=g=g+D|0)>>>16|S<<16)|0)>>>20|D<<12,H=(H^=G=G+(M=(M^=O=O+H|0)>>>16|M<<16)|0)>>>20|H<<12,c=(c^=X=X+(k=(k^=w=w+c|0)>>>16|k<<16)|0)>>>20|c<<12,H=(H^=G=G+(M=(M^=O=O+H|0)>>>24|M<<8)|0)>>>25|H<<7,c=(c^=X=X+(k=(k^=w=w+c|0)>>>24|k<<8)|0)>>>25|c<<7,D=(D^=d=d+(S=(S^=g=g+D|0)>>>24|S<<8)|0)>>>25|D<<7,p=(p^=Z=Z+(C=(C^=A=A+p|0)>>>24|C<<8)|0)>>>25|p<<7;ut.writeUint32LE(A+n|0,r,0),ut.writeUint32LE(g+i|0,r,4),ut.writeUint32LE(O+o|0,r,8),ut.writeUint32LE(w+s|0,r,12),ut.writeUint32LE(c+a|0,r,16),ut.writeUint32LE(p+h|0,r,20),ut.writeUint32LE(D+l|0,r,24),ut.writeUint32LE(H+f|0,r,28),ut.writeUint32LE(G+_|0,r,32),ut.writeUint32LE(X+v|0,r,36),ut.writeUint32LE(Z+b|0,r,40),ut.writeUint32LE(d+m|0,r,44),ut.writeUint32LE(S+L|0,r,48),ut.writeUint32LE(M+j|0,r,52),ut.writeUint32LE(k+B|0,r,56),ut.writeUint32LE(C+P|0,r,60)}function Is(r,e,t,n,i){if(void 0===i&&(i=0),32!==r.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<t.length)throw new Error("ChaCha: destination is shorter than source");var o,s;if(0===i){if(8!==e.length&&12!==e.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");(o=new Uint8Array(16)).set(e,s=o.length-e.length)}else{if(16!==e.length)throw new Error("ChaCha nonce with counter must be 16 bytes");o=e,s=i}for(var a=new Uint8Array(64),h=0;h<t.length;h+=64){Qf(a,o,r);for(var l=h;l<h+64&&l<t.length;l++)n[l]=t[l]^a[l-h];tp(o,0,s)}return fi.wipe(a),0===i&&fi.wipe(o),n}function tp(r,e,t){for(var n=1;t--;)r[e]=255&(n=n+(255&r[e])|0),n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}yn.streamXOR=Is,yn.stream=function ep(r,e,t,n){return void 0===n&&(n=0),fi.wipe(t),Is(r,e,t,t,n)};var Ps={},$t={};function xs(r,e){if(r.length!==e.length)return 0;for(var t=0,n=0;n<r.length;n++)t|=r[n]^e[n];return 1&t-1>>>8}Object.defineProperty($t,"__esModule",{value:!0}),$t.select=function rp(r,e,t){return~(r-1)&e|r-1&t},$t.lessOrEqual=function np(r,e){return(0|r)-(0|e)-1>>>31&1},$t.compare=xs,$t.equal=function ip(r,e){return 0!==r.length&&0!==e.length&&0!==xs(r,e)},function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=$t,t=wt;r.DIGEST_LENGTH=16;var n=function(){function s(a){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var h=a[0]|a[1]<<8;this._r[0]=8191&h;var l=a[2]|a[3]<<8;this._r[1]=8191&(h>>>13|l<<3);var f=a[4]|a[5]<<8;this._r[2]=7939&(l>>>10|f<<6);var _=a[6]|a[7]<<8;this._r[3]=8191&(f>>>7|_<<9);var v=a[8]|a[9]<<8;this._r[4]=255&(_>>>4|v<<12),this._r[5]=v>>>1&8190;var b=a[10]|a[11]<<8;this._r[6]=8191&(v>>>14|b<<2);var m=a[12]|a[13]<<8;this._r[7]=8065&(b>>>11|m<<5);var L=a[14]|a[15]<<8;this._r[8]=8191&(m>>>8|L<<8),this._r[9]=L>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return s.prototype._blocks=function(a,h,l){for(var f=this._fin?0:2048,_=this._h[0],v=this._h[1],b=this._h[2],m=this._h[3],L=this._h[4],j=this._h[5],B=this._h[6],P=this._h[7],A=this._h[8],g=this._h[9],O=this._r[0],w=this._r[1],c=this._r[2],p=this._r[3],D=this._r[4],H=this._r[5],G=this._r[6],X=this._r[7],Z=this._r[8],d=this._r[9];l>=16;){var S=a[h+0]|a[h+1]<<8,M=a[h+2]|a[h+3]<<8,k=a[h+4]|a[h+5]<<8,C=a[h+6]|a[h+7]<<8,R=a[h+8]|a[h+9]<<8,z=a[h+10]|a[h+11]<<8,K=a[h+12]|a[h+13]<<8,ee=a[h+14]|a[h+15]<<8,V=0,te=V;te+=(_+=8191&S)*O,te+=(v+=8191&(S>>>13|M<<3))*(5*d),te+=(b+=8191&(M>>>10|k<<6))*(5*Z),te+=(m+=8191&(k>>>7|C<<9))*(5*X),V=(te+=(L+=8191&(C>>>4|R<<12))*(5*G))>>>13,te&=8191,te+=(j+=R>>>1&8191)*(5*H),te+=(B+=8191&(R>>>14|z<<2))*(5*D),te+=(P+=8191&(z>>>11|K<<5))*(5*p),te+=(A+=8191&(K>>>8|ee<<8))*(5*c);var J=V+=(te+=(g+=ee>>>5|f)*(5*w))>>>13;J+=_*w,J+=v*O,J+=b*(5*d),J+=m*(5*Z),V=(J+=L*(5*X))>>>13,J&=8191,J+=j*(5*G),J+=B*(5*H),J+=P*(5*D),J+=A*(5*p),V+=(J+=g*(5*c))>>>13,J&=8191;var ce=V;ce+=_*c,ce+=v*w,ce+=b*O,ce+=m*(5*d),V=(ce+=L*(5*Z))>>>13,ce&=8191,ce+=j*(5*X),ce+=B*(5*G),ce+=P*(5*H),ce+=A*(5*D);var T=V+=(ce+=g*(5*p))>>>13;T+=_*p,T+=v*c,T+=b*w,T+=m*O,V=(T+=L*(5*d))>>>13,T&=8191,T+=j*(5*Z),T+=B*(5*X),T+=P*(5*G),T+=A*(5*H);var N=V+=(T+=g*(5*D))>>>13;N+=_*D,N+=v*p,N+=b*c,N+=m*w,V=(N+=L*O)>>>13,N&=8191,N+=j*(5*d),N+=B*(5*Z),N+=P*(5*X),N+=A*(5*G);var x=V+=(N+=g*(5*H))>>>13;x+=_*H,x+=v*D,x+=b*p,x+=m*c,V=(x+=L*w)>>>13,x&=8191,x+=j*O,x+=B*(5*d),x+=P*(5*Z),x+=A*(5*X);var u=V+=(x+=g*(5*G))>>>13;u+=_*G,u+=v*H,u+=b*D,u+=m*p,V=(u+=L*c)>>>13,u&=8191,u+=j*w,u+=B*O,u+=P*(5*d),u+=A*(5*Z);var E=V+=(u+=g*(5*X))>>>13;E+=_*X,E+=v*G,E+=b*H,E+=m*D,V=(E+=L*p)>>>13,E&=8191,E+=j*c,E+=B*w,E+=P*O,E+=A*(5*d);var $=V+=(E+=g*(5*Z))>>>13;$+=_*Z,$+=v*X,$+=b*G,$+=m*H,V=($+=L*D)>>>13,$&=8191,$+=j*p,$+=B*c,$+=P*w,$+=A*O;var W=V+=($+=g*(5*d))>>>13;W+=_*d,W+=v*Z,W+=b*X,W+=m*G,V=(W+=L*H)>>>13,W&=8191,W+=j*D,W+=B*p,W+=P*c,W+=A*w,_=te=8191&(V=(V=((V+=(W+=g*O)>>>13)<<2)+V|0)+(te&=8191)|0),v=J+=V>>>=13,b=ce&=8191,m=T&=8191,L=N&=8191,j=x&=8191,B=u&=8191,P=E&=8191,A=$&=8191,g=W&=8191,h+=16,l-=16}this._h[0]=_,this._h[1]=v,this._h[2]=b,this._h[3]=m,this._h[4]=L,this._h[5]=j,this._h[6]=B,this._h[7]=P,this._h[8]=A,this._h[9]=g},s.prototype.finish=function(a,h){void 0===h&&(h=0);var f,_,v,b,l=new Uint16Array(10);if(this._leftover){for(b=this._leftover,this._buffer[b++]=1;b<16;b++)this._buffer[b]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,b=2;b<10;b++)this._h[b]+=f,f=this._h[b]>>>13,this._h[b]&=8191;for(this._h[0]+=5*f,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,l[0]=this._h[0]+5,f=l[0]>>>13,l[0]&=8191,b=1;b<10;b++)l[b]=this._h[b]+f,f=l[b]>>>13,l[b]&=8191;for(l[9]-=8192,_=(1^f)-1,b=0;b<10;b++)l[b]&=_;for(_=~_,b=0;b<10;b++)this._h[b]=this._h[b]&_|l[b];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),this._h[0]=65535&(v=this._h[0]+this._pad[0]),b=1;b<8;b++)this._h[b]=65535&(v=(this._h[b]+this._pad[b]|0)+(v>>>16)|0);return a[h+0]=this._h[0]>>>0,a[h+1]=this._h[0]>>>8,a[h+2]=this._h[1]>>>0,a[h+3]=this._h[1]>>>8,a[h+4]=this._h[2]>>>0,a[h+5]=this._h[2]>>>8,a[h+6]=this._h[3]>>>0,a[h+7]=this._h[3]>>>8,a[h+8]=this._h[4]>>>0,a[h+9]=this._h[4]>>>8,a[h+10]=this._h[5]>>>0,a[h+11]=this._h[5]>>>8,a[h+12]=this._h[6]>>>0,a[h+13]=this._h[6]>>>8,a[h+14]=this._h[7]>>>0,a[h+15]=this._h[7]>>>8,this._finished=!0,this},s.prototype.update=function(a){var f,h=0,l=a.length;if(this._leftover){(f=16-this._leftover)>l&&(f=l);for(var _=0;_<f;_++)this._buffer[this._leftover+_]=a[h+_];if(l-=f,h+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(this._blocks(a,h,f=l-l%16),h+=f,l-=f),l){for(_=0;_<l;_++)this._buffer[this._leftover+_]=a[h+_];this._leftover+=l}return this},s.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},s.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},s}();r.Poly1305=n,r.oneTimeAuth=function i(s,a){var h=new n(s);h.update(a);var l=h.digest();return h.clean(),l},r.equal=function o(s,a){return s.length===r.DIGEST_LENGTH&&a.length===r.DIGEST_LENGTH&&e.equal(s,a)}}(Ps),function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=yn,t=Ps,n=wt,i=ne,o=$t;r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var s=new Uint8Array(16),a=function(){function h(l){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,l.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return h.prototype.seal=function(l,f,_,v){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var b=new Uint8Array(16);b.set(l,b.length-l.length);var m=new Uint8Array(32);e.stream(this._key,b,m,4);var j,L=f.length+this.tagLength;if(v){if(v.length!==L)throw new Error("ChaCha20Poly1305: incorrect destination length");j=v}else j=new Uint8Array(L);return e.streamXOR(this._key,b,f,j,4),this._authenticate(j.subarray(j.length-this.tagLength,j.length),m,j.subarray(0,j.length-this.tagLength),_),n.wipe(b),j},h.prototype.open=function(l,f,_,v){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(f.length<this.tagLength)return null;var b=new Uint8Array(16);b.set(l,b.length-l.length);var m=new Uint8Array(32);e.stream(this._key,b,m,4);var L=new Uint8Array(this.tagLength);if(this._authenticate(L,m,f.subarray(0,f.length-this.tagLength),_),!o.equal(L,f.subarray(f.length-this.tagLength,f.length)))return null;var B,j=f.length-this.tagLength;if(v){if(v.length!==j)throw new Error("ChaCha20Poly1305: incorrect destination length");B=v}else B=new Uint8Array(j);return e.streamXOR(this._key,b,f.subarray(0,f.length-this.tagLength),B,4),n.wipe(b),B},h.prototype.clean=function(){return n.wipe(this._key),this},h.prototype._authenticate=function(l,f,_,v){var b=new t.Poly1305(f);v&&(b.update(v),v.length%16>0&&b.update(s.subarray(v.length%16))),b.update(_),_.length%16>0&&b.update(s.subarray(_.length%16));var m=new Uint8Array(8);v&&i.writeUint64LE(v.length,m),b.update(m),i.writeUint64LE(_.length,m),b.update(m);for(var L=b.digest(),j=0;j<L.length;j++)l[j]=L[j];b.clean(),n.wipe(L),n.wipe(m)},h}();r.ChaCha20Poly1305=a}(hi);var Fs={},Mr={},pi={};Object.defineProperty(pi,"__esModule",{value:!0}),pi.isSerializableHash=function op(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"},Object.defineProperty(Mr,"__esModule",{value:!0});var Rt=pi,sp=$t,ap=wt,As=function(){function r(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(n).clean():n.set(t);for(var i=0;i<n.length;i++)n[i]^=54;for(this._inner.update(n),i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Rt.isSerializableHash(this._inner)&&Rt.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),ap.wipe(n)}return r.prototype.reset=function(){if(!Rt.isSerializableHash(this._inner)||!Rt.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){Rt.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Rt.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(e){return this._inner.update(e),this},r.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(!Rt.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(e){if(!Rt.isSerializableHash(this._inner)||!Rt.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(e){if(!Rt.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},r}();Mr.HMAC=As,Mr.hmac=function cp(r,e,t){var n=new As(r,e);n.update(t);var i=n.digest();return n.clean(),i},Mr.equal=sp.equal,Object.defineProperty(Fs,"__esModule",{value:!0});var Ns=Mr,Ts=wt,up=function(){function r(e,t,n,i){void 0===n&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var o=Ns.hmac(this._hash,n,t);this._hmac=new Ns.HMAC(e,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[n]=this._buffer[this._bufpos++];return t},r.prototype.clean=function(){this._hmac.clean(),Ts.wipe(this._buffer),Ts.wipe(this._counter),this._bufpos=0},r}(),lp=Fs.HKDF=up,gn={};!function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=ne,t=wt;r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},a.prototype.update=function(h,l){if(void 0===l&&(l=h.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=h[f++],l--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=o(this._temp,this._state,h,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=h[f++],l--;return this},a.prototype.finish=function(h){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,_=l/536870912|0,v=l<<3,b=l%64<56?64:128;this._buffer[f]=128;for(var m=f+1;m<b-8;m++)this._buffer[m]=0;e.writeUint32BE(_,this._buffer,b-8),e.writeUint32BE(v,this._buffer,b-4),o(this._temp,this._state,this._buffer,0,b),this._finished=!0}for(m=0;m<this.digestLength/4;m++)e.writeUint32BE(this._state[m],h,4*m);return this},a.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(h){return this._state.set(h.state),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(h){t.wipe(h.state),h.buffer&&t.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},a}();r.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(a,h,l,f,_){for(;_>=64;){for(var v=h[0],b=h[1],m=h[2],L=h[3],j=h[4],B=h[5],P=h[6],A=h[7],g=0;g<16;g++)a[g]=e.readUint32BE(l,f+4*g);for(g=16;g<64;g++){var w=a[g-2];a[g]=((c=(w>>>17|w<<15)^(w>>>19|w<<13)^w>>>10)+a[g-7]|0)+((p=((w=a[g-15])>>>7|w<<25)^(w>>>18|w<<14)^w>>>3)+a[g-16]|0)}for(g=0;g<64;g++){var c=(((j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7))+(j&B^~j&P)|0)+(A+(i[g]+a[g]|0)|0)|0,p=((v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10))+(v&b^v&m^b&m)|0;A=P,P=B,B=j,j=L+c|0,L=m,m=b,b=v,v=c+p|0}h[0]+=v,h[1]+=b,h[2]+=m,h[3]+=L,h[4]+=j,h[5]+=B,h[6]+=P,h[7]+=A,f+=64,_-=64}return f}r.hash=function s(a){var h=new n;h.update(a);var l=h.digest();return h.clean(),l}}(gn);var di={};!function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=vr,t=wt;function n(g){const O=new Float64Array(16);if(g)for(let w=0;w<g.length;w++)O[w]=g[w];return O}r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;const i=new Uint8Array(32);i[0]=9;const o=n([56129,1]);function s(g){let O=1;for(let w=0;w<16;w++){let c=g[w]+O+65535;O=Math.floor(c/65536),g[w]=c-65536*O}g[0]+=O-1+37*(O-1)}function a(g,O,w){const c=~(w-1);for(let p=0;p<16;p++){const D=c&(g[p]^O[p]);g[p]^=D,O[p]^=D}}function f(g,O,w){for(let c=0;c<16;c++)g[c]=O[c]+w[c]}function _(g,O,w){for(let c=0;c<16;c++)g[c]=O[c]-w[c]}function v(g,O,w){let c,p,D=0,H=0,G=0,X=0,Z=0,d=0,S=0,M=0,k=0,C=0,R=0,z=0,K=0,ee=0,V=0,te=0,J=0,ce=0,T=0,N=0,x=0,u=0,E=0,$=0,W=0,pe=0,be=0,ge=0,Se=0,ze=0,Ce=0,me=w[0],_e=w[1],de=w[2],le=w[3],ue=w[4],ae=w[5],oe=w[6],re=w[7],he=w[8],ve=w[9],ie=w[10],we=w[11],Ee=w[12],Ie=w[13],Pe=w[14],Oe=w[15];c=O[0],D+=c*me,H+=c*_e,G+=c*de,X+=c*le,Z+=c*ue,d+=c*ae,S+=c*oe,M+=c*re,k+=c*he,C+=c*ve,R+=c*ie,z+=c*we,K+=c*Ee,ee+=c*Ie,V+=c*Pe,te+=c*Oe,c=O[1],H+=c*me,G+=c*_e,X+=c*de,Z+=c*le,d+=c*ue,S+=c*ae,M+=c*oe,k+=c*re,C+=c*he,R+=c*ve,z+=c*ie,K+=c*we,ee+=c*Ee,V+=c*Ie,te+=c*Pe,J+=c*Oe,c=O[2],G+=c*me,X+=c*_e,Z+=c*de,d+=c*le,S+=c*ue,M+=c*ae,k+=c*oe,C+=c*re,R+=c*he,z+=c*ve,K+=c*ie,ee+=c*we,V+=c*Ee,te+=c*Ie,J+=c*Pe,ce+=c*Oe,c=O[3],X+=c*me,Z+=c*_e,d+=c*de,S+=c*le,M+=c*ue,k+=c*ae,C+=c*oe,R+=c*re,z+=c*he,K+=c*ve,ee+=c*ie,V+=c*we,te+=c*Ee,J+=c*Ie,ce+=c*Pe,T+=c*Oe,c=O[4],Z+=c*me,d+=c*_e,S+=c*de,M+=c*le,k+=c*ue,C+=c*ae,R+=c*oe,z+=c*re,K+=c*he,ee+=c*ve,V+=c*ie,te+=c*we,J+=c*Ee,ce+=c*Ie,T+=c*Pe,N+=c*Oe,c=O[5],d+=c*me,S+=c*_e,M+=c*de,k+=c*le,C+=c*ue,R+=c*ae,z+=c*oe,K+=c*re,ee+=c*he,V+=c*ve,te+=c*ie,J+=c*we,ce+=c*Ee,T+=c*Ie,N+=c*Pe,x+=c*Oe,c=O[6],S+=c*me,M+=c*_e,k+=c*de,C+=c*le,R+=c*ue,z+=c*ae,K+=c*oe,ee+=c*re,V+=c*he,te+=c*ve,J+=c*ie,ce+=c*we,T+=c*Ee,N+=c*Ie,x+=c*Pe,u+=c*Oe,c=O[7],M+=c*me,k+=c*_e,C+=c*de,R+=c*le,z+=c*ue,K+=c*ae,ee+=c*oe,V+=c*re,te+=c*he,J+=c*ve,ce+=c*ie,T+=c*we,N+=c*Ee,x+=c*Ie,u+=c*Pe,E+=c*Oe,c=O[8],k+=c*me,C+=c*_e,R+=c*de,z+=c*le,K+=c*ue,ee+=c*ae,V+=c*oe,te+=c*re,J+=c*he,ce+=c*ve,T+=c*ie,N+=c*we,x+=c*Ee,u+=c*Ie,E+=c*Pe,$+=c*Oe,c=O[9],C+=c*me,R+=c*_e,z+=c*de,K+=c*le,ee+=c*ue,V+=c*ae,te+=c*oe,J+=c*re,ce+=c*he,T+=c*ve,N+=c*ie,x+=c*we,u+=c*Ee,E+=c*Ie,$+=c*Pe,W+=c*Oe,c=O[10],R+=c*me,z+=c*_e,K+=c*de,ee+=c*le,V+=c*ue,te+=c*ae,J+=c*oe,ce+=c*re,T+=c*he,N+=c*ve,x+=c*ie,u+=c*we,E+=c*Ee,$+=c*Ie,W+=c*Pe,pe+=c*Oe,c=O[11],z+=c*me,K+=c*_e,ee+=c*de,V+=c*le,te+=c*ue,J+=c*ae,ce+=c*oe,T+=c*re,N+=c*he,x+=c*ve,u+=c*ie,E+=c*we,$+=c*Ee,W+=c*Ie,pe+=c*Pe,be+=c*Oe,c=O[12],K+=c*me,ee+=c*_e,V+=c*de,te+=c*le,J+=c*ue,ce+=c*ae,T+=c*oe,N+=c*re,x+=c*he,u+=c*ve,E+=c*ie,$+=c*we,W+=c*Ee,pe+=c*Ie,be+=c*Pe,ge+=c*Oe,c=O[13],ee+=c*me,V+=c*_e,te+=c*de,J+=c*le,ce+=c*ue,T+=c*ae,N+=c*oe,x+=c*re,u+=c*he,E+=c*ve,$+=c*ie,W+=c*we,pe+=c*Ee,be+=c*Ie,ge+=c*Pe,Se+=c*Oe,c=O[14],V+=c*me,te+=c*_e,J+=c*de,ce+=c*le,T+=c*ue,N+=c*ae,x+=c*oe,u+=c*re,E+=c*he,$+=c*ve,W+=c*ie,pe+=c*we,be+=c*Ee,ge+=c*Ie,Se+=c*Pe,ze+=c*Oe,c=O[15],te+=c*me,J+=c*_e,ce+=c*de,T+=c*le,N+=c*ue,x+=c*ae,u+=c*oe,E+=c*re,$+=c*he,W+=c*ve,pe+=c*ie,be+=c*we,ge+=c*Ee,Se+=c*Ie,ze+=c*Pe,Ce+=c*Oe,D+=38*J,H+=38*ce,G+=38*T,X+=38*N,Z+=38*x,d+=38*u,S+=38*E,M+=38*$,k+=38*W,C+=38*pe,R+=38*be,z+=38*ge,K+=38*Se,ee+=38*ze,V+=38*Ce,p=1,c=D+p+65535,p=Math.floor(c/65536),D=c-65536*p,c=H+p+65535,p=Math.floor(c/65536),H=c-65536*p,c=G+p+65535,p=Math.floor(c/65536),G=c-65536*p,c=X+p+65535,p=Math.floor(c/65536),X=c-65536*p,c=Z+p+65535,p=Math.floor(c/65536),Z=c-65536*p,c=d+p+65535,p=Math.floor(c/65536),d=c-65536*p,c=S+p+65535,p=Math.floor(c/65536),S=c-65536*p,c=M+p+65535,p=Math.floor(c/65536),M=c-65536*p,c=k+p+65535,p=Math.floor(c/65536),k=c-65536*p,c=C+p+65535,p=Math.floor(c/65536),C=c-65536*p,c=R+p+65535,p=Math.floor(c/65536),R=c-65536*p,c=z+p+65535,p=Math.floor(c/65536),z=c-65536*p,c=K+p+65535,p=Math.floor(c/65536),K=c-65536*p,c=ee+p+65535,p=Math.floor(c/65536),ee=c-65536*p,c=V+p+65535,p=Math.floor(c/65536),V=c-65536*p,c=te+p+65535,p=Math.floor(c/65536),te=c-65536*p,D+=p-1+37*(p-1),p=1,c=D+p+65535,p=Math.floor(c/65536),D=c-65536*p,c=H+p+65535,p=Math.floor(c/65536),H=c-65536*p,c=G+p+65535,p=Math.floor(c/65536),G=c-65536*p,c=X+p+65535,p=Math.floor(c/65536),X=c-65536*p,c=Z+p+65535,p=Math.floor(c/65536),Z=c-65536*p,c=d+p+65535,p=Math.floor(c/65536),d=c-65536*p,c=S+p+65535,p=Math.floor(c/65536),S=c-65536*p,c=M+p+65535,p=Math.floor(c/65536),M=c-65536*p,c=k+p+65535,p=Math.floor(c/65536),k=c-65536*p,c=C+p+65535,p=Math.floor(c/65536),C=c-65536*p,c=R+p+65535,p=Math.floor(c/65536),R=c-65536*p,c=z+p+65535,p=Math.floor(c/65536),z=c-65536*p,c=K+p+65535,p=Math.floor(c/65536),K=c-65536*p,c=ee+p+65535,p=Math.floor(c/65536),ee=c-65536*p,c=V+p+65535,p=Math.floor(c/65536),V=c-65536*p,c=te+p+65535,p=Math.floor(c/65536),te=c-65536*p,D+=p-1+37*(p-1),g[0]=D,g[1]=H,g[2]=G,g[3]=X,g[4]=Z,g[5]=d,g[6]=S,g[7]=M,g[8]=k,g[9]=C,g[10]=R,g[11]=z,g[12]=K,g[13]=ee,g[14]=V,g[15]=te}function b(g,O){v(g,O,O)}function L(g,O){const w=new Uint8Array(32),c=new Float64Array(80),p=n(),D=n(),H=n(),G=n(),X=n(),Z=n();for(let k=0;k<31;k++)w[k]=g[k];w[31]=127&g[31]|64,w[0]&=248,function l(g,O){for(let w=0;w<16;w++)g[w]=O[2*w]+(O[2*w+1]<<8);g[15]&=32767}(c,O);for(let k=0;k<16;k++)D[k]=c[k];p[0]=G[0]=1;for(let k=254;k>=0;--k){const C=w[k>>>3]>>>(7&k)&1;a(p,D,C),a(H,G,C),f(X,p,H),_(p,p,H),f(H,D,G),_(D,D,G),b(G,X),b(Z,p),v(p,H,p),v(H,D,X),f(X,p,H),_(p,p,H),b(D,p),_(H,G,Z),v(p,H,o),f(p,p,G),v(H,H,p),v(p,G,Z),v(G,D,c),b(D,X),a(p,D,C),a(H,G,C)}for(let k=0;k<16;k++)c[k+16]=p[k],c[k+32]=H[k],c[k+48]=D[k],c[k+64]=G[k];const d=c.subarray(32),S=c.subarray(16);(function m(g,O){const w=n();for(let c=0;c<16;c++)w[c]=O[c];for(let c=253;c>=0;c--)b(w,w),2!==c&&4!==c&&v(w,w,O);for(let c=0;c<16;c++)g[c]=w[c]})(d,d),v(S,S,d);const M=new Uint8Array(32);return function h(g,O){const w=n(),c=n();for(let p=0;p<16;p++)c[p]=O[p];s(c),s(c),s(c);for(let p=0;p<2;p++){w[0]=c[0]-65517;for(let H=1;H<15;H++)w[H]=c[H]-65535-(w[H-1]>>16&1),w[H-1]&=65535;w[15]=c[15]-32767-(w[14]>>16&1);const D=w[15]>>16&1;w[14]&=65535,a(c,w,1-D)}for(let p=0;p<16;p++)g[2*p]=255&c[p],g[2*p+1]=c[p]>>8}(M,S),M}function j(g){return L(g,i)}function B(g){if(g.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const O=new Uint8Array(g);return{publicKey:j(O),secretKey:O}}r.scalarMult=L,r.scalarMultBase=j,r.generateKeyPairFromSeed=B,r.generateKeyPair=function P(g){const O=(0,e.randomBytes)(32,g),w=B(O);return(0,t.wipe)(O),w},r.sharedKey=function A(g,O,w=!1){if(g.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(O.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=L(g,O);if(w){let p=0;for(let D=0;D<c.length;D++)p|=c[D];if(0===p)throw new Error("X25519: invalid shared key")}return c}}(di);var Ls=function(r,e,t){if(t||2===arguments.length)for(var o,n=0,i=e.length;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},hp=function r(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},fp=function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},pp=function r(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"},dp=function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},yp=function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},_p=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,vp=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Cs=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function mp(r){return r?js(r):typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product?new yp:typeof navigator<"u"?js(navigator.userAgent):function Ep(){return typeof process<"u"&&process.version?new fp(process.version.slice(1)):null}()}function js(r){var e=function bp(r){return""!==r&&vp.reduce(function(e,t){var n=t[0];if(e)return e;var o=t[1].exec(r);return!!o&&[n,o]},!1)}(r);if(!e)return null;var t=e[0],n=e[1];if("searchbot"===t)return new dp;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=Ls(Ls([],i,!0),function Sp(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}(3-i.length),!0)):i=[];var o=i.join("."),s=function wp(r){for(var e=0,t=Cs.length;e<t;e++){var n=Cs[e],i=n[0];if(n[1].exec(r))return i}return null}(r),a=_p.exec(r);return a&&a[1]?new pp(t,o,s,a[1]):new hp(t,o,s)}var Ne={};function ir(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}function mr(r){const e=ir(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.getLocalStorage=Ne.getLocalStorageOrThrow=Ne.getCrypto=Ne.getCryptoOrThrow=Ms=Ne.getLocation=Ne.getLocationOrThrow=yi=Ne.getNavigator=Ne.getNavigatorOrThrow=Us=Ne.getDocument=Ne.getDocumentOrThrow=Ne.getFromWindowOrThrow=Ne.getFromWindow=void 0,Ne.getFromWindow=ir,Ne.getFromWindowOrThrow=mr,Ne.getDocumentOrThrow=function Op(){return mr("document")};var Us=Ne.getDocument=function Ip(){return ir("document")};Ne.getNavigatorOrThrow=function Pp(){return mr("navigator")};var yi=Ne.getNavigator=function xp(){return ir("navigator")};Ne.getLocationOrThrow=function Fp(){return mr("location")};var Ms=Ne.getLocation=function Ap(){return ir("location")};Ne.getCryptoOrThrow=function Np(){return mr("crypto")},Ne.getCrypto=function Tp(){return ir("crypto")},Ne.getLocalStorageOrThrow=function Lp(){return mr("localStorage")},Ne.getLocalStorage=function Rp(){return ir("localStorage")};var gi={};Object.defineProperty(gi,"__esModule",{value:!0});var ks=gi.getWindowMetadata=void 0;const Ds=Ne;ks=gi.getWindowMetadata=function Cp(){let r,e;try{r=Ds.getDocumentOrThrow(),e=Ds.getLocationOrThrow()}catch{return null}function n(...f){const _=r.getElementsByTagName("meta");for(let v=0;v<_.length;v++){const b=_[v],m=["itemprop","property","name"].map(L=>b.getAttribute(L)).filter(L=>!!L&&f.includes(L));if(m.length&&m){const L=b.getAttribute("content");if(L)return L}}return""}const s=function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=r.title),f}();return{description:function o(){return n("description","og:description","twitter:description","keywords")}(),url:e.origin,icons:function t(){const f=r.getElementsByTagName("link"),_=[];for(let v=0;v<f.length;v++){const b=f[v],m=b.getAttribute("rel");if(m&&m.toLowerCase().indexOf("icon")>-1){const L=b.getAttribute("href");if(L)if(-1===L.toLowerCase().indexOf("https:")&&-1===L.toLowerCase().indexOf("http:")&&0!==L.indexOf("//")){let j=e.protocol+"//"+e.host;if(0===L.indexOf("/"))j+=L;else{const B=e.pathname.split("/");B.pop(),j+=B.join("/")+"/"+L}_.push(j)}else 0===L.indexOf("//")?_.push(e.protocol+L):_.push(L)}}return _}(),name:s}};var kr={},jp=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),zs="%[a-f0-9]{2}",Ks=new RegExp("("+zs+")|([^%]+?)","gi"),Hs=new RegExp("("+zs+")+","gi");function _i(r,e){try{return[decodeURIComponent(r.join(""))]}catch{}if(1===r.length)return r;var t=r.slice(0,e=e||1),n=r.slice(e);return Array.prototype.concat.call([],_i(t),_i(n))}function Up(r){try{return decodeURIComponent(r)}catch{for(var e=r.match(Ks)||[],t=1;t<e.length;t++)e=(r=_i(e,t).join("")).match(Ks)||[];return r}}var kp=function(r){if("string"!=typeof r)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return function Mp(r){for(var e={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},t=Hs.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var n=Up(t[0]);n!==t[0]&&(e[t[0]]=n)}t=Hs.exec(r)}e["%C2"]="\ufffd";for(var i=Object.keys(e),o=0;o<i.length;o++){var s=i[o];r=r.replace(new RegExp(s,"g"),e[s])}return r}(r)}},Dp=(r,e)=>{if("string"!=typeof r||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[r];const t=r.indexOf(e);return-1===t?[r]:[r.slice(0,t),r.slice(t+e.length)]},zp=function(r,e){for(var t={},n=Object.keys(r),i=Array.isArray(e),o=0;o<n.length;o++){var s=n[o],a=r[s];(i?-1!==e.indexOf(s):e(s,a,r))&&(t[s]=a)}return t};!function(r){const e=jp,t=kp,n=Dp,i=zp,s=Symbol("encodeFragmentIdentifier");function l(P){if("string"!=typeof P||1!==P.length)throw new TypeError("arrayFormatSeparator must be single character string")}function f(P,A){return A.encode?A.strict?e(P):encodeURIComponent(P):P}function _(P,A){return A.decode?t(P):P}function v(P){return Array.isArray(P)?P.sort():"object"==typeof P?v(Object.keys(P)).sort((A,g)=>Number(A)-Number(g)).map(A=>P[A]):P}function b(P){const A=P.indexOf("#");return-1!==A&&(P=P.slice(0,A)),P}function L(P){const A=(P=b(P)).indexOf("?");return-1===A?"":P.slice(A+1)}function j(P,A){return A.parseNumbers&&!Number.isNaN(Number(P))&&"string"==typeof P&&""!==P.trim()?P=Number(P):A.parseBooleans&&null!==P&&("true"===P.toLowerCase()||"false"===P.toLowerCase())&&(P="true"===P.toLowerCase()),P}function B(P,A){l((A=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},A)).arrayFormatSeparator);const g=function h(P){let A;switch(P.arrayFormat){case"index":return(g,O,w)=>{A=/\[(\d*)\]$/.exec(g),g=g.replace(/\[\d*\]$/,""),A?(void 0===w[g]&&(w[g]={}),w[g][A[1]]=O):w[g]=O};case"bracket":return(g,O,w)=>{A=/(\[\])$/.exec(g),w[g=g.replace(/\[\]$/,"")]=A?void 0!==w[g]?[].concat(w[g],O):[O]:O};case"colon-list-separator":return(g,O,w)=>{A=/(:list)$/.exec(g),w[g=g.replace(/:list$/,"")]=A?void 0!==w[g]?[].concat(w[g],O):[O]:O};case"comma":case"separator":return(g,O,w)=>{const c="string"==typeof O&&O.includes(P.arrayFormatSeparator),p="string"==typeof O&&!c&&_(O,P).includes(P.arrayFormatSeparator);O=p?_(O,P):O;const D=c||p?O.split(P.arrayFormatSeparator).map(H=>_(H,P)):null===O?O:_(O,P);w[g]=D};case"bracket-separator":return(g,O,w)=>{const c=/(\[\])$/.test(g);if(g=g.replace(/\[\]$/,""),!c)return void(w[g]=O&&_(O,P));const p=null===O?[]:O.split(P.arrayFormatSeparator).map(D=>_(D,P));w[g]=void 0!==w[g]?[].concat(w[g],p):p};default:return(g,O,w)=>{w[g]=void 0!==w[g]?[].concat(w[g],O):O}}}(A),O=Object.create(null);if("string"!=typeof P||!(P=P.trim().replace(/^[?#&]/,"")))return O;for(const w of P.split("&")){if(""===w)continue;let[c,p]=n(A.decode?w.replace(/\+/g," "):w,"=");p=void 0===p?null:["comma","separator","bracket-separator"].includes(A.arrayFormat)?p:_(p,A),g(_(c,A),p,O)}for(const w of Object.keys(O)){const c=O[w];if("object"==typeof c&&null!==c)for(const p of Object.keys(c))c[p]=j(c[p],A);else O[w]=j(c,A)}return!1===A.sort?O:(!0===A.sort?Object.keys(O).sort():Object.keys(O).sort(A.sort)).reduce((w,c)=>{const p=O[c];return w[c]=Boolean(p)&&"object"==typeof p&&!Array.isArray(p)?v(p):p,w},Object.create(null))}r.extract=L,r.parse=B,r.stringify=(P,A)=>{if(!P)return"";l((A=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},A)).arrayFormatSeparator);const g=p=>A.skipNull&&(P=>null==P)(P[p])||A.skipEmptyString&&""===P[p],O=function a(P){switch(P.arrayFormat){case"index":return A=>(g,O)=>{const w=g.length;return void 0===O||P.skipNull&&null===O||P.skipEmptyString&&""===O?g:null===O?[...g,[f(A,P),"[",w,"]"].join("")]:[...g,[f(A,P),"[",f(w,P),"]=",f(O,P)].join("")]};case"bracket":return A=>(g,O)=>void 0===O||P.skipNull&&null===O||P.skipEmptyString&&""===O?g:null===O?[...g,[f(A,P),"[]"].join("")]:[...g,[f(A,P),"[]=",f(O,P)].join("")];case"colon-list-separator":return A=>(g,O)=>void 0===O||P.skipNull&&null===O||P.skipEmptyString&&""===O?g:null===O?[...g,[f(A,P),":list="].join("")]:[...g,[f(A,P),":list=",f(O,P)].join("")];case"comma":case"separator":case"bracket-separator":{const A="bracket-separator"===P.arrayFormat?"[]=":"=";return g=>(O,w)=>void 0===w||P.skipNull&&null===w||P.skipEmptyString&&""===w?O:(w=null===w?"":w,0===O.length?[[f(g,P),A,f(w,P)].join("")]:[[O,f(w,P)].join(P.arrayFormatSeparator)])}default:return A=>(g,O)=>void 0===O||P.skipNull&&null===O||P.skipEmptyString&&""===O?g:null===O?[...g,f(A,P)]:[...g,[f(A,P),"=",f(O,P)].join("")]}}(A),w={};for(const p of Object.keys(P))g(p)||(w[p]=P[p]);const c=Object.keys(w);return!1!==A.sort&&c.sort(A.sort),c.map(p=>{const D=P[p];return void 0===D?"":null===D?f(p,A):Array.isArray(D)?0===D.length&&"bracket-separator"===A.arrayFormat?f(p,A)+"[]":D.reduce(O(p),[]).join("&"):f(p,A)+"="+f(D,A)}).filter(p=>p.length>0).join("&")},r.parseUrl=(P,A)=>{A=Object.assign({decode:!0},A);const[g,O]=n(P,"#");return Object.assign({url:g.split("?")[0]||"",query:B(L(P),A)},A&&A.parseFragmentIdentifier&&O?{fragmentIdentifier:_(O,A)}:{})},r.stringifyUrl=(P,A)=>{A=Object.assign({encode:!0,strict:!0,[s]:!0},A);const g=b(P.url).split("?")[0]||"",O=r.extract(P.url),w=r.parse(O,{sort:!1}),c=Object.assign(w,P.query);let p=r.stringify(c,A);p&&(p=`?${p}`);let D=function m(P){let A="";const g=P.indexOf("#");return-1!==g&&(A=P.slice(g)),A}(P.url);return P.fragmentIdentifier&&(D=`#${A[s]?f(P.fragmentIdentifier,A):P.fragmentIdentifier}`),`${g}${p}${D}`},r.pick=(P,A,g)=>{g=Object.assign({parseFragmentIdentifier:!0,[s]:!1},g);const{url:O,query:w,fragmentIdentifier:c}=r.parseUrl(P,g);return r.stringifyUrl({url:O,query:i(w,A),fragmentIdentifier:c},g)},r.exclude=(P,A,g)=>{const O=Array.isArray(A)?w=>!A.includes(w):(w,c)=>!A(w,c);return r.pick(P,O,g)}}(kr);const Kp={waku:{publish:"waku_publish",subscribe:"waku_subscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe"},irn:{publish:"irn_publish",subscribe:"irn_subscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe"},iridium:{publish:"iridium_publish",subscribe:"iridium_subscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe"}};function vi(r,e){return r.includes(":")?[r]:e.chains||[]}const mt="base16",mi="base64pad",bi="utf8";function Si(){return _t(vr.randomBytes(32),mt)}function _n(r){return _t(gn.hash(vt(r,bi)),mt)}function Dr(r){return Number(_t(r,"base10"))}function Gp(r){const e=function qp(r){return vt(`${r}`,"base10")}(typeof r.type<"u"?r.type:0);if(1===Dr(e)&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?vt(r.senderPublicKey,mt):void 0,n=typeof r.iv<"u"?vt(r.iv,mt):vr.randomBytes(12);return function Yp(r){if(1===Dr(r.type)){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return _t(si([r.type,r.senderPublicKey,r.iv,r.sealed]),mi)}return _t(si([r.type,r.iv,r.sealed]),mi)}({type:e,sealed:new hi.ChaCha20Poly1305(vt(r.symKey,mt)).seal(n,vt(r.message,bi)),iv:n,senderPublicKey:t})}function Oi(r){const e=vt(r,mi),t=e.slice(0,1);if(1===Dr(t)){const a=33,h=a+12,l=e.slice(1,a),f=e.slice(a,h);return{type:t,sealed:e.slice(h),iv:f,senderPublicKey:l}}const o=e.slice(1,13);return{type:t,sealed:e.slice(13),iv:o}}function qs(r){const e=r?.type||0;if(1===e){if(typeof r?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function Gs(r){return 1===r.type&&"string"==typeof r.senderPublicKey&&"string"==typeof r.receiverPublicKey}var Xp=Object.defineProperty,Ws=Object.getOwnPropertySymbols,Zp=Object.prototype.hasOwnProperty,Qp=Object.prototype.propertyIsEnumerable,Ys=(r,e,t)=>e in r?Xp(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Js=(r,e)=>{for(var t in e||(e={}))Zp.call(e,t)&&Ys(r,t,e[t]);if(Ws)for(var t of Ws(e))Qp.call(e,t)&&Ys(r,t,e[t]);return r};const zr_reactNative="react-native",zr_node="node",zr_browser="browser",zr_unknown="unknown",td="js";function Xs(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function id(){return function rd(){return!Us()&&!!yi()&&"ReactNative"===navigator.product}()?zr_reactNative:Xs()?zr_node:function nd(){return!Xs()&&!!yi()}()?zr_browser:zr_unknown}function ud(r,e,t){const n=function ad(){const r=mp();if(null===r)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return"browser"===r.type?[e,r.name,r.version].join("-"):[e,r.version].join("-")}(),i=function cd(){var r;const e=id();return e===zr_browser?[e,(null==(r=Ms())?void 0:r.host)||"unknown"].join(":"):e}();return[[r,e].join("-"),[td,t].join("-"),n,i].join("/")}function ld({protocol:r,version:e,relayUrl:t,sdkVersion:n,auth:i,projectId:o}){const s=t.split("?"),a=ud(r,e,n),l=function od(r,e){let t=kr.parse(r);return t=Js(Js({},t),e),kr.stringify(t)}(s[1]||"",{auth:i,ua:a,projectId:o});return s[0]+"?"+l}function qt(r,e){return r.filter(t=>e.includes(t)).length===r.length}function Zs(r){return Object.fromEntries(r.entries())}function Qs(r){return new Map(Object.entries(r))}function sr(r){const e=Q.toMiliseconds(r||Q.FIVE_MINUTES);let t,n,i;return{resolve:o=>{i&&t&&(clearTimeout(i),t(o))},reject:o=>{i&&n&&(clearTimeout(i),n(o))},done:()=>new Promise((o,s)=>{i=setTimeout(s,e),t=o,n=s})}}function ea(r,e){return new Promise(function(){var t=I(function*(n,i){const o=setTimeout(()=>i(),e),s=yield r;clearTimeout(o),n(s)});return function(n,i){return t.apply(this,arguments)}}())}function ta(r,e){if("string"==typeof e&&e.startsWith(`${r}:`))return e;if("topic"===r.toLowerCase()){if("string"!=typeof e)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}if("id"===r.toLowerCase()){if("number"!=typeof e)throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function ra(r){const[e,t]=r.split(":"),n={id:void 0,topic:void 0};if("topic"===e&&"string"==typeof t)n.topic=t;else{if("id"!==e||!Number.isInteger(Number(t)))throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);n.id=Number(t)}return n}function Ct(r,e){return Q.fromMiliseconds((e||Date.now())+Q.toMiliseconds(r))}function Gt(r){return Date.now()>=Q.toMiliseconds(r)}function De(r,e){return`${r}${e?`:${e}`:""}`}function Ii(r){return r?.relay||{protocol:"irn"}}function Pi(r){const e=Kp[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var dd=Object.defineProperty,na=Object.getOwnPropertySymbols,yd=Object.prototype.hasOwnProperty,gd=Object.prototype.propertyIsEnumerable,ia=(r,e,t)=>e in r?dd(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;function vd(r,e="-"){const t={},n="relay"+e;return Object.keys(r).forEach(i=>{if(i.startsWith(n)){const o=i.replace(n,"");t[o]=r[i]}}),t}function wd(r){return`${r.protocol}:${r.topic}@${r.version}?`+kr.stringify(((r,e)=>{for(var t in e||(e={}))yd.call(e,t)&&ia(r,t,e[t]);if(na)for(var t of na(e))gd.call(e,t)&&ia(r,t,e[t]);return r})({symKey:r.symKey},function bd(r,e="-"){const n={};return Object.keys(r).forEach(i=>{r[i]&&(n["relay"+e+i]=r[i])}),n}(r.relay)))}function Kr(r){const e=[];return r.forEach(t=>{const[n,i]=t.split(":");e.push(`${n}:${i}`)}),e}const Pd={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},xd={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function q(r,e){const{message:t,code:n}=xd[r];return{message:e?`${t} ${e}`:t,code:n}}function Ge(r,e){const{message:t,code:n}=Pd[r];return{message:e?`${t} ${e}`:t,code:n}}function Hr(r,e){return!!Array.isArray(r)&&(!(typeof e<"u"&&r.length)||r.every(e))}function Br(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function ft(r){return typeof r>"u"}function Ye(r,e){return!(!e||!ft(r))||"string"==typeof r&&Boolean(r.trim().length)}function xi(r,e){return!(!e||!ft(r))||"number"==typeof r&&!isNaN(r)}function Fi(r){return!(!Ye(r,!1)||!r.includes(":"))&&2===r.split(":").length}function oa(r){let e=!0;return Hr(r)?r.length&&(e=r.every(t=>Ye(t,!1))):e=!1,e}function jd(r,e){let t=null;return Object.entries(r).forEach(([n,i])=>{if(t)return;const o=function Cd(r,e,t){let n=null;return Hr(e)?e.forEach(i=>{n||(!Fi(i)||!i.includes(r))&&(n=Ge("UNSUPPORTED_CHAINS",`${t}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):n=Ge("UNSUPPORTED_CHAINS",`${t}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),n}(n,vi(n,i),`${e} requiredNamespace`);o&&(t=o)}),t}function Ud(r,e){let t=null;return Hr(r)?r.forEach(n=>{t||function Ad(r){if(Ye(r,!1)&&r.includes(":")){const e=r.split(":");if(3===e.length){const t=e[0]+":"+e[1];return!!e[2]&&Fi(t)}}return!1}(n)||(t=Ge("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):t=Ge("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function sa(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;const i=function kd(r,e){let t=null;return oa(r?.methods)?oa(r?.events)||(t=Ge("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Ge("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}(n,`${e}, namespace`);i&&(t=i)}),t}function vn(r,e){let t=null;if(r&&Br(r)){const n=sa(r,e);n&&(t=n);const i=function Md(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;const i=Ud(n?.accounts,`${e} namespace`);i&&(t=i)}),t}(r,e);i&&(t=i)}else t=q("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function aa(r){return Ye(r.protocol,!0)}function bt(r){return typeof r<"u"&&null!==typeof r}function ca(r,e){return!(!Fi(e)||!function Ed(r){const e=[];return Object.values(r).forEach(t=>{e.push(...Kr(t.accounts))}),e}(r).includes(e))}function qd(r,e,t){return!!Ye(t,!1)&&function Sd(r,e){const t=[];return Object.values(r).forEach(n=>{Kr(n.accounts).includes(e)&&t.push(...n.methods)}),t}(r,e).includes(t)}function Gd(r,e,t){return!!Ye(t,!1)&&function Od(r,e){const t=[];return Object.values(r).forEach(n=>{Kr(n.accounts).includes(e)&&t.push(...n.events)}),t}(r,e).includes(t)}function Ai(r,e,t,n){let i=null;const o=Object.keys(r);return qt(o,Object.keys(e))?o.forEach(a=>{if(i)return;const h=Kr(e[a].accounts);qt(vi(a,r[a]),h)?qt(r[a].methods,e[a].methods)?qt(r[a].events,e[a].events)||(i=q("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${a}`)):i=q("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${a}`):i=q("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace chains for ${a}`)}):i=q("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy ${n}`),i}const ua="INTERNAL_ERROR",Ni="SERVER_ERROR",Qd=[-32700,-32600,-32601,-32602,-32603],Vr={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[ua]:{code:-32603,message:"Internal error"},[Ni]:{code:-32e3,message:"Server error"}},la=Ni;function ha(r){return Object.keys(Vr).includes(r)?Vr[r]:Vr[la]}function fa(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var pa={},Ti=function(r,e){return(Ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Li=function(){return Li=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Li.apply(this,arguments)};function Ri(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function da(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function $r(r){return this instanceof $r?(this.v=r,this):new $r(r)}var ya,Ey=kt(Object.freeze({__proto__:null,__extends:function ry(r,e){function t(){this.constructor=r}Ti(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Li},__rest:function ny(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function iy(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function oy(r,e){return function(t,n){e(t,n,r)}},__metadata:function sy(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function ay(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function cy(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function uy(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function ly(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:Ri,__read:da,__spread:function hy(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(da(arguments[e]));return r},__spreadArrays:function fy(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:$r,__asyncGenerator:function py(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(b){return new Promise(function(m,L){o.push([v,b,m,L])>1||a(v,b)})})}function a(v,b){try{!function h(v){v.value instanceof $r?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](b))}catch(m){_(o[0][3],m)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,b){v(b),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function dy(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:$r(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function yy(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=Ri(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function gy(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function _y(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function vy(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function my(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function by(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),Dt={};var ga,zt={};function mn(r,e,t){return{id:t||Date.now()*Math.pow(10,3)+Math.floor(Math.random()*Math.pow(10,3)),jsonrpc:"2.0",method:r,params:e}}function Ci(r,e){return{id:r,jsonrpc:"2.0",result:e}}function bn(r,e,t){return{id:r,jsonrpc:"2.0",error:Py(e,t)}}function Py(r,e){return typeof r>"u"?ha(ua):("string"==typeof r&&(r=Object.assign(Object.assign({},ha(Ni)),{message:r})),typeof e<"u"&&(r.data=e),function ey(r){return Qd.includes(r)}(r.code)&&(r=function ty(r){return Object.values(Vr).find(t=>t.code===r)||Vr[la]}(r.code)),r)}!function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Ey;e.__exportStar(function Sy(){if(ya)return Dt;function r(){return dt?.crypto||dt?.msCrypto||{}}function e(){const n=r();return n.subtle||n.webkitSubtle}return ya=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.isBrowserCryptoAvailable=Dt.getSubtleCrypto=Dt.getBrowerCrypto=void 0,Dt.getBrowerCrypto=r,Dt.getSubtleCrypto=e,Dt.isBrowserCryptoAvailable=function t(){return!!r()&&!!e()},Dt}(),r),e.__exportStar(function Oy(){if(ga)return zt;function r(){return typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product}function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}return ga=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.isBrowser=zt.isNode=zt.isReactNative=void 0,zt.isReactNative=r,zt.isNode=e,zt.isBrowser=function t(){return!r()&&!e()},zt}(),r)}(pa);function _a(r,e){const t=function Ly(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(e&&e.length)return e[0]}(r);return!(typeof t>"u")&&new RegExp(e).test(t)}function va(r){return _a(r,"^https?:")}function ma(r){return _a(r,"^wss?:")}function Ry(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function ba(r){return"object"==typeof r&&"id"in r&&"jsonrpc"in r&&"2.0"===r.jsonrpc}function ji(r){return ba(r)&&"method"in r}function Ui(r){return ba(r)&&(Kt(r)||At(r))}function Kt(r){return"result"in r}function At(r){return"error"in r}class qr extends class Ay extends class Fy extends class xy{}{constructor(){super()}}{constructor(e){super()}}{constructor(e){super(e),this.events=new ct.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(e=this.connection){var t=this;return I(function*(){yield t.open(e)})()}disconnect(){var e=this;return I(function*(){yield e.close()})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,t){var n=this;return I(function*(){return n.requestStrict(mn(e.method,e.params||[]),t)})()}requestStrict(e,t){var n=this;return I(function*(){return new Promise(function(){var i=I(function*(o,s){if(!n.connection.connected)try{yield n.open()}catch(a){s(a)}n.events.on(`${e.id}`,a=>{At(a)?s(a.error):o(a.result)});try{yield n.connection.send(e,t)}catch(a){s(a)}});return function(o,s){return i.apply(this,arguments)}}())})()}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Ui(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}open(e=this.connection){var t=this;return I(function*(){t.connection===e&&t.connection.connected||(t.connection.connected&&t.close(),"string"==typeof e&&(yield t.connection.open(e),e=t.connection),t.connection=t.setConnection(e),yield t.connection.open(),t.registerEventListeners(),t.events.emit("connect"))})()}close(){var e=this;return I(function*(){yield e.connection.close()})()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",()=>this.events.emit("disconnect")),this.connection.on("error",e=>this.events.emit("error",e)),this.hasRegisteredEventListeners=!0)}}const Uy=typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:er(4813);class My{constructor(e){if(this.url=e,this.events=new ct.exports.EventEmitter,this.registering=!1,!ma(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(e=this.url){var t=this;return I(function*(){yield t.register(e)})()}close(){var e=this;return I(function*(){return new Promise((t,n)=>{typeof e.socket>"u"?n(new Error("Connection already closed")):(e.socket.onclose=()=>{e.onClose(),t()},e.socket.close())})})()}send(e,t){var n=this;return I(function*(){typeof n.socket>"u"&&(n.socket=yield n.register());try{n.socket.send(jr(e))}catch(i){n.onError(e.id,i)}})()}register(e=this.url){if(!ma(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,i)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),i(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,n)=>{const i=pa.isReactNative()?void 0:{rejectUnauthorized:!Ry(e)},o=new Uy(e,[],i);typeof window<"u"?o.onerror=s=>{n(this.emitError(s.error))}:o.on("error",s=>{n(this.emitError(s))}),o.onopen=()=>{this.onOpen(o),t(o)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=()=>this.onClose(),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(){this.socket=void 0,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?ei(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),o=bn(e,n.message||n.toString());this.events.emit("payload",o)}parseError(e,t=this.url){return fa(e,t,"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",t),t}}var Mi={exports:{}};!function(r,e){var n="__lodash_hash_undefined__",s=9007199254740991,a="[object Arguments]",h="[object Array]",f="[object Boolean]",_="[object Date]",v="[object Error]",b="[object Function]",L="[object Map]",j="[object Number]",P="[object Object]",A="[object Promise]",O="[object RegExp]",w="[object Set]",c="[object String]",p="[object Symbol]",H="[object WeakMap]",G="[object ArrayBuffer]",X="[object DataView]",V=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,J={};J["[object Float32Array]"]=J["[object Float64Array]"]=J["[object Int8Array]"]=J["[object Int16Array]"]=J["[object Int32Array]"]=J["[object Uint8Array]"]=J["[object Uint8ClampedArray]"]=J["[object Uint16Array]"]=J["[object Uint32Array]"]=!0,J[a]=J[h]=J[G]=J[f]=J[X]=J[_]=J[v]=J[b]=J[L]=J[j]=J[P]=J[O]=J[w]=J[c]=J[H]=!1;var ce="object"==typeof dt&&dt&&dt.Object===Object&&dt,T="object"==typeof self&&self&&self.Object===Object&&self,N=ce||T||Function("return this")(),x=e&&!e.nodeType&&e,u=x&&r&&!r.nodeType&&r,E=u&&u.exports===x,$=E&&ce.process,W=function(){try{return $&&$.binding&&$.binding("util")}catch{}}(),pe=W&&W.isTypedArray;function Se(y,F){for(var U=-1,Y=null==y?0:y.length;++U<Y;)if(F(y[U],U,y))return!0;return!1}function me(y,F){return y.has(F)}function de(y){var F=-1,U=Array(y.size);return y.forEach(function(Y,Te){U[++F]=[Te,Y]}),U}function ue(y){var F=-1,U=Array(y.size);return y.forEach(function(Y){U[++F]=Y}),U}var y,ae=Array.prototype,re=Object.prototype,he=N["__core-js_shared__"],ve=Function.prototype.toString,ie=re.hasOwnProperty,we=(y=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||""))?"Symbol(src)_1."+y:"",Ee=re.toString,Ie=RegExp("^"+ve.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pe=E?N.Buffer:void 0,Oe=N.Symbol,Nt=N.Uint8Array,Mt=re.propertyIsEnumerable,Jt=ae.splice,Et=Oe?Oe.toStringTag:void 0,ar=Object.getOwnPropertySymbols,Jr=Pe?Pe.isBuffer:void 0,An=function le(y,F){return function(U){return y(F(U))}}(Object.keys,Object),He=br(N,"DataView"),je=br(N,"Map"),Be=br(N,"Promise"),Ve=br(N,"Set"),$e=br(N,"WeakMap"),Ue=br(Object,"create"),Je=ur(He),Xe=ur(je),Ze=ur(Be),Qe=ur(Ve),et=ur($e),We=Oe?Oe.prototype:void 0,qe=We?We.valueOf:void 0;function Le(y){var F=-1,U=null==y?0:y.length;for(this.clear();++F<U;){var Y=y[F];this.set(Y[0],Y[1])}}function Ht(y){var F=-1,U=null==y?0:y.length;for(this.clear();++F<U;){var Y=y[F];this.set(Y[0],Y[1])}}function cr(y){var F=-1,U=null==y?0:y.length;for(this.clear();++F<U;){var Y=y[F];this.set(Y[0],Y[1])}}function Nn(y){var F=-1,U=null==y?0:y.length;for(this.__data__=new cr;++F<U;)this.add(y[F])}function Xt(y){var F=this.__data__=new Ht(y);this.size=F.size}function n0(y,F){var U=Rn(y),Y=!U&&v0(y),Te=!U&&!Y&&Ji(y),se=!U&&!Y&&!Te&&wc(y),Me=U||Y||Te||se,nt=Me?function ze(y,F){for(var U=-1,Y=Array(y);++U<y;)Y[U]=F(U);return Y}(y.length,String):[],st=nt.length;for(var Re in y)(F||ie.call(y,Re))&&(!Me||!("length"==Re||Te&&("offset"==Re||"parent"==Re)||se&&("buffer"==Re||"byteLength"==Re||"byteOffset"==Re)||p0(Re,st)))&&nt.push(Re);return nt}function Tn(y,F){for(var U=y.length;U--;)if(_c(y[U][0],F))return U;return-1}function Xr(y){return null==y?void 0===y?"[object Undefined]":"[object Null]":Et&&Et in Object(y)?function h0(y){var F=ie.call(y,Et),U=y[Et];try{y[Et]=void 0;var Y=!0}catch{}var Te=Ee.call(y);return Y&&(F?y[Et]=U:delete y[Et]),Te}(y):function _0(y){return Ee.call(y)}(y)}function pc(y){return Zr(y)&&Xr(y)==a}function dc(y,F,U,Y,Te){return y===F||(null==y||null==F||!Zr(y)&&!Zr(F)?y!=y&&F!=F:function o0(y,F,U,Y,Te,se){var Me=Rn(y),nt=Rn(F),st=Me?h:Zt(y),Re=nt?h:Zt(F),St=(st=st==a?P:st)==P,Tt=(Re=Re==a?P:Re)==P,lt=st==Re;if(lt&&Ji(y)){if(!Ji(F))return!1;Me=!0,St=!1}if(lt&&!St)return se||(se=new Xt),Me||wc(y)?yc(y,F,U,Y,Te,se):function u0(y,F,U,Y,Te,se,Me){switch(U){case X:if(y.byteLength!=F.byteLength||y.byteOffset!=F.byteOffset)return!1;y=y.buffer,F=F.buffer;case G:return!(y.byteLength!=F.byteLength||!se(new Nt(y),new Nt(F)));case f:case _:case j:return _c(+y,+F);case v:return y.name==F.name&&y.message==F.message;case O:case c:return y==F+"";case L:var nt=de;case w:if(nt||(nt=ue),y.size!=F.size&&!(1&Y))return!1;var Re=Me.get(y);if(Re)return Re==F;Y|=2,Me.set(y,F);var St=yc(nt(y),nt(F),Y,Te,se,Me);return Me.delete(y),St;case p:if(qe)return qe.call(y)==qe.call(F)}return!1}(y,F,st,U,Y,Te,se);if(!(1&U)){var xt=St&&ie.call(y,"__wrapped__"),Ft=Tt&&ie.call(F,"__wrapped__");if(xt||Ft){var Qt=xt?y.value():y,Bt=Ft?F.value():F;return se||(se=new Xt),Te(Qt,Bt,U,Y,se)}}return!!lt&&(se||(se=new Xt),function l0(y,F,U,Y,Te,se){var Me=1&U,nt=gc(y),st=nt.length;if(st!=gc(F).length&&!Me)return!1;for(var Tt=st;Tt--;){var lt=nt[Tt];if(!(Me?lt in F:ie.call(F,lt)))return!1}var xt=se.get(y);if(xt&&se.get(F))return xt==F;var Ft=!0;se.set(y,F),se.set(F,y);for(var Qt=Me;++Tt<st;){var Bt=y[lt=nt[Tt]],lr=F[lt];if(Y)var Ec=Me?Y(lr,Bt,lt,F,y,se):Y(Bt,lr,lt,y,F,se);if(!(void 0===Ec?Bt===lr||Te(Bt,lr,U,Y,se):Ec)){Ft=!1;break}Qt||(Qt="constructor"==lt)}if(Ft&&!Qt){var Cn=y.constructor,jn=F.constructor;Cn!=jn&&"constructor"in y&&"constructor"in F&&!("function"==typeof Cn&&Cn instanceof Cn&&"function"==typeof jn&&jn instanceof jn)&&(Ft=!1)}return se.delete(y),se.delete(F),Ft}(y,F,U,Y,Te,se))}(y,F,U,Y,dc,Te))}function s0(y){return!(!bc(y)||function y0(y){return!!we&&we in y}(y))&&(vc(y)?Ie:V).test(ur(y))}function c0(y){if(!function g0(y){var F=y&&y.constructor;return y===("function"==typeof F&&F.prototype||re)}(y))return An(y);var F=[];for(var U in Object(y))ie.call(y,U)&&"constructor"!=U&&F.push(U);return F}function yc(y,F,U,Y,Te,se){var Me=1&U,nt=y.length,st=F.length;if(nt!=st&&!(Me&&st>nt))return!1;var Re=se.get(y);if(Re&&se.get(F))return Re==F;var St=-1,Tt=!0,lt=2&U?new Nn:void 0;for(se.set(y,F),se.set(F,y);++St<nt;){var xt=y[St],Ft=F[St];if(Y)var Qt=Me?Y(Ft,xt,St,F,y,se):Y(xt,Ft,St,y,F,se);if(void 0!==Qt){if(Qt)continue;Tt=!1;break}if(lt){if(!Se(F,function(Bt,lr){if(!me(lt,lr)&&(xt===Bt||Te(xt,Bt,U,Y,se)))return lt.push(lr)})){Tt=!1;break}}else if(xt!==Ft&&!Te(xt,Ft,U,Y,se)){Tt=!1;break}}return se.delete(y),se.delete(F),Tt}function gc(y){return function i0(y,F,U){var Y=F(y);return Rn(y)?Y:function ge(y,F){for(var U=-1,Y=F.length,Te=y.length;++U<Y;)y[Te+U]=F[U];return y}(Y,U(y))}(y,w0,f0)}function Ln(y,F){var U=y.__data__;return function d0(y){var F=typeof y;return"string"==F||"number"==F||"symbol"==F||"boolean"==F?"__proto__"!==y:null===y}(F)?U["string"==typeof F?"string":"hash"]:U.map}function br(y,F){var U=function _e(y,F){return y?.[F]}(y,F);return s0(U)?U:void 0}Le.prototype.clear=function tt(){this.__data__=Ue?Ue(null):{},this.size=0},Le.prototype.delete=function rt(y){var F=this.has(y)&&delete this.__data__[y];return this.size-=F?1:0,F},Le.prototype.get=function M_(y){var F=this.__data__;if(Ue){var U=F[y];return U===n?void 0:U}return ie.call(F,y)?F[y]:void 0},Le.prototype.has=function k_(y){var F=this.__data__;return Ue?void 0!==F[y]:ie.call(F,y)},Le.prototype.set=function D_(y,F){var U=this.__data__;return this.size+=this.has(y)?0:1,U[y]=Ue&&void 0===F?n:F,this},Ht.prototype.clear=function z_(){this.__data__=[],this.size=0},Ht.prototype.delete=function K_(y){var F=this.__data__,U=Tn(F,y);return!(U<0||(U==F.length-1?F.pop():Jt.call(F,U,1),--this.size,0))},Ht.prototype.get=function H_(y){var F=this.__data__,U=Tn(F,y);return U<0?void 0:F[U][1]},Ht.prototype.has=function B_(y){return Tn(this.__data__,y)>-1},Ht.prototype.set=function V_(y,F){var U=this.__data__,Y=Tn(U,y);return Y<0?(++this.size,U.push([y,F])):U[Y][1]=F,this},cr.prototype.clear=function $_(){this.size=0,this.__data__={hash:new Le,map:new(je||Ht),string:new Le}},cr.prototype.delete=function q_(y){var F=Ln(this,y).delete(y);return this.size-=F?1:0,F},cr.prototype.get=function G_(y){return Ln(this,y).get(y)},cr.prototype.has=function W_(y){return Ln(this,y).has(y)},cr.prototype.set=function Y_(y,F){var U=Ln(this,y),Y=U.size;return U.set(y,F),this.size+=U.size==Y?0:1,this},Nn.prototype.add=Nn.prototype.push=function J_(y){return this.__data__.set(y,n),this},Nn.prototype.has=function X_(y){return this.__data__.has(y)},Xt.prototype.clear=function Z_(){this.__data__=new Ht,this.size=0},Xt.prototype.delete=function Q_(y){var F=this.__data__,U=F.delete(y);return this.size=F.size,U},Xt.prototype.get=function e0(y){return this.__data__.get(y)},Xt.prototype.has=function t0(y){return this.__data__.has(y)},Xt.prototype.set=function r0(y,F){var U=this.__data__;if(U instanceof Ht){var Y=U.__data__;if(!je||Y.length<199)return Y.push([y,F]),this.size=++U.size,this;U=this.__data__=new cr(Y)}return U.set(y,F),this.size=U.size,this};var f0=ar?function(y){return null==y?[]:(y=Object(y),function be(y,F){for(var U=-1,Y=null==y?0:y.length,Te=0,se=[];++U<Y;){var Me=y[U];F(Me,U,y)&&(se[Te++]=Me)}return se}(ar(y),function(F){return Mt.call(y,F)}))}:function E0(){return[]},Zt=Xr;function p0(y,F){return!!(F=F??s)&&("number"==typeof y||te.test(y))&&y>-1&&y%1==0&&y<F}function ur(y){if(null!=y){try{return ve.call(y)}catch{}try{return y+""}catch{}}return""}function _c(y,F){return y===F||y!=y&&F!=F}(He&&Zt(new He(new ArrayBuffer(1)))!=X||je&&Zt(new je)!=L||Be&&Zt(Be.resolve())!=A||Ve&&Zt(new Ve)!=w||$e&&Zt(new $e)!=H)&&(Zt=function(y){var F=Xr(y),U=F==P?y.constructor:void 0,Y=U?ur(U):"";if(Y)switch(Y){case Je:return X;case Xe:return L;case Ze:return A;case Qe:return w;case et:return H}return F});var v0=pc(function(){return arguments}())?pc:function(y){return Zr(y)&&ie.call(y,"callee")&&!Mt.call(y,"callee")},Rn=Array.isArray;var Ji=Jr||function S0(){return!1};function vc(y){if(!bc(y))return!1;var F=Xr(y);return F==b||"[object GeneratorFunction]"==F||"[object AsyncFunction]"==F||"[object Proxy]"==F}function mc(y){return"number"==typeof y&&y>-1&&y%1==0&&y<=s}function bc(y){var F=typeof y;return null!=y&&("object"==F||"function"==F)}function Zr(y){return null!=y&&"object"==typeof y}var wc=pe?function Ce(y){return function(F){return y(F)}}(pe):function a0(y){return Zr(y)&&mc(y.length)&&!!J[Xr(y)]};function w0(y){return function m0(y){return null!=y&&mc(y.length)&&!vc(y)}(y)?n0(y):c0(y)}r.exports=function b0(y,F){return dc(y,F)}}(Mi,Mi.exports);var ky=Mi.exports,Dy=Object.defineProperty,Ea=Object.getOwnPropertySymbols,zy=Object.prototype.hasOwnProperty,Ky=Object.prototype.propertyIsEnumerable,Sa=(r,e,t)=>e in r?Dy(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pt=(r,e)=>{for(var t in e||(e={}))zy.call(e,t)&&Sa(r,t,e[t]);if(Ea)for(var t of Ea(e))Ky.call(e,t)&&Sa(r,t,e[t]);return r};var Vy=function Hy(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(255!==t[s])throw new TypeError(o+" is ambiguous");t[s]=i}var a=r.length,h=r.charAt(0),l=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function v(m){if("string"!=typeof m)throw new TypeError("Expected String");if(0===m.length)return new Uint8Array;var L=0;if(" "!==m[L]){for(var j=0,B=0;m[L]===h;)j++,L++;for(var P=(m.length-L)*l+1>>>0,A=new Uint8Array(P);m[L];){var g=t[m.charCodeAt(L)];if(255===g)return;for(var O=0,w=P-1;(0!==g||O<B)&&-1!==w;w--,O++)A[w]=(g+=a*A[w]>>>0)%256>>>0,g=g/256>>>0;if(0!==g)throw new Error("Non-zero carry");B=O,L++}if(" "!==m[L]){for(var c=P-B;c!==P&&0===A[c];)c++;for(var p=new Uint8Array(j+(P-c)),D=j;c!==P;)p[D++]=A[c++];return p}}}return{encode:function _(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===m.length)return"";for(var L=0,j=0,B=0,P=m.length;B!==P&&0===m[B];)B++,L++;for(var A=(P-B)*f+1>>>0,g=new Uint8Array(A);B!==P;){for(var O=m[B],w=0,c=A-1;(0!==O||w<j)&&-1!==c;c--,w++)g[c]=(O+=256*g[c]>>>0)%a>>>0,O=O/a>>>0;if(0!==O)throw new Error("Non-zero carry");j=w,B++}for(var p=A-j;p!==A&&0===g[p];)p++;for(var D=h.repeat(L);p<A;++p)D+=r.charAt(g[p]);return D},decodeUnsafe:v,decode:function b(m){var L=v(m);if(L)return L;throw new Error(`Non-${e} character`)}}};const Oa=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};class Gy{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Wy{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Ia(this,e)}}class Yy{constructor(e){this.decoders=e}or(e){return Ia(this,e)}decode(e){const n=this.decoders[e[0]];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ia=(r,e)=>new Yy(pt(pt({},r.decoders||{[r.prefix]:r}),e.decoders||{[e.prefix]:e}));class Jy{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Gy(e,t,n),this.decoder=new Wy(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const wn=({name:r,prefix:e,encode:t,decode:n})=>new Jy(r,e,t,n),Gr=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=Vy(t,e);return wn({prefix:r,name:e,encode:n,decode:o=>Oa(i(o))})},ot=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>wn({prefix:e,name:r,encode:i=>((r,e,t)=>{const n="="===e[e.length-1],i=(1<<t)-1;let o="",s=0,a=0;for(let h=0;h<r.length;++h)for(a=a<<8|r[h],s+=8;s>t;)s-=t,o+=e[i&a>>s];if(s&&(o+=e[i&a<<t-s]),n)for(;o.length*t&7;)o+="=";return o})(i,n,t),decode:i=>((r,e,t,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=r.length;for(;"="===r[o-1];)--o;const s=new Uint8Array(o*t/8|0);let a=0,h=0,l=0;for(let f=0;f<o;++f){const _=i[r[f]];if(void 0===_)throw new SyntaxError(`Non-${n} character`);h=h<<t|_,a+=t,a>=8&&(a-=8,s[l++]=255&h>>a)}if(a>=t||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return s})(i,n,t,r)}),Qy=wn({prefix:"\0",name:"identity",encode:r=>(r=>(new TextDecoder).decode(r))(r),decode:r=>(r=>(new TextEncoder).encode(r))(r)});var eg=Object.freeze({__proto__:null,identity:Qy});const tg=ot({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var rg=Object.freeze({__proto__:null,base2:tg});const ng=ot({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ig=Object.freeze({__proto__:null,base8:ng});const og=Gr({prefix:"9",name:"base10",alphabet:"0123456789"});var sg=Object.freeze({__proto__:null,base10:og});const ag=ot({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cg=ot({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ug=Object.freeze({__proto__:null,base16:ag,base16upper:cg});const lg=ot({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hg=ot({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),fg=ot({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pg=ot({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dg=ot({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yg=ot({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),gg=ot({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),_g=ot({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),vg=ot({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var mg=Object.freeze({__proto__:null,base32:lg,base32upper:hg,base32pad:fg,base32padupper:pg,base32hex:dg,base32hexupper:yg,base32hexpad:gg,base32hexpadupper:_g,base32z:vg});const bg=Gr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),wg=Gr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Eg=Object.freeze({__proto__:null,base36:bg,base36upper:wg});const Sg=Gr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Og=Gr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ig=Object.freeze({__proto__:null,base58btc:Sg,base58flickr:Og});const Pg=ot({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xg=ot({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Fg=ot({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ag=ot({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ng=Object.freeze({__proto__:null,base64:Pg,base64pad:xg,base64url:Fg,base64urlpad:Ag});const Pa=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),Tg=Pa.reduce((r,e,t)=>(r[t]=e,r),[]),Lg=Pa.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);const jg=wn({prefix:"\u{1f680}",name:"base256emoji",encode:function Rg(r){return r.reduce((e,t)=>e+Tg[t],"")},decode:function Cg(r){const e=[];for(const t of r){const n=Lg[t.codePointAt(0)];if(void 0===n)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}});var Ug=Object.freeze({__proto__:null,base256emoji:jg}),Mg=function Fa(r,e,t){e=e||[];for(var n=t=t||0;r>=zg;)e[t++]=255&r|128,r/=128;for(;-128&r;)e[t++]=255&r|128,r>>>=7;return e[t]=0|r,Fa.bytes=t-n+1,e},zg=Math.pow(2,31);var Kg=function ki(r,n){var s,t=0,i=0,o=n=n||0,a=r.length;do{if(o>=a)throw ki.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(127&s)<<i:(127&s)*Math.pow(2,i),i+=7}while(s>=128);return ki.bytes=o-n,t};var Bg=Math.pow(2,7),Vg=Math.pow(2,14),$g=Math.pow(2,21),qg=Math.pow(2,28),Gg=Math.pow(2,35),Wg=Math.pow(2,42),Yg=Math.pow(2,49),Jg=Math.pow(2,56),Xg=Math.pow(2,63),Na={encode:Mg,decode:Kg,encodingLength:function(r){return r<Bg?1:r<Vg?2:r<$g?3:r<qg?4:r<Gg?5:r<Wg?6:r<Yg?7:r<Jg?8:r<Xg?9:10}};const Ta=(r,e,t=0)=>(Na.encode(r,e,t),e),La=r=>Na.encodingLength(r),Di=(r,e)=>{const t=e.byteLength,n=La(r),i=n+La(t),o=new Uint8Array(i+t);return Ta(r,o,0),Ta(t,o,n),o.set(e,i),new e1(r,t,e,o)};class e1{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}const Ra=({name:r,code:e,encode:t})=>new t1(r,e,t);class t1{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Di(this.code,t):t.then(n=>Di(this.code,n))}throw Error("Unknown type, must be binary type")}}const Ca=r=>function(){var e=I(function*(t){return new Uint8Array(yield crypto.subtle.digest(r,t))});return function(t){return e.apply(this,arguments)}}(),r1=Ra({name:"sha2-256",code:18,encode:Ca("SHA-256")}),n1=Ra({name:"sha2-512",code:19,encode:Ca("SHA-512")});var i1=Object.freeze({__proto__:null,sha256:r1,sha512:n1});const Ua=Oa;var s1=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:Ua,digest:r=>Di(0,Ua(r))}});new TextEncoder,new TextDecoder;const Ma=pt(pt(pt(pt(pt(pt(pt(pt(pt(pt({},eg),rg),ig),sg),ug),mg),Eg),Ig),Ng),Ug);function ka(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}pt(pt({},i1),s1);const Da=ka("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>(new TextEncoder).encode(r.substring(1))),zi=ka("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{const e=function a1(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}((r=r.substring(1)).length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),c1=pt({utf8:Da,"utf-8":Da,hex:Ma.base16,latin1:zi,ascii:zi,binary:zi},Ma);const Ki="core",Wt="wc@2:core:",h1_logger="error",f1={database:":memory:"},Ka="client_ed25519_seed",d1=Q.ONE_DAY,m1=Q.SIX_HOURS,Ke_message="relayer_message",Ke_connect="relayer_connect",Ke_disconnect="relayer_disconnect",Ke_error="relayer_error",Ke_connection_stalled="relayer_connection_stalled",Ke_transport_closed="relayer_transport_closed",Ke_publish="relayer_publish",En_payload="payload",En_connect="connect",En_disconnect="disconnect",En_error="error",Ba=Q.ONE_SECOND,jt_created="subscription_created",jt_deleted="subscription_deleted",jt_sync="subscription_sync",jt_resubscribed="subscription_resubscribed",A1=1e3*Q.FIVE_SECONDS,Wr={wc_pairingDelete:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:0},res:{ttl:Q.ONE_DAY,prompt:!1,tag:0}}},Ut_created="history_created",Ut_updated="history_updated",Ut_deleted="history_deleted",Ut_sync="history_sync",It_created="expirer_created",It_deleted="expirer_deleted",It_expired="expirer_expired",It_sync="expirer_sync";class U1{constructor(e,t){var n=this;this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){if(!n.initialized){const i=yield n.getKeyChain();typeof i<"u"&&(n.keychain=i),n.initialized=!0}}),this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=function(){var i=I(function*(o,s){n.isInitialized(),n.keychain.set(o,s),yield n.persist()});return function(o,s){return i.apply(this,arguments)}}(),this.get=i=>{this.isInitialized();const o=this.keychain.get(i);if(typeof o>"u"){const{message:s}=q("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return o},this.del=function(){var i=I(function*(o){n.isInitialized(),n.keychain.delete(o),yield n.persist()});return function(o){return i.apply(this,arguments)}}(),this.core=e,this.logger=xe.generateChildLogger(t,this.name)}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}setKeyChain(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,Zs(e))})()}getKeyChain(){var e=this;return I(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?Qs(t):void 0})()}persist(){var e=this;return I(function*(){yield e.setKeyChain(e.keychain)})()}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class M1{constructor(e,t,n){var i=this;this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=I(function*(){i.initialized||(yield i.keychain.init(),i.initialized=!0)}),this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=I(function*(){return i.isInitialized(),Ss(Os(yield i.getClientSeed()).publicKey)}),this.generateKeyPair=()=>{this.isInitialized();const o=function Bp(){const r=di.generateKeyPair();return{privateKey:_t(r.secretKey,mt),publicKey:_t(r.publicKey,mt)}}();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=function(){var o=I(function*(s){i.isInitialized();const h=Os(yield i.getClientSeed()),l=Si();return yield function Xf(r,e,t,n){return li.apply(this,arguments)}(l,s,d1,h)});return function(s){return o.apply(this,arguments)}}(),this.generateSharedKey=(o,s,a)=>{this.isInitialized();const l=function Vp(r,e){const t=di.sharedKey(vt(r,mt),vt(e,mt));return _t(new lp(gn.SHA256,t).expand(32),mt)}(this.getPrivateKey(o),s);return this.setSymKey(l,a)},this.setSymKey=function(){var o=I(function*(s,a){i.isInitialized();const h=a||function $p(r){return _t(gn.hash(vt(r,mt)),mt)}(s);return yield i.keychain.set(h,s),h});return function(s,a){return o.apply(this,arguments)}}(),this.deleteKeyPair=function(){var o=I(function*(s){i.isInitialized(),yield i.keychain.del(s)});return function(s){return o.apply(this,arguments)}}(),this.deleteSymKey=function(){var o=I(function*(s){i.isInitialized(),yield i.keychain.del(s)});return function(s){return o.apply(this,arguments)}}(),this.encode=function(){var o=I(function*(s,a,h){i.isInitialized();const l=qs(h),f=jr(a);if(Gs(l)){const m=l.senderPublicKey,L=l.receiverPublicKey;s=yield i.generateSharedKey(m,L)}const _=i.getSymKey(s),{type:v,senderPublicKey:b}=l;return Gp({type:v,symKey:_,message:f,senderPublicKey:b})});return function(s,a,h){return o.apply(this,arguments)}}(),this.decode=function(){var o=I(function*(s,a,h){i.isInitialized();const l=function Jp(r,e){const t=Oi(r);return qs({type:Dr(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?_t(t.senderPublicKey,mt):void 0,receiverPublicKey:e?.receiverPublicKey})}(a,h);if(Gs(l)){const v=l.receiverPublicKey,b=l.senderPublicKey;s=yield i.generateSharedKey(v,b)}return ei(function Wp(r){const e=new hi.ChaCha20Poly1305(vt(r.symKey,mt)),{sealed:t,iv:n}=Oi(r.encoded),i=e.open(n,t);if(null===i)throw new Error("Failed to decrypt");return _t(i,bi)}({symKey:i.getSymKey(s),encoded:a}))});return function(s,a,h){return o.apply(this,arguments)}}(),this.core=e,this.logger=xe.generateChildLogger(t,this.name),this.keychain=n||new U1(this.core,this.logger)}get context(){return xe.getLoggerContext(this.logger)}getPayloadType(e){return Dr(Oi(e).type)}setPrivateKey(e,t){var n=this;return I(function*(){return yield n.keychain.set(e,t),e})()}getPrivateKey(e){return this.keychain.get(e)}getClientSeed(){var e=this;return I(function*(){let t="";try{t=e.keychain.get(Ka)}catch{t=Si(),yield e.keychain.set(Ka,t)}return function u1(r,e="utf8"){const t=c1[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${r}`):globalThis.Buffer.from(r,"utf8")}(t,"base16")})()}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class k1 extends class Rl{constructor(e,t){this.logger=e,this.core=t}}{constructor(e,t){var n;super(e,t),n=this,this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){if(!n.initialized){n.logger.trace("Initialized");try{const i=yield n.getRelayerMessages();typeof i<"u"&&(n.messages=i),n.logger.debug(`Successfully Restored records for ${n.name}`),n.logger.trace({type:"method",method:"restore",size:n.messages.size})}catch(i){n.logger.debug(`Failed to Restore records for ${n.name}`),n.logger.error(i)}finally{n.initialized=!0}}}),this.set=function(){var i=I(function*(o,s){n.isInitialized();const a=_n(s);let h=n.messages.get(o);return typeof h>"u"&&(h={}),typeof h[a]<"u"||(h[a]=s,n.messages.set(o,h),yield n.persist()),a});return function(o,s){return i.apply(this,arguments)}}(),this.get=i=>{this.isInitialized();let o=this.messages.get(i);return typeof o>"u"&&(o={}),o},this.has=(i,o)=>(this.isInitialized(),typeof this.get(i)[_n(o)]<"u"),this.del=function(){var i=I(function*(o){n.isInitialized(),n.messages.delete(o),yield n.persist()});return function(o){return i.apply(this,arguments)}}(),this.logger=xe.generateChildLogger(e,this.name),this.core=t}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}setRelayerMessages(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,Zs(e))})()}getRelayerMessages(){var e=this;return I(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?Qs(t):void 0})()}persist(){var e=this;return I(function*(){yield e.setRelayerMessages(e.messages)})()}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class D1 extends Cl{constructor(e,t){var n;super(e,t),n=this,this.relayer=e,this.logger=t,this.events=new ct.exports.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=1e4,this.publish=function(){var i=I(function*(o,s,a){n.logger.debug("Publishing Payload"),n.logger.trace({type:"method",method:"publish",params:{topic:o,message:s,opts:a}});try{const h=a?.ttl||m1,l=Ii(a),f=a?.prompt||!1,_=a?.tag||0,v={topic:o,message:s,opts:{ttl:h,relay:l,prompt:f,tag:_}},b=_n(s);n.queue.set(b,v);try{yield yield ea(n.rpcPublish(o,s,h,l,f,_),n.publishTimeout),n.relayer.events.emit(Ke_publish,v)}catch{return n.logger.debug("Publishing Payload stalled"),void n.relayer.events.emit(Ke_connection_stalled)}n.onPublish(b,v),n.logger.debug("Successfully Published Payload"),n.logger.trace({type:"method",method:"publish",params:{topic:o,message:s,opts:a}})}catch(h){throw n.logger.debug("Failed to Publish Payload"),n.logger.error(h),h}});return function(o,s,a){return i.apply(this,arguments)}}(),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.relayer=e,this.logger=xe.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return xe.getLoggerContext(this.logger)}rpcPublish(e,t,n,i,o,s){var a,h,l,f;const _={method:Pi(i.protocol).publish,params:{topic:e,message:t,ttl:n,prompt:o,tag:s}};return ft(null==(a=_.params)?void 0:a.prompt)&&(null==(h=_.params)||delete h.prompt),ft(null==(l=_.params)?void 0:l.tag)&&(null==(f=_.params)||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:_}),this.relayer.provider.request(_)}onPublish(e,t){this.queue.delete(e)}checkQueue(){var e=this;this.queue.forEach(function(){var t=I(function*(n){const{topic:i,message:o,opts:s}=n;yield e.publish(i,o,s)});return function(n){return t.apply(this,arguments)}}())}registerEventListeners(){this.relayer.core.heartbeat.on(xr.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class z1{constructor(){this.map=new Map,this.set=(e,t)=>{const n=this.get(e);this.exists(e,t)||this.map.set(e,[...n,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,t))return;const i=n.filter(o=>o!==t);i.length?this.map.set(e,i):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var K1=Object.defineProperty,H1=Object.defineProperties,B1=Object.getOwnPropertyDescriptors,Va=Object.getOwnPropertySymbols,V1=Object.prototype.hasOwnProperty,$1=Object.prototype.propertyIsEnumerable,$a=(r,e,t)=>e in r?K1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Sn=(r,e)=>{for(var t in e||(e={}))V1.call(e,t)&&$a(r,t,e[t]);if(Va)for(var t of Va(e))$1.call(e,t)&&$a(r,t,e[t]);return r},Hi=(r,e)=>H1(r,B1(e));class q1 extends Ml{constructor(e,t){var n;super(e,t),n=this,this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new z1,this.events=new ct.exports.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Wt,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.init=I(function*(){n.initialized||(n.logger.trace("Initialized"),yield n.restart(),n.registerEventListeners(),n.onEnable(),n.clientId=yield n.relayer.core.crypto.getClientId())}),this.subscribe=function(){var i=I(function*(o,s){yield n.restartToComplete(),n.isInitialized(),n.logger.debug("Subscribing Topic"),n.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:s}});try{const a=Ii(s),h={topic:o,relay:a};n.pending.set(o,h);const l=yield n.rpcSubscribe(o,a);return n.onSubscribe(l,h),n.logger.debug("Successfully Subscribed Topic"),n.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:s}}),l}catch(a){throw n.logger.debug("Failed to Subscribe Topic"),n.logger.error(a),a}});return function(o,s){return i.apply(this,arguments)}}(),this.unsubscribe=function(){var i=I(function*(o,s){yield n.restartToComplete(),n.isInitialized(),typeof s?.id<"u"?yield n.unsubscribeById(o,s.id,s):yield n.unsubscribeByTopic(o,s)});return function(o,s){return i.apply(this,arguments)}}(),this.isSubscribed=function(){var i=I(function*(o){return!!n.topics.includes(o)||(yield new Promise((s,a)=>{const h=new Q.Watch;h.start(n.pendingSubscriptionWatchLabel);const l=setInterval(()=>{!n.pending.has(o)&&n.topics.includes(o)&&(clearInterval(l),h.stop(n.pendingSubscriptionWatchLabel),s(!0)),h.elapsed(n.pendingSubscriptionWatchLabel)>=A1&&(clearInterval(l),h.stop(n.pendingSubscriptionWatchLabel),a(!1))},n.pollingInterval)}))});return function(o){return i.apply(this,arguments)}}(),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.restart=I(function*(){n.restartInProgress=!0,yield n.restore(),yield n.reset(),n.restartInProgress=!1}),this.relayer=e,this.logger=xe.generateChildLogger(t,this.name),this.clientId=""}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let n=!1;try{n=this.getSubscription(e).topic===t}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear(),this.initialized=!1}unsubscribeByTopic(e,t){var n=this;return I(function*(){const i=n.topicMap.get(e);yield Promise.all(i.map(function(){var o=I(function*(s){return yield n.unsubscribeById(e,s,t)});return function(s){return o.apply(this,arguments)}}()))})()}unsubscribeById(e,t,n){var i=this;return I(function*(){i.logger.debug("Unsubscribing Topic"),i.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}});try{const o=Ii(n);yield i.rpcUnsubscribe(e,t,o);const s=Ge("USER_DISCONNECTED",`${i.name}, ${e}`);yield i.onUnsubscribe(e,t,s),i.logger.debug("Successfully Unsubscribed Topic"),i.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}})}catch(o){throw i.logger.debug("Failed to Unsubscribe Topic"),i.logger.error(o),o}})()}rpcSubscribe(e,t){var n=this;return I(function*(){const i={method:Pi(t.protocol).subscribe,params:{topic:e}};n.logger.debug("Outgoing Relay Payload"),n.logger.trace({type:"payload",direction:"outgoing",request:i});try{yield yield ea(n.relayer.provider.request(i),n.subscribeTimeout)}catch{n.logger.debug("Outgoing Relay Payload stalled"),n.relayer.events.emit(Ke_connection_stalled)}return _n(e+n.clientId)})()}rpcUnsubscribe(e,t,n){const i={method:Pi(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.provider.request(i)}onSubscribe(e,t){this.setSubscription(e,Hi(Sn({},t),{id:e})),this.pending.delete(t.topic)}onResubscribe(e,t){this.addSubscription(e,Hi(Sn({},t),{id:e})),this.pending.delete(t.topic)}onUnsubscribe(e,t,n){var i=this;return I(function*(){i.events.removeAllListeners(t),i.hasSubscription(t,e)&&i.deleteSubscription(t,n),yield i.relayer.messages.del(e)})()}setRelayerSubscriptions(e){var t=this;return I(function*(){yield t.relayer.core.storage.setItem(t.storageKey,e)})()}getRelayerSubscriptions(){var e=this;return I(function*(){return yield e.relayer.core.storage.getItem(e.storageKey)})()}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,Sn({},t)),this.topicMap.set(t.topic,e),this.events.emit(jt_created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(jt_deleted,Hi(Sn({},n),{reason:t}))}persist(){var e=this;return I(function*(){yield e.setRelayerSubscriptions(e.values),e.events.emit(jt_sync)})()}reset(){var e=this;return I(function*(){e.cached.length&&(yield Promise.all(e.cached.map(function(){var t=I(function*(n){return yield e.resubscribe(n)});return function(n){return t.apply(this,arguments)}}()))),e.events.emit(jt_resubscribed)})()}restore(){var e=this;return I(function*(){try{const t=yield e.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(e.subscriptions.size){const{message:n}=q("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(n),e.logger.error(`${e.name}: ${JSON.stringify(e.values)}`),new Error(n)}e.cached=t,e.logger.debug(`Successfully Restored subscriptions for ${e.name}`),e.logger.trace({type:"method",method:"restore",subscriptions:e.values})}catch(t){e.logger.debug(`Failed to Restore subscriptions for ${e.name}`),e.logger.error(t)}})()}resubscribe(e){var t=this;return I(function*(){if(!t.ids.includes(e.id)){const{topic:n,relay:i}=e,o={topic:n,relay:i};t.pending.set(o.topic,o);const s=yield t.rpcSubscribe(o.topic,o.relay);t.onResubscribe(s,o)}})()}onConnect(){var e=this;return I(function*(){e.restartInProgress||(yield e.restart(),e.onEnable())})()}onDisconnect(){this.onDisable()}checkPending(){var e=this;this.relayer.transportExplicitlyClosed||this.pending.forEach(function(){var t=I(function*(n){const i=yield e.rpcSubscribe(n.topic,n.relay);e.onSubscribe(i,n)});return function(n){return t.apply(this,arguments)}}())}registerEventListeners(){var e=this;this.relayer.core.heartbeat.on(xr.HEARTBEAT_EVENTS.pulse,()=>{this.checkPending()}),this.relayer.on(Ke_connect,I(function*(){yield e.onConnect()})),this.relayer.on(Ke_disconnect,()=>{this.onDisconnect()}),this.events.on(jt_created,function(){var t=I(function*(n){const i=jt_created;e.logger.info(`Emitting ${i}`),e.logger.debug({type:"event",event:i,data:n}),yield e.persist()});return function(n){return t.apply(this,arguments)}}()),this.events.on(jt_deleted,function(){var t=I(function*(n){const i=jt_deleted;e.logger.info(`Emitting ${i}`),e.logger.debug({type:"event",event:i,data:n}),yield e.persist()});return function(n){return t.apply(this,arguments)}}())}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}restartToComplete(){var e=this;return I(function*(){e.restartInProgress&&(yield new Promise(t=>{const n=setInterval(()=>{e.restartInProgress||(clearInterval(n),t())},e.pollingInterval)}))})()}}var G1=Object.defineProperty,qa=Object.getOwnPropertySymbols,W1=Object.prototype.hasOwnProperty,Y1=Object.prototype.propertyIsEnumerable,Ga=(r,e,t)=>e in r?G1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;class X1 extends jl{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new ct.exports.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?xe.generateChildLogger(e.logger,this.name):Fe(xe.getDefaultLoggerOptions({level:e.logger||"error"})),this.messages=new k1(this.logger,e.core),this.subscriber=new q1(this,this.logger),this.publisher=new D1(this,this.logger),this.relayUrl=e?.relayUrl||"wss://relay.walletconnect.com",this.projectId=e.projectId,this.provider={}}init(){var e=this;return I(function*(){e.logger.trace("Initialized"),e.provider=yield e.createProvider(),yield Promise.all([e.messages.init(),e.transportOpen(),e.subscriber.init()]),e.registerEventListeners(),e.initialized=!0})()}get context(){return xe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}publish(e,t,n){var i=this;return I(function*(){i.isInitialized(),yield i.publisher.publish(e,t,n),yield i.recordMessageEvent({topic:e,message:t})})()}subscribe(e,t){var n=this;return I(function*(){n.isInitialized();let i="";return yield Promise.all([new Promise(o=>{n.subscriber.once(jt_created,s=>{s.topic===e&&o()})}),new Promise(function(){var o=I(function*(s){i=yield n.subscriber.subscribe(e,t),s()});return function(s){return o.apply(this,arguments)}}())]),i})()}unsubscribe(e,t){var n=this;return I(function*(){n.isInitialized(),yield n.subscriber.unsubscribe(e,t)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}transportClose(){var e=this;return I(function*(){e.transportExplicitlyClosed=!0,e.connected&&(yield e.provider.disconnect(),e.events.emit(Ke_transport_closed))})()}transportOpen(e){var t=this;return I(function*(){if(!t.reconnecting){t.relayUrl=e||t.relayUrl,t.transportExplicitlyClosed=!1,t.reconnecting=!0;try{yield Promise.all([new Promise(n=>{t.initialized||n(),t.subscriber.once(jt_resubscribed,()=>{n()})}),yield Promise.race([t.provider.connect(),new Promise((n,i)=>t.once(Ke_transport_closed,()=>{i(new Error("closeTransport called before connection was established"))}))])])}catch(n){if(!/socket hang up/i.test(n.message))throw n;t.logger.error(n),t.events.emit(Ke_transport_closed)}finally{t.reconnecting=!1}}})()}restartTransport(e){var t=this;return I(function*(){t.transportExplicitlyClosed||(yield t.transportClose(),yield new Promise(n=>setTimeout(n,Ba)),yield t.transportOpen(e))})()}createProvider(){var e=this;return I(function*(){const t=yield e.core.crypto.signJWT(e.relayUrl);return new qr(new My(ld({sdkVersion:"2.4.0",protocol:e.protocol,version:e.version,relayUrl:e.relayUrl,projectId:e.projectId,auth:t})))})()}recordMessageEvent(e){var t=this;return I(function*(){const{topic:n,message:i}=e;yield t.messages.set(n,i)})()}shouldIgnoreMessageEvent(e){var t=this;return I(function*(){const{topic:n,message:i}=e;return!(yield t.subscriber.isSubscribed(n))||t.messages.has(n,i)})()}onProviderPayload(e){var t=this;return I(function*(){if(t.logger.debug("Incoming Relay Payload"),t.logger.trace({type:"payload",direction:"incoming",payload:e}),ji(e)){if(!e.method.endsWith("_subscription"))return;const n=e.params,{topic:i,message:o}=n.data,s={topic:i,message:o};t.logger.debug("Emitting Relayer Payload"),t.logger.trace(((r,e)=>{for(var t in e||(e={}))W1.call(e,t)&&Ga(r,t,e[t]);if(qa)for(var t of qa(e))Y1.call(e,t)&&Ga(r,t,e[t]);return r})({type:"event",event:n.id},s)),t.events.emit(n.id,s),yield t.acknowledgePayload(e),yield t.onMessageEvent(s)}})()}onMessageEvent(e){var t=this;return I(function*(){(yield t.shouldIgnoreMessageEvent(e))||(t.events.emit(Ke_message,e),yield t.recordMessageEvent(e))})()}acknowledgePayload(e){var t=this;return I(function*(){const n=Ci(e.id,!0);yield t.provider.connection.send(n)})()}registerEventListeners(){var e=this;this.provider.on(En_payload,t=>this.onProviderPayload(t)),this.provider.on(En_connect,()=>{this.events.emit(Ke_connect)}),this.provider.on(En_disconnect,()=>{this.events.emit(Ke_disconnect),this.attemptToReconnect()}),this.provider.on(En_error,t=>this.events.emit(Ke_error,t)),this.events.on(Ke_connection_stalled,I(function*(){yield e.restartTransport()}))}attemptToReconnect(){var e=this;this.transportExplicitlyClosed||setTimeout(I(function*(){yield e.transportOpen()}),Q.toMiliseconds(Ba))}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Z1=Object.defineProperty,Wa=Object.getOwnPropertySymbols,Q1=Object.prototype.hasOwnProperty,e_=Object.prototype.propertyIsEnumerable,Ya=(r,e,t)=>e in r?Z1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ja=(r,e)=>{for(var t in e||(e={}))Q1.call(e,t)&&Ya(r,t,e[t]);if(Wa)for(var t of Wa(e))e_.call(e,t)&&Ya(r,t,e[t]);return r};class On extends class Ul{constructor(e,t,n,i){this.core=e,this.logger=t,this.name=n}}{constructor(e,t,n,i=Wt,o){var s;super(e,t,n,i),s=this,this.core=e,this.logger=t,this.name=n,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){s.initialized||(s.logger.trace("Initialized"),yield s.restore(),s.cached.forEach(a=>{!function Td(r){var e;return null==(e=r?.proposer)?void 0:e.publicKey}(a)?function Ld(r){return r?.topic}(a)?s.map.set(a.topic,a):s.getKey&&null!==a&&!ft(a)&&s.map.set(s.getKey(a),a):s.map.set(a.id,a)}),s.cached=[],s.initialized=!0)}),this.set=function(){var a=I(function*(h,l){s.isInitialized(),s.map.has(h)?yield s.update(h,l):(s.logger.debug("Setting value"),s.logger.trace({type:"method",method:"set",key:h,value:l}),s.map.set(h,l),yield s.persist())});return function(h,l){return a.apply(this,arguments)}}(),this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter(h=>Object.keys(a).every(l=>ky(h[l],a[l]))):this.values),this.update=function(){var a=I(function*(h,l){s.isInitialized(),s.logger.debug("Updating value"),s.logger.trace({type:"method",method:"update",key:h,update:l});const f=Ja(Ja({},s.getData(h)),l);s.map.set(h,f),yield s.persist()});return function(h,l){return a.apply(this,arguments)}}(),this.delete=function(){var a=I(function*(h,l){s.isInitialized(),s.map.has(h)&&(s.logger.debug("Deleting value"),s.logger.trace({type:"method",method:"delete",key:h,reason:l}),s.map.delete(h),yield s.persist())});return function(h,l){return a.apply(this,arguments)}}(),this.logger=xe.generateChildLogger(t,this.name),this.storagePrefix=i,this.getKey=o}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}setDataStore(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getDataStore(){var e=this;return I(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getData(e){const t=this.map.get(e);if(!t){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}persist(){var e=this;return I(function*(){yield e.setDataStore(e.values)})()}restore(){var e=this;return I(function*(){try{const t=yield e.getDataStore();if(typeof t>"u"||!t.length)return;if(e.map.size){const{message:n}=q("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(n),new Error(n)}e.cached=t,e.logger.debug(`Successfully Restored value for ${e.name}`),e.logger.trace({type:"method",method:"restore",value:e.values})}catch(t){e.logger.debug(`Failed to Restore value for ${e.name}`),e.logger.error(t)}})()}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class t_{constructor(e,t){var n=this;this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new ct.exports,this.initialized=!1,this.storagePrefix=Wt,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=I(function*(){n.initialized||(yield n.pairings.init(),yield n.cleanup(),n.registerRelayerEvents(),n.registerExpirerEvents(),n.initialized=!0,n.logger.trace("Initialized"))}),this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=I(function*(){n.isInitialized();const i=Si(),o=yield n.core.crypto.setSymKey(i),s=Ct(Q.FIVE_MINUTES),a={protocol:"irn"},h={topic:o,expiry:s,relay:a,active:!1},l=wd({protocol:n.core.protocol,version:n.core.version,topic:o,symKey:i,relay:a});return yield n.pairings.set(o,h),yield n.core.relayer.subscribe(o),n.core.expirer.set(o,s),{topic:o,uri:l}}),this.pair=function(){var i=I(function*(o){n.isInitialized(),n.isValidPair(o);const{topic:s,symKey:a,relay:h}=function md(r){const e=r.indexOf(":"),t=-1!==r.indexOf("?")?r.indexOf("?"):void 0,n=r.substring(0,e),i=r.substring(e+1,t).split("@"),o=typeof t<"u"?r.substring(t):"",s=kr.parse(o);return{protocol:n,topic:i[0],version:parseInt(i[1],10),symKey:s.symKey,relay:vd(s)}}(o.uri),l=Ct(Q.FIVE_MINUTES),f={topic:s,relay:h,expiry:l,active:!1};return yield n.pairings.set(s,f),yield n.core.crypto.setSymKey(a,s),yield n.core.relayer.subscribe(s,{relay:h}),n.core.expirer.set(s,l),o.activatePairing&&(yield n.activate({topic:s})),f});return function(o){return i.apply(this,arguments)}}(),this.activate=function(){var i=I(function*({topic:o}){n.isInitialized();const s=Ct(Q.THIRTY_DAYS);yield n.pairings.update(o,{active:!0,expiry:s}),n.core.expirer.set(o,s)});return function(o){return i.apply(this,arguments)}}(),this.ping=function(){var i=I(function*(o){n.isInitialized(),yield n.isValidPing(o);const{topic:s}=o;if(n.pairings.keys.includes(s)){const a=yield n.sendRequest(s,"wc_pairingPing",{}),{done:h,resolve:l,reject:f}=sr();n.events.once(De("pairing_ping",a),({error:_})=>{_?f(_):l()}),yield h()}});return function(o){return i.apply(this,arguments)}}(),this.updateExpiry=function(){var i=I(function*({topic:o,expiry:s}){n.isInitialized(),yield n.pairings.update(o,{expiry:s})});return function(o){return i.apply(this,arguments)}}(),this.updateMetadata=function(){var i=I(function*({topic:o,metadata:s}){n.isInitialized(),yield n.pairings.update(o,{peerMetadata:s})});return function(o){return i.apply(this,arguments)}}(),this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=function(){var i=I(function*(o){n.isInitialized(),yield n.isValidDisconnect(o);const{topic:s}=o;n.pairings.keys.includes(s)&&(yield n.sendRequest(s,"wc_pairingDelete",Ge("USER_DISCONNECTED")),yield n.deletePairing(s))});return function(o){return i.apply(this,arguments)}}(),this.sendRequest=function(){var i=I(function*(o,s,a){const h=mn(s,a),l=yield n.core.crypto.encode(o,h),f=Wr[s].req;return n.core.history.set(o,h),yield n.core.relayer.publish(o,l,f),h.id});return function(o,s,a){return i.apply(this,arguments)}}(),this.sendResult=function(){var i=I(function*(o,s,a){const h=Ci(o,a),l=yield n.core.crypto.encode(s,h),f=yield n.core.history.get(s,o),_=Wr[f.request.method].res;yield n.core.relayer.publish(s,l,_),yield n.core.history.resolve(h)});return function(o,s,a){return i.apply(this,arguments)}}(),this.sendError=function(){var i=I(function*(o,s,a){const h=bn(o,a),l=yield n.core.crypto.encode(s,h),f=yield n.core.history.get(s,o),_=Wr[f.request.method]?Wr[f.request.method].res:Wr.unregistered_method.res;yield n.core.relayer.publish(s,l,_),yield n.core.history.resolve(h)});return function(o,s,a){return i.apply(this,arguments)}}(),this.deletePairing=function(){var i=I(function*(o,s){yield n.core.relayer.unsubscribe(o),yield Promise.all([n.pairings.delete(o,Ge("USER_DISCONNECTED")),n.core.crypto.deleteSymKey(o),s?Promise.resolve():n.core.expirer.del(o)])});return function(o,s){return i.apply(this,arguments)}}(),this.cleanup=I(function*(){const i=n.pairings.getAll().filter(o=>Gt(o.expiry));yield Promise.all(i.map(o=>n.deletePairing(o.topic)))}),this.onRelayEventRequest=i=>{const{topic:o,payload:s}=i,a=s.method;if(this.pairings.keys.includes(o))switch(a){case"wc_pairingPing":return this.onPairingPingRequest(o,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,s);default:return this.onUnknownRpcMethodRequest(o,s)}},this.onRelayEventResponse=function(){var i=I(function*(o){const{topic:s,payload:a}=o,h=(yield n.core.history.get(s,a.id)).request.method;if(n.pairings.keys.includes(s))return"wc_pairingPing"===h?n.onPairingPingResponse(s,a):n.onUnknownRpcMethodResponse(h)});return function(o){return i.apply(this,arguments)}}(),this.onPairingPingRequest=function(){var i=I(function*(o,s){const{id:a}=s;try{n.isValidPing({topic:o}),yield n.sendResult(a,o,!0),n.events.emit("pairing_ping",{id:a,topic:o})}catch(h){yield n.sendError(a,o,h),n.logger.error(h)}});return function(o,s){return i.apply(this,arguments)}}(),this.onPairingPingResponse=(i,o)=>{const{id:s}=o;setTimeout(()=>{Kt(o)?this.events.emit(De("pairing_ping",s),{}):At(o)&&this.events.emit(De("pairing_ping",s),{error:o.error})},500)},this.onPairingDeleteRequest=function(){var i=I(function*(o,s){const{id:a}=s;try{n.isValidDisconnect({topic:o}),yield n.sendResult(a,o,!0),yield n.deletePairing(o),n.events.emit("pairing_delete",{id:a,topic:o})}catch(h){yield n.sendError(a,o,h),n.logger.error(h)}});return function(o,s){return i.apply(this,arguments)}}(),this.onUnknownRpcMethodRequest=function(){var i=I(function*(o,s){const{id:a,method:h}=s;try{if(n.registeredMethods.includes(h))return;const l=Ge("WC_METHOD_UNSUPPORTED",h);yield n.sendError(a,o,l),n.logger.error(l)}catch(l){yield n.sendError(a,o,l),n.logger.error(l)}});return function(o,s){return i.apply(this,arguments)}}(),this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(Ge("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!bt(i)){const{message:o}=q("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(o)}if(!function Nd(r){if(Ye(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}(i.uri)){const{message:o}=q("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(o)}},this.isValidPing=function(){var i=I(function*(o){if(!bt(o)){const{message:a}=q("MISSING_OR_INVALID",`ping() params: ${o}`);throw new Error(a)}const{topic:s}=o;yield n.isValidPairingTopic(s)});return function(o){return i.apply(this,arguments)}}(),this.isValidDisconnect=function(){var i=I(function*(o){if(!bt(o)){const{message:a}=q("MISSING_OR_INVALID",`disconnect() params: ${o}`);throw new Error(a)}const{topic:s}=o;yield n.isValidPairingTopic(s)});return function(o){return i.apply(this,arguments)}}(),this.isValidPairingTopic=function(){var i=I(function*(o){if(!Ye(o,!1)){const{message:s}=q("MISSING_OR_INVALID",`pairing topic should be a string: ${o}`);throw new Error(s)}if(!n.pairings.keys.includes(o)){const{message:s}=q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${o}`);throw new Error(s)}if(Gt(n.pairings.get(o).expiry)){yield n.deletePairing(o);const{message:s}=q("EXPIRED",`pairing topic: ${o}`);throw new Error(s)}});return function(o){return i.apply(this,arguments)}}(),this.core=e,this.logger=xe.generateChildLogger(t,this.name),this.pairings=new On(this.core,this.logger,this.name,this.storagePrefix)}get context(){return xe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){var e=this;this.core.relayer.on(Ke_message,function(){var t=I(function*(n){const{topic:i,message:o}=n;if(e.ignoredPayloadTypes.includes(e.core.crypto.getPayloadType(o)))return;const s=yield e.core.crypto.decode(i,o);ji(s)?(e.core.history.set(i,s),e.onRelayEventRequest({topic:i,payload:s})):Ui(s)&&(yield e.core.history.resolve(s),e.onRelayEventResponse({topic:i,payload:s}))});return function(n){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.core.expirer.on(It_expired,function(){var t=I(function*(n){const{topic:i}=ra(n.target);i&&e.pairings.keys.includes(i)&&(yield e.deletePairing(i,!0),e.events.emit("pairing_expire",{topic:i}))});return function(n){return t.apply(this,arguments)}}())}}class r_ extends Ll{constructor(e,t){var n;super(e,t),n=this,this.core=e,this.logger=t,this.records=new Map,this.events=new ct.exports.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){n.initialized||(n.logger.trace("Initialized"),yield n.restore(),n.cached.forEach(i=>n.records.set(i.id,i)),n.cached=[],n.registerEventListeners(),n.initialized=!0)}),this.set=(i,o,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:o,chainId:s}),this.records.has(o.id))return;const a={id:o.id,topic:i,request:{method:o.method,params:o.params||null},chainId:s};this.records.set(a.id,a),this.events.emit(Ut_created,a)},this.resolve=function(){var i=I(function*(o){if(n.isInitialized(),n.logger.debug("Updating JSON-RPC response history record"),n.logger.trace({type:"method",method:"update",response:o}),!n.records.has(o.id))return;const s=yield n.getRecord(o.id);typeof s.response>"u"&&(s.response=At(o)?{error:o.error}:{result:o.result},n.records.set(s.id,s),n.events.emit(Ut_updated,s))});return function(o){return i.apply(this,arguments)}}(),this.get=function(){var i=I(function*(o,s){return n.isInitialized(),n.logger.debug("Getting record"),n.logger.trace({type:"method",method:"get",topic:o,id:s}),yield n.getRecord(s)});return function(o,s){return i.apply(this,arguments)}}(),this.delete=(i,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(s=>{if(s.topic===i){if(typeof o<"u"&&s.id!==o)return;this.records.delete(s.id),this.events.emit(Ut_deleted,s)}})},this.exists=function(){var i=I(function*(o,s){return n.isInitialized(),!!n.records.has(s)&&(yield n.getRecord(s)).topic===o});return function(o,s){return i.apply(this,arguments)}}(),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=xe.generateChildLogger(t,this.name)}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:mn(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)}),e}setJsonRpcRecords(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getJsonRpcRecords(){var e=this;return I(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}persist(){var e=this;return I(function*(){yield e.setJsonRpcRecords(e.values),e.events.emit(Ut_sync)})()}restore(){var e=this;return I(function*(){try{const t=yield e.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(e.records.size){const{message:n}=q("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(n),new Error(n)}e.cached=t,e.logger.debug(`Successfully Restored records for ${e.name}`),e.logger.trace({type:"method",method:"restore",records:e.values})}catch(t){e.logger.debug(`Failed to Restore records for ${e.name}`),e.logger.error(t)}})()}registerEventListeners(){this.events.on(Ut_created,e=>{const t=Ut_created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Ut_updated,e=>{const t=Ut_updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Ut_deleted,e=>{const t=Ut_deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class n_ extends kl{constructor(e,t){var n;super(e,t),n=this,this.core=e,this.logger=t,this.expirations=new Map,this.events=new ct.exports.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){n.initialized||(n.logger.trace("Initialized"),yield n.restore(),n.cached.forEach(i=>n.expirations.set(i.target,i)),n.cached=[],n.registerEventListeners(),n.initialized=!0)}),this.has=i=>{try{const o=this.formatTarget(i);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(i,o)=>{this.isInitialized();const s=this.formatTarget(i),a={target:s,expiry:o};this.expirations.set(s,a),this.checkExpiry(s,a),this.events.emit(It_created,{target:s,expiration:a})},this.get=i=>{this.isInitialized();const o=this.formatTarget(i);return this.getExpiration(o)},this.del=i=>{if(this.isInitialized(),this.has(i)){const o=this.formatTarget(i),s=this.getExpiration(o);this.expirations.delete(o),this.events.emit(It_deleted,{target:o,expiration:s})}},this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=xe.generateChildLogger(t,this.name)}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function hd(r){return ta("topic",r)}(e);if("number"==typeof e)return function fd(r){return ta("id",r)}(e);const{message:t}=q("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}setExpirations(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getExpirations(){var e=this;return I(function*(){return yield e.core.storage.getItem(e.storageKey)})()}persist(){var e=this;return I(function*(){yield e.setExpirations(e.values),e.events.emit(It_sync)})()}restore(){var e=this;return I(function*(){try{const t=yield e.getExpirations();if(typeof t>"u"||!t.length)return;if(e.expirations.size){const{message:n}=q("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(n),new Error(n)}e.cached=t,e.logger.debug(`Successfully Restored expirations for ${e.name}`),e.logger.trace({type:"method",method:"restore",expirations:e.values})}catch(t){e.logger.debug(`Failed to Restore expirations for ${e.name}`),e.logger.error(t)}})()}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}checkExpiry(e,t){const{expiry:n}=t;Q.toMiliseconds(n)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(It_expired,{target:e,expiration:t})}checkExpirations(){this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(xr.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(It_created,e=>{const t=It_created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(It_expired,e=>{const t=It_expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(It_deleted,e=>{const t=It_deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var i_=Object.defineProperty,Xa=Object.getOwnPropertySymbols,o_=Object.prototype.hasOwnProperty,s_=Object.prototype.propertyIsEnumerable,Za=(r,e,t)=>e in r?i_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Qa=(r,e)=>{for(var t in e||(e={}))o_.call(e,t)&&Za(r,t,e[t]);if(Xa)for(var t of Xa(e))s_.call(e,t)&&Za(r,t,e[t]);return r};class Bi extends Tl{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=Ki,this.events=new ct.exports.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e?.projectId;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Fe(xe.getDefaultLoggerOptions({level:e?.logger||h1_logger}));this.logger=xe.generateChildLogger(t,this.name),this.heartbeat=new xr.HeartBeat,this.crypto=new M1(this,this.logger,e?.keychain),this.history=new r_(this,this.logger),this.expirer=new n_(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new uu(Qa(Qa({},f1),e?.storageOptions)),this.relayer=new X1({core:this,logger:this.logger,relayUrl:e?.relayUrl,projectId:this.projectId}),this.pairing=new t_(this,this.logger)}static init(e){return I(function*(){const t=new Bi(e);return yield t.initialize(),t})()}get context(){return xe.getLoggerContext(this.logger)}start(){var e=this;return I(function*(){e.initialized||(yield e.initialize())})()}initialize(){var e=this;return I(function*(){e.logger.trace("Initialized");try{yield e.crypto.init(),yield e.history.init(),yield e.expirer.init(),yield e.relayer.init(),yield e.heartbeat.init(),yield e.pairing.init(),e.initialized=!0,e.logger.info("Core Initialization Success")}catch(t){throw e.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),e.logger.error(t.message),t}})()}}const a_=Bi,Vi="wc@2:client:",$i_name="client",$i_logger="error",In=Q.SEVEN_DAYS,Yr={wc_sessionPropose:{req:{ttl:Q.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Q.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Q.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1115}}},qi={min:Q.FIVE_MINUTES,max:Q.SEVEN_DAYS};var f_=Object.defineProperty,p_=Object.defineProperties,d_=Object.getOwnPropertyDescriptors,nc=Object.getOwnPropertySymbols,y_=Object.prototype.hasOwnProperty,g_=Object.prototype.propertyIsEnumerable,ic=(r,e,t)=>e in r?f_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Pt=(r,e)=>{for(var t in e||(e={}))y_.call(e,t)&&ic(r,t,e[t]);if(nc)for(var t of nc(e))g_.call(e,t)&&ic(r,t,e[t]);return r},Gi=(r,e)=>p_(r,d_(e));class __ extends class zl{constructor(e){this.client=e}}{constructor(e){var t;super(e),t=this,this.name="engine",this.events=new ct.exports,this.initialized=!1,this.ignoredPayloadTypes=[1],this.init=I(function*(){t.initialized||(yield t.cleanup(),t.registerRelayerEvents(),t.registerExpirerEvents(),t.client.core.pairing.register({methods:Object.keys(Yr)}),t.initialized=!0)}),this.connect=function(){var n=I(function*(i){t.isInitialized();const o=Gi(Pt({},i),{requiredNamespaces:i.requiredNamespaces||{},optionalNamespaces:i.optionalNamespaces||{}});yield t.isValidConnect(o);const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:h,sessionProperties:l,relays:f}=o;let v,_=s,b=!1;if(_&&(b=t.client.core.pairing.pairings.get(_).active),!_||!b){const{topic:O,uri:w}=yield t.client.core.pairing.create();_=O,v=w}const m=yield t.client.core.crypto.generateKeyPair(),L=Pt({requiredNamespaces:a,optionalNamespaces:h,relays:f??[{protocol:"irn"}],proposer:{publicKey:m,metadata:t.client.metadata}},l&&{sessionProperties:l}),{reject:j,resolve:B,done:P}=sr();if(t.events.once(De("session_connect"),function(){var O=I(function*({error:w,session:c}){if(w)j(w);else if(c){c.self.publicKey=m;const p=Gi(Pt({},c),{requiredNamespaces:c.requiredNamespaces,optionalNamespaces:c.optionalNamespaces});yield t.client.session.set(c.topic,p),yield t.setExpiry(c.topic,c.expiry),_&&(yield t.client.core.pairing.updateMetadata({topic:_,metadata:c.peer.metadata})),B(p)}});return function(w){return O.apply(this,arguments)}}()),!_){const{message:O}=q("NO_MATCHING_KEY",`connect() pairing topic: ${_}`);throw new Error(O)}const A=yield t.sendRequest(_,"wc_sessionPropose",L),g=Ct(Q.FIVE_MINUTES);return yield t.setProposal(A,Pt({id:A,expiry:g},L)),{uri:v,approval:P}});return function(i){return n.apply(this,arguments)}}(),this.pair=function(){var n=I(function*(i){return t.isInitialized(),yield t.client.core.pairing.pair(i)});return function(i){return n.apply(this,arguments)}}(),this.approve=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidApprove(i);const{id:o,relayProtocol:s,namespaces:a,sessionProperties:h}=i,l=t.client.proposal.get(o);let{pairingTopic:f,proposer:_,requiredNamespaces:v,optionalNamespaces:b}=l;Br(v)||(v=function Id(r,e){const t=vn(r,e);if(t)throw new Error(t.message);const n={};for(const[i,o]of Object.entries(r))n[i]={methods:o.methods,events:o.events,chains:o.accounts.map(s=>`${s.split(":")[0]}:${s.split(":")[1]}`)};return n}(a,"approve()"));const m=yield t.client.core.crypto.generateKeyPair(),L=_.publicKey,j=yield t.client.core.crypto.generateSharedKey(m,L);f&&o&&(yield t.client.core.pairing.updateMetadata({topic:f,metadata:_.metadata}),yield t.sendResult(o,f,{relay:{protocol:s??"irn"},responderPublicKey:m}),yield t.client.proposal.delete(o,Ge("USER_DISCONNECTED")),yield t.client.core.pairing.activate({topic:f}));const B=Pt({relay:{protocol:s??"irn"},namespaces:a,requiredNamespaces:v,optionalNamespaces:b,controller:{publicKey:m,metadata:t.client.metadata},expiry:Ct(In)},h&&{sessionProperties:h});yield t.client.core.relayer.subscribe(j);const P=yield t.sendRequest(j,"wc_sessionSettle",B),{done:A,resolve:g,reject:O}=sr();t.events.once(De("session_approve",P),({error:c})=>{c?O(c):g(t.client.session.get(j))});const w=Gi(Pt({},B),{topic:j,acknowledged:!1,self:B.controller,peer:{publicKey:_.publicKey,metadata:_.metadata},controller:m});return yield t.client.session.set(j,w),yield t.setExpiry(j,Ct(In)),{topic:j,acknowledged:A}});return function(i){return n.apply(this,arguments)}}(),this.reject=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidReject(i);const{id:o,reason:s}=i,{pairingTopic:a}=t.client.proposal.get(o);a&&(yield t.sendError(o,a,s),yield t.client.proposal.delete(o,Ge("USER_DISCONNECTED")))});return function(i){return n.apply(this,arguments)}}(),this.update=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidUpdate(i);const{topic:o,namespaces:s}=i,a=yield t.sendRequest(o,"wc_sessionUpdate",{namespaces:s}),{done:h,resolve:l,reject:f}=sr();return t.events.once(De("session_update",a),({error:_})=>{_?f(_):l()}),yield t.client.session.update(o,{namespaces:s}),{acknowledged:h}});return function(i){return n.apply(this,arguments)}}(),this.extend=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidExtend(i);const{topic:o}=i,s=yield t.sendRequest(o,"wc_sessionExtend",{}),{done:a,resolve:h,reject:l}=sr();return t.events.once(De("session_extend",s),({error:f})=>{f?l(f):h()}),yield t.setExpiry(o,Ct(In)),{acknowledged:a}});return function(i){return n.apply(this,arguments)}}(),this.request=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidRequest(i);const{chainId:o,request:s,topic:a,expiry:h}=i,l=yield t.sendRequest(a,"wc_sessionRequest",{request:s,chainId:o},h),{done:f,resolve:_,reject:v}=sr(h);return t.events.once(De("session_request",l),({error:b,result:m})=>{b?v(b):_(m)}),yield f()});return function(i){return n.apply(this,arguments)}}(),this.respond=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidRespond(i);const{topic:o,response:s}=i,{id:a}=s;Kt(s)?yield t.sendResult(a,o,s.result):At(s)&&(yield t.sendError(a,o,s.error)),t.deletePendingSessionRequest(i.response.id,{message:"fulfilled",code:0})});return function(i){return n.apply(this,arguments)}}(),this.ping=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidPing(i);const{topic:o}=i;if(t.client.session.keys.includes(o)){const s=yield t.sendRequest(o,"wc_sessionPing",{}),{done:a,resolve:h,reject:l}=sr();t.events.once(De("session_ping",s),({error:f})=>{f?l(f):h()}),yield a()}else t.client.core.pairing.pairings.keys.includes(o)&&(yield t.client.core.pairing.ping({topic:o}))});return function(i){return n.apply(this,arguments)}}(),this.emit=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidEmit(i);const{topic:o,event:s,chainId:a}=i;yield t.sendRequest(o,"wc_sessionEvent",{event:s,chainId:a})});return function(i){return n.apply(this,arguments)}}(),this.disconnect=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidDisconnect(i);const{topic:o}=i;t.client.session.keys.includes(o)?(yield t.sendRequest(o,"wc_sessionDelete",Ge("USER_DISCONNECTED")),yield t.deleteSession(o)):yield t.client.core.pairing.disconnect({topic:o})});return function(i){return n.apply(this,arguments)}}(),this.find=n=>(this.isInitialized(),this.client.session.getAll().filter(i=>function Fd(r,e){const{requiredNamespaces:t}=e,n=Object.keys(r.namespaces),i=Object.keys(t);let o=!0;return!!qt(i,n)&&(n.forEach(s=>{const{accounts:a,methods:h,events:l}=r.namespaces[s],f=Kr(a),_=t[s];qt(vi(s,_),f)&&qt(_.methods,h)&&qt(_.events,l)||(o=!1)}),o)}(i,n))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=function(){var n=I(function*(i,o){const{self:s}=t.client.session.get(i);yield t.client.core.relayer.unsubscribe(i),yield Promise.all([t.client.session.delete(i,Ge("USER_DISCONNECTED")),t.client.core.crypto.deleteKeyPair(s.publicKey),t.client.core.crypto.deleteSymKey(i),o?Promise.resolve():t.client.core.expirer.del(i)])});return function(i,o){return n.apply(this,arguments)}}(),this.deleteProposal=function(){var n=I(function*(i,o){yield Promise.all([t.client.proposal.delete(i,Ge("USER_DISCONNECTED")),o?Promise.resolve():t.client.core.expirer.del(i)])});return function(i,o){return n.apply(this,arguments)}}(),this.deletePendingSessionRequest=function(){var n=I(function*(i,o,s=!1){yield Promise.all([t.client.pendingRequest.delete(i,o),s?Promise.resolve():t.client.core.expirer.del(i)])});return function(i,o){return n.apply(this,arguments)}}(),this.setExpiry=function(){var n=I(function*(i,o){t.client.session.keys.includes(i)&&(yield t.client.session.update(i,{expiry:o})),t.client.core.expirer.set(i,o)});return function(i,o){return n.apply(this,arguments)}}(),this.setProposal=function(){var n=I(function*(i,o){yield t.client.proposal.set(i,o),t.client.core.expirer.set(i,o.expiry)});return function(i,o){return n.apply(this,arguments)}}(),this.setPendingSessionRequest=function(){var n=I(function*(i){const o=Yr.wc_sessionRequest.req.ttl,{id:s,topic:a,params:h}=i;yield t.client.pendingRequest.set(s,{id:s,topic:a,params:h}),o&&t.client.core.expirer.set(s,Ct(o))});return function(i){return n.apply(this,arguments)}}(),this.sendRequest=function(){var n=I(function*(i,o,s,a){const h=mn(o,s),l=yield t.client.core.crypto.encode(i,h),f=Yr[o].req;return a&&(f.ttl=a),t.client.core.history.set(i,h),t.client.core.relayer.publish(i,l,f),h.id});return function(i,o,s,a){return n.apply(this,arguments)}}(),this.sendResult=function(){var n=I(function*(i,o,s){const a=Ci(i,s),h=yield t.client.core.crypto.encode(o,a),l=yield t.client.core.history.get(o,i);t.client.core.relayer.publish(o,h,Yr[l.request.method].res),yield t.client.core.history.resolve(a)});return function(i,o,s){return n.apply(this,arguments)}}(),this.sendError=function(){var n=I(function*(i,o,s){const a=bn(i,s),h=yield t.client.core.crypto.encode(o,a),l=yield t.client.core.history.get(o,i);t.client.core.relayer.publish(o,h,Yr[l.request.method].res),yield t.client.core.history.resolve(a)});return function(i,o,s){return n.apply(this,arguments)}}(),this.cleanup=I(function*(){const n=[],i=[];t.client.session.getAll().forEach(o=>{Gt(o.expiry)&&n.push(o.topic)}),t.client.proposal.getAll().forEach(o=>{Gt(o.expiry)&&i.push(o.id)}),yield Promise.all([...n.map(o=>t.deleteSession(o)),...i.map(o=>t.deleteProposal(o))])}),this.onRelayEventRequest=n=>{const{topic:i,payload:o}=n,s=o.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(i,o);case"wc_sessionSettle":return this.onSessionSettleRequest(i,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,o);case"wc_sessionExtend":return this.onSessionExtendRequest(i,o);case"wc_sessionPing":return this.onSessionPingRequest(i,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,o);case"wc_sessionRequest":return this.onSessionRequest(i,o);case"wc_sessionEvent":return this.onSessionEventRequest(i,o);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=function(){var n=I(function*(i){const{topic:o,payload:s}=i,a=(yield t.client.core.history.get(o,s.id)).request.method;switch(a){case"wc_sessionPropose":return t.onSessionProposeResponse(o,s);case"wc_sessionSettle":return t.onSessionSettleResponse(o,s);case"wc_sessionUpdate":return t.onSessionUpdateResponse(o,s);case"wc_sessionExtend":return t.onSessionExtendResponse(o,s);case"wc_sessionPing":return t.onSessionPingResponse(o,s);case"wc_sessionRequest":return t.onSessionRequestResponse(o,s);default:return t.client.logger.info(`Unsupported response method ${a}`)}});return function(i){return n.apply(this,arguments)}}(),this.onSessionProposeRequest=function(){var n=I(function*(i,o){const{params:s,id:a}=o;try{t.isValidConnect(Pt({},o.params));const h=Ct(Q.FIVE_MINUTES),l=Pt({id:a,pairingTopic:i,expiry:h},s);yield t.setProposal(a,l),t.client.events.emit("session_proposal",{id:a,params:l})}catch(h){yield t.sendError(a,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionProposeResponse=function(){var n=I(function*(i,o){const{id:s}=o;if(Kt(o)){const{result:a}=o;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:a});const h=t.client.proposal.get(s);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:h});const l=h.proposer.publicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const f=a.responderPublicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:f});const _=yield t.client.core.crypto.generateSharedKey(l,f);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:_});const v=yield t.client.core.relayer.subscribe(_);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:v}),yield t.client.core.pairing.activate({topic:i})}else At(o)&&(yield t.client.proposal.delete(s,Ge("USER_DISCONNECTED")),t.events.emit(De("session_connect"),{error:o.error}))});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionSettleRequest=function(){var n=I(function*(i,o){const{id:s,params:a}=o;try{t.isValidSessionSettleRequest(a);const{relay:h,controller:l,expiry:f,namespaces:_,requiredNamespaces:v,optionalNamespaces:b,sessionProperties:m}=o.params,L=Pt({topic:i,relay:h,expiry:f,namespaces:_,acknowledged:!0,requiredNamespaces:v,optionalNamespaces:b,controller:l.publicKey,self:{publicKey:"",metadata:t.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},m&&{sessionProperties:m});yield t.sendResult(o.id,i,!0),t.events.emit(De("session_connect"),{session:L})}catch(h){yield t.sendError(s,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionSettleResponse=function(){var n=I(function*(i,o){const{id:s}=o;Kt(o)?(yield t.client.session.update(i,{acknowledged:!0}),t.events.emit(De("session_approve",s),{})):At(o)&&(yield t.client.session.delete(i,Ge("USER_DISCONNECTED")),t.events.emit(De("session_approve",s),{error:o.error}))});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionUpdateRequest=function(){var n=I(function*(i,o){const{params:s,id:a}=o;try{t.isValidUpdate(Pt({topic:i},s)),yield t.client.session.update(i,{namespaces:s.namespaces}),yield t.sendResult(a,i,!0),t.client.events.emit("session_update",{id:a,topic:i,params:s})}catch(h){yield t.sendError(a,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionUpdateResponse=(n,i)=>{const{id:o}=i;Kt(i)?this.events.emit(De("session_update",o),{}):At(i)&&this.events.emit(De("session_update",o),{error:i.error})},this.onSessionExtendRequest=function(){var n=I(function*(i,o){const{id:s}=o;try{t.isValidExtend({topic:i}),yield t.setExpiry(i,Ct(In)),yield t.sendResult(s,i,!0),t.client.events.emit("session_extend",{id:s,topic:i})}catch(a){yield t.sendError(s,i,a),t.client.logger.error(a)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionExtendResponse=(n,i)=>{const{id:o}=i;Kt(i)?this.events.emit(De("session_extend",o),{}):At(i)&&this.events.emit(De("session_extend",o),{error:i.error})},this.onSessionPingRequest=function(){var n=I(function*(i,o){const{id:s}=o;try{t.isValidPing({topic:i}),yield t.sendResult(s,i,!0),t.client.events.emit("session_ping",{id:s,topic:i})}catch(a){yield t.sendError(s,i,a),t.client.logger.error(a)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionPingResponse=(n,i)=>{const{id:o}=i;setTimeout(()=>{Kt(i)?this.events.emit(De("session_ping",o),{}):At(i)&&this.events.emit(De("session_ping",o),{error:i.error})},500)},this.onSessionDeleteRequest=function(){var n=I(function*(i,o){const{id:s}=o;try{t.isValidDisconnect({topic:i,reason:o.params}),t.client.core.relayer.once(Ke_publish,I(function*(){yield t.deleteSession(i)})),yield t.sendResult(s,i,!0),t.client.events.emit("session_delete",{id:s,topic:i})}catch(a){yield t.sendError(s,i,a),t.client.logger.error(a)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionRequest=function(){var n=I(function*(i,o){const{id:s,params:a}=o;try{t.isValidRequest(Pt({topic:i},a)),yield t.setPendingSessionRequest({id:s,topic:i,params:a}),t.client.events.emit("session_request",{id:s,topic:i,params:a})}catch(h){yield t.sendError(s,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionRequestResponse=(n,i)=>{const{id:o}=i;Kt(i)?this.events.emit(De("session_request",o),{result:i.result}):At(i)&&this.events.emit(De("session_request",o),{error:i.error})},this.onSessionEventRequest=function(){var n=I(function*(i,o){const{id:s,params:a}=o;try{t.isValidEmit(Pt({topic:i},a)),t.client.events.emit("session_event",{id:s,topic:i,params:a})}catch(h){yield t.sendError(s,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.isValidConnect=function(){var n=I(function*(i){if(!bt(i)){const{message:f}=q("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(i)}`);throw new Error(f)}const{pairingTopic:o,requiredNamespaces:s,optionalNamespaces:a,sessionProperties:h,relays:l}=i;if(ft(o)||(yield t.isValidPairingTopic(o)),!function zd(r,e){let t=!1;return e&&!r?t=!0:r&&Hr(r)&&r.length&&r.forEach(n=>{t=aa(n)}),t}(l,!0)){const{message:f}=q("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(f)}!ft(s)&&0!==Br(s)&&t.validateNamespaces(s,"requiredNamespaces"),!ft(a)&&0!==Br(a)&&t.validateNamespaces(a,"optionalNamespaces"),ft(h)||t.validateSessionProps(h,"sessionProperties")});return function(i){return n.apply(this,arguments)}}(),this.validateNamespaces=(n,i)=>{const o=function Dd(r,e,t){let n=null;if(r&&Br(r)){const i=sa(r,e);i&&(n=i);const o=jd(r,e);o&&(n=o)}else n=q("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return n}(n,"connect()",i);if(o)throw new Error(o.message)},this.isValidApprove=function(){var n=I(function*(i){if(!bt(i))throw new Error(q("MISSING_OR_INVALID",`approve() params: ${i}`).message);const{id:o,namespaces:s,relayProtocol:a,sessionProperties:h}=i;yield t.isValidProposalId(o);const l=t.client.proposal.get(o),f=vn(s,"approve()");if(f)throw new Error(f.message);const _=Ai(l.requiredNamespaces,s,"approve()","requiredNamespaces");if(_)throw new Error(_.message);if(!Ye(a,!0)){const{message:v}=q("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(v)}if(Object.keys(s).length>Object.keys(l.requiredNamespaces).length){const v=Object.keys(l.optionalNamespaces).filter(L=>s[L]),b={};for(const L in l.optionalNamespaces)v.includes(L)&&(b[L]=l.optionalNamespaces[L]);const m=Ai(b,s,"approve()","optionalNamespaces");if(m)throw new Error(m.message)}ft(h)||t.validateSessionProps(h,"sessionProperties")});return function(i){return n.apply(this,arguments)}}(),this.isValidReject=function(){var n=I(function*(i){if(!bt(i)){const{message:a}=q("MISSING_OR_INVALID",`reject() params: ${i}`);throw new Error(a)}const{id:o,reason:s}=i;if(yield t.isValidProposalId(o),!function Hd(r){return!!(r&&"object"==typeof r&&r.code&&xi(r.code,!1)&&r.message&&Ye(r.message,!1))}(s)){const{message:a}=q("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(a)}});return function(i){return n.apply(this,arguments)}}(),this.isValidSessionSettleRequest=n=>{if(!bt(n)){const{message:f}=q("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(f)}const{relay:i,controller:o,namespaces:s,expiry:a}=n;if(!aa(i)){const{message:f}=q("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(f)}const h=function Rd(r,e){let t=null;return Ye(r?.publicKey,!1)||(t=q("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}(o,"onSessionSettleRequest()");if(h)throw new Error(h.message);const l=vn(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);if(Gt(a)){const{message:f}=q("EXPIRED","onSessionSettleRequest()");throw new Error(f)}},this.isValidUpdate=function(){var n=I(function*(i){if(!bt(i)){const{message:f}=q("MISSING_OR_INVALID",`update() params: ${i}`);throw new Error(f)}const{topic:o,namespaces:s}=i;yield t.isValidSessionTopic(o);const a=t.client.session.get(o),h=vn(s,"update()");if(h)throw new Error(h.message);const l=Ai(a.requiredNamespaces,s,"update()","requiredNamespaces");if(l)throw new Error(l.message)});return function(i){return n.apply(this,arguments)}}(),this.isValidExtend=function(){var n=I(function*(i){if(!bt(i)){const{message:s}=q("MISSING_OR_INVALID",`extend() params: ${i}`);throw new Error(s)}const{topic:o}=i;yield t.isValidSessionTopic(o)});return function(i){return n.apply(this,arguments)}}(),this.isValidRequest=function(){var n=I(function*(i){if(!bt(i)){const{message:f}=q("MISSING_OR_INVALID",`request() params: ${i}`);throw new Error(f)}const{topic:o,request:s,chainId:a,expiry:h}=i;yield t.isValidSessionTopic(o);const{namespaces:l}=t.client.session.get(o);if(!ca(l,a)){const{message:f}=q("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(f)}if(!function Bd(r){return!(ft(r)||!Ye(r.method,!1))}(s)){const{message:f}=q("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(f)}if(!qd(l,a,s.method)){const{message:f}=q("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(f)}if(h&&!function Wd(r,e){return xi(r,!1)&&r<=e.max&&r>=e.min}(h,qi)){const{message:f}=q("MISSING_OR_INVALID",`request() expiry: ${h}. Expiry must be a number (in seconds) between ${qi.min} and ${qi.max}`);throw new Error(f)}});return function(i){return n.apply(this,arguments)}}(),this.isValidRespond=function(){var n=I(function*(i){if(!bt(i)){const{message:a}=q("MISSING_OR_INVALID",`respond() params: ${i}`);throw new Error(a)}const{topic:o,response:s}=i;if(yield t.isValidSessionTopic(o),!function Vd(r){return!(ft(r)||ft(r.result)&&ft(r.error)||!xi(r.id,!1)||!Ye(r.jsonrpc,!1))}(s)){const{message:a}=q("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(a)}});return function(i){return n.apply(this,arguments)}}(),this.isValidPing=function(){var n=I(function*(i){if(!bt(i)){const{message:s}=q("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(s)}const{topic:o}=i;yield t.isValidSessionOrPairingTopic(o)});return function(i){return n.apply(this,arguments)}}(),this.isValidEmit=function(){var n=I(function*(i){if(!bt(i)){const{message:l}=q("MISSING_OR_INVALID",`emit() params: ${i}`);throw new Error(l)}const{topic:o,event:s,chainId:a}=i;yield t.isValidSessionTopic(o);const{namespaces:h}=t.client.session.get(o);if(!ca(h,a)){const{message:l}=q("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(l)}if(!function $d(r){return!(ft(r)||!Ye(r.name,!1))}(s)){const{message:l}=q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}if(!Gd(h,a,s.name)){const{message:l}=q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}});return function(i){return n.apply(this,arguments)}}(),this.isValidDisconnect=function(){var n=I(function*(i){if(!bt(i)){const{message:s}=q("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(s)}const{topic:o}=i;yield t.isValidSessionOrPairingTopic(o)});return function(i){return n.apply(this,arguments)}}(),this.validateSessionProps=(n,i)=>{Object.values(n).forEach(o=>{if(!Ye(o,!1)){const{message:s}=q("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(s)}})}}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){var e=this;this.client.core.relayer.on(Ke_message,function(){var t=I(function*(n){const{topic:i,message:o}=n;if(e.ignoredPayloadTypes.includes(e.client.core.crypto.getPayloadType(o)))return;const s=yield e.client.core.crypto.decode(i,o);ji(s)?(e.client.core.history.set(i,s),e.onRelayEventRequest({topic:i,payload:s})):Ui(s)&&(yield e.client.core.history.resolve(s),e.onRelayEventResponse({topic:i,payload:s}))});return function(n){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.client.core.expirer.on(It_expired,function(){var t=I(function*(n){const{topic:i,id:o}=ra(n.target);if(o&&e.client.pendingRequest.keys.includes(o))return yield e.deletePendingSessionRequest(o,q("EXPIRED"),!0);i?e.client.session.keys.includes(i)&&(yield e.deleteSession(i,!0),e.client.events.emit("session_expire",{topic:i})):o&&(yield e.deleteProposal(o,!0),e.client.events.emit("proposal_expire",{id:o}))});return function(n){return t.apply(this,arguments)}}())}isValidPairingTopic(e){if(!Ye(e,!1)){const{message:t}=q("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Gt(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=q("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}isValidSessionTopic(e){var t=this;return I(function*(){if(!Ye(e,!1)){const{message:n}=q("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(!t.client.session.keys.includes(e)){const{message:n}=q("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Gt(t.client.session.get(e).expiry)){yield t.deleteSession(e);const{message:n}=q("EXPIRED",`session topic: ${e}`);throw new Error(n)}})()}isValidSessionOrPairingTopic(e){var t=this;return I(function*(){if(t.client.session.keys.includes(e))yield t.isValidSessionTopic(e);else{if(!t.client.core.pairing.pairings.keys.includes(e)){if(Ye(e,!1)){const{message:n}=q("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}{const{message:n}=q("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}t.isValidPairingTopic(e)}})()}isValidProposalId(e){var t=this;return I(function*(){if(!function Kd(r){return"number"==typeof r}(e)){const{message:n}=q("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!t.client.proposal.keys.includes(e)){const{message:n}=q("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Gt(t.client.proposal.get(e).expiry)){yield t.deleteProposal(e);const{message:n}=q("EXPIRED",`proposal id: ${e}`);throw new Error(n)}})()}}class v_ extends On{constructor(e,t){super(e,t,"proposal",Vi),this.core=e,this.logger=t}}class m_ extends On{constructor(e,t){super(e,t,"session",Vi),this.core=e,this.logger=t}}class b_ extends On{constructor(e,t){super(e,t,"request",Vi),this.core=e,this.logger=t}}class Wi extends class Dl{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}{constructor(e){var t;super(e),t=this,this.protocol="wc",this.version=2,this.name=$i_name,this.events=new ct.exports.EventEmitter,this.on=(i,o)=>this.events.on(i,o),this.once=(i,o)=>this.events.once(i,o),this.off=(i,o)=>this.events.off(i,o),this.removeListener=(i,o)=>this.events.removeListener(i,o),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=function(){var i=I(function*(o){try{return yield t.engine.connect(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.pair=function(){var i=I(function*(o){try{return yield t.engine.pair(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.approve=function(){var i=I(function*(o){try{return yield t.engine.approve(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.reject=function(){var i=I(function*(o){try{return yield t.engine.reject(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.update=function(){var i=I(function*(o){try{return yield t.engine.update(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.extend=function(){var i=I(function*(o){try{return yield t.engine.extend(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.request=function(){var i=I(function*(o){try{return yield t.engine.request(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.respond=function(){var i=I(function*(o){try{return yield t.engine.respond(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.ping=function(){var i=I(function*(o){try{return yield t.engine.ping(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.emit=function(){var i=I(function*(o){try{return yield t.engine.emit(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.disconnect=function(){var i=I(function*(o){try{return yield t.engine.disconnect(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.find=i=>{try{return this.engine.find(i)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=e?.name||$i_name,this.metadata=e?.metadata||function sd(){return ks()||{name:"",description:"",url:"",icons:[""]}}();const n=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Fe(xe.getDefaultLoggerOptions({level:e?.logger||$i_logger}));this.core=e?.core||new a_(e),this.logger=xe.generateChildLogger(n,this.name),this.session=new m_(this.core,this.logger),this.proposal=new v_(this.core,this.logger),this.pendingRequest=new b_(this.core,this.logger),this.engine=new __(this)}static init(e){return I(function*(){const t=new Wi(e);return yield t.initialize(),t})()}get context(){return xe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}initialize(){var e=this;return I(function*(){e.logger.trace("Initialized");try{yield e.core.start(),yield e.session.init(),yield e.proposal.init(),yield e.pendingRequest.init(),yield e.engine.init(),e.logger.info("SignClient Initialization Success")}catch(t){throw e.logger.info("SignClient Initialization Failure"),e.logger.error(t.message),t}})()}}var Yi={exports:{}};!function(r,e){var o,t=typeof self<"u"?self:dt,n=function(){function o(){this.fetch=!1,this.DOMException=t.DOMException}return o.prototype=t,new o}();o=n,function(s){var a_searchParams="URLSearchParams"in o,a_iterable="Symbol"in o&&"iterator"in Symbol,a_blob="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),a_formData="FormData"in o,a_arrayBuffer="ArrayBuffer"in o;if(a_arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(d){return d&&l.indexOf(Object.prototype.toString.call(d))>-1};function _(d){if("string"!=typeof d&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function v(d){return"string"!=typeof d&&(d=String(d)),d}function b(d){var S={next:function(){var M=d.shift();return{done:void 0===M,value:M}}};return a_iterable&&(S[Symbol.iterator]=function(){return S}),S}function m(d){this.map={},d instanceof m?d.forEach(function(S,M){this.append(M,S)},this):Array.isArray(d)?d.forEach(function(S){this.append(S[0],S[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(S){this.append(S,d[S])},this)}function L(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function j(d){return new Promise(function(S,M){d.onload=function(){S(d.result)},d.onerror=function(){M(d.error)}})}function B(d){var S=new FileReader,M=j(S);return S.readAsArrayBuffer(d),M}function g(d){if(d.slice)return d.slice(0);var S=new Uint8Array(d.byteLength);return S.set(new Uint8Array(d)),S.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?"string"==typeof d?this._bodyText=d:a_blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:a_formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:a_searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():a_arrayBuffer&&a_blob&&function h(d){return d&&DataView.prototype.isPrototypeOf(d)}(d)?(this._bodyArrayBuffer=g(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||f(d))?this._bodyArrayBuffer=g(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||("string"==typeof d?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a_searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a_blob&&(this.blob=function(){var d=L(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?L(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(B)}),this.text=function(){var d=L(this);if(d)return d;if(this._bodyBlob)return function P(d){var S=new FileReader,M=j(S);return S.readAsText(d),M}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function A(d){for(var S=new Uint8Array(d),M=new Array(S.length),k=0;k<S.length;k++)M[k]=String.fromCharCode(S[k]);return M.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a_formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}m.prototype.append=function(d,S){d=_(d),S=v(S);var M=this.map[d];this.map[d]=M?M+", "+S:S},m.prototype.delete=function(d){delete this.map[_(d)]},m.prototype.get=function(d){return d=_(d),this.has(d)?this.map[d]:null},m.prototype.has=function(d){return this.map.hasOwnProperty(_(d))},m.prototype.set=function(d,S){this.map[_(d)]=v(S)},m.prototype.forEach=function(d,S){for(var M in this.map)this.map.hasOwnProperty(M)&&d.call(S,this.map[M],M,this)},m.prototype.keys=function(){var d=[];return this.forEach(function(S,M){d.push(M)}),b(d)},m.prototype.values=function(){var d=[];return this.forEach(function(S){d.push(S)}),b(d)},m.prototype.entries=function(){var d=[];return this.forEach(function(S,M){d.push([M,S])}),b(d)},a_iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function p(d,S){var M=(S=S||{}).body;if(d instanceof p){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,S.headers||(this.headers=new m(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!M&&null!=d._bodyInit&&(M=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new m(S.headers)),this.method=function c(d){var S=d.toUpperCase();return w.indexOf(S)>-1?S:d}(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&M)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(M)}function D(d){var S=new FormData;return d.trim().split("&").forEach(function(M){if(M){var k=M.split("="),C=k.shift().replace(/\+/g," "),R=k.join("=").replace(/\+/g," ");S.append(decodeURIComponent(C),decodeURIComponent(R))}}),S}function H(d){var S=new m;return d.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(k){var C=k.split(":"),R=C.shift().trim();if(R){var z=C.join(":").trim();S.append(R,z)}}),S}function G(d,S){S||(S={}),this.type="default",this.status=void 0===S.status?200:S.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in S?S.statusText:"OK",this.headers=new m(S.headers),this.url=S.url||"",this._initBody(d)}p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},O.call(p.prototype),O.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},G.error=function(){var d=new G(null,{status:0,statusText:""});return d.type="error",d};var X=[301,302,303,307,308];G.redirect=function(d,S){if(-1===X.indexOf(S))throw new RangeError("Invalid status code");return new G(null,{status:S,headers:{location:d}})},s.DOMException=o.DOMException;try{new s.DOMException}catch{s.DOMException=function(d,S){this.message=d,this.name=S;var M=Error(d);this.stack=M.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function Z(d,S){return new Promise(function(M,k){var C=new p(d,S);if(C.signal&&C.signal.aborted)return k(new s.DOMException("Aborted","AbortError"));var R=new XMLHttpRequest;function z(){R.abort()}R.onload=function(){var K={status:R.status,statusText:R.statusText,headers:H(R.getAllResponseHeaders()||"")};K.url="responseURL"in R?R.responseURL:K.headers.get("X-Request-URL"),M(new G("response"in R?R.response:R.responseText,K))},R.onerror=function(){k(new TypeError("Network request failed"))},R.ontimeout=function(){k(new TypeError("Network request failed"))},R.onabort=function(){k(new s.DOMException("Aborted","AbortError"))},R.open(C.method,C.url,!0),"include"===C.credentials?R.withCredentials=!0:"omit"===C.credentials&&(R.withCredentials=!1),"responseType"in R&&a_blob&&(R.responseType="blob"),C.headers.forEach(function(K,ee){R.setRequestHeader(ee,K)}),C.signal&&(C.signal.addEventListener("abort",z),R.onreadystatechange=function(){4===R.readyState&&C.signal.removeEventListener("abort",z)}),R.send(typeof C._bodyInit>"u"?null:C._bodyInit)})}Z.polyfill=!0,o.fetch||(o.fetch=Z,o.Headers=m,o.Request=p,o.Response=G),s.Headers=m,s.Request=p,s.Response=G,s.fetch=Z,Object.defineProperty(s,"__esModule",{value:!0})}({}),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e}(Yi,Yi.exports);var oc=function Mn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}(Yi.exports);const sc={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class Pn{constructor(e){if(this.url=e,this.events=new ct.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!va(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(e=this.url){var t=this;return I(function*(){yield t.register(e)})()}close(){var e=this;return I(function*(){if(!e.isAvailable)throw new Error("Connection already closed");e.onClose()})()}send(e,t){var n=this;return I(function*(){n.isAvailable||(yield n.register());try{const i=jr(e),o=yield(yield oc(n.url,Object.assign(Object.assign({},sc),{body:i}))).json();n.onPayload({data:o})}catch(i){n.onError(e.id,i)}})()}register(e=this.url){var t=this;return I(function*(){if(!va(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(t.registering){const n=t.events.getMaxListeners();return(t.events.listenerCount("register_error")>=n||t.events.listenerCount("open")>=n)&&t.events.setMaxListeners(n+1),new Promise((i,o)=>{t.events.once("register_error",s=>{t.resetMaxListeners(),o(s)}),t.events.once("open",()=>{if(t.resetMaxListeners(),typeof t.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));i()})})}t.url=e,t.registering=!0;try{const n=jr({id:1,jsonrpc:"2.0",method:"test",params:[]});yield oc(e,Object.assign(Object.assign({},sc),{body:n})),t.onOpen()}catch(n){const i=t.parseError(n);throw t.events.emit("register_error",i),t.onClose(),i}})()}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?ei(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),o=bn(e,n.message||n.toString());this.events.emit("payload",o)}parseError(e,t=this.url){return fa(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}function Yt(r,e){let t;return e.rpcMap&&(t=e.rpcMap[function E_(r){return Number(r[0].split(":")[1])}([r])]),t}function xn(){if(typeof window<"u")try{const r=window.localStorage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(r){const e=JSON.parse(r);window.open(e.href,"_self","noreferrer noopener")}}catch(r){console.error(r)}}class S_{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=this.getDefaultChainId()}request(e){var t=this;return I(function*(){var n;switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return t.getAccounts();case"wallet_switchEthereumChain":{const i=e.request.params?null==(n=e.request.params[0])?void 0:n.chainId:"0x0";return t.setDefaultChain(parseInt(i,16).toString()),null}case"eth_chainId":return t.getDefaultChainId()}return t.namespace.methods.includes(e.request.method)?(t.client.core.relayer.once(Ke_publish,xn),yield t.client.request(e)):t.getHttpProvider().request(e.request)})()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){if(this.chainId=parseInt(e),!this.httpProviders[e]){const n=t||Yt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}requestAccounts(){return this.getAccounts()}createHttpProvider(e,t){const n=t||Yt(e,this.namespace);return typeof n>"u"?void 0:new qr(new Pn(n))}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return parseInt(e.split(":")[1])}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}}class O_{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(this.client.core.relayer.once(Ke_publish,xn),this.client.request(e)):this.getHttpProvider().request(e.request)}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||Yt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Yt(e,this.namespace);return typeof n>"u"?void 0:new qr(new Pn(n))}}class I_{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(this.client.core.relayer.once(Ke_publish,xn),this.client.request(e)):this.getHttpProvider().request(e.request)}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||Yt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Yt(e,this.namespace);return typeof n>"u"?void 0:new qr(new Pn(n))}}class P_{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(this.client.core.relayer.once(Ke_publish,xn),this.client.request(e)):this.getHttpProvider().request(e.request)}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||Yt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Yt(e,this.namespace);return typeof n>"u"?void 0:new qr(new Pn(n))}}const uc="wc@2:universal_provider:";var N_=Object.defineProperty,T_=Object.defineProperties,L_=Object.getOwnPropertyDescriptors,lc=Object.getOwnPropertySymbols,R_=Object.prototype.hasOwnProperty,C_=Object.prototype.propertyIsEnumerable,hc=(r,e,t)=>e in r?N_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,fc=(r,e)=>{for(var t in e||(e={}))R_.call(e,t)&&hc(r,t,e[t]);if(lc)for(var t of lc(e))C_.call(e,t)&&hc(r,t,e[t]);return r};class Fn{constructor(e){this.events=new ct.exports,this.rpcProviders={},this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Fe(xe.getDefaultLoggerOptions({level:e?.logger||"error"}))}static init(e){return I(function*(){const t=new Fn(e);return yield t.initialize(),t})()}request(e,t){var n=this;return I(function*(){const[i,o]=n.validateChain(t);if(!n.session)throw new Error("Please call connect() before request()");return yield n.getProvider(i).request({request:fc({},e),chainId:`${i}:${o}`,topic:n.session.topic})})()}sendAsync(e,t,n){this.request(e,n).then(i=>t(null,i)).catch(i=>t(i,void 0))}enable(){var e=this;return I(function*(){if(!e.client)throw new Error("Sign Client not initialized");return e.session||(yield e.connect({namespaces:e.namespaces})),yield e.requestAccounts()})()}disconnect(){var e=this;return I(function*(){var t;if(!e.session)throw new Error("Please call connect() before enable()");yield e.client.disconnect({topic:null==(t=e.session)?void 0:t.topic,reason:Ge("USER_DISCONNECTED")}),yield e.cleanup()})()}connect(e){var t=this;return I(function*(){if(!t.client)throw new Error("Sign Client not initialized");const{namespaces:n}=e;return t.setNamespaces(n),t.createProviders(),yield t.cleanupPendingPairings(),!0===e.skipPairing?void 0:yield t.pair(e.pairingTopic)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}pair(e){var t=this;return I(function*(){const{uri:n,approval:i}=yield t.client.connect({pairingTopic:e,requiredNamespaces:t.namespaces});return n&&(t.uri=n,t.events.emit("display_uri",n)),t.session=yield i(),t.onSessionUpdate(),t.onConnect(),t.session})()}setDefaultChain(e,t){try{const[n,i]=this.validateChain(e);this.getProvider(n).setDefaultChain(i,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}cleanupPendingPairings(e={}){var t=this;return I(function*(){t.logger.info("Cleaning up inactive pairings...");const n=t.client.pairing.getAll();if(Hr(n)){for(const i of n)e.deletePairings?t.client.core.expirer.set(i.topic,0):yield t.client.core.relayer.subscriber.unsubscribe(i.topic);t.logger.info(`Inactive pairings cleared: ${n.length}`)}})()}checkStorage(){var e=this;return I(function*(){e.namespaces=(yield e.client.core.storage.getItem(`${uc}/namespaces`))||{},e.namespaces&&e.createProviders(),e.client.session.length&&(e.session=e.client.session.get(e.client.session.keys[e.client.session.keys.length-1]),e.onSessionUpdate())})()}initialize(){var e=this;return I(function*(){e.logger.trace("Initialized"),yield e.createClient(),e.checkStorage(),e.registerEventListeners()})()}createClient(){var e=this;return I(function*(){e.client=e.providerOpts.client||(yield Wi.init({logger:e.providerOpts.logger||"error",relayUrl:e.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:e.providerOpts.projectId,metadata:e.providerOpts.metadata,storageOptions:e.providerOpts.storageOptions,name:e.providerOpts.name})),e.logger.trace("SignClient Initialized")})()}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");Object.keys(this.namespaces).forEach(e=>{switch(e){case"eip155":this.rpcProviders[e]=new S_({client:this.client,namespace:this.namespaces[e],events:this.events});break;case"solana":this.rpcProviders[e]=new O_({client:this.client,namespace:this.namespaces[e],events:this.events});break;case"cosmos":this.rpcProviders[e]=new I_({client:this.client,namespace:this.namespaces[e],events:this.events});break;case"polkadot":break;case"cip34":this.rpcProviders[e]=new P_({client:this.client,namespace:this.namespaces[e],events:this.events})}})}registerEventListeners(){var e=this;if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:n}=t,{event:i}=n;"accountsChanged"===i.name?this.events.emit("accountsChanged",i.data):"chainChanged"===i.name?this.onChainChanged(i.data,n.chainId):this.events.emit(i.name,i.data),this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:n})=>{var i;const{namespaces:o}=n,s=null==(i=this.client)?void 0:i.session.get(t);this.session=((r,e)=>T_(r,L_(e)))(fc({},s),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:n})}),this.client.on("session_delete",function(){var t=I(function*(n){yield e.cleanup(),e.events.emit("session_delete",n)});return function(n){return t.apply(this,arguments)}}())}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){if(!e||!Object.keys(e).length)throw new Error("Namespaces must be not empty");this.client.core.storage.setItem(`${uc}/namespaces`,e),this.namespaces=e}validateChain(e){const[t,n]=e?.split(":")||["",""];if(t&&!Object.keys(this.namespaces).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);return t&&n?[t,n]:function w_(r){var e;const t=null==(e=r[Object.keys(r)[0]])?void 0:e.chains[0];return[t.split(":")[0],t.split(":")[1]]}(this.namespaces)}requestAccounts(){var e=this;return I(function*(){const[t]=e.validateChain();return yield e.getProvider(t).requestAccounts()})()}onChainChanged(e,t){const[n,i]=this.validateChain(t);this.getProvider(n).setDefaultChain(i),this.events.emit("chainChanged",e)}onConnect(){this.events.emit("connect",{session:this.session})}cleanup(){var e=this;return I(function*(){e.session=void 0,yield e.cleanupPendingPairings({deletePairings:!0})})()}}hr.UniversalProvider=Fn,hr.default=Fn,Object.defineProperty(hr,"__esModule",{value:!0})}(Qr)},4813:Un=>{"use strict";Un.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}}]);