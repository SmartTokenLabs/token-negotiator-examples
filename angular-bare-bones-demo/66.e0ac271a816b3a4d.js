(self.webpackChunkAngular_bare_bones_demo=self.webpackChunkAngular_bare_bones_demo||[]).push([[66],{6066:(Un,Zr,er)=>{"use strict";er.r(Zr),er.d(Zr,{CUSTOM_RPCS_FOR_WC_V2:()=>Mt,WC_V2_CHAINS:()=>Cn,getWalletConnectV2ProviderInstance:()=>Mn});var I=er(3648),hr=er.n(I),Mt={1:"https://ethereum.publicnode.com",5:"https://eth-goerli.g.alchemy.com/v2/yVhq9zPJorAWsw-F87fEabSUl7cCU6z4",137:"https://polygon-rpc.com/",80001:"https://polygon-mumbai.g.alchemy.com/v2/rVI6pOV4irVsrw20cJxc1fxK_1cSeiY0",56:"https://bsc-dataseed.binance.org/",43114:"https://api.avax.network/ext/bc/C/rpc",250:"https://rpc.fantom.network/",25:"https://evm-cronos.crypto.org",42161:"https://arb1.arbitrum.io/rpc",10:"https://mainnet.optimism.io"},Cn=["eip155:1","eip155:137","eip155:250","eip155:25","eip155:42161","eip155:10"],Mn=function(){return Vt=void 0,fr=void 0,pt=function(){return function(Vt,fr){var pt,yt,fe,De,Pe={label:0,sent:function(){if(1&fe[0])throw fe[1];return fe[1]},trys:[],ops:[]};return De={next:St(0),throw:St(1),return:St(2)},"function"==typeof Symbol&&(De[Symbol.iterator]=function(){return this}),De;function St(ye){return function(st){return function wr(ye){if(pt)throw new TypeError("Generator is already executing.");for(;De&&(De=0,ye[0]&&(Pe=0)),Pe;)try{if(pt=1,yt&&(fe=2&ye[0]?yt.return:ye[0]?yt.throw||((fe=yt.return)&&fe.call(yt),0):yt.next)&&!(fe=fe.call(yt,ye[1])).done)return fe;switch(yt=0,fe&&(ye=[2&ye[0],fe.value]),ye[0]){case 0:case 1:fe=ye;break;case 4:return Pe.label++,{value:ye[1],done:!1};case 5:Pe.label++,yt=ye[1],ye=[0];continue;case 7:ye=Pe.ops.pop(),Pe.trys.pop();continue;default:if(!(fe=(fe=Pe.trys).length>0&&fe[fe.length-1])&&(6===ye[0]||2===ye[0])){Pe=0;continue}if(3===ye[0]&&(!fe||ye[1]>fe[0]&&ye[1]<fe[3])){Pe.label=ye[1];break}if(6===ye[0]&&Pe.label<fe[1]){Pe.label=fe[1],fe=ye;break}if(fe&&Pe.label<fe[2]){Pe.label=fe[2],Pe.ops.push(ye);break}fe[2]&&Pe.ops.pop(),Pe.trys.pop();continue}ye=fr.call(Vt,Pe)}catch(st){ye=[6,st],yt=0}finally{pt=fe=0}if(5&ye[0])throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}([ye,st])}}}(this,function(Vt){switch(Vt.label){case 0:return[4,hr().init({projectId:"2ec7ead81da1226703ad789c0b2f7b30",logger:"debug",relayUrl:"wss://relay.walletconnect.com"})];case 1:return[2,Vt.sent()]}})},new((Pe=void 0)||(Pe=Promise))(function(fe,De){function St(st){try{ye(pt.next(st))}catch(Tt){De(Tt)}}function wr(st){try{ye(pt.throw(st))}catch(Tt){De(Tt)}}function ye(st){st.done?fe(st.value):function yt(fe){return fe instanceof Pe?fe:new Pe(function(De){De(fe)})}(st.value).then(St,wr)}ye((pt=pt.apply(Vt,fr||[])).next())});var Vt,fr,Pe,pt}},3648:function(Un,Zr,er){var I=er(1052).default;!function(hr){"use strict";var dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mt(r){var e=r.default;if("function"==typeof e){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}function Cn(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}const fr=function Vt(r,e,t){var n=t&&t.stringify||Cn;if("object"==typeof r&&null!==r){var o=e.length+1;if(1===o)return r;var s=new Array(o);s[0]=n(r);for(var a=1;a<o;a++)s[a]=n(e[a]);return s.join(" ")}if("string"!=typeof r)return r;var h=e.length;if(0===h)return r;for(var l="",f=0,_=-1,v=r&&r.length||0,E=0;E<v;){if(37===r.charCodeAt(E)&&E+1<v){switch(_=_>-1?_:0,r.charCodeAt(E+1)){case 100:case 102:if(f>=h||null==e[f])break;_<E&&(l+=r.slice(_,E)),l+=Number(e[f]),_=E+2,E++;break;case 105:if(f>=h||null==e[f])break;_<E&&(l+=r.slice(_,E)),l+=Math.floor(Number(e[f])),_=E+2,E++;break;case 79:case 111:case 106:if(f>=h||void 0===e[f])break;_<E&&(l+=r.slice(_,E));var b=typeof e[f];if("string"===b){l+="'"+e[f]+"'",_=E+2,E++;break}if("function"===b){l+=e[f].name||"<anonymous>",_=E+2,E++;break}l+=n(e[f]),_=E+2,E++;break;case 115:if(f>=h)break;_<E&&(l+=r.slice(_,E)),l+=String(e[f]),_=E+2,E++;break;case 37:_<E&&(l+=r.slice(_,E)),l+="%",_=E+2,E++,f--}++f}++E}return-1===_?r:(_<v&&(l+=r.slice(_)),l)};var Pe=De;const pt=function Fc(){function r(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return r(self)||r(window)||r(this)||{}}}().console||{},yt={mapHttpRequest:Qr,mapHttpResponse:Qr,wrapRequestSerializer:kn,wrapResponseSerializer:kn,wrapErrorSerializer:kn,req:Qr,res:Qr,err:function Ec(r){const e={type:r.constructor.name,msg:r.message,stack:r.stack};for(const t in r)void 0===e[t]&&(e[t]=r[t]);return e}};function De(r){(r=r||{}).browser=r.browser||{};const e=r.browser.transmit;if(e&&"function"!=typeof e.send)throw Error("pino: transmit option must have a send function");const t=r.browser.write||pt;r.browser.write&&(r.browser.asObject=!0);const n=r.serializers||{},i=function fe(r,e){return Array.isArray(r)?r.filter(function(t){return"!stdSerializers.err"!==t}):!0===r&&Object.keys(e)}(r.browser.serialize,n);let o=r.browser.serialize;Array.isArray(r.browser.serialize)&&r.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);"function"==typeof t&&(t.error=t.fatal=t.warn=t.info=t.debug=t.trace=t),!1===r.enabled&&(r.level="silent");const a=r.level||"info",h=Object.create(t);h.log||(h.log=Er),Object.defineProperty(h,"levelVal",{get:function f(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(h,"level",{get:function _(){return this._level},set:function v(b){if("silent"!==b&&!this.levels.values[b])throw Error("unknown level "+b);this._level=b,St(l,h,"error","log"),St(l,h,"fatal","error"),St(l,h,"warn","error"),St(l,h,"info","log"),St(l,h,"debug","log"),St(l,h,"trace","log")}});const l={transmit:e,serialize:i,asObject:r.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:Sc(r)};return h.levels=De.levels,h.level=a,h.setMaxListeners=h.getMaxListeners=h.emit=h.addListener=h.on=h.prependListener=h.once=h.prependOnceListener=h.removeListener=h.removeAllListeners=h.listeners=h.listenerCount=h.eventNames=h.write=h.flush=Er,h.serializers=n,h._serialize=i,h._stdErrSerialize=o,h.child=function E(b,L){if(!b)throw new Error("missing bindings for child Pino");L=L||{},i&&b.serializers&&(L.serializers=b.serializers);const C=L.serializers;if(i&&C){var H=Object.assign({},n,C),F=!0===r.browser.serialize?Object.keys(H):i;delete b.serializers,st([b],F,H,this._stdErrSerialize)}function A(g){this._childLevel=1+(0|g._childLevel),this.error=Tt(g,b,"error"),this.fatal=Tt(g,b,"fatal"),this.warn=Tt(g,b,"warn"),this.info=Tt(g,b,"info"),this.debug=Tt(g,b,"debug"),this.trace=Tt(g,b,"trace"),H&&(this.serializers=H,this._serialize=F),e&&(this._logEvent=Dn([].concat(g._logEvent.bindings,b)))}return A.prototype=this,new A(this)},e&&(h._logEvent=Dn()),h}function St(r,e,t,n){const i=Object.getPrototypeOf(e);e[t]=e.levelVal>e.levels.values[t]?Er:i[t]?i[t]:pt[t]||pt[n]||Er,function wr(r,e,t){var n;!r.transmit&&e[t]===Er||(e[t]=(n=e[t],function(){const i=r.timestamp(),o=new Array(arguments.length),s=Object.getPrototypeOf&&Object.getPrototypeOf(this)===pt?pt:this;for(var a=0;a<o.length;a++)o[a]=arguments[a];if(r.serialize&&!r.asObject&&st(o,this._serialize,this.serializers,this._stdErrSerialize),r.asObject?n.call(s,ye(this,t,o,i)):n.apply(s,o),r.transmit){const h=r.transmit.level||e.level,f=De.levels.values[t];if(f<De.levels.values[h])return;wc(this,{ts:i,methodLevel:t,methodValue:f,transmitLevel:h,transmitValue:De.levels.values[r.transmit.level||e.level],send:r.transmit.send,val:e.levelVal},o)}}))}(r,e,t)}function ye(r,e,t,n){r._serialize&&st(t,r._serialize,r.serializers,r._stdErrSerialize);const i=t.slice();let o=i[0];const s={};n&&(s.time=n),s.level=De.levels.values[e];let a=1+(0|r._childLevel);if(a<1&&(a=1),null!==o&&"object"==typeof o){for(;a--&&"object"==typeof i[0];)Object.assign(s,i.shift());o=i.length?fr(i.shift(),i):void 0}else"string"==typeof o&&(o=fr(i.shift(),i));return void 0!==o&&(s.msg=o),s}function st(r,e,t,n){for(const i in r)if(n&&r[i]instanceof Error)r[i]=De.stdSerializers.err(r[i]);else if("object"==typeof r[i]&&!Array.isArray(r[i]))for(const o in r[i])e&&e.indexOf(o)>-1&&o in t&&(r[i][o]=t[o](r[i][o]))}function Tt(r,e,t){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return r[t].apply(this,n)}}function wc(r,e,t){const n=e.send,i=e.ts,o=e.methodLevel,s=e.methodValue,a=e.val,h=r._logEvent.bindings;st(t,r._serialize||Object.keys(r.serializers),r.serializers,void 0===r._stdErrSerialize||r._stdErrSerialize),r._logEvent.ts=i,r._logEvent.messages=t.filter(function(l){return-1===h.indexOf(l)}),r._logEvent.level.label=o,r._logEvent.level.value=s,n(o,r._logEvent,a),r._logEvent=Dn(h)}function Dn(r){return{ts:0,messages:[],bindings:r||[],level:{label:"",value:0}}}function Sc(r){return"function"==typeof r.timestamp?r.timestamp:!1===r.timestamp?Wi:Yi}function Qr(){return{}}function kn(r){return r}function Er(){}function Wi(){return!1}function Yi(){return Date.now()}De.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},De.stdSerializers=yt,De.stdTimeFunctions=Object.assign({},{nullTime:Wi,epochTime:Yi,unixTime:function Oc(){return Math.round(Date.now()/1e3)},isoTime:function Ic(){return new Date(Date.now()).toISOString()}});var en,at={exports:{}},dr="object"==typeof Reflect?Reflect:null,Ji=dr&&"function"==typeof dr.apply?dr.apply:function(r,e,t){return Function.prototype.apply.call(r,e,t)};en=dr&&"function"==typeof dr.ownKeys?dr.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)};var Xi=Number.isNaN||function(r){return r!=r};function Ae(){Ae.init.call(this)}at.exports=Ae,at.exports.once=function Tc(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){"function"==typeof r.removeListener&&r.removeListener("error",i),t([].slice.call(arguments))}oo(r,e,o,{once:!0}),"error"!==e&&function Lc(r,e,t){"function"==typeof r.on&&oo(r,"error",e,t)}(r,i,{once:!0})})},Ae.EventEmitter=Ae,Ae.prototype._events=void 0,Ae.prototype._eventsCount=0,Ae.prototype._maxListeners=void 0;var Zi=10;function tn(r){if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function Qi(r){return void 0===r._maxListeners?Ae.defaultMaxListeners:r._maxListeners}function eo(r,e,t,n){var i,o,s;if(tn(t),void 0===(o=r._events)?(o=r._events=Object.create(null),r._eventsCount=0):(void 0!==o.newListener&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),void 0===s)s=o[e]=t,++r._eventsCount;else if("function"==typeof s?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),(i=Qi(r))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=s.length,function xc(r){console&&console.warn&&console.warn(r)}(a)}return r}function Pc(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function to(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=Pc.bind(n);return i.listener=t,n.wrapFn=i,i}function ro(r,e,t){var n=r._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?t?[i.listener||i]:[i]:t?function Nc(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}(i):io(i,i.length)}function no(r){var e=this._events;if(void 0!==e){var t=e[r];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function io(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function oo(r,e,t,n){if("function"==typeof r.on)n.once?r.once(e,t):r.on(e,t);else{if("function"!=typeof r.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r);r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)})}}Object.defineProperty(Ae,"defaultMaxListeners",{enumerable:!0,get:function(){return Zi},set:function(r){if("number"!=typeof r||r<0||Xi(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Zi=r}}),Ae.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ae.prototype.setMaxListeners=function(r){if("number"!=typeof r||r<0||Xi(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},Ae.prototype.getMaxListeners=function(){return Qi(this)},Ae.prototype.emit=function(r){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var n="error"===r,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[r];if(void 0===a)return!1;if("function"==typeof a)Ji(a,this,e);else{var h=a.length,l=io(a,h);for(t=0;t<h;++t)Ji(l[t],this,e)}return!0},Ae.prototype.on=Ae.prototype.addListener=function(r,e){return eo(this,r,e,!1)},Ae.prototype.prependListener=function(r,e){return eo(this,r,e,!0)},Ae.prototype.once=function(r,e){return tn(e),this.on(r,to(this,r,e)),this},Ae.prototype.prependOnceListener=function(r,e){return tn(e),this.prependListener(r,to(this,r,e)),this},Ae.prototype.off=Ae.prototype.removeListener=function(r,e){var t,n,i,o,s;if(tn(e),void 0===(n=this._events))return this;if(void 0===(t=n[r]))return this;if(t===e||t.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[r],n.removeListener&&this.emit("removeListener",r,t.listener||e));else if("function"!=typeof t){for(i=-1,o=t.length-1;o>=0;o--)if(t[o]===e||t[o].listener===e){s=t[o].listener,i=o;break}if(i<0)return this;0===i?t.shift():function Ac(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}(t,i),1===t.length&&(n[r]=t[0]),void 0!==n.removeListener&&this.emit("removeListener",r,s||e)}return this},Ae.prototype.removeAllListeners=function(r){var e,t,n;if(void 0===(t=this._events))return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[r]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[r]),this;if(0===arguments.length){var o,i=Object.keys(t);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=t[r]))this.removeListener(r,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(r,e[n]);return this},Ae.prototype.listeners=function(r){return ro(this,r,!0)},Ae.prototype.rawListeners=function(r){return ro(this,r,!1)},Ae.listenerCount=function(r,e){return"function"==typeof r.listenerCount?r.listenerCount(e):no.call(r,e)},Ae.prototype.listenerCount=no,Ae.prototype.eventNames=function(){return this._eventsCount>0?en(this._events):[]};var rn={},zn=function(r,e){return(zn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Bn=function(){return Bn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Bn.apply(this,arguments)};function Kn(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function so(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Sr(r){return this instanceof Sr?(this.v=r,this):new Sr(r)}var ao=Mt(Object.freeze({__proto__:null,__extends:function Rc(r,e){function t(){this.constructor=r}zn(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Bn},__rest:function Uc(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function jc(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function Cc(r,e){return function(t,n){e(t,n,r)}},__metadata:function Mc(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function Dc(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function kc(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function zc(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function Bc(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:Kn,__read:so,__spread:function Kc(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(so(arguments[e]));return r},__spreadArrays:function Hc(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Sr,__asyncGenerator:function Vc(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(E){return new Promise(function(b,L){o.push([v,E,b,L])>1||a(v,E)})})}function a(v,E){try{!function h(v){v.value instanceof Sr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](E))}catch(b){_(o[0][3],b)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,E){v(E),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function $c(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Sr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function qc(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=Kn(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function Gc(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function Wc(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function Yc(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function Jc(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function Xc(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),Or={};Object.defineProperty(Or,"__esModule",{value:!0}),Or.safeJsonParse=function Qc(r){if("string"!=typeof r)throw new Error("Cannot safe json parse value of type "+typeof r);try{return JSON.parse(r)}catch{return r}},Or.safeJsonStringify=function eu(r){return"string"==typeof r?r:JSON.stringify(r,(e,t)=>typeof t>"u"?null:t)};var co,nn={exports:{}};var lo,uo={},Ir={};var ho,fo,Fr={};Object.defineProperty(rn,"__esModule",{value:!0}),rn.KeyValueStorage=void 0;const pr=ao,po=Or,ou=pr.__importDefault(function tu(){return co||(co=1,function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,n){this[t]=String(n)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(n){t[n]=void 0,delete t[n]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),nn.exports=typeof dt<"u"&&dt.localStorage?dt.localStorage:typeof window<"u"&&window.localStorage?window.localStorage:new e}()),nn.exports}()),su=function iu(){return fo||(fo=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=ao;e.__exportStar(function ru(){return lo||(lo=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.IKeyValueStorage=void 0,Ir.IKeyValueStorage=class r{}),Ir}(),r),e.__exportStar(function nu(){if(ho)return Fr;ho=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.parseEntry=void 0;const r=Or;return Fr.parseEntry=function e(t){var n;return[t[0],r.safeJsonParse(null!==(n=t[1])&&void 0!==n?n:"")]},Fr}(),r)}(uo)),uo}();class yo{constructor(){this.localStorage=ou.default}getKeys(){return pr.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return pr.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(su.parseEntry)})}getItem(e){return pr.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(null!==t)return po.safeJsonParse(t)})}setItem(e,t){return pr.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,po.safeJsonStringify(t))})}removeItem(e){return pr.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}rn.KeyValueStorage=yo;var au=rn.default=yo,xr={},Hn=function(r,e){return(Hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Vn=function(){return Vn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Vn.apply(this,arguments)};function $n(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function go(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Pr(r){return this instanceof Pr?(this.v=r,this):new Pr(r)}var on=Mt(Object.freeze({__proto__:null,__extends:function cu(r,e){function t(){this.constructor=r}Hn(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Vn},__rest:function uu(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function lu(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function hu(r,e){return function(t,n){e(t,n,r)}},__metadata:function fu(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function du(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function pu(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function yu(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function gu(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:$n,__read:go,__spread:function _u(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(go(arguments[e]));return r},__spreadArrays:function vu(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Pr,__asyncGenerator:function mu(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(E){return new Promise(function(b,L){o.push([v,E,b,L])>1||a(v,E)})})}function a(v,E){try{!function h(v){v.value instanceof Pr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](E))}catch(b){_(o[0][3],b)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,E){v(E),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function bu(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Pr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function wu(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=$n(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function Eu(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function Su(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function Ou(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function Iu(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function Fu(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),Ar={},Q={},qn=function(r,e){return(qn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Gn=function(){return Gn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Gn.apply(this,arguments)};function Wn(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _o(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Nr(r){return this instanceof Nr?(this.v=r,this):new Nr(r)}var mo,sn=Mt(Object.freeze({__proto__:null,__extends:function Pu(r,e){function t(){this.constructor=r}qn(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Gn},__rest:function Au(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function Nu(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function Tu(r,e){return function(t,n){e(t,n,r)}},__metadata:function Lu(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function Ru(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function Uu(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function ju(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function Cu(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:Wn,__read:_o,__spread:function Mu(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(_o(arguments[e]));return r},__spreadArrays:function Du(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Nr,__asyncGenerator:function ku(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(E){return new Promise(function(b,L){o.push([v,E,b,L])>1||a(v,E)})})}function a(v,E){try{!function h(v){v.value instanceof Nr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](E))}catch(b){_(o[0][3],b)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,E){v(E),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function zu(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Nr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function Bu(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=Wn(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function Ku(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function Hu(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function Vu(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function $u(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function qu(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),vo={},Tr={};var wo,tr={},bo={},yr={};var So,Oo,Fo,xo,Eo={};function Io(){return Oo||(Oo=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=sn;e.__exportStar(function Yu(){return wo||(wo=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.ONE_THOUSAND=yr.ONE_HUNDRED=void 0,yr.ONE_HUNDRED=100,yr.ONE_THOUSAND=1e3),yr}(),r),e.__exportStar(function Ju(){return So||(So=1,r=Eo,Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=5*r.ONE_MINUTE,r.TEN_MINUTES=10*r.ONE_MINUTE,r.THIRTY_MINUTES=30*r.ONE_MINUTE,r.SIXTY_MINUTES=60*r.ONE_MINUTE,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=3*r.ONE_HOUR,r.SIX_HOURS=6*r.ONE_HOUR,r.TWELVE_HOURS=12*r.ONE_HOUR,r.TWENTY_FOUR_HOURS=24*r.ONE_HOUR,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=3*r.ONE_DAY,r.FIVE_DAYS=5*r.ONE_DAY,r.SEVEN_DAYS=7*r.ONE_DAY,r.THIRTY_DAYS=30*r.ONE_DAY,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=2*r.ONE_WEEK,r.THREE_WEEKS=3*r.ONE_WEEK,r.FOUR_WEEKS=4*r.ONE_WEEK,r.ONE_YEAR=365*r.ONE_DAY),Eo;var r}(),r)}(bo)),bo}function Zu(){return xo||(xo=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=sn;e.__exportStar(function Wu(){return mo||(mo=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.delay=void 0,Tr.delay=function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}),Tr}(),r),e.__exportStar(function Xu(){if(Fo)return tr;Fo=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.fromMiliseconds=tr.toMiliseconds=void 0;const r=Io();return tr.toMiliseconds=function e(n){return n*r.ONE_THOUSAND},tr.fromMiliseconds=function t(n){return Math.floor(n/r.ONE_THOUSAND)},tr}(),r)}(vo)),vo}var Po,gr={};var No,To,Ao={},Lr={};function tl(){return To||(To=1,r=Ao,Object.defineProperty(r,"__esModule",{value:!0}),sn.__exportStar(function el(){return No||(No=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.IWatch=void 0,Lr.IWatch=class r{}),Lr}(),r)),Ao;var r}!function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=sn;e.__exportStar(Zu(),r),e.__exportStar(function Qu(){if(Po)return gr;Po=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const n=this.get(t);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const i=Date.now()-n.started;this.timestamps.set(t,{started:n.started,elapsed:i})}get(t){const n=this.timestamps.get(t);if(typeof n>"u")throw new Error(`No timestamp found for label: ${t}`);return n}elapsed(t){const n=this.get(t);return n.elapsed||Date.now()-n.started}}return gr.Watch=r,gr.default=r,gr}(),r),e.__exportStar(tl(),r),e.__exportStar(Io(),r)}(Q);var Lo={},Rr={};class rr{}var Ro,Uo,nl=Mt(Object.freeze({__proto__:null,IEvents:rr}));function jo(){return Uo||(Uo=1,r=Lo,Object.defineProperty(r,"__esModule",{value:!0}),on.__exportStar(function il(){if(Ro)return Rr;Ro=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.IHeartBeat=void 0;const r=nl;return Rr.IHeartBeat=class e extends r.IEvents{constructor(n){super()}},Rr}(),r)),Lo;var r}var Mo,Do,zo,Co={},nr={};function ko(){return Do||(Do=1,r=Co,Object.defineProperty(r,"__esModule",{value:!0}),on.__exportStar(function ol(){return Mo||(Mo=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.HEARTBEAT_EVENTS=nr.HEARTBEAT_INTERVAL=void 0,nr.HEARTBEAT_INTERVAL=Q.FIVE_SECONDS,nr.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}),nr}(),r)),Co;var r}!function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=on;e.__exportStar(function sl(){if(zo)return Ar;zo=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.HeartBeat=void 0;const r=on,e=at.exports,t=Q,n=jo(),i=ko();class o extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=a?.interval||i.HEARTBEAT_INTERVAL}static init(a){return r.__awaiter(this,void 0,void 0,function*(){const h=new o(a);return yield h.init(),h})}init(){return r.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,h){this.events.on(a,h)}once(a,h){this.events.once(a,h)}off(a,h){this.events.off(a,h)}removeListener(a,h){this.events.removeListener(a,h)}initialize(){return r.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Ar.HeartBeat=o,Ar}(),r),e.__exportStar(jo(),r),e.__exportStar(ko(),r)}(xr);var xe={},Yn=function(r,e){return(Yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Jn=function(){return Jn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Jn.apply(this,arguments)};function Xn(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bo(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Ur(r){return this instanceof Ur?(this.v=r,this):new Ur(r)}var Ko,xl=Mt(Object.freeze({__proto__:null,__extends:function al(r,e){function t(){this.constructor=r}Yn(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Jn},__rest:function cl(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function ul(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function ll(r,e){return function(t,n){e(t,n,r)}},__metadata:function hl(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function fl(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function dl(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function pl(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function yl(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:Xn,__read:Bo,__spread:function gl(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Bo(arguments[e]));return r},__spreadArrays:function _l(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Ur,__asyncGenerator:function vl(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(E){return new Promise(function(b,L){o.push([v,E,b,L])>1||a(v,E)})})}function a(v,E){try{!function h(v){v.value instanceof Ur?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](E))}catch(b){_(o[0][3],b)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,E){v(E),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function ml(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Ur(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function bl(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=Xn(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function wl(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function El(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function Sl(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function Ol(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function Il(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),_r={};function Ho(){return Ko||(Ko=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.PINO_CUSTOM_CONTEXT_KEY=_r.PINO_LOGGER_DEFAULTS=void 0,_r.PINO_LOGGER_DEFAULTS={level:"info"},_r.PINO_CUSTOM_CONTEXT_KEY="custom_context"),_r}var Vo,ht={};!function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.pino=void 0;const e=xl,t=e.__importDefault(Pe);Object.defineProperty(r,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(Ho(),r),e.__exportStar(function Pl(){if(Vo)return ht;Vo=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.generateChildLogger=ht.formatChildLoggerContext=ht.getLoggerContext=ht.setBrowserLoggerContext=ht.getBrowserLoggerContext=ht.getDefaultLoggerOptions=void 0;const r=Ho();function t(a,h=r.PINO_CUSTOM_CONTEXT_KEY){return a[h]||""}function n(a,h,l=r.PINO_CUSTOM_CONTEXT_KEY){return a[l]=h,a}function i(a,h=r.PINO_CUSTOM_CONTEXT_KEY){let l="";return l=typeof a.bindings>"u"?t(a,h):a.bindings().context||"",l}function o(a,h,l=r.PINO_CUSTOM_CONTEXT_KEY){const f=i(a,l);return f.trim()?`${f}/${h}`:h}return ht.getDefaultLoggerOptions=function e(a){return Object.assign(Object.assign({},a),{level:a?.level||r.PINO_LOGGER_DEFAULTS.level})},ht.getBrowserLoggerContext=t,ht.setBrowserLoggerContext=n,ht.getLoggerContext=i,ht.formatChildLoggerContext=o,ht.generateChildLogger=function s(a,h,l=r.PINO_CUSTOM_CONTEXT_KEY){const f=o(a,h,l);return n(a.child({context:f}),f,l)},ht}(),r)}(xe);class Al extends rr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class Nl extends rr{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class Ll extends rr{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Rl extends rr{constructor(e){super()}}class jl extends rr{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Cl extends rr{constructor(e,t){super(),this.core=e,this.logger=t}}function Zn(r){if("string"!=typeof r)throw new Error("Cannot safe json parse value of type "+typeof r);try{return JSON.parse(r)}catch{return r}}function jr(r){return"string"==typeof r?r:JSON.stringify(r)}var Qn={},vr={},an={},cn={};Object.defineProperty(cn,"__esModule",{value:!0}),cn.BrowserRandomSource=void 0;cn.BrowserRandomSource=class kl{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let n=0;n<t.length;n+=65536)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,65536)));return t}};var un={},bt={};Object.defineProperty(bt,"__esModule",{value:!0}),bt.wipe=function Bl(r){for(var e=0;e<r.length;e++)r[e]=0;return r};var Vl=Mt(Object.freeze({__proto__:null,default:{}}));Object.defineProperty(un,"__esModule",{value:!0}),un.NodeRandomSource=void 0;const $l=bt;un.NodeRandomSource=class ql{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=Vl;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=t[i];return(0,$l.wipe)(t),n}},Object.defineProperty(an,"__esModule",{value:!0}),an.SystemRandomSource=void 0;const Gl=cn,Wl=un;an.SystemRandomSource=class Yl{constructor(){return this.isAvailable=!1,this.name="",this._source=new Gl.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new Wl.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};var r,ne={},qo={};r=qo,Object.defineProperty(r,"__esModule",{value:!0}),r.mul=Math.imul||function e(a,h){var f=65535&a,v=65535&h;return f*v+((a>>>16&65535)*v+f*(h>>>16&65535)<<16>>>0)|0},r.add=function t(a,h){return a+h|0},r.sub=function n(a,h){return a-h|0},r.rotl=function i(a,h){return a<<h|a>>>32-h},r.rotr=function o(a,h){return a<<32-h|a>>>h},r.isInteger=Number.isInteger||function s(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(a){return r.isInteger(a)&&a>=-r.MAX_SAFE_INTEGER&&a<=r.MAX_SAFE_INTEGER},Object.defineProperty(ne,"__esModule",{value:!0});var Go=qo;function Wo(r,e,t){return void 0===e&&(e=new Uint8Array(2)),void 0===t&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}function Yo(r,e,t){return void 0===e&&(e=new Uint8Array(2)),void 0===t&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}function ei(r,e){return void 0===e&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function ti(r,e){return void 0===e&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}function ri(r,e){return void 0===e&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}function ni(r,e){return void 0===e&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}function ln(r,e,t){return void 0===e&&(e=new Uint8Array(4)),void 0===t&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}function hn(r,e,t){return void 0===e&&(e=new Uint8Array(4)),void 0===t&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}function Jo(r,e,t){return void 0===e&&(e=new Uint8Array(8)),void 0===t&&(t=0),ln(r/4294967296>>>0,e,t),ln(r>>>0,e,t+4),e}function Xo(r,e,t){return void 0===e&&(e=new Uint8Array(8)),void 0===t&&(t=0),hn(r>>>0,e,t),hn(r/4294967296>>>0,e,t+4),e}ne.readInt16BE=function Jl(r,e){return void 0===e&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16},ne.readUint16BE=function Xl(r,e){return void 0===e&&(e=0),(r[e+0]<<8|r[e+1])>>>0},ne.readInt16LE=function Zl(r,e){return void 0===e&&(e=0),(r[e+1]<<8|r[e])<<16>>16},ne.readUint16LE=function Ql(r,e){return void 0===e&&(e=0),(r[e+1]<<8|r[e])>>>0},ne.writeUint16BE=Wo,ne.writeInt16BE=Wo,ne.writeUint16LE=Yo,ne.writeInt16LE=Yo,ne.readInt32BE=ei,ne.readUint32BE=ti,ne.readInt32LE=ri,ne.readUint32LE=ni,ne.writeUint32BE=ln,ne.writeInt32BE=ln,ne.writeUint32LE=hn,ne.writeInt32LE=hn,ne.readInt64BE=function eh(r,e){void 0===e&&(e=0);var t=ei(r,e),n=ei(r,e+4);return 4294967296*t+n-4294967296*(n>>31)},ne.readUint64BE=function th(r,e){return void 0===e&&(e=0),4294967296*ti(r,e)+ti(r,e+4)},ne.readInt64LE=function rh(r,e){void 0===e&&(e=0);var t=ri(r,e);return 4294967296*ri(r,e+4)+t-4294967296*(t>>31)},ne.readUint64LE=function nh(r,e){void 0===e&&(e=0);var t=ni(r,e);return 4294967296*ni(r,e+4)+t},ne.writeUint64BE=Jo,ne.writeInt64BE=Jo,ne.writeUint64LE=Xo,ne.writeInt64LE=Xo,ne.readUintBE=function ih(r,e,t){if(void 0===t&&(t=0),r%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=r/8+t-1;o>=t;o--)n+=e[o]*i,i*=256;return n},ne.readUintLE=function oh(r,e,t){if(void 0===t&&(t=0),r%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=t;o<t+r/8;o++)n+=e[o]*i,i*=256;return n},ne.writeUintBE=function sh(r,e,t,n){if(void 0===t&&(t=new Uint8Array(r/8)),void 0===n&&(n=0),r%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Go.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,o=r/8+n-1;o>=n;o--)t[o]=e/i&255,i*=256;return t},ne.writeUintLE=function ah(r,e,t,n){if(void 0===t&&(t=new Uint8Array(r/8)),void 0===n&&(n=0),r%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Go.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,o=n;o<n+r/8;o++)t[o]=e/i&255,i*=256;return t},ne.readFloat32BE=function ch(r,e){return void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(e)},ne.readFloat32LE=function uh(r,e){return void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(e,!0)},ne.readFloat64BE=function lh(r,e){return void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(e)},ne.readFloat64LE=function hh(r,e){return void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(e,!0)},ne.writeFloat32BE=function fh(r,e,t){return void 0===e&&(e=new Uint8Array(4)),void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(t,r),e},ne.writeFloat32LE=function dh(r,e,t){return void 0===e&&(e=new Uint8Array(4)),void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(t,r,!0),e},ne.writeFloat64BE=function ph(r,e,t){return void 0===e&&(e=new Uint8Array(8)),void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(t,r),e},ne.writeFloat64LE=function yh(r,e,t){return void 0===e&&(e=new Uint8Array(8)),void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(t,r,!0),e},function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const t=ne,n=bt;function i(l,f=r.defaultRandomSource){return f.randomBytes(l)}r.defaultRandomSource=new an.SystemRandomSource,r.randomBytes=i,r.randomUint32=function o(l=r.defaultRandomSource){const f=i(4,l),_=(0,t.readUint32LE)(f);return(0,n.wipe)(f),_};const s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,f=s,_=r.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let v="";const E=f.length,b=256-256%E;for(;l>0;){const L=i(Math.ceil(256*l/b),_);for(let C=0;C<L.length&&l>0;C++){const H=L[C];H<b&&(v+=f.charAt(H%E),l--)}(0,n.wipe)(L)}return v}r.randomString=a,r.randomStringForEntropy=function h(l,f=s,_=r.defaultRandomSource){return a(Math.ceil(l/(Math.log(f.length)/Math.LN2)),f,_)}}(vr);var Zo={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=ne,t=bt;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},a.prototype.update=function(h,l){if(void 0===l&&(l=h.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=h[f++],l--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,h,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=h[f++],l--;return this},a.prototype.finish=function(h){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,_=l/536870912|0,v=l<<3,E=l%128<112?128:256;this._buffer[f]=128;for(var b=f+1;b<E-8;b++)this._buffer[b]=0;e.writeUint32BE(_,this._buffer,E-8),e.writeUint32BE(v,this._buffer,E-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,E),this._finished=!0}for(b=0;b<this.digestLength/8;b++)e.writeUint32BE(this._stateHi[b],h,8*b),e.writeUint32BE(this._stateLo[b],h,8*b+4);return this},a.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(h){return this._stateHi.set(h.stateHi),this._stateLo.set(h.stateLo),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(h){t.wipe(h.stateHi),t.wipe(h.stateLo),h.buffer&&t.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},a}();r.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(a,h,l,f,_,v,E){for(var p,w,M,D,U,R,z,B,b=l[0],L=l[1],C=l[2],H=l[3],F=l[4],A=l[5],g=l[6],O=l[7],S=f[0],c=f[1],d=f[2],k=f[3],K=f[4],G=f[5],X=f[6],Z=f[7];E>=128;){for(var ee=0;ee<16;ee++)a[ee]=e.readUint32BE(_,V=8*ee+v),h[ee]=e.readUint32BE(_,V+4);for(ee=0;ee<80;ee++){var m,Ue,J=L,ce=C,T=H,N=F,x=A,u=g,W=c,de=d,be=k,ge=K,Se=G,ze=X;if(U=65535&(w=Z),R=w>>>16,z=65535&(p=O),B=p>>>16,U+=65535&(w=(K>>>14|F<<18)^(K>>>18|F<<14)^(F>>>9|K<<23)),R+=w>>>16,z+=65535&(p=(F>>>14|K<<18)^(F>>>18|K<<14)^(K>>>9|F<<23)),B+=p>>>16,U+=65535&(w=K&G^~K&X),R+=w>>>16,z+=65535&(p=F&A^~F&g),B+=p>>>16,U+=65535&(w=i[2*ee+1]),R+=w>>>16,z+=65535&(p=i[2*ee]),B+=p>>>16,R+=(w=h[ee%16])>>>16,z+=65535&(p=a[ee%16]),B+=p>>>16,z+=(R+=(U+=65535&w)>>>16)>>>16,U=65535&(w=D=65535&U|R<<16),R=w>>>16,z=65535&(p=M=65535&z|(B+=z>>>16)<<16),B=p>>>16,U+=65535&(w=(S>>>28|b<<4)^(b>>>2|S<<30)^(b>>>7|S<<25)),R+=w>>>16,z+=65535&(p=(b>>>28|S<<4)^(S>>>2|b<<30)^(S>>>7|b<<25)),B+=p>>>16,R+=(w=S&c^S&d^c&d)>>>16,z+=65535&(p=b&L^b&C^L&C),B+=p>>>16,m=65535&(z+=(R+=(U+=65535&w)>>>16)>>>16)|(B+=z>>>16)<<16,Ue=65535&U|R<<16,U=65535&(w=be),R=w>>>16,z=65535&(p=T),B=p>>>16,R+=(w=D)>>>16,z+=65535&(p=M),B+=p>>>16,L=b,C=J,H=ce,F=T=65535&(z+=(R+=(U+=65535&w)>>>16)>>>16)|(B+=z>>>16)<<16,A=N,g=x,O=u,b=m,c=S,d=W,k=de,K=be=65535&U|R<<16,G=ge,X=Se,Z=ze,S=Ue,ee%16==15)for(var V=0;V<16;V++)U=65535&(w=h[V]),R=w>>>16,z=65535&(p=a[V]),B=p>>>16,U+=65535&(w=h[(V+9)%16]),R+=w>>>16,z+=65535&(p=a[(V+9)%16]),B+=p>>>16,U+=65535&(w=((D=h[(V+1)%16])>>>1|(M=a[(V+1)%16])<<31)^(D>>>8|M<<24)^(D>>>7|M<<25)),R+=w>>>16,z+=65535&(p=(M>>>1|D<<31)^(M>>>8|D<<24)^M>>>7),B+=p>>>16,R+=(w=((D=h[(V+14)%16])>>>19|(M=a[(V+14)%16])<<13)^(M>>>29|D<<3)^(D>>>6|M<<26))>>>16,z+=65535&(p=(M>>>19|D<<13)^(D>>>29|M<<3)^M>>>6),B+=p>>>16,a[V]=65535&(z+=(R+=(U+=65535&w)>>>16)>>>16)|(B+=z>>>16)<<16,h[V]=65535&U|R<<16}U=65535&(w=S),R=w>>>16,z=65535&(p=b),B=p>>>16,R+=(w=f[0])>>>16,z+=65535&(p=l[0]),B+=p>>>16,l[0]=b=65535&(z+=(R+=(U+=65535&w)>>>16)>>>16)|(B+=z>>>16)<<16,f[0]=S=65535&U|R<<16,U=65535&(w=c),R=w>>>16,z=65535&(p=L),B=p>>>16,R+=(w=f[1])>>>16,z+=65535&(p=l[1]),B+=p>>>16,l[1]=L=65535&(z+=(R+=(U+=65535&w)>>>16)>>>16)|(B+=z>>>16)<<16,f[1]=c=65535&U|R<<16,U=65535&(w=d),R=w>>>16,z=65535&(p=C),B=p>>>16,R+=(w=f[2])>>>16,z+=65535&(p=l[2]),B+=p>>>16,l[2]=C=65535&(z+=(R+=(U+=65535&w)>>>16)>>>16)|(B+=z>>>16)<<16,f[2]=d=65535&U|R<<16,U=65535&(w=k),R=w>>>16,z=65535&(p=H),B=p>>>16,R+=(w=f[3])>>>16,z+=65535&(p=l[3]),B+=p>>>16,l[3]=H=65535&(z+=(R+=(U+=65535&w)>>>16)>>>16)|(B+=z>>>16)<<16,f[3]=k=65535&U|R<<16,U=65535&(w=K),R=w>>>16,z=65535&(p=F),B=p>>>16,R+=(w=f[4])>>>16,z+=65535&(p=l[4]),B+=p>>>16,l[4]=F=65535&(z+=(R+=(U+=65535&w)>>>16)>>>16)|(B+=z>>>16)<<16,f[4]=K=65535&U|R<<16,U=65535&(w=G),R=w>>>16,z=65535&(p=A),B=p>>>16,R+=(w=f[5])>>>16,z+=65535&(p=l[5]),B+=p>>>16,l[5]=A=65535&(z+=(R+=(U+=65535&w)>>>16)>>>16)|(B+=z>>>16)<<16,f[5]=G=65535&U|R<<16,U=65535&(w=X),R=w>>>16,z=65535&(p=g),B=p>>>16,R+=(w=f[6])>>>16,z+=65535&(p=l[6]),B+=p>>>16,l[6]=g=65535&(z+=(R+=(U+=65535&w)>>>16)>>>16)|(B+=z>>>16)<<16,f[6]=X=65535&U|R<<16,U=65535&(w=Z),R=w>>>16,z=65535&(p=O),B=p>>>16,R+=(w=f[7])>>>16,z+=65535&(p=l[7]),B+=p>>>16,l[7]=O=65535&(z+=(R+=(U+=65535&w)>>>16)>>>16)|(B+=z>>>16)<<16,f[7]=Z=65535&U|R<<16,v+=128,E-=128}return v}r.hash=function s(a){var h=new n;h.update(a);var l=h.digest();return h.clean(),l}})(Zo),function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=vr,t=Zo,n=bt;function i(T){const N=new Float64Array(16);if(T)for(let x=0;x<T.length;x++)N[x]=T[x];return N}r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32,new Uint8Array(32)[0]=9;const s=i(),a=i([1]),h=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),v=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function E(T,N){for(let x=0;x<16;x++)T[x]=0|N[x]}function b(T){let N=1;for(let x=0;x<16;x++){let u=T[x]+N+65535;N=Math.floor(u/65536),T[x]=u-65536*N}T[0]+=N-1+37*(N-1)}function L(T,N,x){const u=~(x-1);for(let m=0;m<16;m++){const $=u&(T[m]^N[m]);T[m]^=$,N[m]^=$}}function C(T,N){const x=i(),u=i();for(let m=0;m<16;m++)u[m]=N[m];b(u),b(u),b(u);for(let m=0;m<2;m++){x[0]=u[0]-65517;for(let W=1;W<15;W++)x[W]=u[W]-65535-(x[W-1]>>16&1),x[W-1]&=65535;x[15]=u[15]-32767-(x[14]>>16&1);const $=x[15]>>16&1;x[14]&=65535,L(u,x,1-$)}for(let m=0;m<16;m++)T[2*m]=255&u[m],T[2*m+1]=u[m]>>8}function H(T,N){let x=0;for(let u=0;u<32;u++)x|=T[u]^N[u];return(1&x-1>>>8)-1}function F(T,N){const x=new Uint8Array(32),u=new Uint8Array(32);return C(x,T),C(u,N),H(x,u)}function A(T){const N=new Uint8Array(32);return C(N,T),1&N[0]}function O(T,N,x){for(let u=0;u<16;u++)T[u]=N[u]+x[u]}function S(T,N,x){for(let u=0;u<16;u++)T[u]=N[u]-x[u]}function c(T,N,x){let u,m,$=0,W=0,de=0,be=0,ge=0,Se=0,ze=0,Ue=0,me=0,_e=0,pe=0,le=0,ue=0,ae=0,oe=0,re=0,he=0,ve=0,ie=0,we=0,Ee=0,Ie=0,Fe=0,Oe=0,At=0,Ct=0,Jt=0,wt=0,ar=0,Yr=0,xn=0,Be=x[0],je=x[1],Ke=x[2],He=x[3],Ve=x[4],Ce=x[5],We=x[6],Ye=x[7],Je=x[8],Xe=x[9],Ze=x[10],Ge=x[11],$e=x[12],Le=x[13],Qe=x[14],et=x[15];u=N[0],$+=u*Be,W+=u*je,de+=u*Ke,be+=u*He,ge+=u*Ve,Se+=u*Ce,ze+=u*We,Ue+=u*Ye,me+=u*Je,_e+=u*Xe,pe+=u*Ze,le+=u*Ge,ue+=u*$e,ae+=u*Le,oe+=u*Qe,re+=u*et,u=N[1],W+=u*Be,de+=u*je,be+=u*Ke,ge+=u*He,Se+=u*Ve,ze+=u*Ce,Ue+=u*We,me+=u*Ye,_e+=u*Je,pe+=u*Xe,le+=u*Ze,ue+=u*Ge,ae+=u*$e,oe+=u*Le,re+=u*Qe,he+=u*et,u=N[2],de+=u*Be,be+=u*je,ge+=u*Ke,Se+=u*He,ze+=u*Ve,Ue+=u*Ce,me+=u*We,_e+=u*Ye,pe+=u*Je,le+=u*Xe,ue+=u*Ze,ae+=u*Ge,oe+=u*$e,re+=u*Le,he+=u*Qe,ve+=u*et,u=N[3],be+=u*Be,ge+=u*je,Se+=u*Ke,ze+=u*He,Ue+=u*Ve,me+=u*Ce,_e+=u*We,pe+=u*Ye,le+=u*Je,ue+=u*Xe,ae+=u*Ze,oe+=u*Ge,re+=u*$e,he+=u*Le,ve+=u*Qe,ie+=u*et,u=N[4],ge+=u*Be,Se+=u*je,ze+=u*Ke,Ue+=u*He,me+=u*Ve,_e+=u*Ce,pe+=u*We,le+=u*Ye,ue+=u*Je,ae+=u*Xe,oe+=u*Ze,re+=u*Ge,he+=u*$e,ve+=u*Le,ie+=u*Qe,we+=u*et,u=N[5],Se+=u*Be,ze+=u*je,Ue+=u*Ke,me+=u*He,_e+=u*Ve,pe+=u*Ce,le+=u*We,ue+=u*Ye,ae+=u*Je,oe+=u*Xe,re+=u*Ze,he+=u*Ge,ve+=u*$e,ie+=u*Le,we+=u*Qe,Ee+=u*et,u=N[6],ze+=u*Be,Ue+=u*je,me+=u*Ke,_e+=u*He,pe+=u*Ve,le+=u*Ce,ue+=u*We,ae+=u*Ye,oe+=u*Je,re+=u*Xe,he+=u*Ze,ve+=u*Ge,ie+=u*$e,we+=u*Le,Ee+=u*Qe,Ie+=u*et,u=N[7],Ue+=u*Be,me+=u*je,_e+=u*Ke,pe+=u*He,le+=u*Ve,ue+=u*Ce,ae+=u*We,oe+=u*Ye,re+=u*Je,he+=u*Xe,ve+=u*Ze,ie+=u*Ge,we+=u*$e,Ee+=u*Le,Ie+=u*Qe,Fe+=u*et,u=N[8],me+=u*Be,_e+=u*je,pe+=u*Ke,le+=u*He,ue+=u*Ve,ae+=u*Ce,oe+=u*We,re+=u*Ye,he+=u*Je,ve+=u*Xe,ie+=u*Ze,we+=u*Ge,Ee+=u*$e,Ie+=u*Le,Fe+=u*Qe,Oe+=u*et,u=N[9],_e+=u*Be,pe+=u*je,le+=u*Ke,ue+=u*He,ae+=u*Ve,oe+=u*Ce,re+=u*We,he+=u*Ye,ve+=u*Je,ie+=u*Xe,we+=u*Ze,Ee+=u*Ge,Ie+=u*$e,Fe+=u*Le,Oe+=u*Qe,At+=u*et,u=N[10],pe+=u*Be,le+=u*je,ue+=u*Ke,ae+=u*He,oe+=u*Ve,re+=u*Ce,he+=u*We,ve+=u*Ye,ie+=u*Je,we+=u*Xe,Ee+=u*Ze,Ie+=u*Ge,Fe+=u*$e,Oe+=u*Le,At+=u*Qe,Ct+=u*et,u=N[11],le+=u*Be,ue+=u*je,ae+=u*Ke,oe+=u*He,re+=u*Ve,he+=u*Ce,ve+=u*We,ie+=u*Ye,we+=u*Je,Ee+=u*Xe,Ie+=u*Ze,Fe+=u*Ge,Oe+=u*$e,At+=u*Le,Ct+=u*Qe,Jt+=u*et,u=N[12],ue+=u*Be,ae+=u*je,oe+=u*Ke,re+=u*He,he+=u*Ve,ve+=u*Ce,ie+=u*We,we+=u*Ye,Ee+=u*Je,Ie+=u*Xe,Fe+=u*Ze,Oe+=u*Ge,At+=u*$e,Ct+=u*Le,Jt+=u*Qe,wt+=u*et,u=N[13],ae+=u*Be,oe+=u*je,re+=u*Ke,he+=u*He,ve+=u*Ve,ie+=u*Ce,we+=u*We,Ee+=u*Ye,Ie+=u*Je,Fe+=u*Xe,Oe+=u*Ze,At+=u*Ge,Ct+=u*$e,Jt+=u*Le,wt+=u*Qe,ar+=u*et,u=N[14],oe+=u*Be,re+=u*je,he+=u*Ke,ve+=u*He,ie+=u*Ve,we+=u*Ce,Ee+=u*We,Ie+=u*Ye,Fe+=u*Je,Oe+=u*Xe,At+=u*Ze,Ct+=u*Ge,Jt+=u*$e,wt+=u*Le,ar+=u*Qe,Yr+=u*et,u=N[15],re+=u*Be,he+=u*je,ve+=u*Ke,ie+=u*He,we+=u*Ve,Ee+=u*Ce,Ie+=u*We,Fe+=u*Ye,Oe+=u*Je,At+=u*Xe,Ct+=u*Ze,Jt+=u*Ge,wt+=u*$e,ar+=u*Le,Yr+=u*Qe,xn+=u*et,$+=38*he,W+=38*ve,de+=38*ie,be+=38*we,ge+=38*Ee,Se+=38*Ie,ze+=38*Fe,Ue+=38*Oe,me+=38*At,_e+=38*Ct,pe+=38*Jt,le+=38*wt,ue+=38*ar,ae+=38*Yr,oe+=38*xn,m=1,u=$+m+65535,m=Math.floor(u/65536),$=u-65536*m,u=W+m+65535,m=Math.floor(u/65536),W=u-65536*m,u=de+m+65535,m=Math.floor(u/65536),de=u-65536*m,u=be+m+65535,m=Math.floor(u/65536),be=u-65536*m,u=ge+m+65535,m=Math.floor(u/65536),ge=u-65536*m,u=Se+m+65535,m=Math.floor(u/65536),Se=u-65536*m,u=ze+m+65535,m=Math.floor(u/65536),ze=u-65536*m,u=Ue+m+65535,m=Math.floor(u/65536),Ue=u-65536*m,u=me+m+65535,m=Math.floor(u/65536),me=u-65536*m,u=_e+m+65535,m=Math.floor(u/65536),_e=u-65536*m,u=pe+m+65535,m=Math.floor(u/65536),pe=u-65536*m,u=le+m+65535,m=Math.floor(u/65536),le=u-65536*m,u=ue+m+65535,m=Math.floor(u/65536),ue=u-65536*m,u=ae+m+65535,m=Math.floor(u/65536),ae=u-65536*m,u=oe+m+65535,m=Math.floor(u/65536),oe=u-65536*m,u=re+m+65535,m=Math.floor(u/65536),re=u-65536*m,$+=m-1+37*(m-1),m=1,u=$+m+65535,m=Math.floor(u/65536),$=u-65536*m,u=W+m+65535,m=Math.floor(u/65536),W=u-65536*m,u=de+m+65535,m=Math.floor(u/65536),de=u-65536*m,u=be+m+65535,m=Math.floor(u/65536),be=u-65536*m,u=ge+m+65535,m=Math.floor(u/65536),ge=u-65536*m,u=Se+m+65535,m=Math.floor(u/65536),Se=u-65536*m,u=ze+m+65535,m=Math.floor(u/65536),ze=u-65536*m,u=Ue+m+65535,m=Math.floor(u/65536),Ue=u-65536*m,u=me+m+65535,m=Math.floor(u/65536),me=u-65536*m,u=_e+m+65535,m=Math.floor(u/65536),_e=u-65536*m,u=pe+m+65535,m=Math.floor(u/65536),pe=u-65536*m,u=le+m+65535,m=Math.floor(u/65536),le=u-65536*m,u=ue+m+65535,m=Math.floor(u/65536),ue=u-65536*m,u=ae+m+65535,m=Math.floor(u/65536),ae=u-65536*m,u=oe+m+65535,m=Math.floor(u/65536),oe=u-65536*m,u=re+m+65535,m=Math.floor(u/65536),re=u-65536*m,$+=m-1+37*(m-1),T[0]=$,T[1]=W,T[2]=de,T[3]=be,T[4]=ge,T[5]=Se,T[6]=ze,T[7]=Ue,T[8]=me,T[9]=_e,T[10]=pe,T[11]=le,T[12]=ue,T[13]=ae,T[14]=oe,T[15]=re}function d(T,N){c(T,N,N)}function k(T,N){const x=i();let u;for(u=0;u<16;u++)x[u]=N[u];for(u=253;u>=0;u--)d(x,x),2!==u&&4!==u&&c(x,x,N);for(u=0;u<16;u++)T[u]=x[u]}function G(T,N){const x=i(),u=i(),m=i(),$=i(),W=i(),de=i(),be=i(),ge=i(),Se=i();S(x,T[1],T[0]),S(Se,N[1],N[0]),c(x,x,Se),O(u,T[0],T[1]),O(Se,N[0],N[1]),c(u,u,Se),c(m,T[3],N[3]),c(m,m,l),c($,T[2],N[2]),O($,$,$),S(W,u,x),S(de,$,m),O(be,$,m),O(ge,u,x),c(T[0],W,de),c(T[1],ge,be),c(T[2],be,de),c(T[3],W,ge)}function X(T,N,x){for(let u=0;u<4;u++)L(T[u],N[u],x)}function Z(T,N){const x=i(),u=i(),m=i();k(m,N[2]),c(x,N[0],m),c(u,N[1],m),C(T,u),T[31]^=A(x)<<7}function p(T,N,x){E(T[0],s),E(T[1],a),E(T[2],a),E(T[3],s);for(let u=255;u>=0;--u){const m=x[u/8|0]>>(7&u)&1;X(T,N,m),G(N,T),G(T,T),X(T,N,m)}}function w(T,N){const x=[i(),i(),i(),i()];E(x[0],f),E(x[1],_),E(x[2],a),c(x[3],f,_),p(T,x,N)}function M(T){if(T.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const N=(0,t.hash)(T);N[0]&=248,N[31]&=127,N[31]|=64;const x=new Uint8Array(32),u=[i(),i(),i(),i()];w(u,N),Z(x,u);const m=new Uint8Array(64);return m.set(T),m.set(x,32),{publicKey:x,secretKey:m}}r.generateKeyPairFromSeed=M,r.generateKeyPair=function D(T){const N=(0,e.randomBytes)(32,T),x=M(N);return(0,n.wipe)(N),x},r.extractPublicKeyFromSecretKey=function U(T){if(T.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(T.subarray(32))};const R=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function z(T,N){let x,u,m,$;for(u=63;u>=32;--u){for(x=0,m=u-32,$=u-12;m<$;++m)N[m]+=x-16*N[u]*R[m-(u-32)],x=Math.floor((N[m]+128)/256),N[m]-=256*x;N[m]+=x,N[u]=0}for(x=0,m=0;m<32;m++)N[m]+=x-(N[31]>>4)*R[m],x=N[m]>>8,N[m]&=255;for(m=0;m<32;m++)N[m]-=x*R[m];for(u=0;u<32;u++)N[u+1]+=N[u]>>8,T[u]=255&N[u]}function B(T){const N=new Float64Array(64);for(let x=0;x<64;x++)N[x]=T[x];for(let x=0;x<64;x++)T[x]=0;z(T,N)}function V(T,N){const x=i(),u=i(),m=i(),$=i(),W=i(),de=i(),be=i();return E(T[2],a),function g(T,N){for(let x=0;x<16;x++)T[x]=N[2*x]+(N[2*x+1]<<8);T[15]&=32767}(T[1],N),d(m,T[1]),c($,m,h),S(m,m,T[2]),O($,T[2],$),d(W,$),d(de,W),c(be,de,W),c(x,be,m),c(x,x,$),function K(T,N){const x=i();let u;for(u=0;u<16;u++)x[u]=N[u];for(u=250;u>=0;u--)d(x,x),1!==u&&c(x,x,N);for(u=0;u<16;u++)T[u]=x[u]}(x,x),c(x,x,m),c(x,x,$),c(x,x,$),c(T[0],x,$),d(u,T[0]),c(u,u,$),F(u,m)&&c(T[0],T[0],v),d(u,T[0]),c(u,u,$),F(u,m)?-1:(A(T[0])===N[31]>>7&&S(T[0],s,T[0]),c(T[3],T[0],T[1]),0)}r.sign=function ee(T,N){const x=new Float64Array(64),u=[i(),i(),i(),i()],m=(0,t.hash)(T.subarray(0,32));m[0]&=248,m[31]&=127,m[31]|=64;const $=new Uint8Array(64);$.set(m.subarray(32),32);const W=new t.SHA512;W.update($.subarray(32)),W.update(N);const de=W.digest();W.clean(),B(de),w(u,de),Z($,u),W.reset(),W.update($.subarray(0,32)),W.update(T.subarray(32)),W.update(N);const be=W.digest();B(be);for(let ge=0;ge<32;ge++)x[ge]=de[ge];for(let ge=0;ge<32;ge++)for(let Se=0;Se<32;Se++)x[ge+Se]+=be[ge]*m[Se];return z($.subarray(32),x),$},r.verify=function te(T,N,x){const u=new Uint8Array(32),m=[i(),i(),i(),i()],$=[i(),i(),i(),i()];if(x.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(V($,T))return!1;const W=new t.SHA512;W.update(x.subarray(0,32)),W.update(T),W.update(N);const de=W.digest();return B(de),p(m,$,de),w($,x.subarray(32)),G(m,$),Z(u,m),!H(x,u)},r.convertPublicKeyToX25519=function J(T){let N=[i(),i(),i(),i()];if(V(N,T))throw new Error("Ed25519: invalid public key");let x=i(),u=i(),m=N[1];O(x,a,m),S(u,a,m),k(u,u),c(x,x,u);let $=new Uint8Array(32);return C($,x),$},r.convertSecretKeyToX25519=function ce(T){const N=(0,t.hash)(T.subarray(0,32));N[0]&=248,N[31]&=127,N[31]|=64;const x=new Uint8Array(N.subarray(0,32));return(0,n.wipe)(N),x}}(Qn);const es="base64url",wh="did",Eh="key",ts="base58btc";function rs(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function ii(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));const t=rs(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return t}var Ph=function Fh(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(255!==t[s])throw new TypeError(o+" is ambiguous");t[s]=i}var a=r.length,h=r.charAt(0),l=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function v(b){if("string"!=typeof b)throw new TypeError("Expected String");if(0===b.length)return new Uint8Array;var L=0;if(" "!==b[L]){for(var C=0,H=0;b[L]===h;)C++,L++;for(var F=(b.length-L)*l+1>>>0,A=new Uint8Array(F);b[L];){var g=t[b.charCodeAt(L)];if(255===g)return;for(var O=0,S=F-1;(0!==g||O<H)&&-1!==S;S--,O++)A[S]=(g+=a*A[S]>>>0)%256>>>0,g=g/256>>>0;if(0!==g)throw new Error("Non-zero carry");H=O,L++}if(" "!==b[L]){for(var c=F-H;c!==F&&0===A[c];)c++;for(var d=new Uint8Array(C+(F-c)),k=C;c!==F;)d[k++]=A[c++];return d}}}return{encode:function _(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===b.length)return"";for(var L=0,C=0,H=0,F=b.length;H!==F&&0===b[H];)H++,L++;for(var A=(F-H)*f+1>>>0,g=new Uint8Array(A);H!==F;){for(var O=b[H],S=0,c=A-1;(0!==O||S<C)&&-1!==c;c--,S++)g[c]=(O+=256*g[c]>>>0)%a>>>0,O=O/a>>>0;if(0!==O)throw new Error("Non-zero carry");C=S,H++}for(var d=A-C;d!==A&&0===g[d];)d++;for(var k=h.repeat(L);d<A;++d)k+=r.charAt(g[d]);return k},decodeUnsafe:v,decode:function E(b){var L=v(b);if(L)return L;throw new Error(`Non-${e} character`)}}};const ns=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};class Th{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Lh{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return is(this,e)}}class Rh{constructor(e){this.decoders=e}or(e){return is(this,e)}decode(e){const n=this.decoders[e[0]];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const is=(r,e)=>new Rh({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Uh{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Th(e,t,n),this.decoder=new Lh(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const fn=({name:r,prefix:e,encode:t,decode:n})=>new Uh(r,e,t,n),Cr=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=Ph(t,e);return fn({prefix:r,name:e,encode:n,decode:o=>ns(i(o))})},rt=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>fn({prefix:e,name:r,encode:i=>((r,e,t)=>{const n="="===e[e.length-1],i=(1<<t)-1;let o="",s=0,a=0;for(let h=0;h<r.length;++h)for(a=a<<8|r[h],s+=8;s>t;)s-=t,o+=e[i&a>>s];if(s&&(o+=e[i&a<<t-s]),n)for(;o.length*t&7;)o+="=";return o})(i,n,t),decode:i=>((r,e,t,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=r.length;for(;"="===r[o-1];)--o;const s=new Uint8Array(o*t/8|0);let a=0,h=0,l=0;for(let f=0;f<o;++f){const _=i[r[f]];if(void 0===_)throw new SyntaxError(`Non-${n} character`);h=h<<t|_,a+=t,a>=8&&(a-=8,s[l++]=255&h>>a)}if(a>=t||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return s})(i,n,t,r)}),Mh=fn({prefix:"\0",name:"identity",encode:r=>(r=>(new TextDecoder).decode(r))(r),decode:r=>(r=>(new TextEncoder).encode(r))(r)});var Dh=Object.freeze({__proto__:null,identity:Mh});const kh=rt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var zh=Object.freeze({__proto__:null,base2:kh});const Bh=rt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Kh=Object.freeze({__proto__:null,base8:Bh});const Hh=Cr({prefix:"9",name:"base10",alphabet:"0123456789"});var Vh=Object.freeze({__proto__:null,base10:Hh});const $h=rt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qh=rt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Gh=Object.freeze({__proto__:null,base16:$h,base16upper:qh});const Wh=rt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Yh=rt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Jh=rt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Xh=rt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Zh=rt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Qh=rt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ef=rt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),tf=rt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),rf=rt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var nf=Object.freeze({__proto__:null,base32:Wh,base32upper:Yh,base32pad:Jh,base32padupper:Xh,base32hex:Zh,base32hexupper:Qh,base32hexpad:ef,base32hexpadupper:tf,base32z:rf});const of=Cr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),sf=Cr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var af=Object.freeze({__proto__:null,base36:of,base36upper:sf});const cf=Cr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),uf=Cr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var lf=Object.freeze({__proto__:null,base58btc:cf,base58flickr:uf});const hf=rt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ff=rt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),df=rt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),pf=rt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var yf=Object.freeze({__proto__:null,base64:hf,base64pad:ff,base64url:df,base64urlpad:pf});const os=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),gf=os.reduce((r,e,t)=>(r[t]=e,r),[]),_f=os.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);const bf=fn({prefix:"\u{1f680}",name:"base256emoji",encode:function vf(r){return r.reduce((e,t)=>e+gf[t],"")},decode:function mf(r){const e=[];for(const t of r){const n=_f[t.codePointAt(0)];if(void 0===n)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}});var wf=Object.freeze({__proto__:null,base256emoji:bf}),Ef=function as(r,e,t){e=e||[];for(var n=t=t||0;r>=If;)e[t++]=255&r|128,r/=128;for(;-128&r;)e[t++]=255&r|128,r>>>=7;return e[t]=0|r,as.bytes=t-n+1,e},If=Math.pow(2,31);var Ff=function oi(r,n){var s,t=0,i=0,o=n=n||0,a=r.length;do{if(o>=a)throw oi.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(127&s)<<i:(127&s)*Math.pow(2,i),i+=7}while(s>=128);return oi.bytes=o-n,t};var Pf=Math.pow(2,7),Af=Math.pow(2,14),Nf=Math.pow(2,21),Tf=Math.pow(2,28),Lf=Math.pow(2,35),Rf=Math.pow(2,42),Uf=Math.pow(2,49),jf=Math.pow(2,56),Cf=Math.pow(2,63),us={encode:Ef,decode:Ff,encodingLength:function(r){return r<Pf?1:r<Af?2:r<Nf?3:r<Tf?4:r<Lf?5:r<Rf?6:r<Uf?7:r<jf?8:r<Cf?9:10}};const ls=(r,e,t=0)=>(us.encode(r,e,t),e),hs=r=>us.encodingLength(r),si=(r,e)=>{const t=e.byteLength,n=hs(r),i=n+hs(t),o=new Uint8Array(i+t);return ls(r,o,0),ls(t,o,n),o.set(e,i),new kf(r,t,e,o)};class kf{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}const fs=({name:r,code:e,encode:t})=>new zf(r,e,t);class zf{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?si(this.code,t):t.then(n=>si(this.code,n))}throw Error("Unknown type, must be binary type")}}const ds=r=>function(){var e=I(function*(t){return new Uint8Array(yield crypto.subtle.digest(r,t))});return function(t){return e.apply(this,arguments)}}(),Bf=fs({name:"sha2-256",code:18,encode:ds("SHA-256")}),Kf=fs({name:"sha2-512",code:19,encode:ds("SHA-512")});Object.freeze({__proto__:null,sha256:Bf,sha512:Kf});const ys=ns;Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:ys,digest:r=>si(0,ys(r))}}),new TextEncoder,new TextDecoder;const gs={...Dh,...zh,...Kh,...Vh,...Gh,...nf,...af,...lf,...yf,...wf};function _s(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const vs=_s("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>(new TextEncoder).encode(r.substring(1))),ai=_s("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{const e=rs((r=r.substring(1)).length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),ms={utf8:vs,"utf-8":vs,hex:gs.base16,latin1:ai,ascii:ai,binary:ai,...gs};function gt(r,e="utf8"){const t=ms[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.encoder.encode(r).substring(1):globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8")}function _t(r,e="utf8"){const t=ms[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${r}`):globalThis.Buffer.from(r,"utf8")}function dn(r){return gt(_t(jr(r),"utf8"),es)}function bs(r){const t="z"+gt(ii([_t("K36",ts),r]),ts);return[wh,Eh,t].join(":")}function qf(r){return gt(r,es)}function Gf(r){return _t([dn(r.header),dn(r.payload)].join("."),"utf8")}function Wf(r){return[dn(r.header),dn(r.payload),qf(r.signature)].join(".")}function ws(r=vr.randomBytes(32)){return Qn.generateKeyPairFromSeed(r)}function ci(){return(ci=I(function*(r,e,t,n,i=Q.fromMiliseconds(Date.now())){const o={alg:"EdDSA",typ:"JWT"},h={iss:bs(n.publicKey),sub:r,aud:e,iat:i,exp:i+t},l=Gf({header:o,payload:h});return Wf({header:o,payload:h,signature:Qn.sign(n.secretKey,l)})})).apply(this,arguments)}var ui={},pn={};Object.defineProperty(pn,"__esModule",{value:!0});var ct=ne,li=bt;function Xf(r,e,t){for(var n=1634760805,i=857760878,o=2036477234,s=1797285236,a=t[3]<<24|t[2]<<16|t[1]<<8|t[0],h=t[7]<<24|t[6]<<16|t[5]<<8|t[4],l=t[11]<<24|t[10]<<16|t[9]<<8|t[8],f=t[15]<<24|t[14]<<16|t[13]<<8|t[12],_=t[19]<<24|t[18]<<16|t[17]<<8|t[16],v=t[23]<<24|t[22]<<16|t[21]<<8|t[20],E=t[27]<<24|t[26]<<16|t[25]<<8|t[24],b=t[31]<<24|t[30]<<16|t[29]<<8|t[28],L=e[3]<<24|e[2]<<16|e[1]<<8|e[0],C=e[7]<<24|e[6]<<16|e[5]<<8|e[4],H=e[11]<<24|e[10]<<16|e[9]<<8|e[8],F=e[15]<<24|e[14]<<16|e[13]<<8|e[12],A=n,g=i,O=o,S=s,c=a,d=h,k=l,K=f,G=_,X=v,Z=E,p=b,w=L,M=C,D=H,U=F,R=0;R<20;R+=2)c=(c^=G=G+(w=(w^=A=A+c|0)>>>16|w<<16)|0)>>>20|c<<12,d=(d^=X=X+(M=(M^=g=g+d|0)>>>16|M<<16)|0)>>>20|d<<12,k=(k^=Z=Z+(D=(D^=O=O+k|0)>>>16|D<<16)|0)>>>20|k<<12,K=(K^=p=p+(U=(U^=S=S+K|0)>>>16|U<<16)|0)>>>20|K<<12,k=(k^=Z=Z+(D=(D^=O=O+k|0)>>>24|D<<8)|0)>>>25|k<<7,K=(K^=p=p+(U=(U^=S=S+K|0)>>>24|U<<8)|0)>>>25|K<<7,d=(d^=X=X+(M=(M^=g=g+d|0)>>>24|M<<8)|0)>>>25|d<<7,c=(c^=G=G+(w=(w^=A=A+c|0)>>>24|w<<8)|0)>>>25|c<<7,d=(d^=Z=Z+(U=(U^=A=A+d|0)>>>16|U<<16)|0)>>>20|d<<12,k=(k^=p=p+(w=(w^=g=g+k|0)>>>16|w<<16)|0)>>>20|k<<12,K=(K^=G=G+(M=(M^=O=O+K|0)>>>16|M<<16)|0)>>>20|K<<12,c=(c^=X=X+(D=(D^=S=S+c|0)>>>16|D<<16)|0)>>>20|c<<12,K=(K^=G=G+(M=(M^=O=O+K|0)>>>24|M<<8)|0)>>>25|K<<7,c=(c^=X=X+(D=(D^=S=S+c|0)>>>24|D<<8)|0)>>>25|c<<7,k=(k^=p=p+(w=(w^=g=g+k|0)>>>24|w<<8)|0)>>>25|k<<7,d=(d^=Z=Z+(U=(U^=A=A+d|0)>>>24|U<<8)|0)>>>25|d<<7;ct.writeUint32LE(A+n|0,r,0),ct.writeUint32LE(g+i|0,r,4),ct.writeUint32LE(O+o|0,r,8),ct.writeUint32LE(S+s|0,r,12),ct.writeUint32LE(c+a|0,r,16),ct.writeUint32LE(d+h|0,r,20),ct.writeUint32LE(k+l|0,r,24),ct.writeUint32LE(K+f|0,r,28),ct.writeUint32LE(G+_|0,r,32),ct.writeUint32LE(X+v|0,r,36),ct.writeUint32LE(Z+E|0,r,40),ct.writeUint32LE(p+b|0,r,44),ct.writeUint32LE(w+L|0,r,48),ct.writeUint32LE(M+C|0,r,52),ct.writeUint32LE(D+H|0,r,56),ct.writeUint32LE(U+F|0,r,60)}function Es(r,e,t,n,i){if(void 0===i&&(i=0),32!==r.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<t.length)throw new Error("ChaCha: destination is shorter than source");var o,s;if(0===i){if(8!==e.length&&12!==e.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");(o=new Uint8Array(16)).set(e,s=o.length-e.length)}else{if(16!==e.length)throw new Error("ChaCha nonce with counter must be 16 bytes");o=e,s=i}for(var a=new Uint8Array(64),h=0;h<t.length;h+=64){Xf(a,o,r);for(var l=h;l<h+64&&l<t.length;l++)n[l]=t[l]^a[l-h];Qf(o,0,s)}return li.wipe(a),0===i&&li.wipe(o),n}function Qf(r,e,t){for(var n=1;t--;)r[e]=255&(n=n+(255&r[e])|0),n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}pn.streamXOR=Es,pn.stream=function Zf(r,e,t,n){return void 0===n&&(n=0),li.wipe(t),Es(r,e,t,t,n)};var Ss={},$t={};function Os(r,e){if(r.length!==e.length)return 0;for(var t=0,n=0;n<r.length;n++)t|=r[n]^e[n];return 1&t-1>>>8}Object.defineProperty($t,"__esModule",{value:!0}),$t.select=function ed(r,e,t){return~(r-1)&e|r-1&t},$t.lessOrEqual=function td(r,e){return(0|r)-(0|e)-1>>>31&1},$t.compare=Os,$t.equal=function rd(r,e){return 0!==r.length&&0!==e.length&&0!==Os(r,e)},function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=$t,t=bt;r.DIGEST_LENGTH=16;var n=function(){function s(a){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var h=a[0]|a[1]<<8;this._r[0]=8191&h;var l=a[2]|a[3]<<8;this._r[1]=8191&(h>>>13|l<<3);var f=a[4]|a[5]<<8;this._r[2]=7939&(l>>>10|f<<6);var _=a[6]|a[7]<<8;this._r[3]=8191&(f>>>7|_<<9);var v=a[8]|a[9]<<8;this._r[4]=255&(_>>>4|v<<12),this._r[5]=v>>>1&8190;var E=a[10]|a[11]<<8;this._r[6]=8191&(v>>>14|E<<2);var b=a[12]|a[13]<<8;this._r[7]=8065&(E>>>11|b<<5);var L=a[14]|a[15]<<8;this._r[8]=8191&(b>>>8|L<<8),this._r[9]=L>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return s.prototype._blocks=function(a,h,l){for(var f=this._fin?0:2048,_=this._h[0],v=this._h[1],E=this._h[2],b=this._h[3],L=this._h[4],C=this._h[5],H=this._h[6],F=this._h[7],A=this._h[8],g=this._h[9],O=this._r[0],S=this._r[1],c=this._r[2],d=this._r[3],k=this._r[4],K=this._r[5],G=this._r[6],X=this._r[7],Z=this._r[8],p=this._r[9];l>=16;){var w=a[h+0]|a[h+1]<<8,M=a[h+2]|a[h+3]<<8,D=a[h+4]|a[h+5]<<8,U=a[h+6]|a[h+7]<<8,R=a[h+8]|a[h+9]<<8,z=a[h+10]|a[h+11]<<8,B=a[h+12]|a[h+13]<<8,ee=a[h+14]|a[h+15]<<8,V=0,te=V;te+=(_+=8191&w)*O,te+=(v+=8191&(w>>>13|M<<3))*(5*p),te+=(E+=8191&(M>>>10|D<<6))*(5*Z),te+=(b+=8191&(D>>>7|U<<9))*(5*X),V=(te+=(L+=8191&(U>>>4|R<<12))*(5*G))>>>13,te&=8191,te+=(C+=R>>>1&8191)*(5*K),te+=(H+=8191&(R>>>14|z<<2))*(5*k),te+=(F+=8191&(z>>>11|B<<5))*(5*d),te+=(A+=8191&(B>>>8|ee<<8))*(5*c);var J=V+=(te+=(g+=ee>>>5|f)*(5*S))>>>13;J+=_*S,J+=v*O,J+=E*(5*p),J+=b*(5*Z),V=(J+=L*(5*X))>>>13,J&=8191,J+=C*(5*G),J+=H*(5*K),J+=F*(5*k),J+=A*(5*d),V+=(J+=g*(5*c))>>>13,J&=8191;var ce=V;ce+=_*c,ce+=v*S,ce+=E*O,ce+=b*(5*p),V=(ce+=L*(5*Z))>>>13,ce&=8191,ce+=C*(5*X),ce+=H*(5*G),ce+=F*(5*K),ce+=A*(5*k);var T=V+=(ce+=g*(5*d))>>>13;T+=_*d,T+=v*c,T+=E*S,T+=b*O,V=(T+=L*(5*p))>>>13,T&=8191,T+=C*(5*Z),T+=H*(5*X),T+=F*(5*G),T+=A*(5*K);var N=V+=(T+=g*(5*k))>>>13;N+=_*k,N+=v*d,N+=E*c,N+=b*S,V=(N+=L*O)>>>13,N&=8191,N+=C*(5*p),N+=H*(5*Z),N+=F*(5*X),N+=A*(5*G);var x=V+=(N+=g*(5*K))>>>13;x+=_*K,x+=v*k,x+=E*d,x+=b*c,V=(x+=L*S)>>>13,x&=8191,x+=C*O,x+=H*(5*p),x+=F*(5*Z),x+=A*(5*X);var u=V+=(x+=g*(5*G))>>>13;u+=_*G,u+=v*K,u+=E*k,u+=b*d,V=(u+=L*c)>>>13,u&=8191,u+=C*S,u+=H*O,u+=F*(5*p),u+=A*(5*Z);var m=V+=(u+=g*(5*X))>>>13;m+=_*X,m+=v*G,m+=E*K,m+=b*k,V=(m+=L*d)>>>13,m&=8191,m+=C*c,m+=H*S,m+=F*O,m+=A*(5*p);var $=V+=(m+=g*(5*Z))>>>13;$+=_*Z,$+=v*X,$+=E*G,$+=b*K,V=($+=L*k)>>>13,$&=8191,$+=C*d,$+=H*c,$+=F*S,$+=A*O;var W=V+=($+=g*(5*p))>>>13;W+=_*p,W+=v*Z,W+=E*X,W+=b*G,V=(W+=L*K)>>>13,W&=8191,W+=C*k,W+=H*d,W+=F*c,W+=A*S,_=te=8191&(V=(V=((V+=(W+=g*O)>>>13)<<2)+V|0)+(te&=8191)|0),v=J+=V>>>=13,E=ce&=8191,b=T&=8191,L=N&=8191,C=x&=8191,H=u&=8191,F=m&=8191,A=$&=8191,g=W&=8191,h+=16,l-=16}this._h[0]=_,this._h[1]=v,this._h[2]=E,this._h[3]=b,this._h[4]=L,this._h[5]=C,this._h[6]=H,this._h[7]=F,this._h[8]=A,this._h[9]=g},s.prototype.finish=function(a,h){void 0===h&&(h=0);var f,_,v,E,l=new Uint16Array(10);if(this._leftover){for(E=this._leftover,this._buffer[E++]=1;E<16;E++)this._buffer[E]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,E=2;E<10;E++)this._h[E]+=f,f=this._h[E]>>>13,this._h[E]&=8191;for(this._h[0]+=5*f,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,l[0]=this._h[0]+5,f=l[0]>>>13,l[0]&=8191,E=1;E<10;E++)l[E]=this._h[E]+f,f=l[E]>>>13,l[E]&=8191;for(l[9]-=8192,_=(1^f)-1,E=0;E<10;E++)l[E]&=_;for(_=~_,E=0;E<10;E++)this._h[E]=this._h[E]&_|l[E];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),this._h[0]=65535&(v=this._h[0]+this._pad[0]),E=1;E<8;E++)this._h[E]=65535&(v=(this._h[E]+this._pad[E]|0)+(v>>>16)|0);return a[h+0]=this._h[0]>>>0,a[h+1]=this._h[0]>>>8,a[h+2]=this._h[1]>>>0,a[h+3]=this._h[1]>>>8,a[h+4]=this._h[2]>>>0,a[h+5]=this._h[2]>>>8,a[h+6]=this._h[3]>>>0,a[h+7]=this._h[3]>>>8,a[h+8]=this._h[4]>>>0,a[h+9]=this._h[4]>>>8,a[h+10]=this._h[5]>>>0,a[h+11]=this._h[5]>>>8,a[h+12]=this._h[6]>>>0,a[h+13]=this._h[6]>>>8,a[h+14]=this._h[7]>>>0,a[h+15]=this._h[7]>>>8,this._finished=!0,this},s.prototype.update=function(a){var f,h=0,l=a.length;if(this._leftover){(f=16-this._leftover)>l&&(f=l);for(var _=0;_<f;_++)this._buffer[this._leftover+_]=a[h+_];if(l-=f,h+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(this._blocks(a,h,f=l-l%16),h+=f,l-=f),l){for(_=0;_<l;_++)this._buffer[this._leftover+_]=a[h+_];this._leftover+=l}return this},s.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},s.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},s}();r.Poly1305=n,r.oneTimeAuth=function i(s,a){var h=new n(s);h.update(a);var l=h.digest();return h.clean(),l},r.equal=function o(s,a){return s.length===r.DIGEST_LENGTH&&a.length===r.DIGEST_LENGTH&&e.equal(s,a)}}(Ss),function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=pn,t=Ss,n=bt,i=ne,o=$t;r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var s=new Uint8Array(16),a=function(){function h(l){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,l.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return h.prototype.seal=function(l,f,_,v){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var E=new Uint8Array(16);E.set(l,E.length-l.length);var b=new Uint8Array(32);e.stream(this._key,E,b,4);var C,L=f.length+this.tagLength;if(v){if(v.length!==L)throw new Error("ChaCha20Poly1305: incorrect destination length");C=v}else C=new Uint8Array(L);return e.streamXOR(this._key,E,f,C,4),this._authenticate(C.subarray(C.length-this.tagLength,C.length),b,C.subarray(0,C.length-this.tagLength),_),n.wipe(E),C},h.prototype.open=function(l,f,_,v){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(f.length<this.tagLength)return null;var E=new Uint8Array(16);E.set(l,E.length-l.length);var b=new Uint8Array(32);e.stream(this._key,E,b,4);var L=new Uint8Array(this.tagLength);if(this._authenticate(L,b,f.subarray(0,f.length-this.tagLength),_),!o.equal(L,f.subarray(f.length-this.tagLength,f.length)))return null;var H,C=f.length-this.tagLength;if(v){if(v.length!==C)throw new Error("ChaCha20Poly1305: incorrect destination length");H=v}else H=new Uint8Array(C);return e.streamXOR(this._key,E,f.subarray(0,f.length-this.tagLength),H,4),n.wipe(E),H},h.prototype.clean=function(){return n.wipe(this._key),this},h.prototype._authenticate=function(l,f,_,v){var E=new t.Poly1305(f);v&&(E.update(v),v.length%16>0&&E.update(s.subarray(v.length%16))),E.update(_),_.length%16>0&&E.update(s.subarray(_.length%16));var b=new Uint8Array(8);v&&i.writeUint64LE(v.length,b),E.update(b),i.writeUint64LE(_.length,b),E.update(b);for(var L=E.digest(),C=0;C<L.length;C++)l[C]=L[C];E.clean(),n.wipe(L),n.wipe(b)},h}();r.ChaCha20Poly1305=a}(ui);var Is={},Mr={},hi={};Object.defineProperty(hi,"__esModule",{value:!0}),hi.isSerializableHash=function nd(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"},Object.defineProperty(Mr,"__esModule",{value:!0});var Lt=hi,id=$t,od=bt,Fs=function(){function r(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(n).clean():n.set(t);for(var i=0;i<n.length;i++)n[i]^=54;for(this._inner.update(n),i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Lt.isSerializableHash(this._inner)&&Lt.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),od.wipe(n)}return r.prototype.reset=function(){if(!Lt.isSerializableHash(this._inner)||!Lt.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){Lt.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Lt.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(e){return this._inner.update(e),this},r.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(!Lt.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(e){if(!Lt.isSerializableHash(this._inner)||!Lt.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(e){if(!Lt.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},r}();Mr.HMAC=Fs,Mr.hmac=function sd(r,e,t){var n=new Fs(r,e);n.update(t);var i=n.digest();return n.clean(),i},Mr.equal=id.equal,Object.defineProperty(Is,"__esModule",{value:!0});var xs=Mr,Ps=bt,ad=function(){function r(e,t,n,i){void 0===n&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var o=xs.hmac(this._hash,n,t);this._hmac=new xs.HMAC(e,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[n]=this._buffer[this._bufpos++];return t},r.prototype.clean=function(){this._hmac.clean(),Ps.wipe(this._buffer),Ps.wipe(this._counter),this._bufpos=0},r}(),cd=Is.HKDF=ad,yn={};!function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=ne,t=bt;r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},a.prototype.update=function(h,l){if(void 0===l&&(l=h.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=h[f++],l--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=o(this._temp,this._state,h,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=h[f++],l--;return this},a.prototype.finish=function(h){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,_=l/536870912|0,v=l<<3,E=l%64<56?64:128;this._buffer[f]=128;for(var b=f+1;b<E-8;b++)this._buffer[b]=0;e.writeUint32BE(_,this._buffer,E-8),e.writeUint32BE(v,this._buffer,E-4),o(this._temp,this._state,this._buffer,0,E),this._finished=!0}for(b=0;b<this.digestLength/4;b++)e.writeUint32BE(this._state[b],h,4*b);return this},a.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(h){return this._state.set(h.state),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(h){t.wipe(h.state),h.buffer&&t.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},a}();r.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(a,h,l,f,_){for(;_>=64;){for(var v=h[0],E=h[1],b=h[2],L=h[3],C=h[4],H=h[5],F=h[6],A=h[7],g=0;g<16;g++)a[g]=e.readUint32BE(l,f+4*g);for(g=16;g<64;g++){var S=a[g-2];a[g]=((c=(S>>>17|S<<15)^(S>>>19|S<<13)^S>>>10)+a[g-7]|0)+((d=((S=a[g-15])>>>7|S<<25)^(S>>>18|S<<14)^S>>>3)+a[g-16]|0)}for(g=0;g<64;g++){var c=(((C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7))+(C&H^~C&F)|0)+(A+(i[g]+a[g]|0)|0)|0,d=((v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10))+(v&E^v&b^E&b)|0;A=F,F=H,H=C,C=L+c|0,L=b,b=E,E=v,v=c+d|0}h[0]+=v,h[1]+=E,h[2]+=b,h[3]+=L,h[4]+=C,h[5]+=H,h[6]+=F,h[7]+=A,f+=64,_-=64}return f}r.hash=function s(a){var h=new n;h.update(a);var l=h.digest();return h.clean(),l}}(yn);var fi={};!function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=vr,t=bt;function n(g){const O=new Float64Array(16);if(g)for(let S=0;S<g.length;S++)O[S]=g[S];return O}r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;const i=new Uint8Array(32);i[0]=9;const o=n([56129,1]);function s(g){let O=1;for(let S=0;S<16;S++){let c=g[S]+O+65535;O=Math.floor(c/65536),g[S]=c-65536*O}g[0]+=O-1+37*(O-1)}function a(g,O,S){const c=~(S-1);for(let d=0;d<16;d++){const k=c&(g[d]^O[d]);g[d]^=k,O[d]^=k}}function f(g,O,S){for(let c=0;c<16;c++)g[c]=O[c]+S[c]}function _(g,O,S){for(let c=0;c<16;c++)g[c]=O[c]-S[c]}function v(g,O,S){let c,d,k=0,K=0,G=0,X=0,Z=0,p=0,w=0,M=0,D=0,U=0,R=0,z=0,B=0,ee=0,V=0,te=0,J=0,ce=0,T=0,N=0,x=0,u=0,m=0,$=0,W=0,de=0,be=0,ge=0,Se=0,ze=0,Ue=0,me=S[0],_e=S[1],pe=S[2],le=S[3],ue=S[4],ae=S[5],oe=S[6],re=S[7],he=S[8],ve=S[9],ie=S[10],we=S[11],Ee=S[12],Ie=S[13],Fe=S[14],Oe=S[15];c=O[0],k+=c*me,K+=c*_e,G+=c*pe,X+=c*le,Z+=c*ue,p+=c*ae,w+=c*oe,M+=c*re,D+=c*he,U+=c*ve,R+=c*ie,z+=c*we,B+=c*Ee,ee+=c*Ie,V+=c*Fe,te+=c*Oe,c=O[1],K+=c*me,G+=c*_e,X+=c*pe,Z+=c*le,p+=c*ue,w+=c*ae,M+=c*oe,D+=c*re,U+=c*he,R+=c*ve,z+=c*ie,B+=c*we,ee+=c*Ee,V+=c*Ie,te+=c*Fe,J+=c*Oe,c=O[2],G+=c*me,X+=c*_e,Z+=c*pe,p+=c*le,w+=c*ue,M+=c*ae,D+=c*oe,U+=c*re,R+=c*he,z+=c*ve,B+=c*ie,ee+=c*we,V+=c*Ee,te+=c*Ie,J+=c*Fe,ce+=c*Oe,c=O[3],X+=c*me,Z+=c*_e,p+=c*pe,w+=c*le,M+=c*ue,D+=c*ae,U+=c*oe,R+=c*re,z+=c*he,B+=c*ve,ee+=c*ie,V+=c*we,te+=c*Ee,J+=c*Ie,ce+=c*Fe,T+=c*Oe,c=O[4],Z+=c*me,p+=c*_e,w+=c*pe,M+=c*le,D+=c*ue,U+=c*ae,R+=c*oe,z+=c*re,B+=c*he,ee+=c*ve,V+=c*ie,te+=c*we,J+=c*Ee,ce+=c*Ie,T+=c*Fe,N+=c*Oe,c=O[5],p+=c*me,w+=c*_e,M+=c*pe,D+=c*le,U+=c*ue,R+=c*ae,z+=c*oe,B+=c*re,ee+=c*he,V+=c*ve,te+=c*ie,J+=c*we,ce+=c*Ee,T+=c*Ie,N+=c*Fe,x+=c*Oe,c=O[6],w+=c*me,M+=c*_e,D+=c*pe,U+=c*le,R+=c*ue,z+=c*ae,B+=c*oe,ee+=c*re,V+=c*he,te+=c*ve,J+=c*ie,ce+=c*we,T+=c*Ee,N+=c*Ie,x+=c*Fe,u+=c*Oe,c=O[7],M+=c*me,D+=c*_e,U+=c*pe,R+=c*le,z+=c*ue,B+=c*ae,ee+=c*oe,V+=c*re,te+=c*he,J+=c*ve,ce+=c*ie,T+=c*we,N+=c*Ee,x+=c*Ie,u+=c*Fe,m+=c*Oe,c=O[8],D+=c*me,U+=c*_e,R+=c*pe,z+=c*le,B+=c*ue,ee+=c*ae,V+=c*oe,te+=c*re,J+=c*he,ce+=c*ve,T+=c*ie,N+=c*we,x+=c*Ee,u+=c*Ie,m+=c*Fe,$+=c*Oe,c=O[9],U+=c*me,R+=c*_e,z+=c*pe,B+=c*le,ee+=c*ue,V+=c*ae,te+=c*oe,J+=c*re,ce+=c*he,T+=c*ve,N+=c*ie,x+=c*we,u+=c*Ee,m+=c*Ie,$+=c*Fe,W+=c*Oe,c=O[10],R+=c*me,z+=c*_e,B+=c*pe,ee+=c*le,V+=c*ue,te+=c*ae,J+=c*oe,ce+=c*re,T+=c*he,N+=c*ve,x+=c*ie,u+=c*we,m+=c*Ee,$+=c*Ie,W+=c*Fe,de+=c*Oe,c=O[11],z+=c*me,B+=c*_e,ee+=c*pe,V+=c*le,te+=c*ue,J+=c*ae,ce+=c*oe,T+=c*re,N+=c*he,x+=c*ve,u+=c*ie,m+=c*we,$+=c*Ee,W+=c*Ie,de+=c*Fe,be+=c*Oe,c=O[12],B+=c*me,ee+=c*_e,V+=c*pe,te+=c*le,J+=c*ue,ce+=c*ae,T+=c*oe,N+=c*re,x+=c*he,u+=c*ve,m+=c*ie,$+=c*we,W+=c*Ee,de+=c*Ie,be+=c*Fe,ge+=c*Oe,c=O[13],ee+=c*me,V+=c*_e,te+=c*pe,J+=c*le,ce+=c*ue,T+=c*ae,N+=c*oe,x+=c*re,u+=c*he,m+=c*ve,$+=c*ie,W+=c*we,de+=c*Ee,be+=c*Ie,ge+=c*Fe,Se+=c*Oe,c=O[14],V+=c*me,te+=c*_e,J+=c*pe,ce+=c*le,T+=c*ue,N+=c*ae,x+=c*oe,u+=c*re,m+=c*he,$+=c*ve,W+=c*ie,de+=c*we,be+=c*Ee,ge+=c*Ie,Se+=c*Fe,ze+=c*Oe,c=O[15],te+=c*me,J+=c*_e,ce+=c*pe,T+=c*le,N+=c*ue,x+=c*ae,u+=c*oe,m+=c*re,$+=c*he,W+=c*ve,de+=c*ie,be+=c*we,ge+=c*Ee,Se+=c*Ie,ze+=c*Fe,Ue+=c*Oe,k+=38*J,K+=38*ce,G+=38*T,X+=38*N,Z+=38*x,p+=38*u,w+=38*m,M+=38*$,D+=38*W,U+=38*de,R+=38*be,z+=38*ge,B+=38*Se,ee+=38*ze,V+=38*Ue,d=1,c=k+d+65535,d=Math.floor(c/65536),k=c-65536*d,c=K+d+65535,d=Math.floor(c/65536),K=c-65536*d,c=G+d+65535,d=Math.floor(c/65536),G=c-65536*d,c=X+d+65535,d=Math.floor(c/65536),X=c-65536*d,c=Z+d+65535,d=Math.floor(c/65536),Z=c-65536*d,c=p+d+65535,d=Math.floor(c/65536),p=c-65536*d,c=w+d+65535,d=Math.floor(c/65536),w=c-65536*d,c=M+d+65535,d=Math.floor(c/65536),M=c-65536*d,c=D+d+65535,d=Math.floor(c/65536),D=c-65536*d,c=U+d+65535,d=Math.floor(c/65536),U=c-65536*d,c=R+d+65535,d=Math.floor(c/65536),R=c-65536*d,c=z+d+65535,d=Math.floor(c/65536),z=c-65536*d,c=B+d+65535,d=Math.floor(c/65536),B=c-65536*d,c=ee+d+65535,d=Math.floor(c/65536),ee=c-65536*d,c=V+d+65535,d=Math.floor(c/65536),V=c-65536*d,c=te+d+65535,d=Math.floor(c/65536),te=c-65536*d,k+=d-1+37*(d-1),d=1,c=k+d+65535,d=Math.floor(c/65536),k=c-65536*d,c=K+d+65535,d=Math.floor(c/65536),K=c-65536*d,c=G+d+65535,d=Math.floor(c/65536),G=c-65536*d,c=X+d+65535,d=Math.floor(c/65536),X=c-65536*d,c=Z+d+65535,d=Math.floor(c/65536),Z=c-65536*d,c=p+d+65535,d=Math.floor(c/65536),p=c-65536*d,c=w+d+65535,d=Math.floor(c/65536),w=c-65536*d,c=M+d+65535,d=Math.floor(c/65536),M=c-65536*d,c=D+d+65535,d=Math.floor(c/65536),D=c-65536*d,c=U+d+65535,d=Math.floor(c/65536),U=c-65536*d,c=R+d+65535,d=Math.floor(c/65536),R=c-65536*d,c=z+d+65535,d=Math.floor(c/65536),z=c-65536*d,c=B+d+65535,d=Math.floor(c/65536),B=c-65536*d,c=ee+d+65535,d=Math.floor(c/65536),ee=c-65536*d,c=V+d+65535,d=Math.floor(c/65536),V=c-65536*d,c=te+d+65535,d=Math.floor(c/65536),te=c-65536*d,k+=d-1+37*(d-1),g[0]=k,g[1]=K,g[2]=G,g[3]=X,g[4]=Z,g[5]=p,g[6]=w,g[7]=M,g[8]=D,g[9]=U,g[10]=R,g[11]=z,g[12]=B,g[13]=ee,g[14]=V,g[15]=te}function E(g,O){v(g,O,O)}function L(g,O){const S=new Uint8Array(32),c=new Float64Array(80),d=n(),k=n(),K=n(),G=n(),X=n(),Z=n();for(let D=0;D<31;D++)S[D]=g[D];S[31]=127&g[31]|64,S[0]&=248,function l(g,O){for(let S=0;S<16;S++)g[S]=O[2*S]+(O[2*S+1]<<8);g[15]&=32767}(c,O);for(let D=0;D<16;D++)k[D]=c[D];d[0]=G[0]=1;for(let D=254;D>=0;--D){const U=S[D>>>3]>>>(7&D)&1;a(d,k,U),a(K,G,U),f(X,d,K),_(d,d,K),f(K,k,G),_(k,k,G),E(G,X),E(Z,d),v(d,K,d),v(K,k,X),f(X,d,K),_(d,d,K),E(k,d),_(K,G,Z),v(d,K,o),f(d,d,G),v(K,K,d),v(d,G,Z),v(G,k,c),E(k,X),a(d,k,U),a(K,G,U)}for(let D=0;D<16;D++)c[D+16]=d[D],c[D+32]=K[D],c[D+48]=k[D],c[D+64]=G[D];const p=c.subarray(32),w=c.subarray(16);(function b(g,O){const S=n();for(let c=0;c<16;c++)S[c]=O[c];for(let c=253;c>=0;c--)E(S,S),2!==c&&4!==c&&v(S,S,O);for(let c=0;c<16;c++)g[c]=S[c]})(p,p),v(w,w,p);const M=new Uint8Array(32);return function h(g,O){const S=n(),c=n();for(let d=0;d<16;d++)c[d]=O[d];s(c),s(c),s(c);for(let d=0;d<2;d++){S[0]=c[0]-65517;for(let K=1;K<15;K++)S[K]=c[K]-65535-(S[K-1]>>16&1),S[K-1]&=65535;S[15]=c[15]-32767-(S[14]>>16&1);const k=S[15]>>16&1;S[14]&=65535,a(c,S,1-k)}for(let d=0;d<16;d++)g[2*d]=255&c[d],g[2*d+1]=c[d]>>8}(M,w),M}function C(g){return L(g,i)}function H(g){if(g.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const O=new Uint8Array(g);return{publicKey:C(O),secretKey:O}}r.scalarMult=L,r.scalarMultBase=C,r.generateKeyPairFromSeed=H,r.generateKeyPair=function F(g){const O=(0,e.randomBytes)(32,g),S=H(O);return(0,t.wipe)(O),S},r.sharedKey=function A(g,O,S=!1){if(g.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(O.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=L(g,O);if(S){let d=0;for(let k=0;k<c.length;k++)d|=c[k];if(0===d)throw new Error("X25519: invalid shared key")}return c}}(fi);var As=function(r,e,t){if(t||2===arguments.length)for(var o,n=0,i=e.length;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},ud=function r(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},ld=function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},hd=function r(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"},fd=function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},dd=function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},yd=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,gd=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Ts=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function _d(r){return r?Ls(r):typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product?new dd:typeof navigator<"u"?Ls(navigator.userAgent):function bd(){return typeof process<"u"&&process.version?new ld(process.version.slice(1)):null}()}function Ls(r){var e=function vd(r){return""!==r&&gd.reduce(function(e,t){var n=t[0];if(e)return e;var o=t[1].exec(r);return!!o&&[n,o]},!1)}(r);if(!e)return null;var t=e[0],n=e[1];if("searchbot"===t)return new fd;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=As(As([],i,!0),function wd(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}(3-i.length),!0)):i=[];var o=i.join("."),s=function md(r){for(var e=0,t=Ts.length;e<t;e++){var n=Ts[e],i=n[0];if(n[1].exec(r))return i}return null}(r),a=yd.exec(r);return a&&a[1]?new hd(t,o,s,a[1]):new ud(t,o,s)}var Ne={};function ir(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}function mr(r){const e=ir(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.getLocalStorage=Ne.getLocalStorageOrThrow=Ne.getCrypto=Ne.getCryptoOrThrow=Us=Ne.getLocation=Ne.getLocationOrThrow=di=Ne.getNavigator=Ne.getNavigatorOrThrow=Rs=Ne.getDocument=Ne.getDocumentOrThrow=Ne.getFromWindowOrThrow=Ne.getFromWindow=void 0,Ne.getFromWindow=ir,Ne.getFromWindowOrThrow=mr,Ne.getDocumentOrThrow=function Ed(){return mr("document")};var Rs=Ne.getDocument=function Sd(){return ir("document")};Ne.getNavigatorOrThrow=function Od(){return mr("navigator")};var di=Ne.getNavigator=function Id(){return ir("navigator")};Ne.getLocationOrThrow=function Fd(){return mr("location")};var Us=Ne.getLocation=function xd(){return ir("location")};Ne.getCryptoOrThrow=function Pd(){return mr("crypto")},Ne.getCrypto=function Ad(){return ir("crypto")},Ne.getLocalStorageOrThrow=function Nd(){return mr("localStorage")},Ne.getLocalStorage=function Td(){return ir("localStorage")};var pi={};Object.defineProperty(pi,"__esModule",{value:!0});var js=pi.getWindowMetadata=void 0;const Cs=Ne;js=pi.getWindowMetadata=function Ld(){let r,e;try{r=Cs.getDocumentOrThrow(),e=Cs.getLocationOrThrow()}catch{return null}function n(...f){const _=r.getElementsByTagName("meta");for(let v=0;v<_.length;v++){const E=_[v],b=["itemprop","property","name"].map(L=>E.getAttribute(L)).filter(L=>!!L&&f.includes(L));if(b.length&&b){const L=E.getAttribute("content");if(L)return L}}return""}const s=function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=r.title),f}();return{description:function o(){return n("description","og:description","twitter:description","keywords")}(),url:e.origin,icons:function t(){const f=r.getElementsByTagName("link"),_=[];for(let v=0;v<f.length;v++){const E=f[v],b=E.getAttribute("rel");if(b&&b.toLowerCase().indexOf("icon")>-1){const L=E.getAttribute("href");if(L)if(-1===L.toLowerCase().indexOf("https:")&&-1===L.toLowerCase().indexOf("http:")&&0!==L.indexOf("//")){let C=e.protocol+"//"+e.host;if(0===L.indexOf("/"))C+=L;else{const H=e.pathname.split("/");H.pop(),C+=H.join("/")+"/"+L}_.push(C)}else 0===L.indexOf("//")?_.push(e.protocol+L):_.push(L)}}return _}(),name:s}};var Dr={},Rd=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Ms="%[a-f0-9]{2}",Ds=new RegExp("("+Ms+")|([^%]+?)","gi"),ks=new RegExp("("+Ms+")+","gi");function yi(r,e){try{return[decodeURIComponent(r.join(""))]}catch{}if(1===r.length)return r;var t=r.slice(0,e=e||1),n=r.slice(e);return Array.prototype.concat.call([],yi(t),yi(n))}function Ud(r){try{return decodeURIComponent(r)}catch{for(var e=r.match(Ds)||[],t=1;t<e.length;t++)e=(r=yi(e,t).join("")).match(Ds)||[];return r}}var Cd=function(r){if("string"!=typeof r)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return function jd(r){for(var e={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},t=ks.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var n=Ud(t[0]);n!==t[0]&&(e[t[0]]=n)}t=ks.exec(r)}e["%C2"]="\ufffd";for(var i=Object.keys(e),o=0;o<i.length;o++){var s=i[o];r=r.replace(new RegExp(s,"g"),e[s])}return r}(r)}},Md=(r,e)=>{if("string"!=typeof r||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[r];const t=r.indexOf(e);return-1===t?[r]:[r.slice(0,t),r.slice(t+e.length)]},Dd=function(r,e){for(var t={},n=Object.keys(r),i=Array.isArray(e),o=0;o<n.length;o++){var s=n[o],a=r[s];(i?-1!==e.indexOf(s):e(s,a,r))&&(t[s]=a)}return t};!function(r){const e=Rd,t=Cd,n=Md,i=Dd,s=Symbol("encodeFragmentIdentifier");function l(F){if("string"!=typeof F||1!==F.length)throw new TypeError("arrayFormatSeparator must be single character string")}function f(F,A){return A.encode?A.strict?e(F):encodeURIComponent(F):F}function _(F,A){return A.decode?t(F):F}function v(F){return Array.isArray(F)?F.sort():"object"==typeof F?v(Object.keys(F)).sort((A,g)=>Number(A)-Number(g)).map(A=>F[A]):F}function E(F){const A=F.indexOf("#");return-1!==A&&(F=F.slice(0,A)),F}function L(F){const A=(F=E(F)).indexOf("?");return-1===A?"":F.slice(A+1)}function C(F,A){return A.parseNumbers&&!Number.isNaN(Number(F))&&"string"==typeof F&&""!==F.trim()?F=Number(F):A.parseBooleans&&null!==F&&("true"===F.toLowerCase()||"false"===F.toLowerCase())&&(F="true"===F.toLowerCase()),F}function H(F,A){l((A=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},A)).arrayFormatSeparator);const g=function h(F){let A;switch(F.arrayFormat){case"index":return(g,O,S)=>{A=/\[(\d*)\]$/.exec(g),g=g.replace(/\[\d*\]$/,""),A?(void 0===S[g]&&(S[g]={}),S[g][A[1]]=O):S[g]=O};case"bracket":return(g,O,S)=>{A=/(\[\])$/.exec(g),S[g=g.replace(/\[\]$/,"")]=A?void 0!==S[g]?[].concat(S[g],O):[O]:O};case"colon-list-separator":return(g,O,S)=>{A=/(:list)$/.exec(g),S[g=g.replace(/:list$/,"")]=A?void 0!==S[g]?[].concat(S[g],O):[O]:O};case"comma":case"separator":return(g,O,S)=>{const c="string"==typeof O&&O.includes(F.arrayFormatSeparator),d="string"==typeof O&&!c&&_(O,F).includes(F.arrayFormatSeparator);O=d?_(O,F):O;const k=c||d?O.split(F.arrayFormatSeparator).map(K=>_(K,F)):null===O?O:_(O,F);S[g]=k};case"bracket-separator":return(g,O,S)=>{const c=/(\[\])$/.test(g);if(g=g.replace(/\[\]$/,""),!c)return void(S[g]=O&&_(O,F));const d=null===O?[]:O.split(F.arrayFormatSeparator).map(k=>_(k,F));S[g]=void 0!==S[g]?[].concat(S[g],d):d};default:return(g,O,S)=>{S[g]=void 0!==S[g]?[].concat(S[g],O):O}}}(A),O=Object.create(null);if("string"!=typeof F||!(F=F.trim().replace(/^[?#&]/,"")))return O;for(const S of F.split("&")){if(""===S)continue;let[c,d]=n(A.decode?S.replace(/\+/g," "):S,"=");d=void 0===d?null:["comma","separator","bracket-separator"].includes(A.arrayFormat)?d:_(d,A),g(_(c,A),d,O)}for(const S of Object.keys(O)){const c=O[S];if("object"==typeof c&&null!==c)for(const d of Object.keys(c))c[d]=C(c[d],A);else O[S]=C(c,A)}return!1===A.sort?O:(!0===A.sort?Object.keys(O).sort():Object.keys(O).sort(A.sort)).reduce((S,c)=>{const d=O[c];return S[c]=Boolean(d)&&"object"==typeof d&&!Array.isArray(d)?v(d):d,S},Object.create(null))}r.extract=L,r.parse=H,r.stringify=(F,A)=>{if(!F)return"";l((A=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},A)).arrayFormatSeparator);const g=d=>A.skipNull&&(F=>null==F)(F[d])||A.skipEmptyString&&""===F[d],O=function a(F){switch(F.arrayFormat){case"index":return A=>(g,O)=>{const S=g.length;return void 0===O||F.skipNull&&null===O||F.skipEmptyString&&""===O?g:null===O?[...g,[f(A,F),"[",S,"]"].join("")]:[...g,[f(A,F),"[",f(S,F),"]=",f(O,F)].join("")]};case"bracket":return A=>(g,O)=>void 0===O||F.skipNull&&null===O||F.skipEmptyString&&""===O?g:null===O?[...g,[f(A,F),"[]"].join("")]:[...g,[f(A,F),"[]=",f(O,F)].join("")];case"colon-list-separator":return A=>(g,O)=>void 0===O||F.skipNull&&null===O||F.skipEmptyString&&""===O?g:null===O?[...g,[f(A,F),":list="].join("")]:[...g,[f(A,F),":list=",f(O,F)].join("")];case"comma":case"separator":case"bracket-separator":{const A="bracket-separator"===F.arrayFormat?"[]=":"=";return g=>(O,S)=>void 0===S||F.skipNull&&null===S||F.skipEmptyString&&""===S?O:(S=null===S?"":S,0===O.length?[[f(g,F),A,f(S,F)].join("")]:[[O,f(S,F)].join(F.arrayFormatSeparator)])}default:return A=>(g,O)=>void 0===O||F.skipNull&&null===O||F.skipEmptyString&&""===O?g:null===O?[...g,f(A,F)]:[...g,[f(A,F),"=",f(O,F)].join("")]}}(A),S={};for(const d of Object.keys(F))g(d)||(S[d]=F[d]);const c=Object.keys(S);return!1!==A.sort&&c.sort(A.sort),c.map(d=>{const k=F[d];return void 0===k?"":null===k?f(d,A):Array.isArray(k)?0===k.length&&"bracket-separator"===A.arrayFormat?f(d,A)+"[]":k.reduce(O(d),[]).join("&"):f(d,A)+"="+f(k,A)}).filter(d=>d.length>0).join("&")},r.parseUrl=(F,A)=>{A=Object.assign({decode:!0},A);const[g,O]=n(F,"#");return Object.assign({url:g.split("?")[0]||"",query:H(L(F),A)},A&&A.parseFragmentIdentifier&&O?{fragmentIdentifier:_(O,A)}:{})},r.stringifyUrl=(F,A)=>{A=Object.assign({encode:!0,strict:!0,[s]:!0},A);const g=E(F.url).split("?")[0]||"",O=r.extract(F.url),S=r.parse(O,{sort:!1}),c=Object.assign(S,F.query);let d=r.stringify(c,A);d&&(d=`?${d}`);let k=function b(F){let A="";const g=F.indexOf("#");return-1!==g&&(A=F.slice(g)),A}(F.url);return F.fragmentIdentifier&&(k=`#${A[s]?f(F.fragmentIdentifier,A):F.fragmentIdentifier}`),`${g}${d}${k}`},r.pick=(F,A,g)=>{g=Object.assign({parseFragmentIdentifier:!0,[s]:!1},g);const{url:O,query:S,fragmentIdentifier:c}=r.parseUrl(F,g);return r.stringifyUrl({url:O,query:i(S,A),fragmentIdentifier:c},g)},r.exclude=(F,A,g)=>{const O=Array.isArray(A)?S=>!A.includes(S):(S,c)=>!A(S,c);return r.pick(F,O,g)}}(Dr);const kd={waku:{publish:"waku_publish",subscribe:"waku_subscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe"},irn:{publish:"irn_publish",subscribe:"irn_subscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe"},iridium:{publish:"iridium_publish",subscribe:"iridium_subscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe"}},vt="base16",gi="base64pad",_i="utf8";function bi(){return gt(vr.randomBytes(32),vt)}function wi(r){return gt(yn.hash(_t(r,_i)),vt)}function kr(r){return Number(gt(r,"base10"))}function $d(r){const e=function Vd(r){return _t(`${r}`,"base10")}(typeof r.type<"u"?r.type:0);if(1===kr(e)&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?_t(r.senderPublicKey,vt):void 0,n=typeof r.iv<"u"?_t(r.iv,vt):vr.randomBytes(12);return function Gd(r){if(1===kr(r.type)){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return gt(ii([r.type,r.senderPublicKey,r.iv,r.sealed]),gi)}return gt(ii([r.type,r.iv,r.sealed]),gi)}({type:e,sealed:new ui.ChaCha20Poly1305(_t(r.symKey,vt)).seal(n,_t(r.message,_i)),iv:n,senderPublicKey:t})}function Ei(r){const e=_t(r,gi),t=e.slice(0,1);if(1===kr(t)){const a=33,h=a+12,l=e.slice(1,a),f=e.slice(a,h);return{type:t,sealed:e.slice(h),iv:f,senderPublicKey:l}}const o=e.slice(1,13);return{type:t,sealed:e.slice(13),iv:o}}function Hs(r){const e=r?.type||0;if(1===e){if(typeof r?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function Vs(r){return 1===r.type&&"string"==typeof r.senderPublicKey&&"string"==typeof r.receiverPublicKey}var Yd=Object.defineProperty,$s=Object.getOwnPropertySymbols,Jd=Object.prototype.hasOwnProperty,Xd=Object.prototype.propertyIsEnumerable,qs=(r,e,t)=>e in r?Yd(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Gs=(r,e)=>{for(var t in e||(e={}))Jd.call(e,t)&&qs(r,t,e[t]);if($s)for(var t of $s(e))Xd.call(e,t)&&qs(r,t,e[t]);return r};const zr_reactNative="react-native",zr_node="node",zr_browser="browser",zr_unknown="unknown",Qd="js";function Ws(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function rp(){return function ep(){return!Rs()&&!!di()&&"ReactNative"===navigator.product}()?zr_reactNative:Ws()?zr_node:function tp(){return!Ws()&&!!di()}()?zr_browser:zr_unknown}function ap(r,e,t){const n=function op(){const r=_d();if(null===r)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return"browser"===r.type?[e,r.name,r.version].join("-"):[e,r.version].join("-")}(),i=function sp(){var r;const e=rp();return e===zr_browser?[e,(null==(r=Us())?void 0:r.host)||"unknown"].join(":"):e}();return[[r,e].join("-"),[Qd,t].join("-"),n,i].join("/")}function cp({protocol:r,version:e,relayUrl:t,sdkVersion:n,auth:i,projectId:o}){const s=t.split("?"),a=ap(r,e,n),l=function np(r,e){let t=Dr.parse(r);return t=Gs(Gs({},t),e),Dr.stringify(t)}(s[1]||"",{auth:i,ua:a,projectId:o});return s[0]+"?"+l}function qt(r,e){return r.filter(t=>e.includes(t)).length===r.length}function Ys(r){return Object.fromEntries(r.entries())}function Js(r){return new Map(Object.entries(r))}function Rt(r,e){return Q.fromMiliseconds((e||Date.now())+Q.toMiliseconds(r))}function Gt(r){return Q.fromMiliseconds(Date.now())>=Q.toMiliseconds(r)}function sr(r){const e=Q.toMiliseconds(r||Q.FIVE_MINUTES);let t,n,i;return{resolve:o=>{i&&t&&(clearTimeout(i),t(o))},reject:o=>{i&&n&&(clearTimeout(i),n(o))},done:()=>new Promise((o,s)=>{i=setTimeout(s,e),t=o,n=s})}}function Xs(r,e){return new Promise(function(){var t=I(function*(n,i){const o=setTimeout(()=>i(),e),s=yield r;clearTimeout(o),n(s)});return function(n,i){return t.apply(this,arguments)}}())}function Zs(r,e){if("string"==typeof e&&e.startsWith(`${r}:`))return e;if("topic"===r.toLowerCase()){if("string"!=typeof e)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}if("id"===r.toLowerCase()){if("number"!=typeof e)throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function Qs(r){const[e,t]=r.split(":"),n={id:void 0,topic:void 0};if("topic"===e&&"string"==typeof t)n.topic=t;else{if("id"!==e||!Number.isInteger(Number(t)))throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);n.id=Number(t)}return n}function ke(r,e){return`${r}${e?`:${e}`:""}`}function Si(r){return r?.relay||{protocol:"irn"}}function Oi(r){const e=kd[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var fp=Object.defineProperty,ea=Object.getOwnPropertySymbols,dp=Object.prototype.hasOwnProperty,pp=Object.prototype.propertyIsEnumerable,ta=(r,e,t)=>e in r?fp(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;function gp(r,e="-"){const t={},n="relay"+e;return Object.keys(r).forEach(i=>{if(i.startsWith(n)){const o=i.replace(n,"");t[o]=r[i]}}),t}function mp(r){return`${r.protocol}:${r.topic}@${r.version}?`+Dr.stringify(((r,e)=>{for(var t in e||(e={}))dp.call(e,t)&&ta(r,t,e[t]);if(ea)for(var t of ea(e))pp.call(e,t)&&ta(r,t,e[t]);return r})({symKey:r.symKey},function vp(r,e="-"){const n={};return Object.keys(r).forEach(i=>{r[i]&&(n["relay"+e+i]=r[i])}),n}(r.relay)))}function Br(r){const e=[];return r.forEach(t=>{const[n,i]=t.split(":");e.push(`${n}:${i}`)}),e}const Op={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ip={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function q(r,e){const{message:t,code:n}=Ip[r];return{message:e?`${t} ${e}`:t,code:n}}function qe(r,e){const{message:t,code:n}=Op[r];return{message:e?`${t} ${e}`:t,code:n}}function Kr(r,e){return!!Array.isArray(r)&&(!(typeof e<"u"&&r.length)||r.every(e))}function gn(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function Ot(r){return typeof r>"u"}function nt(r,e){return!(!e||!Ot(r))||"string"==typeof r&&Boolean(r.trim().length)}function Ii(r,e){return!(!e||!Ot(r))||"number"==typeof r&&!isNaN(r)}function Fi(r){return!(!nt(r,!1)||!r.includes(":"))&&2===r.split(":").length}function ra(r){let e=!0;return Kr(r)?r.length&&(e=r.every(t=>nt(t,!1))):e=!1,e}function Rp(r,e){let t=null;return Object.entries(r).forEach(([n,i])=>{if(t)return;const o=function Lp(r,e,t){let n=null;return Kr(e)?e.forEach(i=>{n||(!Fi(i)||!i.includes(r))&&(n=qe("UNSUPPORTED_CHAINS",`${t}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):n=qe("UNSUPPORTED_CHAINS",`${t}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),n}(n,i?.chains,`${e} requiredNamespace`);o&&(t=o)}),t}function Up(r,e){let t=null;return Kr(r)?r.forEach(n=>{t||function xp(r){if(nt(r,!1)&&r.includes(":")){const e=r.split(":");if(3===e.length){const t=e[0]+":"+e[1];return!!e[2]&&Fi(t)}}return!1}(n)||(t=qe("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):t=qe("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function na(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;const i=function Cp(r,e){let t=null;return ra(r?.methods)?ra(r?.events)||(t=qe("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=qe("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}(n,`${e}, namespace`);i&&(t=i)}),t}function _n(r,e){let t=null;if(r&&gn(r)){const n=na(r,e);n&&(t=n);const i=function jp(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;const i=Up(n?.accounts,`${e} namespace`);i&&(t=i)}),t}(r,e);i&&(t=i)}else t=q("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function ia(r){return nt(r.protocol,!0)}function mt(r){return typeof r<"u"&&null!==typeof r}function oa(r,e){return!(!Fi(e)||!function bp(r){const e=[];return Object.values(r).forEach(t=>{e.push(...Br(t.accounts))}),e}(r).includes(e))}function Vp(r,e,t){return!!nt(t,!1)&&function wp(r,e){const t=[];return Object.values(r).forEach(n=>{Br(n.accounts).includes(e)&&t.push(...n.methods)}),t}(r,e).includes(t)}function $p(r,e,t){return!!nt(t,!1)&&function Ep(r,e){const t=[];return Object.values(r).forEach(n=>{Br(n.accounts).includes(e)&&t.push(...n.events)}),t}(r,e).includes(t)}function sa(r,e,t){let n=null;const i=Object.keys(r);return qt(i,Object.keys(e))?i.forEach(s=>{n||(qt(r[s].chains,Br(e[s].accounts))?qt(r[s].methods,e[s].methods)?qt(r[s].events,e[s].events)||(n=q("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy requiredNamespaces events for ${s}`)):n=q("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy requiredNamespaces methods for ${s}`):n=q("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy requiredNamespaces chains for ${s}`))}):n=q("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces`),n}const aa="INTERNAL_ERROR",xi="SERVER_ERROR",Xp=[-32700,-32600,-32601,-32602,-32603],Hr={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[aa]:{code:-32603,message:"Internal error"},[xi]:{code:-32e3,message:"Server error"}},ca=xi;function ua(r){return Object.keys(Hr).includes(r)?Hr[r]:Hr[ca]}function la(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var ha={},Pi=function(r,e){return(Pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Ai=function(){return Ai=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Ai.apply(this,arguments)};function Ni(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fa(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Vr(r){return this instanceof Vr?(this.v=r,this):new Vr(r)}var da,by=Mt(Object.freeze({__proto__:null,__extends:function ey(r,e){function t(){this.constructor=r}Pi(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Ai},__rest:function ty(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function ry(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function ny(r,e){return function(t,n){e(t,n,r)}},__metadata:function iy(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function oy(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function sy(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function ay(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function cy(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:Ni,__read:fa,__spread:function uy(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(fa(arguments[e]));return r},__spreadArrays:function ly(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Vr,__asyncGenerator:function hy(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(E){return new Promise(function(b,L){o.push([v,E,b,L])>1||a(v,E)})})}function a(v,E){try{!function h(v){v.value instanceof Vr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](E))}catch(b){_(o[0][3],b)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,E){v(E),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function fy(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Vr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function dy(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=Ni(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function py(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function yy(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function gy(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function _y(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function vy(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),Dt={};var pa,kt={};function vn(r,e,t){return{id:t||Date.now()*Math.pow(10,3)+Math.floor(Math.random()*Math.pow(10,3)),jsonrpc:"2.0",method:r,params:e}}function Ti(r,e){return{id:r,jsonrpc:"2.0",result:e}}function mn(r,e,t){return{id:r,jsonrpc:"2.0",error:Oy(e,t)}}function Oy(r,e){return typeof r>"u"?ua(aa):("string"==typeof r&&(r=Object.assign(Object.assign({},ua(xi)),{message:r})),typeof e<"u"&&(r.data=e),function Zp(r){return Xp.includes(r)}(r.code)&&(r=function Qp(r){return Object.values(Hr).find(t=>t.code===r)||Hr[ca]}(r.code)),r)}!function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=by;e.__exportStar(function wy(){if(da)return Dt;function r(){return dt?.crypto||dt?.msCrypto||{}}function e(){const n=r();return n.subtle||n.webkitSubtle}return da=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.isBrowserCryptoAvailable=Dt.getSubtleCrypto=Dt.getBrowerCrypto=void 0,Dt.getBrowerCrypto=r,Dt.getSubtleCrypto=e,Dt.isBrowserCryptoAvailable=function t(){return!!r()&&!!e()},Dt}(),r),e.__exportStar(function Ey(){if(pa)return kt;function r(){return typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product}function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}return pa=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.isBrowser=kt.isNode=kt.isReactNative=void 0,kt.isReactNative=r,kt.isNode=e,kt.isBrowser=function t(){return!r()&&!e()},kt}(),r)}(ha);function ya(r,e){const t=function Ny(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(e&&e.length)return e[0]}(r);return!(typeof t>"u")&&new RegExp(e).test(t)}function ga(r){return ya(r,"^https?:")}function _a(r){return ya(r,"^wss?:")}function Ty(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function va(r){return"object"==typeof r&&"id"in r&&"jsonrpc"in r&&"2.0"===r.jsonrpc}function Li(r){return va(r)&&"method"in r}function Ri(r){return va(r)&&(zt(r)||Pt(r))}function zt(r){return"result"in r}function Pt(r){return"error"in r}class $r extends class xy extends class Fy extends class Iy{}{constructor(){super()}}{constructor(e){super()}}{constructor(e){super(e),this.events=new at.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(e=this.connection){var t=this;return I(function*(){yield t.open(e)})()}disconnect(){var e=this;return I(function*(){yield e.close()})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,t){var n=this;return I(function*(){return n.requestStrict(vn(e.method,e.params||[]),t)})()}requestStrict(e,t){var n=this;return I(function*(){return new Promise(function(){var i=I(function*(o,s){if(!n.connection.connected)try{yield n.open()}catch(a){s(a)}n.events.on(`${e.id}`,a=>{Pt(a)?s(a.error):o(a.result)});try{yield n.connection.send(e,t)}catch(a){s(a)}});return function(o,s){return i.apply(this,arguments)}}())})()}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Ri(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}open(e=this.connection){var t=this;return I(function*(){t.connection===e&&t.connection.connected||(t.connection.connected&&t.close(),"string"==typeof e&&(yield t.connection.open(e),e=t.connection),t.connection=t.setConnection(e),yield t.connection.open(),t.registerEventListeners(),t.events.emit("connect"))})()}close(){var e=this;return I(function*(){yield e.connection.close()})()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",()=>this.events.emit("disconnect")),this.connection.on("error",e=>this.events.emit("error",e)),this.hasRegisteredEventListeners=!0)}}const Uy=typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:er(4813);class jy{constructor(e){if(this.url=e,this.events=new at.exports.EventEmitter,this.registering=!1,!_a(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(e=this.url){var t=this;return I(function*(){yield t.register(e)})()}close(){var e=this;return I(function*(){if(typeof e.socket>"u")throw new Error("Connection already closed");e.socket.close(),e.onClose()})()}send(e,t){var n=this;return I(function*(){typeof n.socket>"u"&&(n.socket=yield n.register());try{n.socket.send(jr(e))}catch(i){n.onError(e.id,i)}})()}register(e=this.url){if(!_a(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,i)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),i(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,n)=>{const i=ha.isReactNative()?void 0:{rejectUnauthorized:!Ty(e)},o=new Uy(e,[],i);typeof window<"u"?o.onerror=s=>{n(this.emitError(s.error))}:o.on("error",s=>{n(this.emitError(s))}),o.onopen=()=>{this.onOpen(o),t(o)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=()=>this.onClose(),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(){this.socket=void 0,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?Zn(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),o=mn(e,n.message||n.toString());this.events.emit("payload",o)}parseError(e,t=this.url){return la(e,t,"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",t),t}}var Ui={exports:{}};!function(r,e){var n="__lodash_hash_undefined__",s=9007199254740991,a="[object Arguments]",h="[object Array]",f="[object Boolean]",_="[object Date]",v="[object Error]",E="[object Function]",L="[object Map]",C="[object Number]",F="[object Object]",A="[object Promise]",O="[object RegExp]",S="[object Set]",c="[object String]",d="[object Symbol]",K="[object WeakMap]",G="[object ArrayBuffer]",X="[object DataView]",V=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,J={};J["[object Float32Array]"]=J["[object Float64Array]"]=J["[object Int8Array]"]=J["[object Int16Array]"]=J["[object Int32Array]"]=J["[object Uint8Array]"]=J["[object Uint8ClampedArray]"]=J["[object Uint16Array]"]=J["[object Uint32Array]"]=!0,J[a]=J[h]=J[G]=J[f]=J[X]=J[_]=J[v]=J[E]=J[L]=J[C]=J[F]=J[O]=J[S]=J[c]=J[K]=!1;var ce="object"==typeof dt&&dt&&dt.Object===Object&&dt,T="object"==typeof self&&self&&self.Object===Object&&self,N=ce||T||Function("return this")(),x=e&&!e.nodeType&&e,u=x&&r&&!r.nodeType&&r,m=u&&u.exports===x,$=m&&ce.process,W=function(){try{return $&&$.binding&&$.binding("util")}catch{}}(),de=W&&W.isTypedArray;function Se(y,P){for(var j=-1,Y=null==y?0:y.length;++j<Y;)if(P(y[j],j,y))return!0;return!1}function me(y,P){return y.has(P)}function pe(y){var P=-1,j=Array(y.size);return y.forEach(function(Y,Te){j[++P]=[Te,Y]}),j}function ue(y){var P=-1,j=Array(y.size);return y.forEach(function(Y){j[++P]=Y}),j}var y,ae=Array.prototype,re=Object.prototype,he=N["__core-js_shared__"],ve=Function.prototype.toString,ie=re.hasOwnProperty,we=(y=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||""))?"Symbol(src)_1."+y:"",Ee=re.toString,Ie=RegExp("^"+ve.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fe=m?N.Buffer:void 0,Oe=N.Symbol,At=N.Uint8Array,Ct=re.propertyIsEnumerable,Jt=ae.splice,wt=Oe?Oe.toStringTag:void 0,ar=Object.getOwnPropertySymbols,Yr=Fe?Fe.isBuffer:void 0,xn=function le(y,P){return function(j){return y(P(j))}}(Object.keys,Object),Be=br(N,"DataView"),je=br(N,"Map"),Ke=br(N,"Promise"),He=br(N,"Set"),Ve=br(N,"WeakMap"),Ce=br(Object,"create"),We=ur(Be),Ye=ur(je),Je=ur(Ke),Xe=ur(He),Ze=ur(Ve),Ge=Oe?Oe.prototype:void 0,$e=Ge?Ge.valueOf:void 0;function Le(y){var P=-1,j=null==y?0:y.length;for(this.clear();++P<j;){var Y=y[P];this.set(Y[0],Y[1])}}function Kt(y){var P=-1,j=null==y?0:y.length;for(this.clear();++P<j;){var Y=y[P];this.set(Y[0],Y[1])}}function cr(y){var P=-1,j=null==y?0:y.length;for(this.clear();++P<j;){var Y=y[P];this.set(Y[0],Y[1])}}function Pn(y){var P=-1,j=null==y?0:y.length;for(this.__data__=new cr;++P<j;)this.add(y[P])}function Xt(y){var P=this.__data__=new Kt(y);this.size=P.size}function t_(y,P){var j=Tn(y),Y=!j&&g_(y),Te=!j&&!Y&&Gi(y),se=!j&&!Y&&!Te&&mc(y),Me=j||Y||Te||se,tt=Me?function ze(y,P){for(var j=-1,Y=Array(y);++j<y;)Y[j]=P(j);return Y}(y.length,String):[],ot=tt.length;for(var Re in y)(P||ie.call(y,Re))&&(!Me||!("length"==Re||Te&&("offset"==Re||"parent"==Re)||se&&("buffer"==Re||"byteLength"==Re||"byteOffset"==Re)||h_(Re,ot)))&&tt.push(Re);return tt}function An(y,P){for(var j=y.length;j--;)if(yc(y[j][0],P))return j;return-1}function Jr(y){return null==y?void 0===y?"[object Undefined]":"[object Null]":wt&&wt in Object(y)?function u_(y){var P=ie.call(y,wt),j=y[wt];try{y[wt]=void 0;var Y=!0}catch{}var Te=Ee.call(y);return Y&&(P?y[wt]=j:delete y[wt]),Te}(y):function y_(y){return Ee.call(y)}(y)}function hc(y){return Xr(y)&&Jr(y)==a}function fc(y,P,j,Y,Te){return y===P||(null==y||null==P||!Xr(y)&&!Xr(P)?y!=y&&P!=P:function n_(y,P,j,Y,Te,se){var Me=Tn(y),tt=Tn(P),ot=Me?h:Zt(y),Re=tt?h:Zt(P),Et=(ot=ot==a?F:ot)==F,Nt=(Re=Re==a?F:Re)==F,lt=ot==Re;if(lt&&Gi(y)){if(!Gi(P))return!1;Me=!0,Et=!1}if(lt&&!Et)return se||(se=new Xt),Me||mc(y)?dc(y,P,j,Y,Te,se):function a_(y,P,j,Y,Te,se,Me){switch(j){case X:if(y.byteLength!=P.byteLength||y.byteOffset!=P.byteOffset)return!1;y=y.buffer,P=P.buffer;case G:return!(y.byteLength!=P.byteLength||!se(new At(y),new At(P)));case f:case _:case C:return yc(+y,+P);case v:return y.name==P.name&&y.message==P.message;case O:case c:return y==P+"";case L:var tt=pe;case S:if(tt||(tt=ue),y.size!=P.size&&!(1&Y))return!1;var Re=Me.get(y);if(Re)return Re==P;Y|=2,Me.set(y,P);var Et=dc(tt(y),tt(P),Y,Te,se,Me);return Me.delete(y),Et;case d:if($e)return $e.call(y)==$e.call(P)}return!1}(y,P,ot,j,Y,Te,se);if(!(1&j)){var Ft=Et&&ie.call(y,"__wrapped__"),xt=Nt&&ie.call(P,"__wrapped__");if(Ft||xt){var Qt=Ft?y.value():y,Ht=xt?P.value():P;return se||(se=new Xt),Te(Qt,Ht,j,Y,se)}}return!!lt&&(se||(se=new Xt),function c_(y,P,j,Y,Te,se){var Me=1&j,tt=pc(y),ot=tt.length;if(ot!=pc(P).length&&!Me)return!1;for(var Nt=ot;Nt--;){var lt=tt[Nt];if(!(Me?lt in P:ie.call(P,lt)))return!1}var Ft=se.get(y);if(Ft&&se.get(P))return Ft==P;var xt=!0;se.set(y,P),se.set(P,y);for(var Qt=Me;++Nt<ot;){var Ht=y[lt=tt[Nt]],lr=P[lt];if(Y)var bc=Me?Y(lr,Ht,lt,P,y,se):Y(Ht,lr,lt,y,P,se);if(!(void 0===bc?Ht===lr||Te(Ht,lr,j,Y,se):bc)){xt=!1;break}Qt||(Qt="constructor"==lt)}if(xt&&!Qt){var Ln=y.constructor,Rn=P.constructor;Ln!=Rn&&"constructor"in y&&"constructor"in P&&!("function"==typeof Ln&&Ln instanceof Ln&&"function"==typeof Rn&&Rn instanceof Rn)&&(xt=!1)}return se.delete(y),se.delete(P),xt}(y,P,j,Y,Te,se))}(y,P,j,Y,fc,Te))}function i_(y){return!(!vc(y)||function d_(y){return!!we&&we in y}(y))&&(gc(y)?Ie:V).test(ur(y))}function s_(y){if(!function p_(y){var P=y&&y.constructor;return y===("function"==typeof P&&P.prototype||re)}(y))return xn(y);var P=[];for(var j in Object(y))ie.call(y,j)&&"constructor"!=j&&P.push(j);return P}function dc(y,P,j,Y,Te,se){var Me=1&j,tt=y.length,ot=P.length;if(tt!=ot&&!(Me&&ot>tt))return!1;var Re=se.get(y);if(Re&&se.get(P))return Re==P;var Et=-1,Nt=!0,lt=2&j?new Pn:void 0;for(se.set(y,P),se.set(P,y);++Et<tt;){var Ft=y[Et],xt=P[Et];if(Y)var Qt=Me?Y(xt,Ft,Et,P,y,se):Y(Ft,xt,Et,y,P,se);if(void 0!==Qt){if(Qt)continue;Nt=!1;break}if(lt){if(!Se(P,function(Ht,lr){if(!me(lt,lr)&&(Ft===Ht||Te(Ft,Ht,j,Y,se)))return lt.push(lr)})){Nt=!1;break}}else if(Ft!==xt&&!Te(Ft,xt,j,Y,se)){Nt=!1;break}}return se.delete(y),se.delete(P),Nt}function pc(y){return function r_(y,P,j){var Y=P(y);return Tn(y)?Y:function ge(y,P){for(var j=-1,Y=P.length,Te=y.length;++j<Y;)y[Te+j]=P[j];return y}(Y,j(y))}(y,m_,l_)}function Nn(y,P){var j=y.__data__;return function f_(y){var P=typeof y;return"string"==P||"number"==P||"symbol"==P||"boolean"==P?"__proto__"!==y:null===y}(P)?j["string"==typeof P?"string":"hash"]:j.map}function br(y,P){var j=function _e(y,P){return y?.[P]}(y,P);return i_(j)?j:void 0}Le.prototype.clear=function Qe(){this.__data__=Ce?Ce(null):{},this.size=0},Le.prototype.delete=function et(y){var P=this.has(y)&&delete this.__data__[y];return this.size-=P?1:0,P},Le.prototype.get=function j0(y){var P=this.__data__;if(Ce){var j=P[y];return j===n?void 0:j}return ie.call(P,y)?P[y]:void 0},Le.prototype.has=function C0(y){var P=this.__data__;return Ce?void 0!==P[y]:ie.call(P,y)},Le.prototype.set=function M0(y,P){var j=this.__data__;return this.size+=this.has(y)?0:1,j[y]=Ce&&void 0===P?n:P,this},Kt.prototype.clear=function D0(){this.__data__=[],this.size=0},Kt.prototype.delete=function k0(y){var P=this.__data__,j=An(P,y);return!(j<0||(j==P.length-1?P.pop():Jt.call(P,j,1),--this.size,0))},Kt.prototype.get=function z0(y){var P=this.__data__,j=An(P,y);return j<0?void 0:P[j][1]},Kt.prototype.has=function B0(y){return An(this.__data__,y)>-1},Kt.prototype.set=function K0(y,P){var j=this.__data__,Y=An(j,y);return Y<0?(++this.size,j.push([y,P])):j[Y][1]=P,this},cr.prototype.clear=function H0(){this.size=0,this.__data__={hash:new Le,map:new(je||Kt),string:new Le}},cr.prototype.delete=function V0(y){var P=Nn(this,y).delete(y);return this.size-=P?1:0,P},cr.prototype.get=function $0(y){return Nn(this,y).get(y)},cr.prototype.has=function q0(y){return Nn(this,y).has(y)},cr.prototype.set=function G0(y,P){var j=Nn(this,y),Y=j.size;return j.set(y,P),this.size+=j.size==Y?0:1,this},Pn.prototype.add=Pn.prototype.push=function W0(y){return this.__data__.set(y,n),this},Pn.prototype.has=function Y0(y){return this.__data__.has(y)},Xt.prototype.clear=function J0(){this.__data__=new Kt,this.size=0},Xt.prototype.delete=function X0(y){var P=this.__data__,j=P.delete(y);return this.size=P.size,j},Xt.prototype.get=function Z0(y){return this.__data__.get(y)},Xt.prototype.has=function Q0(y){return this.__data__.has(y)},Xt.prototype.set=function e_(y,P){var j=this.__data__;if(j instanceof Kt){var Y=j.__data__;if(!je||Y.length<199)return Y.push([y,P]),this.size=++j.size,this;j=this.__data__=new cr(Y)}return j.set(y,P),this.size=j.size,this};var l_=ar?function(y){return null==y?[]:(y=Object(y),function be(y,P){for(var j=-1,Y=null==y?0:y.length,Te=0,se=[];++j<Y;){var Me=y[j];P(Me,j,y)&&(se[Te++]=Me)}return se}(ar(y),function(P){return Ct.call(y,P)}))}:function b_(){return[]},Zt=Jr;function h_(y,P){return!!(P=P??s)&&("number"==typeof y||te.test(y))&&y>-1&&y%1==0&&y<P}function ur(y){if(null!=y){try{return ve.call(y)}catch{}try{return y+""}catch{}}return""}function yc(y,P){return y===P||y!=y&&P!=P}(Be&&Zt(new Be(new ArrayBuffer(1)))!=X||je&&Zt(new je)!=L||Ke&&Zt(Ke.resolve())!=A||He&&Zt(new He)!=S||Ve&&Zt(new Ve)!=K)&&(Zt=function(y){var P=Jr(y),j=P==F?y.constructor:void 0,Y=j?ur(j):"";if(Y)switch(Y){case We:return X;case Ye:return L;case Je:return A;case Xe:return S;case Ze:return K}return P});var g_=hc(function(){return arguments}())?hc:function(y){return Xr(y)&&ie.call(y,"callee")&&!Ct.call(y,"callee")},Tn=Array.isArray;var Gi=Yr||function w_(){return!1};function gc(y){if(!vc(y))return!1;var P=Jr(y);return P==E||"[object GeneratorFunction]"==P||"[object AsyncFunction]"==P||"[object Proxy]"==P}function _c(y){return"number"==typeof y&&y>-1&&y%1==0&&y<=s}function vc(y){var P=typeof y;return null!=y&&("object"==P||"function"==P)}function Xr(y){return null!=y&&"object"==typeof y}var mc=de?function Ue(y){return function(P){return y(P)}}(de):function o_(y){return Xr(y)&&_c(y.length)&&!!J[Jr(y)]};function m_(y){return function __(y){return null!=y&&_c(y.length)&&!gc(y)}(y)?t_(y):s_(y)}r.exports=function v_(y,P){return fc(y,P)}}(Ui,Ui.exports);var Cy=Ui.exports,My=Object.defineProperty,ba=Object.getOwnPropertySymbols,Dy=Object.prototype.hasOwnProperty,ky=Object.prototype.propertyIsEnumerable,wa=(r,e,t)=>e in r?My(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ft=(r,e)=>{for(var t in e||(e={}))Dy.call(e,t)&&wa(r,t,e[t]);if(ba)for(var t of ba(e))ky.call(e,t)&&wa(r,t,e[t]);return r};var Ky=function zy(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(255!==t[s])throw new TypeError(o+" is ambiguous");t[s]=i}var a=r.length,h=r.charAt(0),l=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function v(b){if("string"!=typeof b)throw new TypeError("Expected String");if(0===b.length)return new Uint8Array;var L=0;if(" "!==b[L]){for(var C=0,H=0;b[L]===h;)C++,L++;for(var F=(b.length-L)*l+1>>>0,A=new Uint8Array(F);b[L];){var g=t[b.charCodeAt(L)];if(255===g)return;for(var O=0,S=F-1;(0!==g||O<H)&&-1!==S;S--,O++)A[S]=(g+=a*A[S]>>>0)%256>>>0,g=g/256>>>0;if(0!==g)throw new Error("Non-zero carry");H=O,L++}if(" "!==b[L]){for(var c=F-H;c!==F&&0===A[c];)c++;for(var d=new Uint8Array(C+(F-c)),k=C;c!==F;)d[k++]=A[c++];return d}}}return{encode:function _(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===b.length)return"";for(var L=0,C=0,H=0,F=b.length;H!==F&&0===b[H];)H++,L++;for(var A=(F-H)*f+1>>>0,g=new Uint8Array(A);H!==F;){for(var O=b[H],S=0,c=A-1;(0!==O||S<C)&&-1!==c;c--,S++)g[c]=(O+=256*g[c]>>>0)%a>>>0,O=O/a>>>0;if(0!==O)throw new Error("Non-zero carry");C=S,H++}for(var d=A-C;d!==A&&0===g[d];)d++;for(var k=h.repeat(L);d<A;++d)k+=r.charAt(g[d]);return k},decodeUnsafe:v,decode:function E(b){var L=v(b);if(L)return L;throw new Error(`Non-${e} character`)}}};const Ea=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};class $y{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class qy{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Sa(this,e)}}class Gy{constructor(e){this.decoders=e}or(e){return Sa(this,e)}decode(e){const n=this.decoders[e[0]];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Sa=(r,e)=>new Gy(ft(ft({},r.decoders||{[r.prefix]:r}),e.decoders||{[e.prefix]:e}));class Wy{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new $y(e,t,n),this.decoder=new qy(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const bn=({name:r,prefix:e,encode:t,decode:n})=>new Wy(r,e,t,n),qr=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=Ky(t,e);return bn({prefix:r,name:e,encode:n,decode:o=>Ea(i(o))})},it=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>bn({prefix:e,name:r,encode:i=>((r,e,t)=>{const n="="===e[e.length-1],i=(1<<t)-1;let o="",s=0,a=0;for(let h=0;h<r.length;++h)for(a=a<<8|r[h],s+=8;s>t;)s-=t,o+=e[i&a>>s];if(s&&(o+=e[i&a<<t-s]),n)for(;o.length*t&7;)o+="=";return o})(i,n,t),decode:i=>((r,e,t,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=r.length;for(;"="===r[o-1];)--o;const s=new Uint8Array(o*t/8|0);let a=0,h=0,l=0;for(let f=0;f<o;++f){const _=i[r[f]];if(void 0===_)throw new SyntaxError(`Non-${n} character`);h=h<<t|_,a+=t,a>=8&&(a-=8,s[l++]=255&h>>a)}if(a>=t||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return s})(i,n,t,r)}),Xy=bn({prefix:"\0",name:"identity",encode:r=>(r=>(new TextDecoder).decode(r))(r),decode:r=>(r=>(new TextEncoder).encode(r))(r)});var Zy=Object.freeze({__proto__:null,identity:Xy});const Qy=it({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var eg=Object.freeze({__proto__:null,base2:Qy});const tg=it({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var rg=Object.freeze({__proto__:null,base8:tg});const ng=qr({prefix:"9",name:"base10",alphabet:"0123456789"});var ig=Object.freeze({__proto__:null,base10:ng});const og=it({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sg=it({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ag=Object.freeze({__proto__:null,base16:og,base16upper:sg});const cg=it({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ug=it({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lg=it({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hg=it({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),fg=it({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dg=it({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),pg=it({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),yg=it({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gg=it({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var _g=Object.freeze({__proto__:null,base32:cg,base32upper:ug,base32pad:lg,base32padupper:hg,base32hex:fg,base32hexupper:dg,base32hexpad:pg,base32hexpadupper:yg,base32z:gg});const vg=qr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mg=qr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var bg=Object.freeze({__proto__:null,base36:vg,base36upper:mg});const wg=qr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Eg=qr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Sg=Object.freeze({__proto__:null,base58btc:wg,base58flickr:Eg});const Og=it({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ig=it({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Fg=it({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xg=it({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Pg=Object.freeze({__proto__:null,base64:Og,base64pad:Ig,base64url:Fg,base64urlpad:xg});const Oa=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),Ag=Oa.reduce((r,e,t)=>(r[t]=e,r),[]),Ng=Oa.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);const Rg=bn({prefix:"\u{1f680}",name:"base256emoji",encode:function Tg(r){return r.reduce((e,t)=>e+Ag[t],"")},decode:function Lg(r){const e=[];for(const t of r){const n=Ng[t.codePointAt(0)];if(void 0===n)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}});var Ug=Object.freeze({__proto__:null,base256emoji:Rg}),jg=function Fa(r,e,t){e=e||[];for(var n=t=t||0;r>=Dg;)e[t++]=255&r|128,r/=128;for(;-128&r;)e[t++]=255&r|128,r>>>=7;return e[t]=0|r,Fa.bytes=t-n+1,e},Dg=Math.pow(2,31);var kg=function ji(r,n){var s,t=0,i=0,o=n=n||0,a=r.length;do{if(o>=a)throw ji.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(127&s)<<i:(127&s)*Math.pow(2,i),i+=7}while(s>=128);return ji.bytes=o-n,t};var Bg=Math.pow(2,7),Kg=Math.pow(2,14),Hg=Math.pow(2,21),Vg=Math.pow(2,28),$g=Math.pow(2,35),qg=Math.pow(2,42),Gg=Math.pow(2,49),Wg=Math.pow(2,56),Yg=Math.pow(2,63),Pa={encode:jg,decode:kg,encodingLength:function(r){return r<Bg?1:r<Kg?2:r<Hg?3:r<Vg?4:r<$g?5:r<qg?6:r<Gg?7:r<Wg?8:r<Yg?9:10}};const Aa=(r,e,t=0)=>(Pa.encode(r,e,t),e),Na=r=>Pa.encodingLength(r),Ci=(r,e)=>{const t=e.byteLength,n=Na(r),i=n+Na(t),o=new Uint8Array(i+t);return Aa(r,o,0),Aa(t,o,n),o.set(e,i),new Zg(r,t,e,o)};class Zg{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}const Ta=({name:r,code:e,encode:t})=>new Qg(r,e,t);class Qg{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Ci(this.code,t):t.then(n=>Ci(this.code,n))}throw Error("Unknown type, must be binary type")}}const La=r=>function(){var e=I(function*(t){return new Uint8Array(yield crypto.subtle.digest(r,t))});return function(t){return e.apply(this,arguments)}}(),e1=Ta({name:"sha2-256",code:18,encode:La("SHA-256")}),t1=Ta({name:"sha2-512",code:19,encode:La("SHA-512")});var r1=Object.freeze({__proto__:null,sha256:e1,sha512:t1});const Ua=Ea;var i1=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:Ua,digest:r=>Ci(0,Ua(r))}});new TextEncoder,new TextDecoder;const ja=ft(ft(ft(ft(ft(ft(ft(ft(ft(ft({},Zy),eg),rg),ig),ag),_g),bg),Sg),Pg),Ug);function Ca(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}ft(ft({},r1),i1);const Ma=Ca("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>(new TextEncoder).encode(r.substring(1))),Mi=Ca("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{const e=function o1(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}((r=r.substring(1)).length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),s1=ft({utf8:Ma,"utf-8":Ma,hex:ja.base16,latin1:Mi,ascii:Mi,binary:Mi},ja);const Di="core",Wt="wc@2:core:",u1_logger="error",l1={database:":memory:"},ka="client_ed25519_seed",f1=Q.ONE_DAY,_1=Q.SIX_HOURS,ut_message="relayer_message",ut_connect="relayer_connect",ut_disconnect="relayer_disconnect",ut_error="relayer_error",ut_connection_stalled="relayer_connection_stalled",ut_transport_closed="relayer_transport_closed",ut_publish="relayer_publish",wn_payload="payload",wn_connect="connect",wn_disconnect="disconnect",wn_error="error",Ba=Q.ONE_SECOND,Ut_created="subscription_created",Ut_deleted="subscription_deleted",Ut_sync="subscription_sync",Ut_resubscribed="subscription_resubscribed",x1=1e3*Q.FIVE_SECONDS,Gr={wc_pairingDelete:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:0},res:{ttl:Q.ONE_DAY,prompt:!1,tag:0}}},jt_created="history_created",jt_updated="history_updated",jt_deleted="history_deleted",jt_sync="history_sync",It_created="expirer_created",It_deleted="expirer_deleted",It_expired="expirer_expired",It_sync="expirer_sync";class U1{constructor(e,t){var n=this;this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){if(!n.initialized){const i=yield n.getKeyChain();typeof i<"u"&&(n.keychain=i),n.initialized=!0}}),this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=function(){var i=I(function*(o,s){n.isInitialized(),n.keychain.set(o,s),yield n.persist()});return function(o,s){return i.apply(this,arguments)}}(),this.get=i=>{this.isInitialized();const o=this.keychain.get(i);if(typeof o>"u"){const{message:s}=q("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return o},this.del=function(){var i=I(function*(o){n.isInitialized(),n.keychain.delete(o),yield n.persist()});return function(o){return i.apply(this,arguments)}}(),this.core=e,this.logger=xe.generateChildLogger(t,this.name)}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}setKeyChain(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,Ys(e))})()}getKeyChain(){var e=this;return I(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?Js(t):void 0})()}persist(){var e=this;return I(function*(){yield e.setKeyChain(e.keychain)})()}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class j1{constructor(e,t,n){var i=this;this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=I(function*(){i.initialized||(yield i.keychain.init(),i.initialized=!0)}),this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=I(function*(){return i.isInitialized(),bs(ws(yield i.getClientSeed()).publicKey)}),this.generateKeyPair=()=>{this.isInitialized();const o=function Bd(){const r=fi.generateKeyPair();return{privateKey:gt(r.secretKey,vt),publicKey:gt(r.publicKey,vt)}}();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=function(){var o=I(function*(s){i.isInitialized();const h=ws(yield i.getClientSeed()),l=bi();return yield function Yf(r,e,t,n){return ci.apply(this,arguments)}(l,s,f1,h)});return function(s){return o.apply(this,arguments)}}(),this.generateSharedKey=(o,s,a)=>{this.isInitialized();const l=function Kd(r,e){const t=fi.sharedKey(_t(r,vt),_t(e,vt));return gt(new cd(yn.SHA256,t).expand(32),vt)}(this.getPrivateKey(o),s);return this.setSymKey(l,a)},this.setSymKey=function(){var o=I(function*(s,a){i.isInitialized();const h=a||function Hd(r){return gt(yn.hash(_t(r,vt)),vt)}(s);return yield i.keychain.set(h,s),h});return function(s,a){return o.apply(this,arguments)}}(),this.deleteKeyPair=function(){var o=I(function*(s){i.isInitialized(),yield i.keychain.del(s)});return function(s){return o.apply(this,arguments)}}(),this.deleteSymKey=function(){var o=I(function*(s){i.isInitialized(),yield i.keychain.del(s)});return function(s){return o.apply(this,arguments)}}(),this.encode=function(){var o=I(function*(s,a,h){i.isInitialized();const l=Hs(h),f=jr(a);if(Vs(l)){const b=l.senderPublicKey,L=l.receiverPublicKey;s=yield i.generateSharedKey(b,L)}const _=i.getSymKey(s),{type:v,senderPublicKey:E}=l;return $d({type:v,symKey:_,message:f,senderPublicKey:E})});return function(s,a,h){return o.apply(this,arguments)}}(),this.decode=function(){var o=I(function*(s,a,h){i.isInitialized();const l=function Wd(r,e){const t=Ei(r);return Hs({type:kr(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?gt(t.senderPublicKey,vt):void 0,receiverPublicKey:e?.receiverPublicKey})}(a,h);if(Vs(l)){const v=l.receiverPublicKey,E=l.senderPublicKey;s=yield i.generateSharedKey(v,E)}return Zn(function qd(r){const e=new ui.ChaCha20Poly1305(_t(r.symKey,vt)),{sealed:t,iv:n}=Ei(r.encoded),i=e.open(n,t);if(null===i)throw new Error("Failed to decrypt");return gt(i,_i)}({symKey:i.getSymKey(s),encoded:a}))});return function(s,a,h){return o.apply(this,arguments)}}(),this.core=e,this.logger=xe.generateChildLogger(t,this.name),this.keychain=n||new U1(this.core,this.logger)}get context(){return xe.getLoggerContext(this.logger)}getPayloadType(e){return kr(Ei(e).type)}setPrivateKey(e,t){var n=this;return I(function*(){return yield n.keychain.set(e,t),e})()}getPrivateKey(e){return this.keychain.get(e)}getClientSeed(){var e=this;return I(function*(){let t="";try{t=e.keychain.get(ka)}catch{t=bi(),yield e.keychain.set(ka,t)}return function a1(r,e="utf8"){const t=s1[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${r}`):globalThis.Buffer.from(r,"utf8")}(t,"base16")})()}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class C1 extends class Tl{constructor(e,t){this.logger=e,this.core=t}}{constructor(e,t){var n;super(e,t),n=this,this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){if(!n.initialized){n.logger.trace("Initialized");try{const i=yield n.getRelayerMessages();typeof i<"u"&&(n.messages=i),n.logger.debug(`Successfully Restored records for ${n.name}`),n.logger.trace({type:"method",method:"restore",size:n.messages.size})}catch(i){n.logger.debug(`Failed to Restore records for ${n.name}`),n.logger.error(i)}finally{n.initialized=!0}}}),this.set=function(){var i=I(function*(o,s){n.isInitialized();const a=wi(s);let h=n.messages.get(o);return typeof h>"u"&&(h={}),typeof h[a]<"u"||(h[a]=s,n.messages.set(o,h),yield n.persist()),a});return function(o,s){return i.apply(this,arguments)}}(),this.get=i=>{this.isInitialized();let o=this.messages.get(i);return typeof o>"u"&&(o={}),o},this.has=(i,o)=>(this.isInitialized(),typeof this.get(i)[wi(o)]<"u"),this.del=function(){var i=I(function*(o){n.isInitialized(),n.messages.delete(o),yield n.persist()});return function(o){return i.apply(this,arguments)}}(),this.logger=xe.generateChildLogger(e,this.name),this.core=t}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}setRelayerMessages(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,Ys(e))})()}getRelayerMessages(){var e=this;return I(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?Js(t):void 0})()}persist(){var e=this;return I(function*(){yield e.setRelayerMessages(e.messages)})()}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class M1 extends Ll{constructor(e,t){var n;super(e,t),n=this,this.relayer=e,this.logger=t,this.events=new at.exports.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=1e4,this.publish=function(){var i=I(function*(o,s,a){n.logger.debug("Publishing Payload"),n.logger.trace({type:"method",method:"publish",params:{topic:o,message:s,opts:a}});try{const h=a?.ttl||_1,l=Si(a),f=a?.prompt||!1,_=a?.tag||0,v={topic:o,message:s,opts:{ttl:h,relay:l,prompt:f,tag:_}},E=wi(s);n.queue.set(E,v);try{yield yield Xs(n.rpcPublish(o,s,h,l,f,_),n.publishTimeout),n.relayer.events.emit(ut_publish,v)}catch{return n.logger.debug("Publishing Payload stalled"),void n.relayer.events.emit(ut_connection_stalled)}n.onPublish(E,v),n.logger.debug("Successfully Published Payload"),n.logger.trace({type:"method",method:"publish",params:{topic:o,message:s,opts:a}})}catch(h){throw n.logger.debug("Failed to Publish Payload"),n.logger.error(h),h}});return function(o,s,a){return i.apply(this,arguments)}}(),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.relayer=e,this.logger=xe.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return xe.getLoggerContext(this.logger)}rpcPublish(e,t,n,i,o,s){var a,h,l,f;const _={method:Oi(i.protocol).publish,params:{topic:e,message:t,ttl:n,prompt:o,tag:s}};return Ot(null==(a=_.params)?void 0:a.prompt)&&(null==(h=_.params)||delete h.prompt),Ot(null==(l=_.params)?void 0:l.tag)&&(null==(f=_.params)||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:_}),this.relayer.provider.request(_)}onPublish(e,t){this.queue.delete(e)}checkQueue(){var e=this;this.queue.forEach(function(){var t=I(function*(n){const{topic:i,message:o,opts:s}=n;yield e.publish(i,o,s)});return function(n){return t.apply(this,arguments)}}())}registerEventListeners(){this.relayer.core.heartbeat.on(xr.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class D1{constructor(){this.map=new Map,this.set=(e,t)=>{const n=this.get(e);this.exists(e,t)||this.map.set(e,[...n,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,t))return;const i=n.filter(o=>o!==t);i.length?this.map.set(e,i):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var k1=Object.defineProperty,z1=Object.defineProperties,B1=Object.getOwnPropertyDescriptors,Ka=Object.getOwnPropertySymbols,K1=Object.prototype.hasOwnProperty,H1=Object.prototype.propertyIsEnumerable,Ha=(r,e,t)=>e in r?k1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,En=(r,e)=>{for(var t in e||(e={}))K1.call(e,t)&&Ha(r,t,e[t]);if(Ka)for(var t of Ka(e))H1.call(e,t)&&Ha(r,t,e[t]);return r},ki=(r,e)=>z1(r,B1(e));class V1 extends jl{constructor(e,t){var n;super(e,t),n=this,this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new D1,this.events=new at.exports.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pendingSubInterval=20,this.storagePrefix=Wt,this.subscribeTimeout=1e4,this.init=I(function*(){n.initialized||(n.logger.trace("Initialized"),yield n.restart(),n.registerEventListeners(),n.onEnable())}),this.subscribe=function(){var i=I(function*(o,s){n.isInitialized(),n.logger.debug("Subscribing Topic"),n.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:s}});try{const a=Si(s),h={topic:o,relay:a};n.pending.set(o,h);const l=yield n.rpcSubscribe(o,a);return n.onSubscribe(l,h),n.logger.debug("Successfully Subscribed Topic"),n.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:s}}),l}catch(a){throw n.logger.debug("Failed to Subscribe Topic"),n.logger.error(a),a}});return function(o,s){return i.apply(this,arguments)}}(),this.unsubscribe=function(){var i=I(function*(o,s){n.isInitialized(),typeof s?.id<"u"?yield n.unsubscribeById(o,s.id,s):yield n.unsubscribeByTopic(o,s)});return function(o,s){return i.apply(this,arguments)}}(),this.isSubscribed=function(){var i=I(function*(o){return!!n.topics.includes(o)||(yield new Promise((s,a)=>{const h=new Q.Watch;h.start(n.pendingSubscriptionWatchLabel);const l=setInterval(()=>{!n.pending.has(o)&&n.topics.includes(o)&&(clearInterval(l),h.stop(n.pendingSubscriptionWatchLabel),s(!0)),h.elapsed(n.pendingSubscriptionWatchLabel)>=x1&&(clearInterval(l),h.stop(n.pendingSubscriptionWatchLabel),a(!1))},n.pendingSubInterval)}))});return function(o){return i.apply(this,arguments)}}(),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.restart=I(function*(){yield n.restore(),yield n.reset()}),this.relayer=e,this.logger=xe.generateChildLogger(t,this.name)}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let n=!1;try{n=this.getSubscription(e).topic===t}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear(),this.initialized=!1}unsubscribeByTopic(e,t){var n=this;return I(function*(){const i=n.topicMap.get(e);yield Promise.all(i.map(function(){var o=I(function*(s){return yield n.unsubscribeById(e,s,t)});return function(s){return o.apply(this,arguments)}}()))})()}unsubscribeById(e,t,n){var i=this;return I(function*(){i.logger.debug("Unsubscribing Topic"),i.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}});try{const o=Si(n);yield i.rpcUnsubscribe(e,t,o);const s=qe("USER_DISCONNECTED",`${i.name}, ${e}`);yield i.onUnsubscribe(e,t,s),i.logger.debug("Successfully Unsubscribed Topic"),i.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}})}catch(o){throw i.logger.debug("Failed to Unsubscribe Topic"),i.logger.error(o),o}})()}rpcSubscribe(e,t){var n=this;return I(function*(){const i={method:Oi(t.protocol).subscribe,params:{topic:e}};let o;n.logger.debug("Outgoing Relay Payload"),n.logger.trace({type:"payload",direction:"outgoing",request:i});try{o=yield yield Xs(n.relayer.provider.request(i),n.subscribeTimeout)}catch{n.logger.debug("Outgoing Relay Payload stalled"),n.relayer.events.emit(ut_connection_stalled)}return o})()}rpcUnsubscribe(e,t,n){const i={method:Oi(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.provider.request(i)}onSubscribe(e,t){this.setSubscription(e,ki(En({},t),{id:e})),this.pending.delete(t.topic)}onResubscribe(e,t){this.addSubscription(e,ki(En({},t),{id:e})),this.pending.delete(t.topic)}onUnsubscribe(e,t,n){var i=this;return I(function*(){i.events.removeAllListeners(t),i.hasSubscription(t,e)&&i.deleteSubscription(t,n),yield i.relayer.messages.del(e)})()}setRelayerSubscriptions(e){var t=this;return I(function*(){yield t.relayer.core.storage.setItem(t.storageKey,e)})()}getRelayerSubscriptions(){var e=this;return I(function*(){return yield e.relayer.core.storage.getItem(e.storageKey)})()}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,En({},t)),this.topicMap.set(t.topic,e),this.events.emit(Ut_created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Ut_deleted,ki(En({},n),{reason:t}))}persist(){var e=this;return I(function*(){yield e.setRelayerSubscriptions(e.values),e.events.emit(Ut_sync)})()}reset(){var e=this;return I(function*(){e.cached.length&&(yield Promise.all(e.cached.map(function(){var t=I(function*(n){return yield e.resubscribe(n)});return function(n){return t.apply(this,arguments)}}()))),e.events.emit(Ut_resubscribed)})()}restore(){var e=this;return I(function*(){try{const t=yield e.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(e.subscriptions.size){const{message:n}=q("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(n),new Error(n)}e.cached=t,e.logger.debug(`Successfully Restored subscriptions for ${e.name}`),e.logger.trace({type:"method",method:"restore",subscriptions:e.values})}catch(t){e.logger.debug(`Failed to Restore subscriptions for ${e.name}`),e.logger.error(t)}})()}resubscribe(e){var t=this;return I(function*(){if(!t.ids.includes(e.id)){const{topic:n,relay:i}=e,o={topic:n,relay:i};t.pending.set(o.topic,o);const s=yield t.rpcSubscribe(o.topic,o.relay);t.onResubscribe(s,o)}})()}onConnect(){var e=this;return I(function*(){yield e.restart(),e.onEnable()})()}onDisconnect(){this.onDisable()}checkPending(){var e=this;this.relayer.transportExplicitlyClosed||this.pending.forEach(function(){var t=I(function*(n){const i=yield e.rpcSubscribe(n.topic,n.relay);e.onSubscribe(i,n)});return function(n){return t.apply(this,arguments)}}())}registerEventListeners(){var e=this;this.relayer.core.heartbeat.on(xr.HEARTBEAT_EVENTS.pulse,()=>{this.checkPending()}),this.relayer.on(ut_connect,I(function*(){yield e.onConnect()})),this.relayer.on(ut_disconnect,()=>{this.onDisconnect()}),this.events.on(Ut_created,function(){var t=I(function*(n){const i=Ut_created;e.logger.info(`Emitting ${i}`),e.logger.debug({type:"event",event:i,data:n}),yield e.persist()});return function(n){return t.apply(this,arguments)}}()),this.events.on(Ut_deleted,function(){var t=I(function*(n){const i=Ut_deleted;e.logger.info(`Emitting ${i}`),e.logger.debug({type:"event",event:i,data:n}),yield e.persist()});return function(n){return t.apply(this,arguments)}}())}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var $1=Object.defineProperty,Va=Object.getOwnPropertySymbols,q1=Object.prototype.hasOwnProperty,G1=Object.prototype.propertyIsEnumerable,$a=(r,e,t)=>e in r?$1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;class Y1 extends Rl{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new at.exports.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?xe.generateChildLogger(e.logger,this.name):Pe(xe.getDefaultLoggerOptions({level:e.logger||"error"})),this.messages=new C1(this.logger,e.core),this.subscriber=new V1(this,this.logger),this.publisher=new M1(this,this.logger),this.relayUrl=e?.relayUrl||"wss://relay.walletconnect.com",this.projectId=e.projectId,this.provider={}}init(){var e=this;return I(function*(){e.logger.trace("Initialized"),e.provider=yield e.createProvider(),yield Promise.all([e.messages.init(),e.transportOpen(),e.subscriber.init()]),e.registerEventListeners(),e.initialized=!0})()}get context(){return xe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}publish(e,t,n){var i=this;return I(function*(){i.isInitialized(),yield i.publisher.publish(e,t,n),yield i.recordMessageEvent({topic:e,message:t})})()}subscribe(e,t){var n=this;return I(function*(){n.isInitialized();let i="";return yield Promise.all([new Promise(o=>{n.subscriber.once(Ut_created,s=>{s.topic===e&&o()})}),new Promise(function(){var o=I(function*(s){i=yield n.subscriber.subscribe(e,t),s()});return function(s){return o.apply(this,arguments)}}())]),i})()}unsubscribe(e,t){var n=this;return I(function*(){n.isInitialized(),yield n.subscriber.unsubscribe(e,t)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}transportClose(){var e=this;return I(function*(){e.transportExplicitlyClosed=!0,e.connected&&(yield e.provider.disconnect(),e.events.emit(ut_transport_closed))})()}transportOpen(e){var t=this;return I(function*(){t.relayUrl=e||t.relayUrl,t.transportExplicitlyClosed=!1;try{yield Promise.all([new Promise(n=>{t.initialized||n(),t.subscriber.once(Ut_resubscribed,()=>{n()})}),yield Promise.race([t.provider.connect(),new Promise((n,i)=>t.once(ut_transport_closed,()=>{i(new Error("closeTransport called before connection was established"))}))])])}catch(n){const i=n;if(!/socket hang up/i.test(i.message))throw new Error(i.message);t.logger.error(i),t.events.emit(ut_transport_closed)}})()}restartTransport(e){var t=this;return I(function*(){yield t.transportClose(),yield new Promise(n=>setTimeout(n,Ba)),yield t.transportOpen(e)})()}createProvider(){var e=this;return I(function*(){const t=yield e.core.crypto.signJWT(e.relayUrl);return new $r(new jy(cp({sdkVersion:"2.3.2",protocol:e.protocol,version:e.version,relayUrl:e.relayUrl,projectId:e.projectId,auth:t})))})()}recordMessageEvent(e){var t=this;return I(function*(){const{topic:n,message:i}=e;yield t.messages.set(n,i)})()}shouldIgnoreMessageEvent(e){var t=this;return I(function*(){const{topic:n,message:i}=e;return!(yield t.subscriber.isSubscribed(n))||t.messages.has(n,i)})()}onProviderPayload(e){var t=this;return I(function*(){if(t.logger.debug("Incoming Relay Payload"),t.logger.trace({type:"payload",direction:"incoming",payload:e}),Li(e)){if(!e.method.endsWith("_subscription"))return;const n=e.params,{topic:i,message:o}=n.data,s={topic:i,message:o};t.logger.debug("Emitting Relayer Payload"),t.logger.trace(((r,e)=>{for(var t in e||(e={}))q1.call(e,t)&&$a(r,t,e[t]);if(Va)for(var t of Va(e))G1.call(e,t)&&$a(r,t,e[t]);return r})({type:"event",event:n.id},s)),t.events.emit(n.id,s),yield t.acknowledgePayload(e),yield t.onMessageEvent(s)}})()}onMessageEvent(e){var t=this;return I(function*(){(yield t.shouldIgnoreMessageEvent(e))||(t.events.emit(ut_message,e),yield t.recordMessageEvent(e))})()}acknowledgePayload(e){var t=this;return I(function*(){const n=Ti(e.id,!0);yield t.provider.connection.send(n)})()}registerEventListeners(){var e=this;this.provider.on(wn_payload,t=>this.onProviderPayload(t)),this.provider.on(wn_connect,()=>{this.events.emit(ut_connect)}),this.provider.on(wn_disconnect,()=>{this.events.emit(ut_disconnect),this.attemptToReconnect()}),this.provider.on(wn_error,t=>this.events.emit(ut_error,t)),this.events.on(ut_connection_stalled,I(function*(){yield e.restartTransport()}))}attemptToReconnect(){var e=this;this.transportExplicitlyClosed||setTimeout(I(function*(){yield e.transportOpen()}),Q.toMiliseconds(Ba))}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var J1=Object.defineProperty,qa=Object.getOwnPropertySymbols,X1=Object.prototype.hasOwnProperty,Z1=Object.prototype.propertyIsEnumerable,Ga=(r,e,t)=>e in r?J1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Wa=(r,e)=>{for(var t in e||(e={}))X1.call(e,t)&&Ga(r,t,e[t]);if(qa)for(var t of qa(e))Z1.call(e,t)&&Ga(r,t,e[t]);return r};class Sn extends class Ul{constructor(e,t,n,i){this.core=e,this.logger=t,this.name=n}}{constructor(e,t,n,i=Wt,o){var s;super(e,t,n,i),s=this,this.core=e,this.logger=t,this.name=n,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){s.initialized||(s.logger.trace("Initialized"),yield s.restore(),s.cached.forEach(a=>{!function Ap(r){var e;return null==(e=r?.proposer)?void 0:e.publicKey}(a)?function Np(r){return r?.topic}(a)?s.map.set(a.topic,a):s.getKey&&null!==a&&!Ot(a)&&s.map.set(s.getKey(a),a):s.map.set(a.id,a)}),s.cached=[],s.initialized=!0)}),this.set=function(){var a=I(function*(h,l){s.isInitialized(),s.map.has(h)?yield s.update(h,l):(s.logger.debug("Setting value"),s.logger.trace({type:"method",method:"set",key:h,value:l}),s.map.set(h,l),yield s.persist())});return function(h,l){return a.apply(this,arguments)}}(),this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter(h=>Object.keys(a).every(l=>Cy(h[l],a[l]))):this.values),this.update=function(){var a=I(function*(h,l){s.isInitialized(),s.logger.debug("Updating value"),s.logger.trace({type:"method",method:"update",key:h,update:l});const f=Wa(Wa({},s.getData(h)),l);s.map.set(h,f),yield s.persist()});return function(h,l){return a.apply(this,arguments)}}(),this.delete=function(){var a=I(function*(h,l){s.isInitialized(),s.map.has(h)&&(s.logger.debug("Deleting value"),s.logger.trace({type:"method",method:"delete",key:h,reason:l}),s.map.delete(h),yield s.persist())});return function(h,l){return a.apply(this,arguments)}}(),this.logger=xe.generateChildLogger(t,this.name),this.storagePrefix=i,this.getKey=o}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}setDataStore(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getDataStore(){var e=this;return I(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getData(e){const t=this.map.get(e);if(!t){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}persist(){var e=this;return I(function*(){yield e.setDataStore(e.values)})()}restore(){var e=this;return I(function*(){try{const t=yield e.getDataStore();if(typeof t>"u"||!t.length)return;if(e.map.size){const{message:n}=q("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(n),new Error(n)}e.cached=t,e.logger.debug(`Successfully Restored value for ${e.name}`),e.logger.trace({type:"method",method:"restore",value:e.values})}catch(t){e.logger.debug(`Failed to Restore value for ${e.name}`),e.logger.error(t)}})()}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Q1{constructor(e,t){var n=this;this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new at.exports,this.initialized=!1,this.storagePrefix=Wt,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=I(function*(){n.initialized||(yield n.pairings.init(),yield n.cleanup(),n.registerRelayerEvents(),n.registerExpirerEvents(),n.initialized=!0,n.logger.trace("Initialized"))}),this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=I(function*(){n.isInitialized();const i=bi(),o=yield n.core.crypto.setSymKey(i),s=Rt(Q.FIVE_MINUTES),a={protocol:"irn"},h={topic:o,expiry:s,relay:a,active:!1},l=mp({protocol:n.core.protocol,version:n.core.version,topic:o,symKey:i,relay:a});return yield n.pairings.set(o,h),yield n.core.relayer.subscribe(o),n.core.expirer.set(o,s),{topic:o,uri:l}}),this.pair=function(){var i=I(function*(o){n.isInitialized(),n.isValidPair(o);const{topic:s,symKey:a,relay:h}=function _p(r){const e=r.indexOf(":"),t=-1!==r.indexOf("?")?r.indexOf("?"):void 0,n=r.substring(0,e),i=r.substring(e+1,t).split("@"),o=typeof t<"u"?r.substring(t):"",s=Dr.parse(o);return{protocol:n,topic:i[0],version:parseInt(i[1],10),symKey:s.symKey,relay:gp(s)}}(o.uri),l=Rt(Q.FIVE_MINUTES),f={topic:s,relay:h,expiry:l,active:!1};return yield n.pairings.set(s,f),yield n.core.crypto.setSymKey(a,s),yield n.core.relayer.subscribe(s,{relay:h}),n.core.expirer.set(s,l),o.activatePairing&&(yield n.activate({topic:s})),f});return function(o){return i.apply(this,arguments)}}(),this.activate=function(){var i=I(function*({topic:o}){n.isInitialized();const s=Rt(Q.THIRTY_DAYS);yield n.pairings.update(o,{active:!0,expiry:s}),n.core.expirer.set(o,s)});return function(o){return i.apply(this,arguments)}}(),this.ping=function(){var i=I(function*(o){n.isInitialized(),yield n.isValidPing(o);const{topic:s}=o;if(n.pairings.keys.includes(s)){const a=yield n.sendRequest(s,"wc_pairingPing",{}),{done:h,resolve:l,reject:f}=sr();n.events.once(ke("pairing_ping",a),({error:_})=>{_?f(_):l()}),yield h()}});return function(o){return i.apply(this,arguments)}}(),this.updateExpiry=function(){var i=I(function*({topic:o,expiry:s}){n.isInitialized(),yield n.pairings.update(o,{expiry:s})});return function(o){return i.apply(this,arguments)}}(),this.updateMetadata=function(){var i=I(function*({topic:o,metadata:s}){n.isInitialized(),yield n.pairings.update(o,{peerMetadata:s})});return function(o){return i.apply(this,arguments)}}(),this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=function(){var i=I(function*(o){n.isInitialized(),yield n.isValidDisconnect(o);const{topic:s}=o;n.pairings.keys.includes(s)&&(yield n.sendRequest(s,"wc_pairingDelete",qe("USER_DISCONNECTED")),yield n.deletePairing(s))});return function(o){return i.apply(this,arguments)}}(),this.sendRequest=function(){var i=I(function*(o,s,a){const h=vn(s,a),l=yield n.core.crypto.encode(o,h),f=Gr[s].req;return n.core.history.set(o,h),yield n.core.relayer.publish(o,l,f),h.id});return function(o,s,a){return i.apply(this,arguments)}}(),this.sendResult=function(){var i=I(function*(o,s,a){const h=Ti(o,a),l=yield n.core.crypto.encode(s,h),f=yield n.core.history.get(s,o),_=Gr[f.request.method].res;yield n.core.relayer.publish(s,l,_),yield n.core.history.resolve(h)});return function(o,s,a){return i.apply(this,arguments)}}(),this.sendError=function(){var i=I(function*(o,s,a){const h=mn(o,a),l=yield n.core.crypto.encode(s,h),f=yield n.core.history.get(s,o),_=Gr[f.request.method]?Gr[f.request.method].res:Gr.unregistered_method.res;yield n.core.relayer.publish(s,l,_),yield n.core.history.resolve(h)});return function(o,s,a){return i.apply(this,arguments)}}(),this.deletePairing=function(){var i=I(function*(o,s){yield n.core.relayer.unsubscribe(o),yield Promise.all([n.pairings.delete(o,qe("USER_DISCONNECTED")),n.core.crypto.deleteSymKey(o),s?Promise.resolve():n.core.expirer.del(o)])});return function(o,s){return i.apply(this,arguments)}}(),this.cleanup=I(function*(){const i=n.pairings.getAll().filter(o=>Gt(o.expiry));yield Promise.all(i.map(o=>n.deletePairing(o.topic)))}),this.onRelayEventRequest=i=>{const{topic:o,payload:s}=i,a=s.method;if(this.pairings.keys.includes(o))switch(a){case"wc_pairingPing":return this.onPairingPingRequest(o,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,s);default:return this.onUnknownRpcMethodRequest(o,s)}},this.onRelayEventResponse=function(){var i=I(function*(o){const{topic:s,payload:a}=o,h=(yield n.core.history.get(s,a.id)).request.method;if(n.pairings.keys.includes(s))return"wc_pairingPing"===h?n.onPairingPingResponse(s,a):n.onUnknownRpcMethodResponse(h)});return function(o){return i.apply(this,arguments)}}(),this.onPairingPingRequest=function(){var i=I(function*(o,s){const{id:a}=s;try{n.isValidPing({topic:o}),yield n.sendResult(a,o,!0),n.events.emit("pairing_ping",{id:a,topic:o})}catch(h){yield n.sendError(a,o,h),n.logger.error(h)}});return function(o,s){return i.apply(this,arguments)}}(),this.onPairingPingResponse=(i,o)=>{const{id:s}=o;setTimeout(()=>{zt(o)?this.events.emit(ke("pairing_ping",s),{}):Pt(o)&&this.events.emit(ke("pairing_ping",s),{error:o.error})},500)},this.onPairingDeleteRequest=function(){var i=I(function*(o,s){const{id:a}=s;try{n.isValidDisconnect({topic:o}),yield n.sendResult(a,o,!0),yield n.deletePairing(o),n.events.emit("pairing_delete",{id:a,topic:o})}catch(h){yield n.sendError(a,o,h),n.logger.error(h)}});return function(o,s){return i.apply(this,arguments)}}(),this.onUnknownRpcMethodRequest=function(){var i=I(function*(o,s){const{id:a,method:h}=s;try{if(n.registeredMethods.includes(h))return;const l=qe("WC_METHOD_UNSUPPORTED",h);yield n.sendError(a,o,l),n.logger.error(l)}catch(l){yield n.sendError(a,o,l),n.logger.error(l)}});return function(o,s){return i.apply(this,arguments)}}(),this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(qe("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!mt(i)){const{message:o}=q("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(o)}if(!function Pp(r){if(nt(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}(i.uri)){const{message:o}=q("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(o)}},this.isValidPing=function(){var i=I(function*(o){if(!mt(o)){const{message:a}=q("MISSING_OR_INVALID",`ping() params: ${o}`);throw new Error(a)}const{topic:s}=o;yield n.isValidPairingTopic(s)});return function(o){return i.apply(this,arguments)}}(),this.isValidDisconnect=function(){var i=I(function*(o){if(!mt(o)){const{message:a}=q("MISSING_OR_INVALID",`disconnect() params: ${o}`);throw new Error(a)}const{topic:s}=o;yield n.isValidPairingTopic(s)});return function(o){return i.apply(this,arguments)}}(),this.isValidPairingTopic=function(){var i=I(function*(o){if(!nt(o,!1)){const{message:s}=q("MISSING_OR_INVALID",`pairing topic should be a string: ${o}`);throw new Error(s)}if(!n.pairings.keys.includes(o)){const{message:s}=q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${o}`);throw new Error(s)}if(Gt(n.pairings.get(o).expiry)){yield n.deletePairing(o);const{message:s}=q("EXPIRED",`pairing topic: ${o}`);throw new Error(s)}});return function(o){return i.apply(this,arguments)}}(),this.core=e,this.logger=xe.generateChildLogger(t,this.name),this.pairings=new Sn(this.core,this.logger,this.name,this.storagePrefix)}get context(){return xe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){var e=this;this.core.relayer.on(ut_message,function(){var t=I(function*(n){const{topic:i,message:o}=n;if(e.ignoredPayloadTypes.includes(e.core.crypto.getPayloadType(o)))return;const s=yield e.core.crypto.decode(i,o);Li(s)?(e.core.history.set(i,s),e.onRelayEventRequest({topic:i,payload:s})):Ri(s)&&(yield e.core.history.resolve(s),e.onRelayEventResponse({topic:i,payload:s}))});return function(n){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.core.expirer.on(It_expired,function(){var t=I(function*(n){const{topic:i}=Qs(n.target);i&&e.pairings.keys.includes(i)&&(yield e.deletePairing(i,!0),e.events.emit("pairing_expire",{topic:i}))});return function(n){return t.apply(this,arguments)}}())}}class e0 extends Nl{constructor(e,t){var n;super(e,t),n=this,this.core=e,this.logger=t,this.records=new Map,this.events=new at.exports.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){n.initialized||(n.logger.trace("Initialized"),yield n.restore(),n.cached.forEach(i=>n.records.set(i.id,i)),n.cached=[],n.registerEventListeners(),n.initialized=!0)}),this.set=(i,o,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:o,chainId:s}),this.records.has(o.id))return;const a={id:o.id,topic:i,request:{method:o.method,params:o.params||null},chainId:s};this.records.set(a.id,a),this.events.emit(jt_created,a)},this.resolve=function(){var i=I(function*(o){if(n.isInitialized(),n.logger.debug("Updating JSON-RPC response history record"),n.logger.trace({type:"method",method:"update",response:o}),!n.records.has(o.id))return;const s=yield n.getRecord(o.id);typeof s.response>"u"&&(s.response=Pt(o)?{error:o.error}:{result:o.result},n.records.set(s.id,s),n.events.emit(jt_updated,s))});return function(o){return i.apply(this,arguments)}}(),this.get=function(){var i=I(function*(o,s){return n.isInitialized(),n.logger.debug("Getting record"),n.logger.trace({type:"method",method:"get",topic:o,id:s}),yield n.getRecord(s)});return function(o,s){return i.apply(this,arguments)}}(),this.delete=(i,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(s=>{if(s.topic===i){if(typeof o<"u"&&s.id!==o)return;this.records.delete(s.id),this.events.emit(jt_deleted,s)}})},this.exists=function(){var i=I(function*(o,s){return n.isInitialized(),!!n.records.has(s)&&(yield n.getRecord(s)).topic===o});return function(o,s){return i.apply(this,arguments)}}(),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=xe.generateChildLogger(t,this.name)}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:vn(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)}),e}setJsonRpcRecords(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getJsonRpcRecords(){var e=this;return I(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}persist(){var e=this;return I(function*(){yield e.setJsonRpcRecords(e.values),e.events.emit(jt_sync)})()}restore(){var e=this;return I(function*(){try{const t=yield e.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(e.records.size){const{message:n}=q("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(n),new Error(n)}e.cached=t,e.logger.debug(`Successfully Restored records for ${e.name}`),e.logger.trace({type:"method",method:"restore",records:e.values})}catch(t){e.logger.debug(`Failed to Restore records for ${e.name}`),e.logger.error(t)}})()}registerEventListeners(){this.events.on(jt_created,e=>{const t=jt_created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(jt_updated,e=>{const t=jt_updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(jt_deleted,e=>{const t=jt_deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class t0 extends Cl{constructor(e,t){var n;super(e,t),n=this,this.core=e,this.logger=t,this.expirations=new Map,this.events=new at.exports.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){n.initialized||(n.logger.trace("Initialized"),yield n.restore(),n.cached.forEach(i=>n.expirations.set(i.target,i)),n.cached=[],n.registerEventListeners(),n.initialized=!0)}),this.has=i=>{try{const o=this.formatTarget(i);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(i,o)=>{this.isInitialized();const s=this.formatTarget(i),a={target:s,expiry:o};this.expirations.set(s,a),this.checkExpiry(s,a),this.events.emit(It_created,{target:s,expiration:a})},this.get=i=>{this.isInitialized();const o=this.formatTarget(i);return this.getExpiration(o)},this.del=i=>{if(this.isInitialized(),this.has(i)){const o=this.formatTarget(i),s=this.getExpiration(o);this.expirations.delete(o),this.events.emit(It_deleted,{target:o,expiration:s})}},this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=xe.generateChildLogger(t,this.name)}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function up(r){return Zs("topic",r)}(e);if("number"==typeof e)return function lp(r){return Zs("id",r)}(e);const{message:t}=q("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}setExpirations(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getExpirations(){var e=this;return I(function*(){return yield e.core.storage.getItem(e.storageKey)})()}persist(){var e=this;return I(function*(){yield e.setExpirations(e.values),e.events.emit(It_sync)})()}restore(){var e=this;return I(function*(){try{const t=yield e.getExpirations();if(typeof t>"u"||!t.length)return;if(e.expirations.size){const{message:n}=q("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(n),new Error(n)}e.cached=t,e.logger.debug(`Successfully Restored expirations for ${e.name}`),e.logger.trace({type:"method",method:"restore",expirations:e.values})}catch(t){e.logger.debug(`Failed to Restore expirations for ${e.name}`),e.logger.error(t)}})()}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}checkExpiry(e,t){const{expiry:n}=t;Q.toMiliseconds(n)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(It_expired,{target:e,expiration:t})}checkExpirations(){this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(xr.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(It_created,e=>{const t=It_created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(It_expired,e=>{const t=It_expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(It_deleted,e=>{const t=It_deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var r0=Object.defineProperty,Ya=Object.getOwnPropertySymbols,n0=Object.prototype.hasOwnProperty,i0=Object.prototype.propertyIsEnumerable,Ja=(r,e,t)=>e in r?r0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Xa=(r,e)=>{for(var t in e||(e={}))n0.call(e,t)&&Ja(r,t,e[t]);if(Ya)for(var t of Ya(e))i0.call(e,t)&&Ja(r,t,e[t]);return r};class zi extends Al{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=Di,this.events=new at.exports.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e?.projectId;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Pe(xe.getDefaultLoggerOptions({level:e?.logger||u1_logger}));this.logger=xe.generateChildLogger(t,this.name),this.heartbeat=new xr.HeartBeat,this.crypto=new j1(this,this.logger,e?.keychain),this.history=new e0(this,this.logger),this.expirer=new t0(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new au(Xa(Xa({},l1),e?.storageOptions)),this.relayer=new Y1({core:this,logger:this.logger,relayUrl:e?.relayUrl,projectId:this.projectId}),this.pairing=new Q1(this,this.logger)}static init(e){return I(function*(){const t=new zi(e);return yield t.initialize(),t})()}get context(){return xe.getLoggerContext(this.logger)}start(){var e=this;return I(function*(){e.initialized||(yield e.initialize())})()}initialize(){var e=this;return I(function*(){e.logger.trace("Initialized");try{yield e.crypto.init(),yield e.history.init(),yield e.expirer.init(),yield e.relayer.init(),yield e.heartbeat.init(),yield e.pairing.init(),e.initialized=!0,e.logger.info("Core Initialization Success")}catch(t){throw e.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),e.logger.error(t.message),t}})()}}const o0=zi,Bi="wc@2:client:",Ki_name="client",Ki_logger="error",On=Q.SEVEN_DAYS,Wr={wc_sessionPropose:{req:{ttl:Q.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Q.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Q.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1115}}},Hi={min:Q.FIVE_MINUTES,max:Q.SEVEN_DAYS};var l0=Object.defineProperty,h0=Object.defineProperties,f0=Object.getOwnPropertyDescriptors,tc=Object.getOwnPropertySymbols,d0=Object.prototype.hasOwnProperty,p0=Object.prototype.propertyIsEnumerable,rc=(r,e,t)=>e in r?l0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Bt=(r,e)=>{for(var t in e||(e={}))d0.call(e,t)&&rc(r,t,e[t]);if(tc)for(var t of tc(e))p0.call(e,t)&&rc(r,t,e[t]);return r},Vi=(r,e)=>h0(r,f0(e));class y0 extends class Dl{constructor(e){this.client=e}}{constructor(e){var t;super(e),t=this,this.name="engine",this.events=new at.exports,this.initialized=!1,this.ignoredPayloadTypes=[1],this.init=I(function*(){t.initialized||(yield t.cleanup(),t.registerRelayerEvents(),t.registerExpirerEvents(),t.client.core.pairing.register({methods:Object.keys(Wr)}),t.initialized=!0)}),this.connect=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidConnect(i);const{pairingTopic:o,requiredNamespaces:s,relays:a}=i;let l,h=o,f=!1;if(h&&(f=t.client.core.pairing.pairings.get(h).active),!h||!f){const{topic:F,uri:A}=yield t.client.core.pairing.create();h=F,l=A}const _=yield t.client.core.crypto.generateKeyPair(),v={requiredNamespaces:s,relays:a??[{protocol:"irn"}],proposer:{publicKey:_,metadata:t.client.metadata}},{reject:E,resolve:b,done:L}=sr();if(t.events.once(ke("session_connect"),function(){var F=I(function*({error:A,session:g}){if(A)E(A);else if(g){g.self.publicKey=_;const O=Vi(Bt({},g),{requiredNamespaces:g.requiredNamespaces});yield t.client.session.set(g.topic,O),yield t.setExpiry(g.topic,g.expiry),h&&(yield t.client.core.pairing.updateMetadata({topic:h,metadata:g.peer.metadata})),b(O)}});return function(A){return F.apply(this,arguments)}}()),!h){const{message:F}=q("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(F)}const C=yield t.sendRequest(h,"wc_sessionPropose",v),H=Rt(Q.FIVE_MINUTES);return yield t.setProposal(C,Bt({id:C,expiry:H},v)),{uri:l,approval:L}});return function(i){return n.apply(this,arguments)}}(),this.pair=function(){var n=I(function*(i){return t.isInitialized(),yield t.client.core.pairing.pair(i)});return function(i){return n.apply(this,arguments)}}(),this.approve=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidApprove(i);const{id:o,relayProtocol:s,namespaces:a}=i,h=t.client.proposal.get(o);let{pairingTopic:l,proposer:f,requiredNamespaces:_}=h;gn(_)||(_=function Sp(r,e){const t=_n(r,e);if(t)throw new Error(t.message);const n={};for(const[i,o]of Object.entries(r))n[i]={methods:o.methods,events:o.events,chains:o.accounts.map(s=>`${s.split(":")[0]}:${s.split(":")[1]}`)};return n}(a,"approve()"),t.client.proposal.set(o,Vi(Bt({},h),{requiredNamespaces:_})));const v=yield t.client.core.crypto.generateKeyPair(),E=f.publicKey,b=yield t.client.core.crypto.generateSharedKey(v,E),L={relay:{protocol:s??"irn"},namespaces:a,requiredNamespaces:_,controller:{publicKey:v,metadata:t.client.metadata},expiry:Rt(On)};yield t.client.core.relayer.subscribe(b);const C=yield t.sendRequest(b,"wc_sessionSettle",L),{done:H,resolve:F,reject:A}=sr();t.events.once(ke("session_approve",C),({error:O})=>{O?A(O):F(t.client.session.get(b))});const g=Vi(Bt({},L),{topic:b,acknowledged:!1,self:L.controller,peer:{publicKey:f.publicKey,metadata:f.metadata},controller:v});return yield t.client.session.set(b,g),yield t.setExpiry(b,Rt(On)),l&&(yield t.client.core.pairing.updateMetadata({topic:l,metadata:g.peer.metadata})),l&&o&&(yield t.sendResult(o,l,{relay:{protocol:s??"irn"},responderPublicKey:v}),yield t.client.proposal.delete(o,qe("USER_DISCONNECTED")),yield t.client.core.pairing.activate({topic:l})),{topic:b,acknowledged:H}});return function(i){return n.apply(this,arguments)}}(),this.reject=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidReject(i);const{id:o,reason:s}=i,{pairingTopic:a}=t.client.proposal.get(o);a&&(yield t.sendError(o,a,s),yield t.client.proposal.delete(o,qe("USER_DISCONNECTED")))});return function(i){return n.apply(this,arguments)}}(),this.update=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidUpdate(i);const{topic:o,namespaces:s}=i,a=yield t.sendRequest(o,"wc_sessionUpdate",{namespaces:s}),{done:h,resolve:l,reject:f}=sr();return t.events.once(ke("session_update",a),({error:_})=>{_?f(_):l()}),yield t.client.session.update(o,{namespaces:s}),{acknowledged:h}});return function(i){return n.apply(this,arguments)}}(),this.extend=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidExtend(i);const{topic:o}=i,s=yield t.sendRequest(o,"wc_sessionExtend",{}),{done:a,resolve:h,reject:l}=sr();return t.events.once(ke("session_extend",s),({error:f})=>{f?l(f):h()}),yield t.setExpiry(o,Rt(On)),{acknowledged:a}});return function(i){return n.apply(this,arguments)}}(),this.request=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidRequest(i);const{chainId:o,request:s,topic:a,expiry:h}=i,l=yield t.sendRequest(a,"wc_sessionRequest",{request:s,chainId:o},h),{done:f,resolve:_,reject:v}=sr(h);return t.events.once(ke("session_request",l),({error:E,result:b})=>{E?v(E):_(b)}),yield f()});return function(i){return n.apply(this,arguments)}}(),this.respond=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidRespond(i);const{topic:o,response:s}=i,{id:a}=s;zt(s)?yield t.sendResult(a,o,s.result):Pt(s)&&(yield t.sendError(a,o,s.error)),t.deletePendingSessionRequest(i.response.id,{message:"fulfilled",code:0})});return function(i){return n.apply(this,arguments)}}(),this.ping=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidPing(i);const{topic:o}=i;if(t.client.session.keys.includes(o)){const s=yield t.sendRequest(o,"wc_sessionPing",{}),{done:a,resolve:h,reject:l}=sr();t.events.once(ke("session_ping",s),({error:f})=>{f?l(f):h()}),yield a()}else t.client.core.pairing.pairings.keys.includes(o)&&(yield t.client.core.pairing.ping({topic:o}))});return function(i){return n.apply(this,arguments)}}(),this.emit=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidEmit(i);const{topic:o,event:s,chainId:a}=i;yield t.sendRequest(o,"wc_sessionEvent",{event:s,chainId:a})});return function(i){return n.apply(this,arguments)}}(),this.disconnect=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidDisconnect(i);const{topic:o}=i;t.client.session.keys.includes(o)?(yield t.sendRequest(o,"wc_sessionDelete",qe("USER_DISCONNECTED")),yield t.deleteSession(o)):yield t.client.core.pairing.disconnect({topic:o})});return function(i){return n.apply(this,arguments)}}(),this.find=n=>(this.isInitialized(),this.client.session.getAll().filter(i=>function Fp(r,e){const{requiredNamespaces:t}=e,n=Object.keys(r.namespaces),i=Object.keys(t);let o=!0;return!!qt(i,n)&&(n.forEach(s=>{const{accounts:a,methods:h,events:l}=r.namespaces[s],f=Br(a),_=t[s];qt(_.chains,f)&&qt(_.methods,h)&&qt(_.events,l)||(o=!1)}),o)}(i,n))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=function(){var n=I(function*(i,o){const{self:s}=t.client.session.get(i);yield t.client.core.relayer.unsubscribe(i),yield Promise.all([t.client.session.delete(i,qe("USER_DISCONNECTED")),t.client.core.crypto.deleteKeyPair(s.publicKey),t.client.core.crypto.deleteSymKey(i),o?Promise.resolve():t.client.core.expirer.del(i)])});return function(i,o){return n.apply(this,arguments)}}(),this.deleteProposal=function(){var n=I(function*(i,o){yield Promise.all([t.client.proposal.delete(i,qe("USER_DISCONNECTED")),o?Promise.resolve():t.client.core.expirer.del(i)])});return function(i,o){return n.apply(this,arguments)}}(),this.deletePendingSessionRequest=function(){var n=I(function*(i,o,s=!1){yield Promise.all([t.client.pendingRequest.delete(i,o),s?Promise.resolve():t.client.core.expirer.del(i)])});return function(i,o){return n.apply(this,arguments)}}(),this.setExpiry=function(){var n=I(function*(i,o){t.client.session.keys.includes(i)&&(yield t.client.session.update(i,{expiry:o})),t.client.core.expirer.set(i,o)});return function(i,o){return n.apply(this,arguments)}}(),this.setProposal=function(){var n=I(function*(i,o){yield t.client.proposal.set(i,o),t.client.core.expirer.set(i,o.expiry)});return function(i,o){return n.apply(this,arguments)}}(),this.setPendingSessionRequest=function(){var n=I(function*(i){const o=Wr.wc_sessionRequest.req.ttl,{id:s,topic:a,params:h}=i;yield t.client.pendingRequest.set(s,{id:s,topic:a,params:h}),o&&t.client.core.expirer.set(s,Rt(o))});return function(i){return n.apply(this,arguments)}}(),this.sendRequest=function(){var n=I(function*(i,o,s,a){const h=vn(o,s),l=yield t.client.core.crypto.encode(i,h),f=Wr[o].req;return a&&(f.ttl=a),t.client.core.history.set(i,h),t.client.core.relayer.publish(i,l,f),h.id});return function(i,o,s,a){return n.apply(this,arguments)}}(),this.sendResult=function(){var n=I(function*(i,o,s){const a=Ti(i,s),h=yield t.client.core.crypto.encode(o,a),l=yield t.client.core.history.get(o,i);t.client.core.relayer.publish(o,h,Wr[l.request.method].res),yield t.client.core.history.resolve(a)});return function(i,o,s){return n.apply(this,arguments)}}(),this.sendError=function(){var n=I(function*(i,o,s){const a=mn(i,s),h=yield t.client.core.crypto.encode(o,a),l=yield t.client.core.history.get(o,i);t.client.core.relayer.publish(o,h,Wr[l.request.method].res),yield t.client.core.history.resolve(a)});return function(i,o,s){return n.apply(this,arguments)}}(),this.cleanup=I(function*(){const n=[],i=[];t.client.session.getAll().forEach(o=>{Gt(o.expiry)&&n.push(o.topic)}),t.client.proposal.getAll().forEach(o=>{Gt(o.expiry)&&i.push(o.id)}),yield Promise.all([...n.map(o=>t.deleteSession(o)),...i.map(o=>t.deleteProposal(o))])}),this.onRelayEventRequest=n=>{const{topic:i,payload:o}=n,s=o.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(i,o);case"wc_sessionSettle":return this.onSessionSettleRequest(i,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,o);case"wc_sessionExtend":return this.onSessionExtendRequest(i,o);case"wc_sessionPing":return this.onSessionPingRequest(i,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,o);case"wc_sessionRequest":return this.onSessionRequest(i,o);case"wc_sessionEvent":return this.onSessionEventRequest(i,o);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=function(){var n=I(function*(i){const{topic:o,payload:s}=i,a=(yield t.client.core.history.get(o,s.id)).request.method;switch(a){case"wc_sessionPropose":return t.onSessionProposeResponse(o,s);case"wc_sessionSettle":return t.onSessionSettleResponse(o,s);case"wc_sessionUpdate":return t.onSessionUpdateResponse(o,s);case"wc_sessionExtend":return t.onSessionExtendResponse(o,s);case"wc_sessionPing":return t.onSessionPingResponse(o,s);case"wc_sessionRequest":return t.onSessionRequestResponse(o,s);default:return t.client.logger.info(`Unsupported response method ${a}`)}});return function(i){return n.apply(this,arguments)}}(),this.onSessionProposeRequest=function(){var n=I(function*(i,o){const{params:s,id:a}=o;try{t.isValidConnect(Bt({},o.params));const h=Rt(Q.FIVE_MINUTES),l=Bt({id:a,pairingTopic:i,expiry:h},s);yield t.setProposal(a,l),t.client.events.emit("session_proposal",{id:a,params:l})}catch(h){yield t.sendError(a,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionProposeResponse=function(){var n=I(function*(i,o){const{id:s}=o;if(zt(o)){const{result:a}=o;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:a});const h=t.client.proposal.get(s);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:h});const l=h.proposer.publicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const f=a.responderPublicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:f});const _=yield t.client.core.crypto.generateSharedKey(l,f);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:_});const v=yield t.client.core.relayer.subscribe(_);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:v}),yield t.client.core.pairing.activate({topic:i})}else Pt(o)&&(yield t.client.proposal.delete(s,qe("USER_DISCONNECTED")),t.events.emit(ke("session_connect"),{error:o.error}))});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionSettleRequest=function(){var n=I(function*(i,o){const{id:s,params:a}=o;try{t.isValidSessionSettleRequest(a);const{relay:h,controller:l,expiry:f,namespaces:_,requiredNamespaces:v}=o.params,E={topic:i,relay:h,expiry:f,namespaces:_,acknowledged:!0,requiredNamespaces:v,controller:l.publicKey,self:{publicKey:"",metadata:t.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}};yield t.sendResult(o.id,i,!0),t.events.emit(ke("session_connect"),{session:E})}catch(h){yield t.sendError(s,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionSettleResponse=function(){var n=I(function*(i,o){const{id:s}=o;zt(o)?(yield t.client.session.update(i,{acknowledged:!0}),t.events.emit(ke("session_approve",s),{})):Pt(o)&&(yield t.client.session.delete(i,qe("USER_DISCONNECTED")),t.events.emit(ke("session_approve",s),{error:o.error}))});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionUpdateRequest=function(){var n=I(function*(i,o){const{params:s,id:a}=o;try{t.isValidUpdate(Bt({topic:i},s)),yield t.client.session.update(i,{namespaces:s.namespaces}),yield t.sendResult(a,i,!0),t.client.events.emit("session_update",{id:a,topic:i,params:s})}catch(h){yield t.sendError(a,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionUpdateResponse=(n,i)=>{const{id:o}=i;zt(i)?this.events.emit(ke("session_update",o),{}):Pt(i)&&this.events.emit(ke("session_update",o),{error:i.error})},this.onSessionExtendRequest=function(){var n=I(function*(i,o){const{id:s}=o;try{t.isValidExtend({topic:i}),yield t.setExpiry(i,Rt(On)),yield t.sendResult(s,i,!0),t.client.events.emit("session_extend",{id:s,topic:i})}catch(a){yield t.sendError(s,i,a),t.client.logger.error(a)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionExtendResponse=(n,i)=>{const{id:o}=i;zt(i)?this.events.emit(ke("session_extend",o),{}):Pt(i)&&this.events.emit(ke("session_extend",o),{error:i.error})},this.onSessionPingRequest=function(){var n=I(function*(i,o){const{id:s}=o;try{t.isValidPing({topic:i}),yield t.sendResult(s,i,!0),t.client.events.emit("session_ping",{id:s,topic:i})}catch(a){yield t.sendError(s,i,a),t.client.logger.error(a)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionPingResponse=(n,i)=>{const{id:o}=i;setTimeout(()=>{zt(i)?this.events.emit(ke("session_ping",o),{}):Pt(i)&&this.events.emit(ke("session_ping",o),{error:i.error})},500)},this.onSessionDeleteRequest=function(){var n=I(function*(i,o){const{id:s}=o;try{t.isValidDisconnect({topic:i,reason:o.params}),t.client.core.relayer.once(ut_publish,I(function*(){yield t.deleteSession(i)})),yield t.sendResult(s,i,!0),t.client.events.emit("session_delete",{id:s,topic:i})}catch(a){yield t.sendError(s,i,a),t.client.logger.error(a)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionRequest=function(){var n=I(function*(i,o){const{id:s,params:a}=o;try{t.isValidRequest(Bt({topic:i},a)),yield t.setPendingSessionRequest({id:s,topic:i,params:a}),t.client.events.emit("session_request",{id:s,topic:i,params:a})}catch(h){yield t.sendError(s,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionRequestResponse=(n,i)=>{const{id:o}=i;zt(i)?this.events.emit(ke("session_request",o),{result:i.result}):Pt(i)&&this.events.emit(ke("session_request",o),{error:i.error})},this.onSessionEventRequest=function(){var n=I(function*(i,o){const{id:s,params:a}=o;try{t.isValidEmit(Bt({topic:i},a)),t.client.events.emit("session_event",{id:s,topic:i,params:a})}catch(h){yield t.sendError(s,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.isValidConnect=function(){var n=I(function*(i){if(!mt(i)){const{message:l}=q("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(i)}`);throw new Error(l)}const{pairingTopic:o,requiredNamespaces:s,relays:a}=i;if(Ot(o)||(yield t.isValidPairingTopic(o)),!Ot(s)&&0===gn(s))return;const h=function Mp(r,e){let t=null;if(r&&gn(r)){const n=na(r,e);n&&(t=n);const i=Rp(r,e);i&&(t=i)}else t=q("MISSING_OR_INVALID",`${e}, requiredNamespaces should be an object with data`);return t}(s,"connect()");if(h)throw new Error(h.message);if(!function Dp(r,e){let t=!1;return e&&!r?t=!0:r&&Kr(r)&&r.length&&r.forEach(n=>{t=ia(n)}),t}(a,!0)){const{message:l}=q("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(l)}});return function(i){return n.apply(this,arguments)}}(),this.isValidApprove=function(){var n=I(function*(i){if(!mt(i))throw new Error(q("MISSING_OR_INVALID",`approve() params: ${i}`).message);const{id:o,namespaces:s,relayProtocol:a}=i;yield t.isValidProposalId(o);const h=t.client.proposal.get(o),l=_n(s,"approve()");if(l)throw new Error(l.message);const f=sa(h.requiredNamespaces,s,"update()");if(f)throw new Error(f.message);if(!nt(a,!0)){const{message:_}=q("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(_)}});return function(i){return n.apply(this,arguments)}}(),this.isValidReject=function(){var n=I(function*(i){if(!mt(i)){const{message:a}=q("MISSING_OR_INVALID",`reject() params: ${i}`);throw new Error(a)}const{id:o,reason:s}=i;if(yield t.isValidProposalId(o),!function zp(r){return!!(r&&"object"==typeof r&&r.code&&Ii(r.code,!1)&&r.message&&nt(r.message,!1))}(s)){const{message:a}=q("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(a)}});return function(i){return n.apply(this,arguments)}}(),this.isValidSessionSettleRequest=n=>{if(!mt(n)){const{message:f}=q("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(f)}const{relay:i,controller:o,namespaces:s,expiry:a}=n;if(!ia(i)){const{message:f}=q("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(f)}const h=function Tp(r,e){let t=null;return nt(r?.publicKey,!1)||(t=q("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}(o,"onSessionSettleRequest()");if(h)throw new Error(h.message);const l=_n(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);if(Gt(a)){const{message:f}=q("EXPIRED","onSessionSettleRequest()");throw new Error(f)}},this.isValidUpdate=function(){var n=I(function*(i){if(!mt(i)){const{message:f}=q("MISSING_OR_INVALID",`update() params: ${i}`);throw new Error(f)}const{topic:o,namespaces:s}=i;yield t.isValidSessionTopic(o);const a=t.client.session.get(o),h=_n(s,"update()");if(h)throw new Error(h.message);const l=sa(a.requiredNamespaces,s,"update()");if(l)throw new Error(l.message)});return function(i){return n.apply(this,arguments)}}(),this.isValidExtend=function(){var n=I(function*(i){if(!mt(i)){const{message:s}=q("MISSING_OR_INVALID",`extend() params: ${i}`);throw new Error(s)}const{topic:o}=i;yield t.isValidSessionTopic(o)});return function(i){return n.apply(this,arguments)}}(),this.isValidRequest=function(){var n=I(function*(i){if(!mt(i)){const{message:f}=q("MISSING_OR_INVALID",`request() params: ${i}`);throw new Error(f)}const{topic:o,request:s,chainId:a,expiry:h}=i;yield t.isValidSessionTopic(o);const{namespaces:l}=t.client.session.get(o);if(!oa(l,a)){const{message:f}=q("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(f)}if(!function Bp(r){return!(Ot(r)||!nt(r.method,!1))}(s)){const{message:f}=q("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(f)}if(!Vp(l,a,s.method)){const{message:f}=q("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(f)}if(h&&!function qp(r,e){return Ii(r,!1)&&r<=e.max&&r>=e.min}(h,Hi)){const{message:f}=q("MISSING_OR_INVALID",`request() expiry: ${h}. Expiry must be a number (in seconds) between ${Hi.min} and ${Hi.max}`);throw new Error(f)}});return function(i){return n.apply(this,arguments)}}(),this.isValidRespond=function(){var n=I(function*(i){if(!mt(i)){const{message:a}=q("MISSING_OR_INVALID",`respond() params: ${i}`);throw new Error(a)}const{topic:o,response:s}=i;if(yield t.isValidSessionTopic(o),!function Kp(r){return!(Ot(r)||Ot(r.result)&&Ot(r.error)||!Ii(r.id,!1)||!nt(r.jsonrpc,!1))}(s)){const{message:a}=q("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(a)}});return function(i){return n.apply(this,arguments)}}(),this.isValidPing=function(){var n=I(function*(i){if(!mt(i)){const{message:s}=q("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(s)}const{topic:o}=i;yield t.isValidSessionOrPairingTopic(o)});return function(i){return n.apply(this,arguments)}}(),this.isValidEmit=function(){var n=I(function*(i){if(!mt(i)){const{message:l}=q("MISSING_OR_INVALID",`emit() params: ${i}`);throw new Error(l)}const{topic:o,event:s,chainId:a}=i;yield t.isValidSessionTopic(o);const{namespaces:h}=t.client.session.get(o);if(!oa(h,a)){const{message:l}=q("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(l)}if(!function Hp(r){return!(Ot(r)||!nt(r.name,!1))}(s)){const{message:l}=q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}if(!$p(h,a,s.name)){const{message:l}=q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}});return function(i){return n.apply(this,arguments)}}(),this.isValidDisconnect=function(){var n=I(function*(i){if(!mt(i)){const{message:s}=q("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(s)}const{topic:o}=i;yield t.isValidSessionOrPairingTopic(o)});return function(i){return n.apply(this,arguments)}}()}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){var e=this;this.client.core.relayer.on(ut_message,function(){var t=I(function*(n){const{topic:i,message:o}=n;if(e.ignoredPayloadTypes.includes(e.client.core.crypto.getPayloadType(o)))return;const s=yield e.client.core.crypto.decode(i,o);Li(s)?(e.client.core.history.set(i,s),e.onRelayEventRequest({topic:i,payload:s})):Ri(s)&&(yield e.client.core.history.resolve(s),e.onRelayEventResponse({topic:i,payload:s}))});return function(n){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.client.core.expirer.on(It_expired,function(){var t=I(function*(n){const{topic:i,id:o}=Qs(n.target);if(o&&e.client.pendingRequest.keys.includes(o))return yield e.deletePendingSessionRequest(o,q("EXPIRED"),!0);i?e.client.session.keys.includes(i)&&(yield e.deleteSession(i,!0),e.client.events.emit("session_expire",{topic:i})):o&&(yield e.deleteProposal(o,!0),e.client.events.emit("proposal_expire",{id:o}))});return function(n){return t.apply(this,arguments)}}())}isValidPairingTopic(e){if(!nt(e,!1)){const{message:t}=q("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Gt(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=q("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}isValidSessionTopic(e){var t=this;return I(function*(){if(!nt(e,!1)){const{message:n}=q("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(!t.client.session.keys.includes(e)){const{message:n}=q("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Gt(t.client.session.get(e).expiry)){yield t.deleteSession(e);const{message:n}=q("EXPIRED",`session topic: ${e}`);throw new Error(n)}})()}isValidSessionOrPairingTopic(e){var t=this;return I(function*(){if(t.client.session.keys.includes(e))yield t.isValidSessionTopic(e);else{if(!t.client.core.pairing.pairings.keys.includes(e)){if(nt(e,!1)){const{message:n}=q("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}{const{message:n}=q("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}t.isValidPairingTopic(e)}})()}isValidProposalId(e){var t=this;return I(function*(){if(!function kp(r){return"number"==typeof r}(e)){const{message:n}=q("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!t.client.proposal.keys.includes(e)){const{message:n}=q("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Gt(t.client.proposal.get(e).expiry)){yield t.deleteProposal(e);const{message:n}=q("EXPIRED",`proposal id: ${e}`);throw new Error(n)}})()}}class g0 extends Sn{constructor(e,t){super(e,t,"proposal",Bi),this.core=e,this.logger=t}}class _0 extends Sn{constructor(e,t){super(e,t,"session",Bi),this.core=e,this.logger=t}}class v0 extends Sn{constructor(e,t){super(e,t,"request",Bi),this.core=e,this.logger=t}}class $i extends class Ml{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}{constructor(e){var t;super(e),t=this,this.protocol="wc",this.version=2,this.name=Ki_name,this.events=new at.exports.EventEmitter,this.on=(i,o)=>this.events.on(i,o),this.once=(i,o)=>this.events.once(i,o),this.off=(i,o)=>this.events.off(i,o),this.removeListener=(i,o)=>this.events.removeListener(i,o),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=function(){var i=I(function*(o){try{return yield t.engine.connect(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.pair=function(){var i=I(function*(o){try{return yield t.engine.pair(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.approve=function(){var i=I(function*(o){try{return yield t.engine.approve(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.reject=function(){var i=I(function*(o){try{return yield t.engine.reject(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.update=function(){var i=I(function*(o){try{return yield t.engine.update(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.extend=function(){var i=I(function*(o){try{return yield t.engine.extend(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.request=function(){var i=I(function*(o){try{return yield t.engine.request(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.respond=function(){var i=I(function*(o){try{return yield t.engine.respond(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.ping=function(){var i=I(function*(o){try{return yield t.engine.ping(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.emit=function(){var i=I(function*(o){try{return yield t.engine.emit(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.disconnect=function(){var i=I(function*(o){try{return yield t.engine.disconnect(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.find=i=>{try{return this.engine.find(i)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=e?.name||Ki_name,this.metadata=e?.metadata||function ip(){return js()||{name:"",description:"",url:"",icons:[""]}}();const n=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Pe(xe.getDefaultLoggerOptions({level:e?.logger||Ki_logger}));this.core=e?.core||new o0(e),this.logger=xe.generateChildLogger(n,this.name),this.session=new _0(this.core,this.logger),this.proposal=new g0(this.core,this.logger),this.pendingRequest=new v0(this.core,this.logger),this.engine=new y0(this)}static init(e){return I(function*(){const t=new $i(e);return yield t.initialize(),t})()}get context(){return xe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}initialize(){var e=this;return I(function*(){e.logger.trace("Initialized");try{yield e.core.start(),yield e.session.init(),yield e.proposal.init(),yield e.pendingRequest.init(),yield e.engine.init(),e.logger.info("SignClient Initialization Success")}catch(t){throw e.logger.info("SignClient Initialization Failure"),e.logger.error(t.message),t}})()}}var qi={exports:{}};!function(r,e){var o,t=typeof self<"u"?self:dt,n=function(){function o(){this.fetch=!1,this.DOMException=t.DOMException}return o.prototype=t,new o}();o=n,function(s){var a_searchParams="URLSearchParams"in o,a_iterable="Symbol"in o&&"iterator"in Symbol,a_blob="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),a_formData="FormData"in o,a_arrayBuffer="ArrayBuffer"in o;if(a_arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(p){return p&&l.indexOf(Object.prototype.toString.call(p))>-1};function _(p){if("string"!=typeof p&&(p=String(p)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(p))throw new TypeError("Invalid character in header field name");return p.toLowerCase()}function v(p){return"string"!=typeof p&&(p=String(p)),p}function E(p){var w={next:function(){var M=p.shift();return{done:void 0===M,value:M}}};return a_iterable&&(w[Symbol.iterator]=function(){return w}),w}function b(p){this.map={},p instanceof b?p.forEach(function(w,M){this.append(M,w)},this):Array.isArray(p)?p.forEach(function(w){this.append(w[0],w[1])},this):p&&Object.getOwnPropertyNames(p).forEach(function(w){this.append(w,p[w])},this)}function L(p){if(p.bodyUsed)return Promise.reject(new TypeError("Already read"));p.bodyUsed=!0}function C(p){return new Promise(function(w,M){p.onload=function(){w(p.result)},p.onerror=function(){M(p.error)}})}function H(p){var w=new FileReader,M=C(w);return w.readAsArrayBuffer(p),M}function g(p){if(p.slice)return p.slice(0);var w=new Uint8Array(p.byteLength);return w.set(new Uint8Array(p)),w.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(p){this._bodyInit=p,p?"string"==typeof p?this._bodyText=p:a_blob&&Blob.prototype.isPrototypeOf(p)?this._bodyBlob=p:a_formData&&FormData.prototype.isPrototypeOf(p)?this._bodyFormData=p:a_searchParams&&URLSearchParams.prototype.isPrototypeOf(p)?this._bodyText=p.toString():a_arrayBuffer&&a_blob&&function h(p){return p&&DataView.prototype.isPrototypeOf(p)}(p)?(this._bodyArrayBuffer=g(p.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(p)||f(p))?this._bodyArrayBuffer=g(p):this._bodyText=p=Object.prototype.toString.call(p):this._bodyText="",this.headers.get("content-type")||("string"==typeof p?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a_searchParams&&URLSearchParams.prototype.isPrototypeOf(p)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a_blob&&(this.blob=function(){var p=L(this);if(p)return p;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?L(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(H)}),this.text=function(){var p=L(this);if(p)return p;if(this._bodyBlob)return function F(p){var w=new FileReader,M=C(w);return w.readAsText(p),M}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function A(p){for(var w=new Uint8Array(p),M=new Array(w.length),D=0;D<w.length;D++)M[D]=String.fromCharCode(w[D]);return M.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a_formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}b.prototype.append=function(p,w){p=_(p),w=v(w);var M=this.map[p];this.map[p]=M?M+", "+w:w},b.prototype.delete=function(p){delete this.map[_(p)]},b.prototype.get=function(p){return p=_(p),this.has(p)?this.map[p]:null},b.prototype.has=function(p){return this.map.hasOwnProperty(_(p))},b.prototype.set=function(p,w){this.map[_(p)]=v(w)},b.prototype.forEach=function(p,w){for(var M in this.map)this.map.hasOwnProperty(M)&&p.call(w,this.map[M],M,this)},b.prototype.keys=function(){var p=[];return this.forEach(function(w,M){p.push(M)}),E(p)},b.prototype.values=function(){var p=[];return this.forEach(function(w){p.push(w)}),E(p)},b.prototype.entries=function(){var p=[];return this.forEach(function(w,M){p.push([M,w])}),E(p)},a_iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function d(p,w){var M=(w=w||{}).body;if(p instanceof d){if(p.bodyUsed)throw new TypeError("Already read");this.url=p.url,this.credentials=p.credentials,w.headers||(this.headers=new b(p.headers)),this.method=p.method,this.mode=p.mode,this.signal=p.signal,!M&&null!=p._bodyInit&&(M=p._bodyInit,p.bodyUsed=!0)}else this.url=String(p);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new b(w.headers)),this.method=function c(p){var w=p.toUpperCase();return S.indexOf(w)>-1?w:p}(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&M)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(M)}function k(p){var w=new FormData;return p.trim().split("&").forEach(function(M){if(M){var D=M.split("="),U=D.shift().replace(/\+/g," "),R=D.join("=").replace(/\+/g," ");w.append(decodeURIComponent(U),decodeURIComponent(R))}}),w}function K(p){var w=new b;return p.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(D){var U=D.split(":"),R=U.shift().trim();if(R){var z=U.join(":").trim();w.append(R,z)}}),w}function G(p,w){w||(w={}),this.type="default",this.status=void 0===w.status?200:w.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in w?w.statusText:"OK",this.headers=new b(w.headers),this.url=w.url||"",this._initBody(p)}d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},O.call(d.prototype),O.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},G.error=function(){var p=new G(null,{status:0,statusText:""});return p.type="error",p};var X=[301,302,303,307,308];G.redirect=function(p,w){if(-1===X.indexOf(w))throw new RangeError("Invalid status code");return new G(null,{status:w,headers:{location:p}})},s.DOMException=o.DOMException;try{new s.DOMException}catch{s.DOMException=function(p,w){this.message=p,this.name=w;var M=Error(p);this.stack=M.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function Z(p,w){return new Promise(function(M,D){var U=new d(p,w);if(U.signal&&U.signal.aborted)return D(new s.DOMException("Aborted","AbortError"));var R=new XMLHttpRequest;function z(){R.abort()}R.onload=function(){var B={status:R.status,statusText:R.statusText,headers:K(R.getAllResponseHeaders()||"")};B.url="responseURL"in R?R.responseURL:B.headers.get("X-Request-URL"),M(new G("response"in R?R.response:R.responseText,B))},R.onerror=function(){D(new TypeError("Network request failed"))},R.ontimeout=function(){D(new TypeError("Network request failed"))},R.onabort=function(){D(new s.DOMException("Aborted","AbortError"))},R.open(U.method,U.url,!0),"include"===U.credentials?R.withCredentials=!0:"omit"===U.credentials&&(R.withCredentials=!1),"responseType"in R&&a_blob&&(R.responseType="blob"),U.headers.forEach(function(B,ee){R.setRequestHeader(ee,B)}),U.signal&&(U.signal.addEventListener("abort",z),R.onreadystatechange=function(){4===R.readyState&&U.signal.removeEventListener("abort",z)}),R.send(typeof U._bodyInit>"u"?null:U._bodyInit)})}Z.polyfill=!0,o.fetch||(o.fetch=Z,o.Headers=b,o.Request=d,o.Response=G),s.Headers=b,s.Request=d,s.Response=G,s.fetch=Z,Object.defineProperty(s,"__esModule",{value:!0})}({}),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e}(qi,qi.exports);var nc=function jn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}(qi.exports);const ic={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class In{constructor(e){if(this.url=e,this.events=new at.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!ga(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(e=this.url){var t=this;return I(function*(){yield t.register(e)})()}close(){var e=this;return I(function*(){if(!e.isAvailable)throw new Error("Connection already closed");e.onClose()})()}send(e,t){var n=this;return I(function*(){n.isAvailable||(yield n.register());try{const i=jr(e),o=yield(yield nc(n.url,Object.assign(Object.assign({},ic),{body:i}))).json();n.onPayload({data:o})}catch(i){n.onError(e.id,i)}})()}register(e=this.url){var t=this;return I(function*(){if(!ga(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(t.registering){const n=t.events.getMaxListeners();return(t.events.listenerCount("register_error")>=n||t.events.listenerCount("open")>=n)&&t.events.setMaxListeners(n+1),new Promise((i,o)=>{t.events.once("register_error",s=>{t.resetMaxListeners(),o(s)}),t.events.once("open",()=>{if(t.resetMaxListeners(),typeof t.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));i()})})}t.url=e,t.registering=!0;try{const n=jr({id:1,jsonrpc:"2.0",method:"test",params:[]});yield nc(e,Object.assign(Object.assign({},ic),{body:n})),t.onOpen()}catch(n){const i=t.parseError(n);throw t.events.emit("register_error",i),t.onClose(),i}})()}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?Zn(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),o=mn(e,n.message||n.toString());this.events.emit("payload",o)}parseError(e,t=this.url){return la(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}function Yt(r,e){let t;return e.rpcMap&&(t=e.rpcMap[function b0(r){return Number(r[0].split(":")[1])}([r])]),t}class w0{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=this.getDefaultChainId()}request(e){var t=this;return I(function*(){var n;switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return t.getAccounts();case"wallet_switchEthereumChain":{const i=e.request.params?null==(n=e.request.params[0])?void 0:n.chainId:"0x0";return t.setDefaultChain(parseInt(i,16).toString()),null}case"eth_chainId":return t.getDefaultChainId()}return t.namespace.methods.includes(e.request.method)?yield t.client.request(e):t.getHttpProvider().request(e.request)})()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){if(this.chainId=parseInt(e),!this.httpProviders[e]){const n=t||Yt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}requestAccounts(){return this.getAccounts()}createHttpProvider(e,t){const n=t||Yt(e,this.namespace);return typeof n>"u"?void 0:new $r(new In(n))}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return parseInt(e.split(":")[1])}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}}class E0{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||Yt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Yt(e,this.namespace);return typeof n>"u"?void 0:new $r(new In(n))}}class S0{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||Yt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Yt(e,this.namespace);return typeof n>"u"?void 0:new $r(new In(n))}}class O0{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||Yt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Yt(e,this.namespace);return typeof n>"u"?void 0:new $r(new In(n))}}const ac="wc@2:universal_provider:";var P0=Object.defineProperty,A0=Object.defineProperties,N0=Object.getOwnPropertyDescriptors,cc=Object.getOwnPropertySymbols,T0=Object.prototype.hasOwnProperty,L0=Object.prototype.propertyIsEnumerable,uc=(r,e,t)=>e in r?P0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,lc=(r,e)=>{for(var t in e||(e={}))T0.call(e,t)&&uc(r,t,e[t]);if(cc)for(var t of cc(e))L0.call(e,t)&&uc(r,t,e[t]);return r};class Fn{constructor(e){this.events=new at.exports,this.rpcProviders={},this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Pe(xe.getDefaultLoggerOptions({level:e?.logger||"error"}))}static init(e){return I(function*(){const t=new Fn(e);return yield t.initialize(),t})()}request(e,t){var n=this;return I(function*(){const[i,o]=n.validateChain(t);if(!n.session)throw new Error("Please call connect() before request()");return yield n.getProvider(i).request({request:lc({},e),chainId:`${i}:${o}`,topic:n.session.topic})})()}sendAsync(e,t,n){this.request(e,n).then(i=>t(null,i)).catch(i=>t(i,void 0))}enable(){var e=this;return I(function*(){if(!e.client)throw new Error("Sign Client not initialized");return e.session||(yield e.connect({namespaces:e.namespaces})),yield e.requestAccounts()})()}disconnect(){var e=this;return I(function*(){var t;if(!e.session)throw new Error("Please call connect() before enable()");yield e.client.disconnect({topic:null==(t=e.session)?void 0:t.topic,reason:qe("USER_DISCONNECTED")}),yield e.cleanup()})()}connect(e){var t=this;return I(function*(){if(!t.client)throw new Error("Sign Client not initialized");const{namespaces:n}=e;return t.setNamespaces(n),t.createProviders(),yield t.cleanupPendingPairings(),!0===e.skipPairing?void 0:yield t.pair(e.pairingTopic)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}pair(e){var t=this;return I(function*(){const{uri:n,approval:i}=yield t.client.connect({pairingTopic:e,requiredNamespaces:t.namespaces});return n&&(t.uri=n,t.events.emit("display_uri",n)),t.session=yield i(),t.onSessionUpdate(),t.onConnect(),t.session})()}setDefaultChain(e,t){try{const[n,i]=this.validateChain(e);this.getProvider(n).setDefaultChain(i,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}cleanupPendingPairings(e={}){var t=this;return I(function*(){t.logger.info("Cleaning up inactive pairings...");const n=t.client.pairing.getAll();if(Kr(n)){for(const i of n)e.deletePairings?t.client.core.expirer.set(i.topic,0):yield t.client.core.relayer.subscriber.unsubscribe(i.topic);t.logger.info(`Inactive pairings cleared: ${n.length}`)}})()}checkStorage(){var e=this;return I(function*(){e.namespaces=(yield e.client.core.storage.getItem(`${ac}/namespaces`))||{},e.namespaces&&e.createProviders(),e.client.session.length&&(e.session=e.client.session.get(e.client.session.keys[e.client.session.keys.length-1]),e.onSessionUpdate())})()}initialize(){var e=this;return I(function*(){e.logger.trace("Initialized"),yield e.createClient(),e.checkStorage(),e.registerEventListeners()})()}createClient(){var e=this;return I(function*(){e.client=e.providerOpts.client||(yield $i.init({logger:e.providerOpts.logger||"error",relayUrl:e.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:e.providerOpts.projectId,metadata:e.providerOpts.metadata,storageOptions:e.providerOpts.storageOptions,name:e.providerOpts.name})),e.logger.trace("SignClient Initialized")})()}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");Object.keys(this.namespaces).forEach(e=>{switch(e){case"eip155":this.rpcProviders[e]=new w0({client:this.client,namespace:this.namespaces[e],events:this.events});break;case"solana":this.rpcProviders[e]=new E0({client:this.client,namespace:this.namespaces[e],events:this.events});break;case"cosmos":this.rpcProviders[e]=new S0({client:this.client,namespace:this.namespaces[e],events:this.events});break;case"polkadot":break;case"cip34":this.rpcProviders[e]=new O0({client:this.client,namespace:this.namespaces[e],events:this.events})}})}registerEventListeners(){var e=this;if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:n}=t,{event:i}=n;"accountsChanged"===i.name?this.events.emit("accountsChanged",i.data):"chainChanged"===i.name?this.onChainChanged(i.data,n.chainId):this.events.emit(i.name,i.data),this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:n})=>{var i;const{namespaces:o}=n,s=null==(i=this.client)?void 0:i.session.get(t);this.session=((r,e)=>A0(r,N0(e)))(lc({},s),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:n})}),this.client.on("session_delete",function(){var t=I(function*(n){yield e.cleanup(),e.events.emit("session_delete",n)});return function(n){return t.apply(this,arguments)}}())}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){if(!e||!Object.keys(e).length)throw new Error("Namespaces must be not empty");this.client.core.storage.setItem(`${ac}/namespaces`,e),this.namespaces=e}validateChain(e){const[t,n]=e?.split(":")||["",""];if(t&&!Object.keys(this.namespaces).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);return t&&n?[t,n]:function m0(r){var e;const t=null==(e=r[Object.keys(r)[0]])?void 0:e.chains[0];return[t.split(":")[0],t.split(":")[1]]}(this.namespaces)}requestAccounts(){var e=this;return I(function*(){const[t]=e.validateChain();return yield e.getProvider(t).requestAccounts()})()}onChainChanged(e,t){const[n,i]=this.validateChain(t);this.getProvider(n).setDefaultChain(i),this.events.emit("chainChanged",e)}onConnect(){this.events.emit("connect",{session:this.session})}cleanup(){var e=this;return I(function*(){e.session=void 0,e.rpcProviders={},yield e.cleanupPendingPairings({deletePairings:!0})})()}}hr.UniversalProvider=Fn,hr.default=Fn,Object.defineProperty(hr,"__esModule",{value:!0})}(Zr)},4813:Un=>{"use strict";Un.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}}]);