(self.webpackChunkAngular_bare_bones_demo=self.webpackChunkAngular_bare_bones_demo||[]).push([[729],{28729:(ht,$e,ke)=>{"use strict";ke.r($e),ke.d($e,{getFlowProvider:()=>ce});var h=ke(53431);h.config({"accessNode.api":"https://rest-mainnet.onflow.org","discovery.wallet":"https://fcl-discovery.onflow.org/authn"});var ce=function(){return h}},53431:function(ht,$e,ke){var h=ke(91052).default;!function(k){"use strict";const ce="1.6.0";let Yr=null;const Z=Object.freeze({debug:5,info:4,log:3,warn:2,error:1}),z=function(){var e=h(function*(t){let{title:n,message:r,level:s,always:i=!1}=t;const a=(yield Yr?.()?.get("logger.level"))??Z.warn;if(!i&&a<s)return;const l=(d=>{let{title:f,message:p}=d;return[`\n    %c${f}\n    ============================\n\n    ${p}\n\n    ============================\n    `.replace(/\n[^\S\r\n]+/g,"\n").trim(),,"font-weight:bold;font-family:monospace;"]})({title:n,message:r});switch(s){case Z.debug:console.debug(...l);break;case Z.info:console.info(...l);break;case Z.warn:console.warn(...l);break;case Z.error:console.error(...l);break;default:console.log(...l)}});return function(n){return e.apply(this,arguments)}}();function _(e,t){if(!e){const i=new Error(`INVARIANT ${t}`);i.stack=i.stack.split("\n").filter(a=>!/at invariant/.test(a)).join("\n");for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw console.error("\n\n---\n\n",i,"\n\n",...r,"\n\n---\n\n"),i}}z.deprecate=e=>{let{pkg:t,subject:n,transition:r,level:s=Z.warn,message:i="",callback:a=null}=e;const l=()=>{return z({title:(t?t+" ":"")+"Deprecation Notice",message:`\n      ${n?`${d=n,d.charAt(0).toUpperCase()+d.slice(1)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${i?"\n"+i:""}${r?`\nYou can learn more (including a guide on common transition paths) here: ${r}`:""}\n    `.trim(),level:s});var d};return"function"==typeof a?h(function*(){return yield l(),yield a(...arguments)}):l()};var Jr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}let Zr;var ni=Xr("function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:Jr):e=>(Zr||(Zr=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)));const ri=()=>{const e=[];var t;return{deliver:n=>h(function*(){e.push(n),t&&(t(e.shift()),t=void 0)})(),receive:()=>new Promise(function(n){const r=e.shift();if(r)return n(r);t=n})}},yt="INIT",Me="SUBSCRIBE",Oe="UNSUBSCRIBE",cn="UPDATED",Qr="SNAPSHOT",eo="TERMINATE",G="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||"object"==typeof window&&window.window===window&&window;G.FCL_REGISTRY=G.FCL_REGISTRY??{};var oi=0;const ae=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((s,i)=>{const a=r.expectReply||!1,l=null!=r.timeout?r.timeout:5e3;a&&l&&setTimeout(()=>i(new Error(`Timeout: ${l}ms passed without a response.`)),l);const d={to:e,from:r.from,tag:t,data:n,timeout:l,reply:s,reject:i};try{G.FCL_REGISTRY[e]&&G.FCL_REGISTRY[e].mailbox.deliver(d),a||s(!0)}catch(f){console.error("FCL.Actor -- Could Not Deliver Message",d,G.FCL_REGISTRY[e],f)}})},Be=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t&&(t=++oi),null!=G.FCL_REGISTRY[t])return t;G.FCL_REGISTRY[t]={addr:t,mailbox:ri(),subs:new Set,kvs:{},error:null};const n={self:()=>t,receive:()=>G.FCL_REGISTRY[t].mailbox.receive(),send:function(r,s,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return a.from=t,ae(r,s,i,a)},sendSelf:(r,s,i)=>{G.FCL_REGISTRY[t]&&ae(t,r,s,i)},broadcast:function(r,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.from=t;for(let a of G.FCL_REGISTRY[t].subs)ae(a,r,s,i)},subscribe:r=>null!=r&&G.FCL_REGISTRY[t].subs.add(r),unsubscribe:r=>null!=r&&G.FCL_REGISTRY[t].subs.delete(r),subscriberCount:()=>G.FCL_REGISTRY[t].subs.size,hasSubs:()=>!!G.FCL_REGISTRY[t].subs.size,put:(r,s)=>{null!=r&&(G.FCL_REGISTRY[t].kvs[r]=s)},get:(r,s)=>G.FCL_REGISTRY[t].kvs[r]??s,delete:r=>{delete G.FCL_REGISTRY[t].kvs[r]},update:(r,s)=>{null!=r&&(G.FCL_REGISTRY[t].kvs[r]=s(G.FCL_REGISTRY[t].kvs[r]))},keys:()=>Object.keys(G.FCL_REGISTRY[t].kvs),all:()=>G.FCL_REGISTRY[t].kvs,where:r=>Object.keys(G.FCL_REGISTRY[t].kvs).reduce((s,i)=>r.test(i)?{...s,[i]:G.FCL_REGISTRY[t].kvs[i]}:s,{}),merge:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(r).forEach(s=>G.FCL_REGISTRY[t].kvs[s]=r[s])},fatalError:r=>{G.FCL_REGISTRY[t].error=r;for(let s of G.FCL_REGISTRY[t].subs)ae(s,cn)}};return"object"==typeof e&&(e=function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var s=h(function*(i){"function"==typeof r[yt]&&(yield r[yt](i));e:for(;;){const a=yield i.receive();try{if("EXIT"===a.tag){"function"==typeof r[eo]&&(yield r[eo](i,a,a.data||{}));break e}yield r[a.tag](i,a,a.data||{})}catch(l){console.error(`${i.self()} Error`,a,l)}finally{continue e}}});return function(i){return s.apply(this,arguments)}}()}(e)),ni(h(function*(){yield e(n),delete G.FCL_REGISTRY[t]})),t};function Bt(e,t,n){t(e);const r="@EXIT",s=Be(function(){var i=h(function*(a){for(a.send(e,Me);;){const l=yield a.receive(),d=G.FCL_REGISTRY[e].error;if(l.tag===r)return void a.send(e,Oe);if(d)return n(null,d),void a.send(e,Oe);n(l.data,null)}});return function(a){return i.apply(this,arguments)}}());return()=>ae(s,r)}function to(e,t){return t(e),ae(e,Qr,null,{expectReply:!0,timeout:0})}const no=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((s,i)=>i(s),r)},Nt=e=>e&&"object"==typeof e&&!Array.isArray(e),ln=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const s=n.shift();if(Nt(e)&&Nt(s))for(const i in s)Nt(s[i])?(e[i]||Object.assign(e,{[i]:{}}),ln(e[i],s[i])):Object.assign(e,{[i]:s[i]});return ln(e,...n)},ai=e=>Array.isArray(e)?ln({},...e):e,si=e=>e.contracts?e.contracts:{},ii=(e,t)=>{return no(ai,function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=>r.reduce((a,l)=>({...a,...l(i)}),{})}((n=t,r=>{let{deployments:s={},accounts:i={}}=r;const a=s?.[n];return a?Object.entries(a).reduce((l,d)=>{let[f,p]=d;const y=i[f]?.address;return y?p.reduce((b,w)=>({...b,[w]:y}),{}):l},{}):{}}),no(si,(n=>r=>Object.entries(r).reduce((s,i)=>{let[a,l]=i;const d=l?.aliases?.[n];return d&&(s[a]=d),s},{}))(t))))(e);var n},ro=e=>Object.entries(e?.accounts).reduce((t,n)=>{let[r,s]=n;return!!t||s?.hasOwnProperty("key")&&(i=s?.key,"string"==typeof i&&/^[0-9A-Fa-f]+$/.test(i));var i},!1),ui=e=>Nt(e)?ro(e):e.some(ro),ci=e=>"local"===e?.toLowerCase()?"emulator":e?.toLowerCase();Yr=P;const _e="config",oo="PUT_CONFIG",ao="GET_CONFIG",so="GET_ALL_CONFIG",io="UPDATE_CONFIG",uo="DELETE_CONFIG",co="CLEAR_CONFIG",lo="WHERE_CONFIG",vt="CONFIG/UPDATED",fo=e=>e,po={[oo]:(e,t,n)=>{let{key:r,value:s}=n;if(null==r)throw new Error("Missing 'key' for config/put.");e.put(r,s),e.broadcast(vt,{...e.all()})},[ao]:(e,t,n)=>{let{key:r,fallback:s}=n;if(null==r)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,s))},[so]:(e,t)=>{t.reply({...e.all()})},[io]:(e,t,n)=>{let{key:r,fn:s}=n;if(null==r)throw new Error("Missing 'key' for config/update");e.update(r,s||fo),e.broadcast(vt,{...e.all()})},[uo]:(e,t,n)=>{let{key:r}=n;if(null==r)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(vt,{...e.all()})},[co]:(e,t)=>{let n=Object.keys(e.all());for(let r of n)e.delete(r);e.broadcast(vt,{...e.all()})},[lo]:(e,t,n)=>{let{pattern:r}=n;if(null==r)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[Me]:(e,t)=>{e.subscribe(t.from),e.send(t.from,vt,{...e.all()})},[Oe]:(e,t)=>{e.unsubscribe(t.from)}};function bt(e,t){return ae(_e,oo,{key:e,value:t}),P()}function Qe(e,t){return ae(_e,ao,{key:e,fallback:t},{expectReply:!0,timeout:10})}function dn(){return fn.apply(this,arguments)}function fn(){return fn=h(function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e;return(yield Qe(n))??dn(r,t)}),fn.apply(this,arguments)}function Ut(){return ae(_e,so,null,{expectReply:!0,timeout:10})}function go(e){return ae(_e,io,{key:e,fn:arguments.length>1&&void 0!==arguments[1]?arguments[1]:fo}),P()}function mo(e){return ae(_e,uo,{key:e}),P()}function ho(e){return ae(_e,lo,{pattern:e},{expectReply:!0,timeout:10})}function yo(e){return Bt(_e,()=>Be(po,_e),e)}function vo(e){return ae(_e,co).then(P(e))}function bo(e){return pn.apply(this,arguments)}function pn(){return(pn=h(function*(e){const t=yield Qe("flow.network"),n=ci(t),{flowJSON:r}=e;if(_(Boolean(r),"config.load -- 'flowJSON' must be defined"),_(n,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),ui(r)){const s="emulator"===n;z({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:s?Z.warn:Z.error}),_(s,"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security")}for(const[s,i]of Object.entries(ii(r,n))){const a=`0x${s}`,l=yield Qe(a);l&&l!==i?z({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:Z.warn}):bt(a,i);const d=`system.contracts.${s}`,f=yield Qe(d);f&&f!==i?z({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:Z.warn}):bt(d,i)}})).apply(this,arguments)}function P(e){return null!=e&&"object"==typeof e&&Object.keys(e).map(t=>bt(t,e[t])),{put:bt,get:Qe,all:Ut,first:dn,update:go,delete:mo,where:ho,subscribe:yo,overload:Eo,load:bo}}Be(po,_e),P.put=bt,P.get=Qe,P.all=Ut,P.first=dn,P.update=go,P.delete=mo,P.where=ho,P.subscribe=yo,P.overload=Eo,P.load=bo;const li=e=>e;function Eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:li;return new Promise(function(){var n=h(function*(r,s){const i=yield Ut();try{P(e);var a=yield t(yield Ut());yield vo(i),r(a)}catch(l){yield vo(i),s(l)}});return function(r,s){return n.apply(this,arguments)}}())}for(var j={},di={byteLength:function(e){var t=_o(e),r=t[1];return 3*(t[0]+r)/4-r},toByteArray:function(e){var t,n,y,r=_o(e),s=r[0],i=r[1],a=new fi(3*(s+(y=i))/4-y),l=0,d=i>0?s-4:s;for(n=0;n<d;n+=4)t=pe[e.charCodeAt(n)]<<18|pe[e.charCodeAt(n+1)]<<12|pe[e.charCodeAt(n+2)]<<6|pe[e.charCodeAt(n+3)],a[l++]=t>>16&255,a[l++]=t>>8&255,a[l++]=255&t;return 2===i&&(t=pe[e.charCodeAt(n)]<<2|pe[e.charCodeAt(n+1)]>>4,a[l++]=255&t),1===i&&(t=pe[e.charCodeAt(n)]<<10|pe[e.charCodeAt(n+1)]<<4|pe[e.charCodeAt(n+2)]>>2,a[l++]=t>>8&255,a[l++]=255&t),a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,s=[],i=16383,a=0,l=n-r;a<l;a+=i)s.push(pi(e,a,a+i>l?l:a+i));return 1===r?s.push(Ie[(t=e[n-1])>>2]+Ie[t<<4&63]+"=="):2===r&&s.push(Ie[(t=(e[n-2]<<8)+e[n-1])>>10]+Ie[t>>4&63]+Ie[t<<2&63]+"="),s.join("")}},Ie=[],pe=[],fi=typeof Uint8Array<"u"?Uint8Array:Array,wo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",et=0;et<64;++et)Ie[et]=wo[et],pe[wo.charCodeAt(et)]=et;function _o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function pi(e,t,n){for(var s,i=[],a=t;a<n;a+=3)i.push(Ie[(s=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]))>>18&63]+Ie[s>>12&63]+Ie[s>>6&63]+Ie[63&s]);return i.join("")}pe["-".charCodeAt(0)]=62,pe["_".charCodeAt(0)]=63;var gn={};function Ge(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)t.push(Ge(e[n]));var r=j.Buffer.concat(t);return j.Buffer.concat([Io(r.length,192),r])}var s=function(i){if(!j.Buffer.isBuffer(i)){if("string"==typeof i)return So(i)?j.Buffer.from((d="string"!=typeof(l=i)?l:So(l)?l.slice(2):l).length%2?"0"+d:d,"hex"):j.Buffer.from(i);if("number"==typeof i)return i?(a=mn(i),j.Buffer.from(a,"hex")):j.Buffer.from([]);if(null==i)return j.Buffer.from([]);if(i instanceof Uint8Array)return j.Buffer.from(i);throw new Error("invalid type")}var a,l,d;return i}(e);return 1===s.length&&s[0]<128?s:j.Buffer.concat([Io(s.length,128),s])}function Io(e,t){if(e<56)return j.Buffer.from([e+t]);var n=mn(e),r=mn(t+55+n.length/2);return j.Buffer.from(r+n,"hex")}function So(e){return"0x"===e.slice(0,2)}function mn(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}gn.read=function(e,t,n,r,s){var i,a,l=8*s-r-1,d=(1<<l)-1,f=d>>1,p=-7,y=n?s-1:0,b=n?-1:1,w=e[t+y];for(y+=b,i=w&(1<<-p)-1,w>>=-p,p+=l;p>0;i=256*i+e[t+y],y+=b,p-=8);for(a=i&(1<<-p)-1,i>>=-p,p+=r;p>0;a=256*a+e[t+y],y+=b,p-=8);if(0===i)i=1-f;else{if(i===d)return a?NaN:1/0*(w?-1:1);a+=Math.pow(2,r),i-=f}return(w?-1:1)*a*Math.pow(2,i-r)},gn.write=function(e,t,n,r,s,i){var a,l,d,f=8*i-s-1,p=(1<<f)-1,y=p>>1,b=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:i-1,x=r?1:-1,S=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=p):(a=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-a))<1&&(a--,d*=2),(t+=a+y>=1?b/d:b*Math.pow(2,1-y))*d>=2&&(a++,d/=2),a+y>=p?(l=0,a=p):a+y>=1?(l=(t*d-1)*Math.pow(2,s),a+=y):(l=t*Math.pow(2,y-1)*Math.pow(2,s),a=0));s>=8;e[n+w]=255&l,w+=x,l/=256,s-=8);for(a=a<<s|l,f+=s;f>0;e[n+w]=255&a,w+=x,a/=256,f-=8);e[n+w-x]|=128*S},function(e){const t=di,n=gn,r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(o){return+o!=o&&(o=0),a.alloc(+o)},e.INSPECT_MAX_BYTES=50;const s=2147483647;function i(o){if(o>s)throw new RangeError('The value "'+o+'" is invalid for option "size"');const u=new Uint8Array(o);return Object.setPrototypeOf(u,a.prototype),u}function a(o,u,c){if("number"==typeof o){if("string"==typeof u)throw new TypeError('The "string" argument must be of type string. Received type number');return f(o)}return l(o,u,c)}function l(o,u,c){if("string"==typeof o)return function(v,I){if("string"==typeof I&&""!==I||(I="utf8"),!a.isEncoding(I))throw new TypeError("Unknown encoding: "+I);const N=0|w(v,I);let F=i(N);const ee=F.write(v,I);return ee!==N&&(F=F.slice(0,ee)),F}(o,u);if(ArrayBuffer.isView(o))return function(v){if(xe(v,Uint8Array)){const I=new Uint8Array(v);return y(I.buffer,I.byteOffset,I.byteLength)}return p(v)}(o);if(null==o)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(xe(o,ArrayBuffer)||o&&xe(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xe(o,SharedArrayBuffer)||o&&xe(o.buffer,SharedArrayBuffer)))return y(o,u,c);if("number"==typeof o)throw new TypeError('The "value" argument must not be of type number. Received type number');const g=o.valueOf&&o.valueOf();if(null!=g&&g!==o)return a.from(g,u,c);const m=function(v){if(a.isBuffer(v)){const I=0|b(v.length),N=i(I);return 0===N.length||v.copy(N,0,0,I),N}return void 0!==v.length?"number"!=typeof v.length||Vr(v.length)?i(0):p(v):"Buffer"===v.type&&Array.isArray(v.data)?p(v.data):void 0}(o);if(m)return m;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof o[Symbol.toPrimitive])return a.from(o[Symbol.toPrimitive]("string"),u,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}function d(o){if("number"!=typeof o)throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function f(o){return d(o),i(o<0?0:0|b(o))}function p(o){const u=o.length<0?0:0|b(o.length),c=i(u);for(let g=0;g<u;g+=1)c[g]=255&o[g];return c}function y(o,u,c){if(u<0||o.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<u+(c||0))throw new RangeError('"length" is outside of buffer bounds');let g;return g=void 0===u&&void 0===c?new Uint8Array(o):void 0===c?new Uint8Array(o,u):new Uint8Array(o,u,c),Object.setPrototypeOf(g,a.prototype),g}function b(o){if(o>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|o}function w(o,u){if(a.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||xe(o,ArrayBuffer))return o.byteLength;if("string"!=typeof o)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);const c=o.length,g=arguments.length>2&&!0===arguments[2];if(!g&&0===c)return 0;let m=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return Wr(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return ti(o).length;default:if(m)return g?-1:Wr(o).length;u=(""+u).toLowerCase(),m=!0}}function x(o,u,c){let g=!1;if((void 0===u||u<0)&&(u=0),u>this.length||((void 0===c||c>this.length)&&(c=this.length),c<=0)||(c>>>=0)<=(u>>>=0))return"";for(o||(o="utf8");;)switch(o){case"hex":return Ct(this,u,c);case"utf8":case"utf-8":return Ae(this,u,c);case"ascii":return ve(this,u,c);case"latin1":case"binary":return qr(this,u,c);case"base64":return Je(this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,u,c);default:if(g)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),g=!0}}function S(o,u,c){const g=o[u];o[u]=o[c],o[c]=g}function T(o,u,c,g,m){if(0===o.length)return-1;if("string"==typeof c?(g=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),Vr(c=+c)&&(c=m?0:o.length-1),c<0&&(c=o.length+c),c>=o.length){if(m)return-1;c=o.length-1}else if(c<0){if(!m)return-1;c=0}if("string"==typeof u&&(u=a.from(u,g)),a.isBuffer(u))return 0===u.length?-1:R(o,u,c,g,m);if("number"==typeof u)return u&=255,"function"==typeof Uint8Array.prototype.indexOf?m?Uint8Array.prototype.indexOf.call(o,u,c):Uint8Array.prototype.lastIndexOf.call(o,u,c):R(o,[u],c,g,m);throw new TypeError("val must be string, number or Buffer")}function R(o,u,c,g,m){let v,I=1,N=o.length,F=u.length;if(void 0!==g&&("ucs2"===(g=String(g).toLowerCase())||"ucs-2"===g||"utf16le"===g||"utf-16le"===g)){if(o.length<2||u.length<2)return-1;I=2,N/=2,F/=2,c/=2}function ee(M,oe){return 1===I?M[oe]:M.readUInt16BE(oe*I)}if(m){let M=-1;for(v=c;v<N;v++)if(ee(o,v)===ee(u,-1===M?0:v-M)){if(-1===M&&(M=v),v-M+1===F)return M*I}else-1!==M&&(v-=v-M),M=-1}else for(c+F>N&&(c=N-F),v=c;v>=0;v--){let M=!0;for(let oe=0;oe<F;oe++)if(ee(o,v+oe)!==ee(u,oe)){M=!1;break}if(M)return v}return-1}function B(o,u,c,g){c=Number(c)||0;const m=o.length-c;g?(g=Number(g))>m&&(g=m):g=m;const v=u.length;let I;for(g>v/2&&(g=v/2),I=0;I<g;++I){const N=parseInt(u.substr(2*I,2),16);if(Vr(N))return I;o[c+I]=N}return I}function J(o,u,c,g){return un(Wr(u,o.length-c),o,c,g)}function X(o,u,c,g){return un(function(m){const v=[];for(let I=0;I<m.length;++I)v.push(255&m.charCodeAt(I));return v}(u),o,c,g)}function ye(o,u,c,g){return un(ti(u),o,c,g)}function le(o,u,c,g){return un(function(m,v){let I,N,F;const ee=[];for(let M=0;M<m.length&&!((v-=2)<0);++M)I=m.charCodeAt(M),N=I>>8,F=I%256,ee.push(F),ee.push(N);return ee}(u,o.length-c),o,c,g)}function Je(o,u,c){return t.fromByteArray(0===u&&c===o.length?o:o.slice(u,c))}function Ae(o,u,c){c=Math.min(o.length,c);const g=[];let m=u;for(;m<c;){const v=o[m];let I=null,N=v>239?4:v>223?3:v>191?2:1;if(m+N<=c){let F,ee,M,oe;switch(N){case 1:v<128&&(I=v);break;case 2:F=o[m+1],128==(192&F)&&(oe=(31&v)<<6|63&F,oe>127&&(I=oe));break;case 3:F=o[m+1],ee=o[m+2],128==(192&F)&&128==(192&ee)&&(oe=(15&v)<<12|(63&F)<<6|63&ee,oe>2047&&(oe<55296||oe>57343)&&(I=oe));break;case 4:F=o[m+1],ee=o[m+2],M=o[m+3],128==(192&F)&&128==(192&ee)&&128==(192&M)&&(oe=(15&v)<<18|(63&F)<<12|(63&ee)<<6|63&M,oe>65535&&oe<1114112&&(I=oe))}}null===I?(I=65533,N=1):I>65535&&(I-=65536,g.push(I>>>10&1023|55296),I=56320|1023&I),g.push(I),m+=N}return function(v){const I=v.length;if(I<=on)return String.fromCharCode.apply(String,v);let N="",F=0;for(;F<I;)N+=String.fromCharCode.apply(String,v.slice(F,F+=on));return N}(g)}e.kMaxLength=s,(a.TYPED_ARRAY_SUPPORT=function(){try{const o=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(o,u),42===o.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(o,u,c){return l(o,u,c)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(o,u,c){return m=u,v=c,d(g=o),g<=0?i(g):void 0!==m?"string"==typeof v?i(g).fill(m,v):i(g).fill(m):i(g);var g,m,v},a.allocUnsafe=function(o){return f(o)},a.allocUnsafeSlow=function(o){return f(o)},a.isBuffer=function(o){return null!=o&&!0===o._isBuffer&&o!==a.prototype},a.compare=function(o,u){if(xe(o,Uint8Array)&&(o=a.from(o,o.offset,o.byteLength)),xe(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(o)||!a.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===u)return 0;let c=o.length,g=u.length;for(let m=0,v=Math.min(c,g);m<v;++m)if(o[m]!==u[m]){c=o[m],g=u[m];break}return c<g?-1:g<c?1:0},a.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(o,u){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(0===o.length)return a.alloc(0);let c;if(void 0===u)for(u=0,c=0;c<o.length;++c)u+=o[c].length;const g=a.allocUnsafe(u);let m=0;for(c=0;c<o.length;++c){let v=o[c];if(xe(v,Uint8Array))m+v.length>g.length?(a.isBuffer(v)||(v=a.from(v)),v.copy(g,m)):Uint8Array.prototype.set.call(g,v,m);else{if(!a.isBuffer(v))throw new TypeError('"list" argument must be an Array of Buffers');v.copy(g,m)}m+=v.length}return g},a.byteLength=w,a.prototype._isBuffer=!0,a.prototype.swap16=function(){const o=this.length;if(o%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<o;u+=2)S(this,u,u+1);return this},a.prototype.swap32=function(){const o=this.length;if(o%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<o;u+=4)S(this,u,u+3),S(this,u+1,u+2);return this},a.prototype.swap64=function(){const o=this.length;if(o%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<o;u+=8)S(this,u,u+7),S(this,u+1,u+6),S(this,u+2,u+5),S(this,u+3,u+4);return this},a.prototype.toLocaleString=a.prototype.toString=function(){const o=this.length;return 0===o?"":0===arguments.length?Ae(this,0,o):x.apply(this,arguments)},a.prototype.equals=function(o){if(!a.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o||0===a.compare(this,o)},a.prototype.inspect=function(){let o="";const u=e.INSPECT_MAX_BYTES;return o=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(o+=" ... "),"<Buffer "+o+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(o,u,c,g,m){if(xe(o,Uint8Array)&&(o=a.from(o,o.offset,o.byteLength)),!a.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(void 0===u&&(u=0),void 0===c&&(c=o?o.length:0),void 0===g&&(g=0),void 0===m&&(m=this.length),u<0||c>o.length||g<0||m>this.length)throw new RangeError("out of range index");if(g>=m&&u>=c)return 0;if(g>=m)return-1;if(u>=c)return 1;if(this===o)return 0;let v=(m>>>=0)-(g>>>=0),I=(c>>>=0)-(u>>>=0);const N=Math.min(v,I),F=this.slice(g,m),ee=o.slice(u,c);for(let M=0;M<N;++M)if(F[M]!==ee[M]){v=F[M],I=ee[M];break}return v<I?-1:I<v?1:0},a.prototype.includes=function(o,u,c){return-1!==this.indexOf(o,u,c)},a.prototype.indexOf=function(o,u,c){return T(this,o,u,c,!0)},a.prototype.lastIndexOf=function(o,u,c){return T(this,o,u,c,!1)},a.prototype.write=function(o,u,c,g){if(void 0===u)g="utf8",c=this.length,u=0;else if(void 0===c&&"string"==typeof u)g=u,c=this.length,u=0;else{if(!isFinite(u))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");u>>>=0,isFinite(c)?(c>>>=0,void 0===g&&(g="utf8")):(g=c,c=void 0)}const m=this.length-u;if((void 0===c||c>m)&&(c=m),o.length>0&&(c<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");g||(g="utf8");let v=!1;for(;;)switch(g){case"hex":return B(this,o,u,c);case"utf8":case"utf-8":return J(this,o,u,c);case"ascii":case"latin1":case"binary":return X(this,o,u,c);case"base64":return ye(this,o,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,o,u,c);default:if(v)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase(),v=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const on=4096;function ve(o,u,c){let g="";c=Math.min(o.length,c);for(let m=u;m<c;++m)g+=String.fromCharCode(127&o[m]);return g}function qr(o,u,c){let g="";c=Math.min(o.length,c);for(let m=u;m<c;++m)g+=String.fromCharCode(o[m]);return g}function Ct(o,u,c){const g=o.length;(!u||u<0)&&(u=0),(!c||c<0||c>g)&&(c=g);let m="";for(let v=u;v<c;++v)m+=mc[o[v]];return m}function E(o,u,c){const g=o.slice(u,c);let m="";for(let v=0;v<g.length-1;v+=2)m+=String.fromCharCode(g[v]+256*g[v+1]);return m}function A(o,u,c){if(o%1!=0||o<0)throw new RangeError("offset is not uint");if(o+u>c)throw new RangeError("Trying to access beyond buffer length")}function C(o,u,c,g,m,v){if(!a.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>m||u<v)throw new RangeError('"value" argument is out of bounds');if(c+g>o.length)throw new RangeError("Index out of range")}function Q(o,u,c,g,m){sn(u,g,m,o,c,7);let v=Number(u&BigInt(4294967295));o[c++]=v,v>>=8,o[c++]=v,v>>=8,o[c++]=v,v>>=8,o[c++]=v;let I=Number(u>>BigInt(32)&BigInt(4294967295));return o[c++]=I,I>>=8,o[c++]=I,I>>=8,o[c++]=I,I>>=8,o[c++]=I,c}function H(o,u,c,g,m){sn(u,g,m,o,c,7);let v=Number(u&BigInt(4294967295));o[c+7]=v,v>>=8,o[c+6]=v,v>>=8,o[c+5]=v,v>>=8,o[c+4]=v;let I=Number(u>>BigInt(32)&BigInt(4294967295));return o[c+3]=I,I>>=8,o[c+2]=I,I>>=8,o[c+1]=I,I>>=8,o[c]=I,c+8}function q(o,u,c,g,m,v){if(c+g>o.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function Ot(o,u,c,g,m){return u=+u,c>>>=0,m||q(o,0,c,4),n.write(o,u,c,g,23,4),c+4}function Xe(o,u,c,g,m){return u=+u,c>>>=0,m||q(o,0,c,8),n.write(o,u,c,g,52,8),c+8}a.prototype.slice=function(o,u){const c=this.length;(o=~~o)<0?(o+=c)<0&&(o=0):o>c&&(o=c),(u=void 0===u?c:~~u)<0?(u+=c)<0&&(u=0):u>c&&(u=c),u<o&&(u=o);const g=this.subarray(o,u);return Object.setPrototypeOf(g,a.prototype),g},a.prototype.readUintLE=a.prototype.readUIntLE=function(o,u,c){o>>>=0,u>>>=0,c||A(o,u,this.length);let g=this[o],m=1,v=0;for(;++v<u&&(m*=256);)g+=this[o+v]*m;return g},a.prototype.readUintBE=a.prototype.readUIntBE=function(o,u,c){o>>>=0,u>>>=0,c||A(o,u,this.length);let g=this[o+--u],m=1;for(;u>0&&(m*=256);)g+=this[o+--u]*m;return g},a.prototype.readUint8=a.prototype.readUInt8=function(o,u){return o>>>=0,u||A(o,1,this.length),this[o]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(o,u){return o>>>=0,u||A(o,2,this.length),this[o]|this[o+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(o,u){return o>>>=0,u||A(o,2,this.length),this[o]<<8|this[o+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(o,u){return o>>>=0,u||A(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+16777216*this[o+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(o,u){return o>>>=0,u||A(o,4,this.length),16777216*this[o]+(this[o+1]<<16|this[o+2]<<8|this[o+3])},a.prototype.readBigUInt64LE=je(function(o){Ce(o>>>=0,"offset");const u=this[o],c=this[o+7];void 0!==u&&void 0!==c||Fe(o,this.length-8);const g=u+256*this[++o]+65536*this[++o]+this[++o]*2**24,m=this[++o]+256*this[++o]+65536*this[++o]+c*2**24;return BigInt(g)+(BigInt(m)<<BigInt(32))}),a.prototype.readBigUInt64BE=je(function(o){Ce(o>>>=0,"offset");const u=this[o],c=this[o+7];void 0!==u&&void 0!==c||Fe(o,this.length-8);const g=u*2**24+65536*this[++o]+256*this[++o]+this[++o],m=this[++o]*2**24+65536*this[++o]+256*this[++o]+c;return(BigInt(g)<<BigInt(32))+BigInt(m)}),a.prototype.readIntLE=function(o,u,c){o>>>=0,u>>>=0,c||A(o,u,this.length);let g=this[o],m=1,v=0;for(;++v<u&&(m*=256);)g+=this[o+v]*m;return m*=128,g>=m&&(g-=Math.pow(2,8*u)),g},a.prototype.readIntBE=function(o,u,c){o>>>=0,u>>>=0,c||A(o,u,this.length);let g=u,m=1,v=this[o+--g];for(;g>0&&(m*=256);)v+=this[o+--g]*m;return m*=128,v>=m&&(v-=Math.pow(2,8*u)),v},a.prototype.readInt8=function(o,u){return o>>>=0,u||A(o,1,this.length),128&this[o]?-1*(255-this[o]+1):this[o]},a.prototype.readInt16LE=function(o,u){o>>>=0,u||A(o,2,this.length);const c=this[o]|this[o+1]<<8;return 32768&c?4294901760|c:c},a.prototype.readInt16BE=function(o,u){o>>>=0,u||A(o,2,this.length);const c=this[o+1]|this[o]<<8;return 32768&c?4294901760|c:c},a.prototype.readInt32LE=function(o,u){return o>>>=0,u||A(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},a.prototype.readInt32BE=function(o,u){return o>>>=0,u||A(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},a.prototype.readBigInt64LE=je(function(o){Ce(o>>>=0,"offset");const u=this[o],c=this[o+7];return void 0!==u&&void 0!==c||Fe(o,this.length-8),(BigInt(this[o+4]+256*this[o+5]+65536*this[o+6]+(c<<24))<<BigInt(32))+BigInt(u+256*this[++o]+65536*this[++o]+this[++o]*2**24)}),a.prototype.readBigInt64BE=je(function(o){Ce(o>>>=0,"offset");const u=this[o],c=this[o+7];void 0!==u&&void 0!==c||Fe(o,this.length-8);const g=(u<<24)+65536*this[++o]+256*this[++o]+this[++o];return(BigInt(g)<<BigInt(32))+BigInt(this[++o]*2**24+65536*this[++o]+256*this[++o]+c)}),a.prototype.readFloatLE=function(o,u){return o>>>=0,u||A(o,4,this.length),n.read(this,o,!0,23,4)},a.prototype.readFloatBE=function(o,u){return o>>>=0,u||A(o,4,this.length),n.read(this,o,!1,23,4)},a.prototype.readDoubleLE=function(o,u){return o>>>=0,u||A(o,8,this.length),n.read(this,o,!0,52,8)},a.prototype.readDoubleBE=function(o,u){return o>>>=0,u||A(o,8,this.length),n.read(this,o,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(o,u,c,g){o=+o,u>>>=0,c>>>=0,!g&&C(this,o,u,c,Math.pow(2,8*c)-1,0);let m=1,v=0;for(this[u]=255&o;++v<c&&(m*=256);)this[u+v]=o/m&255;return u+c},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(o,u,c,g){o=+o,u>>>=0,c>>>=0,!g&&C(this,o,u,c,Math.pow(2,8*c)-1,0);let m=c-1,v=1;for(this[u+m]=255&o;--m>=0&&(v*=256);)this[u+m]=o/v&255;return u+c},a.prototype.writeUint8=a.prototype.writeUInt8=function(o,u,c){return o=+o,u>>>=0,c||C(this,o,u,1,255,0),this[u]=255&o,u+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(o,u,c){return o=+o,u>>>=0,c||C(this,o,u,2,65535,0),this[u]=255&o,this[u+1]=o>>>8,u+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(o,u,c){return o=+o,u>>>=0,c||C(this,o,u,2,65535,0),this[u]=o>>>8,this[u+1]=255&o,u+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(o,u,c){return o=+o,u>>>=0,c||C(this,o,u,4,4294967295,0),this[u+3]=o>>>24,this[u+2]=o>>>16,this[u+1]=o>>>8,this[u]=255&o,u+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(o,u,c){return o=+o,u>>>=0,c||C(this,o,u,4,4294967295,0),this[u]=o>>>24,this[u+1]=o>>>16,this[u+2]=o>>>8,this[u+3]=255&o,u+4},a.prototype.writeBigUInt64LE=je(function(o){return Q(this,o,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=je(function(o){return H(this,o,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(o,u,c,g){if(o=+o,u>>>=0,!g){const N=Math.pow(2,8*c-1);C(this,o,u,c,N-1,-N)}let m=0,v=1,I=0;for(this[u]=255&o;++m<c&&(v*=256);)o<0&&0===I&&0!==this[u+m-1]&&(I=1),this[u+m]=(o/v>>0)-I&255;return u+c},a.prototype.writeIntBE=function(o,u,c,g){if(o=+o,u>>>=0,!g){const N=Math.pow(2,8*c-1);C(this,o,u,c,N-1,-N)}let m=c-1,v=1,I=0;for(this[u+m]=255&o;--m>=0&&(v*=256);)o<0&&0===I&&0!==this[u+m+1]&&(I=1),this[u+m]=(o/v>>0)-I&255;return u+c},a.prototype.writeInt8=function(o,u,c){return o=+o,u>>>=0,c||C(this,o,u,1,127,-128),o<0&&(o=255+o+1),this[u]=255&o,u+1},a.prototype.writeInt16LE=function(o,u,c){return o=+o,u>>>=0,c||C(this,o,u,2,32767,-32768),this[u]=255&o,this[u+1]=o>>>8,u+2},a.prototype.writeInt16BE=function(o,u,c){return o=+o,u>>>=0,c||C(this,o,u,2,32767,-32768),this[u]=o>>>8,this[u+1]=255&o,u+2},a.prototype.writeInt32LE=function(o,u,c){return o=+o,u>>>=0,c||C(this,o,u,4,2147483647,-2147483648),this[u]=255&o,this[u+1]=o>>>8,this[u+2]=o>>>16,this[u+3]=o>>>24,u+4},a.prototype.writeInt32BE=function(o,u,c){return o=+o,u>>>=0,c||C(this,o,u,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[u]=o>>>24,this[u+1]=o>>>16,this[u+2]=o>>>8,this[u+3]=255&o,u+4},a.prototype.writeBigInt64LE=je(function(o){return Q(this,o,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=je(function(o){return H(this,o,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(o,u,c){return Ot(this,o,u,!0,c)},a.prototype.writeFloatBE=function(o,u,c){return Ot(this,o,u,!1,c)},a.prototype.writeDoubleLE=function(o,u,c){return Xe(this,o,u,!0,c)},a.prototype.writeDoubleBE=function(o,u,c){return Xe(this,o,u,!1,c)},a.prototype.copy=function(o,u,c,g){if(!a.isBuffer(o))throw new TypeError("argument should be a Buffer");if(c||(c=0),g||0===g||(g=this.length),u>=o.length&&(u=o.length),u||(u=0),g>0&&g<c&&(g=c),g===c||0===o.length||0===this.length)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length),o.length-u<g-c&&(g=o.length-u+c);const m=g-c;return this===o&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(u,c,g):Uint8Array.prototype.set.call(o,this.subarray(c,g),u),m},a.prototype.fill=function(o,u,c,g){if("string"==typeof o){if("string"==typeof u?(g=u,u=0,c=this.length):"string"==typeof c&&(g=c,c=this.length),void 0!==g&&"string"!=typeof g)throw new TypeError("encoding must be a string");if("string"==typeof g&&!a.isEncoding(g))throw new TypeError("Unknown encoding: "+g);if(1===o.length){const v=o.charCodeAt(0);("utf8"===g&&v<128||"latin1"===g)&&(o=v)}}else"number"==typeof o?o&=255:"boolean"==typeof o&&(o=Number(o));if(u<0||this.length<u||this.length<c)throw new RangeError("Out of range index");if(c<=u)return this;let m;if(u>>>=0,c=void 0===c?this.length:c>>>0,o||(o=0),"number"==typeof o)for(m=u;m<c;++m)this[m]=o;else{const v=a.isBuffer(o)?o:a.from(o,g),I=v.length;if(0===I)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(m=0;m<c-u;++m)this[m+u]=v[m%I]}return this};const be={};function Ze(o,u,c){be[o]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${o}]`,delete this.name}get code(){return o}set code(g){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:g,writable:!0})}toString(){return`${this.name} [${o}]: ${this.message}`}}}function an(o){let u="",c=o.length;const g="-"===o[0]?1:0;for(;c>=g+4;c-=3)u=`_${o.slice(c-3,c)}${u}`;return`${o.slice(0,c)}${u}`}function sn(o,u,c,g,m,v){if(o>c||o<u){const I="bigint"==typeof u?"n":"";let N;throw N=v>3?0===u||u===BigInt(0)?`>= 0${I} and < 2${I} ** ${8*(v+1)}${I}`:`>= -(2${I} ** ${8*(v+1)-1}${I}) and < 2 ** ${8*(v+1)-1}${I}`:`>= ${u}${I} and <= ${c}${I}`,new be.ERR_OUT_OF_RANGE("value",N,o)}var I,N,F;I=g,F=v,Ce(N=m,"offset"),void 0!==I[N]&&void 0!==I[N+F]||Fe(N,I.length-(F+1))}function Ce(o,u){if("number"!=typeof o)throw new be.ERR_INVALID_ARG_TYPE(u,"number",o)}function Fe(o,u,c){throw Math.floor(o)!==o?(Ce(o,c),new be.ERR_OUT_OF_RANGE(c||"offset","an integer",o)):u<0?new be.ERR_BUFFER_OUT_OF_BOUNDS:new be.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${u}`,o)}Ze("ERR_BUFFER_OUT_OF_BOUNDS",function(o){return o?`${o} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ze("ERR_INVALID_ARG_TYPE",function(o,u){return`The "${o}" argument must be of type number. Received type ${typeof u}`},TypeError),Ze("ERR_OUT_OF_RANGE",function(o,u,c){let g=`The value of "${o}" is out of range.`,m=c;return Number.isInteger(c)&&Math.abs(c)>2**32?m=an(String(c)):"bigint"==typeof c&&(m=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(m=an(m)),m+="n"),g+=` It must be ${u}. Received ${m}`,g},RangeError);const Kr=/[^+/0-9A-Za-z-_]/g;function Wr(o,u){let c;u=u||1/0;const g=o.length;let m=null;const v=[];for(let I=0;I<g;++I){if(c=o.charCodeAt(I),c>55295&&c<57344){if(!m){if(c>56319){(u-=3)>-1&&v.push(239,191,189);continue}if(I+1===g){(u-=3)>-1&&v.push(239,191,189);continue}m=c;continue}if(c<56320){(u-=3)>-1&&v.push(239,191,189),m=c;continue}c=65536+(m-55296<<10|c-56320)}else m&&(u-=3)>-1&&v.push(239,191,189);if(m=null,c<128){if((u-=1)<0)break;v.push(c)}else if(c<2048){if((u-=2)<0)break;v.push(c>>6|192,63&c|128)}else if(c<65536){if((u-=3)<0)break;v.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((u-=4)<0)break;v.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return v}function ti(o){return t.toByteArray(function(u){if((u=(u=u.split("=")[0]).trim().replace(Kr,"")).length<2)return"";for(;u.length%4!=0;)u+="=";return u}(o))}function un(o,u,c,g){let m;for(m=0;m<g&&!(m+c>=u.length||m>=o.length);++m)u[m+c]=o[m];return m}function xe(o,u){return o instanceof u||null!=o&&null!=o.constructor&&null!=o.constructor.name&&o.constructor.name===u.name}function Vr(o){return o!=o}const mc=function(){const o="0123456789abcdef",u=new Array(256);for(let c=0;c<16;++c){const g=16*c;for(let m=0;m<16;++m)u[g+m]=o[c]+o[m]}return u}();function je(o){return typeof BigInt>"u"?hc:o}function hc(){throw new Error("BigInt not supported")}}(j);var hn={exports:{}};!function(e,t){var i,n=typeof self<"u"?self:Jr,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();i=r,function(a){var l="URLSearchParams"in i,d="Symbol"in i&&"iterator"in Symbol,f="FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),p="FormData"in i,y="ArrayBuffer"in i;if(y)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=ArrayBuffer.isView||function(E){return E&&b.indexOf(Object.prototype.toString.call(E))>-1};function x(E){if("string"!=typeof E&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(E))throw new TypeError("Invalid character in header field name");return E.toLowerCase()}function S(E){return"string"!=typeof E&&(E=String(E)),E}function T(E){var A={next:function(){var C=E.shift();return{done:void 0===C,value:C}}};return d&&(A[Symbol.iterator]=function(){return A}),A}function R(E){this.map={},E instanceof R?E.forEach(function(A,C){this.append(C,A)},this):Array.isArray(E)?E.forEach(function(A){this.append(A[0],A[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(A){this.append(A,E[A])},this)}function B(E){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}function J(E){return new Promise(function(A,C){E.onload=function(){A(E.result)},E.onerror=function(){C(E.error)}})}function X(E){var A=new FileReader,C=J(A);return A.readAsArrayBuffer(E),C}function ye(E){if(E.slice)return E.slice(0);var A=new Uint8Array(E.byteLength);return A.set(new Uint8Array(E)),A.buffer}function le(){return this.bodyUsed=!1,this._initBody=function(E){var A;this._bodyInit=E,E?"string"==typeof E?this._bodyText=E:f&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:p&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:l&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():y&&f&&(A=E)&&DataView.prototype.isPrototypeOf(A)?(this._bodyArrayBuffer=ye(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):y&&(ArrayBuffer.prototype.isPrototypeOf(E)||w(E))?this._bodyArrayBuffer=ye(E):this._bodyText=E=Object.prototype.toString.call(E):this._bodyText="",this.headers.get("content-type")||("string"==typeof E?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f&&(this.blob=function(){var E=B(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?B(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(X)}),this.text=function(){var A,C,Q,E=B(this);if(E)return E;if(this._bodyBlob)return A=this._bodyBlob,Q=J(C=new FileReader),C.readAsText(A),Q;if(this._bodyArrayBuffer)return Promise.resolve(function(A){for(var C=new Uint8Array(A),Q=new Array(C.length),H=0;H<C.length;H++)Q[H]=String.fromCharCode(C[H]);return Q.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},p&&(this.formData=function(){return this.text().then(on)}),this.json=function(){return this.text().then(JSON.parse)},this}R.prototype.append=function(E,A){E=x(E),A=S(A);var C=this.map[E];this.map[E]=C?C+", "+A:A},R.prototype.delete=function(E){delete this.map[x(E)]},R.prototype.get=function(E){return E=x(E),this.has(E)?this.map[E]:null},R.prototype.has=function(E){return this.map.hasOwnProperty(x(E))},R.prototype.set=function(E,A){this.map[x(E)]=S(A)},R.prototype.forEach=function(E,A){for(var C in this.map)this.map.hasOwnProperty(C)&&E.call(A,this.map[C],C,this)},R.prototype.keys=function(){var E=[];return this.forEach(function(A,C){E.push(C)}),T(E)},R.prototype.values=function(){var E=[];return this.forEach(function(A){E.push(A)}),T(E)},R.prototype.entries=function(){var E=[];return this.forEach(function(A,C){E.push([C,A])}),T(E)},d&&(R.prototype[Symbol.iterator]=R.prototype.entries);var Je=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Ae(E,A){var C,Q,H=(A=A||{}).body;if(E instanceof Ae){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,A.headers||(this.headers=new R(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,H||null==E._bodyInit||(H=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=A.credentials||this.credentials||"same-origin",!A.headers&&this.headers||(this.headers=new R(A.headers)),this.method=(Q=(C=A.method||this.method||"GET").toUpperCase(),Je.indexOf(Q)>-1?Q:C),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&H)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(H)}function on(E){var A=new FormData;return E.trim().split("&").forEach(function(C){if(C){var Q=C.split("="),H=Q.shift().replace(/\+/g," "),q=Q.join("=").replace(/\+/g," ");A.append(decodeURIComponent(H),decodeURIComponent(q))}}),A}function ve(E,A){A||(A={}),this.type="default",this.status=void 0===A.status?200:A.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in A?A.statusText:"OK",this.headers=new R(A.headers),this.url=A.url||"",this._initBody(E)}Ae.prototype.clone=function(){return new Ae(this,{body:this._bodyInit})},le.call(Ae.prototype),le.call(ve.prototype),ve.prototype.clone=function(){return new ve(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new R(this.headers),url:this.url})},ve.error=function(){var E=new ve(null,{status:0,statusText:""});return E.type="error",E};var qr=[301,302,303,307,308];ve.redirect=function(E,A){if(-1===qr.indexOf(A))throw new RangeError("Invalid status code");return new ve(null,{status:A,headers:{location:E}})},a.DOMException=i.DOMException;try{new a.DOMException}catch{a.DOMException=function(A,C){this.message=A,this.name=C;var Q=Error(A);this.stack=Q.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function Ct(E,A){return new Promise(function(C,Q){var H=new Ae(E,A);if(H.signal&&H.signal.aborted)return Q(new a.DOMException("Aborted","AbortError"));var q=new XMLHttpRequest;function Ot(){q.abort()}q.onload=function(){var Xe,be,Ze={status:q.status,statusText:q.statusText,headers:(Xe=q.getAllResponseHeaders()||"",be=new R,Xe.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(sn){var Ce=sn.split(":"),Fe=Ce.shift().trim();if(Fe){var Kr=Ce.join(":").trim();be.append(Fe,Kr)}}),be)};Ze.url="responseURL"in q?q.responseURL:Ze.headers.get("X-Request-URL"),C(new ve("response"in q?q.response:q.responseText,Ze))},q.onerror=function(){Q(new TypeError("Network request failed"))},q.ontimeout=function(){Q(new TypeError("Network request failed"))},q.onabort=function(){Q(new a.DOMException("Aborted","AbortError"))},q.open(H.method,H.url,!0),"include"===H.credentials?q.withCredentials=!0:"omit"===H.credentials&&(q.withCredentials=!1),"responseType"in q&&f&&(q.responseType="blob"),H.headers.forEach(function(Xe,be){q.setRequestHeader(be,Xe)}),H.signal&&(H.signal.addEventListener("abort",Ot),q.onreadystatechange=function(){4===q.readyState&&H.signal.removeEventListener("abort",Ot)}),q.send(void 0===H._bodyInit?null:H._bodyInit)})}Ct.polyfill=!0,i.fetch||(i.fetch=Ct,i.Headers=R,i.Request=Ae,i.Response=ve),a.Headers=R,a.Request=Ae,a.Response=ve,a.fetch=Ct,Object.defineProperty(a,"__esModule",{value:!0})}({}),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=r;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t}(hn,hn.exports);var Ao=Xr(hn.exports);function $(e){return null==e?null:e.replace(/^0x/,"").replace(/^Fx/,"")}function K(e){return null==e?null:"0x"+$(e)}const gi=globalThis.AbortController||ke(41948);class yn extends Error{constructor(t){let{error:n,hostname:r,path:s,method:i,requestBody:a,responseBody:l,responseStatusText:d,statusCode:f}=t;super(`\n      HTTP Request Error: An error occurred when interacting with the Access API.\n      ${n?`error=${n}`:""}\n      ${r?`hostname=${r}`:""}\n      ${s?`path=${s}`:""}\n      ${i?`method=${i}`:""}\n      ${a?`requestBody=${a}`:""}\n      ${l?`responseBody=${l}`:""}\n      ${d?`responseStatusText=${d}`:""}\n      ${f?`statusCode=${f}`:""}\n    `),this.name="HTTP Request Error",this.statusCode=f,this.errorMessage=n}}function se(e){return vn.apply(this,arguments)}function vn(){return vn=h(function*(e){let{hostname:t,path:n,method:r,body:s,headers:i,retryLimit:a=5,retryIntervalMs:l=1e3,timeoutLimit:d=3e4,enableRequestLogging:f=!0}=e;const p=s?JSON.stringify(s):null;function y(){const b=new gi,w=setTimeout(()=>{b.abort()},d);return Ao(`${t}${n}`,{method:r,body:p,headers:i,signal:b.signal}).then(function(){var x=h(function*(S){if(S.ok)return S.json();const T=yield S.text().catch(()=>null),R=function(B){try{return JSON.parse(B)}catch{return null}}(T);throw new yn({error:R?.message,hostname:t,path:n,method:r,requestBody:p,responseBody:T,responseStatusText:S.statusText,statusCode:S.status})});return function(S){return x.apply(this,arguments)}}()).catch(function(){var x=h(function*(S){throw S instanceof yn||"AbortError"===S.name?S:(f&&(yield z({title:"Access Node Error",message:`The provided access node ${t} does not appear to be a valid REST/HTTP access node.\n  Please verify that you are not unintentionally using a GRPC access node.\n  See more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect`,level:Z.error})),new yn({error:S?.message,hostname:t,path:n,method:r,requestBody:p}))});return function(S){return x.apply(this,arguments)}}()).finally(()=>{clearTimeout(w)})}return yield function(){var b=h(function*(){let x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{return yield y()}catch(S){const T=[408,429,500,502,503,504];if("AbortError"===S.name||T.includes(S.statusCode))return yield new Promise((R,B)=>{x<a?(f&&console.warn(`Access node unavailable, retrying in ${l} ms...`),setTimeout(()=>{R(w(x+1))},l)):B(S)});throw S}});function w(){return b.apply(this,arguments)}return w}()()}),vn.apply(this,arguments)}function bn(e,t,n){let r=t.response();return r.tag=e.tag,r.encodedData=JSON.parse(t.Buffer.from(n,"base64").toString()),r}function mi(e){return En.apply(this,arguments)}function En(){return En=h(function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _(n.node,"SDK Send Execute Script Error: opts.node must be defined."),_(t.response,"SDK Send Execute Script Error: context.response must be defined."),_(t.Buffer,"SDK Send Execute Script Error: context.Buffer must be defined."),(e=yield e).block.id?yield(r=h(function*(s,i,a){const l=a.httpRequest||se,d=yield l({hostname:a.node,path:`/v1/scripts?block_id=${s.block.id}`,method:"POST",body:{script:i.Buffer.from(s.message.cadence).toString("base64"),arguments:s.message.arguments.map(f=>i.Buffer.from(JSON.stringify(s.arguments[f].asArgument)).toString("base64"))}});return bn(s,i,d)}),function(s,i,a){return r.apply(this,arguments)})(e,t,n):e.block.height?yield function(){var r=h(function*(s,i,a){const l=a.httpRequest||se,d=yield l({hostname:a.node,path:`/v1/scripts?block_height=${s.block.height}`,method:"POST",body:{script:i.Buffer.from(s.message.cadence).toString("base64"),arguments:s.message.arguments.map(f=>i.Buffer.from(JSON.stringify(s.arguments[f].asArgument)).toString("base64"))}});return bn(s,i,d)});return function(s,i,a){return r.apply(this,arguments)}}()(e,t,n):yield function(){var r=h(function*(s,i,a){const l=a.httpRequest||se,d=yield l({hostname:a.node,path:"/v1/scripts?block_height=sealed",method:"POST",body:{script:i.Buffer.from(s.message.cadence).toString("base64"),arguments:s.message.arguments.map(f=>i.Buffer.from(JSON.stringify(s.arguments[f].asArgument)).toString("base64"))}});return bn(s,i,d)});return function(s,i,a){return r.apply(this,arguments)}}()(e,t,n);var r}),En.apply(this,arguments)}const hi={SHA2_256:1,SHA2_384:2,SHA3_256:3,SHA3_384:4,KMAC128_BLS_BLS12_381:5},yi={ECDSA_P256:1,ECDSA_secp256k1:2,BLS_BLS12_381:3};function xo(e,t,n){let r=t.response();return r.tag=e.tag,r.account={address:n.address,balance:Number(n.balance),code:"",contracts:(s=>{const i={};if(!s)return i;for(let a of Object.keys(s))i[a]=t.Buffer.from(s[a],"base64").toString();return i})(n.contracts),keys:n.keys?.map(s=>({index:Number(s.index),publicKey:s.public_key.replace(/^0x/,""),signAlgo:yi[s.signing_algorithm],signAlgoString:s.signing_algorithm,hashAlgo:hi[s.hashing_algorithm],hashAlgoString:s.hashing_algorithm,sequenceNumber:Number(s.sequence_number),weight:Number(s.weight),revoked:s.revoked}))??[]},r}function vi(e){return wn.apply(this,arguments)}function wn(){return wn=h(function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _(n.node,"SDK Send Get Account Error: opts.node must be defined."),_(t.response,"SDK Send Get Account Error: context.response must be defined."),_(t.Buffer,"SDK Send Get Account Error: context.Buffer must be defined."),null!==(e=yield e).block.height?yield(r=h(function*(s,i,a){const l=a.httpRequest||se;return xo(s,i,yield l({hostname:a.node,path:`/v1/accounts/${s.account.addr}?block_height=${s.block.height}&expand=contracts,keys`,method:"GET",body:null}))}),function(s,i,a){return r.apply(this,arguments)})(e,t,n):yield function(){var r=h(function*(s,i,a){const l=a.httpRequest||se;return xo(s,i,yield l({hostname:a.node,path:`/v1/accounts/${s.account.addr}?block_height=sealed&expand=contracts,keys`,method:"GET",body:null}))});return function(s,i,a){return r.apply(this,arguments)}}()(e,t,n);var r}),wn.apply(this,arguments)}function _n(e,t,n){const r=n.length?n[0]:null,s=t.response();return s.tag=e.tag,s.blockHeader={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp},s}function bi(e){return In.apply(this,arguments)}function In(){return In=h(function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(n.node,"SDK Send Get Block Header Error: opts.node must be defined."),_(t.response,"SDK Send Get Block Header Error: context.response must be defined.");const r=null!==(e=yield e).block.id,s=null!==e.block.height;return r?yield(i=h(function*(a,l,d){const f=d.httpRequest||se;return _n(a,l,yield f({hostname:d.node,path:`/v1/blocks/${a.block.id}`,method:"GET",body:null}))}),function(a,l,d){return i.apply(this,arguments)})(e,t,n):s?yield function(){var i=h(function*(a,l,d){const f=d.httpRequest||se;return _n(a,l,yield f({hostname:d.node,path:`/v1/blocks?height=${a.block.height}`,method:"GET",body:null}))});return function(a,l,d){return i.apply(this,arguments)}}()(e,t,n):yield function(){var i=h(function*(a,l,d){const f=d.httpRequest||se,p=a.block?.isSealed?"sealed":"final";return _n(a,l,yield f({hostname:d.node,path:`/v1/blocks?height=${p}`,method:"GET",body:null}))});return function(a,l,d){return i.apply(this,arguments)}}()(e,t,n);var i}),In.apply(this,arguments)}function Sn(e,t,n){const r=n.length?n[0]:null,s=t.response();return s.tag=e.tag,s.block={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp,collectionGuarantees:r.payload.collection_guarantees.map(i=>({collectionId:i.collection_id,signerIds:i.signer_ids})),blockSeals:r.payload.block_seals.map(i=>({blockId:i.block_id,executionReceiptId:i.result_id}))},s}function Ei(e){return An.apply(this,arguments)}function An(){return An=h(function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(n.node,"SDK Send Get Block Error: opts.node must be defined."),_(t.response,"SDK Send Get Block Error: context.response must be defined.");const r=null!==(e=yield e).block.id,s=null!==e.block.height;return r?yield(i=h(function*(a,l,d){const f=d.httpRequest||se;return Sn(a,l,yield f({hostname:d.node,path:`/v1/blocks/${a.block.id}?expand=payload`,method:"GET",body:null}))}),function(a,l,d){return i.apply(this,arguments)})(e,t,n):s?yield function(){var i=h(function*(a,l,d){const f=d.httpRequest||se;return Sn(a,l,yield f({hostname:d.node,path:`/v1/blocks?height=${a.block.height}&expand=payload`,method:"GET",body:null}))});return function(a,l,d){return i.apply(this,arguments)}}()(e,t,n):yield function(){var i=h(function*(a,l,d){const f=d.httpRequest||se,p=a.block?.isSealed?"sealed":"final";return Sn(a,l,yield f({hostname:d.node,path:`/v1/blocks?height=${p}&expand=payload`,method:"GET",body:null}))});return function(a,l,d){return i.apply(this,arguments)}}()(e,t,n);var i}),An.apply(this,arguments)}function ko(e,t,n){let r=t.response();return r.tag=e.tag,r.events=[],n.forEach(s=>s.events?s.events.forEach(i=>r.events.push({blockId:s.block_id,blockHeight:Number(s.block_height),blockTimestamp:s.block_timestamp,type:i.type,transactionId:i.transaction_id,transactionIndex:Number(i.transaction_index),eventIndex:Number(i.event_index),payload:JSON.parse(t.Buffer.from(i.payload,"base64").toString())})):null),r}function wi(e){return xn.apply(this,arguments)}function xn(){return xn=h(function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(n.node,"SDK Send Get Events Error: opts.node must be defined."),_(t.response,"SDK Send Get Events Error: context.response must be defined."),_(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined.");const r=null!==(e=yield e).events.start,s=Array.isArray(e.events.blockIds)&&e.events.blockIds.length>0;return _(r||s,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),r?yield(i=h(function*(a,l,d){const f=d.httpRequest||se;return ko(a,l,yield f({hostname:d.node,path:`/v1/events?type=${a.events.eventType}&start_height=${a.events.start}&end_height=${a.events.end}`,method:"GET",body:null}))}),function(a,l,d){return i.apply(this,arguments)})(e,t,n):yield function(){var i=h(function*(a,l,d){const f=d.httpRequest||se,p=yield f({hostname:d.node,path:`/v1/events?type=${a.events.eventType}&block_ids=${a.events.blockIds.join(",")}`,method:"GET",body:null});return ko(a,l,p)});return function(a,l,d){return i.apply(this,arguments)}}()(e,t,n);var i}),xn.apply(this,arguments)}const _i={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5},Ii=e=>`${withPrefix(e.addr)}-${e.keyId}`,kn=function(){var e=h(function*(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(_(r.node,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),_(n.ix,"SDK Send Error: context.ix must be defined."),t=yield t,!0){case n.ix.isTransaction(t):return r.sendTransaction?r.sendTransaction(t,n,r):(s=h(function*(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(l.node,"SDK Send Transaction Error: opts.node must be defined."),_(a.response,"SDK Send Transaction Error: context.response must be defined."),_(a.Buffer,"SDK Send Transaction Error: context.Buffer must be defined.");const d=l.httpRequest||se;i=yield i;let f=[];for(let S of Object.values(i.accounts))try{S.role.payer||null==S.signature||f.push({address:$(S.addr),key_index:String(S.keyId),signature:a.Buffer.from(S.signature,"hex").toString("base64")})}catch(T){throw console.error("SDK HTTP Send Error: Trouble applying payload signature",{acct:S,ix:i}),T}let p={};for(let S of Object.values(i.accounts))try{if(S.role.payer&&null!=S.signature){let T=S.tempId||Ii(S);p[T]=p[T]||{address:$(S.addr),key_index:String(S.keyId),signature:a.Buffer.from(S.signature,"hex").toString("base64")}}}catch(T){throw console.error("SDK HTTP Send Error: Trouble applying envelope signature",{acct:S,ix:i}),T}p=Object.values(p);var y=Date.now();const b=yield d({hostname:l.node,path:"/v1/transactions",method:"POST",body:{script:a.Buffer.from(i.message.cadence).toString("base64"),arguments:[...i.message.arguments.map(S=>a.Buffer.from(JSON.stringify(i.arguments[S].asArgument)).toString("base64"))],reference_block_id:i.message.refBlock?i.message.refBlock:null,gas_limit:String(i.message.computeLimit),payer:$(i.accounts[Array.isArray(i.payer)?i.payer[0]:i.payer].addr),proposal_key:{address:$(i.accounts[i.proposer].addr),key_index:String(i.accounts[i.proposer].keyId),sequence_number:String(i.accounts[i.proposer].sequenceNum)},authorizers:i.authorizations.map(S=>i.accounts[S].addr).reduce((S,T)=>S.find(R=>R===T)?S:[...S,T],[]).map($),payload_signatures:f,envelope_signatures:p}});var w=Date.now();let x=a.response();return x.tag=i.tag,x.transactionId=b.id,typeof window<"u"&&typeof CustomEvent<"u"&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:x.transactionId,delta:w-y}})),x}),function(i){return s.apply(this,arguments)})(t,n,r);case n.ix.isGetTransactionStatus(t):return r.sendGetTransactionStatus?r.sendGetTransactionStatus(t,n,r):function(){var s=h(function*(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(l.node,"SDK Send Get Transaction Status Error: opts.node must be defined."),_(a.response,"SDK Send Get Transaction Status Error: context.response must be defined."),_(a.Buffer,"SDK Send Get Transaction Status Error: context.Buffer must be defined.");const d=l.httpRequest||se;i=yield i;const f=yield d({hostname:l.node,path:`/v1/transaction_results/${i.transaction.id}`,method:"GET",body:null});let p=a.response();return p.tag=i.tag,p.transactionStatus={blockId:f.block_id,status:_i[f.status.toUpperCase()]||"",statusString:f.status.toUpperCase(),statusCode:f.status_code,errorMessage:f.error_message,events:f.events.map(y=>({type:y.type,transactionId:y.transaction_id,transactionIndex:Number(y.transaction_index),eventIndex:Number(y.event_index),payload:JSON.parse(a.Buffer.from(y.payload,"base64").toString())}))},p});return function(i){return s.apply(this,arguments)}}()(t,n,r);case n.ix.isGetTransaction(t):return r.sendGetTransaction?r.sendGetTransaction(t,n,r):function(){var s=h(function*(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(l.node,"SDK Send Get Transaction Error: opts.node must be defined."),_(a.response,"SDK Send Get Transaction Error: context.response must be defined."),_(a.Buffer,"SDK Send Get Transaction Error: context.Buffer must be defined.");const d=l.httpRequest||se;i=yield i;const f=yield d({hostname:l.node,path:`/v1/transactions/${i.transaction.id}`,method:"GET",body:null}),p=w=>({address:w.address,keyId:Number(w.key_index),signature:w.signature});let y=a.response();var b;return y.tag=i.tag,y.transaction={script:a.Buffer.from(f.script,"base64").toString(),args:[...f.arguments.map(w=>JSON.parse(a.Buffer.from(w,"base64").toString()))],referenceBlockId:f.reference_block_id,gasLimit:Number(f.gas_limit),payer:f.payer,proposalKey:f.proposal_key?(b=f.proposal_key,{address:b.address,keyId:Number(b.key_id),sequenceNumber:Number(b.sequence_number)}):f.proposal_key,authorizers:f.authorizers,payloadSignatures:[...f.payload_signatures.map(p)],envelopeSignatures:[...f.envelope_signatures.map(p)]},y});return function(i){return s.apply(this,arguments)}}()(t,n,r);case n.ix.isScript(t):return r.sendExecuteScript?r.sendExecuteScript(t,n,r):mi(t,n,r);case n.ix.isGetAccount(t):return r.sendGetAccount?r.sendGetAccount(t,n,r):vi(t,n,r);case n.ix.isGetEvents(t):return r.sendGetEvents?r.sendGetEvents(t,n,r):wi(t,n,r);case n.ix.isGetBlock(t):return r.sendGetBlock?r.sendGetBlock(t,n,r):Ei(t,n,r);case n.ix.isGetBlockHeader(t):return r.sendGetBlockHeader?r.sendGetBlockHeader(t,n,r):bi(t,n,r);case n.ix.isGetCollection(t):return r.sendGetCollection?r.sendGetCollection(t,n,r):function(){var s=h(function*(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(l.node,"SDK Send Get Collection Error: opts.node must be defined."),_(a.response,"SDK Send Get Collection Error: context.response must be defined.");const d=l.httpRequest||se,f=yield d({hostname:l.node,path:`/v1/collections/${i.collection.id}?expand=transactions`,method:"GET",body:null}),p=a.response();return p.tag=i.tag,p.collection={id:f.id,transactionIds:f.transactions.map(y=>y.id)},p});return function(i){return s.apply(this,arguments)}}()(t,n,r);case n.ix.isPing(t):return r.sendPing?r.sendPing(t,n,r):function(){var s=h(function*(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(l.node,"SDK Send Ping Error: opts.node must be defined."),_(a.response,"SDK Send Ping Error: context.response must be defined."),yield(l.httpRequest||se)({hostname:l.node,path:"/v1/blocks?height=sealed",method:"GET",body:null});let f=a.response();return f.tag=i.tag,f});return function(i){return s.apply(this,arguments)}}()(t,n,r);case n.ix.isGetNetworkParameters(t):return r.sendGetNetworkParameters?r.sendGetNetworkParameters(t,n,r):function(){var s=h(function*(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(l.node,"SDK Send Get Network Parameters Error: opts.node must be defined."),_(a.response,"SDK Send Get Network Parameters Error: context.response must be defined.");const d=l.httpRequest||se;i=yield i;const f=yield d({hostname:l.node,path:"/v1/network/parameters",method:"GET",body:null,enableRequestLogging:l.enableRequestLogging??!0});let p=a.response();return p.tag=i.tag,p.networkParameters={chainId:f.chain_id},p});return function(i){return s.apply(this,arguments)}}()(t,n,r);default:return t}var s});return function(n){return e.apply(this,arguments)}}();var Rn={},Ro={},To={},Po={},Tn=function(e,t){return function(n,r){var s=2*r,i=2*t;n[s]=e[i],n[s+1]=e[i+1]}};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=Tn)&&t.__esModule?t:{default:t};e.default=function(s){for(var i=s.A,a=s.C,l=0;l<25;l+=5){for(var d=0;d<5;d++)(0,n.default)(i,l+d)(a,d);for(var f=0;f<5;f++){var p=2*(l+f),y=(f+1)%5*2,b=(f+2)%5*2;i[p]^=~a[y]&a[b],i[p+1]^=~a[y+1]&a[b+1]}}}}(Po);var Co={},Oo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]);e.default=t})(Oo),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=Oo)&&t.__esModule?t:{default:t};e.default=function(s){var i=s.A,a=2*s.roundIndex;i[0]^=n.default[a],i[1]^=n.default[a+1]}}(Co);var e,Bo={},No={};e=No,Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1];var Uo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44]})(Uo),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s(No),n=s(Uo),r=s(Tn);function s(a){return a&&a.__esModule?a:{default:a}}e.default=function(a){var l=a.A,d=a.C,f=a.W;(0,r.default)(l,1)(f,0);for(var p=0,y=0,b=0,w=32,x=0;x<24;x++){var S=t.default[x],T=n.default[x];(0,r.default)(l,S)(d,0),f[b=T<32?0:1]=(p=f[0])<<T|(y=f[1])>>>(w=32-T),f[(b+1)%2]=y<<T|p>>>w,(0,r.default)(f,0)(l,S),(0,r.default)(d,0)(f,0)}}}(Bo);var Do={};function Lo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e.length&&!t.length||!e.length)return n;if(!t.length)return[...n,e[0]];const[r,...s]=e,[i,...a]=t;return void 0!==r&&n.push(r),void 0!==i&&n.push(i),Lo(s,a,n)}function Fo(e){return function(t){return"function"==typeof t?(z.deprecate({pkg:"FCL/SDK",subject:"Interopolation of functions into template literals",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"}),Fo(e)(t(e))):String(t)}}function Dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"string"==typeof e?()=>e:Array.isArray(e)?s=>Lo(e,n.map(Fo(s))).join("").trim():e}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=Tn)&&t.__esModule?t:{default:t};e.default=function(s){for(var i=s.A,a=s.C,l=s.D,d=s.W,f=0,p=0,y=0;y<5;y++){var b=2*y,w=2*(y+5),x=2*(y+10),S=2*(y+15),T=2*(y+20);a[b]=i[b]^i[w]^i[x]^i[S]^i[T],a[b+1]=i[b+1]^i[w+1]^i[x+1]^i[S+1]^i[T+1]}for(var R=0;R<5;R++){(0,n.default)(a,(R+1)%5)(d,0),d[0]=(f=d[0])<<1|(p=d[1])>>>31,d[1]=p<<1|f>>>31,l[2*R]=a[(R+4)%5*2]^d[0],l[2*R+1]=a[(R+4)%5*2+1]^d[1];for(var B=0;B<25;B+=5)i[2*(B+R)]^=l[2*R],i[2*(B+R)+1]^=l[2*R+1]}}})(Do),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Po),n=i(Co),r=i(Bo),s=i(Do);function i(l){return l&&l.__esModule?l:{default:l}}e.default=function(){var l=new Uint32Array(10),d=new Uint32Array(10),f=new Uint32Array(2);return function(p){for(var y=0;y<24;y++)(0,s.default)({A:p,C:l,D:d,W:f}),(0,r.default)({A:p,C:l,W:f}),(0,t.default)({A:p,C:l}),(0,n.default)({A:p,roundIndex:y});l.fill(0),d.fill(0),f.fill(0)}}}(To),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=j,r=(t=To)&&t.__esModule?t:{default:t},s=function(l,d){for(var f=0;f<l.length;f+=8){var p=f/4;d[p]^=l[f+7]<<24|l[f+6]<<16|l[f+5]<<8|l[f+4],d[p+1]^=l[f+3]<<24|l[f+2]<<16|l[f+1]<<8|l[f]}return d},i=function(l,d){for(var f=0;f<d.length;f+=8){var p=f/4;d[f]=l[p+1],d[f+1]=l[p+1]>>>8,d[f+2]=l[p+1]>>>16,d[f+3]=l[p+1]>>>24,d[f+4]=l[p],d[f+5]=l[p]>>>8,d[f+6]=l[p]>>>16,d[f+7]=l[p]>>>24}return d};e.default=function(l){var d=this,f=l.capacity,p=l.padding,y=(0,r.default)(),b=f/8,w=200-f/4,x=0,S=new Uint32Array(50),T=n.Buffer.allocUnsafe(w);return this.absorb=function(R){for(var B=0;B<R.length;B++)T[x]=R[B],(x+=1)>=w&&(s(T,S),y(S),x=0);return d},this.squeeze=function(){var R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},B={buffer:R.buffer||n.Buffer.allocUnsafe(b),padding:R.padding||p,queue:n.Buffer.allocUnsafe(T.length),state:new Uint32Array(S.length)};T.copy(B.queue);for(var J=0;J<S.length;J++)B.state[J]=S[J];B.queue.fill(0,x),B.queue[x]|=B.padding,B.queue[w-1]|=128,s(B.queue,B.state);for(var X=0;X<B.buffer.length;X+=w)y(B.state),i(B.state,B.buffer.slice(X,X+w));return B.buffer},this.reset=function(){return T.fill(0),S.fill(0),x=0,d},this}}(Ro),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var t,n=j,r=(t=Ro)&&t.__esModule?t:{default:t},s=function(p){var y=p.allowedSizes,b=p.defaultSize,w=p.padding;return function x(){var S=this,T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;if(!this||this.constructor!==x)return new x(T);if(y&&!y.includes(T))throw new Error("Unsupported hash length");var R=new r.default({capacity:T});return this.update=function(B){var J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(n.Buffer.isBuffer(B))return R.absorb(B),S;if("string"==typeof B)return S.update(n.Buffer.from(B,J));throw new TypeError("Not a string or buffer")},this.digest=function(){var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"binary",J="string"==typeof B?{format:B}:B,X=R.squeeze({buffer:J.buffer,padding:J.padding||w});return J.format&&"binary"!==J.format?X.toString(J.format):X},this.reset=function(){return R.reset(),S},this}},i=s({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=i;var a=s({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=a;var l=s({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=l;var d=i;e.SHA3Hash=d,a.SHA3Hash=d,e.default=a}(Rn);const Lt="UNKNOWN",Pn="SCRIPT",Cn="TRANSACTION",On="GET_TRANSACTION_STATUS",Bn="GET_ACCOUNT",Nn="GET_EVENTS",Un="PING",Dn="GET_TRANSACTION",Ln="GET_BLOCK",Fn="GET_BLOCK_HEADER",jn="GET_COLLECTION",$n="GET_NETWORK_PARAMETERS",Gn="ACCOUNT",zn="ARGUMENT",Hn="authorizer",qn="payer",$o="proposer",Si=`{\n  "kind":"${Gn}",\n  "tempId":null,\n  "addr":null,\n  "keyId":null,\n  "sequenceNum":null,\n  "signature":null,\n  "signingFunction":null,\n  "resolve":null,\n  "role": {\n    "proposer":false,\n    "authorizer":false,\n    "payer":false,\n    "param":false\n  }\n}`,Ai=`{\n  "kind":"${zn}",\n  "tempId":null,\n  "value":null,\n  "asArgument":null,\n  "xform":null,\n  "resolve": null,\n  "resolveArgument": null\n}`,Mo=`{\n  "tag":"${Lt}",\n  "assigns":{},\n  "status":"OK",\n  "reason":null,\n  "accounts":{},\n  "params":{},\n  "arguments":{},\n  "message": {\n    "cadence":null,\n    "refBlock":null,\n    "computeLimit":null,\n    "proposer":null,\n    "payer":null,\n    "authorizations":[],\n    "params":[],\n    "arguments":[]\n  },\n  "proposer":null,\n  "authorizations":[],\n  "payer":[],\n  "events": {\n    "eventType":null,\n    "start":null,\n    "end":null,\n    "blockIds":[]\n  },\n  "transaction": {\n    "id":null\n  },\n  "block": {\n    "id":null,\n    "height":null,\n    "isSealed":null\n  },\n  "account": {\n    "addr":null\n  },\n  "collection": {\n    "id":null\n  }\n}`,Go=new Set(Object.keys(JSON.parse(Mo))),jt=()=>JSON.parse(Mo),zo="abcdefghijklmnopqrstuvwxyz0123456789".split(""),xi=()=>zo[~~(Math.random()*zo.length)],Kn=()=>Array.from({length:10},xi).join(""),Ho=e=>"number"==typeof e,qo=e=>Array.isArray(e),Ko=e=>null!==e&&"object"==typeof e,Wn=e=>null==e,tt=e=>"function"==typeof e,Wo=e=>{if(!Ko(e)||Wn(e)||Ho(e))return!1;for(let t of Go)if(!e.hasOwnProperty(t))return!1;return!0},te=e=>(e.status="OK",e),Vn=(e,t)=>(e.status="BAD",e.reason=t,e),ge=e=>t=>(t.tag=e,te(t)),Vo=e=>null==e.keyId?e:(_(!isNaN(parseInt(e.keyId)),"account.keyId must be an integer"),{...e,keyId:parseInt(e.keyId)}),$t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{_("function"==typeof e||"object"==typeof e,"prepAccount must be passed an authorization function or an account object"),_(null!=t.role,"Account must have a role");const r=JSON.parse(Si),s=t.role,i=Kn();e.authorization&&tt(e.authorization)&&(e={resolve:e.authorization}),!e.authorization&&tt(e)&&(e={resolve:e});const a=e.resolve;return a&&(e.resolve=function(l){for(var d=arguments.length,f=new Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];return[a,Vo].reduce(function(){var y=h(function*(b,w){return w(yield b,...f)});return function(b,w){return y.apply(this,arguments)}}(),l)}),e=Vo(e),n.accounts[i]={...r,tempId:i,...e,role:{...r.role,..."object"==typeof e.role?e.role:{},[s]:!0}},s===Hn?n.authorizations.push(i):s===qn?n.payer.push(i):n[s]=i,n}},Yo=e=>t=>{let n=Kn();return t.message.arguments.push(n),t.arguments[n]=JSON.parse(Ai),t.arguments[n].tempId=n,t.arguments[n].value=e.value,t.arguments[n].asArgument=e.asArgument,t.arguments[n].xform=e.xform,t.arguments[n].resolve=e.resolve,t.arguments[n].resolveArgument=tt(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,te(t)},ki=ge(Lt),Jo=ge(Pn),Xo=ge(Cn),Zo=ge(On),Qo=ge(Dn),ea=ge(Bn),Mt=ge(Nn),ta=ge(Un),na=ge(Ln),ra=ge(Fn),oa=ge(jn),aa=ge($n),me=e=>t=>t.tag===e,Ri=me(Lt),Yn=me(Pn),Ne=me(Cn),Ti=me(On),Pi=me(Dn),Jn=me(Bn),Ci=me(Nn),Oi=me(Un),sa=me(Ln),Bi=me(Fn),Ni=me(jn),Ui=me($n),ia=e=>"OK"===e.status,Xn=e=>"BAD"===e.status,ua=e=>e.reason,Gt=function(){var e=h(function*(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{if(t=(a=>{for(let l of Object.keys(a))if(!Go.has(l))throw new Error(`"${l}" is an invalid root level Interaction property.`);return a})(yield t),Xn(t))throw new Error(`Interaction Error: ${t.reason}`);if(!n.length)return t;const[r,...s]=n,i=yield r;if(tt(i))return Gt(i(t),s);if(Wn(i)||!i)return Gt(t,s);if(Wo(i))return Gt(i,s);throw new Error("Invalid Interaction Composition")}catch(r){throw r}});return function(n){return e.apply(this,arguments)}}(),W=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,s]=t;return qo(r)&&null==s?i=>W(i,r):Gt(r,s)},Di=e=>e,zt=(e,t,n)=>e.assigns[t]??n,Ht=(e,t)=>n=>(n.assigns[e]=t,te(n)),ca=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Di;return n=>(n.assigns[e]=t(n.assigns[e],n),te(n))};var Zn=Object.freeze({__proto__:null,UNKNOWN:Lt,SCRIPT:Pn,TRANSACTION:Cn,GET_TRANSACTION_STATUS:On,GET_ACCOUNT:Bn,GET_EVENTS:Nn,PING:Un,GET_TRANSACTION:Dn,GET_BLOCK:Ln,GET_BLOCK_HEADER:Fn,GET_COLLECTION:jn,GET_NETWORK_PARAMETERS:$n,BAD:"BAD",OK:"OK",ACCOUNT:Gn,PARAM:"PARAM",ARGUMENT:zn,AUTHORIZER:Hn,PAYER:qn,PROPOSER:$o,interaction:jt,uuid:Kn,isNumber:Ho,isArray:qo,isObj:Ko,isNull:Wn,isFn:tt,isInteraction:Wo,Ok:te,Bad:Vn,prepAccount:$t,makeArgument:Yo,makeUnknown:ki,makeScript:Jo,makeTransaction:Xo,makeGetTransactionStatus:Zo,makeGetTransaction:Qo,makeGetAccount:ea,makeGetEvents:Mt,makePing:ta,makeGetBlock:na,makeGetBlockHeader:ra,makeGetCollection:oa,makeGetNetworkParameters:aa,isUnknown:Ri,isScript:Yn,isTransaction:Ne,isGetTransactionStatus:Ti,isGetTransaction:Pi,isGetAccount:Jn,isGetEvents:Ci,isPing:Oi,isGetBlock:sa,isGetBlockHeader:Bi,isGetCollection:Ni,isGetNetworkParameters:Ui,isOk:ia,isBad:Xn,why:ua,isAccount:e=>e.kind===Gn,isParam:e=>"PARAM"===e.kind,isArgument:e=>e.kind===zn,pipe:W,get:zt,put:Ht,update:ca,destroy:e=>t=>(delete t.assigns[e],te(t))});function qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return W(jt(),e)}const Qn=()=>JSON.parse('{\n    "tag":null,\n    "transaction":null,\n    "transactionStatus":null,\n    "transactionId":null,\n    "encodedData":null,\n    "events":null,\n    "account":null,\n    "block":null,\n    "blockHeader":null,\n    "latestBlock":null,\n    "collection":null,\n    "networkParameters":null\n}');function Et(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return W([na,t=>(t.block.isSealed=e,te(t))])}function nt(e){return W([ea,t=>(t.account.addr=$(e),te(t))])}const Y=function(){var e=h(function*(t){return t});return function(n){return e.apply(this,arguments)}}(),Kt=function(){var e=h(function*(t,n,r){const s=yield t.fields.reduce(function(){var a=h(function*(l,d){return(l=yield l)[d.name]=yield rt(d.value,n,[...r,d.name]),l});return function(l,d){return a.apply(this,arguments)}}(),Promise.resolve({})),i=t.id&&da(n,t.id);return i?yield i(s):s});return function(n,r,s){return e.apply(this,arguments)}}(),la={UInt:Y,Int:Y,UInt8:Y,Int8:Y,UInt16:Y,Int16:Y,UInt32:Y,Int32:Y,UInt64:Y,Int64:Y,UInt128:Y,Int128:Y,UInt256:Y,Int256:Y,Word8:Y,Word16:Y,Word32:Y,Word64:Y,UFix64:Y,Fix64:Y,String:Y,Character:Y,Bool:Y,Address:Y,Void:function(){var e=h(function*(){return null});return function(){return e.apply(this,arguments)}}(),Optional:function(){var e=h(function*(t,n,r){return t?yield rt(t,n,r):null});return function(n,r,s){return e.apply(this,arguments)}}(),Reference:function(){var e=h(function*(t){return{address:t.address,type:t.type}});return function(n){return e.apply(this,arguments)}}(),Array:function(){var e=h(function*(t,n,r){return yield Promise.all(t.map(s=>new Promise(function(){var i=h(function*(a){return a(yield rt(s,n,[...r,s.type]))});return function(a){return i.apply(this,arguments)}}())))});return function(n,r,s){return e.apply(this,arguments)}}(),Dictionary:function(){var e=h(function*(t,n,r){return yield t.reduce(function(){var s=h(function*(i,a){return(i=yield i)[yield rt(a.key,n,[...r,a.key])]=yield rt(a.value,n,[...r,a.key]),i});return function(i,a){return s.apply(this,arguments)}}(),Promise.resolve({}))});return function(n,r,s){return e.apply(this,arguments)}}(),Event:Kt,Resource:Kt,Struct:Kt,Enum:Kt,Type:function(){var e=h(function*(t){return t.staticType});return function(n){return e.apply(this,arguments)}}(),Path:function(){var e=h(function*(t){return{domain:t.domain,identifier:t.identifier}});return function(n){return e.apply(this,arguments)}}(),Capability:function(){var e=h(function*(t){return{path:t.path,address:t.address,borrowType:t.borrowType}});return function(n){return e.apply(this,arguments)}}()},da=(e,t)=>{const n=Object.keys(e).find(r=>/^\/.*\/$/.test(r)?new RegExp(r.substring(1,r.length-1)).test(t):r===t);return t&&n&&e[n]},rt=function(){var e=h(function*(t,n,r){let s=da(n,t.type);if(!s)throw new Error(`Undefined Decoder Error: ${t.type}@${r.join(".")}`);return yield s(t.value,n,r)});return function(n,r,s){return e.apply(this,arguments)}}(),er=function(){var e=h(function*(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const i={...Object.keys(la).filter(a=>!Object.keys(n).find(l=>new RegExp(l).test(a))).reduce((a,l)=>(a[l]=la[l],a),n),...n};return rt(t,i,r)});return function(n){return e.apply(this,arguments)}}(),Re=function(){var e=h(function*(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.encodedData?er(t.encodedData,n):t.transactionStatus?{...t.transactionStatus,events:yield Promise.all(t.transactionStatus.events.map(function(){var r=h(function*(s){return{type:s.type,transactionId:s.transactionId,transactionIndex:s.transactionIndex,eventIndex:s.eventIndex,data:yield er(s.payload,n)}});return function(s){return r.apply(this,arguments)}}()))}:t.transaction?t.transaction:t.events?yield Promise.all(t.events.map(function(){var r=h(function*(s){return{blockId:s.blockId,blockHeight:s.blockHeight,blockTimestamp:s.blockTimestamp,type:s.type,transactionId:s.transactionId,transactionIndex:s.transactionIndex,eventIndex:s.eventIndex,data:yield er(s.payload,n)}});return function(s){return r.apply(this,arguments)}}())):t.account?t.account:t.block?t.block:t.blockHeader?t.blockHeader:t.latestBlock?(z.deprecate({pkg:"@onflow/decode",subject:"Operating upon data of the latestBlock field of the response object",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field"}),t.latestBlock):t.transactionId?t.transactionId:t.collection?t.collection:t.networkParameters?{chainId:{"flow-testnet":"testnet","flow-mainnet":"mainnet","flow-emulator":"local"}[t.networkParameters.chainId]}:null});return function(n){return e.apply(this,arguments)}}(),fa=e=>"function"==typeof e,pa=e=>"string"==typeof e;function ga(e){return/\b(0x\w+)\b/g.test(e)}function ha(e){return/import\s+"(\w+)"/g.test(e)}const tr=e=>"function"==typeof e;function Fi(e){return _(null!=typeof e.xform,`No type specified for argument: ${e.value}`),tr(e.xform)?e.xform(e.value):tr(e.xform.asArgument)?e.xform.asArgument(e.value):void _(!1,"Invalid Argument",e)}function ya(e){return nr.apply(this,arguments)}function nr(){return nr=h(function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return _(t>0,`Argument Resolve Recursion Limit Exceeded for Arg: ${e.tempId}`),tr(e.resolveArgument)?ya(yield e.resolveArgument(),t-1):e}),nr.apply(this,arguments)}const va=e=>Ia(rr(Ra(e))),ba=e=>Ia(rr(Mi(e))),Ea=(e,t)=>j.Buffer.from(e.padStart(2*t,0),"hex"),ji=(wa=j.Buffer.from("FLOW-V0.0-transaction").toString("hex"),32,j.Buffer.from(wa.padEnd(64,0),"hex")).toString("hex");var wa;const Ia=e=>ji+e,ot=e=>Ea(e,8),Sa=e=>Ea(e,32),Aa=e=>j.Buffer.from(JSON.stringify(e),"utf8"),xa=e=>j.Buffer.from(e,"utf8"),ka=e=>j.Buffer.from(e,"hex"),rr=e=>Ge(e).toString("hex"),Ra=e=>(Hi(e),[xa(e.cadence),e.arguments.map(Aa),Sa(e.refBlock),e.computeLimit,ot($(e.proposalKey.address)),e.proposalKey.keyId,e.proposalKey.sequenceNum,ot($(e.payer)),e.authorizers.map(t=>ot($(t)))]),Mi=e=>(qi(e),[Ra(e),Gi(e)]),Gi=e=>{const t=Ta(e);return e.payloadSigs.map(n=>({signerIndex:t.get(n.address),keyId:n.keyId,sig:n.sig})).sort((n,r)=>n.signerIndex>r.signerIndex?1:n.signerIndex<r.signerIndex?-1:n.keyId>r.keyId?1:n.keyId<r.keyId?-1:void 0).map(n=>[n.signerIndex,n.keyId,ka(n.sig)])},Ta=e=>{const t=new Map;let n=0;const r=s=>{t.has(s)||(t.set(s,n),n++)};return r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),t},Hi=e=>{Ca.forEach(t=>Se(e,t)),Oa.forEach(t=>Se(e.proposalKey,t,"proposalKey"))},qi=e=>{Ba.forEach(t=>Se(e,t)),e.payloadSigs.forEach((t,n)=>{Na.forEach(r=>Se(t,r,"payloadSigs",n))})},Ki=e=>{Ca.forEach(t=>Se(e,t)),Oa.forEach(t=>Se(e.proposalKey,t,"proposalKey")),Ba.forEach(t=>Se(e,t)),e.payloadSigs.forEach((t,n)=>{Na.forEach(r=>Se(t,r,"payloadSigs",n))}),Wi.forEach(t=>Se(e,t)),e.envelopeSigs.forEach((t,n)=>{Vi.forEach(r=>Se(t,r,"envelopeSigs",n))})},wt=e=>"number"==typeof e,Ue=e=>"string"==typeof e,Pa=e=>null!==e&&"object"==typeof e,Wt=e=>Pa(e)&&e instanceof Array,Ca=[{name:"cadence",check:Ue},{name:"arguments",check:Wt},{name:"refBlock",check:Ue,defaultVal:"0"},{name:"computeLimit",check:wt},{name:"proposalKey",check:Pa},{name:"payer",check:Ue},{name:"authorizers",check:Wt}],Oa=[{name:"address",check:Ue},{name:"keyId",check:wt},{name:"sequenceNum",check:wt}],Ba=[{name:"payloadSigs",check:Wt}],Na=[{name:"address",check:Ue},{name:"keyId",check:wt},{name:"sig",check:Ue}],Wi=[{name:"envelopeSigs",check:Wt}],Vi=[{name:"address",check:Ue},{name:"keyId",check:wt},{name:"sig",check:Ue}],Se=(e,t,n,r)=>{const{name:s,check:i,defaultVal:a}=t;if(null==e[s]&&null!=a&&(e[s]=a),null==e[s])throw Yi(s,n,r);if(!i(e[s]))throw Ji(s,n,r)},Ua=(e,t,n)=>t?null==n?`${t}.${e}`:`${t}.${n}.${e}`:e,Yi=(e,t,n)=>new Error(`Missing field ${Ua(e,t,n)}`),Ji=(e,t,n)=>new Error(`Invalid field ${Ua(e,t,n)}`);function Da(e){let t=new Set(e.authorizations);return t.add(e.proposer),Array.isArray(e.payer)?e.payer.forEach(n=>t.delete(n)):t.delete(e.payer),Array.from(t)}function La(e){let t=new Set(Array.isArray(e.payer)?e.payer:[e.payer]);return Array.from(t)}const _t=e=>({cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(t=>e.arguments[t].asArgument),proposalKey:{address:K(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:K(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),authorizers:(()=>{const t=e.authorizations.map(n=>K(e.accounts[n].addr)).reduce((n,r)=>n.find(s=>s===r)?n:[...n,r],[]);return t[0]?t:[]})(),payloadSigs:Da(e).map(t=>({address:K(e.accounts[t].addr),keyId:e.accounts[t].keyId,sig:e.accounts[t].signature})),envelopeSigs:La(e).map(t=>({address:K(e.accounts[t].addr),keyId:e.accounts[t].keyId,sig:e.accounts[t].signature}))}),Fa=e=>`${K(e.addr)}-${e.keyId}`,Xi=e=>"function"==typeof e;function Zi(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(n=>t.arguments[n].asArgument),data:{},interaction:t,voucher:_t(t)}}catch(n){throw console.error("buildPreSignable",n),n}}function or(e,t,n){return ar.apply(this,arguments)}function ar(){return ar=h(function*(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;_(r,"Account Resolve Recursion Limit Exceeded",{ix:e,accounts:t});let s=[];for(let a of t){let l=a.resolve;a.resolve=null;var i=n||a;if(Xi(l)&&(a=yield l(a,Zi(a,e))),Array.isArray(a))yield or(e,a,i,r-1);else{if(a.addr&&(a.addr=$(a.addr)),null!=a.addr&&null!=a.keyId&&(a.tempId=Fa(a)),e.accounts[a.tempId]=e.accounts[a.tempId]||a,e.accounts[a.tempId].role.proposer=e.accounts[a.tempId].role.proposer||a.role.proposer,e.accounts[a.tempId].role.payer=e.accounts[a.tempId].role.payer||a.role.payer,e.accounts[a.tempId].role.authorizer=e.accounts[a.tempId].role.authorizer||a.role.authorizer,e.accounts[a.tempId].role.proposer&&e.proposer===i.tempId&&(e.proposer=a.tempId),e.accounts[a.tempId].role.payer&&(e.payer=Array.isArray(e.payer)?Array.from(new Set([...e.payer,a.tempId].map(d=>d===i.tempId?a.tempId:d))):Array.from(new Set([e.payer,a.tempId].map(d=>d===i.tempId?a.tempId:d))),e.payer.length>1)){const d=[],f=[];if(e.payer=e.payer.reduce((p,y)=>{const{addr:b}=e.accounts[y],w=Fa(e.accounts[y]);return f.push(b),d.includes(w)?p:(d.push(w),[...p,y])},[]),Array.from(new Set(f)).length>1)throw new Error("Payer can not be different accounts")}e.accounts[a.tempId].role.authorizer&&(n?s=Array.from(new Set([...s,a.tempId])):e.authorizations=e.authorizations.map(d=>d===i.tempId?a.tempId:d))}i.tempId!=a.tempId&&delete e.accounts[i.tempId]}n&&(e.authorizations=e.authorizations.map(a=>a===n.tempId?s:a).reduce((a,l)=>Array.isArray(l)?[...a,...l]:[...a,l],[]))}),ar.apply(this,arguments)}function ja(e,t){return function(){var n=h(function*(r){const s=e.accounts[r];if(null!=s.signature)return;const{signature:i}=yield s.signingFunction(function(a,l,d){try{return{f_type:"Signable",f_vsn:"1.0.1",message:l,addr:$(a.addr),keyId:a.keyId,roles:a.role,cadence:d.message.cadence,args:d.message.arguments.map(f=>d.arguments[f].asArgument),data:{},interaction:d,voucher:_t(d)}}catch(f){throw console.error("buildSignable",f),f}}(s,t,e));e.accounts[r].signature=i});return function(r){return n.apply(this,arguments)}}()}function $a(e){const t=$((Array.isArray(e.payer)?e.accounts[e.payer[0]]:e.accounts[e.payer]).addr);return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(n=>e.arguments[n].asArgument),proposalKey:{address:$(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:t,authorizers:e.authorizations.map(n=>$(e.accounts[n].addr)).reduce((n,r)=>n.find(s=>s===r)?n:[...n,r],[])}}const Qi=e=>e,at=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qi;return function(){var n=h(function*(r){return(yield P.get(`debug.${e}`))&&(yield t(r,function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];console.log(`debug[${e}] ---\n`,...i,"\n\n\n---")},s=>["\nAccounts:",{proposer:s.proposer,authorizations:s.authorizations,payer:s.payer},"\n\nDetails:",s.accounts].filter(Boolean))),r});return function(r){return n.apply(this,arguments)}}()},sr=W([function(){var e=h(function*(t){if(!Ne(t)&&!Yn(t))return t;var n=zt(t,"ix.cadence");if(_(fa(n)||pa(n),"Cadence needs to be a function or a string."),fa(n)&&(n=yield n({})),_(pa(n),"Cadence needs to be a string at this point."),_(!ga(n)||!ha(n),"Both account identifier and contract identifier syntax not simultaneously supported."),ga(n)&&(n=yield P().where(/^0x/).then(r=>Object.entries(r).reduce((s,i)=>{let[a,l]=i;const d=new RegExp("(\\b"+a+"\\b)","g");return s.replace(d,l)},n))),ha(n))for(const[r,s]of n.matchAll(/import\s+"(\w+)"/g)){const i=yield P().get(`system.contracts.${s}`);i?n=n.replace(r,`import ${s} from ${K(i)}`):z({title:"Contract Placeholder not found",message:`Cannot find a value for contract placeholder ${s}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,level:Z.warn})}return t.message.cadence=n,t});return function(t){return e.apply(this,arguments)}}(),at("cadence",(e,t)=>t(e.message.cadence)),function(){var e=h(function*(t){return Ne(t)&&(t.message.computeLimit=t.message.computeLimit||(yield P.get("fcl.limit")),t.message.computeLimit||(z.deprecate({pkg:"FCL/SDK",subject:"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit"}),t.message.computeLimit=100)),t});return function(t){return e.apply(this,arguments)}}(),at("compute limit",(e,t)=>t(e.message.computeLimit)),function(){var e=h(function*(t){if(Ne(t)||Yn(t))for(let[n,r]of Object.entries(t.arguments)){const s=yield ya(r);t.arguments[n].asArgument=Fi(s)}return t});return function(t){return e.apply(this,arguments)}}(),at("arguments",(e,t)=>t(e.message.arguments,e.message)),function(){var e=h(function*(t){if(Ne(t)){Array.isArray(t.payer)||z.deprecate({pkg:"FCL",subject:'"ix.payer" must be an array. Support for ix.payer as a singular',message:"See changelog for more info."});try{yield or(t,Object.values(t.accounts)),yield or(t,Object.values(t.accounts))}catch(n){throw console.error("=== SAD PANDA ===\n\n",n,"\n\n=== SAD PANDA ==="),n}}return t});return function(t){return e.apply(this,arguments)}}(),at("accounts",(e,t,n)=>t(...n(e))),function(){var e=h(function*(t){if(Ne(t)&&null==t.message.refBlock){const n=yield P().get("accessNode.api"),r=yield P.first(["sdk.transport","sdk.send"],kn);_(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),t.message.refBlock=(yield r(qt([Et()]),{config:P,response:Qn,Buffer:j.Buffer,ix:Zn},{node:n}).then(Re)).id}return t});return function(t){return e.apply(this,arguments)}}(),function(){var e=h(function*(t){if(Ne(t)){var n=Object.values(t.accounts).find(r=>r.role.proposer);if(_(n,"Transactions require a proposer"),null==n.sequenceNum){const r=yield P().get("accessNode.api"),s=yield P.first(["sdk.transport","sdk.send"],kn);_(s,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),t.accounts[n.tempId].sequenceNum=yield s(yield qt([nt(n.addr)]),{config:P,response:Qn,Buffer:j.Buffer,ix:Zn},{node:r}).then(Re).then(i=>i.keys).then(i=>i.find(a=>a.index===n.keyId)).then(i=>i.sequenceNumber)}}return t});return function(t){return e.apply(this,arguments)}}(),function(){var e=h(function*(t){if(Ne(t))try{let n=Da(t);const r=va($a(t));yield Promise.all(n.map(ja(t,r)));let s=La(t);const i=ba({...$a(t),payloadSigs:n.map(a=>({address:t.accounts[a].addr,keyId:t.accounts[a].keyId,sig:t.accounts[a].signature}))});yield Promise.all(s.map(ja(t,i)))}catch(n){throw console.error("Signatures",n,{ix:t}),n}return t});return function(t){return e.apply(this,arguments)}}(),at("signatures",(e,t,n)=>t(...n(e))),function(){var e=h(function*(t){for(let n of Object.keys(t.accounts))t.accounts[n].addr=$(t.accounts[n].addr);return t});return function(t){return e.apply(this,arguments)}}(),function(){var e=h(function*(t){const n=zt(t,"ix.validators",[]);return W(t,n.map(r=>s=>r(s,{Ok:te,Bad:Vn})))});return function(t){return e.apply(this,arguments)}}(),function(){var e=h(function*(t){const n=zt(t,"ix.voucher-intercept");return tt(n)&&(yield n(_t(t))),t});return function(t){return e.apply(this,arguments)}}(),at("resolved",(e,t)=>t(e))]);function O(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){const[s,i]=t;return O((a,l)=>{let{Ok:d,Bad:f}=l;return s?d(a):f(a,i)})}const[r]=t;return s=>r(s,{Ok:te,Bad:Vn})}const de=function(){var e=h(function*(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=yield P.first(["sdk.transport","sdk.send"],n.send||kn);O(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21");const s=yield P.first(["sdk.resolve"],n.resolve||sr);return n.node=n.node||(yield P().get("accessNode.api")),Array.isArray(t)&&(t=W(jt(),t)),r(yield s(t),{config:P,response:Qn,ix:Zn,Buffer:j.Buffer},n)});return function(){return e.apply(this,arguments)}}();function ze(e){return ir.apply(this,arguments)}function ir(){return ir=h(function*(e){const t=yield P().where(/^decoder\./),n=Object.entries(t).map(r=>{let[s,i]=r;return s=`/${s.replace(/^decoder\./,"")}$/`,[s,i]});return Re(e,Object.fromEntries(n))}),ir.apply(this,arguments)}class eu extends Error{constructor(t){super(`\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: ${t}. \n        Please ensure the address: ${t} is intended to sign the given transaction as specified by the transaction signable.\n      `.trim()),this.name="Unable To Determine Message Encoding For Signer Addresss"}}function ur(e){return ca("ix.validators",t=>Array.isArray(t)?t.push(e):[e])}function Vt(e){return W([t=>(t.block.height=e,t),ur(t=>{if("boolean"==typeof t.block.isSealed)throw new Error("Unable to specify both block height and isSealed.");if(t.block.id)throw new Error("Unable to specify both block height and block id.");return t})])}function cr(e){return W([t=>(t.block.id=e,te(t)),ur((t,n)=>{let{Ok:r,Bad:s}=n;return Jn(t)?s(t,"Unable to specify a block id with a Get Account interaction."):"boolean"==typeof t.block.isSealed?s(t,"Unable to specify both block id and isSealed."):t.block.height?s(t,"Unable to specify both block id and block height."):r(t)})])}function It(){let{sealed:e=!1,id:t,height:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _(!(e&&t||e&&n),'Method: block -- Cannot pass "sealed" with "id" or "height"'),_(!(t&&n),'Method: block -- Cannot pass "id" and "height" simultaneously'),t?de([Et(),cr(t)],r).then(Re):n?de([Et(),Vt(n)],r).then(Re):de([Et(e)],r).then(Re)}function Ma(){return W((arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>$t(e,{role:Hn})))}function Ga(e,t,n){return W([Mt,r=>(r.events.eventType=e,r.events.start=t,r.events.end=n,te(r))])}function za(e){return W([Zo,t=>(t.transaction.id=e,te(t))])}function Ha(){return W([aa,e=>te(e)])}function lr(e){return t=>(t.message.computeLimit=e,t)}function dr(){return W((arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(Yo))}function fr(e,t){return{value:e,xform:t}}function qa(e){return pr.apply(this,arguments)}function pr(){return pr=h(function*(e){return $t(e,{role:$o})}),pr.apply(this,arguments)}function Ka(e){return gr.apply(this,arguments)}function gr(){return gr=h(function*(e){return $t(e,{role:qn})}),gr.apply(this,arguments)}function Wa(e){return W([t=>(t.message.refBlock=e,te(t))])}function Va(){return W([Jo,Ht("ix.cadence",Dt(...arguments))])}const tu=[];function Ya(){return W([Xo,Ht("ix.cadence",Dt(...arguments)),e=>(e.message.refBlock=e.message.refBlock||null,e.authorizations=e.authorizations||tu,te(e))])}const nu=e=>e;function Ja(e){return["SIGNATURE",e.addr,e.keyId].join(".")}function St(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){const n={...t,...e,signingFunction:e.signingFunction||t.signingFunction||function(r){return{addr:n.addr,keyId:n.keyId,signature:Ja(n)}}};return n}}const mr={proposer:!1,authorizer:!1,payer:!1};var ru=Object.freeze({__proto__:null,mockSend:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nu;return function(){var t=h(function*(n){switch(n=yield n,!0){case Jn(n):return function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return _(r.account,"mockAccountResponse(ix) -- ix.account is missing",r),_(r.account.addr,"mockAccountResponse(ix) -- ix.account.addr is missing",r),{account:{addr:r.account.addr,keys:Array.from({length:s},(i,a)=>({index:a,sequenceNumber:42}))}}}(n);case sa(n):return{tag:"GET_BLOCK",block:{id:"32"}};default:return e(n)}});return function(n){return t.apply(this,arguments)}}()},authzFn:St,authzResolve:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){const{tempId:n,...r}=e;return{...t,tempId:n||"WITH_RESOLVE",resolve:St(r)}}},authzResolveMany:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return{...t,tempId:e.tempId||"AUTHZ_RESOLVE_MANY",resolve:()=>[e.proposer&&St(e.proposer)({role:{...mr,proposer:!0}}),...e.authorizations.map(St).map(n=>n({role:{...mr,authorizer:!0}})),e.payer&&St(e.payer)({role:{...mr,payer:!0}})].filter(Boolean)}}},sig:Ja,idof:e=>`${K(e.addr)}-${e.keyId}`,run:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return qt([Wa("123"),...e]).then(sr)}});const Yt=e=>t=>typeof t===e,Te=e=>null!=e,ou=Yt("object"),st=Yt("string"),Xa=Yt("function"),au=Yt("number"),D=(e,t,n)=>({label:e,asArgument:t,asInjection:n}),He=e=>Array.isArray(e),qe=e=>"object"==typeof e,Za=e=>null==e,ne=e=>"number"==typeof e,ie=e=>Number.isInteger(e),V=e=>"string"==typeof e,U=e=>{throw new Error("Type Error: "+e)},ue=e=>{z.deprecate({pkg:"@onflow/types",subject:`Passing in Number as value for ${e}`,message:`Going forward, use String as value for ${e}.`,transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0002-[U]Int*-and-Word*-as-Number"})},su=D("Identity",e=>e,e=>e),iu=D("UInt",e=>ne(e)&&ie(e)?(ue("UInt"),{type:"UInt",value:e.toString()}):V(e)?{type:"UInt",value:e}:void U("Expected Positive Integer for type Unsigned Int"),e=>e),uu=D("Int",e=>ne(e)&&ie(e)?(ue("Int"),{type:"Int",value:e.toString()}):V(e)?{type:"Int",value:e}:void U("Expected Integer for type Int"),e=>e),cu=D("UInt8",e=>ne(e)&&ie(e)?(ue("UInt8"),{type:"UInt8",value:e.toString()}):V(e)?{type:"UInt8",value:e}:void U("Expected integer for UInt8"),e=>e),lu=D("Int8",e=>ne(e)&&ie(e)?(ue("Int8"),{type:"Int8",value:e.toString()}):V(e)?{type:"Int8",value:e}:void U("Expected positive integer for Int8"),e=>e),du=D("UInt16",e=>ne(e)&&ie(e)?(ue("UInt16"),{type:"UInt16",value:e.toString()}):V(e)?{type:"UInt16",value:e}:void U("Expected integer for UInt16"),e=>e),fu=D("Int16",e=>ne(e)&&ie(e)?(ue("Int16"),{type:"Int16",value:e.toString()}):V(e)?{type:"Int16",value:e}:void U("Expected positive integer for Int16"),e=>e),pu=D("UInt32",e=>ne(e)&&ie(e)?(ue("UInt32"),{type:"UInt32",value:e.toString()}):V(e)?{type:"UInt32",value:e}:void U("Expected integer for UInt32"),e=>e),gu=D("Int32",e=>ne(e)&&ie(e)?(ue("Int32"),{type:"Int32",value:e.toString()}):V(e)?{type:"Int32",value:e}:void U("Expected positive integer for Int32"),e=>e),mu=D("UInt64",e=>ne(e)&&ie(e)?(ue("UInt64"),{type:"UInt64",value:e.toString()}):V(e)?{type:"UInt64",value:e}:void U("Expected integer for UInt64"),e=>e),hu=D("Int64",e=>ne(e)&&ie(e)?(ue("Int64"),{type:"Int64",value:e.toString()}):V(e)?{type:"Int64",value:e}:void U("Expected positive integer for Int64"),e=>e),yu=D("UInt128",e=>ne(e)&&ie(e)?(ue("UInt128"),{type:"UInt128",value:e.toString()}):V(e)?{type:"UInt128",value:e}:void U("Expected integer for UInt128"),e=>e),vu=D("Int128",e=>ne(e)&&ie(e)?(ue("Int128"),{type:"Int128",value:e.toString()}):V(e)?{type:"Int128",value:e}:void U("Expected positive integer for Int128"),e=>e),bu=D("UInt256",e=>ne(e)&&ie(e)?(ue("UInt256"),{type:"UInt256",value:e.toString()}):V(e)?{type:"UInt256",value:e}:void U("Expected integer for UInt256"),e=>e),Eu=D("Int256",e=>ne(e)&&ie(e)?(ue("Int256"),{type:"Int256",value:e.toString()}):V(e)?{type:"Int256",value:e}:void U("Expected integer for Int256"),e=>e),wu=D("Word8",e=>ne(e)&&ie(e)?(ue("Word8"),{type:"Word8",value:e.toString()}):V(e)?{type:"Word8",value:e}:void U("Expected positive number for Word8"),e=>e),_u=D("Word16",e=>ne(e)&&ie(e)?(ue("Word16"),{type:"Word16",value:e.toString()}):V(e)?{type:"Word16",value:e}:void U("Expected positive number for Word16"),e=>e),Iu=D("Word32",e=>ne(e)&&ie(e)?(ue("Word32"),{type:"Word32",value:e.toString()}):V(e)?{type:"Word32",value:e}:void U("Expected positive number for Word32"),e=>e),Su=D("Word64",e=>ne(e)&&ie(e)?(ue("Word64"),{type:"Word64",value:e.toString()}):V(e)?{type:"Word64",value:e}:void U("Expected positive number for Word64"),e=>e),Qa=()=>{z.deprecate({subject:"Passing in Numbers as values for Fix64 and UFix64 types",pkg:"@onflow/types",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0001-[U]Fix64-as-Number"})},Au=D("UFix64",e=>{if(V(e)){const t=e.split(".");return 2!==t.length&&U(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`),(0==t[1].length||t[1].length>8)&&U(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`),t[1]=t[1].padEnd(8,"0"),{type:"UFix64",value:e=t.join(".")}}if(ne(e))return Qa(),{type:"UFix64",value:e.toString()};U("Expected String for UFix64")},e=>e),xu=D("Fix64",e=>{if(V(e)){const t=e.split(".");return 2!==t.length&&U(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`),(0==t[1].length||t[1].length>8)&&U(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`),t[1]=t[1].padEnd(8,"0"),{type:"Fix64",value:e=t.join(".")}}if(ne(e))return Qa(),{type:"Fix64",value:e.toString()};U("Expected String for Fix64")},e=>e),ku=D("String",e=>{if(V(e))return{type:"String",value:e};U("Expected String for type String")},e=>e),Ru=D("Character",e=>{if(V(e))return{type:"Character",value:e};U("Expected Character for type Character")},e=>e),Tu=D("Bool",e=>{if("boolean"==typeof e)return{type:"Bool",value:e};U("Expected Boolean for type Bool")},e=>e),es=D("Address",e=>{if(V(e))return{type:"Address",value:e};U("Expected Address for type Address")},e=>e),Pu=D("Void",e=>{if(!e||Za(e))return{type:"Void"};U("Expected Void for type Void")},e=>e),Cu=D("Reference",e=>{if(qe(e))return{type:"Reference",value:e};U("Expected Object for type Reference")},e=>e),ts=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return D("Array",t=>({type:"Array",value:He(e)?e.map((n,r)=>n.asArgument(t[r])):t.map(n=>e.asArgument(n))}),t=>t)},Ou=D("Path",e=>{if(qe(e))return V(e.domain)||U(`Expected a string for the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`),"storage"!==e.domain&&"private"!==e.domain&&"public"!==e.domain&&U(`Expected either "storage", "private" or "public" as the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`),V(e.identifier)||U(`Expected a string for the Path identifier but found ${e.identifier}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`),{type:"Path",value:{domain:e.domain,identifier:e.identifier}};U("Expected Object for type Path")},e=>e);var ns=Object.freeze({__proto__:null,Address:es,Array:ts,Bool:Tu,Character:Ru,Dictionary:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return D("Dictionary",t=>{if(qe(t))return{type:"Dictionary",value:He(e)?e.map((n,r)=>({key:n.key.asArgument(t[r].key),value:n.value.asArgument(t[r].value)})):He(t)?t.map(n=>({key:e.key.asArgument(n.key),value:e.value.asArgument(n.value)})):[{key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}]};U("Expected Object for type Dictionary")},t=>t)},Enum:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return D("Enum",n=>{if(qe(n))return{type:"Enum",value:{id:e,fields:He(t)?t.map((r,s)=>({name:n.fields[s].name,value:r.value.asArgument(n.fields[s].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}};U("Expected Object for type Enum")},n=>n)},Event:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return D("Event",n=>{if(qe(n))return{type:"Event",value:{id:e,fields:He(t)?t.map((r,s)=>({name:n.fields[s].name,value:r.value.asArgument(n.fields[s].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}};U("Expected Object for type Event")},n=>n)},Fix64:xu,Identity:su,Int:uu,Int128:vu,Int16:fu,Int256:Eu,Int32:gu,Int64:hu,Int8:lu,Optional:e=>D("Optional",t=>({type:"Optional",value:Za(t)?null:e.asArgument(t)}),t=>t),Path:Ou,Reference:Cu,Resource:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return D("Resource",n=>{if(qe(n))return{type:"Resource",value:{id:e,fields:He(t)?t.map((r,s)=>({name:n.fields[s].name,value:r.value.asArgument(n.fields[s].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}};U("Expected Object for type Resource")},n=>n)},String:ku,Struct:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return D("Struct",n=>{if(qe(n))return{type:"Struct",value:{id:e,fields:He(t)?t.map((r,s)=>({name:n.fields[s].name,value:r.value.asArgument(n.fields[s].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}};U("Expected Object for type Struct")},n=>n)},UFix64:Au,UInt:iu,UInt128:yu,UInt16:du,UInt256:bu,UInt32:pu,UInt64:mu,UInt8:cu,Void:Pu,Word16:_u,Word32:Iu,Word64:Su,Word8:wu,_Array:ts});function rs(e){return Xa(e)?e(fr,ns):[]}function os(e){return hr.apply(this,arguments)}function hr(){return hr=h(function*(e){let t,{url:n}=e;_(void 0!==n,"retrieve({ url }) -- url must be defined");try{t=yield Ao(n)}catch{throw new Error("httpDocumentResolver Error: Failed to retrieve document.")}return t.ok?yield t.json():null}),hr.apply(this,arguments)}const as=new Map([["http",os],["https",os]]);function At(e){if(null==e)return null;if("1.0.0"===e.f_version)return e;throw new Error("normalizeInteractionTemplate Error: Invalid InteractionTemplate")}function ss(e){let{network:t,template:n}=e;if(O(null!=t,"deriveCadenceByNetwork({ network }) -- network must be defined"),O("string"==typeof t,"deriveCadenceByNetwork({ network }) -- network must be a string"),O(null!=n,"generateDependencyPin({ template }) -- template must be defined"),O("object"==typeof n,"generateDependencyPin({ template }) -- template must be an object"),O("InteractionTemplate"===n.f_type,"generateDependencyPin({ template }) -- template must be an InteractionTemplate"),n=At(n),"1.0.0"===n.f_version)return Object.keys(n?.data?.dependencies).map(r=>{let s=Object.values(n?.data?.dependencies?.[r]);O(s,`deriveCadenceByNetwork -- Could not find contracts for dependency placeholder: ${r}`),O(0===s.length,`deriveCadenceByNetwork -- Could not find contracts for dependency placeholder: ${r}`);let a=s[0]?.[t];return O(a,`deriveCadenceByNetwork -- Could not find ${t} network information for dependency: ${r}`),[r,a.address]}).reduce((r,s)=>{let[i,a]=s;const l=new RegExp("(\\b"+i+"\\b)","g");return r.replace(l,a)},n.data.cadence);throw new Error("deriveCadenceByNetwork Error: Unsupported template version")}let it={},is=!1;function De(){return yr.apply(this,arguments)}function yr(){return yr=h(function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=yield P.get("flow.network"),n=yield P.get("env");n&&!is&&(z.deprecate({pkg:"FCL",subject:'Using the "env" configuration key for specifying the flow network',message:"Configuring to specify flow network is no longer required",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key"}),is=!0);const r=e.node||(yield P.get("accessNode.api"));if(!r){if(t)return t;if(n)return n;throw new Error('Either the "accessNode.api" config key or opts.node must be set')}if(it[r])try{return yield it[r]}catch{}it[r]||(it[r]=h(function*(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(yield de([Ha()],s).then(ze)).chainId})(e).catch(s=>{throw it[r]=null,s}));try{return yield it[r]}catch(s){if(t)return t;if(n)return n;throw new Error(`Error getting chainId from access node - are you using the correct access node endpoint.  If running locally, is your emulator up-to-date? ${s.message}`)}}),yr.apply(this,arguments)}function Nu(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)||function Bu(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)||typeof navigator<"u"&&/iPad/.test(navigator.userAgent)}()}function us(e){return vr.apply(this,arguments)}function vr(){return vr=h(function*(e){var r;st(e?.template)&&(e.template=yield(r=h(function*(s){let{url:i}=s;_(void 0!==i,"retrieve({ url }) -- url must be defined"),_("string"==typeof i,"retrieve({ url }) -- url must be a string");const a=yield P().where(/^document\.resolver\./);Object.keys(a).map(p=>{const y=a[p],b=p.replace(/^document\.resolver\./,"");as.set(b,y)});const l=/^(.*):\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/.exec(i);_(l,"Failed to parse URL");const d=l[1];_(l,"Failed to parse URL protocol");const f=as.get(d);return _(f,`No resolver found for protcol=${d}`),yield f({url:i})}),function(s){return r.apply(this,arguments)})({url:e?.template}));let t={};e?.template&&(e.template=At(e?.template),t=yield h(function*(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=r.template,i=yield De(r),a={};if("1.0.0"===s.f_version){const l=Object.keys(s?.data?.dependencies);for(let d of l){let f=s?.data?.dependencies[d];const p=Object.keys(f);_(p.length>0,`FCL configureDependencies Error: No contracts found in template for placeholder=${d}`);const y=f[p[0]][i];_(y,`FCL configureDependencies Error: No dependency information for placeholder=${d} contract=${p[0]} network=${i}`),_(y?.address,`FCL configureDependencies Error: No address information for placeholder=${d} contract=${p[0]} network=${i}`),a[d]=K(y?.address)}return a}throw new Error("FCL configureDependencies Error: Unsupported template version")})({template:e.template}));const n=e.cadence||ss({template:e.template,network:yield De(e)});return e.cadence=n,e.dependencies=t,e}),vr.apply(this,arguments)}function cs(e,t){return br.apply(this,arguments)}function br(){return br=h(function*(e,t){_(Te(t),`${e}(opts) -- opts is required`),_(ou(t),`${e}(opts) -- opts must be an object`),_(!(t.cadence&&t.template),`${e}({ template, cadence }) -- cannot pass both cadence and template`),_(Te(t.cadence||t?.template),`${e}({ cadence }) -- cadence is required`),_(st(t.cadence)||t?.template,`${e}({ cadence }) -- cadence must be a string`),_(yield P().get("accessNode.api"),`${e}(opts) -- Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration`)}),br.apply(this,arguments)}function Jt(){return Er.apply(this,arguments)}function Er(){return Er=h(function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return yield(t=h(function*(n){return cs("query",n)}),function(n){return t.apply(this,arguments)})(e),e=yield us(e),P().overload(e.dependencies||{},h(function*(){return de([Va(e.cadence),dr(rs(e.args||[])),e.limit&&"number"==typeof e.limit&&lr(e.limit)]).then(ze)}));var t}),Er.apply(this,arguments)}const fe={"HTTP/RPC":"HTTP/RPC","HTTP/POST":"HTTP/POST","IFRAME/RPC":"IFRAME/RPC","POP/RPC":"POP/RPC","TAB/RPC":"TAB/RPC","EXT/RPC":"EXT/RPC","DEEPLINK/RPC":"DEEPLINK/RPC"},ls=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};const n=r=>{const{data:s}=r;var i;"object"==typeof s&&null!=typeof s&&s.type===e&&t(((i=s).deprecated&&console.warn("DEPRECATION NOTICE",i.deprecated.message),delete i?.body?.interaction,i))};return window.addEventListener("message",n),()=>window.removeEventListener("message",n)},Uu=globalThis.URL;class Xt extends Uu{constructor(t,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];super(t,n,...s)}}const ut=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={...t,type:e},r=new URLSearchParams(window.location.search).get("fcl_redirect_url");if(r){const s=new Xt(r);s.searchParams.append("fclResponseJson",JSON.stringify(n)),window.location.href=s.href}else if(window.location!==window.parent.location)window.parent.postMessage({...t,type:e},"*");else{if(!window.opener)throw new Error("Unable to communicate with parent FCL instance");window.opener.postMessage({...t,type:e},"*")}},ct={f_type:"Service",f_vsn:"1.0.0"},ds={f_type:"Identity",f_vsn:"1.0.0"},Du={f_type:"USER",f_vsn:"1.0.0"},Lu={f_type:"PollingResponse",f_vsn:"1.0.0"},wr={f_type:"CompositeSignature",f_vsn:"1.0.0"},fs=e=>j.Buffer.from(e.padStart(16,"0"),"hex"),ps=e=>j.Buffer.from(e,"hex"),gs=function(e){let{address:t,nonce:n,appIdentifier:r}=e,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_(t,"Encode Message For Provable Authn Error: address must be defined"),_(n,"Encode Message For Provable Authn Error: nonce must be defined"),_(r,"Encode Message For Provable Authn Error: appIdentifier must be defined"),_(n.length>=64,"Encode Message For Provable Authn Error: nonce must be minimum of 32 bytes");const i=(a=j.Buffer.from("FCL-ACCOUNT-PROOF-V0.0").toString("hex"),j.Buffer.from(a.padEnd(64,"0"),"hex"));var a;return s?j.Buffer.concat([i,Ge([r,fs($(t)),ps(n)])]).toString("hex"):Ge([r,fs($(t)),ps(n)]).toString("hex")};var Fu=Object.freeze({__proto__:null,sendMsgToFCL:ut,ready:function(e){ls("FCL:VIEW:READY:RESPONSE",e),ut("FCL:VIEW:READY")},close:()=>{ut("FCL:VIEW:CLOSE")},approve:e=>{ut("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"APPROVED",reason:null,data:e})},decline:e=>{ut("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"DECLINED",reason:e,data:null})},redirect:e=>{ut("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"REDIRECT",reason:null,data:e})},onMessageFromFCL:ls,encodeMessageFromSignable:(e,t)=>{let n=(l=>{let d=new Set(l.authorizers);return d.add(l.proposalKey.address),d.delete(l.payer),Array.from(d).map(K)})(e.voucher),r=Array.from(new Set([e.voucher.payer])).map(K);const s=n.includes(K(t)),i=r.includes(K(t));if(!s&&!i)throw new eu(t);const a={cadence:e.voucher.cadence,refBlock:e.voucher.refBlock,computeLimit:e.voucher.computeLimit,arguments:e.voucher.arguments,proposalKey:{...e.voucher.proposalKey,address:$(e.voucher.proposalKey.address)},payer:$(e.voucher.payer),authorizers:e.voucher.authorizers.map($),payloadSigs:e.voucher.payloadSigs.map(l=>({...l,address:$(l.address)}))};return s?va(a):ba(a)},CompositeSignature:function(e,t,n){this.f_type=wr.f_type,this.f_vsn=wr.f_vsn,this.addr=K(e),this.keyId=Number(t),this.signature=n},encodeAccountProof:gs,injectExtService:function(e){"authn"===e.type&&null!=e.endpoint?(Array.isArray(window.fcl_extensions)||(window.fcl_extensions=[]),window.fcl_extensions.push(e)):console.warn("Authn service is required")}});const ms=e=>{if(e.appIdentifier){const{appIdentifier:t,address:n,nonce:r,signatures:s}=e;return _(st(t),"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string"),_(st(n)&&16===$(n).length,"verifyAccountProof({ address }) -- address must be a valid address"),_(/^[0-9a-f]+$/i.test(r),"nonce must be a hex string"),_(Array.isArray(s)&&s.every((i,a,l)=>"CompositeSignature"===i.f_type),"Must include an Array of CompositeSignatures to verify"),_(s.map(i=>i.addr).every((i,a,l)=>i===l[0]),"User signatures to be verified must be from a single account address"),!0}{const{message:t,address:n,compSigs:r}=e;return _(/^[0-9a-f]+$/i.test(t),"Signed message must be a hex string"),_(st(n)&&16===$(n).length,"verifyUserSignatures({ address }) -- address must be a valid address"),_(Array.isArray(r)&&r.every((s,i,a)=>"CompositeSignature"===s.f_type),"Must include an Array of CompositeSignatures to verify"),_(r.map(s=>s.addr).every((s,i,a)=>s===a[0]),"User signatures to be verified must be from a single account address"),!0}},hs=function(){var e=h(function*(t,n){const r="ACCOUNT_PROOF"===t?"verifyAccountProofSignatures":"verifyUserSignatures";let s,i=yield De(n);return _(n.fclCryptoContract||"testnet"===i||"mainnet"===i,"${verifyFunction}({ fclCryptoContract }) -- fclCrypto contract address must be set for non-mainnet/testnet networks"),s=n.fclCryptoContract?n.fclCryptoContract:"testnet"===i?"0x74daa6f9c7ef24b1":"0xb4b82a1c9d21d284",`\n      import FCLCrypto from ${s}\n\n      pub fun main(\n          address: Address, \n          message: String, \n          keyIndices: [Int], \n          signatures: [String]\n      ): Bool {\n        return FCLCrypto.${r}(address: address, message: message, keyIndices: keyIndices, signatures: signatures)\n      }\n    `});return function(n,r){return e.apply(this,arguments)}}();function ys(e,t){return _r.apply(this,arguments)}function _r(){return _r=h(function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=K(t[0].addr);ms({message:e,address:r,compSigs:t});let s=[],i=[];for(const a of t)s.push(a.signature),i.push(a.keyId.toString());return Jt({cadence:yield hs("USER_SIGNATURE",n),args:(a,l)=>[a(r,l.Address),a(e,l.String),a(i,l.Array(l.Int)),a(s,l.Array(l.String))]})}),_r.apply(this,arguments)}var ju=Object.freeze({__proto__:null,verifyAccountProof:function(){var e=h(function*(t,n){let{address:r,nonce:s,signatures:i}=n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ms({appIdentifier:t,address:r,nonce:s,signatures:i});const l=gs({address:r,nonce:s,appIdentifier:t},!1);let d=[],f=[];for(const p of i)d.push(p.signature),f.push(p.keyId.toString());return Jt({cadence:yield hs("ACCOUNT_PROOF",a),args:(p,y)=>[p(K(r),y.Address),p(l,y.String),p(f,y.Array(y.Int)),p(d,y.Array(y.String))]})});return function(n,r){return e.apply(this,arguments)}}(),verifyUserSignatures:ys});const $u=z.deprecate({pkg:"FCL",subject:"fcl.verifyUserSignatures()",message:"Please use fcl.AppUtils.verifyUserSignatures()",callback:function(e,t){return ys(e,t)}});function vs(e){return Ir.apply(this,arguments)}function Ir(){return Ir=h(function*(e){return Object.fromEntries(Object.entries(yield P().where(e)).map(t=>{let[n,r]=t;return[n.replace(e,""),r]}))}),Ir.apply(this,arguments)}const Sr="POLL",Ar=e=>e.status>=4,bs=e=>e.status>=3,Es=e=>e.status>=2,Mu={[yt]:function(){var e=h(function*(t){t.sendSelf(Sr)});return function(t){return e.apply(this,arguments)}}(),[Me]:(e,t)=>{e.subscribe(t.from),e.send(t.from,cn,e.all())},[Oe]:(e,t)=>{e.unsubscribe(t.from)},[Qr]:function(){var e=h(function*(t,n){n.reply(t.all())});return function(t,n){return e.apply(this,arguments)}}(),[Sr]:function(){var e=h(function*(t){let n;try{n=yield(i=h(function*(a){return de([za(a)]).then(ze)}),function(a){return i.apply(this,arguments)})(t.self())}catch(i){return t.fatalError(i)}var i,r,s;Ar(n)||setTimeout(()=>t.sendSelf(Sr),2500),r=t.all(),s=n,JSON.stringify(r)!==JSON.stringify(s)&&t.broadcast(cn,n),t.merge(n)});return function(t){return e.apply(this,arguments)}}()},ws=e=>{if("object"==typeof e&&(e=e.transactionId),null==e)throw new Error("transactionId required");return e},_s=e=>Be(Mu,ws(e));function Ke(e){function t(r){return Bt(ws(e),_s,r)}function n(r){return function(){const s=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).suppress||!1;return new Promise((i,a)=>{const l=t((d,f)=>{!f&&!d.statusCode||s?r(d)&&(i(d),l()):(a(f||d.errorMessage),l())})})}}return{snapshot:function(){return to(e,_s)},subscribe:t,onceFinalized:n(Es),onceExecuted:n(bs),onceSealed:n(Ar)}}Ke.isUnknown=e=>e.status>=0,Ke.isPending=e=>e.status>=1,Ke.isFinalized=Es,Ke.isExecuted=bs,Ke.isSealed=Ar,Ke.isExpired=e=>5===e.status;const We="TICK",Zt="hwm",xr=function(){var e=h(function*(t){return setTimeout(()=>t.sendSelf(We),yield P().get("fcl.eventPollRate",1e4))});return function(n){return e.apply(this,arguments)}}(),Gu={[We]:function(){var e=h(function*(t){if(!t.hasSubs())return;let n=t.get(Zt);if(null==n)t.put(Zt,yield It()),t.put(We,yield xr(t));else{let r=yield It();if(t.put(Zt,r),n.height<r.height){const s=yield de([Ga(t.self(),n.height+1,r.height)]).then(ze);for(let i of s)t.broadcast("UPDATED",i.data)}t.put(We,yield xr(t))}});return function(t){return e.apply(this,arguments)}}(),[Me]:function(){var e=h(function*(t,n){t.hasSubs()||t.put(We,yield xr(t)),t.subscribe(n.from)});return function(t,n){return e.apply(this,arguments)}}(),[Oe]:(e,t)=>{e.unsubscribe(t.from),e.hasSubs()||(clearTimeout(e.get(We)),e.delete(We),e.delete(Zt))}},zu=e=>Be(Gu,e),lt=()=>{throw new Error("Platform specific Core Strategies are not initialized")},Hu={[fe["EXT/RPC"]]:lt,[fe["HTTP/POST"]]:lt,[fe["IFRAME/RPC"]]:lt,[fe["POP/RPC"]]:lt,[fe["TAB/RPC"]]:lt,[fe["EXT/RPC"]]:lt},qu=["ServicePlugin"],Ku=["discovery-service"],Wu=e=>{let{coreStrategies:t}=e,n=new Set,r=new Map(Object.entries(t));return Object.freeze({add:i=>{if(_(Ku.includes(i.type),`Service Plugin type ${i.type} is not supported`),"discovery-service"===i.type){const{discoveryServices:a,serviceStrategy:l}=(d=>{const{services:f,serviceStrategy:p}=d;_(Array.isArray(f)&&f.length,"Array of Discovery Services is required");for(const y of f)_(Te(y.f_type)&&"Service"===y.f_type,"Service is required"),_(Te(y.type)&&"authn"===y.type,`Service must be type authn. Received ${y.type}`),_(y.method in fe||p.method===y.method,`Service method ${y.method} is not supported`);return _(Te(p),"Service strategy is required"),_(Te(p.method)&&st(p.method),"Service strategy method is required"),_(Te(p.exec)&&Xa(p.exec),"Service strategy exec function is required"),{discoveryServices:f,serviceStrategy:p}})(i);(i=>{n=new Set([...i])})(a),r.has(l.method)?z({title:"Add Service Plugin",message:`Service strategy for ${l.method} already exists`,level:Z.warn}):r.set(l.method,l.exec)}},getServices:()=>[...n],getStrategy:i=>r.get(i),getStrategies:()=>[...r.keys()]})};let xt;const Is=()=>void 0!==xt,Ss=e=>{let{coreStrategies:t}=e;if(Is())return xt;const n=Wu({coreStrategies:t});return xt=n,n},Qt=()=>Is()?xt:(console.warn("Registry is not initalized, it will be initialized with stub core strategies"),Ss({coreStrategies:Hu})),Vu=(()=>{const e=new Map;return Object.freeze({add:t=>{const n=(r=>{let s;_(r,"No plugins supplied"),s=Array.isArray(r)?[...r]:[r];for(const i of s)_(Te(i.name),"Plugin name is required"),_(Te(i.f_type),"Plugin f_type is required"),_(qu.includes(i.f_type),`Plugin type ${i.f_type} is not supported`);return s})(t);for(const r of n)e.set(r.name,r),"ServicePlugin"===r.f_type&&xt.add(r)},getPlugins:()=>e})})(),As=function(){var e=h(function*(){return[...window?.fcl_extensions||[],...Qt().getServices()]});return function(){return e.apply(this,arguments)}}(),kt="authn",xs="UPDATED",ks="UPDATE_RESULTS",kr=function(){var e=h(function*(){try{const t=yield(n=h(function*(r){let{types:s}=r;const i=yield P.get("discovery.authn.endpoint");_(Boolean(i),'"discovery.authn.endpoint" in config must be defined.');const a=yield P.get("discovery.authn.include",[]),l=new Xt(i);return fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:s,fclVersion:ce,include:a,clientServices:yield As(),supportedStrategies:Qt().getStrategies(),userAgent:window?.navigator?.userAgent,network:yield De()})}).then(d=>d.json())}),function(r){return n.apply(this,arguments)})({types:[kt]});ae(kt,ks,{results:t})}catch(t){z({title:`${t.name} Error fetching Discovery API services.`,message:t.message,level:Z.error})}var n});return function(){return e.apply(this,arguments)}}(),Yu={[yt]:function(){var e=h(function*(t){typeof window>"u"&&console.warn('\n      %cFCL Warning\n      ============================\n      "fcl.discovery" is only available in the browser.\n      For more info, please see the docs: https://docs.onflow.org/fcl/\n      ============================\n      ',"font-weight:bold;font-family:monospace;"),"complete"===document.readyState?kr():window.onload=h(function*(){kr()})});return function(t){return e.apply(this,arguments)}}(),[ks]:(e,t,n)=>{e.merge(n),e.broadcast(xs,{...e.all()})},[Me]:(e,t)=>{e.subscribe(t.from),e.send(t.from,xs,{...e.all()})},[Oe]:(e,t)=>e.unsubscribe(t.from),SNAPSHOT:function(){var e=h(function*(t,n){return n.reply({...t.all()})});return function(n,r){return e.apply(this,arguments)}}()},Rs=()=>Be(Yu,kt),Ju={authn:{subscribe:e=>Bt(kt,Rs,e),snapshot:()=>to(kt,Rs),update:()=>kr()}};function L(e){return Rr.apply(this,arguments)}function Rr(){return Rr=h(function*(e){const t=new Rn.SHA3(256);return t.update(j.Buffer.from(e,"utf8")),t.digest("hex")}),Rr.apply(this,arguments)}function Ts(e){return Tr.apply(this,arguments)}function Tr(){return Tr=h(function*(e){let{template:t}=e;if(O(null!=t,"generateTemplateId({ template }) -- template must be defined"),O("object"==typeof t,"generateTemplateId({ template }) -- template must be an object"),O("InteractionTemplate"==typeof t.f_type,"generateTemplateId({ template }) -- template object must be an InteractionTemplate"),t=At(t),"1.0.0"===t.f_version){const n=t.data,r=yield Promise.all(Object.keys(n.messages).map(function(){var l=h(function*(d){return[yield L(d),yield Promise.all(Object.keys(n.messages?.[d]?.i18n).map(function(){var f=h(function*(p){return[yield L(p),yield L(n.messages?.[d]?.i18n?.[p])]});return function(p){return f.apply(this,arguments)}}()))]});return function(d){return l.apply(this,arguments)}}())),s=yield Promise.all(Object.keys(n?.dependencies).map(function(){var l=h(function*(d){return[yield L(d),yield Promise.all(Object.keys(n?.dependencies?.[d]).map(function(){var f=h(function*(p){return[yield L(p),yield Promise.all(Object.keys(n?.dependencies?.[d]?.[p]).map(function(){var y=h(function*(b){return[yield L(b),[yield L(n?.dependencies?.[d]?.[p]?.[b].address),yield L(n?.dependencies?.[d]?.[p]?.[b].contract),yield L(n?.dependencies?.[d]?.[p]?.[b].fq_address),yield L(n?.dependencies?.[d]?.[p]?.[b].pin),yield L(String(n?.dependencies?.[d]?.[p]?.[b].pin_block_height))]]});return function(b){return y.apply(this,arguments)}}()))]});return function(p){return f.apply(this,arguments)}}()))]});return function(d){return l.apply(this,arguments)}}())),i=yield Promise.all(Object.keys(n?.arguments).map(function(){var l=h(function*(d){return[yield L(d),[yield L(String(n?.arguments?.[d].index)),yield L(n?.arguments?.[d].type),yield L(n?.arguments?.[d].balance||""),yield Promise.all(Object.keys(n?.arguments?.[d].messages).map(function(){var f=h(function*(p){return[yield L(p),yield Promise.all(Object.keys(n?.arguments?.[d].messages?.[p].i18n).map(function(){var y=h(function*(b){return[yield L(b),yield L(n?.arguments?.[d].messages?.[p].i18n?.[b])]});return function(b){return y.apply(this,arguments)}}()))]});return function(p){return f.apply(this,arguments)}}()))]]});return function(d){return l.apply(this,arguments)}}())),a=Ge([yield L("InteractionTemplate"),yield L("1.0.0"),yield L(n?.type),yield L(n?.interface),r,yield L(n?.cadence),s,i]).toString("hex");return L(a)}throw new Error("generateTemplateId Error: Unsupported template version")}),Tr.apply(this,arguments)}function Ps(e){let{contractName:t,address:n}=e;return{contractName:t,address:n,contract:""}}function Xu(e){let t=[],n=e.match(/import ((\w|,| )+)* from 0x\w+/g)||[];for(const r of n){const s=/import ((\w+|, |)*) from (0x\w+)/g.exec(r),a=s[1].match(/((?:\w+)+),?/g)||[];for(const l of a)t.push(Ps({address:s[3],contractName:l.replace(/,/g,"")}))}return t}function Pr(e){return Cr.apply(this,arguments)}function Cr(){return Cr=h(function*(e){let{address:t,contractName:n,blockHeight:r}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O(null!=t,"generateDependencyPin({ address }) -- address must be defined"),O(null!=n,"generateDependencyPin({ contractName }) -- contractName must be defined"),O(null!=r,"generateDependencyPin({ blockHeight }) -- blockHeight must be defined"),O("string"==typeof t,"generateDependencyPin({ address }) -- address must be a string"),O("string"==typeof n,"generateDependencyPin({ contractName }) -- contractName must be a string"),O("number"==typeof r,"generateDependencyPin({ blockHeight }) -- blockHeight must be a number");let i=[Ps({contractName:n,address:t})];for(const l of i){let d=yield de([nt(yield P().get(l.address,l.address)),Vt(r)],s).then(ze);if(l.contract=d.contracts?.[l.contractName],!l.contract)throw console.error("Did not find expected contract",l,d),new Error("Did not find expected contract");let f=Xu(l.contract);i.push(...f)}let a=i.map(l=>L(l.contract));return L(a.join(""))}),Cr.apply(this,arguments)}function Cs(e){return Or.apply(this,arguments)}function Or(){return Or=h(function*(e){let{template:t,blockHeight:n,network:r}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(O(null!=t,"generateDependencyPin({ template }) -- template must be defined"),O("object"==typeof t,"generateDependencyPin({ template }) -- template must be an object"),O("InteractionTemplate"===t.f_type,"generateDependencyPin({ template }) -- template must be an InteractionTemplate"),t=At(t),O(null!=r,"generateDependencyPin({ network }) network must be defined"),O(null!=n,"generateDependencyPin({ blockHeight }) blockHeight must be defined"),O("number"==typeof n,"generateDependencyPin({ blockHeight }) blockHeight must be a number"),"1.0.0"===t.f_version){let i=Object.keys(t.data.dependencies);for(let a of i){let d=Object.keys(t.data.dependencies[a]);for(let f of d){let p=t.data.dependencies[a][f][r];if(void 0===p)continue;let y=yield Pr({address:p.address,contractName:p.contract,blockHeight:n},s);if(y!==p.pin)return z({title:"verifyDependencyPinsSame Debug Error",message:`Could not recompute and match dependency pin.\n                                address: ${p.address} | contract: ${p.contract}\n                                computed: ${y}\n                                template: ${p.pin}\n                            `,level:Z.debug}),!1}}return!0}throw new Error("verifyDependencyPinsSame Error: Unsupported template version")}),Or.apply(this,arguments)}var Zu=Object.freeze({__proto__:null,getInteractionTemplateAudits:function(){var e=h(function*(t){let{template:n,auditors:r}=t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O(null!=n,"getInteractionTemplateAudits({ template }) -- template must be defined"),n=At(n),O("InteractionTemplate"===n.f_type,"getInteractionTemplateAudits({ template }) -- template must be an InteractionTemplate");let i=yield Ts({template:n});if(i!==n.id)throw z({title:"getInteractionTemplateAudits Debug Error",message:`Could not recompute and match template ID\n                computed: ${i}\n                template: ${n.id}\n            `,level:Z.debug}),new Error("getInteractionTemplateAudits Error: Could not recompute and match template ID");if("1.0.0"===n.f_version){const a=r||(yield P().get("flow.auditors"));O(a,"getInteractionTemplateAudits Error: Required configuration for 'fcl.auditors' is not set"),O(Array.isArray(a),"getInteractionTemplateAudits Error: Required configuration for 'fcl.auditors' is not an array");let l=s.flowInteractionAuditContract;if(!l){const f=yield De(s);O("mainnet"===f||"testnet"===f,"getInteractionTemplateAudits Error: Unable to determine address for FlowInteractionTemplateAudit contract. Set configuration for 'fcl.network' to 'mainnet' or 'testnet'"),l="mainnet"===f?"0xfd100e39d50a13e6":"0xf78bfc12d0a786dc"}return yield Jt({cadence:`\n        import FlowInteractionTemplateAudit from ${l}\n        pub fun main(templateId: String, auditors: [Address]): {Address:Bool} {\n          return FlowInteractionTemplateAudit.getHasTemplateBeenAuditedByAuditors(templateId: templateId, auditors: auditors)\n        }\n        `,args:(f,p)=>[f(i,p.String),f(a,p.Array(p.Address))]})}throw new Error("getInteractionTemplateAudits Error: Unsupported template version")});return function(n){return e.apply(this,arguments)}}(),generateDependencyPin:Pr,generateDependencyPinAtLatestSealedBlock:function(){var e=h(function*(t){let{address:n,contractName:r}=t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(yield It({sealed:!0},s))?.height;return Pr({address:n,contractName:r,blockHeight:a},s)});return function(n){return e.apply(this,arguments)}}(),generateTemplateId:Ts,generateTemplateInterfaceId:function(){var e=h(function*(t){let{templateInterface:n}=t;if(O(null!=n,"generateTemplateInterfaceId({ templateInterface }) -- templateInterface must be defined"),O("object"==typeof n,"generateTemplateInterfaceId({ templateInterface }) -- templateInterface must be an object"),O("InteractionTemplateInterface"==typeof n.f_type,"generateTemplateInterfaceId({ templateInterface }) -- templateInterface object must be an InteractionTemplate"),n=function(r){if(null==r)return null;if("1.0.0"===r.f_version)return r;throw new Error("normalizeInteractionTemplateInterface Error: Invalid InteractionTemplateInterface")}(n),"1.0.0"===n.f_version){const r=n.data,s=Ge([yield L("InteractionTemplateInterface"),yield L("1.0.0"),yield L(r.flip),yield Promise.all(Object.keys(r.arguments).map(function(){var i=h(function*(a){return[yield L(a),yield L(String(r.arguments[a].index)),yield L(r.arguments[a].type)]});return function(a){return i.apply(this,arguments)}}()))]).toString("hex");return L(s)}throw new Error("generateTemplateInterfaceId Error: Unsupported templateInterface version")});return function(n){return e.apply(this,arguments)}}(),verifyDependencyPinsSame:Cs,verifyDependencyPinsSameAtLatestSealedBlock:function(){var e=h(function*(t){let{template:n,network:r}=t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(yield It({sealed:!0}))?.height;return Cs({template:n,network:r,blockHeight:a},s)});return function(n){return e.apply(this,arguments)}}(),deriveCadenceByNetwork:ss,getTemplateMessage:function(e){let{localization:t="en-US",messageKey:n,template:r}=e;return O(n,"getTemplateMessage({ messageKey }) -- messageKey must be defined"),O("string"==typeof n,"getTemplateMessage({ messageKey }) -- messageKey must be a string"),O(t,"getTemplateMessage({ localization }) -- localization must be defined"),O("string"==typeof t,"getTemplateMessage({ localization }) -- localization must be a string"),O(null!=r,"getTemplateMessage({ template }) -- template must be defined"),O("object"==typeof r,"getTemplateMessage({ template }) -- template must be an object"),O("InteractionTemplate"==typeof r.f_type,"getTemplateMessage({ template }) -- template object must be an InteractionTemplate"),r?.data?.messages?.[n]?.i18n?.[t]},getTemplateArgumentMessage:function(e){let{localization:t="en-US",argumentLabel:n,messageKey:r,template:s}=e;return O(r,"getTemplateArgumentMessage({ messageKey }) -- messageKey must be defined"),O("string"==typeof r,"getTemplateArgumentMessage({ messageKey }) -- messageKey must be a string"),O(n,"getTemplateArgumentMessage({ argumentLabel }) -- argumentLabel must be defined"),O("string"==typeof r,"getTemplateArgumentMessage({ argumentLabel }) -- argumentLabel must be a string"),O(t,"getTemplateArgumentMessage({ localization }) -- localization must be defined"),O("string"==typeof t,"getTemplateArgumentMessage({ localization }) -- localization must be a string"),O(null!=s,"getTemplateArgumentMessage({ template }) -- template must be defined"),O("object"==typeof s,"getTemplateArgumentMessage({ template }) -- template must be an object"),O("InteractionTemplate"==typeof s.f_type,"getTemplateArgumentMessage({ template }) -- template object must be an InteractionTemplate"),s?.data?.arguments?.[n]?.messages?.[r]?.i18n?.[t]}});const Qu=ns;function Os(e){return null==e?null:"1.0.0"===e.f_vsn?e:{old:e,...ct,type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}}}function Bs(e){return null==e?null:"1.0.0"===e.f_vsn?e:{...ct,type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}}}function Ns(e){return null==e?null:(null==e.method&&(e={...e,type:"local-view",method:"VIEW/IFRAME"}),"1.0.0"===e.f_vsn?e:{...ct,type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}})}P.subscribe(()=>{De({enableRequestLogging:!1}).catch(()=>{})});const ec={"back-channel-rpc":Bs,"pre-authz":function(e){return null==e?null:"1.0.0"===e.f_vsn?e:{...ct,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...ds,address:K(e.addr),keyId:e.keyId},params:e.params,data:e.data}},authz:function(e){return null==e?null:"1.0.0"===e.f_vsn?e:{...ct,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...ds,address:K(e.addr),keyId:e.keyId},params:e.params,data:e.data}},authn:function(e){return null==e?null:"1.0.0"===e.f_vsn?e:{...ct,type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:K(e.addr),name:e.name,icon:e.icon}}},frame:Os,"open-id":function(e){return null==e?null:"1.0.0"===e.f_vsn?e:null},"user-signature":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("Invalid user-signature service")},"local-view":Ns,"account-proof":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("FCL Normalizer Error: Invalid account-proof service")},"authn-refresh":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("Invalid authn-refresh service")}};function tc(e){return Ge([e.provider.address||e.provider.name||"UNSPECIFIED",e.id]).toString("hex")}function Us(e){return Br.apply(this,arguments)}function Br(){return Br=h(function*(e){var r,t=function(){return[...arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]]}((r=e,r.addr=r.addr?K(r.addr):null,r.paddr=r.paddr?K(r.paddr):null,e=r).services||[],yield function(){var r=h(function*(s,i){if(null==s||null==i)return[];const a=new Xt(s);a.searchParams.append("code",i);const l=yield fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}}).then(f=>f.json());if(Array.isArray(l))return l;const d=[];if(Array.isArray(l.authorizations))for(let f of l.authorizations)d.push({type:"authz",keyId:l.keyId,...f});return null!=l.provider&&d.push({type:"authn",id:"wallet-provider#authn",...l.provider}),d});return function(s,i){return r.apply(this,arguments)}}()(e.hks,e.code)).map(r=>function(s,i){try{return ec[s.type](s,i)}catch(a){return console.error(`Unrecognized FCL Service Type [${s.type}]`,s,a),s}}(r,e));const n=t.find(i=>"authn"===i.type);return{...Du,addr:K(e.addr),cid:tc(n),loggedIn:!0,services:t,expiresAt:e.expires}}),Br.apply(this,arguments)}function en(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(t=>t.type===e)}function Ve(e){return Nr.apply(this,arguments)}function Nr(){return Nr=h(function*(e){let{service:t,msg:n={},config:r={},opts:s={},platform:i}=e;n.data=t.data;const a={services:yield vs(/^service\./),app:yield vs(/^app\.detail\./),client:{...r.client,platform:i,fclVersion:ce,fclLibrary:"https://github.com/onflow/fcl-js",hostname:window?.location?.hostname??null,network:yield De(s)}};try{const l=yield(d=h(function*(f){let{service:p,body:y,config:b,opts:w}=f;return Qt().getStrategy(p.method)({service:p,body:y,config:b,opts:w})}),function(f){return d.apply(this,arguments)})({service:t,body:n,config:a,opts:s});return"REDIRECT"===l.status?(_(t.type===l.data.type,"Cannot shift recursive service type in execService"),yield Ve({service:l.data,msg:n,config:a,opts:s})):l}catch(l){throw z({title:`Error on execService ${t?.type}`,message:l,level:Z.error}),l}var d}),Nr.apply(this,arguments)}function Ur(e){return null==e?null:"1.0.0"===e.f_vsn?e:{...wr,addr:$(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId}}const Ee="CURRENT_USER",Dr="CURRENT_USER/UPDATED",Ds="SNAPSHOT",Lr="SET_CURRENT_USER",Ls="DEL_CURRENT_USER",Fr='{\n  "f_type": "User",\n  "f_vsn": "1.0.0",\n  "addr":null,\n  "cid":null,\n  "loggedIn":null,\n  "expiresAt":null,\n  "services":[]\n}',nc={[yt]:function(){var e=h(function*(t){typeof window>"u"&&console.warn('\n        %cFCL Warning\n        ============================\n        "currentUser" is only available in the browser.\n        For more info, please see the docs: https://docs.onflow.org/fcl/\n        ============================\n        ',"font-weight:bold;font-family:monospace;"),t.merge(JSON.parse(Fr));const n=yield P.first(["fcl.storage","fcl.storage.default"]);if(n.can){const r=yield(s=h(function*(i){const a=JSON.parse(Fr),l=yield i.get(Ee);return null!=l&&a.f_vsn!==l.f_vsn?(i.removeItem(Ee),a):l||a}),function(i){return s.apply(this,arguments)})(n);(function(s){return null==s.expiresAt||0===s.expiresAt||s.expiresAt>Date.now()})(r)&&t.merge(r)}var s});return function(t){return e.apply(this,arguments)}}(),[Me]:(e,t)=>{e.subscribe(t.from),e.send(t.from,Dr,{...e.all()})},[Oe]:(e,t)=>{e.unsubscribe(t.from)},[Ds]:function(){var e=h(function*(t,n){n.reply({...t.all()})});return function(t,n){return e.apply(this,arguments)}}(),[Lr]:function(){var e=h(function*(t,n,r){t.merge(r);const s=yield P.first(["fcl.storage","fcl.storage.default"]);s.can&&s.put(Ee,t.all()),t.broadcast(Dr,{...t.all()})});return function(t,n,r){return e.apply(this,arguments)}}(),[Ls]:function(){var e=h(function*(t,n){t.merge(JSON.parse(Fr));const r=yield P.first(["fcl.storage","fcl.storage.default"]);r.can&&r.put(Ee,t.all()),t.broadcast(Dr,{...t.all()})});return function(t,n){return e.apply(this,arguments)}}()},dt=()=>Be(nc,Ee),rc=function(){var e=h(function*(t){let{discoveryAuthnInclude:n}=t;return{client:{discoveryAuthnInclude:n,clientServices:yield As(),supportedStrategies:Qt().getStrategies()}}});return function(n){return e.apply(this,arguments)}}(),Rt=e=>{let{platform:t}=e;return h(function*(){let{service:n,redir:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!n||n?.provider?.is_installed||!n?.provider?.requires_install)return new Promise(function(){var s=h(function*(i,a){dt();const l={redir:r},d=yield Tt(),f=yield(b=h(function*(w){const x=yield P.get("discovery.authn.include",[]),S=yield P.first(["discovery.wallet.method","discovery.wallet.method.default"]),T=w?.method?w.method:S,R=w?.endpoint??(yield P.first(["discovery.wallet","challenge.handshake"]));return _(R,'\n    If no service is passed to "authenticate," then "discovery.wallet" must be defined in fcl config.\n    See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"\n    '),{...w,type:"authn",endpoint:R,method:T,discoveryAuthnInclude:x}}),function(w){return b.apply(this,arguments)})(n),p=en(d.services,"authn-refresh");var b;let y;if(d.loggedIn){if(!p)return i(d);try{const b=yield Ve({service:p,msg:y,opts:l,platform:t});ae(Ee,Lr,yield Us(b))}catch(b){z({title:`${b.name} Could not refresh wallet authentication.`,message:b.message,level:Z.error})}finally{return i(yield Tt())}}try{y=yield h(function*(){let b=yield P.get("fcl.accountProof.resolver");if(null==b)return;if("function"!=typeof b)return void z({title:"Account Proof Data Resolver must be a function",message:`Check fcl.accountProof.resolver configuration.\n                Expected: fcl.accountProof.resolver: async () => { ... }\n                Received: fcl.accountProof.resolver: ${typeof b}\n                `,level:Z.warn});const w=yield b();return null!=w?(_("string"==typeof w.appIdentifier,"appIdentifier must be a string"),_(/^[0-9a-f]+$/i.test(w.nonce),"Nonce must be a hex string"),w):void 0})()}catch(b){return z({title:`${b.name} On Authentication: Could not resolve account proof data.`,message:b.message,level:Z.error}),a(b)}try{const b=yield Ve({service:f,msg:y,config:yield rc(f),opts:l,platform:t});ae(Ee,Lr,yield Us(b))}catch(b){z({title:`${b} On Authentication`,message:b,level:Z.error})}finally{i(yield Tt())}});return function(i,a){return s.apply(this,arguments)}}());window.location.href=n?.provider?.install_link})};function Fs(){dt(),ae(Ee,Ls)}const js=e=>{let{platform:t}=e;return function(){var n=h(function*(r){return dt(),{...r,tempId:"CURRENT_USER",resolve:(s,i)=>h(function*(){const a=yield Rt({platform:t})({redir:!0}),l=en(a.services,"authz"),d=en(a.services,"pre-authz");if(d)return(f=>{let{platform:p}=f;return y=>{const b={f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:((x=y)||{}).proposer,payer:(x||{}).payer||[],authorization:(x||{}).authorization||[]},w=[];var x;null!=b.proposer&&w.push(["PROPOSER",b.proposer]);for(let x of b.payer||[])w.push(["PAYER",x]);for(let x of b.authorization||[])w.push(["AUTHORIZER",x]);return w.map(x=>{let[S,T]=x;return{tempId:[T.identity.address,T.identity.keyId].join("|"),addr:T.identity.address,keyId:T.identity.keyId,signingFunction:R=>Ve({service:T,msg:R,platform:p}),role:{proposer:"PROPOSER"===S,payer:"PAYER"===S,authorizer:"AUTHORIZER"===S}}})}})({platform:t})(yield Ve({service:d,msg:i,platform:t}));if(l){let f;return Nu()&&"WC/RPC"===l.method&&(f=window.open("","_blank")),{...s,tempId:"CURRENT_USER",resolve:null,addr:$(l.identity.address),keyId:l.identity.keyId,sequenceNum:null,signature:null,signingFunction:(p=h(function*(y){return Ur(yield Ve({service:l,msg:y,opts:{includeOlderJsonRpcCall:!0,windowRef:f},platform:t}))}),function(b){return p.apply(this,arguments)})}}var p;throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER")})()}});return function(r){return n.apply(this,arguments)}}()};function $s(e){dt();const t="@EXIT",n=Be(function(){var r=h(function*(s){for(s.send(Ee,Me);;){const i=yield s.receive();if(i.tag===t)return void s.send(Ee,Oe);e(i.data)}});return function(s){return r.apply(this,arguments)}}());return()=>ae(n,t)}function Tt(){return dt(),ae(Ee,Ds,null,{expectReply:!0,timeout:0})}const Ms=e=>{let{platform:t}=e;return h(function*(){const{addr:n}=yield Rt({platform:t})();return fr(K(n),es)})},oc=e=>(_(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}),Gs=e=>{let{platform:t}=e;return function(){var n=h(function*(r){dt();const s=en((yield Rt({platform:t})({redir:!0})).services,"user-signature");_(s,"Current user must have authorized a signing service.");try{const i=yield Ve({service:s,msg:oc(r),platform:t});return Array.isArray(i)?i.map(a=>Ur(a)):[Ur(i)]}catch(i){return i}});return function(r){return n.apply(this,arguments)}}()},zs=e=>{let{platform:t}=e,n=()=>({authenticate:Rt({platform:t}),unauthenticate:Fs,authorization:js({platform:t}),signUserMessage:Gs({platform:t}),subscribe:$s,snapshot:Tt,resolveArgument:Ms({platform:t})});return n.authenticate=Rt({platform:t}),n.unauthenticate=Fs,n.authorization=js({platform:t}),n.signUserMessage=Gs({platform:t}),n.subscribe=$s,n.snapshot=Tt,n.resolveArgument=Ms({platform:t}),n},tn="FCL_IFRAME";function Hs(e){_(!document.getElementById(tn),"Attempt at triggering multiple Frames",{src:e});const t=document.createElement("iframe");return t.src=e,t.id=tn,t.allow="usb *; hid *",t.frameBorder="0",t.style.cssText="\n  position:fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  height: 100%;\n  width: 100vw;\n  display:block;\n  background:rgba(0,0,0,0.25);\n  z-index: 2147483647;\n  box-sizing: border-box;\n  color-scheme: light;\n",document.body.append(t),[t.contentWindow,()=>{document.getElementById(tn)&&document.getElementById(tn).remove()}]}let we=null,qs=null;function Ks(e){return null==we||we?.closed?we=function(t,n,r,s,i){const d=r.open(t,"FCL_POP",`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=640, height=770, top=${r.top.outerHeight/2+r.top.screenY-385}, left=${r.top.outerWidth/2+r.top.screenX-320}`);if(!d)throw new Error("Popup failed to open (was it blocked by a popup blocker?)");return d}(e,0,window):(qs!==e&&we.location.replace(e),we.focus()),qs=e,[we,()=>{we&&!we.closed&&we.close(),we=null}]}let he=null,Ws=null;function Vs(e){if(null==he||he?.closed){if(he=window.open(e,"_blank"),!he)throw new Error("Tab failed to open (was it blocked by the browser?)")}else Ws!==e&&he.location.replace(e),he.focus();return Ws=e,[he,()=>{he&&!he.closed&&he.close(),he=null}]}function Pt(e){const t=new Xt(e.endpoint);if(window?.location?.origin&&t.searchParams.append("l6n",window.location.origin),null!=e.params)for(let[n,r]of Object.entries(e.params||{}))t.searchParams.append(n,r);return t}function Ys(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.method||"POST",r="GET"===n?void 0:JSON.stringify(t.data||e.data||{});return fetch(Pt(e),{method:n,headers:{...e.headers||{},...t.headers||{},"Content-Type":"application/json"},body:r}).then(s=>s.json())}function Pe(e){return null==e?null:"1.0.0"===e.f_vsn?e:{...Lu,status:e.status??"APPROVED",reason:e.reason??null,data:e.compositeSignature||e.data||{...e},updates:Bs(e.authorizationUpdates),local:Os((e.local||[])[0])}}const Js={"HTTP/GET":"GET","HTTP/POST":"POST"},uc=e=>(_(Js[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),Js[e.method]);function jr(e){return $r.apply(this,arguments)}function $r(){return $r=h(function*(e){let n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;if(_(e,"Missing Polling Service",{service:e}),!t())throw new Error("Externally Halted");try{if(typeof document<"u"&&"hidden"===document.visibilityState)return yield new Promise(r=>setTimeout(r,500)),jr(e,t);n=yield Ys(e,{method:uc(e)}).then(Pe)}catch(r){throw r}switch(n.status){case"APPROVED":return n.data;case"DECLINED":throw new Error(`Declined: ${n.reason||"No reason supplied."}`);default:return yield new Promise(r=>setTimeout(r,500)),jr(n.updates,t)}}),$r.apply(this,arguments)}const Xs=e=>function(){var t=h(function*(n){let{service:r,body:s,config:i}=n;const l=yield Ys(r,{data:{fclVersion:ce,service:{params:r.params,data:r.data,type:r.type},config:i,...s}}).then(Pe);if("APPROVED"===l.status)return l.data;if("DECLINED"===l.status)throw new Error(`Declined: ${l.reason||"No reason supplied."}`);if("REDIRECT"===l.status)return l;if("PENDING"===l.status){var d=!0,f=!0;const[p,y]=yield e(Ns(l.local),{serviceEndpoint:Pt,onClose:()=>f=!1}),b=()=>{try{y(),f=!1}catch(x){console.error("Frame Close Error",x)}};return jr(l.updates,()=>{const x=d;return d=f,x}).then(x=>(b(),x)).catch(x=>{throw console.error(x),b(),x})}throw console.error("Auto Decline: Invalid Response",{service:r,resp:l}),new Error("Auto Decline: Invalid Response")});return function(n){return t.apply(this,arguments)}}();var Zs="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",cc=Zs.length;function Mr(){for(var e="",t=32;t--;)e+=Zs[Math.random()*cc|0];return e}const nn="FCL:VIEW:CLOSE",Gr="FCL:VIEW:READY",zr="FCL:VIEW:RESPONSE",re=e=>"string"==typeof e&&e.toLowerCase(),lc=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),Ye=(e,t)=>console.warn("DEPRECATION NOTICE",`Received ${e}, please use ${t} for this and future versions of FCL`),rn=e=>{let{close:t,send:n,onReady:r,onResponse:s,onMessage:i}=e;return a=>{try{if("object"!=typeof a.data||lc.has(a.data.type))return;re(a.data.type)===re(nn)&&t(),re(a.data.type)===re(Gr)&&r(a,{send:n,close:t}),re(a.data.type)===re(zr)&&s(a,{send:n,close:t}),i(a,{send:n,close:t}),re(a.data.type)===re("FCL:FRAME:READY")&&(Ye(a.data.type,Gr),r(a,{send:n,close:t})),re(a.data.type)===re("FCL:FRAME:RESPONSE")&&(Ye(a.data.type,zr),s(a,{send:n,close:t})),re(a.data.type)===re("FCL:FRAME:CLOSE")&&(Ye(a.data.type,nn),t()),re(a.data.type)===re("FCL::CHALLENGE::RESPONSE")&&(Ye(a.data.type,zr),s(a,{send:n,close:t})),re(a.data.type)===re("FCL::AUTHZ_READY")&&(Ye(a.data.type,Gr),r(a,{send:n,close:t})),re(a.data.type)===re("FCL::CHALLENGE::CANCEL")&&(Ye(a.data.type,nn),t()),re(a.data.type)===re("FCL::CANCEL")&&(Ye(a.data.type,nn),t())}catch(l){console.error("Frame Callback Error",l),t()}}},ft=()=>{},pt=()=>{},gt=()=>{},mt=()=>{},Qs=()=>{throw new Error("Strategy util has not been implemented on this platform")},dc={"VIEW/IFRAME":Hs,"VIEW/POP":Ks,"VIEW/TAB":Vs,"VIEW/MOBILE_BROWSER":Qs,"VIEW/DEEPLINK":Qs};function ei(e){return Hr.apply(this,arguments)}function Hr(){return Hr=h(function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{serviceEndpoint:()=>{}};const{serviceEndpoint:n}=t;try{return dc[e.method](n(e),t)}catch(r){throw console.error("execLocal({service, opts = {}})",r,{service:e,opts:t}),r}}),Hr.apply(this,arguments)}const fc={[fe["HTTP/RPC"]]:Xs(ei),[fe["HTTP/POST"]]:Xs(ei),[fe["IFRAME/RPC"]]:function(e){let{service:t,body:n,config:r,opts:s}=e;return new Promise((i,a)=>{const l=Mr(),d=s.includeOlderJsonRpcCall;!function(f){let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==f)return{send:ft,close:ft};const y=p.onClose||ft,S=rn({close:B,send:J,onReady:p.onReady||ft,onResponse:p.onResponse||ft,onMessage:p.onMessage||ft});window.addEventListener("message",S);const[T,R]=Hs(Pt(f));return{send:J,close:B};function B(){try{window.removeEventListener("message",S),R(),y()}catch(X){console.error("Frame Close Error",X)}}function J(X){try{T.postMessage(JSON.parse(JSON.stringify(X||{})),"*")}catch(ye){console.error("Frame Send Error",X,ye)}}}(t,{onReady:(f,p)=>h(function*(){let{send:y}=p;try{y({type:"FCL:VIEW:READY:RESPONSE",fclVersion:ce,body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),y({fclVersion:ce,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),d&&y({jsonrpc:"2.0",id:l,method:"fcl:sign",params:[n,t.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}})}catch(b){throw b}})(),onResponse(f,p){let{close:y}=p;try{if("object"!=typeof f.data)return;const b=Pe(f.data);switch(b.status){case"APPROVED":i(b.data),y();break;case"DECLINED":a(`Declined: ${b.reason||"No reason supplied"}`),y();break;case"REDIRECT":i(b),y();break;default:a("Declined: No reason supplied"),y()}}catch(b){throw console.error("execIframeRPC onResponse error",b),b}},onMessage(f,p){let{close:y}=p;try{if("object"!=typeof f.data||"2.0"!==f.data.jsonrpc||f.data.id!==l)return;const b=Pe(f.data.result);switch(b.status){case"APPROVED":i(b.data),y();break;case"DECLINED":a(`Declined: ${b.reason||"No reason supplied"}`),y();break;case"REDIRECT":i(b),y();break;default:a("Declined: No reason supplied"),y()}}catch(b){throw console.error("execIframeRPC onMessage error",b),b}},onClose(){a("Declined: Externally Halted")}})})},[fe["POP/RPC"]]:function(e){let{service:t,body:n,config:r,opts:s}=e;return new Promise((i,a)=>{const l=Mr(),{redir:d,includeOlderJsonRpcCall:f}=s;!function(p){let y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==p)return{send:pt,close:pt};const b=y.onClose||pt,T=rn({close:X,send:ye,onReady:y.onReady||pt,onResponse:y.onResponse||pt,onMessage:y.onMessage||pt});window.addEventListener("message",T);const[R,B]=Ks(Pt(p)),J=setInterval(function(){R&&R.closed&&X()},500);return{send:ye,close:X};function X(){try{window.removeEventListener("message",T),clearInterval(J),B(),b()}catch(le){console.error("Popup Close Error",le)}}function ye(le){try{R.postMessage(JSON.parse(JSON.stringify(le||{})),"*")}catch(Je){console.error("Popup Send Error",le,Je)}}}(t,{onReady:(p,y)=>h(function*(){let{send:b}=y;try{b({fclVersion:ce,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),b({fclVersion:ce,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),f&&b({jsonrpc:"2.0",id:l,method:"fcl:sign",params:[n,t.params]})}catch(w){throw w}})(),onResponse(p,y){let{close:b}=y;try{if("object"!=typeof p.data)return;const w=Pe(p.data);switch(w.status){case"APPROVED":i(w.data),!d&&b();break;case"DECLINED":a(`Declined: ${w.reason||"No reason supplied"}`),b();break;case"REDIRECT":i(w),b();break;default:a("Declined: No reason supplied"),b()}}catch(w){throw console.error("execPopRPC onResponse error",w),w}},onMessage(p,y){let{close:b}=y;try{if("object"!=typeof p.data||"2.0"!==p.data.jsonrpc||p.data.id!==l)return;const w=Pe(p.data.result);switch(w.status){case"APPROVED":i(w.data),!d&&b();break;case"DECLINED":a(`Declined: ${w.reason||"No reason supplied"}`),b();break;case"REDIRECT":i(w),b();break;default:a("Declined: No reason supplied"),b()}}catch(w){throw console.error("execPopRPC onMessage error",w),w}},onClose(){a("Declined: Externally Halted")}})})},[fe["TAB/RPC"]]:function(e){let{service:t,body:n,config:r,opts:s}=e;return new Promise((i,a)=>{const l=Mr(),{redir:d,includeOlderJsonRpcCall:f}=s;!function(p){let y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==p)return{send:gt,close:gt};const b=y.onClose||gt,T=rn({close:X,send:ye,onReady:y.onReady||gt,onResponse:y.onResponse||gt,onMessage:y.onMessage||gt});window.addEventListener("message",T);const[R,B]=Vs(Pt(p)),J=setInterval(function(){R&&R.closed&&X()},500);return{send:ye,close:X};function X(){try{window.removeEventListener("message",T),clearInterval(J),B(),b()}catch(le){console.error("Tab Close Error",le)}}function ye(le){try{R.postMessage(JSON.parse(JSON.stringify(le||{})),"*")}catch(Je){console.error("Tab Send Error",le,Je)}}}(t,{onReady:(p,y)=>h(function*(){let{send:b}=y;try{b({fclVersion:ce,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),b({fclVersion:ce,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),f&&b({jsonrpc:"2.0",id:l,method:"fcl:sign",params:[n,t.params]})}catch(w){throw w}})(),onResponse(p,y){let{close:b}=y;try{if("object"!=typeof p.data)return;const w=Pe(p.data);switch(w.status){case"APPROVED":i(w.data),!d&&b();break;case"DECLINED":a(`Declined: ${w.reason||"No reason supplied"}`),b();break;case"REDIRECT":i(w),b();break;default:a("Declined: No reason supplied"),b()}}catch(w){throw console.error("execPopRPC onResponse error",w),w}},onMessage(p,y){let{close:b}=y;try{if("object"!=typeof p.data||"2.0"!==p.data.jsonrpc||p.data.id!==l)return;const w=Pe(p.data.result);switch(w.status){case"APPROVED":i(w.data),!d&&b();break;case"DECLINED":a(`Declined: ${w.reason||"No reason supplied"}`),b();break;case"REDIRECT":i(w),b();break;default:a("Declined: No reason supplied"),b()}}catch(w){throw console.error("execPopRPC onMessage error",w),w}},onClose(){a("Declined: Externally Halted")}})})},[fe["EXT/RPC"]]:function(e){let{service:t,body:n,config:r}=e;return new Promise((i,a)=>{!function(l){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==l)return{send:mt,close:mt};const f=d.onClose||mt,w=rn({close:x,send:S,onReady:d.onReady||mt,onResponse:d.onResponse||mt,onMessage:d.onMessage||mt});return window.addEventListener("message",w),S({service:l}),{send:S,close:x};function x(){try{window.removeEventListener("message",w),f()}catch(T){console.error("Ext Close Error",T)}}function S(T){try{window&&window.postMessage(JSON.parse(JSON.stringify(T||{})),"*")}catch(R){console.error("Ext Send Error",T,R)}}}(t,{onReady:(l,d)=>h(function*(){let{send:f}=d;try{f({fclVersion:ce,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r})}catch(p){throw p}})(),onResponse(l,d){let{close:f}=d;try{if("object"!=typeof l.data)return;const p=Pe(l.data);switch(p.status){case"APPROVED":i(p.data),f();break;case"DECLINED":a(`Declined: ${p.reason||"No reason supplied"}`),f();break;case"REDIRECT":i(p),f();break;default:a("Declined: No reason supplied"),f()}}catch(p){throw console.error("execExtRPC onResponse error",p),p}},onClose(){a("Declined: Externally Halted")}})})}},pc=(e=>{let{platform:t}={platform:"web"};return h(function*(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{yield(i=h(function*(a){return cs("mutate",a)}),function(a){return i.apply(this,arguments)})(n),n=yield us(n);const r=zs({platform:t}),s=yield P().get("fcl.authz",r().authorization);return P().overload(n.dependencies||{},h(function*(){return de([Ya(n.cadence),dr(rs(n.args||[])),n.limit&&au(n.limit)&&lr(n.limit),qa(n.proposer||n.authz||s),Ka(n.payer||n.authz||s),Ma(n.authorizations||[n.authz||s])]).then(ze)}))}catch(r){throw r}var i})})(),Le=zs({platform:"web"}),gc=Le().authorization;P({"discovery.wallet.method.default":"IFRAME/RPC","fcl.storage.default":(()=>{try{return{can:!(typeof window>"u"),get:(t=h(function*(n){return JSON.parse(sessionStorage.getItem(n))}),function(r){return t.apply(this,arguments)}),put:function(){var t=h(function*(n,r){return sessionStorage.setItem(n,JSON.stringify(r))});return function(r,s){return t.apply(this,arguments)}}()}}catch{return null}var t})()}),Ss({coreStrategies:fc}),k.AppUtils=ju,k.InteractionTemplateUtils=Zu,k.TestUtils=ru,k.VERSION=ce,k.WalletUtils=Fu,k.account=function(e){let{height:t,id:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return _(!(n&&t),'Method: account -- Cannot pass "id" and "height" simultaneously'),n?de([nt(e),cr(n)],r).then(Re):t?de([nt(e),Vt(t)],r).then(Re):de([nt(e)],r).then(Re)},k.arg=fr,k.args=dr,k.atBlockHeight=Vt,k.atBlockId=cr,k.authenticate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Le().authenticate(e)},k.authorization=function(e,t,n,r){return{addr:e,signingFunction:t,keyId:n,sequenceNum:r}},k.authorizations=Ma,k.authz=gc,k.block=It,k.build=qt,k.cadence=Dt,k.cdc=Dt,k.config=P,k.createSignableVoucher=_t,k.currentUser=Le,k.decode=ze,k.discovery=Ju,k.display=function(e){return K(e)},k.events=function(e){return{subscribe:t=>Bt(e,zu,t)}},k.getAccount=nt,k.getBlock=Et,k.getBlockHeader=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return W([ra,t=>(t.block.isSealed=e,te(t))])},k.getChainId=De,k.getCollection=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return W([oa,t=>(t.collection.id=e,t)])},k.getEvents=function(e,t,n){return void 0===t&&void 0===n||z.deprecate({pkg:"FCL/SDK",subject:"Passing a start and end into getEvents",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder"}),W([Mt,r=>(r.events.eventType=e,r.events.start=t,r.events.end=n,te(r))])},k.getEventsAtBlockHeightRange=Ga,k.getEventsAtBlockIds=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return W([Mt,n=>(n.events.eventType=e,n.events.blockIds=t,te(n))])},k.getNetworkParameters=Ha,k.getTransaction=function(e){return W([Qo,t=>(t.transaction.id=e,te(t))])},k.getTransactionStatus=za,k.invariant=O,k.isBad=Xn,k.isOk=ia,k.limit=lr,k.logIn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Le().authenticate(e)},k.mutate=pc,k.param=e=>z.deprecate({pkg:"FCL/SDK",message:"The param builder has been removed from the Flow JS-SDK/FCL.",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params",level:Z.error}),k.params=e=>z.deprecate({pkg:"FCL/SDK",message:"The params builder has been removed from the Flow JS-SDK/FCL.",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params",level:Z.error}),k.payer=Ka,k.ping=function(){return ta},k.pipe=W,k.pluginRegistry=Vu,k.proposer=qa,k.query=Jt,k.reauthenticate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Le().unauthenticate(),Le().authenticate(e)},k.ref=Wa,k.sansPrefix=$,k.script=Va,k.send=de,k.serialize=h(function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=yield P.first(["sdk.resolve"],t.resolve||sr);return Array.isArray(e)&&(e=yield W(jt(),e)),JSON.stringify(_t(yield n(e)),null,2)}),k.signUp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Le().authenticate(e)},k.t=Qu,k.transaction=Ya,k.tx=Ke,k.unauthenticate=()=>Le().unauthenticate(),k.validator=ur,k.verifyUserSignatures=$u,k.voucherIntercept=function(e){return Ht("ix.voucher-intercept",e)},k.voucherToTxId=e=>(e=>{const t=new Rn.SHA3(256);return t.update(j.Buffer.from(e,"hex")),t.digest().toString("hex")})(rr((e=>{Ki(e);const t=Ta(e),n=r=>r.map(s=>{let{address:i,keyId:a,sig:l}=s;return{signerIndex:t.get(i),keyId:a,sig:l}}).sort((s,i)=>s.signerIndex>i.signerIndex?1:s.signerIndex<i.signerIndex?-1:s.keyId>i.keyId?1:s.keyId<i.keyId?-1:void 0).map(s=>[s.signerIndex,s.keyId,ka(s.sig)]);return[[xa(e.cadence),e.arguments.map(Aa),Sa(e.refBlock),e.computeLimit,ot($(e.proposalKey.address)),e.proposalKey.keyId,e.proposalKey.sequenceNum,ot($(e.payer)),e.authorizers.map(r=>ot($(r)))],n(e.payloadSigs),n(e.envelopeSigs)]})(e))),k.why=ua,k.withPrefix=K,Object.defineProperty(k,"__esModule",{value:!0})}($e)},41948:ht=>{"use strict";const{AbortController:$e,AbortSignal:ke}=typeof self<"u"?self:typeof window<"u"?window:void 0;ht.exports=$e,ht.exports.AbortSignal=ke,ht.exports.default=$e}}]);