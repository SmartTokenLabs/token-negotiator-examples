(self.webpackChunkAngular_bare_bones_demo=self.webpackChunkAngular_bare_bones_demo||[]).push([[66],{6066:(Dn,en,er)=>{"use strict";er.r(en),er.d(en,{WC_DEFAULT_RPC_MAP:()=>Dt,WC_V2_DEFAULT_CHAINS:()=>zn,getWalletConnectV2ProviderInstance:()=>Hn});var I=er(3648),hr=er.n(I),Dt={1:"https://ethereum.publicnode.com",5:"https://eth-goerli.g.alchemy.com/v2/yVhq9zPJorAWsw-F87fEabSUl7cCU6z4",11155111:"https://sepolia.infura.io/v3/9f79b2f9274344af90b8d4e244b580ef",137:"https://polygon-rpc.com/",80001:"https://polygon-mumbai.g.alchemy.com/v2/rVI6pOV4irVsrw20cJxc1fxK_1cSeiY0",56:"https://bsc-dataseed.binance.org/",97:"https://data-seed-prebsc-1-s1.binance.org:8545",43114:"https://api.avax.network/ext/bc/C/rpc",43113:"https://api.avax-test.network/ext/bc/C/rpc",250:"https://rpc.fantom.network/",25:"https://evm-cronos.crypto.org",338:"https://evm-t3.cronos.org",42161:"https://arb1.arbitrum.io/rpc",421613:"https://arb-goerli.g.alchemy.com/v2/nFrflomLgsQQL5NWjGileAVqIGGxZWce",10:"https://mainnet.optimism.io"},zn=["eip155:1","eip155:137","eip155:250","eip155:25","eip155:42161","eip155:10"],Hn=function(){return Bt=void 0,fr=void 0,yt=function(){return function(Bt,fr){var yt,gt,fe,De,Fe={label:0,sent:function(){if(1&fe[0])throw fe[1];return fe[1]},trys:[],ops:[]};return De={next:Ot(0),throw:Ot(1),return:Ot(2)},"function"==typeof Symbol&&(De[Symbol.iterator]=function(){return this}),De;function Ot(ye){return function(at){return function wr(ye){if(yt)throw new TypeError("Generator is already executing.");for(;De&&(De=0,ye[0]&&(Fe=0)),Fe;)try{if(yt=1,gt&&(fe=2&ye[0]?gt.return:ye[0]?gt.throw||((fe=gt.return)&&fe.call(gt),0):gt.next)&&!(fe=fe.call(gt,ye[1])).done)return fe;switch(gt=0,fe&&(ye=[2&ye[0],fe.value]),ye[0]){case 0:case 1:fe=ye;break;case 4:return Fe.label++,{value:ye[1],done:!1};case 5:Fe.label++,gt=ye[1],ye=[0];continue;case 7:ye=Fe.ops.pop(),Fe.trys.pop();continue;default:if(!(fe=(fe=Fe.trys).length>0&&fe[fe.length-1])&&(6===ye[0]||2===ye[0])){Fe=0;continue}if(3===ye[0]&&(!fe||ye[1]>fe[0]&&ye[1]<fe[3])){Fe.label=ye[1];break}if(6===ye[0]&&Fe.label<fe[1]){Fe.label=fe[1],fe=ye;break}if(fe&&Fe.label<fe[2]){Fe.label=fe[2],Fe.ops.push(ye);break}fe[2]&&Fe.ops.pop(),Fe.trys.pop();continue}ye=fr.call(Bt,Fe)}catch(at){ye=[6,at],gt=0}finally{yt=fe=0}if(5&ye[0])throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}([ye,at])}}}(this,function(Bt){switch(Bt.label){case 0:return[4,hr().init({projectId:"2ec7ead81da1226703ad789c0b2f7b30",logger:"debug",relayUrl:"wss://relay.walletconnect.com"})];case 1:return[2,Bt.sent()]}})},new((Fe=void 0)||(Fe=Promise))(function(fe,De){function Ot(at){try{ye(yt.next(at))}catch(Tt){De(Tt)}}function wr(at){try{ye(yt.throw(at))}catch(Tt){De(Tt)}}function ye(at){at.done?fe(at.value):function gt(fe){return fe instanceof Fe?fe:new Fe(function(De){De(fe)})}(at.value).then(Ot,wr)}ye((yt=yt.apply(Bt,fr||[])).next())});var Bt,fr,Fe,yt}},3648:function(Dn,en,er){var I=er(1052).default;!function(hr){"use strict";var dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dt(r){var e=r.default;if("function"==typeof e){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}function zn(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}const fr=function Bt(r,e,t){var n=t&&t.stringify||zn;if("object"==typeof r&&null!==r){var o=e.length+1;if(1===o)return r;var s=new Array(o);s[0]=n(r);for(var a=1;a<o;a++)s[a]=n(e[a]);return s.join(" ")}if("string"!=typeof r)return r;var h=e.length;if(0===h)return r;for(var l="",f=0,_=-1,v=r&&r.length||0,b=0;b<v;){if(37===r.charCodeAt(b)&&b+1<v){switch(_=_>-1?_:0,r.charCodeAt(b+1)){case 100:case 102:if(f>=h||null==e[f])break;_<b&&(l+=r.slice(_,b)),l+=Number(e[f]),_=b+2,b++;break;case 105:if(f>=h||null==e[f])break;_<b&&(l+=r.slice(_,b)),l+=Math.floor(Number(e[f])),_=b+2,b++;break;case 79:case 111:case 106:if(f>=h||void 0===e[f])break;_<b&&(l+=r.slice(_,b));var m=typeof e[f];if("string"===m){l+="'"+e[f]+"'",_=b+2,b++;break}if("function"===m){l+=e[f].name||"<anonymous>",_=b+2,b++;break}l+=n(e[f]),_=b+2,b++;break;case 115:if(f>=h)break;_<b&&(l+=r.slice(_,b)),l+=String(e[f]),_=b+2,b++;break;case 37:_<b&&(l+=r.slice(_,b)),l+="%",_=b+2,b++,f--}++f}++b}return-1===_?r:(_<v&&(l+=r.slice(_)),l)};var Fe=De;const yt=function Tc(){function r(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return r(self)||r(window)||r(this)||{}}}().console||{},gt={mapHttpRequest:tn,mapHttpResponse:tn,wrapRequestSerializer:$n,wrapResponseSerializer:$n,wrapErrorSerializer:$n,req:tn,res:tn,err:function Fc(r){const e={type:r.constructor.name,msg:r.message,stack:r.stack};for(const t in r)void 0===e[t]&&(e[t]=r[t]);return e}};function De(r){(r=r||{}).browser=r.browser||{};const e=r.browser.transmit;if(e&&"function"!=typeof e.send)throw Error("pino: transmit option must have a send function");const t=r.browser.write||yt;r.browser.write&&(r.browser.asObject=!0);const n=r.serializers||{},i=function fe(r,e){return Array.isArray(r)?r.filter(function(t){return"!stdSerializers.err"!==t}):!0===r&&Object.keys(e)}(r.browser.serialize,n);let o=r.browser.serialize;Array.isArray(r.browser.serialize)&&r.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);"function"==typeof t&&(t.error=t.fatal=t.warn=t.info=t.debug=t.trace=t),!1===r.enabled&&(r.level="silent");const a=r.level||"info",h=Object.create(t);h.log||(h.log=Er),Object.defineProperty(h,"levelVal",{get:function f(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(h,"level",{get:function _(){return this._level},set:function v(m){if("silent"!==m&&!this.levels.values[m])throw Error("unknown level "+m);this._level=m,Ot(l,h,"error","log"),Ot(l,h,"fatal","error"),Ot(l,h,"warn","error"),Ot(l,h,"info","log"),Ot(l,h,"debug","log"),Ot(l,h,"trace","log")}});const l={transmit:e,serialize:i,asObject:r.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:Ac(r)};return h.levels=De.levels,h.level=a,h.setMaxListeners=h.getMaxListeners=h.emit=h.addListener=h.on=h.prependListener=h.once=h.prependOnceListener=h.removeListener=h.removeAllListeners=h.listeners=h.listenerCount=h.eventNames=h.write=h.flush=Er,h.serializers=n,h._serialize=i,h._stdErrSerialize=o,h.child=function b(m,T){if(!m)throw new Error("missing bindings for child Pino");T=T||{},i&&m.serializers&&(T.serializers=m.serializers);const j=T.serializers;if(i&&j){var $=Object.assign({},n,j),P=!0===r.browser.serialize?Object.keys($):i;delete m.serializers,at([m],P,$,this._stdErrSerialize)}function A(g){this._childLevel=1+(0|g._childLevel),this.error=Tt(g,m,"error"),this.fatal=Tt(g,m,"fatal"),this.warn=Tt(g,m,"warn"),this.info=Tt(g,m,"info"),this.debug=Tt(g,m,"debug"),this.trace=Tt(g,m,"trace"),$&&(this.serializers=$,this._serialize=P),e&&(this._logEvent=Kn([].concat(g._logEvent.bindings,m)))}return A.prototype=this,new A(this)},e&&(h._logEvent=Kn()),h}function Ot(r,e,t,n){const i=Object.getPrototypeOf(e);e[t]=e.levelVal>e.levels.values[t]?Er:i[t]?i[t]:yt[t]||yt[n]||Er,function wr(r,e,t){var n;!r.transmit&&e[t]===Er||(e[t]=(n=e[t],function(){const i=r.timestamp(),o=new Array(arguments.length),s=Object.getPrototypeOf&&Object.getPrototypeOf(this)===yt?yt:this;for(var a=0;a<o.length;a++)o[a]=arguments[a];if(r.serialize&&!r.asObject&&at(o,this._serialize,this.serializers,this._stdErrSerialize),r.asObject?n.call(s,ye(this,t,o,i)):n.apply(s,o),r.transmit){const h=r.transmit.level||e.level,f=De.levels.values[t];if(f<De.levels.values[h])return;xc(this,{ts:i,methodLevel:t,methodValue:f,transmitLevel:h,transmitValue:De.levels.values[r.transmit.level||e.level],send:r.transmit.send,val:e.levelVal},o)}}))}(r,e,t)}function ye(r,e,t,n){r._serialize&&at(t,r._serialize,r.serializers,r._stdErrSerialize);const i=t.slice();let o=i[0];const s={};n&&(s.time=n),s.level=De.levels.values[e];let a=1+(0|r._childLevel);if(a<1&&(a=1),null!==o&&"object"==typeof o){for(;a--&&"object"==typeof i[0];)Object.assign(s,i.shift());o=i.length?fr(i.shift(),i):void 0}else"string"==typeof o&&(o=fr(i.shift(),i));return void 0!==o&&(s.msg=o),s}function at(r,e,t,n){for(const i in r)if(n&&r[i]instanceof Error)r[i]=De.stdSerializers.err(r[i]);else if("object"==typeof r[i]&&!Array.isArray(r[i]))for(const o in r[i])e&&e.indexOf(o)>-1&&o in t&&(r[i][o]=t[o](r[i][o]))}function Tt(r,e,t){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return r[t].apply(this,n)}}function xc(r,e,t){const n=e.send,i=e.ts,o=e.methodLevel,s=e.methodValue,a=e.val,h=r._logEvent.bindings;at(t,r._serialize||Object.keys(r.serializers),r.serializers,void 0===r._stdErrSerialize||r._stdErrSerialize),r._logEvent.ts=i,r._logEvent.messages=t.filter(function(l){return-1===h.indexOf(l)}),r._logEvent.level.label=o,r._logEvent.level.value=s,n(o,r._logEvent,a),r._logEvent=Kn(h)}function Kn(r){return{ts:0,messages:[],bindings:r||[],level:{label:"",value:0}}}function Ac(r){return"function"==typeof r.timestamp?r.timestamp:!1===r.timestamp?to:ro}function tn(){return{}}function $n(r){return r}function Er(){}function to(){return!1}function ro(){return Date.now()}De.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},De.stdSerializers=gt,De.stdTimeFunctions=Object.assign({},{nullTime:to,epochTime:ro,unixTime:function Nc(){return Math.round(Date.now()/1e3)},isoTime:function Rc(){return new Date(Date.now()).toISOString()}});var rn,ct={exports:{}},pr="object"==typeof Reflect?Reflect:null,no=pr&&"function"==typeof pr.apply?pr.apply:function(r,e,t){return Function.prototype.apply.call(r,e,t)};rn=pr&&"function"==typeof pr.ownKeys?pr.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)};var io=Number.isNaN||function(r){return r!=r};function Ae(){Ae.init.call(this)}ct.exports=Ae,ct.exports.once=function Mc(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){"function"==typeof r.removeListener&&r.removeListener("error",i),t([].slice.call(arguments))}fo(r,e,o,{once:!0}),"error"!==e&&function Dc(r,e,t){"function"==typeof r.on&&fo(r,"error",e,t)}(r,i,{once:!0})})},Ae.EventEmitter=Ae,Ae.prototype._events=void 0,Ae.prototype._eventsCount=0,Ae.prototype._maxListeners=void 0;var oo=10;function nn(r){if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function so(r){return void 0===r._maxListeners?Ae.defaultMaxListeners:r._maxListeners}function ao(r,e,t,n){var i,o,s;if(nn(t),void 0===(o=r._events)?(o=r._events=Object.create(null),r._eventsCount=0):(void 0!==o.newListener&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),void 0===s)s=o[e]=t,++r._eventsCount;else if("function"==typeof s?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),(i=so(r))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=s.length,function Lc(r){console&&console.warn&&console.warn(r)}(a)}return r}function Cc(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function co(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=Cc.bind(n);return i.listener=t,n.wrapFn=i,i}function uo(r,e,t){var n=r._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?t?[i.listener||i]:[i]:t?function Uc(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}(i):ho(i,i.length)}function lo(r){var e=this._events;if(void 0!==e){var t=e[r];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function ho(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function fo(r,e,t,n){if("function"==typeof r.on)n.once?r.once(e,t):r.on(e,t);else{if("function"!=typeof r.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r);r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)})}}Object.defineProperty(Ae,"defaultMaxListeners",{enumerable:!0,get:function(){return oo},set:function(r){if("number"!=typeof r||r<0||io(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");oo=r}}),Ae.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ae.prototype.setMaxListeners=function(r){if("number"!=typeof r||r<0||io(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},Ae.prototype.getMaxListeners=function(){return so(this)},Ae.prototype.emit=function(r){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var n="error"===r,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[r];if(void 0===a)return!1;if("function"==typeof a)no(a,this,e);else{var h=a.length,l=ho(a,h);for(t=0;t<h;++t)no(l[t],this,e)}return!0},Ae.prototype.on=Ae.prototype.addListener=function(r,e){return ao(this,r,e,!1)},Ae.prototype.prependListener=function(r,e){return ao(this,r,e,!0)},Ae.prototype.once=function(r,e){return nn(e),this.on(r,co(this,r,e)),this},Ae.prototype.prependOnceListener=function(r,e){return nn(e),this.prependListener(r,co(this,r,e)),this},Ae.prototype.off=Ae.prototype.removeListener=function(r,e){var t,n,i,o,s;if(nn(e),void 0===(n=this._events))return this;if(void 0===(t=n[r]))return this;if(t===e||t.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[r],n.removeListener&&this.emit("removeListener",r,t.listener||e));else if("function"!=typeof t){for(i=-1,o=t.length-1;o>=0;o--)if(t[o]===e||t[o].listener===e){s=t[o].listener,i=o;break}if(i<0)return this;0===i?t.shift():function jc(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}(t,i),1===t.length&&(n[r]=t[0]),void 0!==n.removeListener&&this.emit("removeListener",r,s||e)}return this},Ae.prototype.removeAllListeners=function(r){var e,t,n;if(void 0===(t=this._events))return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[r]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[r]),this;if(0===arguments.length){var o,i=Object.keys(t);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=t[r]))this.removeListener(r,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(r,e[n]);return this},Ae.prototype.listeners=function(r){return uo(this,r,!0)},Ae.prototype.rawListeners=function(r){return uo(this,r,!1)},Ae.listenerCount=function(r,e){return"function"==typeof r.listenerCount?r.listenerCount(e):lo.call(r,e)},Ae.prototype.listenerCount=lo,Ae.prototype.eventNames=function(){return this._eventsCount>0?rn(this._events):[]};var on={},Bn=function(r,e){return(Bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Vn=function(){return Vn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Vn.apply(this,arguments)};function qn(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function po(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Sr(r){return this instanceof Sr?(this.v=r,this):new Sr(r)}var yo=Dt(Object.freeze({__proto__:null,__extends:function kc(r,e){function t(){this.constructor=r}Bn(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Vn},__rest:function zc(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function Hc(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function Kc(r,e){return function(t,n){e(t,n,r)}},__metadata:function $c(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function Bc(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function Vc(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function qc(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function Gc(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:qn,__read:po,__spread:function Wc(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(po(arguments[e]));return r},__spreadArrays:function Yc(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Sr,__asyncGenerator:function Jc(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(b){return new Promise(function(m,T){o.push([v,b,m,T])>1||a(v,b)})})}function a(v,b){try{!function h(v){v.value instanceof Sr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](b))}catch(m){_(o[0][3],m)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,b){v(b),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function Xc(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Sr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function Zc(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=qn(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function Qc(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function eu(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function tu(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function ru(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function nu(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),Or={};Object.defineProperty(Or,"__esModule",{value:!0}),Or.safeJsonParse=function ou(r){if("string"!=typeof r)throw new Error("Cannot safe json parse value of type "+typeof r);try{return JSON.parse(r)}catch{return r}},Or.safeJsonStringify=function su(r){return"string"==typeof r?r:JSON.stringify(r,(e,t)=>typeof t>"u"?null:t)};var go,sn={exports:{}};var vo,_o={},Ir={};var mo,bo,Pr={};Object.defineProperty(on,"__esModule",{value:!0}),on.KeyValueStorage=void 0;const dr=yo,wo=Or,hu=dr.__importDefault(function au(){return go||(go=1,function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,n){this[t]=String(n)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(n){t[n]=void 0,delete t[n]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),sn.exports=typeof dt<"u"&&dt.localStorage?dt.localStorage:typeof window<"u"&&window.localStorage?window.localStorage:new e}()),sn.exports}()),fu=function lu(){return bo||(bo=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=yo;e.__exportStar(function cu(){return vo||(vo=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.IKeyValueStorage=void 0,Ir.IKeyValueStorage=class r{}),Ir}(),r),e.__exportStar(function uu(){if(mo)return Pr;mo=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.parseEntry=void 0;const r=Or;return Pr.parseEntry=function e(t){var n;return[t[0],r.safeJsonParse(null!==(n=t[1])&&void 0!==n?n:"")]},Pr}(),r)}(_o)),_o}();class Eo{constructor(){this.localStorage=hu.default}getKeys(){return dr.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return dr.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(fu.parseEntry)})}getItem(e){return dr.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(null!==t)return wo.safeJsonParse(t)})}setItem(e,t){return dr.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,wo.safeJsonStringify(t))})}removeItem(e){return dr.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}on.KeyValueStorage=Eo;var pu=on.default=Eo,xr={},Gn=function(r,e){return(Gn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Wn=function(){return Wn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Wn.apply(this,arguments)};function Yn(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function So(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Fr(r){return this instanceof Fr?(this.v=r,this):new Fr(r)}var an=Dt(Object.freeze({__proto__:null,__extends:function du(r,e){function t(){this.constructor=r}Gn(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Wn},__rest:function yu(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function gu(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function _u(r,e){return function(t,n){e(t,n,r)}},__metadata:function vu(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function mu(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function bu(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function wu(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function Eu(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:Yn,__read:So,__spread:function Su(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(So(arguments[e]));return r},__spreadArrays:function Ou(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Fr,__asyncGenerator:function Iu(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(b){return new Promise(function(m,T){o.push([v,b,m,T])>1||a(v,b)})})}function a(v,b){try{!function h(v){v.value instanceof Fr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](b))}catch(m){_(o[0][3],m)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,b){v(b),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function Pu(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Fr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function xu(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=Yn(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function Fu(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function Au(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function Nu(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function Ru(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function Tu(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),Ar={},Q={},Jn=function(r,e){return(Jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Xn=function(){return Xn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Xn.apply(this,arguments)};function Zn(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oo(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Nr(r){return this instanceof Nr?(this.v=r,this):new Nr(r)}var Po,cn=Dt(Object.freeze({__proto__:null,__extends:function Cu(r,e){function t(){this.constructor=r}Jn(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Xn},__rest:function ju(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function Uu(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function Mu(r,e){return function(t,n){e(t,n,r)}},__metadata:function Du(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function ku(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function zu(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function Hu(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function Ku(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:Zn,__read:Oo,__spread:function $u(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Oo(arguments[e]));return r},__spreadArrays:function Bu(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Nr,__asyncGenerator:function Vu(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(b){return new Promise(function(m,T){o.push([v,b,m,T])>1||a(v,b)})})}function a(v,b){try{!function h(v){v.value instanceof Nr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](b))}catch(m){_(o[0][3],m)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,b){v(b),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function qu(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Nr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function Gu(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=Zn(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function Wu(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function Yu(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function Ju(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function Xu(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function Zu(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),Io={},Rr={};var Fo,tr={},xo={},yr={};var No,Ro,Lo,Co,Ao={};function To(){return Ro||(Ro=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=cn;e.__exportStar(function tl(){return Fo||(Fo=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.ONE_THOUSAND=yr.ONE_HUNDRED=void 0,yr.ONE_HUNDRED=100,yr.ONE_THOUSAND=1e3),yr}(),r),e.__exportStar(function rl(){return No||(No=1,r=Ao,Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=5*r.ONE_MINUTE,r.TEN_MINUTES=10*r.ONE_MINUTE,r.THIRTY_MINUTES=30*r.ONE_MINUTE,r.SIXTY_MINUTES=60*r.ONE_MINUTE,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=3*r.ONE_HOUR,r.SIX_HOURS=6*r.ONE_HOUR,r.TWELVE_HOURS=12*r.ONE_HOUR,r.TWENTY_FOUR_HOURS=24*r.ONE_HOUR,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=3*r.ONE_DAY,r.FIVE_DAYS=5*r.ONE_DAY,r.SEVEN_DAYS=7*r.ONE_DAY,r.THIRTY_DAYS=30*r.ONE_DAY,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=2*r.ONE_WEEK,r.THREE_WEEKS=3*r.ONE_WEEK,r.FOUR_WEEKS=4*r.ONE_WEEK,r.ONE_YEAR=365*r.ONE_DAY),Ao;var r}(),r)}(xo)),xo}function il(){return Co||(Co=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=cn;e.__exportStar(function el(){return Po||(Po=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.delay=void 0,Rr.delay=function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}),Rr}(),r),e.__exportStar(function nl(){if(Lo)return tr;Lo=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.fromMiliseconds=tr.toMiliseconds=void 0;const r=To();return tr.toMiliseconds=function e(n){return n*r.ONE_THOUSAND},tr.fromMiliseconds=function t(n){return Math.floor(n/r.ONE_THOUSAND)},tr}(),r)}(Io)),Io}var jo,gr={};var Mo,Do,Uo={},Tr={};function al(){return Do||(Do=1,r=Uo,Object.defineProperty(r,"__esModule",{value:!0}),cn.__exportStar(function sl(){return Mo||(Mo=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.IWatch=void 0,Tr.IWatch=class r{}),Tr}(),r)),Uo;var r}!function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=cn;e.__exportStar(il(),r),e.__exportStar(function ol(){if(jo)return gr;jo=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const n=this.get(t);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const i=Date.now()-n.started;this.timestamps.set(t,{started:n.started,elapsed:i})}get(t){const n=this.timestamps.get(t);if(typeof n>"u")throw new Error(`No timestamp found for label: ${t}`);return n}elapsed(t){const n=this.get(t);return n.elapsed||Date.now()-n.started}}return gr.Watch=r,gr.default=r,gr}(),r),e.__exportStar(al(),r),e.__exportStar(To(),r)}(Q);var ko={},Lr={};class rr{}var zo,Ho,ul=Dt(Object.freeze({__proto__:null,IEvents:rr}));function Ko(){return Ho||(Ho=1,r=ko,Object.defineProperty(r,"__esModule",{value:!0}),an.__exportStar(function ll(){if(zo)return Lr;zo=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.IHeartBeat=void 0;const r=ul;return Lr.IHeartBeat=class e extends r.IEvents{constructor(n){super()}},Lr}(),r)),ko;var r}var Bo,Vo,Go,$o={},nr={};function qo(){return Vo||(Vo=1,r=$o,Object.defineProperty(r,"__esModule",{value:!0}),an.__exportStar(function hl(){return Bo||(Bo=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.HEARTBEAT_EVENTS=nr.HEARTBEAT_INTERVAL=void 0,nr.HEARTBEAT_INTERVAL=Q.FIVE_SECONDS,nr.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}),nr}(),r)),$o;var r}!function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=an;e.__exportStar(function fl(){if(Go)return Ar;Go=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.HeartBeat=void 0;const r=an,e=ct.exports,t=Q,n=Ko(),i=qo();class o extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=a?.interval||i.HEARTBEAT_INTERVAL}static init(a){return r.__awaiter(this,void 0,void 0,function*(){const h=new o(a);return yield h.init(),h})}init(){return r.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,h){this.events.on(a,h)}once(a,h){this.events.once(a,h)}off(a,h){this.events.off(a,h)}removeListener(a,h){this.events.removeListener(a,h)}initialize(){return r.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Ar.HeartBeat=o,Ar}(),r),e.__exportStar(Ko(),r),e.__exportStar(qo(),r)}(xr);var xe={},Qn=function(r,e){return(Qn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var ei=function(){return ei=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},ei.apply(this,arguments)};function ti(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wo(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Cr(r){return this instanceof Cr?(this.v=r,this):new Cr(r)}var Yo,Ll=Dt(Object.freeze({__proto__:null,__extends:function pl(r,e){function t(){this.constructor=r}Qn(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return ei},__rest:function dl(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function yl(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function gl(r,e){return function(t,n){e(t,n,r)}},__metadata:function _l(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function vl(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function ml(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function bl(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function wl(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:ti,__read:Wo,__spread:function El(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Wo(arguments[e]));return r},__spreadArrays:function Sl(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Cr,__asyncGenerator:function Ol(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(b){return new Promise(function(m,T){o.push([v,b,m,T])>1||a(v,b)})})}function a(v,b){try{!function h(v){v.value instanceof Cr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](b))}catch(m){_(o[0][3],m)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,b){v(b),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function Il(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Cr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function Pl(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=ti(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function xl(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function Fl(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function Al(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function Nl(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function Rl(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),_r={};function Jo(){return Yo||(Yo=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.PINO_CUSTOM_CONTEXT_KEY=_r.PINO_LOGGER_DEFAULTS=void 0,_r.PINO_LOGGER_DEFAULTS={level:"info"},_r.PINO_CUSTOM_CONTEXT_KEY="custom_context"),_r}var Xo,ht={};!function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.pino=void 0;const e=Ll,t=e.__importDefault(Fe);Object.defineProperty(r,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(Jo(),r),e.__exportStar(function Cl(){if(Xo)return ht;Xo=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.generateChildLogger=ht.formatChildLoggerContext=ht.getLoggerContext=ht.setBrowserLoggerContext=ht.getBrowserLoggerContext=ht.getDefaultLoggerOptions=void 0;const r=Jo();function t(a,h=r.PINO_CUSTOM_CONTEXT_KEY){return a[h]||""}function n(a,h,l=r.PINO_CUSTOM_CONTEXT_KEY){return a[l]=h,a}function i(a,h=r.PINO_CUSTOM_CONTEXT_KEY){let l="";return l=typeof a.bindings>"u"?t(a,h):a.bindings().context||"",l}function o(a,h,l=r.PINO_CUSTOM_CONTEXT_KEY){const f=i(a,l);return f.trim()?`${f}/${h}`:h}return ht.getDefaultLoggerOptions=function e(a){return Object.assign(Object.assign({},a),{level:a?.level||r.PINO_LOGGER_DEFAULTS.level})},ht.getBrowserLoggerContext=t,ht.setBrowserLoggerContext=n,ht.getLoggerContext=i,ht.formatChildLoggerContext=o,ht.generateChildLogger=function s(a,h,l=r.PINO_CUSTOM_CONTEXT_KEY){const f=o(a,h,l);return n(a.child({context:f}),f,l)},ht}(),r)}(xe);class jl extends rr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class Ul extends rr{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class Dl extends rr{constructor(e,t){super(),this.relayer=e,this.logger=t}}class kl extends rr{constructor(e){super()}}class Hl extends rr{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Kl extends rr{constructor(e,t){super(),this.core=e,this.logger=t}}function ri(r){if("string"!=typeof r)throw new Error("Cannot safe json parse value of type "+typeof r);try{return JSON.parse(r)}catch{return r}}function jr(r){return"string"==typeof r?r:JSON.stringify(r)}var ni={},vr={},un={},ln={};Object.defineProperty(ln,"__esModule",{value:!0}),ln.BrowserRandomSource=void 0;ln.BrowserRandomSource=class Vl{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let n=0;n<t.length;n+=65536)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,65536)));return t}};var hn={},wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.wipe=function Gl(r){for(var e=0;e<r.length;e++)r[e]=0;return r};var Jl=Dt(Object.freeze({__proto__:null,default:{}}));Object.defineProperty(hn,"__esModule",{value:!0}),hn.NodeRandomSource=void 0;const Xl=wt;hn.NodeRandomSource=class Zl{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=Jl;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=t[i];return(0,Xl.wipe)(t),n}},Object.defineProperty(un,"__esModule",{value:!0}),un.SystemRandomSource=void 0;const Ql=ln,eh=hn;un.SystemRandomSource=class th{constructor(){return this.isAvailable=!1,this.name="",this._source=new Ql.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new eh.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};var r,ne={},Qo={};r=Qo,Object.defineProperty(r,"__esModule",{value:!0}),r.mul=Math.imul||function e(a,h){var f=65535&a,v=65535&h;return f*v+((a>>>16&65535)*v+f*(h>>>16&65535)<<16>>>0)|0},r.add=function t(a,h){return a+h|0},r.sub=function n(a,h){return a-h|0},r.rotl=function i(a,h){return a<<h|a>>>32-h},r.rotr=function o(a,h){return a<<32-h|a>>>h},r.isInteger=Number.isInteger||function s(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(a){return r.isInteger(a)&&a>=-r.MAX_SAFE_INTEGER&&a<=r.MAX_SAFE_INTEGER},Object.defineProperty(ne,"__esModule",{value:!0});var es=Qo;function ts(r,e,t){return void 0===e&&(e=new Uint8Array(2)),void 0===t&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}function rs(r,e,t){return void 0===e&&(e=new Uint8Array(2)),void 0===t&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}function ii(r,e){return void 0===e&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function oi(r,e){return void 0===e&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}function si(r,e){return void 0===e&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}function ai(r,e){return void 0===e&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}function fn(r,e,t){return void 0===e&&(e=new Uint8Array(4)),void 0===t&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}function pn(r,e,t){return void 0===e&&(e=new Uint8Array(4)),void 0===t&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}function ns(r,e,t){return void 0===e&&(e=new Uint8Array(8)),void 0===t&&(t=0),fn(r/4294967296>>>0,e,t),fn(r>>>0,e,t+4),e}function is(r,e,t){return void 0===e&&(e=new Uint8Array(8)),void 0===t&&(t=0),pn(r>>>0,e,t),pn(r/4294967296>>>0,e,t+4),e}ne.readInt16BE=function rh(r,e){return void 0===e&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16},ne.readUint16BE=function nh(r,e){return void 0===e&&(e=0),(r[e+0]<<8|r[e+1])>>>0},ne.readInt16LE=function ih(r,e){return void 0===e&&(e=0),(r[e+1]<<8|r[e])<<16>>16},ne.readUint16LE=function oh(r,e){return void 0===e&&(e=0),(r[e+1]<<8|r[e])>>>0},ne.writeUint16BE=ts,ne.writeInt16BE=ts,ne.writeUint16LE=rs,ne.writeInt16LE=rs,ne.readInt32BE=ii,ne.readUint32BE=oi,ne.readInt32LE=si,ne.readUint32LE=ai,ne.writeUint32BE=fn,ne.writeInt32BE=fn,ne.writeUint32LE=pn,ne.writeInt32LE=pn,ne.readInt64BE=function sh(r,e){void 0===e&&(e=0);var t=ii(r,e),n=ii(r,e+4);return 4294967296*t+n-4294967296*(n>>31)},ne.readUint64BE=function ah(r,e){return void 0===e&&(e=0),4294967296*oi(r,e)+oi(r,e+4)},ne.readInt64LE=function ch(r,e){void 0===e&&(e=0);var t=si(r,e);return 4294967296*si(r,e+4)+t-4294967296*(t>>31)},ne.readUint64LE=function uh(r,e){void 0===e&&(e=0);var t=ai(r,e);return 4294967296*ai(r,e+4)+t},ne.writeUint64BE=ns,ne.writeInt64BE=ns,ne.writeUint64LE=is,ne.writeInt64LE=is,ne.readUintBE=function lh(r,e,t){if(void 0===t&&(t=0),r%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=r/8+t-1;o>=t;o--)n+=e[o]*i,i*=256;return n},ne.readUintLE=function hh(r,e,t){if(void 0===t&&(t=0),r%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=t;o<t+r/8;o++)n+=e[o]*i,i*=256;return n},ne.writeUintBE=function fh(r,e,t,n){if(void 0===t&&(t=new Uint8Array(r/8)),void 0===n&&(n=0),r%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!es.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,o=r/8+n-1;o>=n;o--)t[o]=e/i&255,i*=256;return t},ne.writeUintLE=function ph(r,e,t,n){if(void 0===t&&(t=new Uint8Array(r/8)),void 0===n&&(n=0),r%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!es.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,o=n;o<n+r/8;o++)t[o]=e/i&255,i*=256;return t},ne.readFloat32BE=function dh(r,e){return void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(e)},ne.readFloat32LE=function yh(r,e){return void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(e,!0)},ne.readFloat64BE=function gh(r,e){return void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(e)},ne.readFloat64LE=function _h(r,e){return void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(e,!0)},ne.writeFloat32BE=function vh(r,e,t){return void 0===e&&(e=new Uint8Array(4)),void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(t,r),e},ne.writeFloat32LE=function mh(r,e,t){return void 0===e&&(e=new Uint8Array(4)),void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(t,r,!0),e},ne.writeFloat64BE=function bh(r,e,t){return void 0===e&&(e=new Uint8Array(8)),void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(t,r),e},ne.writeFloat64LE=function wh(r,e,t){return void 0===e&&(e=new Uint8Array(8)),void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(t,r,!0),e},function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const t=ne,n=wt;function i(l,f=r.defaultRandomSource){return f.randomBytes(l)}r.defaultRandomSource=new un.SystemRandomSource,r.randomBytes=i,r.randomUint32=function o(l=r.defaultRandomSource){const f=i(4,l),_=(0,t.readUint32LE)(f);return(0,n.wipe)(f),_};const s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,f=s,_=r.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let v="";const b=f.length,m=256-256%b;for(;l>0;){const T=i(Math.ceil(256*l/m),_);for(let j=0;j<T.length&&l>0;j++){const $=T[j];$<m&&(v+=f.charAt($%b),l--)}(0,n.wipe)(T)}return v}r.randomString=a,r.randomStringForEntropy=function h(l,f=s,_=r.defaultRandomSource){return a(Math.ceil(l/(Math.log(f.length)/Math.LN2)),f,_)}}(vr);var os={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=ne,t=wt;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},a.prototype.update=function(h,l){if(void 0===l&&(l=h.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=h[f++],l--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,h,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=h[f++],l--;return this},a.prototype.finish=function(h){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,_=l/536870912|0,v=l<<3,b=l%128<112?128:256;this._buffer[f]=128;for(var m=f+1;m<b-8;m++)this._buffer[m]=0;e.writeUint32BE(_,this._buffer,b-8),e.writeUint32BE(v,this._buffer,b-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,b),this._finished=!0}for(m=0;m<this.digestLength/8;m++)e.writeUint32BE(this._stateHi[m],h,8*m),e.writeUint32BE(this._stateLo[m],h,8*m+4);return this},a.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(h){return this._stateHi.set(h.stateHi),this._stateLo.set(h.stateLo),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(h){t.wipe(h.stateHi),t.wipe(h.stateLo),h.buffer&&t.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},a}();r.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(a,h,l,f,_,v,b){for(var d,S,M,D,C,L,z,H,m=l[0],T=l[1],j=l[2],$=l[3],P=l[4],A=l[5],g=l[6],O=l[7],w=f[0],c=f[1],p=f[2],k=f[3],K=f[4],G=f[5],X=f[6],Z=f[7];b>=128;){for(var ee=0;ee<16;ee++)a[ee]=e.readUint32BE(_,B=8*ee+v),h[ee]=e.readUint32BE(_,B+4);for(ee=0;ee<80;ee++){var E,Ce,J=T,ce=j,R=$,N=P,x=A,u=g,W=c,pe=p,be=k,ge=K,Se=G,ze=X;if(C=65535&(S=Z),L=S>>>16,z=65535&(d=O),H=d>>>16,C+=65535&(S=(K>>>14|P<<18)^(K>>>18|P<<14)^(P>>>9|K<<23)),L+=S>>>16,z+=65535&(d=(P>>>14|K<<18)^(P>>>18|K<<14)^(K>>>9|P<<23)),H+=d>>>16,C+=65535&(S=K&G^~K&X),L+=S>>>16,z+=65535&(d=P&A^~P&g),H+=d>>>16,C+=65535&(S=i[2*ee+1]),L+=S>>>16,z+=65535&(d=i[2*ee]),H+=d>>>16,L+=(S=h[ee%16])>>>16,z+=65535&(d=a[ee%16]),H+=d>>>16,z+=(L+=(C+=65535&S)>>>16)>>>16,C=65535&(S=D=65535&C|L<<16),L=S>>>16,z=65535&(d=M=65535&z|(H+=z>>>16)<<16),H=d>>>16,C+=65535&(S=(w>>>28|m<<4)^(m>>>2|w<<30)^(m>>>7|w<<25)),L+=S>>>16,z+=65535&(d=(m>>>28|w<<4)^(w>>>2|m<<30)^(w>>>7|m<<25)),H+=d>>>16,L+=(S=w&c^w&p^c&p)>>>16,z+=65535&(d=m&T^m&j^T&j),H+=d>>>16,E=65535&(z+=(L+=(C+=65535&S)>>>16)>>>16)|(H+=z>>>16)<<16,Ce=65535&C|L<<16,C=65535&(S=be),L=S>>>16,z=65535&(d=R),H=d>>>16,L+=(S=D)>>>16,z+=65535&(d=M),H+=d>>>16,T=m,j=J,$=ce,P=R=65535&(z+=(L+=(C+=65535&S)>>>16)>>>16)|(H+=z>>>16)<<16,A=N,g=x,O=u,m=E,c=w,p=W,k=pe,K=be=65535&C|L<<16,G=ge,X=Se,Z=ze,w=Ce,ee%16==15)for(var B=0;B<16;B++)C=65535&(S=h[B]),L=S>>>16,z=65535&(d=a[B]),H=d>>>16,C+=65535&(S=h[(B+9)%16]),L+=S>>>16,z+=65535&(d=a[(B+9)%16]),H+=d>>>16,C+=65535&(S=((D=h[(B+1)%16])>>>1|(M=a[(B+1)%16])<<31)^(D>>>8|M<<24)^(D>>>7|M<<25)),L+=S>>>16,z+=65535&(d=(M>>>1|D<<31)^(M>>>8|D<<24)^M>>>7),H+=d>>>16,L+=(S=((D=h[(B+14)%16])>>>19|(M=a[(B+14)%16])<<13)^(M>>>29|D<<3)^(D>>>6|M<<26))>>>16,z+=65535&(d=(M>>>19|D<<13)^(D>>>29|M<<3)^M>>>6),H+=d>>>16,a[B]=65535&(z+=(L+=(C+=65535&S)>>>16)>>>16)|(H+=z>>>16)<<16,h[B]=65535&C|L<<16}C=65535&(S=w),L=S>>>16,z=65535&(d=m),H=d>>>16,L+=(S=f[0])>>>16,z+=65535&(d=l[0]),H+=d>>>16,l[0]=m=65535&(z+=(L+=(C+=65535&S)>>>16)>>>16)|(H+=z>>>16)<<16,f[0]=w=65535&C|L<<16,C=65535&(S=c),L=S>>>16,z=65535&(d=T),H=d>>>16,L+=(S=f[1])>>>16,z+=65535&(d=l[1]),H+=d>>>16,l[1]=T=65535&(z+=(L+=(C+=65535&S)>>>16)>>>16)|(H+=z>>>16)<<16,f[1]=c=65535&C|L<<16,C=65535&(S=p),L=S>>>16,z=65535&(d=j),H=d>>>16,L+=(S=f[2])>>>16,z+=65535&(d=l[2]),H+=d>>>16,l[2]=j=65535&(z+=(L+=(C+=65535&S)>>>16)>>>16)|(H+=z>>>16)<<16,f[2]=p=65535&C|L<<16,C=65535&(S=k),L=S>>>16,z=65535&(d=$),H=d>>>16,L+=(S=f[3])>>>16,z+=65535&(d=l[3]),H+=d>>>16,l[3]=$=65535&(z+=(L+=(C+=65535&S)>>>16)>>>16)|(H+=z>>>16)<<16,f[3]=k=65535&C|L<<16,C=65535&(S=K),L=S>>>16,z=65535&(d=P),H=d>>>16,L+=(S=f[4])>>>16,z+=65535&(d=l[4]),H+=d>>>16,l[4]=P=65535&(z+=(L+=(C+=65535&S)>>>16)>>>16)|(H+=z>>>16)<<16,f[4]=K=65535&C|L<<16,C=65535&(S=G),L=S>>>16,z=65535&(d=A),H=d>>>16,L+=(S=f[5])>>>16,z+=65535&(d=l[5]),H+=d>>>16,l[5]=A=65535&(z+=(L+=(C+=65535&S)>>>16)>>>16)|(H+=z>>>16)<<16,f[5]=G=65535&C|L<<16,C=65535&(S=X),L=S>>>16,z=65535&(d=g),H=d>>>16,L+=(S=f[6])>>>16,z+=65535&(d=l[6]),H+=d>>>16,l[6]=g=65535&(z+=(L+=(C+=65535&S)>>>16)>>>16)|(H+=z>>>16)<<16,f[6]=X=65535&C|L<<16,C=65535&(S=Z),L=S>>>16,z=65535&(d=O),H=d>>>16,L+=(S=f[7])>>>16,z+=65535&(d=l[7]),H+=d>>>16,l[7]=O=65535&(z+=(L+=(C+=65535&S)>>>16)>>>16)|(H+=z>>>16)<<16,f[7]=Z=65535&C|L<<16,v+=128,b-=128}return v}r.hash=function s(a){var h=new n;h.update(a);var l=h.digest();return h.clean(),l}})(os),function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=vr,t=os,n=wt;function i(R){const N=new Float64Array(16);if(R)for(let x=0;x<R.length;x++)N[x]=R[x];return N}r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32,new Uint8Array(32)[0]=9;const s=i(),a=i([1]),h=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),v=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function b(R,N){for(let x=0;x<16;x++)R[x]=0|N[x]}function m(R){let N=1;for(let x=0;x<16;x++){let u=R[x]+N+65535;N=Math.floor(u/65536),R[x]=u-65536*N}R[0]+=N-1+37*(N-1)}function T(R,N,x){const u=~(x-1);for(let E=0;E<16;E++){const V=u&(R[E]^N[E]);R[E]^=V,N[E]^=V}}function j(R,N){const x=i(),u=i();for(let E=0;E<16;E++)u[E]=N[E];m(u),m(u),m(u);for(let E=0;E<2;E++){x[0]=u[0]-65517;for(let W=1;W<15;W++)x[W]=u[W]-65535-(x[W-1]>>16&1),x[W-1]&=65535;x[15]=u[15]-32767-(x[14]>>16&1);const V=x[15]>>16&1;x[14]&=65535,T(u,x,1-V)}for(let E=0;E<16;E++)R[2*E]=255&u[E],R[2*E+1]=u[E]>>8}function $(R,N){let x=0;for(let u=0;u<32;u++)x|=R[u]^N[u];return(1&x-1>>>8)-1}function P(R,N){const x=new Uint8Array(32),u=new Uint8Array(32);return j(x,R),j(u,N),$(x,u)}function A(R){const N=new Uint8Array(32);return j(N,R),1&N[0]}function O(R,N,x){for(let u=0;u<16;u++)R[u]=N[u]+x[u]}function w(R,N,x){for(let u=0;u<16;u++)R[u]=N[u]-x[u]}function c(R,N,x){let u,E,V=0,W=0,pe=0,be=0,ge=0,Se=0,ze=0,Ce=0,me=0,_e=0,de=0,le=0,ue=0,ae=0,oe=0,re=0,he=0,ve=0,ie=0,we=0,Ee=0,Ie=0,Pe=0,Oe=0,Nt=0,Mt=0,Jt=0,Et=0,ar=0,Xr=0,Rn=0,Ke=x[0],je=x[1],$e=x[2],Be=x[3],Ve=x[4],Ue=x[5],Ye=x[6],Je=x[7],Xe=x[8],Ze=x[9],Qe=x[10],Ge=x[11],qe=x[12],Te=x[13],et=x[14],tt=x[15];u=N[0],V+=u*Ke,W+=u*je,pe+=u*$e,be+=u*Be,ge+=u*Ve,Se+=u*Ue,ze+=u*Ye,Ce+=u*Je,me+=u*Xe,_e+=u*Ze,de+=u*Qe,le+=u*Ge,ue+=u*qe,ae+=u*Te,oe+=u*et,re+=u*tt,u=N[1],W+=u*Ke,pe+=u*je,be+=u*$e,ge+=u*Be,Se+=u*Ve,ze+=u*Ue,Ce+=u*Ye,me+=u*Je,_e+=u*Xe,de+=u*Ze,le+=u*Qe,ue+=u*Ge,ae+=u*qe,oe+=u*Te,re+=u*et,he+=u*tt,u=N[2],pe+=u*Ke,be+=u*je,ge+=u*$e,Se+=u*Be,ze+=u*Ve,Ce+=u*Ue,me+=u*Ye,_e+=u*Je,de+=u*Xe,le+=u*Ze,ue+=u*Qe,ae+=u*Ge,oe+=u*qe,re+=u*Te,he+=u*et,ve+=u*tt,u=N[3],be+=u*Ke,ge+=u*je,Se+=u*$e,ze+=u*Be,Ce+=u*Ve,me+=u*Ue,_e+=u*Ye,de+=u*Je,le+=u*Xe,ue+=u*Ze,ae+=u*Qe,oe+=u*Ge,re+=u*qe,he+=u*Te,ve+=u*et,ie+=u*tt,u=N[4],ge+=u*Ke,Se+=u*je,ze+=u*$e,Ce+=u*Be,me+=u*Ve,_e+=u*Ue,de+=u*Ye,le+=u*Je,ue+=u*Xe,ae+=u*Ze,oe+=u*Qe,re+=u*Ge,he+=u*qe,ve+=u*Te,ie+=u*et,we+=u*tt,u=N[5],Se+=u*Ke,ze+=u*je,Ce+=u*$e,me+=u*Be,_e+=u*Ve,de+=u*Ue,le+=u*Ye,ue+=u*Je,ae+=u*Xe,oe+=u*Ze,re+=u*Qe,he+=u*Ge,ve+=u*qe,ie+=u*Te,we+=u*et,Ee+=u*tt,u=N[6],ze+=u*Ke,Ce+=u*je,me+=u*$e,_e+=u*Be,de+=u*Ve,le+=u*Ue,ue+=u*Ye,ae+=u*Je,oe+=u*Xe,re+=u*Ze,he+=u*Qe,ve+=u*Ge,ie+=u*qe,we+=u*Te,Ee+=u*et,Ie+=u*tt,u=N[7],Ce+=u*Ke,me+=u*je,_e+=u*$e,de+=u*Be,le+=u*Ve,ue+=u*Ue,ae+=u*Ye,oe+=u*Je,re+=u*Xe,he+=u*Ze,ve+=u*Qe,ie+=u*Ge,we+=u*qe,Ee+=u*Te,Ie+=u*et,Pe+=u*tt,u=N[8],me+=u*Ke,_e+=u*je,de+=u*$e,le+=u*Be,ue+=u*Ve,ae+=u*Ue,oe+=u*Ye,re+=u*Je,he+=u*Xe,ve+=u*Ze,ie+=u*Qe,we+=u*Ge,Ee+=u*qe,Ie+=u*Te,Pe+=u*et,Oe+=u*tt,u=N[9],_e+=u*Ke,de+=u*je,le+=u*$e,ue+=u*Be,ae+=u*Ve,oe+=u*Ue,re+=u*Ye,he+=u*Je,ve+=u*Xe,ie+=u*Ze,we+=u*Qe,Ee+=u*Ge,Ie+=u*qe,Pe+=u*Te,Oe+=u*et,Nt+=u*tt,u=N[10],de+=u*Ke,le+=u*je,ue+=u*$e,ae+=u*Be,oe+=u*Ve,re+=u*Ue,he+=u*Ye,ve+=u*Je,ie+=u*Xe,we+=u*Ze,Ee+=u*Qe,Ie+=u*Ge,Pe+=u*qe,Oe+=u*Te,Nt+=u*et,Mt+=u*tt,u=N[11],le+=u*Ke,ue+=u*je,ae+=u*$e,oe+=u*Be,re+=u*Ve,he+=u*Ue,ve+=u*Ye,ie+=u*Je,we+=u*Xe,Ee+=u*Ze,Ie+=u*Qe,Pe+=u*Ge,Oe+=u*qe,Nt+=u*Te,Mt+=u*et,Jt+=u*tt,u=N[12],ue+=u*Ke,ae+=u*je,oe+=u*$e,re+=u*Be,he+=u*Ve,ve+=u*Ue,ie+=u*Ye,we+=u*Je,Ee+=u*Xe,Ie+=u*Ze,Pe+=u*Qe,Oe+=u*Ge,Nt+=u*qe,Mt+=u*Te,Jt+=u*et,Et+=u*tt,u=N[13],ae+=u*Ke,oe+=u*je,re+=u*$e,he+=u*Be,ve+=u*Ve,ie+=u*Ue,we+=u*Ye,Ee+=u*Je,Ie+=u*Xe,Pe+=u*Ze,Oe+=u*Qe,Nt+=u*Ge,Mt+=u*qe,Jt+=u*Te,Et+=u*et,ar+=u*tt,u=N[14],oe+=u*Ke,re+=u*je,he+=u*$e,ve+=u*Be,ie+=u*Ve,we+=u*Ue,Ee+=u*Ye,Ie+=u*Je,Pe+=u*Xe,Oe+=u*Ze,Nt+=u*Qe,Mt+=u*Ge,Jt+=u*qe,Et+=u*Te,ar+=u*et,Xr+=u*tt,u=N[15],re+=u*Ke,he+=u*je,ve+=u*$e,ie+=u*Be,we+=u*Ve,Ee+=u*Ue,Ie+=u*Ye,Pe+=u*Je,Oe+=u*Xe,Nt+=u*Ze,Mt+=u*Qe,Jt+=u*Ge,Et+=u*qe,ar+=u*Te,Xr+=u*et,Rn+=u*tt,V+=38*he,W+=38*ve,pe+=38*ie,be+=38*we,ge+=38*Ee,Se+=38*Ie,ze+=38*Pe,Ce+=38*Oe,me+=38*Nt,_e+=38*Mt,de+=38*Jt,le+=38*Et,ue+=38*ar,ae+=38*Xr,oe+=38*Rn,E=1,u=V+E+65535,E=Math.floor(u/65536),V=u-65536*E,u=W+E+65535,E=Math.floor(u/65536),W=u-65536*E,u=pe+E+65535,E=Math.floor(u/65536),pe=u-65536*E,u=be+E+65535,E=Math.floor(u/65536),be=u-65536*E,u=ge+E+65535,E=Math.floor(u/65536),ge=u-65536*E,u=Se+E+65535,E=Math.floor(u/65536),Se=u-65536*E,u=ze+E+65535,E=Math.floor(u/65536),ze=u-65536*E,u=Ce+E+65535,E=Math.floor(u/65536),Ce=u-65536*E,u=me+E+65535,E=Math.floor(u/65536),me=u-65536*E,u=_e+E+65535,E=Math.floor(u/65536),_e=u-65536*E,u=de+E+65535,E=Math.floor(u/65536),de=u-65536*E,u=le+E+65535,E=Math.floor(u/65536),le=u-65536*E,u=ue+E+65535,E=Math.floor(u/65536),ue=u-65536*E,u=ae+E+65535,E=Math.floor(u/65536),ae=u-65536*E,u=oe+E+65535,E=Math.floor(u/65536),oe=u-65536*E,u=re+E+65535,E=Math.floor(u/65536),re=u-65536*E,V+=E-1+37*(E-1),E=1,u=V+E+65535,E=Math.floor(u/65536),V=u-65536*E,u=W+E+65535,E=Math.floor(u/65536),W=u-65536*E,u=pe+E+65535,E=Math.floor(u/65536),pe=u-65536*E,u=be+E+65535,E=Math.floor(u/65536),be=u-65536*E,u=ge+E+65535,E=Math.floor(u/65536),ge=u-65536*E,u=Se+E+65535,E=Math.floor(u/65536),Se=u-65536*E,u=ze+E+65535,E=Math.floor(u/65536),ze=u-65536*E,u=Ce+E+65535,E=Math.floor(u/65536),Ce=u-65536*E,u=me+E+65535,E=Math.floor(u/65536),me=u-65536*E,u=_e+E+65535,E=Math.floor(u/65536),_e=u-65536*E,u=de+E+65535,E=Math.floor(u/65536),de=u-65536*E,u=le+E+65535,E=Math.floor(u/65536),le=u-65536*E,u=ue+E+65535,E=Math.floor(u/65536),ue=u-65536*E,u=ae+E+65535,E=Math.floor(u/65536),ae=u-65536*E,u=oe+E+65535,E=Math.floor(u/65536),oe=u-65536*E,u=re+E+65535,E=Math.floor(u/65536),re=u-65536*E,V+=E-1+37*(E-1),R[0]=V,R[1]=W,R[2]=pe,R[3]=be,R[4]=ge,R[5]=Se,R[6]=ze,R[7]=Ce,R[8]=me,R[9]=_e,R[10]=de,R[11]=le,R[12]=ue,R[13]=ae,R[14]=oe,R[15]=re}function p(R,N){c(R,N,N)}function k(R,N){const x=i();let u;for(u=0;u<16;u++)x[u]=N[u];for(u=253;u>=0;u--)p(x,x),2!==u&&4!==u&&c(x,x,N);for(u=0;u<16;u++)R[u]=x[u]}function G(R,N){const x=i(),u=i(),E=i(),V=i(),W=i(),pe=i(),be=i(),ge=i(),Se=i();w(x,R[1],R[0]),w(Se,N[1],N[0]),c(x,x,Se),O(u,R[0],R[1]),O(Se,N[0],N[1]),c(u,u,Se),c(E,R[3],N[3]),c(E,E,l),c(V,R[2],N[2]),O(V,V,V),w(W,u,x),w(pe,V,E),O(be,V,E),O(ge,u,x),c(R[0],W,pe),c(R[1],ge,be),c(R[2],be,pe),c(R[3],W,ge)}function X(R,N,x){for(let u=0;u<4;u++)T(R[u],N[u],x)}function Z(R,N){const x=i(),u=i(),E=i();k(E,N[2]),c(x,N[0],E),c(u,N[1],E),j(R,u),R[31]^=A(x)<<7}function d(R,N,x){b(R[0],s),b(R[1],a),b(R[2],a),b(R[3],s);for(let u=255;u>=0;--u){const E=x[u/8|0]>>(7&u)&1;X(R,N,E),G(N,R),G(R,R),X(R,N,E)}}function S(R,N){const x=[i(),i(),i(),i()];b(x[0],f),b(x[1],_),b(x[2],a),c(x[3],f,_),d(R,x,N)}function M(R){if(R.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const N=(0,t.hash)(R);N[0]&=248,N[31]&=127,N[31]|=64;const x=new Uint8Array(32),u=[i(),i(),i(),i()];S(u,N),Z(x,u);const E=new Uint8Array(64);return E.set(R),E.set(x,32),{publicKey:x,secretKey:E}}r.generateKeyPairFromSeed=M,r.generateKeyPair=function D(R){const N=(0,e.randomBytes)(32,R),x=M(N);return(0,n.wipe)(N),x},r.extractPublicKeyFromSecretKey=function C(R){if(R.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(R.subarray(32))};const L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function z(R,N){let x,u,E,V;for(u=63;u>=32;--u){for(x=0,E=u-32,V=u-12;E<V;++E)N[E]+=x-16*N[u]*L[E-(u-32)],x=Math.floor((N[E]+128)/256),N[E]-=256*x;N[E]+=x,N[u]=0}for(x=0,E=0;E<32;E++)N[E]+=x-(N[31]>>4)*L[E],x=N[E]>>8,N[E]&=255;for(E=0;E<32;E++)N[E]-=x*L[E];for(u=0;u<32;u++)N[u+1]+=N[u]>>8,R[u]=255&N[u]}function H(R){const N=new Float64Array(64);for(let x=0;x<64;x++)N[x]=R[x];for(let x=0;x<64;x++)R[x]=0;z(R,N)}function B(R,N){const x=i(),u=i(),E=i(),V=i(),W=i(),pe=i(),be=i();return b(R[2],a),function g(R,N){for(let x=0;x<16;x++)R[x]=N[2*x]+(N[2*x+1]<<8);R[15]&=32767}(R[1],N),p(E,R[1]),c(V,E,h),w(E,E,R[2]),O(V,R[2],V),p(W,V),p(pe,W),c(be,pe,W),c(x,be,E),c(x,x,V),function K(R,N){const x=i();let u;for(u=0;u<16;u++)x[u]=N[u];for(u=250;u>=0;u--)p(x,x),1!==u&&c(x,x,N);for(u=0;u<16;u++)R[u]=x[u]}(x,x),c(x,x,E),c(x,x,V),c(x,x,V),c(R[0],x,V),p(u,R[0]),c(u,u,V),P(u,E)&&c(R[0],R[0],v),p(u,R[0]),c(u,u,V),P(u,E)?-1:(A(R[0])===N[31]>>7&&w(R[0],s,R[0]),c(R[3],R[0],R[1]),0)}r.sign=function ee(R,N){const x=new Float64Array(64),u=[i(),i(),i(),i()],E=(0,t.hash)(R.subarray(0,32));E[0]&=248,E[31]&=127,E[31]|=64;const V=new Uint8Array(64);V.set(E.subarray(32),32);const W=new t.SHA512;W.update(V.subarray(32)),W.update(N);const pe=W.digest();W.clean(),H(pe),S(u,pe),Z(V,u),W.reset(),W.update(V.subarray(0,32)),W.update(R.subarray(32)),W.update(N);const be=W.digest();H(be);for(let ge=0;ge<32;ge++)x[ge]=pe[ge];for(let ge=0;ge<32;ge++)for(let Se=0;Se<32;Se++)x[ge+Se]+=be[ge]*E[Se];return z(V.subarray(32),x),V},r.verify=function te(R,N,x){const u=new Uint8Array(32),E=[i(),i(),i(),i()],V=[i(),i(),i(),i()];if(x.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(B(V,R))return!1;const W=new t.SHA512;W.update(x.subarray(0,32)),W.update(R),W.update(N);const pe=W.digest();return H(pe),d(E,V,pe),S(V,x.subarray(32)),G(E,V),Z(u,E),!$(x,u)},r.convertPublicKeyToX25519=function J(R){let N=[i(),i(),i(),i()];if(B(N,R))throw new Error("Ed25519: invalid public key");let x=i(),u=i(),E=N[1];O(x,a,E),w(u,a,E),k(u,u),c(x,x,u);let V=new Uint8Array(32);return j(V,x),V},r.convertSecretKeyToX25519=function ce(R){const N=(0,t.hash)(R.subarray(0,32));N[0]&=248,N[31]&=127,N[31]|=64;const x=new Uint8Array(N.subarray(0,32));return(0,n.wipe)(N),x}}(ni);const as="base64url",xh="did",Fh="key",cs="base58btc";function us(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function ci(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));const t=us(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return t}var Ch=function Th(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(255!==t[s])throw new TypeError(o+" is ambiguous");t[s]=i}var a=r.length,h=r.charAt(0),l=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function v(m){if("string"!=typeof m)throw new TypeError("Expected String");if(0===m.length)return new Uint8Array;var T=0;if(" "!==m[T]){for(var j=0,$=0;m[T]===h;)j++,T++;for(var P=(m.length-T)*l+1>>>0,A=new Uint8Array(P);m[T];){var g=t[m.charCodeAt(T)];if(255===g)return;for(var O=0,w=P-1;(0!==g||O<$)&&-1!==w;w--,O++)A[w]=(g+=a*A[w]>>>0)%256>>>0,g=g/256>>>0;if(0!==g)throw new Error("Non-zero carry");$=O,T++}if(" "!==m[T]){for(var c=P-$;c!==P&&0===A[c];)c++;for(var p=new Uint8Array(j+(P-c)),k=j;c!==P;)p[k++]=A[c++];return p}}}return{encode:function _(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===m.length)return"";for(var T=0,j=0,$=0,P=m.length;$!==P&&0===m[$];)$++,T++;for(var A=(P-$)*f+1>>>0,g=new Uint8Array(A);$!==P;){for(var O=m[$],w=0,c=A-1;(0!==O||w<j)&&-1!==c;c--,w++)g[c]=(O+=256*g[c]>>>0)%a>>>0,O=O/a>>>0;if(0!==O)throw new Error("Non-zero carry");j=w,$++}for(var p=A-j;p!==A&&0===g[p];)p++;for(var k=h.repeat(T);p<A;++p)k+=r.charAt(g[p]);return k},decodeUnsafe:v,decode:function b(m){var T=v(m);if(T)return T;throw new Error(`Non-${e} character`)}}};const ls=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};class Mh{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Dh{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return hs(this,e)}}class kh{constructor(e){this.decoders=e}or(e){return hs(this,e)}decode(e){const n=this.decoders[e[0]];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const hs=(r,e)=>new kh({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class zh{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Mh(e,t,n),this.decoder=new Dh(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const dn=({name:r,prefix:e,encode:t,decode:n})=>new zh(r,e,t,n),Ur=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=Ch(t,e);return dn({prefix:r,name:e,encode:n,decode:o=>ls(i(o))})},nt=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>dn({prefix:e,name:r,encode:i=>((r,e,t)=>{const n="="===e[e.length-1],i=(1<<t)-1;let o="",s=0,a=0;for(let h=0;h<r.length;++h)for(a=a<<8|r[h],s+=8;s>t;)s-=t,o+=e[i&a>>s];if(s&&(o+=e[i&a<<t-s]),n)for(;o.length*t&7;)o+="=";return o})(i,n,t),decode:i=>((r,e,t,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=r.length;for(;"="===r[o-1];)--o;const s=new Uint8Array(o*t/8|0);let a=0,h=0,l=0;for(let f=0;f<o;++f){const _=i[r[f]];if(void 0===_)throw new SyntaxError(`Non-${n} character`);h=h<<t|_,a+=t,a>=8&&(a-=8,s[l++]=255&h>>a)}if(a>=t||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return s})(i,n,t,r)}),$h=dn({prefix:"\0",name:"identity",encode:r=>(r=>(new TextDecoder).decode(r))(r),decode:r=>(r=>(new TextEncoder).encode(r))(r)});var Bh=Object.freeze({__proto__:null,identity:$h});const Vh=nt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var qh=Object.freeze({__proto__:null,base2:Vh});const Gh=nt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Wh=Object.freeze({__proto__:null,base8:Gh});const Yh=Ur({prefix:"9",name:"base10",alphabet:"0123456789"});var Jh=Object.freeze({__proto__:null,base10:Yh});const Xh=nt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Zh=nt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Qh=Object.freeze({__proto__:null,base16:Xh,base16upper:Zh});const ef=nt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),tf=nt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rf=nt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),nf=nt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),of=nt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),sf=nt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),af=nt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cf=nt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uf=nt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var lf=Object.freeze({__proto__:null,base32:ef,base32upper:tf,base32pad:rf,base32padupper:nf,base32hex:of,base32hexupper:sf,base32hexpad:af,base32hexpadupper:cf,base32z:uf});const hf=Ur({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ff=Ur({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var pf=Object.freeze({__proto__:null,base36:hf,base36upper:ff});const df=Ur({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yf=Ur({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var gf=Object.freeze({__proto__:null,base58btc:df,base58flickr:yf});const _f=nt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vf=nt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),mf=nt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bf=nt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var wf=Object.freeze({__proto__:null,base64:_f,base64pad:vf,base64url:mf,base64urlpad:bf});const fs=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),Ef=fs.reduce((r,e,t)=>(r[t]=e,r),[]),Sf=fs.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);const Pf=dn({prefix:"\u{1f680}",name:"base256emoji",encode:function Of(r){return r.reduce((e,t)=>e+Ef[t],"")},decode:function If(r){const e=[];for(const t of r){const n=Sf[t.codePointAt(0)];if(void 0===n)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}});var xf=Object.freeze({__proto__:null,base256emoji:Pf}),Ff=function ds(r,e,t){e=e||[];for(var n=t=t||0;r>=Rf;)e[t++]=255&r|128,r/=128;for(;-128&r;)e[t++]=255&r|128,r>>>=7;return e[t]=0|r,ds.bytes=t-n+1,e},Rf=Math.pow(2,31);var Tf=function ui(r,n){var s,t=0,i=0,o=n=n||0,a=r.length;do{if(o>=a)throw ui.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(127&s)<<i:(127&s)*Math.pow(2,i),i+=7}while(s>=128);return ui.bytes=o-n,t};var Cf=Math.pow(2,7),jf=Math.pow(2,14),Uf=Math.pow(2,21),Mf=Math.pow(2,28),Df=Math.pow(2,35),kf=Math.pow(2,42),zf=Math.pow(2,49),Hf=Math.pow(2,56),Kf=Math.pow(2,63),gs={encode:Ff,decode:Tf,encodingLength:function(r){return r<Cf?1:r<jf?2:r<Uf?3:r<Mf?4:r<Df?5:r<kf?6:r<zf?7:r<Hf?8:r<Kf?9:10}};const _s=(r,e,t=0)=>(gs.encode(r,e,t),e),vs=r=>gs.encodingLength(r),li=(r,e)=>{const t=e.byteLength,n=vs(r),i=n+vs(t),o=new Uint8Array(i+t);return _s(r,o,0),_s(t,o,n),o.set(e,i),new Vf(r,t,e,o)};class Vf{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}const ms=({name:r,code:e,encode:t})=>new qf(r,e,t);class qf{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?li(this.code,t):t.then(n=>li(this.code,n))}throw Error("Unknown type, must be binary type")}}const bs=r=>function(){var e=I(function*(t){return new Uint8Array(yield crypto.subtle.digest(r,t))});return function(t){return e.apply(this,arguments)}}(),Gf=ms({name:"sha2-256",code:18,encode:bs("SHA-256")}),Wf=ms({name:"sha2-512",code:19,encode:bs("SHA-512")});Object.freeze({__proto__:null,sha256:Gf,sha512:Wf});const Es=ls;Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:Es,digest:r=>li(0,Es(r))}}),new TextEncoder,new TextDecoder;const Ss={...Bh,...qh,...Wh,...Jh,...Qh,...lf,...pf,...gf,...wf,...xf};function Os(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const Is=Os("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>(new TextEncoder).encode(r.substring(1))),hi=Os("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{const e=us((r=r.substring(1)).length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Ps={utf8:Is,"utf-8":Is,hex:Ss.base16,latin1:hi,ascii:hi,binary:hi,...Ss};function _t(r,e="utf8"){const t=Ps[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.encoder.encode(r).substring(1):globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8")}function vt(r,e="utf8"){const t=Ps[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${r}`):globalThis.Buffer.from(r,"utf8")}function yn(r){return _t(vt(jr(r),"utf8"),as)}function xs(r){const t="z"+_t(ci([vt("K36",cs),r]),cs);return[xh,Fh,t].join(":")}function Zf(r){return _t(r,as)}function Qf(r){return vt([yn(r.header),yn(r.payload)].join("."),"utf8")}function ep(r){return[yn(r.header),yn(r.payload),Zf(r.signature)].join(".")}function Fs(r=vr.randomBytes(32)){return ni.generateKeyPairFromSeed(r)}function fi(){return(fi=I(function*(r,e,t,n,i=Q.fromMiliseconds(Date.now())){const o={alg:"EdDSA",typ:"JWT"},h={iss:xs(n.publicKey),sub:r,aud:e,iat:i,exp:i+t},l=Qf({header:o,payload:h});return ep({header:o,payload:h,signature:ni.sign(n.secretKey,l)})})).apply(this,arguments)}var pi={},gn={};Object.defineProperty(gn,"__esModule",{value:!0});var ut=ne,di=wt;function np(r,e,t){for(var n=1634760805,i=857760878,o=2036477234,s=1797285236,a=t[3]<<24|t[2]<<16|t[1]<<8|t[0],h=t[7]<<24|t[6]<<16|t[5]<<8|t[4],l=t[11]<<24|t[10]<<16|t[9]<<8|t[8],f=t[15]<<24|t[14]<<16|t[13]<<8|t[12],_=t[19]<<24|t[18]<<16|t[17]<<8|t[16],v=t[23]<<24|t[22]<<16|t[21]<<8|t[20],b=t[27]<<24|t[26]<<16|t[25]<<8|t[24],m=t[31]<<24|t[30]<<16|t[29]<<8|t[28],T=e[3]<<24|e[2]<<16|e[1]<<8|e[0],j=e[7]<<24|e[6]<<16|e[5]<<8|e[4],$=e[11]<<24|e[10]<<16|e[9]<<8|e[8],P=e[15]<<24|e[14]<<16|e[13]<<8|e[12],A=n,g=i,O=o,w=s,c=a,p=h,k=l,K=f,G=_,X=v,Z=b,d=m,S=T,M=j,D=$,C=P,L=0;L<20;L+=2)c=(c^=G=G+(S=(S^=A=A+c|0)>>>16|S<<16)|0)>>>20|c<<12,p=(p^=X=X+(M=(M^=g=g+p|0)>>>16|M<<16)|0)>>>20|p<<12,k=(k^=Z=Z+(D=(D^=O=O+k|0)>>>16|D<<16)|0)>>>20|k<<12,K=(K^=d=d+(C=(C^=w=w+K|0)>>>16|C<<16)|0)>>>20|K<<12,k=(k^=Z=Z+(D=(D^=O=O+k|0)>>>24|D<<8)|0)>>>25|k<<7,K=(K^=d=d+(C=(C^=w=w+K|0)>>>24|C<<8)|0)>>>25|K<<7,p=(p^=X=X+(M=(M^=g=g+p|0)>>>24|M<<8)|0)>>>25|p<<7,c=(c^=G=G+(S=(S^=A=A+c|0)>>>24|S<<8)|0)>>>25|c<<7,p=(p^=Z=Z+(C=(C^=A=A+p|0)>>>16|C<<16)|0)>>>20|p<<12,k=(k^=d=d+(S=(S^=g=g+k|0)>>>16|S<<16)|0)>>>20|k<<12,K=(K^=G=G+(M=(M^=O=O+K|0)>>>16|M<<16)|0)>>>20|K<<12,c=(c^=X=X+(D=(D^=w=w+c|0)>>>16|D<<16)|0)>>>20|c<<12,K=(K^=G=G+(M=(M^=O=O+K|0)>>>24|M<<8)|0)>>>25|K<<7,c=(c^=X=X+(D=(D^=w=w+c|0)>>>24|D<<8)|0)>>>25|c<<7,k=(k^=d=d+(S=(S^=g=g+k|0)>>>24|S<<8)|0)>>>25|k<<7,p=(p^=Z=Z+(C=(C^=A=A+p|0)>>>24|C<<8)|0)>>>25|p<<7;ut.writeUint32LE(A+n|0,r,0),ut.writeUint32LE(g+i|0,r,4),ut.writeUint32LE(O+o|0,r,8),ut.writeUint32LE(w+s|0,r,12),ut.writeUint32LE(c+a|0,r,16),ut.writeUint32LE(p+h|0,r,20),ut.writeUint32LE(k+l|0,r,24),ut.writeUint32LE(K+f|0,r,28),ut.writeUint32LE(G+_|0,r,32),ut.writeUint32LE(X+v|0,r,36),ut.writeUint32LE(Z+b|0,r,40),ut.writeUint32LE(d+m|0,r,44),ut.writeUint32LE(S+T|0,r,48),ut.writeUint32LE(M+j|0,r,52),ut.writeUint32LE(D+$|0,r,56),ut.writeUint32LE(C+P|0,r,60)}function As(r,e,t,n,i){if(void 0===i&&(i=0),32!==r.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<t.length)throw new Error("ChaCha: destination is shorter than source");var o,s;if(0===i){if(8!==e.length&&12!==e.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");(o=new Uint8Array(16)).set(e,s=o.length-e.length)}else{if(16!==e.length)throw new Error("ChaCha nonce with counter must be 16 bytes");o=e,s=i}for(var a=new Uint8Array(64),h=0;h<t.length;h+=64){np(a,o,r);for(var l=h;l<h+64&&l<t.length;l++)n[l]=t[l]^a[l-h];op(o,0,s)}return di.wipe(a),0===i&&di.wipe(o),n}function op(r,e,t){for(var n=1;t--;)r[e]=255&(n=n+(255&r[e])|0),n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}gn.streamXOR=As,gn.stream=function ip(r,e,t,n){return void 0===n&&(n=0),di.wipe(t),As(r,e,t,t,n)};var Ns={},Vt={};function Rs(r,e){if(r.length!==e.length)return 0;for(var t=0,n=0;n<r.length;n++)t|=r[n]^e[n];return 1&t-1>>>8}Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.select=function sp(r,e,t){return~(r-1)&e|r-1&t},Vt.lessOrEqual=function ap(r,e){return(0|r)-(0|e)-1>>>31&1},Vt.compare=Rs,Vt.equal=function cp(r,e){return 0!==r.length&&0!==e.length&&0!==Rs(r,e)},function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Vt,t=wt;r.DIGEST_LENGTH=16;var n=function(){function s(a){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var h=a[0]|a[1]<<8;this._r[0]=8191&h;var l=a[2]|a[3]<<8;this._r[1]=8191&(h>>>13|l<<3);var f=a[4]|a[5]<<8;this._r[2]=7939&(l>>>10|f<<6);var _=a[6]|a[7]<<8;this._r[3]=8191&(f>>>7|_<<9);var v=a[8]|a[9]<<8;this._r[4]=255&(_>>>4|v<<12),this._r[5]=v>>>1&8190;var b=a[10]|a[11]<<8;this._r[6]=8191&(v>>>14|b<<2);var m=a[12]|a[13]<<8;this._r[7]=8065&(b>>>11|m<<5);var T=a[14]|a[15]<<8;this._r[8]=8191&(m>>>8|T<<8),this._r[9]=T>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return s.prototype._blocks=function(a,h,l){for(var f=this._fin?0:2048,_=this._h[0],v=this._h[1],b=this._h[2],m=this._h[3],T=this._h[4],j=this._h[5],$=this._h[6],P=this._h[7],A=this._h[8],g=this._h[9],O=this._r[0],w=this._r[1],c=this._r[2],p=this._r[3],k=this._r[4],K=this._r[5],G=this._r[6],X=this._r[7],Z=this._r[8],d=this._r[9];l>=16;){var S=a[h+0]|a[h+1]<<8,M=a[h+2]|a[h+3]<<8,D=a[h+4]|a[h+5]<<8,C=a[h+6]|a[h+7]<<8,L=a[h+8]|a[h+9]<<8,z=a[h+10]|a[h+11]<<8,H=a[h+12]|a[h+13]<<8,ee=a[h+14]|a[h+15]<<8,B=0,te=B;te+=(_+=8191&S)*O,te+=(v+=8191&(S>>>13|M<<3))*(5*d),te+=(b+=8191&(M>>>10|D<<6))*(5*Z),te+=(m+=8191&(D>>>7|C<<9))*(5*X),B=(te+=(T+=8191&(C>>>4|L<<12))*(5*G))>>>13,te&=8191,te+=(j+=L>>>1&8191)*(5*K),te+=($+=8191&(L>>>14|z<<2))*(5*k),te+=(P+=8191&(z>>>11|H<<5))*(5*p),te+=(A+=8191&(H>>>8|ee<<8))*(5*c);var J=B+=(te+=(g+=ee>>>5|f)*(5*w))>>>13;J+=_*w,J+=v*O,J+=b*(5*d),J+=m*(5*Z),B=(J+=T*(5*X))>>>13,J&=8191,J+=j*(5*G),J+=$*(5*K),J+=P*(5*k),J+=A*(5*p),B+=(J+=g*(5*c))>>>13,J&=8191;var ce=B;ce+=_*c,ce+=v*w,ce+=b*O,ce+=m*(5*d),B=(ce+=T*(5*Z))>>>13,ce&=8191,ce+=j*(5*X),ce+=$*(5*G),ce+=P*(5*K),ce+=A*(5*k);var R=B+=(ce+=g*(5*p))>>>13;R+=_*p,R+=v*c,R+=b*w,R+=m*O,B=(R+=T*(5*d))>>>13,R&=8191,R+=j*(5*Z),R+=$*(5*X),R+=P*(5*G),R+=A*(5*K);var N=B+=(R+=g*(5*k))>>>13;N+=_*k,N+=v*p,N+=b*c,N+=m*w,B=(N+=T*O)>>>13,N&=8191,N+=j*(5*d),N+=$*(5*Z),N+=P*(5*X),N+=A*(5*G);var x=B+=(N+=g*(5*K))>>>13;x+=_*K,x+=v*k,x+=b*p,x+=m*c,B=(x+=T*w)>>>13,x&=8191,x+=j*O,x+=$*(5*d),x+=P*(5*Z),x+=A*(5*X);var u=B+=(x+=g*(5*G))>>>13;u+=_*G,u+=v*K,u+=b*k,u+=m*p,B=(u+=T*c)>>>13,u&=8191,u+=j*w,u+=$*O,u+=P*(5*d),u+=A*(5*Z);var E=B+=(u+=g*(5*X))>>>13;E+=_*X,E+=v*G,E+=b*K,E+=m*k,B=(E+=T*p)>>>13,E&=8191,E+=j*c,E+=$*w,E+=P*O,E+=A*(5*d);var V=B+=(E+=g*(5*Z))>>>13;V+=_*Z,V+=v*X,V+=b*G,V+=m*K,B=(V+=T*k)>>>13,V&=8191,V+=j*p,V+=$*c,V+=P*w,V+=A*O;var W=B+=(V+=g*(5*d))>>>13;W+=_*d,W+=v*Z,W+=b*X,W+=m*G,B=(W+=T*K)>>>13,W&=8191,W+=j*k,W+=$*p,W+=P*c,W+=A*w,_=te=8191&(B=(B=((B+=(W+=g*O)>>>13)<<2)+B|0)+(te&=8191)|0),v=J+=B>>>=13,b=ce&=8191,m=R&=8191,T=N&=8191,j=x&=8191,$=u&=8191,P=E&=8191,A=V&=8191,g=W&=8191,h+=16,l-=16}this._h[0]=_,this._h[1]=v,this._h[2]=b,this._h[3]=m,this._h[4]=T,this._h[5]=j,this._h[6]=$,this._h[7]=P,this._h[8]=A,this._h[9]=g},s.prototype.finish=function(a,h){void 0===h&&(h=0);var f,_,v,b,l=new Uint16Array(10);if(this._leftover){for(b=this._leftover,this._buffer[b++]=1;b<16;b++)this._buffer[b]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,b=2;b<10;b++)this._h[b]+=f,f=this._h[b]>>>13,this._h[b]&=8191;for(this._h[0]+=5*f,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,l[0]=this._h[0]+5,f=l[0]>>>13,l[0]&=8191,b=1;b<10;b++)l[b]=this._h[b]+f,f=l[b]>>>13,l[b]&=8191;for(l[9]-=8192,_=(1^f)-1,b=0;b<10;b++)l[b]&=_;for(_=~_,b=0;b<10;b++)this._h[b]=this._h[b]&_|l[b];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),this._h[0]=65535&(v=this._h[0]+this._pad[0]),b=1;b<8;b++)this._h[b]=65535&(v=(this._h[b]+this._pad[b]|0)+(v>>>16)|0);return a[h+0]=this._h[0]>>>0,a[h+1]=this._h[0]>>>8,a[h+2]=this._h[1]>>>0,a[h+3]=this._h[1]>>>8,a[h+4]=this._h[2]>>>0,a[h+5]=this._h[2]>>>8,a[h+6]=this._h[3]>>>0,a[h+7]=this._h[3]>>>8,a[h+8]=this._h[4]>>>0,a[h+9]=this._h[4]>>>8,a[h+10]=this._h[5]>>>0,a[h+11]=this._h[5]>>>8,a[h+12]=this._h[6]>>>0,a[h+13]=this._h[6]>>>8,a[h+14]=this._h[7]>>>0,a[h+15]=this._h[7]>>>8,this._finished=!0,this},s.prototype.update=function(a){var f,h=0,l=a.length;if(this._leftover){(f=16-this._leftover)>l&&(f=l);for(var _=0;_<f;_++)this._buffer[this._leftover+_]=a[h+_];if(l-=f,h+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(this._blocks(a,h,f=l-l%16),h+=f,l-=f),l){for(_=0;_<l;_++)this._buffer[this._leftover+_]=a[h+_];this._leftover+=l}return this},s.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},s.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},s}();r.Poly1305=n,r.oneTimeAuth=function i(s,a){var h=new n(s);h.update(a);var l=h.digest();return h.clean(),l},r.equal=function o(s,a){return s.length===r.DIGEST_LENGTH&&a.length===r.DIGEST_LENGTH&&e.equal(s,a)}}(Ns),function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=gn,t=Ns,n=wt,i=ne,o=Vt;r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var s=new Uint8Array(16),a=function(){function h(l){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,l.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return h.prototype.seal=function(l,f,_,v){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var b=new Uint8Array(16);b.set(l,b.length-l.length);var m=new Uint8Array(32);e.stream(this._key,b,m,4);var j,T=f.length+this.tagLength;if(v){if(v.length!==T)throw new Error("ChaCha20Poly1305: incorrect destination length");j=v}else j=new Uint8Array(T);return e.streamXOR(this._key,b,f,j,4),this._authenticate(j.subarray(j.length-this.tagLength,j.length),m,j.subarray(0,j.length-this.tagLength),_),n.wipe(b),j},h.prototype.open=function(l,f,_,v){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(f.length<this.tagLength)return null;var b=new Uint8Array(16);b.set(l,b.length-l.length);var m=new Uint8Array(32);e.stream(this._key,b,m,4);var T=new Uint8Array(this.tagLength);if(this._authenticate(T,m,f.subarray(0,f.length-this.tagLength),_),!o.equal(T,f.subarray(f.length-this.tagLength,f.length)))return null;var $,j=f.length-this.tagLength;if(v){if(v.length!==j)throw new Error("ChaCha20Poly1305: incorrect destination length");$=v}else $=new Uint8Array(j);return e.streamXOR(this._key,b,f.subarray(0,f.length-this.tagLength),$,4),n.wipe(b),$},h.prototype.clean=function(){return n.wipe(this._key),this},h.prototype._authenticate=function(l,f,_,v){var b=new t.Poly1305(f);v&&(b.update(v),v.length%16>0&&b.update(s.subarray(v.length%16))),b.update(_),_.length%16>0&&b.update(s.subarray(_.length%16));var m=new Uint8Array(8);v&&i.writeUint64LE(v.length,m),b.update(m),i.writeUint64LE(_.length,m),b.update(m);for(var T=b.digest(),j=0;j<T.length;j++)l[j]=T[j];b.clean(),n.wipe(T),n.wipe(m)},h}();r.ChaCha20Poly1305=a}(pi);var Ts={},Mr={},yi={};Object.defineProperty(yi,"__esModule",{value:!0}),yi.isSerializableHash=function up(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"},Object.defineProperty(Mr,"__esModule",{value:!0});var Lt=yi,lp=Vt,hp=wt,Ls=function(){function r(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(n).clean():n.set(t);for(var i=0;i<n.length;i++)n[i]^=54;for(this._inner.update(n),i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Lt.isSerializableHash(this._inner)&&Lt.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),hp.wipe(n)}return r.prototype.reset=function(){if(!Lt.isSerializableHash(this._inner)||!Lt.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){Lt.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Lt.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(e){return this._inner.update(e),this},r.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(!Lt.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(e){if(!Lt.isSerializableHash(this._inner)||!Lt.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(e){if(!Lt.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},r}();Mr.HMAC=Ls,Mr.hmac=function fp(r,e,t){var n=new Ls(r,e);n.update(t);var i=n.digest();return n.clean(),i},Mr.equal=lp.equal,Object.defineProperty(Ts,"__esModule",{value:!0});var Cs=Mr,js=wt,pp=function(){function r(e,t,n,i){void 0===n&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var o=Cs.hmac(this._hash,n,t);this._hmac=new Cs.HMAC(e,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[n]=this._buffer[this._bufpos++];return t},r.prototype.clean=function(){this._hmac.clean(),js.wipe(this._buffer),js.wipe(this._counter),this._bufpos=0},r}(),dp=Ts.HKDF=pp,_n={};!function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=ne,t=wt;r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},a.prototype.update=function(h,l){if(void 0===l&&(l=h.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=h[f++],l--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=o(this._temp,this._state,h,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=h[f++],l--;return this},a.prototype.finish=function(h){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,_=l/536870912|0,v=l<<3,b=l%64<56?64:128;this._buffer[f]=128;for(var m=f+1;m<b-8;m++)this._buffer[m]=0;e.writeUint32BE(_,this._buffer,b-8),e.writeUint32BE(v,this._buffer,b-4),o(this._temp,this._state,this._buffer,0,b),this._finished=!0}for(m=0;m<this.digestLength/4;m++)e.writeUint32BE(this._state[m],h,4*m);return this},a.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(h){return this._state.set(h.state),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(h){t.wipe(h.state),h.buffer&&t.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},a}();r.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(a,h,l,f,_){for(;_>=64;){for(var v=h[0],b=h[1],m=h[2],T=h[3],j=h[4],$=h[5],P=h[6],A=h[7],g=0;g<16;g++)a[g]=e.readUint32BE(l,f+4*g);for(g=16;g<64;g++){var w=a[g-2];a[g]=((c=(w>>>17|w<<15)^(w>>>19|w<<13)^w>>>10)+a[g-7]|0)+((p=((w=a[g-15])>>>7|w<<25)^(w>>>18|w<<14)^w>>>3)+a[g-16]|0)}for(g=0;g<64;g++){var c=(((j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7))+(j&$^~j&P)|0)+(A+(i[g]+a[g]|0)|0)|0,p=((v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10))+(v&b^v&m^b&m)|0;A=P,P=$,$=j,j=T+c|0,T=m,m=b,b=v,v=c+p|0}h[0]+=v,h[1]+=b,h[2]+=m,h[3]+=T,h[4]+=j,h[5]+=$,h[6]+=P,h[7]+=A,f+=64,_-=64}return f}r.hash=function s(a){var h=new n;h.update(a);var l=h.digest();return h.clean(),l}}(_n);var gi={};!function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=vr,t=wt;function n(g){const O=new Float64Array(16);if(g)for(let w=0;w<g.length;w++)O[w]=g[w];return O}r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;const i=new Uint8Array(32);i[0]=9;const o=n([56129,1]);function s(g){let O=1;for(let w=0;w<16;w++){let c=g[w]+O+65535;O=Math.floor(c/65536),g[w]=c-65536*O}g[0]+=O-1+37*(O-1)}function a(g,O,w){const c=~(w-1);for(let p=0;p<16;p++){const k=c&(g[p]^O[p]);g[p]^=k,O[p]^=k}}function f(g,O,w){for(let c=0;c<16;c++)g[c]=O[c]+w[c]}function _(g,O,w){for(let c=0;c<16;c++)g[c]=O[c]-w[c]}function v(g,O,w){let c,p,k=0,K=0,G=0,X=0,Z=0,d=0,S=0,M=0,D=0,C=0,L=0,z=0,H=0,ee=0,B=0,te=0,J=0,ce=0,R=0,N=0,x=0,u=0,E=0,V=0,W=0,pe=0,be=0,ge=0,Se=0,ze=0,Ce=0,me=w[0],_e=w[1],de=w[2],le=w[3],ue=w[4],ae=w[5],oe=w[6],re=w[7],he=w[8],ve=w[9],ie=w[10],we=w[11],Ee=w[12],Ie=w[13],Pe=w[14],Oe=w[15];c=O[0],k+=c*me,K+=c*_e,G+=c*de,X+=c*le,Z+=c*ue,d+=c*ae,S+=c*oe,M+=c*re,D+=c*he,C+=c*ve,L+=c*ie,z+=c*we,H+=c*Ee,ee+=c*Ie,B+=c*Pe,te+=c*Oe,c=O[1],K+=c*me,G+=c*_e,X+=c*de,Z+=c*le,d+=c*ue,S+=c*ae,M+=c*oe,D+=c*re,C+=c*he,L+=c*ve,z+=c*ie,H+=c*we,ee+=c*Ee,B+=c*Ie,te+=c*Pe,J+=c*Oe,c=O[2],G+=c*me,X+=c*_e,Z+=c*de,d+=c*le,S+=c*ue,M+=c*ae,D+=c*oe,C+=c*re,L+=c*he,z+=c*ve,H+=c*ie,ee+=c*we,B+=c*Ee,te+=c*Ie,J+=c*Pe,ce+=c*Oe,c=O[3],X+=c*me,Z+=c*_e,d+=c*de,S+=c*le,M+=c*ue,D+=c*ae,C+=c*oe,L+=c*re,z+=c*he,H+=c*ve,ee+=c*ie,B+=c*we,te+=c*Ee,J+=c*Ie,ce+=c*Pe,R+=c*Oe,c=O[4],Z+=c*me,d+=c*_e,S+=c*de,M+=c*le,D+=c*ue,C+=c*ae,L+=c*oe,z+=c*re,H+=c*he,ee+=c*ve,B+=c*ie,te+=c*we,J+=c*Ee,ce+=c*Ie,R+=c*Pe,N+=c*Oe,c=O[5],d+=c*me,S+=c*_e,M+=c*de,D+=c*le,C+=c*ue,L+=c*ae,z+=c*oe,H+=c*re,ee+=c*he,B+=c*ve,te+=c*ie,J+=c*we,ce+=c*Ee,R+=c*Ie,N+=c*Pe,x+=c*Oe,c=O[6],S+=c*me,M+=c*_e,D+=c*de,C+=c*le,L+=c*ue,z+=c*ae,H+=c*oe,ee+=c*re,B+=c*he,te+=c*ve,J+=c*ie,ce+=c*we,R+=c*Ee,N+=c*Ie,x+=c*Pe,u+=c*Oe,c=O[7],M+=c*me,D+=c*_e,C+=c*de,L+=c*le,z+=c*ue,H+=c*ae,ee+=c*oe,B+=c*re,te+=c*he,J+=c*ve,ce+=c*ie,R+=c*we,N+=c*Ee,x+=c*Ie,u+=c*Pe,E+=c*Oe,c=O[8],D+=c*me,C+=c*_e,L+=c*de,z+=c*le,H+=c*ue,ee+=c*ae,B+=c*oe,te+=c*re,J+=c*he,ce+=c*ve,R+=c*ie,N+=c*we,x+=c*Ee,u+=c*Ie,E+=c*Pe,V+=c*Oe,c=O[9],C+=c*me,L+=c*_e,z+=c*de,H+=c*le,ee+=c*ue,B+=c*ae,te+=c*oe,J+=c*re,ce+=c*he,R+=c*ve,N+=c*ie,x+=c*we,u+=c*Ee,E+=c*Ie,V+=c*Pe,W+=c*Oe,c=O[10],L+=c*me,z+=c*_e,H+=c*de,ee+=c*le,B+=c*ue,te+=c*ae,J+=c*oe,ce+=c*re,R+=c*he,N+=c*ve,x+=c*ie,u+=c*we,E+=c*Ee,V+=c*Ie,W+=c*Pe,pe+=c*Oe,c=O[11],z+=c*me,H+=c*_e,ee+=c*de,B+=c*le,te+=c*ue,J+=c*ae,ce+=c*oe,R+=c*re,N+=c*he,x+=c*ve,u+=c*ie,E+=c*we,V+=c*Ee,W+=c*Ie,pe+=c*Pe,be+=c*Oe,c=O[12],H+=c*me,ee+=c*_e,B+=c*de,te+=c*le,J+=c*ue,ce+=c*ae,R+=c*oe,N+=c*re,x+=c*he,u+=c*ve,E+=c*ie,V+=c*we,W+=c*Ee,pe+=c*Ie,be+=c*Pe,ge+=c*Oe,c=O[13],ee+=c*me,B+=c*_e,te+=c*de,J+=c*le,ce+=c*ue,R+=c*ae,N+=c*oe,x+=c*re,u+=c*he,E+=c*ve,V+=c*ie,W+=c*we,pe+=c*Ee,be+=c*Ie,ge+=c*Pe,Se+=c*Oe,c=O[14],B+=c*me,te+=c*_e,J+=c*de,ce+=c*le,R+=c*ue,N+=c*ae,x+=c*oe,u+=c*re,E+=c*he,V+=c*ve,W+=c*ie,pe+=c*we,be+=c*Ee,ge+=c*Ie,Se+=c*Pe,ze+=c*Oe,c=O[15],te+=c*me,J+=c*_e,ce+=c*de,R+=c*le,N+=c*ue,x+=c*ae,u+=c*oe,E+=c*re,V+=c*he,W+=c*ve,pe+=c*ie,be+=c*we,ge+=c*Ee,Se+=c*Ie,ze+=c*Pe,Ce+=c*Oe,k+=38*J,K+=38*ce,G+=38*R,X+=38*N,Z+=38*x,d+=38*u,S+=38*E,M+=38*V,D+=38*W,C+=38*pe,L+=38*be,z+=38*ge,H+=38*Se,ee+=38*ze,B+=38*Ce,p=1,c=k+p+65535,p=Math.floor(c/65536),k=c-65536*p,c=K+p+65535,p=Math.floor(c/65536),K=c-65536*p,c=G+p+65535,p=Math.floor(c/65536),G=c-65536*p,c=X+p+65535,p=Math.floor(c/65536),X=c-65536*p,c=Z+p+65535,p=Math.floor(c/65536),Z=c-65536*p,c=d+p+65535,p=Math.floor(c/65536),d=c-65536*p,c=S+p+65535,p=Math.floor(c/65536),S=c-65536*p,c=M+p+65535,p=Math.floor(c/65536),M=c-65536*p,c=D+p+65535,p=Math.floor(c/65536),D=c-65536*p,c=C+p+65535,p=Math.floor(c/65536),C=c-65536*p,c=L+p+65535,p=Math.floor(c/65536),L=c-65536*p,c=z+p+65535,p=Math.floor(c/65536),z=c-65536*p,c=H+p+65535,p=Math.floor(c/65536),H=c-65536*p,c=ee+p+65535,p=Math.floor(c/65536),ee=c-65536*p,c=B+p+65535,p=Math.floor(c/65536),B=c-65536*p,c=te+p+65535,p=Math.floor(c/65536),te=c-65536*p,k+=p-1+37*(p-1),p=1,c=k+p+65535,p=Math.floor(c/65536),k=c-65536*p,c=K+p+65535,p=Math.floor(c/65536),K=c-65536*p,c=G+p+65535,p=Math.floor(c/65536),G=c-65536*p,c=X+p+65535,p=Math.floor(c/65536),X=c-65536*p,c=Z+p+65535,p=Math.floor(c/65536),Z=c-65536*p,c=d+p+65535,p=Math.floor(c/65536),d=c-65536*p,c=S+p+65535,p=Math.floor(c/65536),S=c-65536*p,c=M+p+65535,p=Math.floor(c/65536),M=c-65536*p,c=D+p+65535,p=Math.floor(c/65536),D=c-65536*p,c=C+p+65535,p=Math.floor(c/65536),C=c-65536*p,c=L+p+65535,p=Math.floor(c/65536),L=c-65536*p,c=z+p+65535,p=Math.floor(c/65536),z=c-65536*p,c=H+p+65535,p=Math.floor(c/65536),H=c-65536*p,c=ee+p+65535,p=Math.floor(c/65536),ee=c-65536*p,c=B+p+65535,p=Math.floor(c/65536),B=c-65536*p,c=te+p+65535,p=Math.floor(c/65536),te=c-65536*p,k+=p-1+37*(p-1),g[0]=k,g[1]=K,g[2]=G,g[3]=X,g[4]=Z,g[5]=d,g[6]=S,g[7]=M,g[8]=D,g[9]=C,g[10]=L,g[11]=z,g[12]=H,g[13]=ee,g[14]=B,g[15]=te}function b(g,O){v(g,O,O)}function T(g,O){const w=new Uint8Array(32),c=new Float64Array(80),p=n(),k=n(),K=n(),G=n(),X=n(),Z=n();for(let D=0;D<31;D++)w[D]=g[D];w[31]=127&g[31]|64,w[0]&=248,function l(g,O){for(let w=0;w<16;w++)g[w]=O[2*w]+(O[2*w+1]<<8);g[15]&=32767}(c,O);for(let D=0;D<16;D++)k[D]=c[D];p[0]=G[0]=1;for(let D=254;D>=0;--D){const C=w[D>>>3]>>>(7&D)&1;a(p,k,C),a(K,G,C),f(X,p,K),_(p,p,K),f(K,k,G),_(k,k,G),b(G,X),b(Z,p),v(p,K,p),v(K,k,X),f(X,p,K),_(p,p,K),b(k,p),_(K,G,Z),v(p,K,o),f(p,p,G),v(K,K,p),v(p,G,Z),v(G,k,c),b(k,X),a(p,k,C),a(K,G,C)}for(let D=0;D<16;D++)c[D+16]=p[D],c[D+32]=K[D],c[D+48]=k[D],c[D+64]=G[D];const d=c.subarray(32),S=c.subarray(16);(function m(g,O){const w=n();for(let c=0;c<16;c++)w[c]=O[c];for(let c=253;c>=0;c--)b(w,w),2!==c&&4!==c&&v(w,w,O);for(let c=0;c<16;c++)g[c]=w[c]})(d,d),v(S,S,d);const M=new Uint8Array(32);return function h(g,O){const w=n(),c=n();for(let p=0;p<16;p++)c[p]=O[p];s(c),s(c),s(c);for(let p=0;p<2;p++){w[0]=c[0]-65517;for(let K=1;K<15;K++)w[K]=c[K]-65535-(w[K-1]>>16&1),w[K-1]&=65535;w[15]=c[15]-32767-(w[14]>>16&1);const k=w[15]>>16&1;w[14]&=65535,a(c,w,1-k)}for(let p=0;p<16;p++)g[2*p]=255&c[p],g[2*p+1]=c[p]>>8}(M,S),M}function j(g){return T(g,i)}function $(g){if(g.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const O=new Uint8Array(g);return{publicKey:j(O),secretKey:O}}r.scalarMult=T,r.scalarMultBase=j,r.generateKeyPairFromSeed=$,r.generateKeyPair=function P(g){const O=(0,e.randomBytes)(32,g),w=$(O);return(0,t.wipe)(O),w},r.sharedKey=function A(g,O,w=!1){if(g.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(O.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=T(g,O);if(w){let p=0;for(let k=0;k<c.length;k++)p|=c[k];if(0===p)throw new Error("X25519: invalid shared key")}return c}}(gi);var Us=function(r,e,t){if(t||2===arguments.length)for(var o,n=0,i=e.length;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},yp=function r(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},gp=function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},_p=function r(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"},vp=function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},mp=function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},wp=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ep=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Ds=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Sp(r){return r?ks(r):typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product?new mp:typeof navigator<"u"?ks(navigator.userAgent):function Pp(){return typeof process<"u"&&process.version?new gp(process.version.slice(1)):null}()}function ks(r){var e=function Op(r){return""!==r&&Ep.reduce(function(e,t){var n=t[0];if(e)return e;var o=t[1].exec(r);return!!o&&[n,o]},!1)}(r);if(!e)return null;var t=e[0],n=e[1];if("searchbot"===t)return new vp;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=Us(Us([],i,!0),function xp(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}(3-i.length),!0)):i=[];var o=i.join("."),s=function Ip(r){for(var e=0,t=Ds.length;e<t;e++){var n=Ds[e],i=n[0];if(n[1].exec(r))return i}return null}(r),a=wp.exec(r);return a&&a[1]?new _p(t,o,s,a[1]):new yp(t,o,s)}var Ne={};function ir(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}function mr(r){const e=ir(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.getLocalStorage=Ne.getLocalStorageOrThrow=Ne.getCrypto=Ne.getCryptoOrThrow=Hs=Ne.getLocation=Ne.getLocationOrThrow=_i=Ne.getNavigator=Ne.getNavigatorOrThrow=zs=Ne.getDocument=Ne.getDocumentOrThrow=Ne.getFromWindowOrThrow=Ne.getFromWindow=void 0,Ne.getFromWindow=ir,Ne.getFromWindowOrThrow=mr,Ne.getDocumentOrThrow=function Fp(){return mr("document")};var zs=Ne.getDocument=function Ap(){return ir("document")};Ne.getNavigatorOrThrow=function Np(){return mr("navigator")};var _i=Ne.getNavigator=function Rp(){return ir("navigator")};Ne.getLocationOrThrow=function Tp(){return mr("location")};var Hs=Ne.getLocation=function Lp(){return ir("location")};Ne.getCryptoOrThrow=function Cp(){return mr("crypto")},Ne.getCrypto=function jp(){return ir("crypto")},Ne.getLocalStorageOrThrow=function Up(){return mr("localStorage")},Ne.getLocalStorage=function Mp(){return ir("localStorage")};var vi={};Object.defineProperty(vi,"__esModule",{value:!0});var Ks=vi.getWindowMetadata=void 0;const $s=Ne;Ks=vi.getWindowMetadata=function Dp(){let r,e;try{r=$s.getDocumentOrThrow(),e=$s.getLocationOrThrow()}catch{return null}function n(...f){const _=r.getElementsByTagName("meta");for(let v=0;v<_.length;v++){const b=_[v],m=["itemprop","property","name"].map(T=>b.getAttribute(T)).filter(T=>!!T&&f.includes(T));if(m.length&&m){const T=b.getAttribute("content");if(T)return T}}return""}const s=function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=r.title),f}();return{description:function o(){return n("description","og:description","twitter:description","keywords")}(),url:e.origin,icons:function t(){const f=r.getElementsByTagName("link"),_=[];for(let v=0;v<f.length;v++){const b=f[v],m=b.getAttribute("rel");if(m&&m.toLowerCase().indexOf("icon")>-1){const T=b.getAttribute("href");if(T)if(-1===T.toLowerCase().indexOf("https:")&&-1===T.toLowerCase().indexOf("http:")&&0!==T.indexOf("//")){let j=e.protocol+"//"+e.host;if(0===T.indexOf("/"))j+=T;else{const $=e.pathname.split("/");$.pop(),j+=$.join("/")+"/"+T}_.push(j)}else 0===T.indexOf("//")?_.push(e.protocol+T):_.push(T)}}return _}(),name:s}};var Dr={},kp=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Bs="%[a-f0-9]{2}",Vs=new RegExp("("+Bs+")|([^%]+?)","gi"),qs=new RegExp("("+Bs+")+","gi");function mi(r,e){try{return[decodeURIComponent(r.join(""))]}catch{}if(1===r.length)return r;var t=r.slice(0,e=e||1),n=r.slice(e);return Array.prototype.concat.call([],mi(t),mi(n))}function zp(r){try{return decodeURIComponent(r)}catch{for(var e=r.match(Vs)||[],t=1;t<e.length;t++)e=(r=mi(e,t).join("")).match(Vs)||[];return r}}var Kp=function(r){if("string"!=typeof r)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return function Hp(r){for(var e={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},t=qs.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var n=zp(t[0]);n!==t[0]&&(e[t[0]]=n)}t=qs.exec(r)}e["%C2"]="\ufffd";for(var i=Object.keys(e),o=0;o<i.length;o++){var s=i[o];r=r.replace(new RegExp(s,"g"),e[s])}return r}(r)}},$p=(r,e)=>{if("string"!=typeof r||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[r];const t=r.indexOf(e);return-1===t?[r]:[r.slice(0,t),r.slice(t+e.length)]},Bp=function(r,e){for(var t={},n=Object.keys(r),i=Array.isArray(e),o=0;o<n.length;o++){var s=n[o],a=r[s];(i?-1!==e.indexOf(s):e(s,a,r))&&(t[s]=a)}return t};!function(r){const e=kp,t=Kp,n=$p,i=Bp,s=Symbol("encodeFragmentIdentifier");function l(P){if("string"!=typeof P||1!==P.length)throw new TypeError("arrayFormatSeparator must be single character string")}function f(P,A){return A.encode?A.strict?e(P):encodeURIComponent(P):P}function _(P,A){return A.decode?t(P):P}function v(P){return Array.isArray(P)?P.sort():"object"==typeof P?v(Object.keys(P)).sort((A,g)=>Number(A)-Number(g)).map(A=>P[A]):P}function b(P){const A=P.indexOf("#");return-1!==A&&(P=P.slice(0,A)),P}function T(P){const A=(P=b(P)).indexOf("?");return-1===A?"":P.slice(A+1)}function j(P,A){return A.parseNumbers&&!Number.isNaN(Number(P))&&"string"==typeof P&&""!==P.trim()?P=Number(P):A.parseBooleans&&null!==P&&("true"===P.toLowerCase()||"false"===P.toLowerCase())&&(P="true"===P.toLowerCase()),P}function $(P,A){l((A=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},A)).arrayFormatSeparator);const g=function h(P){let A;switch(P.arrayFormat){case"index":return(g,O,w)=>{A=/\[(\d*)\]$/.exec(g),g=g.replace(/\[\d*\]$/,""),A?(void 0===w[g]&&(w[g]={}),w[g][A[1]]=O):w[g]=O};case"bracket":return(g,O,w)=>{A=/(\[\])$/.exec(g),w[g=g.replace(/\[\]$/,"")]=A?void 0!==w[g]?[].concat(w[g],O):[O]:O};case"colon-list-separator":return(g,O,w)=>{A=/(:list)$/.exec(g),w[g=g.replace(/:list$/,"")]=A?void 0!==w[g]?[].concat(w[g],O):[O]:O};case"comma":case"separator":return(g,O,w)=>{const c="string"==typeof O&&O.includes(P.arrayFormatSeparator),p="string"==typeof O&&!c&&_(O,P).includes(P.arrayFormatSeparator);O=p?_(O,P):O;const k=c||p?O.split(P.arrayFormatSeparator).map(K=>_(K,P)):null===O?O:_(O,P);w[g]=k};case"bracket-separator":return(g,O,w)=>{const c=/(\[\])$/.test(g);if(g=g.replace(/\[\]$/,""),!c)return void(w[g]=O&&_(O,P));const p=null===O?[]:O.split(P.arrayFormatSeparator).map(k=>_(k,P));w[g]=void 0!==w[g]?[].concat(w[g],p):p};default:return(g,O,w)=>{w[g]=void 0!==w[g]?[].concat(w[g],O):O}}}(A),O=Object.create(null);if("string"!=typeof P||!(P=P.trim().replace(/^[?#&]/,"")))return O;for(const w of P.split("&")){if(""===w)continue;let[c,p]=n(A.decode?w.replace(/\+/g," "):w,"=");p=void 0===p?null:["comma","separator","bracket-separator"].includes(A.arrayFormat)?p:_(p,A),g(_(c,A),p,O)}for(const w of Object.keys(O)){const c=O[w];if("object"==typeof c&&null!==c)for(const p of Object.keys(c))c[p]=j(c[p],A);else O[w]=j(c,A)}return!1===A.sort?O:(!0===A.sort?Object.keys(O).sort():Object.keys(O).sort(A.sort)).reduce((w,c)=>{const p=O[c];return w[c]=Boolean(p)&&"object"==typeof p&&!Array.isArray(p)?v(p):p,w},Object.create(null))}r.extract=T,r.parse=$,r.stringify=(P,A)=>{if(!P)return"";l((A=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},A)).arrayFormatSeparator);const g=p=>A.skipNull&&(P=>null==P)(P[p])||A.skipEmptyString&&""===P[p],O=function a(P){switch(P.arrayFormat){case"index":return A=>(g,O)=>{const w=g.length;return void 0===O||P.skipNull&&null===O||P.skipEmptyString&&""===O?g:null===O?[...g,[f(A,P),"[",w,"]"].join("")]:[...g,[f(A,P),"[",f(w,P),"]=",f(O,P)].join("")]};case"bracket":return A=>(g,O)=>void 0===O||P.skipNull&&null===O||P.skipEmptyString&&""===O?g:null===O?[...g,[f(A,P),"[]"].join("")]:[...g,[f(A,P),"[]=",f(O,P)].join("")];case"colon-list-separator":return A=>(g,O)=>void 0===O||P.skipNull&&null===O||P.skipEmptyString&&""===O?g:null===O?[...g,[f(A,P),":list="].join("")]:[...g,[f(A,P),":list=",f(O,P)].join("")];case"comma":case"separator":case"bracket-separator":{const A="bracket-separator"===P.arrayFormat?"[]=":"=";return g=>(O,w)=>void 0===w||P.skipNull&&null===w||P.skipEmptyString&&""===w?O:(w=null===w?"":w,0===O.length?[[f(g,P),A,f(w,P)].join("")]:[[O,f(w,P)].join(P.arrayFormatSeparator)])}default:return A=>(g,O)=>void 0===O||P.skipNull&&null===O||P.skipEmptyString&&""===O?g:null===O?[...g,f(A,P)]:[...g,[f(A,P),"=",f(O,P)].join("")]}}(A),w={};for(const p of Object.keys(P))g(p)||(w[p]=P[p]);const c=Object.keys(w);return!1!==A.sort&&c.sort(A.sort),c.map(p=>{const k=P[p];return void 0===k?"":null===k?f(p,A):Array.isArray(k)?0===k.length&&"bracket-separator"===A.arrayFormat?f(p,A)+"[]":k.reduce(O(p),[]).join("&"):f(p,A)+"="+f(k,A)}).filter(p=>p.length>0).join("&")},r.parseUrl=(P,A)=>{A=Object.assign({decode:!0},A);const[g,O]=n(P,"#");return Object.assign({url:g.split("?")[0]||"",query:$(T(P),A)},A&&A.parseFragmentIdentifier&&O?{fragmentIdentifier:_(O,A)}:{})},r.stringifyUrl=(P,A)=>{A=Object.assign({encode:!0,strict:!0,[s]:!0},A);const g=b(P.url).split("?")[0]||"",O=r.extract(P.url),w=r.parse(O,{sort:!1}),c=Object.assign(w,P.query);let p=r.stringify(c,A);p&&(p=`?${p}`);let k=function m(P){let A="";const g=P.indexOf("#");return-1!==g&&(A=P.slice(g)),A}(P.url);return P.fragmentIdentifier&&(k=`#${A[s]?f(P.fragmentIdentifier,A):P.fragmentIdentifier}`),`${g}${p}${k}`},r.pick=(P,A,g)=>{g=Object.assign({parseFragmentIdentifier:!0,[s]:!1},g);const{url:O,query:w,fragmentIdentifier:c}=r.parseUrl(P,g);return r.stringifyUrl({url:O,query:i(w,A),fragmentIdentifier:c},g)},r.exclude=(P,A,g)=>{const O=Array.isArray(A)?w=>!A.includes(w):(w,c)=>!A(w,c);return r.pick(P,O,g)}}(Dr);const Vp={waku:{publish:"waku_publish",subscribe:"waku_subscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe"},irn:{publish:"irn_publish",subscribe:"irn_subscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe"},iridium:{publish:"iridium_publish",subscribe:"iridium_subscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe"}};function bi(r,e){return r.includes(":")?[r]:e.chains||[]}const mt="base16",wi="base64pad",Ei="utf8";function Ii(){return _t(vr.randomBytes(32),mt)}function vn(r){return _t(_n.hash(vt(r,Ei)),mt)}function kr(r){return Number(_t(r,"base10"))}function Xp(r){const e=function Jp(r){return vt(`${r}`,"base10")}(typeof r.type<"u"?r.type:0);if(1===kr(e)&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?vt(r.senderPublicKey,mt):void 0,n=typeof r.iv<"u"?vt(r.iv,mt):vr.randomBytes(12);return function Qp(r){if(1===kr(r.type)){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return _t(ci([r.type,r.senderPublicKey,r.iv,r.sealed]),wi)}return _t(ci([r.type,r.iv,r.sealed]),wi)}({type:e,sealed:new pi.ChaCha20Poly1305(vt(r.symKey,mt)).seal(n,vt(r.message,Ei)),iv:n,senderPublicKey:t})}function Pi(r){const e=vt(r,wi),t=e.slice(0,1);if(1===kr(t)){const a=33,h=a+12,l=e.slice(1,a),f=e.slice(a,h);return{type:t,sealed:e.slice(h),iv:f,senderPublicKey:l}}const o=e.slice(1,13);return{type:t,sealed:e.slice(13),iv:o}}function Js(r){const e=r?.type||0;if(1===e){if(typeof r?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function Xs(r){return 1===r.type&&"string"==typeof r.senderPublicKey&&"string"==typeof r.receiverPublicKey}var td=Object.defineProperty,Zs=Object.getOwnPropertySymbols,rd=Object.prototype.hasOwnProperty,nd=Object.prototype.propertyIsEnumerable,Qs=(r,e,t)=>e in r?td(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ea=(r,e)=>{for(var t in e||(e={}))rd.call(e,t)&&Qs(r,t,e[t]);if(Zs)for(var t of Zs(e))nd.call(e,t)&&Qs(r,t,e[t]);return r};const zr_reactNative="react-native",zr_node="node",zr_browser="browser",zr_unknown="unknown",od="js";function ta(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function cd(){return function sd(){return!zs()&&!!_i()&&"ReactNative"===navigator.product}()?zr_reactNative:ta()?zr_node:function ad(){return!ta()&&!!_i()}()?zr_browser:zr_unknown}function pd(r,e,t){const n=function hd(){const r=Sp();if(null===r)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return"browser"===r.type?[e,r.name,r.version].join("-"):[e,r.version].join("-")}(),i=function fd(){var r;const e=cd();return e===zr_browser?[e,(null==(r=Hs())?void 0:r.host)||"unknown"].join(":"):e}();return[[r,e].join("-"),[od,t].join("-"),n,i].join("/")}function dd({protocol:r,version:e,relayUrl:t,sdkVersion:n,auth:i,projectId:o}){const s=t.split("?"),a=pd(r,e,n),l=function ud(r,e){let t=Dr.parse(r);return t=ea(ea({},t),e),Dr.stringify(t)}(s[1]||"",{auth:i,ua:a,projectId:o});return s[0]+"?"+l}function qt(r,e){return r.filter(t=>e.includes(t)).length===r.length}function ra(r){return Object.fromEntries(r.entries())}function na(r){return new Map(Object.entries(r))}function sr(r){const e=Q.toMiliseconds(r||Q.FIVE_MINUTES);let t,n,i;return{resolve:o=>{i&&t&&(clearTimeout(i),t(o))},reject:o=>{i&&n&&(clearTimeout(i),n(o))},done:()=>new Promise((o,s)=>{i=setTimeout(s,e),t=o,n=s})}}function ia(r,e){return new Promise(function(){var t=I(function*(n,i){const o=setTimeout(()=>i(),e),s=yield r;clearTimeout(o),n(s)});return function(n,i){return t.apply(this,arguments)}}())}function oa(r,e){if("string"==typeof e&&e.startsWith(`${r}:`))return e;if("topic"===r.toLowerCase()){if("string"!=typeof e)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}if("id"===r.toLowerCase()){if("number"!=typeof e)throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function sa(r){const[e,t]=r.split(":"),n={id:void 0,topic:void 0};if("topic"===e&&"string"==typeof t)n.topic=t;else{if("id"!==e||!Number.isInteger(Number(t)))throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);n.id=Number(t)}return n}function Ct(r,e){return Q.fromMiliseconds((e||Date.now())+Q.toMiliseconds(r))}function Gt(r){return Date.now()>=Q.toMiliseconds(r)}function ke(r,e){return`${r}${e?`:${e}`:""}`}function xi(r){return r?.relay||{protocol:"irn"}}function Fi(r){const e=Vp[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var vd=Object.defineProperty,aa=Object.getOwnPropertySymbols,md=Object.prototype.hasOwnProperty,bd=Object.prototype.propertyIsEnumerable,ca=(r,e,t)=>e in r?vd(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;function Ed(r,e="-"){const t={},n="relay"+e;return Object.keys(r).forEach(i=>{if(i.startsWith(n)){const o=i.replace(n,"");t[o]=r[i]}}),t}function Id(r){return`${r.protocol}:${r.topic}@${r.version}?`+Dr.stringify(((r,e)=>{for(var t in e||(e={}))md.call(e,t)&&ca(r,t,e[t]);if(aa)for(var t of aa(e))bd.call(e,t)&&ca(r,t,e[t]);return r})({symKey:r.symKey},function Od(r,e="-"){const n={};return Object.keys(r).forEach(i=>{r[i]&&(n["relay"+e+i]=r[i])}),n}(r.relay)))}function Hr(r){const e=[];return r.forEach(t=>{const[n,i]=t.split(":");e.push(`${n}:${i}`)}),e}const Nd={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Rd={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function q(r,e){const{message:t,code:n}=Rd[r];return{message:e?`${t} ${e}`:t,code:n}}function He(r,e){const{message:t,code:n}=Nd[r];return{message:e?`${t} ${e}`:t,code:n}}function Kr(r,e){return!!Array.isArray(r)&&(!(typeof e<"u"&&r.length)||r.every(e))}function $r(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function ft(r){return typeof r>"u"}function We(r,e){return!(!e||!ft(r))||"string"==typeof r&&Boolean(r.trim().length)}function Ai(r,e){return!(!e||!ft(r))||"number"==typeof r&&!isNaN(r)}function Ni(r){return!(!We(r,!1)||!r.includes(":"))&&2===r.split(":").length}function ua(r){let e=!0;return Kr(r)?r.length&&(e=r.every(t=>We(t,!1))):e=!1,e}function kd(r,e){let t=null;return Object.entries(r).forEach(([n,i])=>{if(t)return;const o=function Dd(r,e,t){let n=null;return Kr(e)?e.forEach(i=>{n||(!Ni(i)||!i.includes(r))&&(n=He("UNSUPPORTED_CHAINS",`${t}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):n=He("UNSUPPORTED_CHAINS",`${t}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),n}(n,bi(n,i),`${e} requiredNamespace`);o&&(t=o)}),t}function zd(r,e){let t=null;return Kr(r)?r.forEach(n=>{t||function Ld(r){if(We(r,!1)&&r.includes(":")){const e=r.split(":");if(3===e.length){const t=e[0]+":"+e[1];return!!e[2]&&Ni(t)}}return!1}(n)||(t=He("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):t=He("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function la(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;const i=function Kd(r,e){let t=null;return ua(r?.methods)?ua(r?.events)||(t=He("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=He("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}(n,`${e}, namespace`);i&&(t=i)}),t}function mn(r,e){let t=null;if(r&&$r(r)){const n=la(r,e);n&&(t=n);const i=function Hd(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;const i=zd(n?.accounts,`${e} namespace`);i&&(t=i)}),t}(r,e);i&&(t=i)}else t=q("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function ha(r){return We(r.protocol,!0)}function bt(r){return typeof r<"u"&&null!==typeof r}function fa(r,e){return!(!Ni(e)||!function Pd(r){const e=[];return Object.values(r).forEach(t=>{e.push(...Hr(t.accounts))}),e}(r).includes(e))}function Jd(r,e,t){return!!We(t,!1)&&function xd(r,e){const t=[];return Object.values(r).forEach(n=>{Hr(n.accounts).includes(e)&&t.push(...n.methods)}),t}(r,e).includes(t)}function Xd(r,e,t){return!!We(t,!1)&&function Fd(r,e){const t=[];return Object.values(r).forEach(n=>{Hr(n.accounts).includes(e)&&t.push(...n.events)}),t}(r,e).includes(t)}function Ri(r,e,t,n){let i=null;const o=Object.keys(r);return qt(o,Object.keys(e))?o.forEach(a=>{if(i)return;const h=Hr(e[a].accounts);qt(bi(a,r[a]),h)?qt(r[a].methods,e[a].methods)?qt(r[a].events,e[a].events)||(i=q("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${a}`)):i=q("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${a}`):i=q("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace chains for ${a}`)}):i=q("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy ${n}`),i}const pa="INTERNAL_ERROR",Ti="SERVER_ERROR",ny=[-32700,-32600,-32601,-32602,-32603],Br={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[pa]:{code:-32603,message:"Internal error"},[Ti]:{code:-32e3,message:"Server error"}},da=Ti;function ya(r){return Object.keys(Br).includes(r)?Br[r]:Br[da]}function ga(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var _a={},Li=function(r,e){return(Li=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};var Ci=function(){return Ci=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Ci.apply(this,arguments)};function ji(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function va(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var i,s,n=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Vr(r){return this instanceof Vr?(this.v=r,this):new Vr(r)}var ma,Py=Dt(Object.freeze({__proto__:null,__extends:function sy(r,e){function t(){this.constructor=r}Li(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},get __assign(){return Ci},__rest:function ay(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t},__decorate:function cy(r,e,t,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},__param:function uy(r,e){return function(t,n){e(t,n,r)}},__metadata:function ly(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)},__awaiter:function hy(r,e,t,n){return new(t||(t=Promise))(function(o,s){function a(f){try{l(n.next(f))}catch(_){s(_)}}function h(f){try{l(n.throw(f))}catch(_){s(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(f.value).then(a,h)}l((n=n.apply(r,e||[])).next())})},__generator:function fy(r,e){var n,i,o,s,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(f){return function h(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(f){l=[6,f],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},__createBinding:function py(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]},__exportStar:function dy(r,e){for(var t in r)"default"!==t&&!e.hasOwnProperty(t)&&(e[t]=r[t])},__values:ji,__read:va,__spread:function yy(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(va(arguments[e]));return r},__spreadArrays:function gy(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var n=Array(r),i=0;for(e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Vr,__asyncGenerator:function _y(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=t.apply(r,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(v){n[v]&&(i[v]=function(b){return new Promise(function(m,T){o.push([v,b,m,T])>1||a(v,b)})})}function a(v,b){try{!function h(v){v.value instanceof Vr?Promise.resolve(v.value.v).then(l,f):_(o[0][2],v)}(n[v](b))}catch(m){_(o[0][3],m)}}function l(v){a("next",v)}function f(v){a("throw",v)}function _(v,b){v(b),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function vy(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(s){return(t=!t)?{value:Vr(r[i](s)),done:"return"===i}:o?o(s):s}:o}},__asyncValues:function my(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=ji(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,h){!function i(o,s,a,h){Promise.resolve(h).then(function(l){o({value:l,done:a})},s)}(a,h,(s=r[o](s)).done,s.value)})}}},__makeTemplateObject:function by(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r},__importStar:function wy(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault:function Ey(r){return r&&r.__esModule?r:{default:r}},__classPrivateFieldGet:function Sy(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)},__classPrivateFieldSet:function Oy(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}})),kt={};var ba,zt={};function bn(r,e,t){return{id:t||Date.now()*Math.pow(10,3)+Math.floor(Math.random()*Math.pow(10,3)),jsonrpc:"2.0",method:r,params:e}}function Ui(r,e){return{id:r,jsonrpc:"2.0",result:e}}function wn(r,e,t){return{id:r,jsonrpc:"2.0",error:Ny(e,t)}}function Ny(r,e){return typeof r>"u"?ya(pa):("string"==typeof r&&(r=Object.assign(Object.assign({},ya(Ti)),{message:r})),typeof e<"u"&&(r.data=e),function iy(r){return ny.includes(r)}(r.code)&&(r=function oy(r){return Object.values(Br).find(t=>t.code===r)||Br[da]}(r.code)),r)}!function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Py;e.__exportStar(function xy(){if(ma)return kt;function r(){return dt?.crypto||dt?.msCrypto||{}}function e(){const n=r();return n.subtle||n.webkitSubtle}return ma=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.isBrowserCryptoAvailable=kt.getSubtleCrypto=kt.getBrowerCrypto=void 0,kt.getBrowerCrypto=r,kt.getSubtleCrypto=e,kt.isBrowserCryptoAvailable=function t(){return!!r()&&!!e()},kt}(),r),e.__exportStar(function Fy(){if(ba)return zt;function r(){return typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product}function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}return ba=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.isBrowser=zt.isNode=zt.isReactNative=void 0,zt.isReactNative=r,zt.isNode=e,zt.isBrowser=function t(){return!r()&&!e()},zt}(),r)}(_a);function wa(r,e){const t=function Uy(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(e&&e.length)return e[0]}(r);return!(typeof t>"u")&&new RegExp(e).test(t)}function Ea(r){return wa(r,"^https?:")}function Sa(r){return wa(r,"^wss?:")}function My(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function Oa(r){return"object"==typeof r&&"id"in r&&"jsonrpc"in r&&"2.0"===r.jsonrpc}function Mi(r){return Oa(r)&&"method"in r}function Di(r){return Oa(r)&&(Ht(r)||At(r))}function Ht(r){return"result"in r}function At(r){return"error"in r}class qr extends class Ly extends class Ty extends class Ry{}{constructor(){super()}}{constructor(e){super()}}{constructor(e){super(e),this.events=new ct.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(e=this.connection){var t=this;return I(function*(){yield t.open(e)})()}disconnect(){var e=this;return I(function*(){yield e.close()})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,t){var n=this;return I(function*(){return n.requestStrict(bn(e.method,e.params||[]),t)})()}requestStrict(e,t){var n=this;return I(function*(){return new Promise(function(){var i=I(function*(o,s){if(!n.connection.connected)try{yield n.open()}catch(a){s(a)}n.events.on(`${e.id}`,a=>{At(a)?s(a.error):o(a.result)});try{yield n.connection.send(e,t)}catch(a){s(a)}});return function(o,s){return i.apply(this,arguments)}}())})()}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Di(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}open(e=this.connection){var t=this;return I(function*(){t.connection===e&&t.connection.connected||(t.connection.connected&&t.close(),"string"==typeof e&&(yield t.connection.open(e),e=t.connection),t.connection=t.setConnection(e),yield t.connection.open(),t.registerEventListeners(),t.events.emit("connect"))})()}close(){var e=this;return I(function*(){yield e.connection.close()})()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",()=>this.events.emit("disconnect")),this.connection.on("error",e=>this.events.emit("error",e)),this.hasRegisteredEventListeners=!0)}}const zy=typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:er(4813);class Hy{constructor(e){if(this.url=e,this.events=new ct.exports.EventEmitter,this.registering=!1,!Sa(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(e=this.url){var t=this;return I(function*(){yield t.register(e)})()}close(){var e=this;return I(function*(){return new Promise((t,n)=>{typeof e.socket>"u"?n(new Error("Connection already closed")):(e.socket.onclose=()=>{e.onClose(),t()},e.socket.close())})})()}send(e,t){var n=this;return I(function*(){typeof n.socket>"u"&&(n.socket=yield n.register());try{n.socket.send(jr(e))}catch(i){n.onError(e.id,i)}})()}register(e=this.url){if(!Sa(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,i)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),i(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,n)=>{const i=_a.isReactNative()?void 0:{rejectUnauthorized:!My(e)},o=new zy(e,[],i);typeof window<"u"?o.onerror=s=>{n(this.emitError(s.error))}:o.on("error",s=>{n(this.emitError(s))}),o.onopen=()=>{this.onOpen(o),t(o)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=()=>this.onClose(),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(){this.socket=void 0,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?ri(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),o=wn(e,n.message||n.toString());this.events.emit("payload",o)}parseError(e,t=this.url){return ga(e,t,"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",t),t}}var ki={exports:{}};!function(r,e){var n="__lodash_hash_undefined__",s=9007199254740991,a="[object Arguments]",h="[object Array]",f="[object Boolean]",_="[object Date]",v="[object Error]",b="[object Function]",T="[object Map]",j="[object Number]",P="[object Object]",A="[object Promise]",O="[object RegExp]",w="[object Set]",c="[object String]",p="[object Symbol]",K="[object WeakMap]",G="[object ArrayBuffer]",X="[object DataView]",B=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,J={};J["[object Float32Array]"]=J["[object Float64Array]"]=J["[object Int8Array]"]=J["[object Int16Array]"]=J["[object Int32Array]"]=J["[object Uint8Array]"]=J["[object Uint8ClampedArray]"]=J["[object Uint16Array]"]=J["[object Uint32Array]"]=!0,J[a]=J[h]=J[G]=J[f]=J[X]=J[_]=J[v]=J[b]=J[T]=J[j]=J[P]=J[O]=J[w]=J[c]=J[K]=!1;var ce="object"==typeof dt&&dt&&dt.Object===Object&&dt,R="object"==typeof self&&self&&self.Object===Object&&self,N=ce||R||Function("return this")(),x=e&&!e.nodeType&&e,u=x&&r&&!r.nodeType&&r,E=u&&u.exports===x,V=E&&ce.process,W=function(){try{return V&&V.binding&&V.binding("util")}catch{}}(),pe=W&&W.isTypedArray;function Se(y,F){for(var U=-1,Y=null==y?0:y.length;++U<Y;)if(F(y[U],U,y))return!0;return!1}function me(y,F){return y.has(F)}function de(y){var F=-1,U=Array(y.size);return y.forEach(function(Y,Re){U[++F]=[Re,Y]}),U}function ue(y){var F=-1,U=Array(y.size);return y.forEach(function(Y){U[++F]=Y}),U}var y,ae=Array.prototype,re=Object.prototype,he=N["__core-js_shared__"],ve=Function.prototype.toString,ie=re.hasOwnProperty,we=(y=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||""))?"Symbol(src)_1."+y:"",Ee=re.toString,Ie=RegExp("^"+ve.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pe=E?N.Buffer:void 0,Oe=N.Symbol,Nt=N.Uint8Array,Mt=re.propertyIsEnumerable,Jt=ae.splice,Et=Oe?Oe.toStringTag:void 0,ar=Object.getOwnPropertySymbols,Xr=Pe?Pe.isBuffer:void 0,Rn=function le(y,F){return function(U){return y(F(U))}}(Object.keys,Object),Ke=br(N,"DataView"),je=br(N,"Map"),$e=br(N,"Promise"),Be=br(N,"Set"),Ve=br(N,"WeakMap"),Ue=br(Object,"create"),Ye=ur(Ke),Je=ur(je),Xe=ur($e),Ze=ur(Be),Qe=ur(Ve),Ge=Oe?Oe.prototype:void 0,qe=Ge?Ge.valueOf:void 0;function Te(y){var F=-1,U=null==y?0:y.length;for(this.clear();++F<U;){var Y=y[F];this.set(Y[0],Y[1])}}function Kt(y){var F=-1,U=null==y?0:y.length;for(this.clear();++F<U;){var Y=y[F];this.set(Y[0],Y[1])}}function cr(y){var F=-1,U=null==y?0:y.length;for(this.clear();++F<U;){var Y=y[F];this.set(Y[0],Y[1])}}function Tn(y){var F=-1,U=null==y?0:y.length;for(this.__data__=new cr;++F<U;)this.add(y[F])}function Xt(y){var F=this.__data__=new Kt(y);this.size=F.size}function a0(y,F){var U=jn(y),Y=!U&&E0(y),Re=!U&&!Y&&eo(y),se=!U&&!Y&&!Re&&Ic(y),Me=U||Y||Re||se,rt=Me?function ze(y,F){for(var U=-1,Y=Array(y);++U<y;)Y[U]=F(U);return Y}(y.length,String):[],st=rt.length;for(var Le in y)(F||ie.call(y,Le))&&(!Me||!("length"==Le||Re&&("offset"==Le||"parent"==Le)||se&&("buffer"==Le||"byteLength"==Le||"byteOffset"==Le)||_0(Le,st)))&&rt.push(Le);return rt}function Ln(y,F){for(var U=y.length;U--;)if(wc(y[U][0],F))return U;return-1}function Zr(y){return null==y?void 0===y?"[object Undefined]":"[object Null]":Et&&Et in Object(y)?function y0(y){var F=ie.call(y,Et),U=y[Et];try{y[Et]=void 0;var Y=!0}catch{}var Re=Ee.call(y);return Y&&(F?y[Et]=U:delete y[Et]),Re}(y):function w0(y){return Ee.call(y)}(y)}function _c(y){return Qr(y)&&Zr(y)==a}function vc(y,F,U,Y,Re){return y===F||(null==y||null==F||!Qr(y)&&!Qr(F)?y!=y&&F!=F:function u0(y,F,U,Y,Re,se){var Me=jn(y),rt=jn(F),st=Me?h:Zt(y),Le=rt?h:Zt(F),St=(st=st==a?P:st)==P,Rt=(Le=Le==a?P:Le)==P,lt=st==Le;if(lt&&eo(y)){if(!eo(F))return!1;Me=!0,St=!1}if(lt&&!St)return se||(se=new Xt),Me||Ic(y)?mc(y,F,U,Y,Re,se):function p0(y,F,U,Y,Re,se,Me){switch(U){case X:if(y.byteLength!=F.byteLength||y.byteOffset!=F.byteOffset)return!1;y=y.buffer,F=F.buffer;case G:return!(y.byteLength!=F.byteLength||!se(new Nt(y),new Nt(F)));case f:case _:case j:return wc(+y,+F);case v:return y.name==F.name&&y.message==F.message;case O:case c:return y==F+"";case T:var rt=de;case w:if(rt||(rt=ue),y.size!=F.size&&!(1&Y))return!1;var Le=Me.get(y);if(Le)return Le==F;Y|=2,Me.set(y,F);var St=mc(rt(y),rt(F),Y,Re,se,Me);return Me.delete(y),St;case p:if(qe)return qe.call(y)==qe.call(F)}return!1}(y,F,st,U,Y,Re,se);if(!(1&U)){var xt=St&&ie.call(y,"__wrapped__"),Ft=Rt&&ie.call(F,"__wrapped__");if(xt||Ft){var Qt=xt?y.value():y,$t=Ft?F.value():F;return se||(se=new Xt),Re(Qt,$t,U,Y,se)}}return!!lt&&(se||(se=new Xt),function d0(y,F,U,Y,Re,se){var Me=1&U,rt=bc(y),st=rt.length;if(st!=bc(F).length&&!Me)return!1;for(var Rt=st;Rt--;){var lt=rt[Rt];if(!(Me?lt in F:ie.call(F,lt)))return!1}var xt=se.get(y);if(xt&&se.get(F))return xt==F;var Ft=!0;se.set(y,F),se.set(F,y);for(var Qt=Me;++Rt<st;){var $t=y[lt=rt[Rt]],lr=F[lt];if(Y)var Pc=Me?Y(lr,$t,lt,F,y,se):Y($t,lr,lt,y,F,se);if(!(void 0===Pc?$t===lr||Re($t,lr,U,Y,se):Pc)){Ft=!1;break}Qt||(Qt="constructor"==lt)}if(Ft&&!Qt){var Un=y.constructor,Mn=F.constructor;Un!=Mn&&"constructor"in y&&"constructor"in F&&!("function"==typeof Un&&Un instanceof Un&&"function"==typeof Mn&&Mn instanceof Mn)&&(Ft=!1)}return se.delete(y),se.delete(F),Ft}(y,F,U,Y,Re,se))}(y,F,U,Y,vc,Re))}function l0(y){return!(!Oc(y)||function m0(y){return!!we&&we in y}(y))&&(Ec(y)?Ie:B).test(ur(y))}function f0(y){if(!function b0(y){var F=y&&y.constructor;return y===("function"==typeof F&&F.prototype||re)}(y))return Rn(y);var F=[];for(var U in Object(y))ie.call(y,U)&&"constructor"!=U&&F.push(U);return F}function mc(y,F,U,Y,Re,se){var Me=1&U,rt=y.length,st=F.length;if(rt!=st&&!(Me&&st>rt))return!1;var Le=se.get(y);if(Le&&se.get(F))return Le==F;var St=-1,Rt=!0,lt=2&U?new Tn:void 0;for(se.set(y,F),se.set(F,y);++St<rt;){var xt=y[St],Ft=F[St];if(Y)var Qt=Me?Y(Ft,xt,St,F,y,se):Y(xt,Ft,St,y,F,se);if(void 0!==Qt){if(Qt)continue;Rt=!1;break}if(lt){if(!Se(F,function($t,lr){if(!me(lt,lr)&&(xt===$t||Re(xt,$t,U,Y,se)))return lt.push(lr)})){Rt=!1;break}}else if(xt!==Ft&&!Re(xt,Ft,U,Y,se)){Rt=!1;break}}return se.delete(y),se.delete(F),Rt}function bc(y){return function c0(y,F,U){var Y=F(y);return jn(y)?Y:function ge(y,F){for(var U=-1,Y=F.length,Re=y.length;++U<Y;)y[Re+U]=F[U];return y}(Y,U(y))}(y,I0,g0)}function Cn(y,F){var U=y.__data__;return function v0(y){var F=typeof y;return"string"==F||"number"==F||"symbol"==F||"boolean"==F?"__proto__"!==y:null===y}(F)?U["string"==typeof F?"string":"hash"]:U.map}function br(y,F){var U=function _e(y,F){return y?.[F]}(y,F);return l0(U)?U:void 0}Te.prototype.clear=function et(){this.__data__=Ue?Ue(null):{},this.size=0},Te.prototype.delete=function tt(y){var F=this.has(y)&&delete this.__data__[y];return this.size-=F?1:0,F},Te.prototype.get=function H_(y){var F=this.__data__;if(Ue){var U=F[y];return U===n?void 0:U}return ie.call(F,y)?F[y]:void 0},Te.prototype.has=function K_(y){var F=this.__data__;return Ue?void 0!==F[y]:ie.call(F,y)},Te.prototype.set=function $_(y,F){var U=this.__data__;return this.size+=this.has(y)?0:1,U[y]=Ue&&void 0===F?n:F,this},Kt.prototype.clear=function B_(){this.__data__=[],this.size=0},Kt.prototype.delete=function V_(y){var F=this.__data__,U=Ln(F,y);return!(U<0||(U==F.length-1?F.pop():Jt.call(F,U,1),--this.size,0))},Kt.prototype.get=function q_(y){var F=this.__data__,U=Ln(F,y);return U<0?void 0:F[U][1]},Kt.prototype.has=function G_(y){return Ln(this.__data__,y)>-1},Kt.prototype.set=function W_(y,F){var U=this.__data__,Y=Ln(U,y);return Y<0?(++this.size,U.push([y,F])):U[Y][1]=F,this},cr.prototype.clear=function Y_(){this.size=0,this.__data__={hash:new Te,map:new(je||Kt),string:new Te}},cr.prototype.delete=function J_(y){var F=Cn(this,y).delete(y);return this.size-=F?1:0,F},cr.prototype.get=function X_(y){return Cn(this,y).get(y)},cr.prototype.has=function Z_(y){return Cn(this,y).has(y)},cr.prototype.set=function Q_(y,F){var U=Cn(this,y),Y=U.size;return U.set(y,F),this.size+=U.size==Y?0:1,this},Tn.prototype.add=Tn.prototype.push=function e0(y){return this.__data__.set(y,n),this},Tn.prototype.has=function t0(y){return this.__data__.has(y)},Xt.prototype.clear=function r0(){this.__data__=new Kt,this.size=0},Xt.prototype.delete=function n0(y){var F=this.__data__,U=F.delete(y);return this.size=F.size,U},Xt.prototype.get=function i0(y){return this.__data__.get(y)},Xt.prototype.has=function o0(y){return this.__data__.has(y)},Xt.prototype.set=function s0(y,F){var U=this.__data__;if(U instanceof Kt){var Y=U.__data__;if(!je||Y.length<199)return Y.push([y,F]),this.size=++U.size,this;U=this.__data__=new cr(Y)}return U.set(y,F),this.size=U.size,this};var g0=ar?function(y){return null==y?[]:(y=Object(y),function be(y,F){for(var U=-1,Y=null==y?0:y.length,Re=0,se=[];++U<Y;){var Me=y[U];F(Me,U,y)&&(se[Re++]=Me)}return se}(ar(y),function(F){return Mt.call(y,F)}))}:function P0(){return[]},Zt=Zr;function _0(y,F){return!!(F=F??s)&&("number"==typeof y||te.test(y))&&y>-1&&y%1==0&&y<F}function ur(y){if(null!=y){try{return ve.call(y)}catch{}try{return y+""}catch{}}return""}function wc(y,F){return y===F||y!=y&&F!=F}(Ke&&Zt(new Ke(new ArrayBuffer(1)))!=X||je&&Zt(new je)!=T||$e&&Zt($e.resolve())!=A||Be&&Zt(new Be)!=w||Ve&&Zt(new Ve)!=K)&&(Zt=function(y){var F=Zr(y),U=F==P?y.constructor:void 0,Y=U?ur(U):"";if(Y)switch(Y){case Ye:return X;case Je:return T;case Xe:return A;case Ze:return w;case Qe:return K}return F});var E0=_c(function(){return arguments}())?_c:function(y){return Qr(y)&&ie.call(y,"callee")&&!Mt.call(y,"callee")},jn=Array.isArray;var eo=Xr||function x0(){return!1};function Ec(y){if(!Oc(y))return!1;var F=Zr(y);return F==b||"[object GeneratorFunction]"==F||"[object AsyncFunction]"==F||"[object Proxy]"==F}function Sc(y){return"number"==typeof y&&y>-1&&y%1==0&&y<=s}function Oc(y){var F=typeof y;return null!=y&&("object"==F||"function"==F)}function Qr(y){return null!=y&&"object"==typeof y}var Ic=pe?function Ce(y){return function(F){return y(F)}}(pe):function h0(y){return Qr(y)&&Sc(y.length)&&!!J[Zr(y)]};function I0(y){return function S0(y){return null!=y&&Sc(y.length)&&!Ec(y)}(y)?a0(y):f0(y)}r.exports=function O0(y,F){return vc(y,F)}}(ki,ki.exports);var Ky=ki.exports,$y=Object.defineProperty,Pa=Object.getOwnPropertySymbols,By=Object.prototype.hasOwnProperty,Vy=Object.prototype.propertyIsEnumerable,xa=(r,e,t)=>e in r?$y(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pt=(r,e)=>{for(var t in e||(e={}))By.call(e,t)&&xa(r,t,e[t]);if(Pa)for(var t of Pa(e))Vy.call(e,t)&&xa(r,t,e[t]);return r};var Wy=function qy(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(255!==t[s])throw new TypeError(o+" is ambiguous");t[s]=i}var a=r.length,h=r.charAt(0),l=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function v(m){if("string"!=typeof m)throw new TypeError("Expected String");if(0===m.length)return new Uint8Array;var T=0;if(" "!==m[T]){for(var j=0,$=0;m[T]===h;)j++,T++;for(var P=(m.length-T)*l+1>>>0,A=new Uint8Array(P);m[T];){var g=t[m.charCodeAt(T)];if(255===g)return;for(var O=0,w=P-1;(0!==g||O<$)&&-1!==w;w--,O++)A[w]=(g+=a*A[w]>>>0)%256>>>0,g=g/256>>>0;if(0!==g)throw new Error("Non-zero carry");$=O,T++}if(" "!==m[T]){for(var c=P-$;c!==P&&0===A[c];)c++;for(var p=new Uint8Array(j+(P-c)),k=j;c!==P;)p[k++]=A[c++];return p}}}return{encode:function _(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===m.length)return"";for(var T=0,j=0,$=0,P=m.length;$!==P&&0===m[$];)$++,T++;for(var A=(P-$)*f+1>>>0,g=new Uint8Array(A);$!==P;){for(var O=m[$],w=0,c=A-1;(0!==O||w<j)&&-1!==c;c--,w++)g[c]=(O+=256*g[c]>>>0)%a>>>0,O=O/a>>>0;if(0!==O)throw new Error("Non-zero carry");j=w,$++}for(var p=A-j;p!==A&&0===g[p];)p++;for(var k=h.repeat(T);p<A;++p)k+=r.charAt(g[p]);return k},decodeUnsafe:v,decode:function b(m){var T=v(m);if(T)return T;throw new Error(`Non-${e} character`)}}};const Fa=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};class Xy{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Zy{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Aa(this,e)}}class Qy{constructor(e){this.decoders=e}or(e){return Aa(this,e)}decode(e){const n=this.decoders[e[0]];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Aa=(r,e)=>new Qy(pt(pt({},r.decoders||{[r.prefix]:r}),e.decoders||{[e.prefix]:e}));class eg{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Xy(e,t,n),this.decoder=new Zy(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const En=({name:r,prefix:e,encode:t,decode:n})=>new eg(r,e,t,n),Gr=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=Wy(t,e);return En({prefix:r,name:e,encode:n,decode:o=>Fa(i(o))})},it=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>En({prefix:e,name:r,encode:i=>((r,e,t)=>{const n="="===e[e.length-1],i=(1<<t)-1;let o="",s=0,a=0;for(let h=0;h<r.length;++h)for(a=a<<8|r[h],s+=8;s>t;)s-=t,o+=e[i&a>>s];if(s&&(o+=e[i&a<<t-s]),n)for(;o.length*t&7;)o+="=";return o})(i,n,t),decode:i=>((r,e,t,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=r.length;for(;"="===r[o-1];)--o;const s=new Uint8Array(o*t/8|0);let a=0,h=0,l=0;for(let f=0;f<o;++f){const _=i[r[f]];if(void 0===_)throw new SyntaxError(`Non-${n} character`);h=h<<t|_,a+=t,a>=8&&(a-=8,s[l++]=255&h>>a)}if(a>=t||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return s})(i,n,t,r)}),ng=En({prefix:"\0",name:"identity",encode:r=>(r=>(new TextDecoder).decode(r))(r),decode:r=>(r=>(new TextEncoder).encode(r))(r)});var ig=Object.freeze({__proto__:null,identity:ng});const og=it({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var sg=Object.freeze({__proto__:null,base2:og});const ag=it({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var cg=Object.freeze({__proto__:null,base8:ag});const ug=Gr({prefix:"9",name:"base10",alphabet:"0123456789"});var lg=Object.freeze({__proto__:null,base10:ug});const hg=it({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),fg=it({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var pg=Object.freeze({__proto__:null,base16:hg,base16upper:fg});const dg=it({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yg=it({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gg=it({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_g=it({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vg=it({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),mg=it({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bg=it({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wg=it({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Eg=it({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Sg=Object.freeze({__proto__:null,base32:dg,base32upper:yg,base32pad:gg,base32padupper:_g,base32hex:vg,base32hexupper:mg,base32hexpad:bg,base32hexpadupper:wg,base32z:Eg});const Og=Gr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ig=Gr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Pg=Object.freeze({__proto__:null,base36:Og,base36upper:Ig});const xg=Gr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Fg=Gr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ag=Object.freeze({__proto__:null,base58btc:xg,base58flickr:Fg});const Ng=it({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Rg=it({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Tg=it({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Lg=it({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Cg=Object.freeze({__proto__:null,base64:Ng,base64pad:Rg,base64url:Tg,base64urlpad:Lg});const Na=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),jg=Na.reduce((r,e,t)=>(r[t]=e,r),[]),Ug=Na.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);const kg=En({prefix:"\u{1f680}",name:"base256emoji",encode:function Mg(r){return r.reduce((e,t)=>e+jg[t],"")},decode:function Dg(r){const e=[];for(const t of r){const n=Ug[t.codePointAt(0)];if(void 0===n)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}});var zg=Object.freeze({__proto__:null,base256emoji:kg}),Hg=function Ta(r,e,t){e=e||[];for(var n=t=t||0;r>=Bg;)e[t++]=255&r|128,r/=128;for(;-128&r;)e[t++]=255&r|128,r>>>=7;return e[t]=0|r,Ta.bytes=t-n+1,e},Bg=Math.pow(2,31);var Vg=function zi(r,n){var s,t=0,i=0,o=n=n||0,a=r.length;do{if(o>=a)throw zi.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(127&s)<<i:(127&s)*Math.pow(2,i),i+=7}while(s>=128);return zi.bytes=o-n,t};var Gg=Math.pow(2,7),Wg=Math.pow(2,14),Yg=Math.pow(2,21),Jg=Math.pow(2,28),Xg=Math.pow(2,35),Zg=Math.pow(2,42),Qg=Math.pow(2,49),e1=Math.pow(2,56),t1=Math.pow(2,63),Ca={encode:Hg,decode:Vg,encodingLength:function(r){return r<Gg?1:r<Wg?2:r<Yg?3:r<Jg?4:r<Xg?5:r<Zg?6:r<Qg?7:r<e1?8:r<t1?9:10}};const ja=(r,e,t=0)=>(Ca.encode(r,e,t),e),Ua=r=>Ca.encodingLength(r),Hi=(r,e)=>{const t=e.byteLength,n=Ua(r),i=n+Ua(t),o=new Uint8Array(i+t);return ja(r,o,0),ja(t,o,n),o.set(e,i),new i1(r,t,e,o)};class i1{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}const Ma=({name:r,code:e,encode:t})=>new o1(r,e,t);class o1{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Hi(this.code,t):t.then(n=>Hi(this.code,n))}throw Error("Unknown type, must be binary type")}}const Da=r=>function(){var e=I(function*(t){return new Uint8Array(yield crypto.subtle.digest(r,t))});return function(t){return e.apply(this,arguments)}}(),s1=Ma({name:"sha2-256",code:18,encode:Da("SHA-256")}),a1=Ma({name:"sha2-512",code:19,encode:Da("SHA-512")});var c1=Object.freeze({__proto__:null,sha256:s1,sha512:a1});const za=Fa;var l1=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:za,digest:r=>Hi(0,za(r))}});new TextEncoder,new TextDecoder;const Ha=pt(pt(pt(pt(pt(pt(pt(pt(pt(pt({},ig),sg),cg),lg),pg),Sg),Pg),Ag),Cg),zg);function Ka(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}pt(pt({},c1),l1);const $a=Ka("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>(new TextEncoder).encode(r.substring(1))),Ki=Ka("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{const e=function h1(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}((r=r.substring(1)).length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),f1=pt({utf8:$a,"utf-8":$a,hex:Ha.base16,latin1:Ki,ascii:Ki,binary:Ki},Ha);const $i="core",Wt="wc@2:core:",y1_logger="error",g1={database:":memory:"},Va="client_ed25519_seed",v1=Q.ONE_DAY,S1=Q.SIX_HOURS,Ga="wss://relay.walletconnect.com",ot_message="relayer_message",ot_connect="relayer_connect",ot_disconnect="relayer_disconnect",ot_error="relayer_error",ot_connection_stalled="relayer_connection_stalled",ot_transport_closed="relayer_transport_closed",ot_publish="relayer_publish",Sn_payload="payload",Sn_connect="connect",Sn_disconnect="disconnect",Sn_error="error",Wa=Q.ONE_SECOND,jt_created="subscription_created",jt_deleted="subscription_deleted",jt_sync="subscription_sync",jt_resubscribed="subscription_resubscribed",T1=1e3*Q.FIVE_SECONDS,Wr={wc_pairingDelete:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:0},res:{ttl:Q.ONE_DAY,prompt:!1,tag:0}}},Ut_created="history_created",Ut_updated="history_updated",Ut_deleted="history_deleted",Ut_sync="history_sync",It_created="expirer_created",It_deleted="expirer_deleted",It_expired="expirer_expired",It_sync="expirer_sync";class k1{constructor(e,t){var n=this;this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){if(!n.initialized){const i=yield n.getKeyChain();typeof i<"u"&&(n.keychain=i),n.initialized=!0}}),this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=function(){var i=I(function*(o,s){n.isInitialized(),n.keychain.set(o,s),yield n.persist()});return function(o,s){return i.apply(this,arguments)}}(),this.get=i=>{this.isInitialized();const o=this.keychain.get(i);if(typeof o>"u"){const{message:s}=q("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return o},this.del=function(){var i=I(function*(o){n.isInitialized(),n.keychain.delete(o),yield n.persist()});return function(o){return i.apply(this,arguments)}}(),this.core=e,this.logger=xe.generateChildLogger(t,this.name)}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}setKeyChain(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,ra(e))})()}getKeyChain(){var e=this;return I(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?na(t):void 0})()}persist(){var e=this;return I(function*(){yield e.setKeyChain(e.keychain)})()}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class z1{constructor(e,t,n){var i=this;this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=I(function*(){i.initialized||(yield i.keychain.init(),i.initialized=!0)}),this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=I(function*(){return i.isInitialized(),xs(Fs(yield i.getClientSeed()).publicKey)}),this.generateKeyPair=()=>{this.isInitialized();const o=function Gp(){const r=gi.generateKeyPair();return{privateKey:_t(r.secretKey,mt),publicKey:_t(r.publicKey,mt)}}();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=function(){var o=I(function*(s){i.isInitialized();const h=Fs(yield i.getClientSeed()),l=Ii();return yield function tp(r,e,t,n){return fi.apply(this,arguments)}(l,s,v1,h)});return function(s){return o.apply(this,arguments)}}(),this.generateSharedKey=(o,s,a)=>{this.isInitialized();const l=function Wp(r,e){const t=gi.sharedKey(vt(r,mt),vt(e,mt));return _t(new dp(_n.SHA256,t).expand(32),mt)}(this.getPrivateKey(o),s);return this.setSymKey(l,a)},this.setSymKey=function(){var o=I(function*(s,a){i.isInitialized();const h=a||function Yp(r){return _t(_n.hash(vt(r,mt)),mt)}(s);return yield i.keychain.set(h,s),h});return function(s,a){return o.apply(this,arguments)}}(),this.deleteKeyPair=function(){var o=I(function*(s){i.isInitialized(),yield i.keychain.del(s)});return function(s){return o.apply(this,arguments)}}(),this.deleteSymKey=function(){var o=I(function*(s){i.isInitialized(),yield i.keychain.del(s)});return function(s){return o.apply(this,arguments)}}(),this.encode=function(){var o=I(function*(s,a,h){i.isInitialized();const l=Js(h),f=jr(a);if(Xs(l)){const m=l.senderPublicKey,T=l.receiverPublicKey;s=yield i.generateSharedKey(m,T)}const _=i.getSymKey(s),{type:v,senderPublicKey:b}=l;return Xp({type:v,symKey:_,message:f,senderPublicKey:b})});return function(s,a,h){return o.apply(this,arguments)}}(),this.decode=function(){var o=I(function*(s,a,h){i.isInitialized();const l=function ed(r,e){const t=Pi(r);return Js({type:kr(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?_t(t.senderPublicKey,mt):void 0,receiverPublicKey:e?.receiverPublicKey})}(a,h);if(Xs(l)){const v=l.receiverPublicKey,b=l.senderPublicKey;s=yield i.generateSharedKey(v,b)}return ri(function Zp(r){const e=new pi.ChaCha20Poly1305(vt(r.symKey,mt)),{sealed:t,iv:n}=Pi(r.encoded),i=e.open(n,t);if(null===i)throw new Error("Failed to decrypt");return _t(i,Ei)}({symKey:i.getSymKey(s),encoded:a}))});return function(s,a,h){return o.apply(this,arguments)}}(),this.core=e,this.logger=xe.generateChildLogger(t,this.name),this.keychain=n||new k1(this.core,this.logger)}get context(){return xe.getLoggerContext(this.logger)}getPayloadType(e){return kr(Pi(e).type)}setPrivateKey(e,t){var n=this;return I(function*(){return yield n.keychain.set(e,t),e})()}getPrivateKey(e){return this.keychain.get(e)}getClientSeed(){var e=this;return I(function*(){let t="";try{t=e.keychain.get(Va)}catch{t=Ii(),yield e.keychain.set(Va,t)}return function p1(r,e="utf8"){const t=f1[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${r}`):globalThis.Buffer.from(r,"utf8")}(t,"base16")})()}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class H1 extends class Ml{constructor(e,t){this.logger=e,this.core=t}}{constructor(e,t){var n;super(e,t),n=this,this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){if(!n.initialized){n.logger.trace("Initialized");try{const i=yield n.getRelayerMessages();typeof i<"u"&&(n.messages=i),n.logger.debug(`Successfully Restored records for ${n.name}`),n.logger.trace({type:"method",method:"restore",size:n.messages.size})}catch(i){n.logger.debug(`Failed to Restore records for ${n.name}`),n.logger.error(i)}finally{n.initialized=!0}}}),this.set=function(){var i=I(function*(o,s){n.isInitialized();const a=vn(s);let h=n.messages.get(o);return typeof h>"u"&&(h={}),typeof h[a]<"u"||(h[a]=s,n.messages.set(o,h),yield n.persist()),a});return function(o,s){return i.apply(this,arguments)}}(),this.get=i=>{this.isInitialized();let o=this.messages.get(i);return typeof o>"u"&&(o={}),o},this.has=(i,o)=>(this.isInitialized(),typeof this.get(i)[vn(o)]<"u"),this.del=function(){var i=I(function*(o){n.isInitialized(),n.messages.delete(o),yield n.persist()});return function(o){return i.apply(this,arguments)}}(),this.logger=xe.generateChildLogger(e,this.name),this.core=t}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}setRelayerMessages(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,ra(e))})()}getRelayerMessages(){var e=this;return I(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?na(t):void 0})()}persist(){var e=this;return I(function*(){yield e.setRelayerMessages(e.messages)})()}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class K1 extends Dl{constructor(e,t){var n;super(e,t),n=this,this.relayer=e,this.logger=t,this.events=new ct.exports.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=1e4,this.publish=function(){var i=I(function*(o,s,a){n.logger.debug("Publishing Payload"),n.logger.trace({type:"method",method:"publish",params:{topic:o,message:s,opts:a}});try{const h=a?.ttl||S1,l=xi(a),f=a?.prompt||!1,_=a?.tag||0,v={topic:o,message:s,opts:{ttl:h,relay:l,prompt:f,tag:_}},b=vn(s);n.queue.set(b,v);try{yield yield ia(n.rpcPublish(o,s,h,l,f,_),n.publishTimeout),n.relayer.events.emit(ot_publish,v)}catch{return n.logger.debug("Publishing Payload stalled"),void n.relayer.events.emit(ot_connection_stalled)}n.onPublish(b,v),n.logger.debug("Successfully Published Payload"),n.logger.trace({type:"method",method:"publish",params:{topic:o,message:s,opts:a}})}catch(h){throw n.logger.debug("Failed to Publish Payload"),n.logger.error(h),h}});return function(o,s,a){return i.apply(this,arguments)}}(),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.relayer=e,this.logger=xe.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return xe.getLoggerContext(this.logger)}rpcPublish(e,t,n,i,o,s){var a,h,l,f;const _={method:Fi(i.protocol).publish,params:{topic:e,message:t,ttl:n,prompt:o,tag:s}};return ft(null==(a=_.params)?void 0:a.prompt)&&(null==(h=_.params)||delete h.prompt),ft(null==(l=_.params)?void 0:l.tag)&&(null==(f=_.params)||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:_}),this.relayer.provider.request(_)}onPublish(e,t){this.queue.delete(e)}checkQueue(){var e=this;this.queue.forEach(function(){var t=I(function*(n){const{topic:i,message:o,opts:s}=n;yield e.publish(i,o,s)});return function(n){return t.apply(this,arguments)}}())}registerEventListeners(){this.relayer.core.heartbeat.on(xr.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class $1{constructor(){this.map=new Map,this.set=(e,t)=>{const n=this.get(e);this.exists(e,t)||this.map.set(e,[...n,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,t))return;const i=n.filter(o=>o!==t);i.length?this.map.set(e,i):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var B1=Object.defineProperty,V1=Object.defineProperties,q1=Object.getOwnPropertyDescriptors,Ya=Object.getOwnPropertySymbols,G1=Object.prototype.hasOwnProperty,W1=Object.prototype.propertyIsEnumerable,Ja=(r,e,t)=>e in r?B1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,On=(r,e)=>{for(var t in e||(e={}))G1.call(e,t)&&Ja(r,t,e[t]);if(Ya)for(var t of Ya(e))W1.call(e,t)&&Ja(r,t,e[t]);return r},Bi=(r,e)=>V1(r,q1(e));class Y1 extends Hl{constructor(e,t){var n;super(e,t),n=this,this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new $1,this.events=new ct.exports.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Wt,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.init=I(function*(){n.initialized||(n.logger.trace("Initialized"),yield n.restart(),n.registerEventListeners(),n.onEnable(),n.clientId=yield n.relayer.core.crypto.getClientId())}),this.subscribe=function(){var i=I(function*(o,s){yield n.restartToComplete(),n.isInitialized(),n.logger.debug("Subscribing Topic"),n.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:s}});try{const a=xi(s),h={topic:o,relay:a};n.pending.set(o,h);const l=yield n.rpcSubscribe(o,a);return n.onSubscribe(l,h),n.logger.debug("Successfully Subscribed Topic"),n.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:s}}),l}catch(a){throw n.logger.debug("Failed to Subscribe Topic"),n.logger.error(a),a}});return function(o,s){return i.apply(this,arguments)}}(),this.unsubscribe=function(){var i=I(function*(o,s){yield n.restartToComplete(),n.isInitialized(),typeof s?.id<"u"?yield n.unsubscribeById(o,s.id,s):yield n.unsubscribeByTopic(o,s)});return function(o,s){return i.apply(this,arguments)}}(),this.isSubscribed=function(){var i=I(function*(o){return!!n.topics.includes(o)||(yield new Promise((s,a)=>{const h=new Q.Watch;h.start(n.pendingSubscriptionWatchLabel);const l=setInterval(()=>{!n.pending.has(o)&&n.topics.includes(o)&&(clearInterval(l),h.stop(n.pendingSubscriptionWatchLabel),s(!0)),h.elapsed(n.pendingSubscriptionWatchLabel)>=T1&&(clearInterval(l),h.stop(n.pendingSubscriptionWatchLabel),a(!1))},n.pollingInterval)}))});return function(o){return i.apply(this,arguments)}}(),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.restart=I(function*(){n.restartInProgress=!0,yield n.restore(),yield n.reset(),n.restartInProgress=!1}),this.relayer=e,this.logger=xe.generateChildLogger(t,this.name),this.clientId=""}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let n=!1;try{n=this.getSubscription(e).topic===t}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear(),this.initialized=!1}unsubscribeByTopic(e,t){var n=this;return I(function*(){const i=n.topicMap.get(e);yield Promise.all(i.map(function(){var o=I(function*(s){return yield n.unsubscribeById(e,s,t)});return function(s){return o.apply(this,arguments)}}()))})()}unsubscribeById(e,t,n){var i=this;return I(function*(){i.logger.debug("Unsubscribing Topic"),i.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}});try{const o=xi(n);yield i.rpcUnsubscribe(e,t,o);const s=He("USER_DISCONNECTED",`${i.name}, ${e}`);yield i.onUnsubscribe(e,t,s),i.logger.debug("Successfully Unsubscribed Topic"),i.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}})}catch(o){throw i.logger.debug("Failed to Unsubscribe Topic"),i.logger.error(o),o}})()}rpcSubscribe(e,t){var n=this;return I(function*(){const i={method:Fi(t.protocol).subscribe,params:{topic:e}};n.logger.debug("Outgoing Relay Payload"),n.logger.trace({type:"payload",direction:"outgoing",request:i});try{yield yield ia(n.relayer.provider.request(i),n.subscribeTimeout)}catch{n.logger.debug("Outgoing Relay Payload stalled"),n.relayer.events.emit(ot_connection_stalled)}return vn(e+n.clientId)})()}rpcUnsubscribe(e,t,n){const i={method:Fi(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.provider.request(i)}onSubscribe(e,t){this.setSubscription(e,Bi(On({},t),{id:e})),this.pending.delete(t.topic)}onResubscribe(e,t){this.addSubscription(e,Bi(On({},t),{id:e})),this.pending.delete(t.topic)}onUnsubscribe(e,t,n){var i=this;return I(function*(){i.events.removeAllListeners(t),i.hasSubscription(t,e)&&i.deleteSubscription(t,n),yield i.relayer.messages.del(e)})()}setRelayerSubscriptions(e){var t=this;return I(function*(){yield t.relayer.core.storage.setItem(t.storageKey,e)})()}getRelayerSubscriptions(){var e=this;return I(function*(){return yield e.relayer.core.storage.getItem(e.storageKey)})()}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,On({},t)),this.topicMap.set(t.topic,e),this.events.emit(jt_created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(jt_deleted,Bi(On({},n),{reason:t}))}persist(){var e=this;return I(function*(){yield e.setRelayerSubscriptions(e.values),e.events.emit(jt_sync)})()}reset(){var e=this;return I(function*(){e.cached.length&&(yield Promise.all(e.cached.map(function(){var t=I(function*(n){return yield e.resubscribe(n)});return function(n){return t.apply(this,arguments)}}()))),e.events.emit(jt_resubscribed)})()}restore(){var e=this;return I(function*(){try{const t=yield e.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(e.subscriptions.size){const{message:n}=q("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(n),e.logger.error(`${e.name}: ${JSON.stringify(e.values)}`),new Error(n)}e.cached=t,e.logger.debug(`Successfully Restored subscriptions for ${e.name}`),e.logger.trace({type:"method",method:"restore",subscriptions:e.values})}catch(t){e.logger.debug(`Failed to Restore subscriptions for ${e.name}`),e.logger.error(t)}})()}resubscribe(e){var t=this;return I(function*(){if(!t.ids.includes(e.id)){const{topic:n,relay:i}=e,o={topic:n,relay:i};t.pending.set(o.topic,o);const s=yield t.rpcSubscribe(o.topic,o.relay);t.onResubscribe(s,o)}})()}onConnect(){var e=this;return I(function*(){e.restartInProgress||(yield e.restart(),e.onEnable())})()}onDisconnect(){this.onDisable()}checkPending(){var e=this;this.relayer.transportExplicitlyClosed||this.pending.forEach(function(){var t=I(function*(n){const i=yield e.rpcSubscribe(n.topic,n.relay);e.onSubscribe(i,n)});return function(n){return t.apply(this,arguments)}}())}registerEventListeners(){var e=this;this.relayer.core.heartbeat.on(xr.HEARTBEAT_EVENTS.pulse,()=>{this.checkPending()}),this.relayer.on(ot_connect,I(function*(){yield e.onConnect()})),this.relayer.on(ot_disconnect,()=>{this.onDisconnect()}),this.events.on(jt_created,function(){var t=I(function*(n){const i=jt_created;e.logger.info(`Emitting ${i}`),e.logger.debug({type:"event",event:i,data:n}),yield e.persist()});return function(n){return t.apply(this,arguments)}}()),this.events.on(jt_deleted,function(){var t=I(function*(n){const i=jt_deleted;e.logger.info(`Emitting ${i}`),e.logger.debug({type:"event",event:i,data:n}),yield e.persist()});return function(n){return t.apply(this,arguments)}}())}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}restartToComplete(){var e=this;return I(function*(){e.restartInProgress&&(yield new Promise(t=>{const n=setInterval(()=>{e.restartInProgress||(clearInterval(n),t())},e.pollingInterval)}))})()}}var J1=Object.defineProperty,Xa=Object.getOwnPropertySymbols,X1=Object.prototype.hasOwnProperty,Z1=Object.prototype.propertyIsEnumerable,Za=(r,e,t)=>e in r?J1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;class e_ extends kl{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new ct.exports.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?xe.generateChildLogger(e.logger,this.name):Fe(xe.getDefaultLoggerOptions({level:e.logger||"error"})),this.messages=new H1(this.logger,e.core),this.subscriber=new Y1(this,this.logger),this.publisher=new K1(this,this.logger),this.relayUrl=e?.relayUrl||Ga,this.projectId=e.projectId,this.provider={}}init(){var e=this;return I(function*(){e.logger.trace("Initialized"),e.provider=yield e.createProvider(),yield Promise.all([e.messages.init(),e.transportOpen(),e.subscriber.init()]),e.registerEventListeners(),e.initialized=!0})()}get context(){return xe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}publish(e,t,n){var i=this;return I(function*(){i.isInitialized(),yield i.publisher.publish(e,t,n),yield i.recordMessageEvent({topic:e,message:t})})()}subscribe(e,t){var n=this;return I(function*(){n.isInitialized();let i="";return yield Promise.all([new Promise(o=>{n.subscriber.once(jt_created,s=>{s.topic===e&&o()})}),new Promise(function(){var o=I(function*(s){i=yield n.subscriber.subscribe(e,t),s()});return function(s){return o.apply(this,arguments)}}())]),i})()}unsubscribe(e,t){var n=this;return I(function*(){n.isInitialized(),yield n.subscriber.unsubscribe(e,t)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}transportClose(){var e=this;return I(function*(){e.transportExplicitlyClosed=!0,e.connected&&(yield e.provider.disconnect(),e.events.emit(ot_transport_closed))})()}transportOpen(e){var t=this;return I(function*(){if(!t.reconnecting){t.relayUrl=e||t.relayUrl,t.transportExplicitlyClosed=!1,t.reconnecting=!0;try{yield Promise.all([new Promise(n=>{t.initialized||n(),t.subscriber.once(jt_resubscribed,()=>{n()})}),yield Promise.race([new Promise(function(){var n=I(function*(i){yield t.provider.connect(),t.removeListener(ot_transport_closed,t.rejectTransportOpen),i()});return function(i){return n.apply(this,arguments)}}()),new Promise(n=>t.once(ot_transport_closed,t.rejectTransportOpen))])])}catch(n){if(!/socket hang up/i.test(n.message))throw n;t.logger.error(n),t.events.emit(ot_transport_closed)}finally{t.reconnecting=!1}}})()}restartTransport(e){var t=this;return I(function*(){t.transportExplicitlyClosed||(yield t.transportClose(),yield new Promise(n=>setTimeout(n,Wa)),yield t.transportOpen(e))})()}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}createProvider(){var e=this;return I(function*(){const t=yield e.core.crypto.signJWT(e.relayUrl);return new qr(new Hy(dd({sdkVersion:"2.4.5",protocol:e.protocol,version:e.version,relayUrl:e.relayUrl,projectId:e.projectId,auth:t})))})()}recordMessageEvent(e){var t=this;return I(function*(){const{topic:n,message:i}=e;yield t.messages.set(n,i)})()}shouldIgnoreMessageEvent(e){var t=this;return I(function*(){const{topic:n,message:i}=e;return!(yield t.subscriber.isSubscribed(n))||t.messages.has(n,i)})()}onProviderPayload(e){var t=this;return I(function*(){if(t.logger.debug("Incoming Relay Payload"),t.logger.trace({type:"payload",direction:"incoming",payload:e}),Mi(e)){if(!e.method.endsWith("_subscription"))return;const n=e.params,{topic:i,message:o}=n.data,s={topic:i,message:o};t.logger.debug("Emitting Relayer Payload"),t.logger.trace(((r,e)=>{for(var t in e||(e={}))X1.call(e,t)&&Za(r,t,e[t]);if(Xa)for(var t of Xa(e))Z1.call(e,t)&&Za(r,t,e[t]);return r})({type:"event",event:n.id},s)),t.events.emit(n.id,s),yield t.acknowledgePayload(e),yield t.onMessageEvent(s)}})()}onMessageEvent(e){var t=this;return I(function*(){(yield t.shouldIgnoreMessageEvent(e))||(t.events.emit(ot_message,e),yield t.recordMessageEvent(e))})()}acknowledgePayload(e){var t=this;return I(function*(){const n=Ui(e.id,!0);yield t.provider.connection.send(n)})()}registerEventListeners(){var e=this;this.provider.on(Sn_payload,t=>this.onProviderPayload(t)),this.provider.on(Sn_connect,()=>{this.events.emit(ot_connect)}),this.provider.on(Sn_disconnect,()=>{this.events.emit(ot_disconnect),this.attemptToReconnect()}),this.provider.on(Sn_error,t=>this.events.emit(ot_error,t)),this.events.on(ot_connection_stalled,I(function*(){yield e.restartTransport()}))}attemptToReconnect(){var e=this;this.transportExplicitlyClosed||setTimeout(I(function*(){yield e.transportOpen()}),Q.toMiliseconds(Wa))}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var t_=Object.defineProperty,Qa=Object.getOwnPropertySymbols,r_=Object.prototype.hasOwnProperty,n_=Object.prototype.propertyIsEnumerable,ec=(r,e,t)=>e in r?t_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,tc=(r,e)=>{for(var t in e||(e={}))r_.call(e,t)&&ec(r,t,e[t]);if(Qa)for(var t of Qa(e))n_.call(e,t)&&ec(r,t,e[t]);return r};class In extends class zl{constructor(e,t,n,i){this.core=e,this.logger=t,this.name=n}}{constructor(e,t,n,i=Wt,o){var s;super(e,t,n,i),s=this,this.core=e,this.logger=t,this.name=n,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){s.initialized||(s.logger.trace("Initialized"),yield s.restore(),s.cached.forEach(a=>{!function jd(r){var e;return null==(e=r?.proposer)?void 0:e.publicKey}(a)?function Ud(r){return r?.topic}(a)?s.map.set(a.topic,a):s.getKey&&null!==a&&!ft(a)&&s.map.set(s.getKey(a),a):s.map.set(a.id,a)}),s.cached=[],s.initialized=!0)}),this.set=function(){var a=I(function*(h,l){s.isInitialized(),s.map.has(h)?yield s.update(h,l):(s.logger.debug("Setting value"),s.logger.trace({type:"method",method:"set",key:h,value:l}),s.map.set(h,l),yield s.persist())});return function(h,l){return a.apply(this,arguments)}}(),this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter(h=>Object.keys(a).every(l=>Ky(h[l],a[l]))):this.values),this.update=function(){var a=I(function*(h,l){s.isInitialized(),s.logger.debug("Updating value"),s.logger.trace({type:"method",method:"update",key:h,update:l});const f=tc(tc({},s.getData(h)),l);s.map.set(h,f),yield s.persist()});return function(h,l){return a.apply(this,arguments)}}(),this.delete=function(){var a=I(function*(h,l){s.isInitialized(),s.map.has(h)&&(s.logger.debug("Deleting value"),s.logger.trace({type:"method",method:"delete",key:h,reason:l}),s.map.delete(h),yield s.persist())});return function(h,l){return a.apply(this,arguments)}}(),this.logger=xe.generateChildLogger(t,this.name),this.storagePrefix=i,this.getKey=o}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}setDataStore(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getDataStore(){var e=this;return I(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getData(e){const t=this.map.get(e);if(!t){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}persist(){var e=this;return I(function*(){yield e.setDataStore(e.values)})()}restore(){var e=this;return I(function*(){try{const t=yield e.getDataStore();if(typeof t>"u"||!t.length)return;if(e.map.size){const{message:n}=q("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(n),new Error(n)}e.cached=t,e.logger.debug(`Successfully Restored value for ${e.name}`),e.logger.trace({type:"method",method:"restore",value:e.values})}catch(t){e.logger.debug(`Failed to Restore value for ${e.name}`),e.logger.error(t)}})()}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class i_{constructor(e,t){var n=this;this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new ct.exports,this.initialized=!1,this.storagePrefix=Wt,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=I(function*(){n.initialized||(yield n.pairings.init(),yield n.cleanup(),n.registerRelayerEvents(),n.registerExpirerEvents(),n.initialized=!0,n.logger.trace("Initialized"))}),this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=I(function*(){n.isInitialized();const i=Ii(),o=yield n.core.crypto.setSymKey(i),s=Ct(Q.FIVE_MINUTES),a={protocol:"irn"},h={topic:o,expiry:s,relay:a,active:!1},l=Id({protocol:n.core.protocol,version:n.core.version,topic:o,symKey:i,relay:a});return yield n.pairings.set(o,h),yield n.core.relayer.subscribe(o),n.core.expirer.set(o,s),{topic:o,uri:l}}),this.pair=function(){var i=I(function*(o){n.isInitialized(),n.isValidPair(o);const{topic:s,symKey:a,relay:h}=function Sd(r){const e=r.indexOf(":"),t=-1!==r.indexOf("?")?r.indexOf("?"):void 0,n=r.substring(0,e),i=r.substring(e+1,t).split("@"),o=typeof t<"u"?r.substring(t):"",s=Dr.parse(o);return{protocol:n,topic:i[0],version:parseInt(i[1],10),symKey:s.symKey,relay:Ed(s)}}(o.uri),l=Ct(Q.FIVE_MINUTES),f={topic:s,relay:h,expiry:l,active:!1};return yield n.pairings.set(s,f),yield n.core.crypto.setSymKey(a,s),yield n.core.relayer.subscribe(s,{relay:h}),n.core.expirer.set(s,l),o.activatePairing&&(yield n.activate({topic:s})),f});return function(o){return i.apply(this,arguments)}}(),this.activate=function(){var i=I(function*({topic:o}){n.isInitialized();const s=Ct(Q.THIRTY_DAYS);yield n.pairings.update(o,{active:!0,expiry:s}),n.core.expirer.set(o,s)});return function(o){return i.apply(this,arguments)}}(),this.ping=function(){var i=I(function*(o){n.isInitialized(),yield n.isValidPing(o);const{topic:s}=o;if(n.pairings.keys.includes(s)){const a=yield n.sendRequest(s,"wc_pairingPing",{}),{done:h,resolve:l,reject:f}=sr();n.events.once(ke("pairing_ping",a),({error:_})=>{_?f(_):l()}),yield h()}});return function(o){return i.apply(this,arguments)}}(),this.updateExpiry=function(){var i=I(function*({topic:o,expiry:s}){n.isInitialized(),yield n.pairings.update(o,{expiry:s})});return function(o){return i.apply(this,arguments)}}(),this.updateMetadata=function(){var i=I(function*({topic:o,metadata:s}){n.isInitialized(),yield n.pairings.update(o,{peerMetadata:s})});return function(o){return i.apply(this,arguments)}}(),this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=function(){var i=I(function*(o){n.isInitialized(),yield n.isValidDisconnect(o);const{topic:s}=o;n.pairings.keys.includes(s)&&(yield n.sendRequest(s,"wc_pairingDelete",He("USER_DISCONNECTED")),yield n.deletePairing(s))});return function(o){return i.apply(this,arguments)}}(),this.sendRequest=function(){var i=I(function*(o,s,a){const h=bn(s,a),l=yield n.core.crypto.encode(o,h),f=Wr[s].req;return n.core.history.set(o,h),yield n.core.relayer.publish(o,l,f),h.id});return function(o,s,a){return i.apply(this,arguments)}}(),this.sendResult=function(){var i=I(function*(o,s,a){const h=Ui(o,a),l=yield n.core.crypto.encode(s,h),f=yield n.core.history.get(s,o),_=Wr[f.request.method].res;yield n.core.relayer.publish(s,l,_),yield n.core.history.resolve(h)});return function(o,s,a){return i.apply(this,arguments)}}(),this.sendError=function(){var i=I(function*(o,s,a){const h=wn(o,a),l=yield n.core.crypto.encode(s,h),f=yield n.core.history.get(s,o),_=Wr[f.request.method]?Wr[f.request.method].res:Wr.unregistered_method.res;yield n.core.relayer.publish(s,l,_),yield n.core.history.resolve(h)});return function(o,s,a){return i.apply(this,arguments)}}(),this.deletePairing=function(){var i=I(function*(o,s){yield n.core.relayer.unsubscribe(o),yield Promise.all([n.pairings.delete(o,He("USER_DISCONNECTED")),n.core.crypto.deleteSymKey(o),s?Promise.resolve():n.core.expirer.del(o)])});return function(o,s){return i.apply(this,arguments)}}(),this.cleanup=I(function*(){const i=n.pairings.getAll().filter(o=>Gt(o.expiry));yield Promise.all(i.map(o=>n.deletePairing(o.topic)))}),this.onRelayEventRequest=i=>{const{topic:o,payload:s}=i,a=s.method;if(this.pairings.keys.includes(o))switch(a){case"wc_pairingPing":return this.onPairingPingRequest(o,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,s);default:return this.onUnknownRpcMethodRequest(o,s)}},this.onRelayEventResponse=function(){var i=I(function*(o){const{topic:s,payload:a}=o,h=(yield n.core.history.get(s,a.id)).request.method;if(n.pairings.keys.includes(s))return"wc_pairingPing"===h?n.onPairingPingResponse(s,a):n.onUnknownRpcMethodResponse(h)});return function(o){return i.apply(this,arguments)}}(),this.onPairingPingRequest=function(){var i=I(function*(o,s){const{id:a}=s;try{n.isValidPing({topic:o}),yield n.sendResult(a,o,!0),n.events.emit("pairing_ping",{id:a,topic:o})}catch(h){yield n.sendError(a,o,h),n.logger.error(h)}});return function(o,s){return i.apply(this,arguments)}}(),this.onPairingPingResponse=(i,o)=>{const{id:s}=o;setTimeout(()=>{Ht(o)?this.events.emit(ke("pairing_ping",s),{}):At(o)&&this.events.emit(ke("pairing_ping",s),{error:o.error})},500)},this.onPairingDeleteRequest=function(){var i=I(function*(o,s){const{id:a}=s;try{n.isValidDisconnect({topic:o}),yield n.deletePairing(o),n.events.emit("pairing_delete",{id:a,topic:o})}catch(h){yield n.sendError(a,o,h),n.logger.error(h)}});return function(o,s){return i.apply(this,arguments)}}(),this.onUnknownRpcMethodRequest=function(){var i=I(function*(o,s){const{id:a,method:h}=s;try{if(n.registeredMethods.includes(h))return;const l=He("WC_METHOD_UNSUPPORTED",h);yield n.sendError(a,o,l),n.logger.error(l)}catch(l){yield n.sendError(a,o,l),n.logger.error(l)}});return function(o,s){return i.apply(this,arguments)}}(),this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(He("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!bt(i)){const{message:o}=q("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(o)}if(!function Cd(r){if(We(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}(i.uri)){const{message:o}=q("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(o)}},this.isValidPing=function(){var i=I(function*(o){if(!bt(o)){const{message:a}=q("MISSING_OR_INVALID",`ping() params: ${o}`);throw new Error(a)}const{topic:s}=o;yield n.isValidPairingTopic(s)});return function(o){return i.apply(this,arguments)}}(),this.isValidDisconnect=function(){var i=I(function*(o){if(!bt(o)){const{message:a}=q("MISSING_OR_INVALID",`disconnect() params: ${o}`);throw new Error(a)}const{topic:s}=o;yield n.isValidPairingTopic(s)});return function(o){return i.apply(this,arguments)}}(),this.isValidPairingTopic=function(){var i=I(function*(o){if(!We(o,!1)){const{message:s}=q("MISSING_OR_INVALID",`pairing topic should be a string: ${o}`);throw new Error(s)}if(!n.pairings.keys.includes(o)){const{message:s}=q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${o}`);throw new Error(s)}if(Gt(n.pairings.get(o).expiry)){yield n.deletePairing(o);const{message:s}=q("EXPIRED",`pairing topic: ${o}`);throw new Error(s)}});return function(o){return i.apply(this,arguments)}}(),this.core=e,this.logger=xe.generateChildLogger(t,this.name),this.pairings=new In(this.core,this.logger,this.name,this.storagePrefix)}get context(){return xe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){var e=this;this.core.relayer.on(ot_message,function(){var t=I(function*(n){const{topic:i,message:o}=n;if(e.ignoredPayloadTypes.includes(e.core.crypto.getPayloadType(o)))return;const s=yield e.core.crypto.decode(i,o);Mi(s)?(e.core.history.set(i,s),e.onRelayEventRequest({topic:i,payload:s})):Di(s)&&(yield e.core.history.resolve(s),e.onRelayEventResponse({topic:i,payload:s}))});return function(n){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.core.expirer.on(It_expired,function(){var t=I(function*(n){const{topic:i}=sa(n.target);i&&e.pairings.keys.includes(i)&&(yield e.deletePairing(i,!0),e.events.emit("pairing_expire",{topic:i}))});return function(n){return t.apply(this,arguments)}}())}}class o_ extends Ul{constructor(e,t){var n;super(e,t),n=this,this.core=e,this.logger=t,this.records=new Map,this.events=new ct.exports.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){n.initialized||(n.logger.trace("Initialized"),yield n.restore(),n.cached.forEach(i=>n.records.set(i.id,i)),n.cached=[],n.registerEventListeners(),n.initialized=!0)}),this.set=(i,o,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:o,chainId:s}),this.records.has(o.id))return;const a={id:o.id,topic:i,request:{method:o.method,params:o.params||null},chainId:s};this.records.set(a.id,a),this.events.emit(Ut_created,a)},this.resolve=function(){var i=I(function*(o){if(n.isInitialized(),n.logger.debug("Updating JSON-RPC response history record"),n.logger.trace({type:"method",method:"update",response:o}),!n.records.has(o.id))return;const s=yield n.getRecord(o.id);typeof s.response>"u"&&(s.response=At(o)?{error:o.error}:{result:o.result},n.records.set(s.id,s),n.events.emit(Ut_updated,s))});return function(o){return i.apply(this,arguments)}}(),this.get=function(){var i=I(function*(o,s){return n.isInitialized(),n.logger.debug("Getting record"),n.logger.trace({type:"method",method:"get",topic:o,id:s}),yield n.getRecord(s)});return function(o,s){return i.apply(this,arguments)}}(),this.delete=(i,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(s=>{if(s.topic===i){if(typeof o<"u"&&s.id!==o)return;this.records.delete(s.id),this.events.emit(Ut_deleted,s)}})},this.exists=function(){var i=I(function*(o,s){return n.isInitialized(),!!n.records.has(s)&&(yield n.getRecord(s)).topic===o});return function(o,s){return i.apply(this,arguments)}}(),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=xe.generateChildLogger(t,this.name)}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:bn(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)}),e}setJsonRpcRecords(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getJsonRpcRecords(){var e=this;return I(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}persist(){var e=this;return I(function*(){yield e.setJsonRpcRecords(e.values),e.events.emit(Ut_sync)})()}restore(){var e=this;return I(function*(){try{const t=yield e.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(e.records.size){const{message:n}=q("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(n),new Error(n)}e.cached=t,e.logger.debug(`Successfully Restored records for ${e.name}`),e.logger.trace({type:"method",method:"restore",records:e.values})}catch(t){e.logger.debug(`Failed to Restore records for ${e.name}`),e.logger.error(t)}})()}registerEventListeners(){this.events.on(Ut_created,e=>{const t=Ut_created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Ut_updated,e=>{const t=Ut_updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Ut_deleted,e=>{const t=Ut_deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class s_ extends Kl{constructor(e,t){var n;super(e,t),n=this,this.core=e,this.logger=t,this.expirations=new Map,this.events=new ct.exports.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Wt,this.init=I(function*(){n.initialized||(n.logger.trace("Initialized"),yield n.restore(),n.cached.forEach(i=>n.expirations.set(i.target,i)),n.cached=[],n.registerEventListeners(),n.initialized=!0)}),this.has=i=>{try{const o=this.formatTarget(i);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(i,o)=>{this.isInitialized();const s=this.formatTarget(i),a={target:s,expiry:o};this.expirations.set(s,a),this.checkExpiry(s,a),this.events.emit(It_created,{target:s,expiration:a})},this.get=i=>{this.isInitialized();const o=this.formatTarget(i);return this.getExpiration(o)},this.del=i=>{if(this.isInitialized(),this.has(i)){const o=this.formatTarget(i),s=this.getExpiration(o);this.expirations.delete(o),this.events.emit(It_deleted,{target:o,expiration:s})}},this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=xe.generateChildLogger(t,this.name)}get context(){return xe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function yd(r){return oa("topic",r)}(e);if("number"==typeof e)return function gd(r){return oa("id",r)}(e);const{message:t}=q("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}setExpirations(e){var t=this;return I(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getExpirations(){var e=this;return I(function*(){return yield e.core.storage.getItem(e.storageKey)})()}persist(){var e=this;return I(function*(){yield e.setExpirations(e.values),e.events.emit(It_sync)})()}restore(){var e=this;return I(function*(){try{const t=yield e.getExpirations();if(typeof t>"u"||!t.length)return;if(e.expirations.size){const{message:n}=q("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(n),new Error(n)}e.cached=t,e.logger.debug(`Successfully Restored expirations for ${e.name}`),e.logger.trace({type:"method",method:"restore",expirations:e.values})}catch(t){e.logger.debug(`Failed to Restore expirations for ${e.name}`),e.logger.error(t)}})()}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}checkExpiry(e,t){const{expiry:n}=t;Q.toMiliseconds(n)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(It_expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(xr.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(It_created,e=>{const t=It_created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(It_expired,e=>{const t=It_expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(It_deleted,e=>{const t=It_deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var a_=Object.defineProperty,rc=Object.getOwnPropertySymbols,c_=Object.prototype.hasOwnProperty,u_=Object.prototype.propertyIsEnumerable,nc=(r,e,t)=>e in r?a_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ic=(r,e)=>{for(var t in e||(e={}))c_.call(e,t)&&nc(r,t,e[t]);if(rc)for(var t of rc(e))u_.call(e,t)&&nc(r,t,e[t]);return r};class Vi extends jl{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=$i,this.events=new ct.exports.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Ga;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Fe(xe.getDefaultLoggerOptions({level:e?.logger||y1_logger}));this.logger=xe.generateChildLogger(t,this.name),this.heartbeat=new xr.HeartBeat,this.crypto=new z1(this,this.logger,e?.keychain),this.history=new o_(this,this.logger),this.expirer=new s_(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new pu(ic(ic({},g1),e?.storageOptions)),this.relayer=new e_({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new i_(this,this.logger)}static init(e){return I(function*(){const t=new Vi(e);return yield t.initialize(),t})()}get context(){return xe.getLoggerContext(this.logger)}start(){var e=this;return I(function*(){e.initialized||(yield e.initialize())})()}initialize(){var e=this;return I(function*(){e.logger.trace("Initialized");try{yield e.crypto.init(),yield e.history.init(),yield e.expirer.init(),yield e.relayer.init(),yield e.heartbeat.init(),yield e.pairing.init(),e.initialized=!0,e.logger.info("Core Initialization Success")}catch(t){throw e.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),e.logger.error(t.message),t}})()}}const l_=Vi,qi="wc@2:client:",Gi_name="client",Gi_logger="error",Pn=Q.SEVEN_DAYS,Yr={wc_sessionPropose:{req:{ttl:Q.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Q.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Q.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1115}}},Wi={min:Q.FIVE_MINUTES,max:Q.SEVEN_DAYS};var y_=Object.defineProperty,g_=Object.defineProperties,__=Object.getOwnPropertyDescriptors,cc=Object.getOwnPropertySymbols,v_=Object.prototype.hasOwnProperty,m_=Object.prototype.propertyIsEnumerable,uc=(r,e,t)=>e in r?y_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Pt=(r,e)=>{for(var t in e||(e={}))v_.call(e,t)&&uc(r,t,e[t]);if(cc)for(var t of cc(e))m_.call(e,t)&&uc(r,t,e[t]);return r},Yi=(r,e)=>g_(r,__(e));class b_ extends class Bl{constructor(e){this.client=e}}{constructor(e){var t;super(e),t=this,this.name="engine",this.events=new ct.exports,this.initialized=!1,this.ignoredPayloadTypes=[1],this.init=I(function*(){t.initialized||(yield t.cleanup(),t.registerRelayerEvents(),t.registerExpirerEvents(),t.client.core.pairing.register({methods:Object.keys(Yr)}),t.initialized=!0)}),this.connect=function(){var n=I(function*(i){t.isInitialized();const o=Yi(Pt({},i),{requiredNamespaces:i.requiredNamespaces||{},optionalNamespaces:i.optionalNamespaces||{}});yield t.isValidConnect(o);const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:h,sessionProperties:l,relays:f}=o;let v,_=s,b=!1;if(_&&(b=t.client.core.pairing.pairings.get(_).active),!_||!b){const{topic:O,uri:w}=yield t.client.core.pairing.create();_=O,v=w}const m=yield t.client.core.crypto.generateKeyPair(),T=Pt({requiredNamespaces:a,optionalNamespaces:h,relays:f??[{protocol:"irn"}],proposer:{publicKey:m,metadata:t.client.metadata}},l&&{sessionProperties:l}),{reject:j,resolve:$,done:P}=sr();if(t.events.once(ke("session_connect"),function(){var O=I(function*({error:w,session:c}){if(w)j(w);else if(c){c.self.publicKey=m;const p=Yi(Pt({},c),{requiredNamespaces:c.requiredNamespaces,optionalNamespaces:c.optionalNamespaces});yield t.client.session.set(c.topic,p),yield t.setExpiry(c.topic,c.expiry),_&&(yield t.client.core.pairing.updateMetadata({topic:_,metadata:c.peer.metadata})),$(p)}});return function(w){return O.apply(this,arguments)}}()),!_){const{message:O}=q("NO_MATCHING_KEY",`connect() pairing topic: ${_}`);throw new Error(O)}const A=yield t.sendRequest(_,"wc_sessionPropose",T),g=Ct(Q.FIVE_MINUTES);return yield t.setProposal(A,Pt({id:A,expiry:g},T)),{uri:v,approval:P}});return function(i){return n.apply(this,arguments)}}(),this.pair=function(){var n=I(function*(i){return t.isInitialized(),yield t.client.core.pairing.pair(i)});return function(i){return n.apply(this,arguments)}}(),this.approve=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidApprove(i);const{id:o,relayProtocol:s,namespaces:a,sessionProperties:h}=i,l=t.client.proposal.get(o);let{pairingTopic:f,proposer:_,requiredNamespaces:v,optionalNamespaces:b}=l;$r(v)||(v=function Ad(r,e){const t=mn(r,e);if(t)throw new Error(t.message);const n={};for(const[i,o]of Object.entries(r))n[i]={methods:o.methods,events:o.events,chains:o.accounts.map(s=>`${s.split(":")[0]}:${s.split(":")[1]}`)};return n}(a,"approve()"));const m=yield t.client.core.crypto.generateKeyPair(),T=_.publicKey,j=yield t.client.core.crypto.generateSharedKey(m,T);f&&o&&(yield t.client.core.pairing.updateMetadata({topic:f,metadata:_.metadata}),yield t.sendResult(o,f,{relay:{protocol:s??"irn"},responderPublicKey:m}),yield t.client.proposal.delete(o,He("USER_DISCONNECTED")),yield t.client.core.pairing.activate({topic:f}));const $=Pt({relay:{protocol:s??"irn"},namespaces:a,requiredNamespaces:v,optionalNamespaces:b,controller:{publicKey:m,metadata:t.client.metadata},expiry:Ct(Pn)},h&&{sessionProperties:h});yield t.client.core.relayer.subscribe(j);const P=yield t.sendRequest(j,"wc_sessionSettle",$),{done:A,resolve:g,reject:O}=sr();t.events.once(ke("session_approve",P),({error:c})=>{c?O(c):g(t.client.session.get(j))});const w=Yi(Pt({},$),{topic:j,acknowledged:!1,self:$.controller,peer:{publicKey:_.publicKey,metadata:_.metadata},controller:m});return yield t.client.session.set(j,w),yield t.setExpiry(j,Ct(Pn)),{topic:j,acknowledged:A}});return function(i){return n.apply(this,arguments)}}(),this.reject=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidReject(i);const{id:o,reason:s}=i,{pairingTopic:a}=t.client.proposal.get(o);a&&(yield t.sendError(o,a,s),yield t.client.proposal.delete(o,He("USER_DISCONNECTED")))});return function(i){return n.apply(this,arguments)}}(),this.update=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidUpdate(i);const{topic:o,namespaces:s}=i,a=yield t.sendRequest(o,"wc_sessionUpdate",{namespaces:s}),{done:h,resolve:l,reject:f}=sr();return t.events.once(ke("session_update",a),({error:_})=>{_?f(_):l()}),yield t.client.session.update(o,{namespaces:s}),{acknowledged:h}});return function(i){return n.apply(this,arguments)}}(),this.extend=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidExtend(i);const{topic:o}=i,s=yield t.sendRequest(o,"wc_sessionExtend",{}),{done:a,resolve:h,reject:l}=sr();return t.events.once(ke("session_extend",s),({error:f})=>{f?l(f):h()}),yield t.setExpiry(o,Ct(Pn)),{acknowledged:a}});return function(i){return n.apply(this,arguments)}}(),this.request=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidRequest(i);const{chainId:o,request:s,topic:a,expiry:h}=i,l=yield t.sendRequest(a,"wc_sessionRequest",{request:s,chainId:o},h),{done:f,resolve:_,reject:v}=sr(h);return t.events.once(ke("session_request",l),({error:b,result:m})=>{b?v(b):_(m)}),t.client.events.emit("session_request_sent",{topic:a,request:s,chainId:o}),yield f()});return function(i){return n.apply(this,arguments)}}(),this.respond=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidRespond(i);const{topic:o,response:s}=i,{id:a}=s;Ht(s)?yield t.sendResult(a,o,s.result):At(s)&&(yield t.sendError(a,o,s.error)),t.deletePendingSessionRequest(i.response.id,{message:"fulfilled",code:0})});return function(i){return n.apply(this,arguments)}}(),this.ping=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidPing(i);const{topic:o}=i;if(t.client.session.keys.includes(o)){const s=yield t.sendRequest(o,"wc_sessionPing",{}),{done:a,resolve:h,reject:l}=sr();t.events.once(ke("session_ping",s),({error:f})=>{f?l(f):h()}),yield a()}else t.client.core.pairing.pairings.keys.includes(o)&&(yield t.client.core.pairing.ping({topic:o}))});return function(i){return n.apply(this,arguments)}}(),this.emit=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidEmit(i);const{topic:o,event:s,chainId:a}=i;yield t.sendRequest(o,"wc_sessionEvent",{event:s,chainId:a})});return function(i){return n.apply(this,arguments)}}(),this.disconnect=function(){var n=I(function*(i){t.isInitialized(),yield t.isValidDisconnect(i);const{topic:o}=i;t.client.session.keys.includes(o)?(yield t.sendRequest(o,"wc_sessionDelete",He("USER_DISCONNECTED")),yield t.deleteSession(o)):yield t.client.core.pairing.disconnect({topic:o})});return function(i){return n.apply(this,arguments)}}(),this.find=n=>(this.isInitialized(),this.client.session.getAll().filter(i=>function Td(r,e){const{requiredNamespaces:t}=e,n=Object.keys(r.namespaces),i=Object.keys(t);let o=!0;return!!qt(i,n)&&(n.forEach(s=>{const{accounts:a,methods:h,events:l}=r.namespaces[s],f=Hr(a),_=t[s];qt(bi(s,_),f)&&qt(_.methods,h)&&qt(_.events,l)||(o=!1)}),o)}(i,n))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=function(){var n=I(function*(i,o){const{self:s}=t.client.session.get(i);yield t.client.core.relayer.unsubscribe(i),yield Promise.all([t.client.session.delete(i,He("USER_DISCONNECTED")),t.client.core.crypto.deleteKeyPair(s.publicKey),t.client.core.crypto.deleteSymKey(i),o?Promise.resolve():t.client.core.expirer.del(i)])});return function(i,o){return n.apply(this,arguments)}}(),this.deleteProposal=function(){var n=I(function*(i,o){yield Promise.all([t.client.proposal.delete(i,He("USER_DISCONNECTED")),o?Promise.resolve():t.client.core.expirer.del(i)])});return function(i,o){return n.apply(this,arguments)}}(),this.deletePendingSessionRequest=function(){var n=I(function*(i,o,s=!1){yield Promise.all([t.client.pendingRequest.delete(i,o),s?Promise.resolve():t.client.core.expirer.del(i)])});return function(i,o){return n.apply(this,arguments)}}(),this.setExpiry=function(){var n=I(function*(i,o){t.client.session.keys.includes(i)&&(yield t.client.session.update(i,{expiry:o})),t.client.core.expirer.set(i,o)});return function(i,o){return n.apply(this,arguments)}}(),this.setProposal=function(){var n=I(function*(i,o){yield t.client.proposal.set(i,o),t.client.core.expirer.set(i,o.expiry)});return function(i,o){return n.apply(this,arguments)}}(),this.setPendingSessionRequest=function(){var n=I(function*(i){const o=Yr.wc_sessionRequest.req.ttl,{id:s,topic:a,params:h}=i;yield t.client.pendingRequest.set(s,{id:s,topic:a,params:h}),o&&t.client.core.expirer.set(s,Ct(o))});return function(i){return n.apply(this,arguments)}}(),this.sendRequest=function(){var n=I(function*(i,o,s,a){const h=bn(o,s),l=yield t.client.core.crypto.encode(i,h),f=Yr[o].req;return a&&(f.ttl=a),t.client.core.history.set(i,h),t.client.core.relayer.publish(i,l,f),h.id});return function(i,o,s,a){return n.apply(this,arguments)}}(),this.sendResult=function(){var n=I(function*(i,o,s){const a=Ui(i,s),h=yield t.client.core.crypto.encode(o,a),l=yield t.client.core.history.get(o,i);t.client.core.relayer.publish(o,h,Yr[l.request.method].res),yield t.client.core.history.resolve(a)});return function(i,o,s){return n.apply(this,arguments)}}(),this.sendError=function(){var n=I(function*(i,o,s){const a=wn(i,s),h=yield t.client.core.crypto.encode(o,a),l=yield t.client.core.history.get(o,i);t.client.core.relayer.publish(o,h,Yr[l.request.method].res),yield t.client.core.history.resolve(a)});return function(i,o,s){return n.apply(this,arguments)}}(),this.cleanup=I(function*(){const n=[],i=[];t.client.session.getAll().forEach(o=>{Gt(o.expiry)&&n.push(o.topic)}),t.client.proposal.getAll().forEach(o=>{Gt(o.expiry)&&i.push(o.id)}),yield Promise.all([...n.map(o=>t.deleteSession(o)),...i.map(o=>t.deleteProposal(o))])}),this.onRelayEventRequest=n=>{const{topic:i,payload:o}=n,s=o.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(i,o);case"wc_sessionSettle":return this.onSessionSettleRequest(i,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,o);case"wc_sessionExtend":return this.onSessionExtendRequest(i,o);case"wc_sessionPing":return this.onSessionPingRequest(i,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,o);case"wc_sessionRequest":return this.onSessionRequest(i,o);case"wc_sessionEvent":return this.onSessionEventRequest(i,o);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=function(){var n=I(function*(i){const{topic:o,payload:s}=i,a=(yield t.client.core.history.get(o,s.id)).request.method;switch(a){case"wc_sessionPropose":return t.onSessionProposeResponse(o,s);case"wc_sessionSettle":return t.onSessionSettleResponse(o,s);case"wc_sessionUpdate":return t.onSessionUpdateResponse(o,s);case"wc_sessionExtend":return t.onSessionExtendResponse(o,s);case"wc_sessionPing":return t.onSessionPingResponse(o,s);case"wc_sessionRequest":return t.onSessionRequestResponse(o,s);default:return t.client.logger.info(`Unsupported response method ${a}`)}});return function(i){return n.apply(this,arguments)}}(),this.onSessionProposeRequest=function(){var n=I(function*(i,o){const{params:s,id:a}=o;try{t.isValidConnect(Pt({},o.params));const h=Ct(Q.FIVE_MINUTES),l=Pt({id:a,pairingTopic:i,expiry:h},s);yield t.setProposal(a,l),t.client.events.emit("session_proposal",{id:a,params:l})}catch(h){yield t.sendError(a,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionProposeResponse=function(){var n=I(function*(i,o){const{id:s}=o;if(Ht(o)){const{result:a}=o;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:a});const h=t.client.proposal.get(s);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:h});const l=h.proposer.publicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const f=a.responderPublicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:f});const _=yield t.client.core.crypto.generateSharedKey(l,f);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:_});const v=yield t.client.core.relayer.subscribe(_);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:v}),yield t.client.core.pairing.activate({topic:i})}else At(o)&&(yield t.client.proposal.delete(s,He("USER_DISCONNECTED")),t.events.emit(ke("session_connect"),{error:o.error}))});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionSettleRequest=function(){var n=I(function*(i,o){const{id:s,params:a}=o;try{t.isValidSessionSettleRequest(a);const{relay:h,controller:l,expiry:f,namespaces:_,requiredNamespaces:v,optionalNamespaces:b,sessionProperties:m}=o.params,T=Pt({topic:i,relay:h,expiry:f,namespaces:_,acknowledged:!0,requiredNamespaces:v,optionalNamespaces:b,controller:l.publicKey,self:{publicKey:"",metadata:t.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},m&&{sessionProperties:m});yield t.sendResult(o.id,i,!0),t.events.emit(ke("session_connect"),{session:T})}catch(h){yield t.sendError(s,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionSettleResponse=function(){var n=I(function*(i,o){const{id:s}=o;Ht(o)?(yield t.client.session.update(i,{acknowledged:!0}),t.events.emit(ke("session_approve",s),{})):At(o)&&(yield t.client.session.delete(i,He("USER_DISCONNECTED")),t.events.emit(ke("session_approve",s),{error:o.error}))});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionUpdateRequest=function(){var n=I(function*(i,o){const{params:s,id:a}=o;try{t.isValidUpdate(Pt({topic:i},s)),yield t.client.session.update(i,{namespaces:s.namespaces}),yield t.sendResult(a,i,!0),t.client.events.emit("session_update",{id:a,topic:i,params:s})}catch(h){yield t.sendError(a,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionUpdateResponse=(n,i)=>{const{id:o}=i;Ht(i)?this.events.emit(ke("session_update",o),{}):At(i)&&this.events.emit(ke("session_update",o),{error:i.error})},this.onSessionExtendRequest=function(){var n=I(function*(i,o){const{id:s}=o;try{t.isValidExtend({topic:i}),yield t.setExpiry(i,Ct(Pn)),yield t.sendResult(s,i,!0),t.client.events.emit("session_extend",{id:s,topic:i})}catch(a){yield t.sendError(s,i,a),t.client.logger.error(a)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionExtendResponse=(n,i)=>{const{id:o}=i;Ht(i)?this.events.emit(ke("session_extend",o),{}):At(i)&&this.events.emit(ke("session_extend",o),{error:i.error})},this.onSessionPingRequest=function(){var n=I(function*(i,o){const{id:s}=o;try{t.isValidPing({topic:i}),yield t.sendResult(s,i,!0),t.client.events.emit("session_ping",{id:s,topic:i})}catch(a){yield t.sendError(s,i,a),t.client.logger.error(a)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionPingResponse=(n,i)=>{const{id:o}=i;setTimeout(()=>{Ht(i)?this.events.emit(ke("session_ping",o),{}):At(i)&&this.events.emit(ke("session_ping",o),{error:i.error})},500)},this.onSessionDeleteRequest=function(){var n=I(function*(i,o){const{id:s}=o;try{t.isValidDisconnect({topic:i,reason:o.params}),t.client.core.relayer.once(ot_publish,I(function*(){yield t.deleteSession(i)})),yield t.sendResult(s,i,!0),t.client.events.emit("session_delete",{id:s,topic:i})}catch(a){yield t.sendError(s,i,a),t.client.logger.error(a)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionRequest=function(){var n=I(function*(i,o){const{id:s,params:a}=o;try{t.isValidRequest(Pt({topic:i},a)),yield t.setPendingSessionRequest({id:s,topic:i,params:a}),t.client.events.emit("session_request",{id:s,topic:i,params:a})}catch(h){yield t.sendError(s,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.onSessionRequestResponse=(n,i)=>{const{id:o}=i;Ht(i)?this.events.emit(ke("session_request",o),{result:i.result}):At(i)&&this.events.emit(ke("session_request",o),{error:i.error})},this.onSessionEventRequest=function(){var n=I(function*(i,o){const{id:s,params:a}=o;try{t.isValidEmit(Pt({topic:i},a)),t.client.events.emit("session_event",{id:s,topic:i,params:a})}catch(h){yield t.sendError(s,i,h),t.client.logger.error(h)}});return function(i,o){return n.apply(this,arguments)}}(),this.isValidConnect=function(){var n=I(function*(i){if(!bt(i)){const{message:f}=q("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(i)}`);throw new Error(f)}const{pairingTopic:o,requiredNamespaces:s,optionalNamespaces:a,sessionProperties:h,relays:l}=i;if(ft(o)||(yield t.isValidPairingTopic(o)),!function Bd(r,e){let t=!1;return e&&!r?t=!0:r&&Kr(r)&&r.length&&r.forEach(n=>{t=ha(n)}),t}(l,!0)){const{message:f}=q("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(f)}!ft(s)&&0!==$r(s)&&t.validateNamespaces(s,"requiredNamespaces"),!ft(a)&&0!==$r(a)&&t.validateNamespaces(a,"optionalNamespaces"),ft(h)||t.validateSessionProps(h,"sessionProperties")});return function(i){return n.apply(this,arguments)}}(),this.validateNamespaces=(n,i)=>{const o=function $d(r,e,t){let n=null;if(r&&$r(r)){const i=la(r,e);i&&(n=i);const o=kd(r,e);o&&(n=o)}else n=q("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return n}(n,"connect()",i);if(o)throw new Error(o.message)},this.isValidApprove=function(){var n=I(function*(i){if(!bt(i))throw new Error(q("MISSING_OR_INVALID",`approve() params: ${i}`).message);const{id:o,namespaces:s,relayProtocol:a,sessionProperties:h}=i;yield t.isValidProposalId(o);const l=t.client.proposal.get(o),f=mn(s,"approve()");if(f)throw new Error(f.message);const _=Ri(l.requiredNamespaces,s,"approve()","requiredNamespaces");if(_)throw new Error(_.message);if(!We(a,!0)){const{message:v}=q("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(v)}if(Object.keys(s).length>Object.keys(l.requiredNamespaces).length){const v=Object.keys(l.optionalNamespaces).filter(T=>s[T]),b={};for(const T in l.optionalNamespaces)v.includes(T)&&(b[T]=l.optionalNamespaces[T]);const m=Ri(b,s,"approve()","optionalNamespaces");if(m)throw new Error(m.message)}ft(h)||t.validateSessionProps(h,"sessionProperties")});return function(i){return n.apply(this,arguments)}}(),this.isValidReject=function(){var n=I(function*(i){if(!bt(i)){const{message:a}=q("MISSING_OR_INVALID",`reject() params: ${i}`);throw new Error(a)}const{id:o,reason:s}=i;if(yield t.isValidProposalId(o),!function qd(r){return!!(r&&"object"==typeof r&&r.code&&Ai(r.code,!1)&&r.message&&We(r.message,!1))}(s)){const{message:a}=q("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(a)}});return function(i){return n.apply(this,arguments)}}(),this.isValidSessionSettleRequest=n=>{if(!bt(n)){const{message:f}=q("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(f)}const{relay:i,controller:o,namespaces:s,expiry:a}=n;if(!ha(i)){const{message:f}=q("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(f)}const h=function Md(r,e){let t=null;return We(r?.publicKey,!1)||(t=q("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}(o,"onSessionSettleRequest()");if(h)throw new Error(h.message);const l=mn(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);if(Gt(a)){const{message:f}=q("EXPIRED","onSessionSettleRequest()");throw new Error(f)}},this.isValidUpdate=function(){var n=I(function*(i){if(!bt(i)){const{message:f}=q("MISSING_OR_INVALID",`update() params: ${i}`);throw new Error(f)}const{topic:o,namespaces:s}=i;yield t.isValidSessionTopic(o);const a=t.client.session.get(o),h=mn(s,"update()");if(h)throw new Error(h.message);const l=Ri(a.requiredNamespaces,s,"update()","requiredNamespaces");if(l)throw new Error(l.message)});return function(i){return n.apply(this,arguments)}}(),this.isValidExtend=function(){var n=I(function*(i){if(!bt(i)){const{message:s}=q("MISSING_OR_INVALID",`extend() params: ${i}`);throw new Error(s)}const{topic:o}=i;yield t.isValidSessionTopic(o)});return function(i){return n.apply(this,arguments)}}(),this.isValidRequest=function(){var n=I(function*(i){if(!bt(i)){const{message:f}=q("MISSING_OR_INVALID",`request() params: ${i}`);throw new Error(f)}const{topic:o,request:s,chainId:a,expiry:h}=i;yield t.isValidSessionTopic(o);const{namespaces:l}=t.client.session.get(o);if(!fa(l,a)){const{message:f}=q("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(f)}if(!function Gd(r){return!(ft(r)||!We(r.method,!1))}(s)){const{message:f}=q("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(f)}if(!Jd(l,a,s.method)){const{message:f}=q("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(f)}if(h&&!function Zd(r,e){return Ai(r,!1)&&r<=e.max&&r>=e.min}(h,Wi)){const{message:f}=q("MISSING_OR_INVALID",`request() expiry: ${h}. Expiry must be a number (in seconds) between ${Wi.min} and ${Wi.max}`);throw new Error(f)}});return function(i){return n.apply(this,arguments)}}(),this.isValidRespond=function(){var n=I(function*(i){if(!bt(i)){const{message:a}=q("MISSING_OR_INVALID",`respond() params: ${i}`);throw new Error(a)}const{topic:o,response:s}=i;if(yield t.isValidSessionTopic(o),!function Wd(r){return!(ft(r)||ft(r.result)&&ft(r.error)||!Ai(r.id,!1)||!We(r.jsonrpc,!1))}(s)){const{message:a}=q("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(a)}});return function(i){return n.apply(this,arguments)}}(),this.isValidPing=function(){var n=I(function*(i){if(!bt(i)){const{message:s}=q("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(s)}const{topic:o}=i;yield t.isValidSessionOrPairingTopic(o)});return function(i){return n.apply(this,arguments)}}(),this.isValidEmit=function(){var n=I(function*(i){if(!bt(i)){const{message:l}=q("MISSING_OR_INVALID",`emit() params: ${i}`);throw new Error(l)}const{topic:o,event:s,chainId:a}=i;yield t.isValidSessionTopic(o);const{namespaces:h}=t.client.session.get(o);if(!fa(h,a)){const{message:l}=q("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(l)}if(!function Yd(r){return!(ft(r)||!We(r.name,!1))}(s)){const{message:l}=q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}if(!Xd(h,a,s.name)){const{message:l}=q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}});return function(i){return n.apply(this,arguments)}}(),this.isValidDisconnect=function(){var n=I(function*(i){if(!bt(i)){const{message:s}=q("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(s)}const{topic:o}=i;yield t.isValidSessionOrPairingTopic(o)});return function(i){return n.apply(this,arguments)}}(),this.validateSessionProps=(n,i)=>{Object.values(n).forEach(o=>{if(!We(o,!1)){const{message:s}=q("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(s)}})}}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){var e=this;this.client.core.relayer.on(ot_message,function(){var t=I(function*(n){const{topic:i,message:o}=n;if(e.ignoredPayloadTypes.includes(e.client.core.crypto.getPayloadType(o)))return;const s=yield e.client.core.crypto.decode(i,o);Mi(s)?(e.client.core.history.set(i,s),e.onRelayEventRequest({topic:i,payload:s})):Di(s)&&(yield e.client.core.history.resolve(s),e.onRelayEventResponse({topic:i,payload:s}))});return function(n){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.client.core.expirer.on(It_expired,function(){var t=I(function*(n){const{topic:i,id:o}=sa(n.target);if(o&&e.client.pendingRequest.keys.includes(o))return yield e.deletePendingSessionRequest(o,q("EXPIRED"),!0);i?e.client.session.keys.includes(i)&&(yield e.deleteSession(i,!0),e.client.events.emit("session_expire",{topic:i})):o&&(yield e.deleteProposal(o,!0),e.client.events.emit("proposal_expire",{id:o}))});return function(n){return t.apply(this,arguments)}}())}isValidPairingTopic(e){if(!We(e,!1)){const{message:t}=q("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Gt(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=q("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}isValidSessionTopic(e){var t=this;return I(function*(){if(!We(e,!1)){const{message:n}=q("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(!t.client.session.keys.includes(e)){const{message:n}=q("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Gt(t.client.session.get(e).expiry)){yield t.deleteSession(e);const{message:n}=q("EXPIRED",`session topic: ${e}`);throw new Error(n)}})()}isValidSessionOrPairingTopic(e){var t=this;return I(function*(){if(t.client.session.keys.includes(e))yield t.isValidSessionTopic(e);else{if(!t.client.core.pairing.pairings.keys.includes(e)){if(We(e,!1)){const{message:n}=q("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}{const{message:n}=q("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}t.isValidPairingTopic(e)}})()}isValidProposalId(e){var t=this;return I(function*(){if(!function Vd(r){return"number"==typeof r}(e)){const{message:n}=q("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!t.client.proposal.keys.includes(e)){const{message:n}=q("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Gt(t.client.proposal.get(e).expiry)){yield t.deleteProposal(e);const{message:n}=q("EXPIRED",`proposal id: ${e}`);throw new Error(n)}})()}}class w_ extends In{constructor(e,t){super(e,t,"proposal",qi),this.core=e,this.logger=t}}class E_ extends In{constructor(e,t){super(e,t,"session",qi),this.core=e,this.logger=t}}class S_ extends In{constructor(e,t){super(e,t,"request",qi),this.core=e,this.logger=t}}class Ji extends class $l{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}{constructor(e){var t;super(e),t=this,this.protocol="wc",this.version=2,this.name=Gi_name,this.events=new ct.exports.EventEmitter,this.on=(i,o)=>this.events.on(i,o),this.once=(i,o)=>this.events.once(i,o),this.off=(i,o)=>this.events.off(i,o),this.removeListener=(i,o)=>this.events.removeListener(i,o),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=function(){var i=I(function*(o){try{return yield t.engine.connect(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.pair=function(){var i=I(function*(o){try{return yield t.engine.pair(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.approve=function(){var i=I(function*(o){try{return yield t.engine.approve(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.reject=function(){var i=I(function*(o){try{return yield t.engine.reject(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.update=function(){var i=I(function*(o){try{return yield t.engine.update(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.extend=function(){var i=I(function*(o){try{return yield t.engine.extend(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.request=function(){var i=I(function*(o){try{return yield t.engine.request(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.respond=function(){var i=I(function*(o){try{return yield t.engine.respond(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.ping=function(){var i=I(function*(o){try{return yield t.engine.ping(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.emit=function(){var i=I(function*(o){try{return yield t.engine.emit(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.disconnect=function(){var i=I(function*(o){try{return yield t.engine.disconnect(o)}catch(s){throw t.logger.error(s.message),s}});return function(o){return i.apply(this,arguments)}}(),this.find=i=>{try{return this.engine.find(i)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=e?.name||Gi_name,this.metadata=e?.metadata||function ld(){return Ks()||{name:"",description:"",url:"",icons:[""]}}();const n=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Fe(xe.getDefaultLoggerOptions({level:e?.logger||Gi_logger}));this.core=e?.core||new l_(e),this.logger=xe.generateChildLogger(n,this.name),this.session=new E_(this.core,this.logger),this.proposal=new w_(this.core,this.logger),this.pendingRequest=new S_(this.core,this.logger),this.engine=new b_(this)}static init(e){return I(function*(){const t=new Ji(e);return yield t.initialize(),t})()}get context(){return xe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}initialize(){var e=this;return I(function*(){e.logger.trace("Initialized");try{yield e.core.start(),yield e.session.init(),yield e.proposal.init(),yield e.pendingRequest.init(),yield e.engine.init(),e.logger.info("SignClient Initialization Success")}catch(t){throw e.logger.info("SignClient Initialization Failure"),e.logger.error(t.message),t}})()}}var Xi={exports:{}};!function(r,e){var o,t=typeof self<"u"?self:dt,n=function(){function o(){this.fetch=!1,this.DOMException=t.DOMException}return o.prototype=t,new o}();o=n,function(s){var a_searchParams="URLSearchParams"in o,a_iterable="Symbol"in o&&"iterator"in Symbol,a_blob="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),a_formData="FormData"in o,a_arrayBuffer="ArrayBuffer"in o;if(a_arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(d){return d&&l.indexOf(Object.prototype.toString.call(d))>-1};function _(d){if("string"!=typeof d&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function v(d){return"string"!=typeof d&&(d=String(d)),d}function b(d){var S={next:function(){var M=d.shift();return{done:void 0===M,value:M}}};return a_iterable&&(S[Symbol.iterator]=function(){return S}),S}function m(d){this.map={},d instanceof m?d.forEach(function(S,M){this.append(M,S)},this):Array.isArray(d)?d.forEach(function(S){this.append(S[0],S[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(S){this.append(S,d[S])},this)}function T(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function j(d){return new Promise(function(S,M){d.onload=function(){S(d.result)},d.onerror=function(){M(d.error)}})}function $(d){var S=new FileReader,M=j(S);return S.readAsArrayBuffer(d),M}function g(d){if(d.slice)return d.slice(0);var S=new Uint8Array(d.byteLength);return S.set(new Uint8Array(d)),S.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?"string"==typeof d?this._bodyText=d:a_blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:a_formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:a_searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():a_arrayBuffer&&a_blob&&function h(d){return d&&DataView.prototype.isPrototypeOf(d)}(d)?(this._bodyArrayBuffer=g(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||f(d))?this._bodyArrayBuffer=g(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||("string"==typeof d?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a_searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a_blob&&(this.blob=function(){var d=T(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?T(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then($)}),this.text=function(){var d=T(this);if(d)return d;if(this._bodyBlob)return function P(d){var S=new FileReader,M=j(S);return S.readAsText(d),M}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function A(d){for(var S=new Uint8Array(d),M=new Array(S.length),D=0;D<S.length;D++)M[D]=String.fromCharCode(S[D]);return M.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a_formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}m.prototype.append=function(d,S){d=_(d),S=v(S);var M=this.map[d];this.map[d]=M?M+", "+S:S},m.prototype.delete=function(d){delete this.map[_(d)]},m.prototype.get=function(d){return d=_(d),this.has(d)?this.map[d]:null},m.prototype.has=function(d){return this.map.hasOwnProperty(_(d))},m.prototype.set=function(d,S){this.map[_(d)]=v(S)},m.prototype.forEach=function(d,S){for(var M in this.map)this.map.hasOwnProperty(M)&&d.call(S,this.map[M],M,this)},m.prototype.keys=function(){var d=[];return this.forEach(function(S,M){d.push(M)}),b(d)},m.prototype.values=function(){var d=[];return this.forEach(function(S){d.push(S)}),b(d)},m.prototype.entries=function(){var d=[];return this.forEach(function(S,M){d.push([M,S])}),b(d)},a_iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function p(d,S){var M=(S=S||{}).body;if(d instanceof p){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,S.headers||(this.headers=new m(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!M&&null!=d._bodyInit&&(M=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new m(S.headers)),this.method=function c(d){var S=d.toUpperCase();return w.indexOf(S)>-1?S:d}(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&M)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(M)}function k(d){var S=new FormData;return d.trim().split("&").forEach(function(M){if(M){var D=M.split("="),C=D.shift().replace(/\+/g," "),L=D.join("=").replace(/\+/g," ");S.append(decodeURIComponent(C),decodeURIComponent(L))}}),S}function K(d){var S=new m;return d.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(D){var C=D.split(":"),L=C.shift().trim();if(L){var z=C.join(":").trim();S.append(L,z)}}),S}function G(d,S){S||(S={}),this.type="default",this.status=void 0===S.status?200:S.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in S?S.statusText:"OK",this.headers=new m(S.headers),this.url=S.url||"",this._initBody(d)}p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},O.call(p.prototype),O.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},G.error=function(){var d=new G(null,{status:0,statusText:""});return d.type="error",d};var X=[301,302,303,307,308];G.redirect=function(d,S){if(-1===X.indexOf(S))throw new RangeError("Invalid status code");return new G(null,{status:S,headers:{location:d}})},s.DOMException=o.DOMException;try{new s.DOMException}catch{s.DOMException=function(d,S){this.message=d,this.name=S;var M=Error(d);this.stack=M.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function Z(d,S){return new Promise(function(M,D){var C=new p(d,S);if(C.signal&&C.signal.aborted)return D(new s.DOMException("Aborted","AbortError"));var L=new XMLHttpRequest;function z(){L.abort()}L.onload=function(){var H={status:L.status,statusText:L.statusText,headers:K(L.getAllResponseHeaders()||"")};H.url="responseURL"in L?L.responseURL:H.headers.get("X-Request-URL"),M(new G("response"in L?L.response:L.responseText,H))},L.onerror=function(){D(new TypeError("Network request failed"))},L.ontimeout=function(){D(new TypeError("Network request failed"))},L.onabort=function(){D(new s.DOMException("Aborted","AbortError"))},L.open(C.method,C.url,!0),"include"===C.credentials?L.withCredentials=!0:"omit"===C.credentials&&(L.withCredentials=!1),"responseType"in L&&a_blob&&(L.responseType="blob"),C.headers.forEach(function(H,ee){L.setRequestHeader(ee,H)}),C.signal&&(C.signal.addEventListener("abort",z),L.onreadystatechange=function(){4===L.readyState&&C.signal.removeEventListener("abort",z)}),L.send(typeof C._bodyInit>"u"?null:C._bodyInit)})}Z.polyfill=!0,o.fetch||(o.fetch=Z,o.Headers=m,o.Request=p,o.Response=G),s.Headers=m,s.Request=p,s.Response=G,s.fetch=Z,Object.defineProperty(s,"__esModule",{value:!0})}({}),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e}(Xi,Xi.exports);var lc=function kn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}(Xi.exports);const hc={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class xn{constructor(e){if(this.url=e,this.events=new ct.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!Ea(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(e=this.url){var t=this;return I(function*(){yield t.register(e)})()}close(){var e=this;return I(function*(){if(!e.isAvailable)throw new Error("Connection already closed");e.onClose()})()}send(e,t){var n=this;return I(function*(){n.isAvailable||(yield n.register());try{const i=jr(e),o=yield(yield lc(n.url,Object.assign(Object.assign({},hc),{body:i}))).json();n.onPayload({data:o})}catch(i){n.onError(e.id,i)}})()}register(e=this.url){var t=this;return I(function*(){if(!Ea(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(t.registering){const n=t.events.getMaxListeners();return(t.events.listenerCount("register_error")>=n||t.events.listenerCount("open")>=n)&&t.events.setMaxListeners(n+1),new Promise((i,o)=>{t.events.once("register_error",s=>{t.resetMaxListeners(),o(s)}),t.events.once("open",()=>{if(t.resetMaxListeners(),typeof t.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));i()})})}t.url=e,t.registering=!0;try{const n=jr({id:1,jsonrpc:"2.0",method:"test",params:[]});yield lc(e,Object.assign(Object.assign({},hc),{body:n})),t.onOpen()}catch(n){const i=t.parseError(n);throw t.events.emit("register_error",i),t.onClose(),i}})()}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?ri(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),o=wn(e,n.message||n.toString());this.events.emit("payload",o)}parseError(e,t=this.url){return ga(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}const dc="wc@2:universal_provider:",Jr_DEFAULT_CHAIN_CHANGED="default_chain_changed";function Yt(r,e,t){let n;const i=Zi(r);return e.rpcMap&&(n=e.rpcMap[i]),n||(n=`https://rpc.walletconnect.com/v1?chainId=eip155:${i}&projectId=${t}`),n}function Zi(r){return r.includes("eip155")?Number(r.split(":")[1]):Number(r)}const Fn=(r,e)=>{const t=n=>{n.request!==e.request||n.topic!==e.topic||(r.events.removeListener("session_request_sent",t),function N_(){if(typeof window<"u")try{const r=window.localStorage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(r){const e=JSON.parse(r);window.open(e.href,"_self","noreferrer noopener")}}catch(r){console.error(r)}}())};r.on("session_request_sent",t)};class R_{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}request(e){var t=this;return I(function*(){var n;switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return t.getAccounts();case"wallet_switchEthereumChain":return t.handleSwitchChain(e.request.params?null==(n=e.request.params[0])?void 0:n.chainId:"0x0"),null;case"eth_chainId":return parseInt(t.getDefaultChain())}return t.namespace.methods.includes(e.request.method)?(Fn(t.client,e),yield t.client.request(e)):t.getHttpProvider().request(e.request)})()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const n=Zi(e);if(!this.httpProviders[n]){const i=t||Yt(`${this.name}:${n}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${n}`);this.setHttpProvider(n,i)}this.chainId=n,this.events.emit(Jr_DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const n=t||Yt(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new qr(new xn(n))}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const n=Zi(t);e[n]=this.createHttpProvider(n)}),e}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}handleSwitchChain(e){const t=parseInt(e,16);(function F_(r,e){if(!e.includes(r))throw new Error(`Chain '${r}' not approved. Please use one of the following: ${e.toString()}`)})(`${this.name}:${t}`,this.namespace.chains),this.setDefaultChain(`${t}`)}}class T_{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(Fn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const n=t||Yt(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Jr_DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Yt(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new qr(new xn(n))}}class L_{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(Fn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||Yt(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Jr_DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Yt(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new qr(new xn(n))}}class C_{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(Fn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||Yt(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Jr_DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Yt(e,this.namespace);return typeof n>"u"?void 0:new qr(new xn(n))}}var j_=Object.defineProperty,U_=Object.defineProperties,M_=Object.getOwnPropertyDescriptors,yc=Object.getOwnPropertySymbols,D_=Object.prototype.hasOwnProperty,k_=Object.prototype.propertyIsEnumerable,gc=(r,e,t)=>e in r?j_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,An=(r,e)=>{for(var t in e||(e={}))D_.call(e,t)&&gc(r,t,e[t]);if(yc)for(var t of yc(e))k_.call(e,t)&&gc(r,t,e[t]);return r},Qi=(r,e)=>U_(r,M_(e));class Nn{constructor(e){this.events=new ct.exports,this.rpcProviders={},this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Fe(xe.getDefaultLoggerOptions({level:e?.logger||"error"}))}static init(e){return I(function*(){const t=new Nn(e);return yield t.initialize(),t})()}request(e,t){var n=this;return I(function*(){const[i,o]=n.validateChain(t);if(!n.session)throw new Error("Please call connect() before request()");return yield n.getProvider(i).request({request:An({},e),chainId:`${i}:${o}`,topic:n.session.topic})})()}sendAsync(e,t,n){this.request(e,n).then(i=>t(null,i)).catch(i=>t(i,void 0))}enable(){var e=this;return I(function*(){if(!e.client)throw new Error("Sign Client not initialized");return e.session||(yield e.connect({namespaces:e.namespaces,optionalNamespaces:e.optionalNamespaces,sessionProperties:e.sessionProperties})),yield e.requestAccounts()})()}disconnect(){var e=this;return I(function*(){var t;if(!e.session)throw new Error("Please call connect() before enable()");yield e.client.disconnect({topic:null==(t=e.session)?void 0:t.topic,reason:He("USER_DISCONNECTED")}),yield e.cleanup()})()}connect(e){var t=this;return I(function*(){if(!t.client)throw new Error("Sign Client not initialized");if(t.setNamespaces(e),yield t.cleanupPendingPairings(),!e.skipPairing)return yield t.pair(e.pairingTopic)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}pair(e){var t=this;return I(function*(){const{uri:n,approval:i}=yield t.client.connect({pairingTopic:e,requiredNamespaces:t.namespaces,optionalNamespaces:t.optionalNamespaces,sessionProperties:t.sessionProperties});return n&&(t.uri=n,t.events.emit("display_uri",n)),t.session=yield i(),t.createProviders(),t.onConnect(),t.session})()}setDefaultChain(e,t){try{const[n,i]=this.validateChain(e);this.getProvider(n).setDefaultChain(i,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}cleanupPendingPairings(e={}){var t=this;return I(function*(){t.logger.info("Cleaning up inactive pairings...");const n=t.client.pairing.getAll();if(Kr(n)){for(const i of n)e.deletePairings?t.client.core.expirer.set(i.topic,0):yield t.client.core.relayer.subscriber.unsubscribe(i.topic);t.logger.info(`Inactive pairings cleared: ${n.length}`)}})()}checkStorage(){var e=this;return I(function*(){e.namespaces=(yield e.getFromStore("namespaces"))||{},e.optionalNamespaces=(yield e.getFromStore("optionalNamespaces"))||{},e.client.session.length&&(e.session=e.client.session.get(e.client.session.keys[e.client.session.keys.length-1]),e.createProviders())})()}initialize(){var e=this;return I(function*(){e.logger.trace("Initialized"),yield e.createClient(),yield e.checkStorage(),e.registerEventListeners()})()}createClient(){var e=this;return I(function*(){e.client=e.providerOpts.client||(yield Ji.init({logger:e.providerOpts.logger||"error",relayUrl:e.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:e.providerOpts.projectId,metadata:e.providerOpts.metadata,storageOptions:e.providerOpts.storageOptions,name:e.providerOpts.name})),e.logger.trace("SignClient Initialized")})()}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");Object.keys(this.namespaces).forEach(e=>{var t,n,i;const o=(null==(t=this.session)?void 0:t.namespaces[e].accounts)||[],s=function A_(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}(o),a=Qi(An({},Object.assign(this.namespaces[e],null!=(i=null==(n=this.optionalNamespaces)?void 0:n[e])?i:{})),{accounts:o,chains:s});switch(e){case"eip155":this.rpcProviders[e]=new R_({client:this.client,namespace:a,events:this.events});break;case"solana":this.rpcProviders[e]=new T_({client:this.client,namespace:a,events:this.events});break;case"cosmos":this.rpcProviders[e]=new L_({client:this.client,namespace:a,events:this.events});break;case"polkadot":break;case"cip34":this.rpcProviders[e]=new C_({client:this.client,namespace:a,events:this.events})}})}registerEventListeners(){var e=this;if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:n}=t,{event:i}=n;"accountsChanged"===i.name?this.events.emit("accountsChanged",i.data):"chainChanged"===i.name?this.onChainChanged(n.chainId):this.events.emit(i.name,i.data),this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:n})=>{var i;const{namespaces:o}=n,s=null==(i=this.client)?void 0:i.session.get(t);this.session=Qi(An({},s),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:n})}),this.client.on("session_delete",function(){var t=I(function*(n){yield e.cleanup(),e.events.emit("session_delete",n),e.events.emit("disconnect",Qi(An({},He("USER_DISCONNECTED")),{data:n.topic}))});return function(n){return t.apply(this,arguments)}}()),this.on(Jr_DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:n,sessionProperties:i}=e;if(!t||!Object.keys(t).length)throw new Error("Namespaces must be not empty");this.namespaces=t,this.optionalNamespaces=n,this.sessionProperties=i,this.persist("namespaces",t),this.persist("optionalNamespaces",n)}validateChain(e){const[t,n]=e?.split(":")||["",""];if(t&&!Object.keys(this.namespaces).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&n)return[t,n];const i=Object.keys(this.namespaces)[0];return[i,this.rpcProviders[i].getDefaultChain()]}requestAccounts(){var e=this;return I(function*(){const[t]=e.validateChain();return yield e.getProvider(t).requestAccounts()})()}onChainChanged(e,t=!1){const[n,i]=this.validateChain(e);t||this.getProvider(n).setDefaultChain(i),this.namespaces[n].defaultChain=i,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i)}onConnect(){this.events.emit("connect",{session:this.session})}cleanup(){var e=this;return I(function*(){e.session=void 0,yield e.cleanupPendingPairings({deletePairings:!0})})()}persist(e,t){this.client.core.storage.setItem(`${dc}/${e}`,t)}getFromStore(e){var t=this;return I(function*(){return yield t.client.core.storage.getItem(`${dc}/${e}`)})()}}hr.UniversalProvider=Nn,hr.default=Nn,Object.defineProperty(hr,"__esModule",{value:!0})}(en)},4813:Dn=>{"use strict";Dn.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}}]);