/*! For license information please see 541.54c5d126.chunk.js.LICENSE.txt */
(self.webpackChunkticket_issuer_website=self.webpackChunkticket_issuer_website||[]).push([[541],{91071:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComposedStore=void 0;const n=r(53728);class i extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}t.ComposedStore=i},6909:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MergedStore=void 0;const n=r(53728);class i extends n.ObservableStore{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}t.MergedStore=i},53728:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableStore=void 0;const i=n(r(67109));class o extends i.default{constructor(e){super(),this._state=e||{}}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"===typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}t.ObservableStore=o},77822:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.storeAsStream=void 0;const n=r(41064);class i extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}t.storeAsStream=function(e){return new i(e)}},53295:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(77822),t),i(r(91071),t),i(r(6909),t),i(r(53728),t),i(r(8522),t)},8522:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.storeTransformStream=void 0;const n=r(65863);t.storeTransformStream=function(e){return n.obj(((t,r,n)=>{try{return void n(null,e(t))}catch(i){return void n(i)}}))}},95541:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getTorusProviderInstance:()=>Ft});var n=r(45987),i=r(4942),o=r(2645),s=r.n(o),a=r(88787);const c={ROPSTEN:"ropsten",MAINNET:"mainnet",POLYGON:"polygon-mainnet"},u=[{inputs:[{internalType:"string",name:"_verifier",type:"string"},{internalType:"bytes32",name:"hashedVerifierId",type:"bytes32"}],name:"getNodeSet",outputs:[{internalType:"uint256",name:"currentEpoch",type:"uint256"},{internalType:"string[]",name:"torusNodeEndpoints",type:"string[]"},{internalType:"uint256[]",name:"torusNodePubX",type:"uint256[]"},{internalType:"uint256[]",name:"torusNodePubY",type:"uint256[]"},{internalType:"uint256[]",name:"torusIndexes",type:"uint256[]"}],stateMutability:"view",type:"function"}];class l{constructor(){let e,{network:t=c.MAINNET,proxyAddress:r="0xf20336e16B5182637f09821c27BDe29b0AFcfe80"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,"_currentEpoch","19"),(0,i.Z)(this,"_torusNodeEndpoints",["https://torus-19.torusnode.com/jrpc","https://torus-node.ens.domains/jrpc","https://torus-node.matic.network/jrpc","https://torus.zilliqa.network/jrpc","https://torus-mainnet.cosmos.network/jrpc","https://torus2.etherscan.com/jrpc","https://torus-node-v2.skalelabs.com/jrpc","https://torus-node.binancex.dev/jrpc","https://torusnode.ont.io/jrpc"]),(0,i.Z)(this,"_torusNodePub",[{X:"bbe83c64177c3775550e6ba6ac2bc059f6847d644c9e4894e42c60d7974d8c2b",Y:"82b49a7caf70def38cdad2740af45c1e4f969650105c5019a29bb18b21a9acb5"},{X:"c208cac4ef9a47d386097a9c915b28e9cb89213abee8d26a17198ee261201b0d",Y:"c7db2fe4631109f40833de9dc78d07e35706549ee48fa557b33e4e75e1047873"},{X:"ca1766bb426d4ca5582818a0c5439d560ea64f5baa060793ab29dd3d0ceacfe",Y:"d46c1d08c40e1306e1bca328c2287b8268166b11a1ba4b8442ea2ad0c5e32152"},{X:"c3934dd2f6f4b3d2e1e398cc501e143c1e1a381b52feb6d1525af34d16253768",Y:"71f5141a5035799099f5ea3e241e66946bc55dc857ac3bd7d6fcdb8dcd3eeeef"},{X:"22e66f1929631d00bf026227581597f085fd94fd952fc0dca9f0833398b5c064",Y:"6088b3912e10a1e9d50355a609c10db7d188f16a2e2fd7357e51bf4f6a74f0a1"},{X:"9dc9fa410f3ce9eb70df70cdea00a49f2c4cc7a31c08c0dab5f863ed35ff5139",Y:"627a291cb87a75c61da3f65d6818e1e05e360217179817ed27e8c73bca7ec122"},{X:"118b9fc07e97b096d899b9f6658463ce6a8caa64038e37fc969df4e6023dd8c6",Y:"baf9fa4e51770f4796ea165dd03a769b8606681a38954a0a92c4cbffd6609ce9"},{X:"8a6d8b925da15a273dec3d8f8395ec35cd6878f274b2b180e4e106999db64043",Y:"96f67f870c157743da0b1eb84d89bf30500d74dc84c11f501ee1cb013acc8c46"},{X:"39cecb62e863729f572f7dfc46c24867981bf04bb405fed0df39e33984bfade5",Y:"61c2364434012e68a2be2e9952805037e52629d7762fafc8e10e9fb5bad8f790"}]),(0,i.Z)(this,"_torusIndexes",[1,2,3,4,5,6,7,8,9]),(0,i.Z)(this,"_network",c.MAINNET),(0,i.Z)(this,"nodeListAddress",void 0),(0,i.Z)(this,"updated",void 0),(0,i.Z)(this,"nodeListContract",void 0);try{e=new URL(t).href}catch(n){const r="b8cdb0e4cff24599a286bf8e87ff1c96";e="https://".concat(t,".infura.io/v3/").concat(r)}s().setProvider(e),this.nodeListContract=new(s())(u,r),this.nodeListAddress=r,this.updated=!1,this._network=t}get _nodeDetails(){return{currentEpoch:this._currentEpoch,nodeListAddress:this.nodeListAddress,torusNodeEndpoints:this._torusNodeEndpoints,torusNodePub:this._torusNodePub,torusIndexes:this._torusIndexes,updated:this.updated}}async getNodeDetails(e){let{skip:t=!1,verifier:r,verifierId:n}=e;try{if(t&&this._network===c.MAINNET)return this._nodeDetails;if(this.updated&&this._network===c.MAINNET)return this._nodeDetails;const e=(0,a.keccak256)(n),i=await this.nodeListContract.methods.getNodeSet(r,e).call(),{currentEpoch:o,torusNodeEndpoints:s,torusNodePubX:u,torusNodePubY:l,torusIndexes:d}=i;this._currentEpoch=o,this._torusIndexes=d.map((e=>Number(e)));const h=[],f=[];for(let t=0;t<s.length;t+=1){const e=s[t],r=u[t],n=l[t],i="https://".concat(e.split(":")[0],"/jrpc");h.push(i),f.push({X:(0,a.toHex)(r).replace("0x",""),Y:(0,a.toHex)(n).replace("0x","")})}return this._torusNodeEndpoints=h,this._torusNodePub=f,this.updated=!0,this._nodeDetails}catch(i){if(this._network===c.MAINNET)return this._nodeDetails;throw i}}}var d=r(57381),h=r.n(d),f=r(62895),p=r.n(f);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const b=p().getLogger("http-helpers");b.setLevel(f.levels.INFO);let v="torus-default",m="";function w(e){m=e}function _(e){v=e}function k(){const e={};return v&&(e["x-api-key"]=v),m&&(e["x-embed-host"]=m),e}function S(e){b.info("Response: ".concat(e.status," ").concat(e.statusText)),b.info("Url: ".concat(e.url))}const x=(e,t)=>{const r=new Promise(((t,r)=>{const n=setTimeout((()=>{clearTimeout(n),r(new Error("Timed out in ".concat(e,"ms")))}),e)}));return Promise.race([t,r])},O=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={mode:"cors",headers:{}};r.useAPIKey&&(n.headers=y(y({},n.headers),k()));const i=h()(n,t,{method:"GET"}),o=await fetch(e,i);if(o.ok)return o.json();throw S(o),o},P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};n.useAPIKey&&(i.headers=y(y({},i.headers),k()));const o=h()(i,r,{method:"POST"});return n.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t),x(n.timeout||6e4,fetch(e,o).then((e=>{if(e.ok)return e.json();throw S(e),e})))},E=(e,t)=>({jsonrpc:"2.0",method:e,id:10,params:t});var j=r(90723),C=r(12525),A=r.n(C),T=(r(1827),r(51321)),I=r.n(T);r(19778).Buffer;URL;var M=r(47465),L=r(11053),R=r.n(L),D=r(27037),N=r(69578),U=r.n(N),q=r(14876),Z=r.n(q),B=r(99306),W=r.n(B);function F(){}const H="ACK";class V extends j.Duplex{constructor(e){let{name:t,target:r,targetWindow:n=window,targetOrigin:o="*"}=e;if(super({objectMode:!0}),(0,i.Z)(this,"_init",void 0),(0,i.Z)(this,"_haveSyn",void 0),(0,i.Z)(this,"_name",void 0),(0,i.Z)(this,"_target",void 0),(0,i.Z)(this,"_targetWindow",void 0),(0,i.Z)(this,"_targetOrigin",void 0),(0,i.Z)(this,"_onMessage",void 0),(0,i.Z)(this,"_synIntervalId",void 0),!t||!r)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=r,this._targetWindow=n,this._targetOrigin=o,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write("BRK",null,F),this._haveSyn=!1,this._init=!1}_handShake(){this._write("SYN",null,F),this.cork()}_onData(e){if(this._init)if("BRK"===e)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}else"SYN"===e?(this._haveSyn=!0,this._write(H,null,F)):e===H&&(this._init=!0,this._haveSyn||this._write(H,null,F),this.uncork())}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;"*"!==this._targetOrigin&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||"object"!==typeof t||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,r){this._postMessage(e),r()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}function K(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout((()=>{throw n}))}}class z extends M.EventEmitter{emit(e){let t="error"===e;const r=this._events;if(void 0!==r)t=t&&void 0===r.error;else if(!t)return!1;for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(t){let e;if(i.length>0&&([e]=i),e instanceof Error)throw e;const t=new Error("Unhandled error.".concat(e?" (".concat(e.message,")"):""));throw t.context=e,t}const s=r[e];if(void 0===s)return!1;if("function"===typeof s)K(s,this,i);else{const e=s.length,t=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(s);for(let r=0;r<e;r+=1)K(t[r],this,i)}return!0}}class Y extends Error{constructor(e){let{code:t,message:r,data:n}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!r||"string"!==typeof r)throw new Error("message must be string");super(r),(0,i.Z)(this,"code",void 0),(0,i.Z)(this,"data",void 0),this.code=t,void 0!==n&&(this.data=n)}toString(){return R()({code:this.code,message:this.message,data:this.data,stack:this.stack})}}function G(){const e={};const t=new z;const r=new j.Duplex({objectMode:!0,read:function(){return!1},write:function(r,n,i){let o;try{!r.id?function(e){t.emit("notification",e)}(r):function(t){const r=e[t.id];if(!r)throw new Error('StreamMiddleware - Unknown response id "'.concat(t.id,'"'));delete e[t.id],Object.assign(r.res,t),setTimeout(r.end)}(r)}catch(s){o=s}i(o)}});return{events:t,middleware:(t,n,i,o)=>{r.push(t),e[t.id]={req:t,res:n,next:i,end:o}},stream:r}}function X(){return(e,t,r,n)=>{const i=e.id,o=A()(32).toString("hex");e.id=o,t.id=o,r((r=>{e.id=i,t.id=i,r()}))}}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}class $ extends z{constructor(){super(),(0,i.Z)(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,r){const n=[];let i=null,o=!1;for(const s of r)if([i,o]=await $._runMiddleware(e,t,s,n),o)break;return[i,o,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise((i=>{const o=e=>{const r=e||t.error;r&&(t.error=(0,D.serializeError)(r)),i([r,!0])},s=e=>{t.error?o(t.error):(e&&("function"!==typeof e&&o(new Y({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),n.push(e)),i([null,!1]))};try{r(e,t,s,o)}catch(a){o(a)}}))}static async _runReturnHandlers(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new Y({code:-32603,message:"Response has no error or result for request"});if(!r)throw new Y({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!==typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[i,o,s]=await $._runAllMiddleware(e,t,this._middleware);return o?(await $._runReturnHandlers(s),n(i)):r((async e=>{try{await $._runReturnHandlers(s)}catch(t){return e(t)}return e()}))}catch(i){return n(i)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(r){if(t)return t(r);throw r}}_promiseHandle(e){return new Promise((t=>{this._handle(e,((e,r)=>{t(r)}))}))}async _handle(e,t){if(!e||Array.isArray(e)||"object"!==typeof e){const e=new Y({code:-32603,message:"request must be plain object"});return t(e,{id:void 0,jsonrpc:"2.0",error:e})}if("string"!==typeof e.method){const r=new Y({code:-32603,message:"method must be string"});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),n={id:r.id,jsonrpc:r.jsonrpc};let o=null;try{await this._processRequest(r,n)}catch(s){o=s}return o&&(delete n.result,n.error||(n.error=(0,D.serializeError)(o))),t(o,n)}async _processRequest(e,t){const[r,n,i]=await $._runAllMiddleware(e,t,this._middleware);if($._checkForCompletion(e,t,n),await $._runReturnHandlers(i),r)throw r}}class Q extends j.Duplex{constructor(e){let{parent:t,name:r}=e;super({objectMode:!0}),(0,i.Z)(this,"_parent",void 0),(0,i.Z)(this,"_name",void 0),this._parent=t,this._name=r}_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const re=Symbol("IGNORE_SUBSTREAM");class ne extends j.Duplex{constructor(){super(te(te({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{objectMode:!0})),(0,i.Z)(this,"_substreams",void 0),(0,i.Z)(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error('ObjectMultiplex - Substream for name "'.concat(e,'" already exists'));const t=new Q({parent:this,name:e});return this._substreams[e]=t,function(e,t){const r=Z()(t);U()(e,{readable:!1},r),U()(e,{writable:!1},r)}(this,(e=>t.destroy(e||void 0))),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error('ObjectMultiplex - Substream for name "'.concat(e,'" already exists'));this._substreams[e]=re}_read(){}_write(e,t,r){const{name:n,data:i}=e;if(!n)return window.console.warn('ObjectMultiplex - malformed chunk without name "'.concat(e,'"')),r();const o=this._substreams[n];return o?(o!==re&&o.push(i),r()):(window.console.warn('ObjectMultiplex - orphaned data for stream "'.concat(n,'"')),r())}}var ie=r(71002);function oe(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(u){return void r(u)}a.done?t(c):Promise.resolve(c).then(n,i)}function se(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){oe(o,n,i,s,a,"next",e)}function a(e){oe(o,n,i,s,a,"throw",e)}s(void 0)}))}}var ae=r(15671),ce=r(43144),ue=r(64687),le=r.n(ue),de=r(19308),he=r(80518),fe=r.n(he),pe=r(6289),ge=r(35941),ye=r.n(ge),be=r(97326),ve=r(89611);function me(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,ve.Z)(e,t)}function we(e,t){if(t&&("object"===(0,ie.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,be.Z)(e)}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}function ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Se(e,t,r){return Se=ke()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&(0,ve.Z)(i,r.prototype),i},Se.apply(null,arguments)}function xe(e){var t="function"===typeof Map?new Map:void 0;return xe=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Se(e,arguments,_e(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,ve.Z)(n,e)},xe(e)}var Oe=r(42982),Pe=r(19778).Buffer,Ee=p().getLogger("torus.js");function je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_e(e);if(t){var i=_e(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return we(this,r)}}Ee.disableAll();var Ce=function(e){me(r,e);var t=je(r);function r(e){var n,o=e.errors,s=e.responses,a=e.predicate;return(0,ae.Z)(this,r),n=t.call(this,"Unable to resolve enough promises."),(0,i.Z)((0,be.Z)(n),"errors",void 0),(0,i.Z)((0,be.Z)(n),"responses",void 0),(0,i.Z)((0,be.Z)(n),"predicate",void 0),n.errors=o,n.responses=s,n.predicate=a,n}return(0,ce.Z)(r)}(xe(Error)),Ae=function(e,t){return new Promise((function(r,n){var i,o=0,s={resolved:!1},a=new Array(e.length).fill(void 0),c=new Array(e.length).fill(void 0);return e.forEach((function(u,l){return u.then((function(e){c[l]=e})).catch((function(e){a[l]=e})).finally((function(){if(!s.resolved)return t(c.slice(0),s).then((function(e){s.resolved=!0,r(e)})).catch((function(e){i=e})).finally((function(){if((o+=1)===e.length){var t=Object.values(c.reduce((function(e,t){if(t){var r,n=t.id,i=t.error;(null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.length)>0&&(i.data.startsWith("Error occurred while verifying params")?e[n]=(o=i.data).charAt(0).toUpperCase()+o.slice(1):e[n]=i.data)}var o;return e}),{}));if(t.length>0){var r=t.length>1?"\n".concat(t.map((function(e){return"\u2022 ".concat(e)})).join("\n")):t[0];n(new Error(r))}else{var s;n(new Ce({errors:a,responses:c,predicate:(null===(s=i)||void 0===s?void 0:s.message)||i}))}}}))}))}))}))};function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_e(e);if(t){var i=_e(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return we(this,r)}}var Le=function(e){me(r,e);var t=Me(r);function r(){return(0,ae.Z)(this,r),t.apply(this,arguments)}return(0,ce.Z)(r)}(xe(Error)),Re=function e(t,r){var n=t;if("number"===typeof n&&(n=Array.from({length:n},(function(e,t){return t}))),r>n.length||r<=0)return[];if(r===n.length)return[n];if(1===r)return n.reduce((function(e,t){return[].concat((0,Oe.Z)(e),[[t]])}),[]);for(var i=[],o=[],s=0;s<=n.length-r+1;s+=1){o=e(n.slice(s+1),r-1);for(var a=0;a<o.length;a+=1)i.push([n[s]].concat((0,Oe.Z)(o[a])))}return i},De=function(e,t){for(var r={},n=0;n<e.length;n+=1){var i=ye()(e[n]);if(r[i]=r[i]?r[i]+1:1,r[i]===t)return e[n]}},Ne=function(){var e=se(le().mark((function e(t,r,n){var i;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.map((function(e){return P(e,E("VerifierLookupRequest",{verifier:r,verifier_id:n.toString()})).catch((function(e){return Ee.error("lookup request failed",e)}))})),e.abrupt("return",Ae(i,(function(e){var r=e.filter((function(e){return e})),n=De(r.map((function(e){return e&&e.error})),1+~~(t.length/2)),i=De(r.map((function(e){return e&&e.result})),1+~~(t.length/2));return i||n?Promise.resolve({keyResult:i,errorResult:n}):Promise.reject(new Error("invalid results ".concat(JSON.stringify(e))))})));case 2:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Ue=function(e,t,r,n){return new Promise((function(i,o){setTimeout((function(){Ne(e,t,r).then(i).catch(o)}),n)}))},qe=function(){var e=se(le().mark((function e(t){var r,n,i,o,s,a,c,u,l,d,h,f;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.endpoints,n=t.torusNodePubs,i=t.lastPoint,o=t.firstPoint,s=t.verifier,a=t.verifierId,c=t.signerHost,u=t.network,void 0===i?(l=Math.floor(Math.random()*r.length),d=l):l=i%r.length,l!==o){e.next=4;break}throw new Error("Looped through all");case 4:return void 0!==o&&(d=o),h=E("KeyAssign",{verifier:s,verifier_id:a.toString()}),e.prev=6,e.next=9,P(c,h,{headers:{pubKeyX:n[l].X,pubKeyY:n[l].Y,network:u}},{useAPIKey:!0});case 9:return f=e.sent,e.next=12,P(r[l],Ie(Ie({},h),f),{headers:{"Content-Type":"application/json; charset=utf-8"}});case 12:return e.abrupt("return",e.sent);case 15:if(e.prev=15,e.t0=e.catch(6),Ee.error(e.t0),!["Timed out","TypeError: Failed to fetch","TypeError: cancelled","TypeError: NetworkError when attempting to fetch resource."].includes(e.t0.message)){e.next=21;break}return e.abrupt("return",qe({endpoints:r,torusNodePubs:n,lastPoint:l+1,firstPoint:d,verifier:s,verifierId:a,signerHost:c,network:u}));case 21:throw new Error("Sorry, the Torus Network that powers Web3Auth is currently very busy.\n    We will generate your key in time. Pls try again later. \n\n    ".concat(e.t0.message||""));case 22:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();function Ze(e){var t=I()("keccak256").update(e).digest().toString("hex");return"0x".concat(t)}function Be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.enableOneKey,n=void 0!==r&&r,o=t.metadataHost,s=void 0===o?"https://metadata.tor.us":o,a=t.allowHost,c=void 0===a?"https://signer.tor.us/api/allow":a,u=t.signerHost,l=void 0===u?"https://signer.tor.us/api/sign":u,d=t.serverTimeOffset,h=void 0===d?0:d,f=t.network,p=void 0===f?"mainnet":f;(0,ae.Z)(this,e),(0,i.Z)(this,"metadataHost",void 0),(0,i.Z)(this,"allowHost",void 0),(0,i.Z)(this,"serverTimeOffset",void 0),(0,i.Z)(this,"enableOneKey",void 0),(0,i.Z)(this,"signerHost",void 0),(0,i.Z)(this,"network",void 0),(0,i.Z)(this,"ec",void 0),this.ec=new pe.ec("secp256k1"),this.metadataHost=s,this.allowHost=c,this.enableOneKey=n,this.serverTimeOffset=h||0,this.signerHost=l,this.network=p}return(0,ce.Z)(e,[{key:"getUserTypeAndAddress",value:function(){var e=se(le().mark((function e(t,r,n){var i,o,s,a,c,u,l,d,h,f,p,g,y,b,v,m,w,_,k=arguments;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.verifier,o=n.verifierId,s=k.length>3&&void 0!==k[3]&&k[3],e.next=4,Ne(t,i,o);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(a=e.t0,c=a.keyResult,u=a.errorResult,l=!1,!u||!JSON.stringify(u).includes("Verifier + VerifierID has not yet been assigned")){e.next=23;break}if(s){e.next=14;break}throw new Error("Verifier + VerifierID has not yet been assigned");case 14:return e.next=16,qe({endpoints:t,torusNodePubs:r,lastPoint:void 0,firstPoint:void 0,verifier:i,verifierId:o,signerHost:this.signerHost,network:this.network});case 16:return e.next=18,Ue(t,i,o,1e3);case 18:h=e.sent,d=null===h||void 0===h?void 0:h.keyResult,l=!0,e.next=28;break;case 23:if(!c){e.next=27;break}d=c,e.next=28;break;case 27:throw new Error("node results do not match at first lookup ".concat(JSON.stringify(c||{}),", ").concat(JSON.stringify(u||{})));case 28:if(!d){e.next=58;break}return f=d.keys[0],p=f.pub_key_X,g=f.pub_key_Y,e.prev=30,e.next=33,this.getOrSetNonce(p,g,void 0,!l);case 33:y=e.sent,b=new(fe())(y.nonce||"0",16),e.next=40;break;case 37:throw e.prev=37,e.t1=e.catch(30),new Le;case 40:if("v1"!==y.typeOfUser){e.next=44;break}v=this.ec.keyFromPublic({x:p,y:g}).getPublic().add(this.ec.keyFromPrivate(b.toString(16)).getPublic()),e.next=49;break;case 44:if("v2"!==y.typeOfUser){e.next=48;break}v=this.ec.keyFromPublic({x:p,y:g}).getPublic().add(this.ec.keyFromPublic({x:y.pubNonce.x,y:y.pubNonce.y}).getPublic()),e.next=49;break;case 48:throw new Error("getOrSetNonce should always return typeOfUser.");case 49:if(m=v.getX().toString(16),w=v.getY().toString(16),_=this.generateAddressFromPubKey(v.getX(),v.getY()),"v1"!==y.typeOfUser){e.next=56;break}return e.abrupt("return",{typeOfUser:y.typeOfUser,nonce:b,X:m,Y:w,address:_});case 56:if("v2"!==y.typeOfUser){e.next=58;break}return e.abrupt("return",{typeOfUser:y.typeOfUser,nonce:b,pubNonce:y.pubNonce,upgraded:y.upgraded,X:m,Y:w,address:_});case 58:throw new Error("node results do not match at final lookup ".concat(JSON.stringify(c||{}),", ").concat(JSON.stringify(u||{})));case 59:case"end":return e.stop()}}),e,this,[[30,37]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"setCustomKey",value:function(){var e=se(le().mark((function e(t){var r,n,i,o,s,a,c,u,l;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.privKeyHex,n=t.metadataNonce,i=t.torusKeyHex,o=t.customKeyHex,i?s=new(fe())(i,16):(a=new(fe())(r,16),s=a.sub(n).umod(this.ec.curve.n)),c=new(fe())(o,16),u=c.sub(s).umod(this.ec.curve.n),l=this.generateMetadataParams(u.toString(16),s),e.next=7,this.setMetadata(l);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveShares",value:function(){var e=se(le().mark((function e(t,r,n,i,o){var s,a,c,u,l,d,h,f,p,g=this,y=arguments;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>5&&void 0!==y[5]?y[5]:{},a=[],e.next=4,O(this.allowHost,{headers:{verifier:n,verifier_id:i.verifier_id,network:this.network}},{useAPIKey:!0});case 4:for(c=(0,de.oq)(),u=(0,de.rc)(c).toString("hex"),l=u.slice(2,66),d=u.slice(66),h=Ze(o),f=0;f<t.length;f+=1)p=P(t[f],E("CommitmentRequest",{messageprefix:"mug00",tokencommitment:h.slice(2),temppubx:l,temppuby:d,verifieridentifier:n})).catch((function(e){Ee.error("commitment",e)})),a.push(p);return e.abrupt("return",Ae(a,(function(e){return e.filter((function(e){return!(!e||"object"!==(0,ie.Z)(e))&&!e.error})).length>=3*~~(t.length/4)+1?Promise.resolve(e):Promise.reject(new Error("invalid ".concat(JSON.stringify(e))))})).then((function(e){for(var a=[],u=[],l=0;l<e.length;l+=1)e[l]&&u.push(e[l].result);for(var d=0;d<t.length;d+=1){var h=P(t[d],E("ShareRequest",{encrypted:"yes",item:[We(We({},i),{},{idtoken:o,nodesignatures:u,verifieridentifier:n},s)]})).catch((function(e){return Ee.error("share req",e)}));a.push(h)}return Ae(a,function(){var e=se(le().mark((function e(n,i){var o,s,a,u,l,d,h,f,p,y,b,v,m,w,_,k,S;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.filter((function(e){return e})),s=De(n.map((function(e){return e&&e.result&&e.result.keys[0].PublicKey})),1+~~(t.length/2)),!(o.length>=1+~~(t.length/2)&&s)){e.next=28;break}for(a=[],u=[],l=0;l<n.length;l+=1)(null===(f=n[l])||void 0===f||null===(d=f.result)||void 0===d||null===(h=d.keys)||void 0===h?void 0:h.length)>0?(f.result.keys.sort((function(e,t){return new(fe())(e.Index,16).cmp(new(fe())(t.Index,16))})),(p=f.result.keys[0]).Metadata?(y={ephemPublicKey:Pe.from(p.Metadata.ephemPublicKey,"hex"),iv:Pe.from(p.Metadata.iv,"hex"),mac:Pe.from(p.Metadata.mac,"hex")},a.push((0,de.pe)(c,We(We({},y),{},{ciphertext:Pe.from(Pe.from(p.Share,"base64").toString("binary").padStart(64,"0"),"hex")})).catch((function(e){return Ee.debug("share decryption",e)})))):a.push(Promise.resolve(Pe.from(p.Share.padStart(64,"0"),"hex")))):a.push(Promise.resolve(void 0)),u.push(new(fe())(r[l],16));return e.next=8,Promise.all(a);case 8:if(b=e.sent,!i.resolved){e.next=11;break}return e.abrupt("return",void 0);case 11:v=b.reduce((function(e,t,r){return t&&e.push({index:u[r],value:new(fe())(t)}),e}),[]),m=Re(v.length,1+~~(t.length/2)),w=null,_=function(e){var t=m[e],r=v.filter((function(e,r){return t.includes(r)})),n=r.map((function(e){return e.value})),i=r.map((function(e){return e.index})),o=g.lagrangeInterpolation(n,i);if(!o)return"continue";var a=(0,de.rc)(Pe.from(o.toString(16,64),"hex")).toString("hex"),c=a.slice(2,66),u=a.slice(66);return 0===new(fe())(c,16).cmp(new(fe())(s.X,16))&&0===new(fe())(u,16).cmp(new(fe())(s.Y,16))?(w=o,"break"):void 0},k=0;case 16:if(!(k<m.length)){e.next=25;break}if("continue"!==(S=_(k))){e.next=20;break}return e.abrupt("continue",22);case 20:if("break"!==S){e.next=22;break}return e.abrupt("break",25);case 22:k+=1,e.next=16;break;case 25:if(void 0!==w&&null!==w){e.next=27;break}throw new Error("could not derive private key");case 27:return e.abrupt("return",w);case 28:throw new Error("invalid");case 29:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())})).then(function(){var e=se(le().mark((function e(t){var r,n,i,o,s,a,c,u;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t){e.next=3;break}throw new Error("Invalid private key returned");case 3:if(n=(0,de.rc)(Pe.from(r.toString(16,64),"hex")).toString("hex"),i=n.slice(2,66),o=n.slice(66),!g.enableOneKey){e.next=14;break}return e.next=9,g.getNonce(i,o,r);case 9:a=e.sent,c=a.nonce,s=new(fe())(c||"0",16),e.next=17;break;case 14:return e.next=16,g.getMetadata({pub_key_X:i,pub_key_Y:o});case 16:s=e.sent;case 17:return Ee.debug("> torus.js/retrieveShares",{privKey:r.toString(16),metadataNonce:s.toString(16)}),r=r.add(s).umod(g.ec.curve.n),u=g.generateAddressFromPrivKey(r),Ee.debug("> torus.js/retrieveShares",{ethAddress:u,privKey:r.toString(16)}),e.abrupt("return",{ethAddress:u,privKey:r.toString("hex",64),metadataNonce:s});case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"getMetadata",value:function(){var e=se(le().mark((function e(t){var r,n,i=arguments;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},e.prev=1,e.next=4,P("".concat(this.metadataHost,"/get"),t,r,{useAPIKey:!0});case 4:if((n=e.sent)&&n.message){e.next=7;break}return e.abrupt("return",new(fe())(0));case 7:return e.abrupt("return",new(fe())(n.message,16));case 10:return e.prev=10,e.t0=e.catch(1),Ee.error("get metadata error",e.t0),e.abrupt("return",new(fe())(0));case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"generateMetadataParams",value:function(e,t){var r=this.ec.keyFromPrivate(t.toString("hex",64)),n={data:e,timestamp:new(fe())(~~(this.serverTimeOffset+Date.now()/1e3)).toString(16)},i=r.sign(Ze(ye()(n)).slice(2));return{pub_key_X:r.getPublic().getX().toString("hex"),pub_key_Y:r.getPublic().getY().toString("hex"),set_data:n,signature:Pe.from(i.r.toString(16,64)+i.s.toString(16,64)+new(fe())("").toString(16,2),"hex").toString("base64")}}},{key:"setMetadata",value:function(){var e=se(le().mark((function e(t){var r,n,i=arguments;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},e.prev=1,e.next=4,P("".concat(this.metadataHost,"/set"),t,r,{useAPIKey:!0});case 4:return n=e.sent,e.abrupt("return",n.message);case 8:return e.prev=8,e.t0=e.catch(1),Ee.error("set metadata error",e.t0),e.abrupt("return","");case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"lagrangeInterpolation",value:function(e,t){if(e.length!==t.length)return null;for(var r=new(fe())(0),n=0;n<e.length;n+=1){for(var i=new(fe())(1),o=new(fe())(1),s=0;s<e.length;s+=1)if(n!==s){i=(i=i.mul(t[s].neg())).umod(this.ec.curve.n);var a=t[n].sub(t[s]);a=a.umod(this.ec.curve.n),o=o.mul(a).umod(this.ec.curve.n)}var c=i.mul(o.invm(this.ec.curve.n)).umod(this.ec.curve.n);c=c.mul(e[n]).umod(this.ec.curve.n),r=r.add(c)}return r.umod(this.ec.curve.n)}},{key:"generateAddressFromPrivKey",value:function(e){var t=this.ec.keyFromPrivate(e.toString("hex",64),"hex").getPublic().encode("hex",!1).slice(2);Ee.info(t,"public key");var r="0x".concat(Ze(Pe.from(t,"hex")).slice(26));return(0,a.toChecksumAddress)(r)}},{key:"generateAddressFromPubKey",value:function(e,t){var r=this.ec.keyFromPublic({x:e.toString("hex",64),y:t.toString("hex",64)}),n=r.getPublic().encode("hex",!1).slice(2);Ee.info(r.getPublic().encode("hex",!1),"public key");var i="0x".concat(Ze(Pe.from(n,"hex")).slice(26));return(0,a.toChecksumAddress)(i)}},{key:"getPublicAddress",value:function(){var e=se(le().mark((function e(t,r,n){var i,o,s,a,c,u,l,d,h,f,p,g,y,b,v,m,w,_,k,S=arguments;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.verifier,o=n.verifierId,s=S.length>3&&void 0!==S[3]&&S[3],Ee.debug("> torus.js/getPublicAddress",{endpoints:t,torusNodePubs:r,verifier:i,verifierId:o,isExtended:s}),c=!1,e.next=6,Ne(t,i,o);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:if(u=e.t0,l=u.keyResult,!(d=u.errorResult)||!JSON.stringify(d).includes("Verifier not supported")){e.next=16;break}throw new Error("Verifier not supported. Check if you: \n\n      1. Are on the right network (Torus testnet/mainnet) \n\n      2. Have setup a verifier on dashboard.web3auth.io?");case 16:if(!d||!JSON.stringify(d).includes("Verifier + VerifierID has not yet been assigned")){e.next=26;break}return e.next=19,qe({endpoints:t,torusNodePubs:r,lastPoint:void 0,firstPoint:void 0,verifier:i,verifierId:o,signerHost:this.signerHost,network:this.network});case 19:return e.next=21,Ue(t,i,o,1e3);case 21:h=e.sent,a=null===h||void 0===h?void 0:h.keyResult,c=!0,e.next=31;break;case 26:if(!l){e.next=30;break}a=l,e.next=31;break;case 30:throw new Error("node results do not match at first lookup ".concat(JSON.stringify(l||{}),", ").concat(JSON.stringify(d||{})));case 31:if(Ee.debug("> torus.js/getPublicAddress",{finalKeyResult:a,isNewKey:c}),!a){e.next=69;break}if(p=a.keys[0],g=p.pub_key_X,y=p.pub_key_Y,!this.enableOneKey){e.next=57;break}return e.prev=35,e.next=38,this.getOrSetNonce(g,y,void 0,!c);case 38:b=e.sent,v=new(fe())(b.nonce||"0",16),w=b.typeOfUser,e.next=46;break;case 43:throw e.prev=43,e.t1=e.catch(35),new Le;case 46:if("v1"!==b.typeOfUser){e.next=50;break}m=this.ec.keyFromPublic({x:g,y:y}).getPublic().add(this.ec.keyFromPrivate(v.toString(16)).getPublic()),e.next=55;break;case 50:if("v2"!==b.typeOfUser){e.next=54;break}b.upgraded?m=this.ec.keyFromPublic({x:g,y:y}).getPublic():(m=this.ec.keyFromPublic({x:g,y:y}).getPublic().add(this.ec.keyFromPublic({x:b.pubNonce.x,y:b.pubNonce.y}).getPublic()),_=b.pubNonce),e.next=55;break;case 54:throw new Error("getOrSetNonce should always return typeOfUser.");case 55:e.next=62;break;case 57:return w="v1",e.next=60,this.getMetadata({pub_key_X:g,pub_key_Y:y});case 60:v=e.sent,m=this.ec.keyFromPublic({x:g,y:y}).getPublic().add(this.ec.keyFromPrivate(v.toString(16)).getPublic());case 62:if(g=m.getX().toString(16),y=m.getY().toString(16),k=this.generateAddressFromPubKey(m.getX(),m.getY()),Ee.debug("> torus.js/getPublicAddress",{X:g,Y:y,address:k,typeOfUser:w,nonce:null===(f=v)||void 0===f?void 0:f.toString(16),pubNonce:_}),s){e.next=68;break}return e.abrupt("return",k);case 68:return e.abrupt("return",{typeOfUser:w,address:k,X:g,Y:y,metadataNonce:v,pubNonce:_});case 69:throw new Error("node results do not match at final lookup ".concat(JSON.stringify(l||{}),", ").concat(JSON.stringify(d||{})));case 70:case"end":return e.stop()}}),e,this,[[35,43]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getOrSetNonce",value:function(){var e=se(le().mark((function e(t,r,n){var i,o,s,a=arguments;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>3&&void 0!==a[3]&&a[3],s=i?"getNonce":"getOrSetNonce",o=n?this.generateMetadataParams(s,n):{pub_key_X:t,pub_key_Y:r,set_data:{data:s}},e.abrupt("return",P("".concat(this.metadataHost,"/get_or_set_nonce"),o,void 0,{useAPIKey:!0}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getNonce",value:function(){var e=se(le().mark((function e(t,r,n){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getOrSetNonce(t,r,n,!0));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getPostboxKeyFrom1OutOf1",value:function(e,t){var r=new(fe())(e,16),n=new(fe())(t,16);return r.sub(n).umod(this.ec.curve.n).toString("hex")}}],[{key:"enableLogging",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?Ee.enableAll():Ee.disableAll()}},{key:"setAPIKey",value:function(e){_(e)}},{key:"setEmbedHost",value:function(e){w(e)}},{key:"isGetOrSetNonceError",value:function(e){return e instanceof Le}}]),e}(),He=r(53295),Ve=r(78262),Ke=r.n(Ve),ze=r(50539),Ye=r(83569),Ge=r.n(Ye),Xe=r(19778).Buffer;const Je="google",$e="facebook",Qe="twitch",et="reddit",tt="discord",rt={GOOGLE:"google",FACEBOOK:"facebook",TWITCH:"twitch",REDDIT:"reddit",DISCORD:"discord",EMAIL_PASSWORDLESS:"torus-auth0-email-passwordless"},nt={[rt.GOOGLE]:"tkey-google",[rt.FACEBOOK]:"tkey-facebook",[rt.TWITCH]:"tkey-twitch",[rt.REDDIT]:"tkey-reddit",[rt.DISCORD]:"tkey-discord",[rt.EMAIL_PASSWORDLESS]:"tkey-auth0-email-passwordless"},it={PRODUCTION:"production",DEVELOPMENT:"development",BINANCE:"binance",TESTING:"testing",LRC:"lrc",BETA:"beta"},ot={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},st={["rampnetwork"]:{line1:"Debit Card/ Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000\u20ac/purchase, 20,000\u20ac/mo",supportPage:"https://instant.ramp.network/",minOrderValue:50,maxOrderValue:2e4,validCurrencies:["GBP","EUR","USD"],validCryptoCurrencies:["ETH","DAI","USDC","BSC_BNB"],includeFees:!0,enforceMax:!1},["moonpay"]:{line1:"Credit / Debit Card / Apple Pay",line2:"4.5% or 5 USD",line3:"2,000\u20ac/day, 10,000\u20ac/mo",supportPage:"https://help.moonpay.io/en/",minOrderValue:24.99,maxOrderValue:5e4,validCurrencies:["USD","EUR","GBP","AUD","CAD","SGD","RUB"],validCryptoCurrencies:["ETH","DAI","TUSD","USDC","USDT","BNB_BSC","BUSD_BSC"],includeFees:!0,enforceMax:!1},["wyre"]:{line1:"Apple Pay/ Debit/ Credit Card",line2:"4.9% + 30\xa2 or 5 USD",line3:"$250/day",supportPage:"https://support.sendwyre.com/en/",minOrderValue:5,maxOrderValue:500,validCurrencies:["USD","AUD","CAD","GBP","EUR"],validCryptoCurrencies:["ETH","DAI","USDC","USDT"],includeFees:!1,enforceMax:!1},["xanpool"]:{line1:"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ VietelPay/ DuitNow",line2:"2.5% buying, 3% selling",line3:"$2,500 / day",supportPage:"mailto:support@xanpool.com",minOrderValue:100,maxOrderValue:2500,validCurrencies:["SGD","HKD","MYR","PHP","INR","VND","THB","IDR"],validCryptoCurrencies:["ETH","USDT"],includeFees:!0,sell:!0,enforceMax:!1},["mercuryo"]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"3.95% or 4 USD",line3:"10,000\u20ac/day, 25,000\u20ac/mo",supportPage:"mailto:support@mercuryo.io",minOrderValue:30,maxOrderValue:5e3,validCurrencies:["USD","EUR","RUB","TRY","GBP","UAH"],validCryptoCurrencies:["ETH","DAI","BAT","USDT","OKB"],includeFees:!0,enforceMax:!1},["transak"]:{line1:"Credit/ Debit Card/ <br/>Bank Transfer (sepa/gbp)",line2:"0.99% - 5.5% or 5 USD",line3:"500\u20ac/day",supportPage:"https://support.transak.com/hc/en-US",minOrderValue:20,maxOrderValue:500,validCurrencies:["USD","EUR","GBP","AUD","CAD","SGD"],validCryptoCurrencies:["ETH","DAI","USDC","USDT"],includeFees:!0,enforceMax:!1}};var at={supportedVerifierList:Object.values(rt),paymentProviders:st,api:"https://api.tor.us",translations:{en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies ben\xf6tigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"\u7d99\u7d9a\u3059\u308b",actionRequired:"\u8a8d\u8a3c\u304c\u5fc5\u8981\u3067\u3059",pendingAction:"\u7d9a\u884c\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u7d9a\u884c\u3057\u307e\u3059",cookiesRequired:"\u5fc5\u8981\u306a\u30af\u30c3\u30ad\u30fc",enableCookies:"Torus\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u3001\u30d6\u30e9\u30a6\u30b6\u306e\u8a2d\u5b9a\u3067Cookie\u3092\u6709\u52b9\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",clickHere:"\u8a73\u3057\u304f\u306f"}},ko:{embed:{continue:"\uacc4\uc18d\ud558\ub2e4",actionRequired:"\uc2b9\uc778 \ud544\uc694",pendingAction:"\ud31d\uc5c5\uc5d0\uc11c \uc694\uccad\uc744 \uc9c4\ud589\ud558\ub824\uba74 \uacc4\uc18d\uc744 \ud074\ub9ad\ud558\uc2ed\uc2dc\uc624.",cookiesRequired:"\ucfe0\ud0a4 \ud544\uc694",enableCookies:"\ube0c\ub77c\uc6b0\uc800 \ud658\uacbd \uc124\uc815\uc5d0\uc11c \ucfe0\ud0a4\ub97c \ud65c\uc131\ud654\ud558\uc5ec Torus\uc5d0 \uc561\uc138\uc2a4\ud558\uc2ed\uc2dc\uc624.",clickHere:"\ub354 \ub9ce\uc740 \uc815\ubcf4"}},zh:{embed:{continue:"\u7ee7\u7eed",actionRequired:"\u9700\u8981\u6388\u6743",pendingAction:"\u5355\u51fb\u7ee7\u7eed\u4ee5\u5728\u5f39\u51fa\u7a97\u53e3\u4e2d\u7ee7\u7eed\u60a8\u7684\u8bf7\u6c42",cookiesRequired:"\u5fc5\u586bCookie",enableCookies:"\u8bf7\u5728\u60a8\u7684\u6d4f\u89c8\u5668\u9996\u9009\u9879\u4e2d\u542f\u7528cookie\u4ee5\u8bbf\u95eeTorus\u3002",clickHere:"\u66f4\u591a\u4fe1\u606f"}}},prodTorusUrl:"",localStorageKeyPrefix:"torus-"};const ct=e=>new Promise(((t,r)=>{null!=window.document.body?Promise.resolve(e()).then(t).catch(r):window.document.addEventListener("DOMContentLoaded",(()=>{Promise.resolve(e()).then(t).catch(r)}))})),ut=e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild},lt=(e,t,r)=>{const n=i=>{r(i),e.removeListener(t,n)};e.on(t,n)};async function dt(){return new Promise((e=>{"loading"!==document.readyState?e():function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];const s=()=>{r(...i),e.removeEventListener(t,s)};e.addEventListener(t,s)}(document,"DOMContentLoaded",e)}))}var ht=p().getLogger("torus-embed"),ft={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",sendSiteMetadata:()=>"Torus: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:e=>"Torus: The Torus Ethereum provider does not support synchronous methods like ".concat(e," without a callback parameter."),invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:(e,t)=>"Invalid options. Received: { maxEventListeners: ".concat(e,", shouldSendMetadata: ").concat(t," }"),invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>"'args.logger' must include required method '".concat(e,"'.")},info:{connected:e=>'Torus: Connected to chain with ID "'.concat(e,'".')},warnings:{enableDeprecation:'Torus: ""ethereum.enable()" is deprecated and may be removed in the future. Please use "ethereum.send("eth_requestAccounts")" instead. For more information, see: https://eips.ethereum.org/EIPS/eip-1102',sendDeprecation:'Torus: "ethereum.send(...)" is deprecated and may be removed in the future. Please use "ethereum.sendAsync(...)" or "ethereum.request(...)" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',events:{close:'Torus: The event "close" is deprecated and may be removed in the future. Please use "disconnect" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',data:'Torus: The event "data" is deprecated and will be removed in the future.Use "message" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message',networkChanged:'Torus: The event "networkChanged" is deprecated and may be removed in the future. Please use "chainChanged" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',notification:'Torus: The event "notification" is deprecated and may be removed in the future. Please use "message" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193'},publicConfigStore:'Torus: The property "publicConfigStore" is deprecated and WILL be removed in the future.'}};const{paymentProviders:pt}=at;function gt(e,t,r){let n='MetaMask: Lost connection to "'.concat(e,'".');null!==t&&void 0!==t&&t.stack&&(n+="\n".concat(t.stack)),ht.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)}const yt=()=>Math.random().toString(36).slice(2),bt=async(e,t)=>{let r,n;const i="1.25.0";let o=t.version||i;try{if(("binance"===e||"production"===e)&&!t.version){let e;e=at.prodTorusUrl?{data:at.prodTorusUrl}:await O("".concat(at.api,"/latestversion?name=@toruslabs/torus-embed&version=").concat(i),{},{useAPIKey:!0}),o=e.data,at.prodTorusUrl=e.data}}catch(s){ht.error(s,"unable to fetch latest version")}switch(ht.info("version used: ",o),e){case"binance":r="https://binance.tor.us/v".concat(o),n="info";break;case"testing":r="https://testing.tor.us",n="debug";break;case"lrc":r="https://lrc.tor.us",n="debug";break;case"beta":r="https://beta.tor.us",n="debug";break;case"development":r="http://localhost:4050",n="debug";break;default:r="https://app.tor.us/v".concat(o),n="error"}return{torusUrl:r,logLevel:n}},vt=()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(at.translations,t[0])?t[0]:"en",e},mt=["eth_subscription"],wt=()=>{},_t="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375",kt="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450";function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}z.defaultMaxListeners=100;const xt=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(n,i)=>n||i.error?t(n||i.error):!r||Array.isArray(i)?e(i):e(i.result)};class Ot extends z{constructor(e){let{maxEventListeners:t=100,shouldSendMetadata:r=!0,jsonRpcStreamName:n="provider"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(super(),(0,i.Z)(this,"chainId",void 0),(0,i.Z)(this,"selectedAddress",void 0),(0,i.Z)(this,"_rpcEngine",void 0),(0,i.Z)(this,"networkVersion",void 0),(0,i.Z)(this,"shouldSendMetadata",void 0),(0,i.Z)(this,"isTorus",void 0),(0,i.Z)(this,"_publicConfigStore",void 0),(0,i.Z)(this,"tryPreopenHandle",void 0),(0,i.Z)(this,"enable",void 0),(0,i.Z)(this,"_state",void 0),(0,i.Z)(this,"_jsonRpcConnection",void 0),(0,i.Z)(this,"_sentWarnings",{enable:!1,experimentalMethods:!1,send:!1,publicConfigStore:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}}),!(0,ze.duplex)(e))throw new Error(ft.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(t),this._state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Ot._defaultState),this.selectedAddress=null,this.networkVersion=null,this.chainId=null,this.shouldSendMetadata=r,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._sendSync=this._sendSync.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this);const o=new ne;W()(e,o,e,this._handleStreamDisconnect.bind(this,"MetaMask")),this._publicConfigStore=new He.ObservableStore({storageKey:"Metamask-Config"}),W()(o.createStream("publicConfig"),(0,He.storeAsStream)(this._publicConfigStore),gt.bind(this,"MetaMask PublicConfigStore")),o.ignoreStream("phishing"),this.on("connect",(()=>{this._state.isConnected=!0}));const s=G();W()(s.stream,o.createStream(n),s.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider"));const a=new $;a.push(X()),a.push(((e,t,r)=>{"string"===typeof e.method&&e.method||(t.error=D.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),r((e=>{const{error:r}=t;return r?(ht.error("MetaMask - RPC Error: ".concat(r.message),r),e()):e()}))})),a.push(s.middleware),this._rpcEngine=a,s.events.on("notification",(e=>{const{method:t,params:r}=e;"wallet_accountsChanged"===t?this._handleAccountsChanged(r):"wallet_unlockStateChanged"===t?this._handleUnlockStateChanged(r):"wallet_chainChanged"===t?this._handleChainChanged(r):mt.includes(e.method)&&(this.emit("data",e),this.emit("notification",r.result),this.emit("message",{type:t,data:r}))}))}get publicConfigStore(){return this._sentWarnings.publicConfigStore||(ht.warn(ft.warnings.publicConfigStore),this._sentWarnings.publicConfigStore=!0),this._publicConfigStore}isConnected(){return this._state.isConnected}async request(e){if(!e||"object"!==typeof e||Array.isArray(e))throw D.ethErrors.rpc.invalidRequest({message:ft.errors.invalidRequestArgs(),data:e});const{method:t,params:r}=e;if("string"!==typeof t||0===t.length)throw D.ethErrors.rpc.invalidRequest({message:ft.errors.invalidRequestMethod(),data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!==typeof r||null===r))throw D.ethErrors.rpc.invalidRequest({message:ft.errors.invalidRequestParams(),data:e});return new Promise(((e,n)=>{this._rpcRequest({method:t,params:r},xt(e,n))}))}sendAsync(e,t){this._rpcRequest(e,t)}addListener(e,t){return this._warnOfDeprecation(e),super.addListener(e,t)}on(e,t){return this._warnOfDeprecation(e),super.on(e,t)}once(e,t){return this._warnOfDeprecation(e),super.once(e,t)}prependListener(e,t){return this._warnOfDeprecation(e),super.prependListener(e,t)}prependOnceListener(e,t){return this._warnOfDeprecation(e),super.prependOnceListener(e,t)}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:r,networkVersion:n}=await this.request({method:"wallet_getProviderState"});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t,networkVersion:n}),this._handleUnlockStateChanged({accounts:e,isUnlocked:r}),this._handleAccountsChanged(e)}catch(e){ht.error("MetaMask: Failed to get initial state. Please report this bug.",e)}finally{ht.info("initialized state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t;const i=e;if(!Array.isArray(i))if(i.jsonrpc||(i.jsonrpc="2.0"),"eth_accounts"===i.method||"eth_requestAccounts"===i.method)n=(e,n)=>{this._handleAccountsChanged(n.result||[],"eth_accounts"===i.method,r),t(e,n)};else if("wallet_getProviderState"===i.method)return void this._rpcEngine.handle(e,n);this.tryPreopenHandle(i,n)}send(e,t){return this._sentWarnings.send||(ht.warn(ft.warnings.sendDeprecation),this._sentWarnings.send=!0),"string"!==typeof e||t&&!Array.isArray(t)?e&&"object"===typeof e&&"function"===typeof t?this._rpcRequest(e,t):this._sendSync(e):new Promise(((r,n)=>{try{this._rpcRequest({method:e,params:t},xt(r,n,!1))}catch(i){n(i)}}))}_sendSync(e){let t;switch(e.method){case"eth_accounts":t=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":t=this.selectedAddress||null;break;case"eth_uninstallFilter":this._rpcRequest(e,wt),t=!0;break;case"net_version":t=this.networkVersion||null;break;default:throw new Error(ft.errors.unsupportedSync(e.method))}return{id:e.id,jsonrpc:e.jsonrpc,result:t}}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),ht.debug(ft.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new D.EthereumRpcError(1013,t||ft.errors.disconnected()),ht.debug(r)):(r=new D.EthereumRpcError(1011,t||ft.errors.permanentlyDisconnected()),ht.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleStreamDisconnect(e,t){gt(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}_handleAccountsChanged(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e;Array.isArray(n)||(ht.error("MetaMask: Received non-array accounts parameter. Please report this bug.",n),n=[]);for(const i of e)if("string"!==typeof i){ht.error("MetaMask: Received non-string account. Please report this bug.",e),n=[];break}Ke()(this._state.accounts,n)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!r&&ht.error('MetaMask: "eth_accounts" unexpectedly updated accounts. Please report this bug.',n),this._state.accounts=n,this.emit("accountsChanged",n)),this.selectedAddress!==n[0]&&(this.selectedAddress=n[0]||null)}_handleChainChanged(){let{chainId:e,networkVersion:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&t?"loading"===t?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId))):ht.error("MetaMask: Received invalid network parameters. Please report this bug.",{chainId:e,networkVersion:t})}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"boolean"===typeof t?t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[])):ht.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t})}_warnOfDeprecation(e){!1===this._sentWarnings.events[e]&&(ht.warn(ft.warnings.events[e]),this._sentWarnings.events[e]=!0)}}(0,i.Z)(Ot,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});const Pt=(e,t)=>{const r={};return e.algorithms.forEach((e=>{r[e]=Ge()(e).update(t,"utf8").digest("base64")})),r},Et=(e,t)=>{const r=(e=>({algorithms:e.algorithms||["sha256"],delimiter:e.delimiter||" ",full:e.full||!1}))(e),n={hashes:Pt(r,t),integrity:void 0};return n.integrity=((e,t)=>{let r="";return r+=Object.keys(t.hashes).map((e=>"".concat(e,"-").concat(t.hashes[e]))).join(e.delimiter),r})(r,n),r.full?n:n.integrity};class jt extends M.EventEmitter{constructor(e){let{url:t,target:r,features:n}=e;super(),(0,i.Z)(this,"url",void 0),(0,i.Z)(this,"target",void 0),(0,i.Z)(this,"features",void 0),(0,i.Z)(this,"window",void 0),(0,i.Z)(this,"windowTimer",void 0),(0,i.Z)(this,"iClosedWindow",void 0),this.url=t,this.target=r||"_blank",this.features=n||function(){const e=void 0!==window.screenLeft?window.screenLeft:window.screenX,t=void 0!==window.screenTop?window.screenTop:window.screenY,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,n=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,i=Math.abs((r-1200)/2/1+e),o=Math.abs((n-700)/2/1+t);return"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=".concat(700,",width=").concat(1200,",top=").concat(o,",left=").concat(i)}(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval((()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),void 0===this.window&&clearInterval(this.windowTimer)}),500))}open(){var e;return this.window=window.open(this.url.href,this.target,this.features),null!==(e=this.window)&&void 0!==e&&e.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}function Ct(e){return new Promise(((t,r)=>{try{const r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(n){r(n)}}))}const At=e=>{const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function Tt(e){const{document:t}=e;let r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await Ct(r.href)?r.href:(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find((e=>Boolean(e.href))),r&&await Ct(r.href)?r.href:null)}async function It(e){try{const t=await(async()=>({name:At(window),icon:await Tt(window)}))();e.handle({jsonrpc:"2.0",id:yt(),method:"wallet_sendDomainMetadata",params:t},wt)}catch(t){ht.error({message:ft.errors.sendSiteMetadata(),originalError:t})}}const Mt=["host","chainId","networkName"];function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Dt={[Je]:!0,[$e]:!0,[et]:!0,[Qe]:!0,[tt]:!0},Nt="sha384-o02DJyXIRlX/ZlzbO6i9Pm5wL/mA+uZjTQcx40Hw0UEZ8JZwTkWIJ1gpf+4WUgg8",Ut=["eth_sendTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","eth_getEncryptionPublicKey","eth_decrypt"],qt=function(e){let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(r){return r&&(22===r.code||1014===r.code||"QuotaExceededError"===r.name||"NS_ERROR_DOM_QUOTA_REACHED"===r.name)&&t&&0!==t.length}}("localStorage");!async function(){try{if("undefined"===typeof document)return;const e=document.createElement("link"),{torusUrl:t}=await bt("production",{check:!1,hash:Nt,version:""});e.href="".concat(t,"/popup"),e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){ht.warn(e)}}();class Zt{constructor(){let{buttonPosition:e=ot.BOTTOM_LEFT,modalZIndex:t=99999,apiKey:r="torus-default"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,"buttonPosition",ot.BOTTOM_LEFT),(0,i.Z)(this,"torusUrl",void 0),(0,i.Z)(this,"torusIframe",void 0),(0,i.Z)(this,"styleLink",void 0),(0,i.Z)(this,"isLoggedIn",void 0),(0,i.Z)(this,"isInitialized",void 0),(0,i.Z)(this,"torusWidgetVisibility",void 0),(0,i.Z)(this,"torusAlert",void 0),(0,i.Z)(this,"nodeDetailManager",void 0),(0,i.Z)(this,"torusJs",void 0),(0,i.Z)(this,"apiKey",void 0),(0,i.Z)(this,"modalZIndex",void 0),(0,i.Z)(this,"alertZIndex",void 0),(0,i.Z)(this,"torusAlertContainer",void 0),(0,i.Z)(this,"isIframeFullScreen",void 0),(0,i.Z)(this,"whiteLabel",void 0),(0,i.Z)(this,"requestedVerifier",void 0),(0,i.Z)(this,"currentVerifier",void 0),(0,i.Z)(this,"embedTranslations",void 0),(0,i.Z)(this,"ethereum",void 0),(0,i.Z)(this,"provider",void 0),(0,i.Z)(this,"communicationMux",void 0),(0,i.Z)(this,"isLoginCallback",void 0),(0,i.Z)(this,"dappStorageKey",void 0),(0,i.Z)(this,"paymentProviders",at.paymentProviders),(0,i.Z)(this,"loginHint",""),(0,i.Z)(this,"useWalletConnect",void 0),this.buttonPosition=e,this.torusUrl="",this.isLoggedIn=!1,this.isInitialized=!1,this.torusWidgetVisibility=!0,this.requestedVerifier="",this.currentVerifier="",this.nodeDetailManager=new l,this.torusJs=new Fe({metadataHost:"https://metadata.tor.us",allowHost:"https://signer.tor.us/api/allow"}),this.apiKey=r,Fe.setAPIKey(r),_(r),this.modalZIndex=t,this.alertZIndex=t+1e3,this.isIframeFullScreen=!1,this.dappStorageKey=""}async init(){let{buildEnv:e=it.PRODUCTION,enableLogging:t=!1,enabledVerifiers:r=Dt,network:n={host:"mainnet",chainId:null,networkName:"",blockExplorer:"",ticker:"",tickerName:""},loginConfig:i={},showTorusButton:o=!0,integrity:s={check:!1,hash:Nt,version:""},whiteLabel:a,skipTKey:c=!1,useLocalStorage:u=!1,useWalletConnect:l=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:d,logLevel:f}=await bt(e,s);ht.info(d,"url loaded"),this.torusUrl=d,this.whiteLabel=a,this.useWalletConnect=l,ht.setDefaultLevel(f),t?ht.enableAll():ht.disableAll(),this.torusWidgetVisibility=o;let p="";if(qt&&u){const e="".concat(at.localStorageKeyPrefix).concat(window.location.hostname),t=window.localStorage.getItem(e);if(t)p=t;else{const t="torus-app-".concat(yt());window.localStorage.setItem(e,t),p=t}}this.dappStorageKey=p;const g=new URL(d);g.pathname.endsWith("/")?g.pathname+="popup":g.pathname+="/popup",p&&(g.hash="#dappStorageKey=".concat(p)),this.torusIframe=ut('<iframe\n        id="torusIframe"\n        allow='.concat(l?"camera":"",'\n        class="torusIframe"\n        src="').concat(g.href,'"\n        style="display: none; position: fixed; top: 0; right: 0; width: 100%;\n        height: 100%; border: none; border-radius: 0; z-index: ').concat(this.modalZIndex,'"\n      ></iframe>')),this.torusAlertContainer=ut('<div id="torusAlertContainer"></div>'),this.torusAlertContainer.style.display="none",this.torusAlertContainer.style.setProperty("z-index",this.alertZIndex.toString());const y=window.document.createElement("link");y.setAttribute("rel","stylesheet"),y.setAttribute("type","text/css"),y.setAttribute("href","".concat(d,"/css/widget.css")),this.styleLink=y;const{defaultLanguage:b=vt(),customTranslations:v={}}=this.whiteLabel||{},m=h()(at.translations,v)[b]||at.translations[vt()];this.embedTranslations=m.embed;const w=async()=>(await dt(),new Promise(((e,t)=>{this.torusIframe.onload=async()=>{this._setupWeb3();const o=this.communicationMux.getStream("init_stream");o.on("data",(r=>{const{name:n,data:i,error:o}=r;"init_complete"===n&&i.success?(this.isInitialized=!0,this._displayIframe(this.isIframeFullScreen),e(void 0)):o&&t(new Error(o))})),o.write({name:"init_stream",data:{enabledVerifiers:r,loginConfig:i,whiteLabel:this.whiteLabel,buttonPosition:this.buttonPosition,torusWidgetVisibility:this.torusWidgetVisibility,apiKey:this.apiKey,skipTKey:c,network:n}})},window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)})));if("production"===e&&s.check){const e="".concat(d,"/popup"),t=await fetch(e,{cache:"reload"});if("max-age=3600"!==t.headers.get("Cache-Control"))throw new Error("Unexpected Cache-Control headers, got ".concat(t.headers.get("Cache-Control")));const r=await t.text(),n=Et({algorithms:["sha384"]},r);if(ht.info(n,"integrity"),n!==s.hash)throw this.clearInit(),new Error("Integrity check failed");await w()}else await w()}login(){let{verifier:e="",login_hint:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");return this.requestedVerifier=e,this.loginHint=t,this.ethereum.enable()}logout(){return new Promise(((e,t)=>{if(!this.isLoggedIn)return void t(new Error("User has not logged in yet"));this.communicationMux.getStream("logout").write({name:"logOut"});const r=this.communicationMux.getStream("status");lt(r,"data",(r=>{r.loggedIn?t(new Error("Some Error Occured")):(this.isLoggedIn=!1,this.currentVerifier="",this.requestedVerifier="",e())}))}))}async cleanUp(){this.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(e){return e instanceof Element||e instanceof HTMLDocument}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.torusWidgetVisibility=!1,this._sendWidgetVisibilityStatus(!1),this._displayIframe()}showTorusButton(){this.torusWidgetVisibility=!0,this._sendWidgetVisibilityStatus(!0),this._displayIframe()}setProvider(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{host:t="mainnet",chainId:r=null,networkName:i=""}=e,o=(0,n.Z)(e,Mt);return new Promise(((e,n)=>{const s=this.communicationMux.getStream("provider_change");lt(s,"data",(t=>{const{err:r,success:i}=t.data;ht.info(t),r?n(r):i?e():n(new Error("some error occured"))}));const a=yt();this._handleWindow(a,{target:"_blank",features:_t}),s.write({name:"show_provider_change",data:{network:Rt({host:t,chainId:r,networkName:i},o),preopenInstanceId:a,override:!1}})}))}showWallet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.communicationMux.getStream("show_wallet"),n=e?"/".concat(e):"";r.write({name:"show_wallet",data:{path:n}});lt(r,"data",(e=>{if("show_wallet_instance"===e.name){const{instanceId:r}=e.data,i=new URL("".concat(this.torusUrl,"/wallet").concat(n));i.searchParams.append("integrity","true"),i.searchParams.append("instanceId",r),Object.keys(t).forEach((e=>{i.searchParams.append(e,t[e])})),this.dappStorageKey&&(i.hash="#dappStorageKey=".concat(this.dappStorageKey));new jt({url:i,features:"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315"}).open()}}))}async getPublicAddress(e){let{verifier:t,verifierId:r,isExtended:n=!1}=e;if(!at.supportedVerifierList.includes(t)||!nt[t])throw new Error("Unsupported verifier");const i=await this.nodeDetailManager.getNodeDetails({verifier:t,verifierId:r}),o=i.torusNodeEndpoints,s=i.torusNodePub,a=t,c=nt[t];try{const e=await this.torusJs.getUserTypeAndAddress(o,s,{verifier:a,verifierId:r});if("v1"===e.typeOfUser)return n?e:e.address;const t=await this.torusJs.getUserTypeAndAddress(o,s,{verifier:c,verifierId:r},!0);return n?t:t.address}catch(u){if(null!==u&&void 0!==u&&u.message.includes("Verifier + VerifierID has not yet been assigned")){const e=await this.torusJs.getUserTypeAndAddress(o,s,{verifier:c,verifierId:r},!0);return n?e:e.address}throw u}}getUserInfo(e){return new Promise(((t,r)=>{if(this.isLoggedIn){const n=this.communicationMux.getStream("user_info_access");n.write({name:"user_info_access_request"});const i=n=>{const{name:i,data:{approved:o,payload:s,rejected:a,newRequest:c}}=n;if("user_info_access_response"===i)if(o)t(s);else if(a)r(new Error("User rejected the request"));else if(c){const n=this.communicationMux.getStream("user_info");lt(n,"data",(e=>{"user_info_response"===e.name&&(e.data.approved?t(e.data.payload):r(new Error("User rejected the request")))}));const i=yt();this._handleWindow(i,{target:"_blank",features:_t}),n.write({name:"user_info_request",data:{message:e,preopenInstanceId:i}})}};lt(n,"data",i)}else r(new Error("User has not logged in yet"))}))}initiateTopup(e,t){return new Promise(((r,n)=>{if(this.isInitialized){const{errors:i,isValid:o}=((e,t)=>{const r={};if(!e)return{errors:r,isValid:!0};if(e&&!pt[e])return r.provider="Invalid Provider",{errors:r,isValid:0===Object.keys(r).length};const n=pt[e],i=t||{};if(i.fiatValue){const e=+parseFloat(i.fiatValue.toString())||0;e<n.minOrderValue&&(r.fiatValue="Requested amount is lower than supported"),e>n.maxOrderValue&&n.enforceMax&&(r.fiatValue="Requested amount is higher than supported")}return i.selectedCurrency&&!n.validCurrencies.includes(i.selectedCurrency)&&(r.selectedCurrency="Unsupported currency"),i.selectedCryptoCurrency&&!n.validCryptoCurrencies.includes(i.selectedCryptoCurrency)&&(r.selectedCryptoCurrency="Unsupported cryptoCurrency"),{errors:r,isValid:0===Object.keys(r).length}})(e,t);if(!o)return void n(new Error(JSON.stringify(i)));const s=this.communicationMux.getStream("topup");lt(s,"data",(e=>{"topup_response"===e.name&&(e.data.success?r(e.data.success):n(new Error(e.data.error)))}));const a=yt();this._handleWindow(a),s.write({name:"topup_request",data:{provider:e,params:t,preopenInstanceId:a}})}else n(new Error("Torus is not initialized yet"))}))}async loginWithPrivateKey(e){const{privateKey:t,userInfo:r}=e;return new Promise(((e,n)=>{if(this.isInitialized){if(32!==Xe.from(t,"hex").length)return void n(new Error("Invalid private key, Please provide a 32 byte valid secp25k1 private key"));const i=this.communicationMux.getStream("login_with_private_key");lt(i,"data",(t=>{"login_with_private_key_response"===t.name&&(t.data.success?e(t.data.success):n(new Error(t.data.error)))})),i.write({name:"login_with_private_key_request",data:{privateKey:t,userInfo:r}})}else n(new Error("Torus is not initialized yet"))}))}async showWalletConnectScanner(){if(!this.useWalletConnect)throw new Error("Set `useWalletConnect` as true in init function options to use wallet connect scanner");return new Promise(((e,t)=>{if(this.isLoggedIn){const r=this.communicationMux.getStream("wallet_connect_stream");lt(r,"data",(r=>{"wallet_connect_stream_res"===r.name&&(r.data.success?e(r.data.success):t(new Error(r.data.error)),this._displayIframe())})),r.write({name:"wallet_connect_stream_req"}),this._displayIframe(!0)}else t(new Error("User has not logged in yet"))}))}_handleWindow(e){let{url:t,target:r,features:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){const i=this.communicationMux.getStream("window"),o=new URL(t||"".concat(this.torusUrl,"/redirect?preopenInstanceId=").concat(e));this.dappStorageKey&&(o.hash?o.hash+="&dappStorageKey=".concat(this.dappStorageKey):o.hash="#dappStorageKey=".concat(this.dappStorageKey));const s=new jt({url:o,target:r,features:n});if(s.open(),!s.window)return void this._createPopupBlockAlert(e,o.href);i.write({name:"opened_window",data:{preopenInstanceId:e}});const a=t=>{let{preopenInstanceId:r,close:n}=t;r===e&&n&&(s.close(),i.removeListener("data",a))};i.on("data",a),s.once("close",(()=>{i.write({data:{preopenInstanceId:e,closed:!0}}),i.removeListener("data",a)}))}}_setEmbedWhiteLabel(e){const{theme:t}=this.whiteLabel||{};if(t){const{isDark:r=!1,colors:n={}}=t;r&&e.classList.add("torus-dark"),n.torusBrand1&&e.style.setProperty("--torus-brand-1",n.torusBrand1),n.torusGray2&&e.style.setProperty("--torus-gray-2",n.torusGray2)}}_getLogoUrl(){var e,t;let r="".concat(this.torusUrl,"/images/torus_icon-blue.svg");var n,i;null!==(e=this.whiteLabel)&&void 0!==e&&null!==(t=e.theme)&&void 0!==t&&t.isDark?r=(null===(n=this.whiteLabel)||void 0===n?void 0:n.logoLight)||r:r=(null===(i=this.whiteLabel)||void 0===i?void 0:i.logoDark)||r;return r}_sendWidgetVisibilityStatus(e){this.communicationMux.getStream("torus-widget-visibility").write({data:e})}_displayIframe(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t={};if(e)t.display="block",t.width="100%",t.height="100%",t.top="0px",t.right="0px",t.left="0px",t.bottom="0px";else switch(t.display=this.torusWidgetVisibility?"block":"none",t.height="70px",t.width="70px",this.buttonPosition){case ot.TOP_LEFT:t.top="0px",t.left="0px",t.right="auto",t.bottom="auto";break;case ot.TOP_RIGHT:t.top="0px",t.right="0px",t.left="auto",t.bottom="auto";break;case ot.BOTTOM_RIGHT:t.bottom="0px",t.right="0px",t.top="auto",t.left="auto";break;case ot.BOTTOM_LEFT:default:t.bottom="0px",t.left="0px",t.top="auto",t.right="auto"}Object.assign(this.torusIframe.style,t),this.isIframeFullScreen=e}_setupWeb3(){ht.info("setupWeb3 running");const e=new V({name:"embed_metamask",target:"iframe_metamask",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),t=new V({name:"embed_comm",target:"iframe_comm",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),r=new Ot(e),n=e=>{const t=r[e];r[e]=function(e){if(e&&"eth_requestAccounts"===e)return r.enable();for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t.apply(this,[e,...i])}};n("send"),n("sendAsync"),r.enable=()=>new Promise(((e,t)=>{r.sendAsync({jsonrpc:"2.0",id:yt(),method:"eth_requestAccounts",params:[]},((r,n)=>{const{result:i}=n||{};if(r)setTimeout((()=>{t(r)}),50);else if(Array.isArray(i)&&i.length>0){const r=()=>{if(""!==this.requestedVerifier&&this.currentVerifier!==this.requestedVerifier){const{requestedVerifier:r}=this;this.logout().then((n=>{this.requestedVerifier=r,this._showLoginPopup(!0,e,t)})).catch((e=>t(e)))}else e(i)};this.isLoggedIn?r():this.isLoginCallback=r}else this._showLoginPopup(!0,e,t)}))})),r.tryPreopenHandle=(e,t)=>{const n=e;if(!Array.isArray(n)&&Ut.includes(n.method)){const e=yt();this._handleWindow(e,{target:"_blank",features:kt}),n.preopenInstanceId=e}r._rpcEngine.handle(n,t)};const i=new Proxy(r,{deleteProperty:()=>!0});this.ethereum=i;const o=function(e){const t=new ne;return t.getStream=function(e){return this._substreams[e]?this._substreams[e]:this.createStream(e)},W()(e,t,e,(e=>{e&&window.console.error(e)})),t}(t);this.communicationMux=o;o.getStream("window").on("data",(e=>{"create_window"===e.name&&this._createPopupBlockAlert(e.data.preopenInstanceId,e.data.url)}));o.getStream("widget").on("data",(e=>{const{data:t}=e;this._displayIframe(t)}));o.getStream("status").on("data",(e=>{e.loggedIn?(this.isLoggedIn=e.loggedIn,this.currentVerifier=e.verifier):this._displayIframe(),this.isLoginCallback&&(this.isLoginCallback(),delete this.isLoginCallback)})),this.provider=i,this.provider.shouldSendMetadata&&It(this.provider._rpcEngine),r._initializeState(),ht.debug("Torus - injected provider")}_showLoginPopup(e,t,r){const n=e=>{const{err:n,selectedAddress:i}=e;n?(ht.error(n),r&&r(n)):t&&t([i]),this.isIframeFullScreen&&this._displayIframe()},i=this.communicationMux.getStream("oauth");if(this.requestedVerifier){lt(i,"data",n);const t=yt();this._handleWindow(t),i.write({name:"oauth",data:{calledFromEmbed:e,verifier:this.requestedVerifier,preopenInstanceId:t,login_hint:this.loginHint}})}else this._displayIframe(!0),lt(i,"data",n),i.write({name:"oauth_modal",data:{calledFromEmbed:e}})}_createPopupBlockAlert(e,t){const r=this._getLogoUrl(),n=ut('<div id="torusAlert" class="torus-alert--v2">'+'<div id="torusAlert__logo"><img src="'.concat(r,'" /></div>')+"<div>"+'<h1 id="torusAlert__title">'.concat(this.embedTranslations.actionRequired,"</h1>")+'<p id="torusAlert__desc">'.concat(this.embedTranslations.pendingAction,"</p>")+"</div></div>"),i=ut('<div><a id="torusAlert__btn">'.concat(this.embedTranslations.continue,"</a></div>")),o=ut('<div id="torusAlert__btn-container"></div>');o.appendChild(i),n.appendChild(o);this._setEmbedWhiteLabel(n);ct((()=>{this.torusAlertContainer.style.display="block",this.torusAlertContainer.appendChild(n)})),ct((()=>{i.addEventListener("click",(()=>{this._handleWindow(e,{url:t,target:"_blank",features:kt}),n.remove(),0===this.torusAlertContainer.children.length&&(this.torusAlertContainer.style.display="none")}))}))}}var Bt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Wt=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ft=function(){return Bt(void 0,void 0,void 0,(function(){return Wt(this,(function(e){return[2,new Zt]}))}))}},19308:(e,t,r)=>{"use strict";var n=r(19778).Buffer,i=new(0,r(6289).ec)("secp256k1"),o=r.g.crypto||r.g.msCrypto||{},s=o.subtle||o.webkitSubtle,a=r(86433);const c=n.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),u=n.alloc(32,0);function l(e,t){if(!e)throw new Error(t||"Assertion failed")}function d(e){return t=e,!(!n.isBuffer(t)||32!==t.length)&&(e.compare(u)>0&&e.compare(c)<0);var t}function h(e){var t=new Uint8Array(e);return"undefined"===typeof o.getRandomValues?n.from(a.randomBytes(e)):(o.getRandomValues(t),n.from(t))}function f(e){return new Promise((function(t){var r=a.createHash("sha512").update(e).digest();t(new Uint8Array(r))}))}function p(e){return function(t,r,i){return new Promise((function(o){if(s){return s.importKey("raw",r,{name:"AES-CBC"},!1,[e]).then((function(r){var n={name:"AES-CBC",iv:t};return s[e](n,r,i)})).then((function(e){o(n.from(new Uint8Array(e)))}))}if("encrypt"===e){var c=a.createCipheriv("aes-256-cbc",r,t);let e=c.update(i),s=c.final();o(n.concat([e,s]))}else if("decrypt"===e){var u=a.createDecipheriv("aes-256-cbc",r,t);let e=u.update(i),s=u.final();o(n.concat([e,s]))}}))}}var g=p("encrypt"),y=p("decrypt");t.oq=function(){for(var e=h(32);!d(e);)e=h(32);return e};var b=t.rc=function(e){return l(32===e.length,"Bad private key"),l(d(e),"Bad private key"),n.from(i.keyFromPrivate(e).getPublic("arr"))};var v=function(e,t){return new Promise((function(r){l(n.isBuffer(e),"Bad private key"),l(n.isBuffer(t),"Bad public key"),l(32===e.length,"Bad private key"),l(d(e),"Bad private key"),l(65===t.length||33===t.length,"Bad public key"),65===t.length&&l(4===t[0],"Bad public key"),33===t.length&&l(2===t[0]||3===t[0],"Bad public key");var o=i.keyFromPrivate(e),s=i.keyFromPublic(t),a=o.derive(s.getPublic());r(n.from(a.toArray()))}))};t.pe=function(e,t){var r;return v(e,t.ephemPublicKey).then((function(e){return f(e)})).then((function(e){r=e.slice(0,32);var i,o,s,c=e.slice(32),u=n.concat([t.iv,t.ephemPublicKey,t.ciphertext]);return i=c,o=u,s=t.mac,new Promise((function(e){var t=a.createHmac("sha256",n.from(i));t.update(o),e(function(e,t){if(e.length!==t.length)return!1;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(t.digest(),s))}))})).then((function(e){return l(e,"Bad MAC"),y(t.iv,r,t.ciphertext)})).then((function(e){return n.from(new Uint8Array(e))}))}},82344:(e,t,r)=>{"use strict";var n=r(19778).Buffer;var i=r(91288);function o(e,t){return void 0===t&&(t="utf8"),n.isBuffer(e)?a(e.toString("base64")):a(n.from(e,t).toString("base64"))}function s(e){return e=e.toString(),i.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function a(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var c=o;c.encode=o,c.decode=function(e,t){return void 0===t&&(t="utf8"),n.from(s(e),"base64").toString(t)},c.toBase64=s,c.fromBase64=a,c.toBuffer=function(e){return n.from(s(e),"base64")},t.default=c},91288:(e,t,r)=>{"use strict";var n=r(19778).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.length,r=t%4;if(!r)return e;var i=t,o=4-r,s=t+o,a=n.alloc(s);for(a.write(e);o--;)a.write("=",i++);return a.toString()}},1827:(e,t,r)=>{e.exports=r(82344).default,e.exports.default=e.exports},46395:(e,t,r)=>{var n=r(19778).Buffer;function i(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===i(e)},t.isBoolean=function(e){return"boolean"===typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"===typeof e},t.isString=function(e){return"string"===typeof e},t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===i(e)},t.isObject=function(e){return"object"===typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===i(e)},t.isError=function(e){return"[object Error]"===i(e)||e instanceof Error},t.isFunction=function(e){return"function"===typeof e},t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=n.isBuffer},69578:(e,t,r)=>{var n=r(1426),i=r(14876),o=function(){},s=function(e,t,r){if("function"===typeof t)return s(e,null,t);t||(t={}),r=i(r||o);var a=e._writableState,c=e._readableState,u=t.readable||!1!==t.readable&&e.readable,l=t.writable||!1!==t.writable&&e.writable,d=!1,h=function(){e.writable||f()},f=function(){l=!1,u||r.call(e)},p=function(){u=!1,l||r.call(e)},g=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},y=function(t){r.call(e,t)},b=function(){n.nextTick(v)},v=function(){if(!d)return(!u||c&&c.ended&&!c.destroyed)&&(!l||a&&a.ended&&!a.destroyed)?void 0:r.call(e,new Error("premature close"))},m=function(){e.req.on("finish",f)};return!function(e){return e.setHeader&&"function"===typeof e.abort}(e)?l&&!a&&(e.on("end",h),e.on("close",h)):(e.on("complete",f),e.on("abort",b),e.req?m():e.on("request",m)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",g),e.on("end",p),e.on("finish",f),!1!==t.error&&e.on("error",y),e.on("close",b),function(){d=!0,e.removeListener("complete",f),e.removeListener("abort",b),e.removeListener("request",m),e.req&&e.req.removeListener("finish",f),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",f),e.removeListener("exit",g),e.removeListener("end",p),e.removeListener("error",y),e.removeListener("close",b)}};e.exports=s},78262:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!==i--;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r}},50539:e=>{"use strict";const t=e=>null!==e&&"object"===typeof e&&"function"===typeof e.pipe;t.writable=e=>t(e)&&!1!==e.writable&&"function"===typeof e._write&&"object"===typeof e._writableState,t.readable=e=>t(e)&&!1!==e.readable&&"function"===typeof e._read&&"object"===typeof e._readableState,t.duplex=e=>t.writable(e)&&t.readable(e),t.transform=e=>t.duplex(e)&&"function"===typeof e._transform,e.exports=t},57381:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",s="[object Function]",a="[object Object]",c=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[o]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l[s]=l["[object Map]"]=l["[object Number]"]=l[a]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1;var d="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,h="object"==typeof self&&self&&self.Object===Object&&self,f=d||h||Function("return this")(),p=t&&!t.nodeType&&t,g=p&&e&&!e.nodeType&&e,y=g&&g.exports===p,b=y&&d.process,v=function(){try{var e=g&&g.require&&g.require("util").types;return e||b&&b.binding&&b.binding("util")}catch(t){}}(),m=v&&v.isTypedArray;function w(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var _,k,S=Array.prototype,x=Function.prototype,O=Object.prototype,P=f["__core-js_shared__"],E=x.toString,j=O.hasOwnProperty,C=function(){var e=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),A=O.toString,T=E.call(Object),I=RegExp("^"+E.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=y?f.Buffer:void 0,L=f.Symbol,R=f.Uint8Array,D=M?M.allocUnsafe:void 0,N=(_=Object.getPrototypeOf,k=Object,function(e){return _(k(e))}),U=Object.create,q=O.propertyIsEnumerable,Z=S.splice,B=L?L.toStringTag:void 0,W=function(){try{var e=pe(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),F=M?M.isBuffer:void 0,H=Math.max,V=Date.now,K=pe(f,"Map"),z=pe(Object,"create"),Y=function(){function e(){}return function(t){if(!Pe(t))return{};if(U)return U(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function G(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function X(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function J(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $(e){var t=this.__data__=new X(e);this.size=t.size}function Q(e,t){var r=_e(e),n=!r&&we(e),i=!r&&!n&&Se(e),o=!r&&!n&&!i&&je(e),s=r||n||i||o,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var u in e)!t&&!j.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ge(u,c))||a.push(u);return a}function ee(e,t,r){(void 0!==r&&!me(e[t],r)||void 0===r&&!(t in e))&&ne(e,t,r)}function te(e,t,r){var n=e[t];j.call(e,t)&&me(n,r)&&(void 0!==r||t in e)||ne(e,t,r)}function re(e,t){for(var r=e.length;r--;)if(me(e[r][0],t))return r;return-1}function ne(e,t,r){"__proto__"==t&&W?W(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}G.prototype.clear=function(){this.__data__=z?z(null):{},this.size=0},G.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},G.prototype.get=function(e){var t=this.__data__;if(z){var r=t[e];return r===n?void 0:r}return j.call(t,e)?t[e]:void 0},G.prototype.has=function(e){var t=this.__data__;return z?void 0!==t[e]:j.call(t,e)},G.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=z&&void 0===t?n:t,this},X.prototype.clear=function(){this.__data__=[],this.size=0},X.prototype.delete=function(e){var t=this.__data__,r=re(t,e);return!(r<0)&&(r==t.length-1?t.pop():Z.call(t,r,1),--this.size,!0)},X.prototype.get=function(e){var t=this.__data__,r=re(t,e);return r<0?void 0:t[r][1]},X.prototype.has=function(e){return re(this.__data__,e)>-1},X.prototype.set=function(e,t){var r=this.__data__,n=re(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},J.prototype.clear=function(){this.size=0,this.__data__={hash:new G,map:new(K||X),string:new G}},J.prototype.delete=function(e){var t=fe(this,e).delete(e);return this.size-=t?1:0,t},J.prototype.get=function(e){return fe(this,e).get(e)},J.prototype.has=function(e){return fe(this,e).has(e)},J.prototype.set=function(e,t){var r=fe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},$.prototype.clear=function(){this.__data__=new X,this.size=0},$.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},$.prototype.get=function(e){return this.__data__.get(e)},$.prototype.has=function(e){return this.__data__.has(e)},$.prototype.set=function(e,t){var r=this.__data__;if(r instanceof X){var n=r.__data__;if(!K||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new J(n)}return r.set(e,t),this.size=r.size,this};var ie,oe=function(e,t,r){for(var n=-1,i=Object(e),o=r(e),s=o.length;s--;){var a=o[ie?s:++n];if(!1===t(i[a],a,i))break}return e};function se(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":B&&B in Object(e)?function(e){var t=j.call(e,B),r=e[B];try{e[B]=void 0;var n=!0}catch(o){}var i=A.call(e);n&&(t?e[B]=r:delete e[B]);return i}(e):function(e){return A.call(e)}(e)}function ae(e){return Ee(e)&&se(e)==o}function ce(e){return!(!Pe(e)||function(e){return!!C&&C in e}(e))&&(xe(e)?I:c).test(function(e){if(null!=e){try{return E.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function ue(e){if(!Pe(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ye(e),r=[];for(var n in e)("constructor"!=n||!t&&j.call(e,n))&&r.push(n);return r}function le(e,t,r,n,i){e!==t&&oe(t,(function(o,s){if(i||(i=new $),Pe(o))!function(e,t,r,n,i,o,s){var c=be(e,r),u=be(t,r),l=s.get(u);if(l)return void ee(e,r,l);var d=o?o(c,u,r+"",e,t,s):void 0,h=void 0===d;if(h){var f=_e(u),p=!f&&Se(u),g=!f&&!p&&je(u);d=u,f||p||g?_e(c)?d=c:Ee(y=c)&&ke(y)?d=function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(c):p?(h=!1,d=function(e,t){if(t)return e.slice();var r=e.length,n=D?D(r):new e.constructor(r);return e.copy(n),n}(u,!0)):g?(h=!1,d=function(e,t){var r=t?function(e){var t=new e.constructor(e.byteLength);return new R(t).set(new R(e)),t}(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(u,!0)):d=[]:function(e){if(!Ee(e)||se(e)!=a)return!1;var t=N(e);if(null===t)return!0;var r=j.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&E.call(r)==T}(u)||we(u)?(d=c,we(c)?d=function(e){return function(e,t,r,n){var i=!r;r||(r={});var o=-1,s=t.length;for(;++o<s;){var a=t[o],c=n?n(r[a],e[a],a,r,e):void 0;void 0===c&&(c=e[a]),i?ne(r,a,c):te(r,a,c)}return r}(e,Ce(e))}(c):Pe(c)&&!xe(c)||(d=function(e){return"function"!=typeof e.constructor||ye(e)?{}:Y(N(e))}(u))):h=!1}var y;h&&(s.set(u,d),i(d,u,n,o,s),s.delete(u));ee(e,r,d)}(e,t,s,r,le,n,i);else{var c=n?n(be(e,s),o,s+"",e,t,i):void 0;void 0===c&&(c=o),ee(e,s,c)}}),Ce)}function de(e,t){return ve(function(e,t,r){return t=H(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=H(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(s),w(e,this,a)}}(e,t,Ie),e+"")}var he=W?function(e,t){return W(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Ie;function fe(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function pe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return ce(r)?r:void 0}function ge(e,t){var r=typeof e;return!!(t=null==t?i:t)&&("number"==r||"symbol"!=r&&u.test(e))&&e>-1&&e%1==0&&e<t}function ye(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||O)}function be(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var ve=function(e){var t=0,r=0;return function(){var n=V(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(he);function me(e,t){return e===t||e!==e&&t!==t}var we=ae(function(){return arguments}())?ae:function(e){return Ee(e)&&j.call(e,"callee")&&!q.call(e,"callee")},_e=Array.isArray;function ke(e){return null!=e&&Oe(e.length)&&!xe(e)}var Se=F||function(){return!1};function xe(e){if(!Pe(e))return!1;var t=se(e);return t==s||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Oe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Pe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ee(e){return null!=e&&"object"==typeof e}var je=m?function(e){return function(t){return e(t)}}(m):function(e){return Ee(e)&&Oe(e.length)&&!!l[se(e)]};function Ce(e){return ke(e)?Q(e,!0):ue(e)}var Ae,Te=(Ae=function(e,t,r){le(e,t,r)},de((function(e,t){var r=-1,n=t.length,i=n>1?t[n-1]:void 0,o=n>2?t[2]:void 0;for(i=Ae.length>3&&"function"==typeof i?(n--,i):void 0,o&&function(e,t,r){if(!Pe(r))return!1;var n=typeof t;return!!("number"==n?ke(r)&&ge(t,r.length):"string"==n&&t in r)&&me(r[t],e)}(t[0],t[1],o)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var s=t[r];s&&Ae(e,s,r,i)}return e})));function Ie(e){return e}e.exports=Te},62895:function(e,t,r){var n,i,o=r(25102);!function(s,a){"use strict";n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(e,t){var r=e[t];if("function"===typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(n){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function s(){o.log&&(o.log.apply?o.log.apply(o,arguments):Function.prototype.apply.apply(o.log,[o,arguments])),o.trace&&o.trace()}function a(n){return"debug"===n&&(n="log"),typeof o!==t&&("trace"===n&&r?s:void 0!==o[n]?i(o,n):void 0!==o.log?i(o,"log"):e)}function c(t,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<t?e:this.methodFactory(o,t,r)}this.log=this.debug}function u(e,r,n){return function(){typeof o!==t&&(c.call(this,r,n),this[e].apply(this,arguments))}}function l(e,t,r){return a(e)||u.apply(this,arguments)}function d(e,r,i){var s,a=this;r=null==r?"WARN":r;var u="loglevel";function d(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&u){try{return void(window.localStorage[u]=r)}catch(i){}try{window.document.cookie=encodeURIComponent(u)+"="+r+";"}catch(i){}}}function h(){var e;if(typeof window!==t&&u){try{e=window.localStorage[u]}catch(i){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(u)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(i){}return void 0===a.levels[e]&&(e=void 0),e}}function f(){if(typeof window!==t&&u){try{return void window.localStorage.removeItem(u)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}"string"===typeof e?u+=":"+e:"symbol"===typeof e&&(u=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=i||l,a.getLevel=function(){return s},a.setLevel=function(r,n){if("string"===typeof r&&void 0!==a.levels[r.toUpperCase()]&&(r=a.levels[r.toUpperCase()]),!("number"===typeof r&&r>=0&&r<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(s=r,!1!==n&&d(r),c.call(a,r,e),typeof o===t&&r<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){r=e,h()||a.setLevel(e,!1)},a.resetLevel=function(){a.setLevel(r,!1),f()},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var p=h();null==p&&(p=r),a.setLevel(p,!1)}var h=new d,f={};h.getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new d(e,h.getLevel(),h.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return h.noConflict=function(){return typeof window!==t&&window.log===h&&(window.log=p),h},h.getLoggers=function(){return f},h.default=h,h},void 0===(i="function"===typeof n?n.call(t,r,t,e):n)||(e.exports=i)}()},14876:(e,t,r)=>{var n=r(66418);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(i),e.exports.strict=n(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},10401:(e,t,r)=>{"use strict";var n=r(1426);"undefined"===typeof n||!n.version||0===n.version.indexOf("v0.")||0===n.version.indexOf("v1.")&&0!==n.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,r,i){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return n.nextTick(e);case 2:return n.nextTick((function(){e.call(null,t)}));case 3:return n.nextTick((function(){e.call(null,t,r)}));case 4:return n.nextTick((function(){e.call(null,t,r,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return n.nextTick((function(){e.apply(null,o)}))}}}:e.exports=n},99306:(e,t,r)=>{var n=r(1426),i=r(14876),o=r(69578),s=r(71156),a=function(){},c=/^v?\.0/.test(n.version),u=function(e){return"function"===typeof e},l=function(e,t,r,n){n=i(n);var l=!1;e.on("close",(function(){l=!0})),o(e,{readable:t,writable:r},(function(e){if(e)return n(e);l=!0,n()}));var d=!1;return function(t){if(!l&&!d)return d=!0,function(e){return!!c&&!!s&&(e instanceof(s.ReadStream||a)||e instanceof(s.WriteStream||a))&&u(e.close)}(e)?e.close(a):function(e){return e.setHeader&&u(e.abort)}(e)?e.abort():u(e.destroy)?e.destroy():void n(t||new Error("stream was destroyed"))}},d=function(e){e()},h=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=u(t[t.length-1]||a)&&t.pop()||a;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map((function(i,o){var s=o<t.length-1;return l(i,s,o>0,(function(t){e||(e=t),t&&n.forEach(d),s||(n.forEach(d),r(e))}))}));return t.reduce(h)}},29941:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},32337:(e,t,r)=>{"use strict";var n=r(10401),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=d;var o=Object.create(r(46395));o.inherits=r(12534);var s=r(69080),a=r(27353);o.inherits(d,s);for(var c=i(a.prototype),u=0;u<c.length;u++){var l=c[u];d.prototype[l]||(d.prototype[l]=a.prototype[l])}function d(e){if(!(this instanceof d))return new d(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},53906:(e,t,r)=>{"use strict";e.exports=o;var n=r(43886),i=Object.create(r(46395));function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=r(12534),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},69080:(e,t,r)=>{"use strict";var n=r(1426),i=r(10401);e.exports=m;var o,s=r(29941);m.ReadableState=v;r(47465).EventEmitter;var a=function(e,t){return e.listeners(t).length},c=r(19533),u=r(82543).Buffer,l=r.g.Uint8Array||function(){};var d=Object.create(r(46395));d.inherits=r(12534);var h=r(66882),f=void 0;f=h&&h.debuglog?h.debuglog("stream"):function(){};var p,g=r(74782),y=r(15655);d.inherits(m,c);var b=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var n=t instanceof(o=o||r(32337));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(40394).s),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function m(e){if(o=o||r(32337),!(this instanceof m))return new m(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function w(e,t,r,n,i){var o,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,x(e)}(e,s)):(i||(o=function(e,t){var r;n=t,u.isBuffer(n)||n instanceof l||"string"===typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"===typeof t||s.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):_(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?_(e,s,t,!1):P(e,s)):_(e,s,t,!1))):n||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function _(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&x(e)),P(e,t)}Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),m.prototype.destroy=y.destroy,m.prototype._undestroy=y.undestroy,m.prototype._destroy=function(e,t){this.push(null),t(e)},m.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u.from(e,t),t=""),r=!0),w(this,e,t,!1,r)},m.prototype.unshift=function(e){return w(this,e,null,!0,!1)},m.prototype.isPaused=function(){return!1===this._readableState.flowing},m.prototype.setEncoding=function(e){return p||(p=r(40394).s),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var k=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=k?e=k:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(O,e):O(e))}function O(e){f("emit readable"),e.emit("readable"),A(e)}function P(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(E,e,t))}function E(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function j(e){f("readable nexttick read 0"),e.read(0)}function C(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),A(e),t.flowing&&!t.reading&&e.read(0)}function A(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=u.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0===(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function I(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(M,t,e))}function M(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}m.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):x(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&I(this),null;var n,i=t.needReadable;return f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",i=!0),t.ended||t.reading?f("reading or ended",i=!1):i&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(r,t))),null===(n=e>0?T(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&I(this)),null!==n&&this.emit("data",n),n},m.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},m.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,t);var c=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?l:m;function u(t,n){f("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),e.removeListener("close",b),e.removeListener("finish",v),e.removeListener("drain",d),e.removeListener("error",y),e.removeListener("unpipe",u),r.removeListener("end",l),r.removeListener("end",m),r.removeListener("data",g),h=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function l(){f("onend"),e.end()}o.endEmitted?i.nextTick(c):r.once("end",c),e.on("unpipe",u);var d=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,A(e))}}(r);e.on("drain",d);var h=!1;var p=!1;function g(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==L(o.pipes,e))&&!h&&(f("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function y(t){f("onerror",t),m(),e.removeListener("error",y),0===a(e,"error")&&e.emit("error",t)}function b(){e.removeListener("finish",v),m()}function v(){f("onfinish"),e.removeListener("close",b),m()}function m(){f("unpipe"),r.unpipe(e)}return r.on("data",g),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",y),e.once("close",b),e.once("finish",v),e.emit("pipe",r),o.flowing||(f("pipe resume"),r.resume()),e},m.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=L(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},m.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&x(this):i.nextTick(j,this))}return r},m.prototype.addListener=m.prototype.on,m.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(C,e,t))}(this,e)),this},m.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},m.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(f("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(f("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<b.length;o++)e.on(b[o],this.emit.bind(this,b[o]));return this._read=function(t){f("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(m.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),m._fromList=T},43886:(e,t,r)=>{"use strict";e.exports=s;var n=r(32337),i=Object.create(r(46395));function o(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);n.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"===typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(12534),i.inherits(s,n),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},27353:(e,t,r)=>{"use strict";var n=r(1426),i=r(10401);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=b;var s,a=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:i.nextTick;b.WritableState=y;var c=Object.create(r(46395));c.inherits=r(12534);var u={deprecate:r(89515)},l=r(19533),d=r(82543).Buffer,h=r.g.Uint8Array||function(){};var f,p=r(15655);function g(){}function y(e,t){s=s||r(32337),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var c=e.highWaterMark,u=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=c||0===c?c:n&&(u||0===u)?u:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(i.nextTick(o,n),i.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),S(e,t))}(e,r,n,t,o);else{var s=_(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),n?a(m,e,r,s,o):m(e,r,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function b(e){if(s=s||r(32337),!f.call(b,this)&&!(this instanceof s))return new b(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),l.call(this)}function v(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function m(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),S(e,t)}function w(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,c=!0;r;)i[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;i.allBuffers=c,v(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,d=r.callback;if(v(e,t,!1,t.objectMode?1:u.length,u,l,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var r=_(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,i.nextTick(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}c.inherits(b,l),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!f.call(this,e)||this===b&&(e&&e._writableState instanceof y)}})):f=function(e){return e instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(e,t,r){var n,o=this._writableState,s=!1,a=!o.objectMode&&(n=e,d.isBuffer(n)||n instanceof h);return a&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"===typeof t&&(r=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!==typeof r&&(r=g),o.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),i.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var o=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"===typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),i.nextTick(n,s),o=!1),o}(this,o,e,r))&&(o.pendingcb++,s=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=d.from(t,r));return t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,a,n,i,o);return c}(this,o,a,e,t,r)),s},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(e,t,r){var n=this._writableState;"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,S(e,t),r&&(t.finished?i.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=p.destroy,b.prototype._undestroy=p.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e)}},74782:(e,t,r)=>{"use strict";var n=r(82543).Buffer,i=r(50522);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,o=n.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=o,i=a,t.copy(r,i),a+=s.data.length,s=s.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},15655:(e,t,r)=>{"use strict";var n=r(10401);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},19533:(e,t,r)=>{e.exports=r(47465).EventEmitter},96445:(e,t,r)=>{(t=e.exports=r(69080)).Stream=t,t.Readable=t,t.Writable=r(27353),t.Duplex=r(32337),t.Transform=r(43886),t.PassThrough=r(53906)},40394:(e,t,r)=>{"use strict";var n=r(82543).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},65863:(e,t,r)=>{var n=r(1426),i=r(96445).Transform,o=r(49639).inherits,s=r(85887);function a(e){i.call(this,e),this._destroyed=!1}function c(e,t,r){r(null,e)}function u(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=c),"function"!=typeof n&&(n=null),e(t,r,n)}}o(a,i),a.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},e.exports=u((function(e,t,r){var n=new a(e);return n._transform=t,r&&(n._flush=r),n})),e.exports.ctor=u((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=s(e,t),a.call(this,this.options)}return o(n,a),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),e.exports.obj=u((function(e,t,r){var n=new a(s({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))},66418:e=>{e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!==typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"===typeof n&&n!==i&&Object.keys(i).forEach((function(e){n[e]=i[e]})),n}}},17061:(e,t,r)=>{var n=r(18698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,o=r.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),s=new P(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return j()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=S(s,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,s),o}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(C){return{type:"throw",arg:C}}}t.wrap=d;var f={};function p(){}function g(){}function y(){}var b={};l(b,a,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(E([])));m&&m!==r&&o.call(m,a)&&(b=m);var w=y.prototype=p.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,s,a,c){var u=h(e[i],e,s);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=h(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:j}}function j(){return{value:void 0,done:!0}}return g.prototype=y,l(w,"constructor",y),l(y,"constructor",g),g.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},_(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new k(d(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(w),l(w,u,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},18698:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},64687:(e,t,r)=>{var n=r(17061)();e.exports=n;try{regeneratorRuntime=n}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}}]);
//# sourceMappingURL=541.54c5d126.chunk.js.map