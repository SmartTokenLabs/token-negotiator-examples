import{d as mr,g as Ab}from"./index.db10b395.js";var Yi={exports:{}},Wi,Sc;function Nb(){return Sc||(Sc=1,Wi=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),Wi}(function(Jt,vr){(function(Ae,Me){Me(vr)})(mr,function(Ae){var Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof mr<"u"?mr:typeof self<"u"?self:{};function pt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function re(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}function _t(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Xt=wr;function wr(t,e,r){var n=r&&r.stringify||_t,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var c=new Array(s);c[0]=n(t);for(var a=1;a<s;a++)c[a]=n(e[a]);return c.join(" ")}if(typeof t!="string")return t;var l=e.length;if(l===0)return t;for(var h="",f=1-i,O=-1,w=t&&t.length||0,v=0;v<w;){if(t.charCodeAt(v)===37&&v+1<w){switch(O=O>-1?O:0,t.charCodeAt(v+1)){case 100:case 102:if(f>=l||e[f]==null)break;O<v&&(h+=t.slice(O,v)),h+=Number(e[f]),O=v+2,v++;break;case 105:if(f>=l||e[f]==null)break;O<v&&(h+=t.slice(O,v)),h+=Math.floor(Number(e[f])),O=v+2,v++;break;case 79:case 111:case 106:if(f>=l||e[f]===void 0)break;O<v&&(h+=t.slice(O,v));var _=typeof e[f];if(_==="string"){h+="'"+e[f]+"'",O=v+2,v++;break}if(_==="function"){h+=e[f].name||"<anonymous>",O=v+2,v++;break}h+=n(e[f]),O=v+2,v++;break;case 115:if(f>=l)break;O<v&&(h+=t.slice(O,v)),h+=String(e[f]),O=v+2,v++;break;case 37:O<v&&(h+=t.slice(O,v)),h+="%",O=v+2,v++,f--;break}++f}++v}return O===-1?t:(O<w&&(h+=t.slice(O)),h)}const fe=Xt;var rt=Nt;const jt=Lc().console||{},Oc={mapHttpRequest:en,mapHttpResponse:en,wrapRequestSerializer:Dn,wrapResponseSerializer:Dn,wrapErrorSerializer:Dn,req:en,res:en,err:Nc};function Ic(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Nt(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||jt;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=Ic(t.browser.serialize,n);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const c=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const a=t.level||"info",l=Object.create(r);l.log||(l.log=_r),Object.defineProperty(l,"levelVal",{get:f}),Object.defineProperty(l,"level",{get:O,set:w});const h={transmit:e,serialize:i,asObject:t.browser.asObject,levels:c,timestamp:Rc(t)};l.levels=Nt.levels,l.level=a,l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=_r,l.serializers=n,l._serialize=i,l._stdErrSerialize=s,l.child=v,e&&(l._logEvent=Mn());function f(){return this.level==="silent"?1/0:this.levels.values[this.level]}function O(){return this._level}function w(_){if(_!=="silent"&&!this.levels.values[_])throw Error("unknown level "+_);this._level=_,cr(h,l,"error","log"),cr(h,l,"fatal","error"),cr(h,l,"warn","error"),cr(h,l,"info","log"),cr(h,l,"debug","log"),cr(h,l,"trace","log")}function v(_,x){if(!_)throw new Error("missing bindings for child Pino");x=x||{},i&&_.serializers&&(x.serializers=_.serializers);const j=x.serializers;if(i&&j){var K=Object.assign({},n,j),I=t.browser.serialize===!0?Object.keys(K):i;delete _.serializers,Qr([_],I,K,this._stdErrSerialize)}function A(y){this._childLevel=(y._childLevel|0)+1,this.error=ur(y,_,"error"),this.fatal=ur(y,_,"fatal"),this.warn=ur(y,_,"warn"),this.info=ur(y,_,"info"),this.debug=ur(y,_,"debug"),this.trace=ur(y,_,"trace"),K&&(this.serializers=K,this._serialize=I),e&&(this._logEvent=Mn([].concat(y._logEvent.bindings,_)))}return A.prototype=this,new A(this)}return l}Nt.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},Nt.stdSerializers=Oc,Nt.stdTimeFunctions=Object.assign({},{nullTime:Ji,epochTime:Xi,unixTime:xc,isoTime:Tc});function cr(t,e,r,n){const i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?_r:i[r]?i[r]:jt[r]||jt[n]||_r,Pc(t,e,r)}function Pc(t,e,r){!t.transmit&&e[r]===_r||(e[r]=function(n){return function(){const i=t.timestamp(),s=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===jt?jt:this;for(var a=0;a<s.length;a++)s[a]=arguments[a];if(t.serialize&&!t.asObject&&Qr(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(c,Fc(this,r,s,i)):n.apply(c,s),t.transmit){const l=t.transmit.level||e.level,h=Nt.levels.values[l],f=Nt.levels.values[r];if(f<h)return;Ac(this,{ts:i,methodLevel:r,methodValue:f,transmitLevel:l,transmitValue:Nt.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},s)}}}(e[r]))}function Fc(t,e,r,n){t._serialize&&Qr(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let s=i[0];const c={};n&&(c.time=n),c.level=Nt.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(c,i.shift());s=i.length?fe(i.shift(),i):void 0}else typeof s=="string"&&(s=fe(i.shift(),i));return s!==void 0&&(c.msg=s),c}function Qr(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=Nt.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function ur(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function Ac(t,e,r){const n=e.send,i=e.ts,s=e.methodLevel,c=e.methodValue,a=e.val,l=t._logEvent.bindings;Qr(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(h){return l.indexOf(h)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=c,n(s,t._logEvent,a),t._logEvent=Mn(l)}function Mn(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Nc(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function Rc(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Ji:Xi}function en(){return{}}function Dn(t){return t}function _r(){}function Ji(){return!1}function Xi(){return Date.now()}function xc(){return Math.round(Date.now()/1e3)}function Tc(){return new Date(Date.now()).toISOString()}function Lc(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}var at={exports:{}},hr=typeof Reflect=="object"?Reflect:null,Zi=hr&&typeof hr.apply=="function"?hr.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},tn;hr&&typeof hr.ownKeys=="function"?tn=hr.ownKeys:Object.getOwnPropertySymbols?tn=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:tn=function(t){return Object.getOwnPropertyNames(t)};function Cc(t){console&&console.warn&&console.warn(t)}var Qi=Number.isNaN||function(t){return t!==t};function Fe(){Fe.init.call(this)}at.exports=Fe,at.exports.once=Dc,Fe.EventEmitter=Fe,Fe.prototype._events=void 0,Fe.prototype._eventsCount=0,Fe.prototype._maxListeners=void 0;var es=10;function rn(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Fe,"defaultMaxListeners",{enumerable:!0,get:function(){return es},set:function(t){if(typeof t!="number"||t<0||Qi(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");es=t}}),Fe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Fe.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Qi(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function ts(t){return t._maxListeners===void 0?Fe.defaultMaxListeners:t._maxListeners}Fe.prototype.getMaxListeners=function(){return ts(this)},Fe.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=t==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var c=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw c.context=s,c}var a=i[t];if(a===void 0)return!1;if(typeof a=="function")Zi(a,this,e);else for(var l=a.length,h=os(a,l),r=0;r<l;++r)Zi(h[r],this,e);return!0};function rs(t,e,r,n){var i,s,c;if(rn(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),c=s[e]),c===void 0)c=s[e]=r,++t._eventsCount;else if(typeof c=="function"?c=s[e]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),i=ts(t),i>0&&c.length>i&&!c.warned){c.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=c.length,Cc(a)}return t}Fe.prototype.addListener=function(t,e){return rs(this,t,e,!1)},Fe.prototype.on=Fe.prototype.addListener,Fe.prototype.prependListener=function(t,e){return rs(this,t,e,!0)};function jc(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ns(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=jc.bind(n);return i.listener=r,n.wrapFn=i,i}Fe.prototype.once=function(t,e){return rn(e),this.on(t,ns(this,t,e)),this},Fe.prototype.prependOnceListener=function(t,e){return rn(e),this.prependListener(t,ns(this,t,e)),this},Fe.prototype.removeListener=function(t,e){var r,n,i,s,c;if(rn(e),n=this._events,n===void 0)return this;if(r=n[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){c=r[s].listener,i=s;break}if(i<0)return this;i===0?r.shift():Uc(r,i),r.length===1&&(n[t]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",t,c||e)}return this},Fe.prototype.off=Fe.prototype.removeListener,Fe.prototype.removeAllListeners=function(t){var e,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var i=Object.keys(r),s;for(n=0;n<i.length;++n)s=i[n],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this};function is(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Mc(i):os(i,i.length)}Fe.prototype.listeners=function(t){return is(this,t,!0)},Fe.prototype.rawListeners=function(t){return is(this,t,!1)},Fe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ss.call(t,e)},Fe.prototype.listenerCount=ss;function ss(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Fe.prototype.eventNames=function(){return this._eventsCount>0?tn(this._events):[]};function os(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Uc(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Mc(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Dc(t,e){return new Promise(function(r,n){function i(c){t.removeListener(e,s),n(c)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}as(t,e,s,{once:!0}),e!=="error"&&kc(t,i,{once:!0})})}function kc(t,e,r){typeof t.on=="function"&&as(t,"error",e,r)}function as(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var nn={};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var kn=function(t,e){return kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},kn(t,e)};function zc(t,e){kn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var zn=function(){return zn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},zn.apply(this,arguments)};function Hc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Kc(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function $c(t,e){return function(r,n){e(r,n,t)}}function Bc(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Vc(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function a(f){try{h(n.next(f))}catch(O){c(O)}}function l(f){try{h(n.throw(f))}catch(O){c(O)}}function h(f){f.done?s(f.value):i(f.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}function qc(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(h){return function(f){return l([h,f])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Gc(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Wc(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Hn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cs(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function Yc(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(cs(arguments[e]));return t}function Jc(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,a=s.length;c<a;c++,i++)n[i]=s[c];return n}function Er(t){return this instanceof Er?(this.v=t,this):new Er(t)}function Xc(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(w){n[w]&&(i[w]=function(v){return new Promise(function(_,x){s.push([w,v,_,x])>1||a(w,v)})})}function a(w,v){try{l(n[w](v))}catch(_){O(s[0][3],_)}}function l(w){w.value instanceof Er?Promise.resolve(w.value.v).then(h,f):O(s[0][2],w)}function h(w){a("next",w)}function f(w){a("throw",w)}function O(w,v){w(v),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Zc(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:Er(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function Qc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Hn=="function"?Hn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(a,l){c=t[s](c),i(a,l,c.done,c.value)})}}function i(s,c,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},c)}}function eu(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function tu(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function ru(t){return t&&t.__esModule?t:{default:t}}function nu(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function iu(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var su=Object.freeze({__proto__:null,__extends:zc,get __assign(){return zn},__rest:Hc,__decorate:Kc,__param:$c,__metadata:Bc,__awaiter:Vc,__generator:qc,__createBinding:Gc,__exportStar:Wc,__values:Hn,__read:cs,__spread:Yc,__spreadArrays:Jc,__await:Er,__asyncGenerator:Xc,__asyncDelegator:Zc,__asyncValues:Qc,__makeTemplateObject:eu,__importStar:tu,__importDefault:ru,__classPrivateFieldGet:nu,__classPrivateFieldSet:iu}),us=re(su),Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});function ou(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}Sr.safeJsonParse=ou;function au(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}Sr.safeJsonStringify=au;var sn={exports:{}},hs;function cu(){return hs||(hs=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Me<"u"&&Me.localStorage?sn.exports=Me.localStorage:typeof window<"u"&&window.localStorage?sn.exports=window.localStorage:sn.exports=new e}()),sn.exports}var ls={},Or={},fs;function uu(){if(fs)return Or;fs=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.IKeyValueStorage=void 0;class t{}return Or.IKeyValueStorage=t,Or}var Ir={},ps;function hu(){if(ps)return Ir;ps=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.parseEntry=void 0;const t=Sr;function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return Ir.parseEntry=e,Ir}var ds;function lu(){return ds||(ds=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=us;e.__exportStar(uu(),t),e.__exportStar(hu(),t)}(ls)),ls}Object.defineProperty(nn,"__esModule",{value:!0}),nn.KeyValueStorage=void 0;const lr=us,gs=Sr,fu=lr.__importDefault(cu()),pu=lu();class ys{constructor(){this.localStorage=fu.default}getKeys(){return lr.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return lr.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(pu.parseEntry)})}getItem(e){return lr.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return gs.safeJsonParse(r)})}setItem(e,r){return lr.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,gs.safeJsonStringify(r))})}removeItem(e){return lr.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}nn.KeyValueStorage=ys;var du=nn.default=ys,Pr={};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var Kn=function(t,e){return Kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Kn(t,e)};function gu(t,e){Kn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var $n=function(){return $n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},$n.apply(this,arguments)};function yu(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function bu(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function mu(t,e){return function(r,n){e(r,n,t)}}function vu(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function wu(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function a(f){try{h(n.next(f))}catch(O){c(O)}}function l(f){try{h(n.throw(f))}catch(O){c(O)}}function h(f){f.done?s(f.value):i(f.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}function _u(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(h){return function(f){return l([h,f])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Eu(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Su(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Bn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bs(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function Ou(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(bs(arguments[e]));return t}function Iu(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,a=s.length;c<a;c++,i++)n[i]=s[c];return n}function Fr(t){return this instanceof Fr?(this.v=t,this):new Fr(t)}function Pu(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(w){n[w]&&(i[w]=function(v){return new Promise(function(_,x){s.push([w,v,_,x])>1||a(w,v)})})}function a(w,v){try{l(n[w](v))}catch(_){O(s[0][3],_)}}function l(w){w.value instanceof Fr?Promise.resolve(w.value.v).then(h,f):O(s[0][2],w)}function h(w){a("next",w)}function f(w){a("throw",w)}function O(w,v){w(v),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Fu(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:Fr(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function Au(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Bn=="function"?Bn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(a,l){c=t[s](c),i(a,l,c.done,c.value)})}}function i(s,c,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},c)}}function Nu(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ru(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function xu(t){return t&&t.__esModule?t:{default:t}}function Tu(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Lu(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Cu=Object.freeze({__proto__:null,__extends:gu,get __assign(){return $n},__rest:yu,__decorate:bu,__param:mu,__metadata:vu,__awaiter:wu,__generator:_u,__createBinding:Eu,__exportStar:Su,__values:Bn,__read:bs,__spread:Ou,__spreadArrays:Iu,__await:Fr,__asyncGenerator:Pu,__asyncDelegator:Fu,__asyncValues:Au,__makeTemplateObject:Nu,__importStar:Ru,__importDefault:xu,__classPrivateFieldGet:Tu,__classPrivateFieldSet:Lu}),on=re(Cu),Ar={},Z={};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var Vn=function(t,e){return Vn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Vn(t,e)};function ju(t,e){Vn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var qn=function(){return qn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qn.apply(this,arguments)};function Uu(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Mu(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Du(t,e){return function(r,n){e(r,n,t)}}function ku(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function zu(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function a(f){try{h(n.next(f))}catch(O){c(O)}}function l(f){try{h(n.throw(f))}catch(O){c(O)}}function h(f){f.done?s(f.value):i(f.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}function Hu(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(h){return function(f){return l([h,f])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Ku(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function $u(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Gn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ms(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function Bu(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ms(arguments[e]));return t}function Vu(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,a=s.length;c<a;c++,i++)n[i]=s[c];return n}function Nr(t){return this instanceof Nr?(this.v=t,this):new Nr(t)}function qu(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(w){n[w]&&(i[w]=function(v){return new Promise(function(_,x){s.push([w,v,_,x])>1||a(w,v)})})}function a(w,v){try{l(n[w](v))}catch(_){O(s[0][3],_)}}function l(w){w.value instanceof Nr?Promise.resolve(w.value.v).then(h,f):O(s[0][2],w)}function h(w){a("next",w)}function f(w){a("throw",w)}function O(w,v){w(v),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Gu(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:Nr(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function Wu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Gn=="function"?Gn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(a,l){c=t[s](c),i(a,l,c.done,c.value)})}}function i(s,c,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},c)}}function Yu(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ju(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Xu(t){return t&&t.__esModule?t:{default:t}}function Zu(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Qu(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var eh=Object.freeze({__proto__:null,__extends:ju,get __assign(){return qn},__rest:Uu,__decorate:Mu,__param:Du,__metadata:ku,__awaiter:zu,__generator:Hu,__createBinding:Ku,__exportStar:$u,__values:Gn,__read:ms,__spread:Bu,__spreadArrays:Vu,__await:Nr,__asyncGenerator:qu,__asyncDelegator:Gu,__asyncValues:Wu,__makeTemplateObject:Yu,__importStar:Ju,__importDefault:Xu,__classPrivateFieldGet:Zu,__classPrivateFieldSet:Qu}),an=re(eh),vs={},Rr={},ws;function th(){if(ws)return Rr;ws=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Rr.delay=t,Rr}var Zt={},_s={},fr={},Es;function rh(){return Es||(Es=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.ONE_THOUSAND=fr.ONE_HUNDRED=void 0,fr.ONE_HUNDRED=100,fr.ONE_THOUSAND=1e3),fr}var Ss={},Os;function nh(){return Os||(Os=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Ss)),Ss}var Is;function Ps(){return Is||(Is=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=an;e.__exportStar(rh(),t),e.__exportStar(nh(),t)}(_s)),_s}var Fs;function ih(){if(Fs)return Zt;Fs=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.fromMiliseconds=Zt.toMiliseconds=void 0;const t=Ps();function e(n){return n*t.ONE_THOUSAND}Zt.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Zt.fromMiliseconds=r,Zt}var As;function sh(){return As||(As=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=an;e.__exportStar(th(),t),e.__exportStar(ih(),t)}(vs)),vs}var pr={},Ns;function oh(){if(Ns)return pr;Ns=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return pr.Watch=t,pr.default=t,pr}var Rs={},xr={},xs;function ah(){if(xs)return xr;xs=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.IWatch=void 0;class t{}return xr.IWatch=t,xr}var Ts;function ch(){return Ts||(Ts=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),an.__exportStar(ah(),t)}(Rs)),Rs}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=an;e.__exportStar(sh(),t),e.__exportStar(oh(),t),e.__exportStar(ch(),t),e.__exportStar(Ps(),t)})(Z);var Ls={},Tr={};class Qt{}var uh=Object.freeze({__proto__:null,IEvents:Qt}),hh=re(uh),Cs;function lh(){if(Cs)return Tr;Cs=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.IHeartBeat=void 0;const t=hh;class e extends t.IEvents{constructor(n){super()}}return Tr.IHeartBeat=e,Tr}var js;function Us(){return js||(js=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),on.__exportStar(lh(),t)}(Ls)),Ls}var Ms={},er={},Ds;function fh(){if(Ds)return er;Ds=1,Object.defineProperty(er,"__esModule",{value:!0}),er.HEARTBEAT_EVENTS=er.HEARTBEAT_INTERVAL=void 0;const t=Z;return er.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,er.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},er}var ks;function zs(){return ks||(ks=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),on.__exportStar(fh(),t)}(Ms)),Ms}var Hs;function ph(){if(Hs)return Ar;Hs=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.HeartBeat=void 0;const t=on,e=at.exports,r=Z,n=Us(),i=zs();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=a?.interval||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const l=new s(a);return yield l.init(),l})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,l){this.events.on(a,l)}once(a,l){this.events.once(a,l)}off(a,l){this.events.off(a,l)}removeListener(a,l){this.events.removeListener(a,l)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Ar.HeartBeat=s,Ar}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=on;e.__exportStar(ph(),t),e.__exportStar(Us(),t),e.__exportStar(zs(),t)})(Pr);var Pe={};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var Wn=function(t,e){return Wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Wn(t,e)};function dh(t,e){Wn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Yn=function(){return Yn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Yn.apply(this,arguments)};function gh(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function yh(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function bh(t,e){return function(r,n){e(r,n,t)}}function mh(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function vh(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function a(f){try{h(n.next(f))}catch(O){c(O)}}function l(f){try{h(n.throw(f))}catch(O){c(O)}}function h(f){f.done?s(f.value):i(f.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}function wh(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(h){return function(f){return l([h,f])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function _h(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Eh(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Jn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ks(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function Sh(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ks(arguments[e]));return t}function Oh(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,a=s.length;c<a;c++,i++)n[i]=s[c];return n}function Lr(t){return this instanceof Lr?(this.v=t,this):new Lr(t)}function Ih(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(w){n[w]&&(i[w]=function(v){return new Promise(function(_,x){s.push([w,v,_,x])>1||a(w,v)})})}function a(w,v){try{l(n[w](v))}catch(_){O(s[0][3],_)}}function l(w){w.value instanceof Lr?Promise.resolve(w.value.v).then(h,f):O(s[0][2],w)}function h(w){a("next",w)}function f(w){a("throw",w)}function O(w,v){w(v),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Ph(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:Lr(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function Fh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Jn=="function"?Jn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(a,l){c=t[s](c),i(a,l,c.done,c.value)})}}function i(s,c,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},c)}}function Ah(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Nh(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Rh(t){return t&&t.__esModule?t:{default:t}}function xh(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Th(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Lh=Object.freeze({__proto__:null,__extends:dh,get __assign(){return Yn},__rest:gh,__decorate:yh,__param:bh,__metadata:mh,__awaiter:vh,__generator:wh,__createBinding:_h,__exportStar:Eh,__values:Jn,__read:Ks,__spread:Sh,__spreadArrays:Oh,__await:Lr,__asyncGenerator:Ih,__asyncDelegator:Ph,__asyncValues:Fh,__makeTemplateObject:Ah,__importStar:Nh,__importDefault:Rh,__classPrivateFieldGet:xh,__classPrivateFieldSet:Th}),Ch=re(Lh),dr={},$s;function Bs(){return $s||($s=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.PINO_CUSTOM_CONTEXT_KEY=dr.PINO_LOGGER_DEFAULTS=void 0,dr.PINO_LOGGER_DEFAULTS={level:"info"},dr.PINO_CUSTOM_CONTEXT_KEY="custom_context"),dr}var ht={},Vs;function jh(){if(Vs)return ht;Vs=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.generateChildLogger=ht.formatChildLoggerContext=ht.getLoggerContext=ht.setBrowserLoggerContext=ht.getBrowserLoggerContext=ht.getDefaultLoggerOptions=void 0;const t=Bs();function e(a){return Object.assign(Object.assign({},a),{level:a?.level||t.PINO_LOGGER_DEFAULTS.level})}ht.getDefaultLoggerOptions=e;function r(a,l=t.PINO_CUSTOM_CONTEXT_KEY){return a[l]||""}ht.getBrowserLoggerContext=r;function n(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){return a[h]=l,a}ht.setBrowserLoggerContext=n;function i(a,l=t.PINO_CUSTOM_CONTEXT_KEY){let h="";return typeof a.bindings>"u"?h=r(a,l):h=a.bindings().context||"",h}ht.getLoggerContext=i;function s(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){const f=i(a,h);return f.trim()?`${f}/${l}`:l}ht.formatChildLoggerContext=s;function c(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){const f=s(a,l,h),O=a.child({context:f});return n(O,f,h)}return ht.generateChildLogger=c,ht}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=Ch,r=e.__importDefault(rt);Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(Bs(),t),e.__exportStar(jh(),t)})(Pe);class Uh extends Qt{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class Mh extends Qt{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class Dh{constructor(e,r){this.logger=e,this.core=r}}class kh extends Qt{constructor(e,r){super(),this.relayer=e,this.logger=r}}class zh extends Qt{constructor(e){super()}}class Hh{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}}class Kh extends Qt{constructor(e,r){super(),this.relayer=e,this.logger=r}}class $h extends Qt{constructor(e,r){super(),this.core=e,this.logger=r}}class Bh{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class Vh{constructor(e){this.client=e}}function Xn(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function Cr(t){return typeof t=="string"?t:JSON.stringify(t)}var Zn={},gr={},cn={},un={};Object.defineProperty(un,"__esModule",{value:!0}),un.BrowserRandomSource=void 0;const qs=65536;class qh{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=qs)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,qs)));return r}}un.BrowserRandomSource=qh;function Gh(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hn={},mt={};Object.defineProperty(mt,"__esModule",{value:!0});function Wh(t){for(var e=0;e<t.length;e++)t[e]=0;return t}mt.wipe=Wh;var Yh={},Jh=Object.freeze({__proto__:null,default:Yh}),Xh=re(Jh);Object.defineProperty(hn,"__esModule",{value:!0}),hn.NodeRandomSource=void 0;const Zh=mt;class Qh{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Gh<"u"){const e=Xh;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,Zh.wipe)(r),n}}hn.NodeRandomSource=Qh,Object.defineProperty(cn,"__esModule",{value:!0}),cn.SystemRandomSource=void 0;const el=un,tl=hn;class rl{constructor(){if(this.isAvailable=!1,this.name="",this._source=new el.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new tl.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}cn.SystemRandomSource=rl;var ne={},Gs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,l){var h=a>>>16&65535,f=a&65535,O=l>>>16&65535,w=l&65535;return f*w+(h*w+f*O<<16>>>0)|0}t.mul=Math.imul||e;function r(a,l){return a+l|0}t.add=r;function n(a,l){return a-l|0}t.sub=n;function i(a,l){return a<<l|a>>>32-l}t.rotl=i;function s(a,l){return a<<32-l|a>>>l}t.rotr=s;function c(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||c,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(Gs),Object.defineProperty(ne,"__esModule",{value:!0});var Ws=Gs;function nl(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}ne.readInt16BE=nl;function il(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}ne.readUint16BE=il;function sl(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}ne.readInt16LE=sl;function ol(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}ne.readUint16LE=ol;function Ys(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}ne.writeUint16BE=Ys,ne.writeInt16BE=Ys;function Js(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}ne.writeUint16LE=Js,ne.writeInt16LE=Js;function Qn(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}ne.readInt32BE=Qn;function ei(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}ne.readUint32BE=ei;function ti(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}ne.readInt32LE=ti;function ri(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}ne.readUint32LE=ri;function ln(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}ne.writeUint32BE=ln,ne.writeInt32BE=ln;function fn(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}ne.writeUint32LE=fn,ne.writeInt32LE=fn;function al(t,e){e===void 0&&(e=0);var r=Qn(t,e),n=Qn(t,e+4);return r*4294967296+n-(n>>31)*4294967296}ne.readInt64BE=al;function cl(t,e){e===void 0&&(e=0);var r=ei(t,e),n=ei(t,e+4);return r*4294967296+n}ne.readUint64BE=cl;function ul(t,e){e===void 0&&(e=0);var r=ti(t,e),n=ti(t,e+4);return n*4294967296+r-(r>>31)*4294967296}ne.readInt64LE=ul;function hl(t,e){e===void 0&&(e=0);var r=ri(t,e),n=ri(t,e+4);return n*4294967296+r}ne.readUint64LE=hl;function Xs(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),ln(t/4294967296>>>0,e,r),ln(t>>>0,e,r+4),e}ne.writeUint64BE=Xs,ne.writeInt64BE=Xs;function Zs(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),fn(t>>>0,e,r),fn(t/4294967296>>>0,e,r+4),e}ne.writeUint64LE=Zs,ne.writeInt64LE=Zs;function ll(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}ne.readUintBE=ll;function fl(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}ne.readUintLE=fl;function pl(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Ws.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}ne.writeUintBE=pl;function dl(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Ws.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}ne.writeUintLE=dl;function gl(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}ne.readFloat32BE=gl;function yl(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}ne.readFloat32LE=yl;function bl(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}ne.readFloat64BE=bl;function ml(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}ne.readFloat64LE=ml;function vl(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}ne.writeFloat32BE=vl;function wl(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}ne.writeFloat32LE=wl;function _l(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}ne.writeFloat64BE=_l;function El(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}ne.writeFloat64LE=El,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=cn,r=ne,n=mt;t.defaultRandomSource=new e.SystemRandomSource;function i(h,f=t.defaultRandomSource){return f.randomBytes(h)}t.randomBytes=i;function s(h=t.defaultRandomSource){const f=i(4,h),O=(0,r.readUint32LE)(f);return(0,n.wipe)(f),O}t.randomUint32=s;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(h,f=c,O=t.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let w="";const v=f.length,_=256-256%v;for(;h>0;){const x=i(Math.ceil(h*256/_),O);for(let j=0;j<x.length&&h>0;j++){const K=x[j];K<_&&(w+=f.charAt(K%v),h--)}(0,n.wipe)(x)}return w}t.randomString=a;function l(h,f=c,O=t.defaultRandomSource){const w=Math.ceil(h/(Math.log(f.length)/Math.LN2));return a(w,f,O)}t.randomStringForEntropy=l}(gr);var Qs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ne,r=mt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&h>0;)this._buffer[this._bufferLength++]=l[f++],h--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(f=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,l,f,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[f++],h--;return this},a.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,f=this._bufferLength,O=h/536870912|0,w=h<<3,v=h%128<112?128:256;this._buffer[f]=128;for(var _=f+1;_<v-8;_++)this._buffer[_]=0;e.writeUint32BE(O,this._buffer,v-8),e.writeUint32BE(w,this._buffer,v-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,v),this._finished=!0}for(var _=0;_<this.digestLength/8;_++)e.writeUint32BE(this._stateHi[_],l,_*8),e.writeUint32BE(this._stateLo[_],l,_*8+4);return this},a.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(l){return this._stateHi.set(l.stateHi),this._stateLo.set(l.stateLo),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(l){r.wipe(l.stateHi),r.wipe(l.stateLo),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,l,h,f,O,w,v){for(var _=h[0],x=h[1],j=h[2],K=h[3],I=h[4],A=h[5],y=h[6],S=h[7],E=f[0],o=f[1],p=f[2],D=f[3],H=f[4],q=f[5],J=f[6],X=f[7],d,m,U,M,L,T,k,z;v>=128;){for(var Q=0;Q<16;Q++){var $=8*Q+w;a[Q]=e.readUint32BE(O,$),l[Q]=e.readUint32BE(O,$+4)}for(var Q=0;Q<80;Q++){var ee=_,Y=x,ce=j,R=K,N=I,P=A,u=y,b=S,B=E,G=o,pe=p,ve=D,ge=H,Ee=q,ke=J,Le=X;if(d=S,m=X,L=m&65535,T=m>>>16,k=d&65535,z=d>>>16,d=(I>>>14|H<<32-14)^(I>>>18|H<<32-18)^(H>>>41-32|I<<32-(41-32)),m=(H>>>14|I<<32-14)^(H>>>18|I<<32-18)^(I>>>41-32|H<<32-(41-32)),L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,d=I&A^~I&y,m=H&q^~H&J,L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,d=i[Q*2],m=i[Q*2+1],L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,d=a[Q%16],m=l[Q%16],L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,T+=L>>>16,k+=T>>>16,z+=k>>>16,U=k&65535|z<<16,M=L&65535|T<<16,d=U,m=M,L=m&65535,T=m>>>16,k=d&65535,z=d>>>16,d=(_>>>28|E<<32-28)^(E>>>34-32|_<<32-(34-32))^(E>>>39-32|_<<32-(39-32)),m=(E>>>28|_<<32-28)^(_>>>34-32|E<<32-(34-32))^(_>>>39-32|E<<32-(39-32)),L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,d=_&x^_&j^x&j,m=E&o^E&p^o&p,L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,T+=L>>>16,k+=T>>>16,z+=k>>>16,b=k&65535|z<<16,Le=L&65535|T<<16,d=R,m=ve,L=m&65535,T=m>>>16,k=d&65535,z=d>>>16,d=U,m=M,L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,T+=L>>>16,k+=T>>>16,z+=k>>>16,R=k&65535|z<<16,ve=L&65535|T<<16,x=ee,j=Y,K=ce,I=R,A=N,y=P,S=u,_=b,o=B,p=G,D=pe,H=ve,q=ge,J=Ee,X=ke,E=Le,Q%16===15)for(var $=0;$<16;$++)d=a[$],m=l[$],L=m&65535,T=m>>>16,k=d&65535,z=d>>>16,d=a[($+9)%16],m=l[($+9)%16],L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,U=a[($+1)%16],M=l[($+1)%16],d=(U>>>1|M<<32-1)^(U>>>8|M<<32-8)^U>>>7,m=(M>>>1|U<<32-1)^(M>>>8|U<<32-8)^(M>>>7|U<<32-7),L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,U=a[($+14)%16],M=l[($+14)%16],d=(U>>>19|M<<32-19)^(M>>>61-32|U<<32-(61-32))^U>>>6,m=(M>>>19|U<<32-19)^(U>>>61-32|M<<32-(61-32))^(M>>>6|U<<32-6),L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,T+=L>>>16,k+=T>>>16,z+=k>>>16,a[$]=k&65535|z<<16,l[$]=L&65535|T<<16}d=_,m=E,L=m&65535,T=m>>>16,k=d&65535,z=d>>>16,d=h[0],m=f[0],L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,T+=L>>>16,k+=T>>>16,z+=k>>>16,h[0]=_=k&65535|z<<16,f[0]=E=L&65535|T<<16,d=x,m=o,L=m&65535,T=m>>>16,k=d&65535,z=d>>>16,d=h[1],m=f[1],L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,T+=L>>>16,k+=T>>>16,z+=k>>>16,h[1]=x=k&65535|z<<16,f[1]=o=L&65535|T<<16,d=j,m=p,L=m&65535,T=m>>>16,k=d&65535,z=d>>>16,d=h[2],m=f[2],L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,T+=L>>>16,k+=T>>>16,z+=k>>>16,h[2]=j=k&65535|z<<16,f[2]=p=L&65535|T<<16,d=K,m=D,L=m&65535,T=m>>>16,k=d&65535,z=d>>>16,d=h[3],m=f[3],L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,T+=L>>>16,k+=T>>>16,z+=k>>>16,h[3]=K=k&65535|z<<16,f[3]=D=L&65535|T<<16,d=I,m=H,L=m&65535,T=m>>>16,k=d&65535,z=d>>>16,d=h[4],m=f[4],L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,T+=L>>>16,k+=T>>>16,z+=k>>>16,h[4]=I=k&65535|z<<16,f[4]=H=L&65535|T<<16,d=A,m=q,L=m&65535,T=m>>>16,k=d&65535,z=d>>>16,d=h[5],m=f[5],L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,T+=L>>>16,k+=T>>>16,z+=k>>>16,h[5]=A=k&65535|z<<16,f[5]=q=L&65535|T<<16,d=y,m=J,L=m&65535,T=m>>>16,k=d&65535,z=d>>>16,d=h[6],m=f[6],L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,T+=L>>>16,k+=T>>>16,z+=k>>>16,h[6]=y=k&65535|z<<16,f[6]=J=L&65535|T<<16,d=S,m=X,L=m&65535,T=m>>>16,k=d&65535,z=d>>>16,d=h[7],m=f[7],L+=m&65535,T+=m>>>16,k+=d&65535,z+=d>>>16,T+=L>>>16,k+=T>>>16,z+=k>>>16,h[7]=S=k&65535|z<<16,f[7]=X=L&65535|T<<16,w+=128,v-=128}return w}function c(a){var l=new n;l.update(a);var h=l.digest();return l.clean(),h}t.hash=c})(Qs),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=gr,r=Qs,n=mt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(R){const N=new Float64Array(16);if(R)for(let P=0;P<R.length;P++)N[P]=R[P];return N}const s=new Uint8Array(32);s[0]=9;const c=i(),a=i([1]),l=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),O=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),w=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function v(R,N){for(let P=0;P<16;P++)R[P]=N[P]|0}function _(R){let N=1;for(let P=0;P<16;P++){let u=R[P]+N+65535;N=Math.floor(u/65536),R[P]=u-N*65536}R[0]+=N-1+37*(N-1)}function x(R,N,P){const u=~(P-1);for(let b=0;b<16;b++){const B=u&(R[b]^N[b]);R[b]^=B,N[b]^=B}}function j(R,N){const P=i(),u=i();for(let b=0;b<16;b++)u[b]=N[b];_(u),_(u),_(u);for(let b=0;b<2;b++){P[0]=u[0]-65517;for(let G=1;G<15;G++)P[G]=u[G]-65535-(P[G-1]>>16&1),P[G-1]&=65535;P[15]=u[15]-32767-(P[14]>>16&1);const B=P[15]>>16&1;P[14]&=65535,x(u,P,1-B)}for(let b=0;b<16;b++)R[2*b]=u[b]&255,R[2*b+1]=u[b]>>8}function K(R,N){let P=0;for(let u=0;u<32;u++)P|=R[u]^N[u];return(1&P-1>>>8)-1}function I(R,N){const P=new Uint8Array(32),u=new Uint8Array(32);return j(P,R),j(u,N),K(P,u)}function A(R){const N=new Uint8Array(32);return j(N,R),N[0]&1}function y(R,N){for(let P=0;P<16;P++)R[P]=N[2*P]+(N[2*P+1]<<8);R[15]&=32767}function S(R,N,P){for(let u=0;u<16;u++)R[u]=N[u]+P[u]}function E(R,N,P){for(let u=0;u<16;u++)R[u]=N[u]-P[u]}function o(R,N,P){let u,b,B=0,G=0,pe=0,ve=0,ge=0,Ee=0,ke=0,Le=0,me=0,ye=0,de=0,he=0,ue=0,ae=0,se=0,te=0,le=0,be=0,ie=0,we=0,_e=0,Oe=0,Ie=0,Se=0,Ft=0,Ct=0,qt=0,vt=0,ir=0,Jr=0,Rn=0,He=P[0],Ce=P[1],Ke=P[2],$e=P[3],Be=P[4],je=P[5],We=P[6],Ye=P[7],Je=P[8],Xe=P[9],Ze=P[10],qe=P[11],Ve=P[12],xe=P[13],Qe=P[14],et=P[15];u=N[0],B+=u*He,G+=u*Ce,pe+=u*Ke,ve+=u*$e,ge+=u*Be,Ee+=u*je,ke+=u*We,Le+=u*Ye,me+=u*Je,ye+=u*Xe,de+=u*Ze,he+=u*qe,ue+=u*Ve,ae+=u*xe,se+=u*Qe,te+=u*et,u=N[1],G+=u*He,pe+=u*Ce,ve+=u*Ke,ge+=u*$e,Ee+=u*Be,ke+=u*je,Le+=u*We,me+=u*Ye,ye+=u*Je,de+=u*Xe,he+=u*Ze,ue+=u*qe,ae+=u*Ve,se+=u*xe,te+=u*Qe,le+=u*et,u=N[2],pe+=u*He,ve+=u*Ce,ge+=u*Ke,Ee+=u*$e,ke+=u*Be,Le+=u*je,me+=u*We,ye+=u*Ye,de+=u*Je,he+=u*Xe,ue+=u*Ze,ae+=u*qe,se+=u*Ve,te+=u*xe,le+=u*Qe,be+=u*et,u=N[3],ve+=u*He,ge+=u*Ce,Ee+=u*Ke,ke+=u*$e,Le+=u*Be,me+=u*je,ye+=u*We,de+=u*Ye,he+=u*Je,ue+=u*Xe,ae+=u*Ze,se+=u*qe,te+=u*Ve,le+=u*xe,be+=u*Qe,ie+=u*et,u=N[4],ge+=u*He,Ee+=u*Ce,ke+=u*Ke,Le+=u*$e,me+=u*Be,ye+=u*je,de+=u*We,he+=u*Ye,ue+=u*Je,ae+=u*Xe,se+=u*Ze,te+=u*qe,le+=u*Ve,be+=u*xe,ie+=u*Qe,we+=u*et,u=N[5],Ee+=u*He,ke+=u*Ce,Le+=u*Ke,me+=u*$e,ye+=u*Be,de+=u*je,he+=u*We,ue+=u*Ye,ae+=u*Je,se+=u*Xe,te+=u*Ze,le+=u*qe,be+=u*Ve,ie+=u*xe,we+=u*Qe,_e+=u*et,u=N[6],ke+=u*He,Le+=u*Ce,me+=u*Ke,ye+=u*$e,de+=u*Be,he+=u*je,ue+=u*We,ae+=u*Ye,se+=u*Je,te+=u*Xe,le+=u*Ze,be+=u*qe,ie+=u*Ve,we+=u*xe,_e+=u*Qe,Oe+=u*et,u=N[7],Le+=u*He,me+=u*Ce,ye+=u*Ke,de+=u*$e,he+=u*Be,ue+=u*je,ae+=u*We,se+=u*Ye,te+=u*Je,le+=u*Xe,be+=u*Ze,ie+=u*qe,we+=u*Ve,_e+=u*xe,Oe+=u*Qe,Ie+=u*et,u=N[8],me+=u*He,ye+=u*Ce,de+=u*Ke,he+=u*$e,ue+=u*Be,ae+=u*je,se+=u*We,te+=u*Ye,le+=u*Je,be+=u*Xe,ie+=u*Ze,we+=u*qe,_e+=u*Ve,Oe+=u*xe,Ie+=u*Qe,Se+=u*et,u=N[9],ye+=u*He,de+=u*Ce,he+=u*Ke,ue+=u*$e,ae+=u*Be,se+=u*je,te+=u*We,le+=u*Ye,be+=u*Je,ie+=u*Xe,we+=u*Ze,_e+=u*qe,Oe+=u*Ve,Ie+=u*xe,Se+=u*Qe,Ft+=u*et,u=N[10],de+=u*He,he+=u*Ce,ue+=u*Ke,ae+=u*$e,se+=u*Be,te+=u*je,le+=u*We,be+=u*Ye,ie+=u*Je,we+=u*Xe,_e+=u*Ze,Oe+=u*qe,Ie+=u*Ve,Se+=u*xe,Ft+=u*Qe,Ct+=u*et,u=N[11],he+=u*He,ue+=u*Ce,ae+=u*Ke,se+=u*$e,te+=u*Be,le+=u*je,be+=u*We,ie+=u*Ye,we+=u*Je,_e+=u*Xe,Oe+=u*Ze,Ie+=u*qe,Se+=u*Ve,Ft+=u*xe,Ct+=u*Qe,qt+=u*et,u=N[12],ue+=u*He,ae+=u*Ce,se+=u*Ke,te+=u*$e,le+=u*Be,be+=u*je,ie+=u*We,we+=u*Ye,_e+=u*Je,Oe+=u*Xe,Ie+=u*Ze,Se+=u*qe,Ft+=u*Ve,Ct+=u*xe,qt+=u*Qe,vt+=u*et,u=N[13],ae+=u*He,se+=u*Ce,te+=u*Ke,le+=u*$e,be+=u*Be,ie+=u*je,we+=u*We,_e+=u*Ye,Oe+=u*Je,Ie+=u*Xe,Se+=u*Ze,Ft+=u*qe,Ct+=u*Ve,qt+=u*xe,vt+=u*Qe,ir+=u*et,u=N[14],se+=u*He,te+=u*Ce,le+=u*Ke,be+=u*$e,ie+=u*Be,we+=u*je,_e+=u*We,Oe+=u*Ye,Ie+=u*Je,Se+=u*Xe,Ft+=u*Ze,Ct+=u*qe,qt+=u*Ve,vt+=u*xe,ir+=u*Qe,Jr+=u*et,u=N[15],te+=u*He,le+=u*Ce,be+=u*Ke,ie+=u*$e,we+=u*Be,_e+=u*je,Oe+=u*We,Ie+=u*Ye,Se+=u*Je,Ft+=u*Xe,Ct+=u*Ze,qt+=u*qe,vt+=u*Ve,ir+=u*xe,Jr+=u*Qe,Rn+=u*et,B+=38*le,G+=38*be,pe+=38*ie,ve+=38*we,ge+=38*_e,Ee+=38*Oe,ke+=38*Ie,Le+=38*Se,me+=38*Ft,ye+=38*Ct,de+=38*qt,he+=38*vt,ue+=38*ir,ae+=38*Jr,se+=38*Rn,b=1,u=B+b+65535,b=Math.floor(u/65536),B=u-b*65536,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=pe+b+65535,b=Math.floor(u/65536),pe=u-b*65536,u=ve+b+65535,b=Math.floor(u/65536),ve=u-b*65536,u=ge+b+65535,b=Math.floor(u/65536),ge=u-b*65536,u=Ee+b+65535,b=Math.floor(u/65536),Ee=u-b*65536,u=ke+b+65535,b=Math.floor(u/65536),ke=u-b*65536,u=Le+b+65535,b=Math.floor(u/65536),Le=u-b*65536,u=me+b+65535,b=Math.floor(u/65536),me=u-b*65536,u=ye+b+65535,b=Math.floor(u/65536),ye=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=he+b+65535,b=Math.floor(u/65536),he=u-b*65536,u=ue+b+65535,b=Math.floor(u/65536),ue=u-b*65536,u=ae+b+65535,b=Math.floor(u/65536),ae=u-b*65536,u=se+b+65535,b=Math.floor(u/65536),se=u-b*65536,u=te+b+65535,b=Math.floor(u/65536),te=u-b*65536,B+=b-1+37*(b-1),b=1,u=B+b+65535,b=Math.floor(u/65536),B=u-b*65536,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=pe+b+65535,b=Math.floor(u/65536),pe=u-b*65536,u=ve+b+65535,b=Math.floor(u/65536),ve=u-b*65536,u=ge+b+65535,b=Math.floor(u/65536),ge=u-b*65536,u=Ee+b+65535,b=Math.floor(u/65536),Ee=u-b*65536,u=ke+b+65535,b=Math.floor(u/65536),ke=u-b*65536,u=Le+b+65535,b=Math.floor(u/65536),Le=u-b*65536,u=me+b+65535,b=Math.floor(u/65536),me=u-b*65536,u=ye+b+65535,b=Math.floor(u/65536),ye=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=he+b+65535,b=Math.floor(u/65536),he=u-b*65536,u=ue+b+65535,b=Math.floor(u/65536),ue=u-b*65536,u=ae+b+65535,b=Math.floor(u/65536),ae=u-b*65536,u=se+b+65535,b=Math.floor(u/65536),se=u-b*65536,u=te+b+65535,b=Math.floor(u/65536),te=u-b*65536,B+=b-1+37*(b-1),R[0]=B,R[1]=G,R[2]=pe,R[3]=ve,R[4]=ge,R[5]=Ee,R[6]=ke,R[7]=Le,R[8]=me,R[9]=ye,R[10]=de,R[11]=he,R[12]=ue,R[13]=ae,R[14]=se,R[15]=te}function p(R,N){o(R,N,N)}function D(R,N){const P=i();let u;for(u=0;u<16;u++)P[u]=N[u];for(u=253;u>=0;u--)p(P,P),u!==2&&u!==4&&o(P,P,N);for(u=0;u<16;u++)R[u]=P[u]}function H(R,N){const P=i();let u;for(u=0;u<16;u++)P[u]=N[u];for(u=250;u>=0;u--)p(P,P),u!==1&&o(P,P,N);for(u=0;u<16;u++)R[u]=P[u]}function q(R,N){const P=i(),u=i(),b=i(),B=i(),G=i(),pe=i(),ve=i(),ge=i(),Ee=i();E(P,R[1],R[0]),E(Ee,N[1],N[0]),o(P,P,Ee),S(u,R[0],R[1]),S(Ee,N[0],N[1]),o(u,u,Ee),o(b,R[3],N[3]),o(b,b,h),o(B,R[2],N[2]),S(B,B,B),E(G,u,P),E(pe,B,b),S(ve,B,b),S(ge,u,P),o(R[0],G,pe),o(R[1],ge,ve),o(R[2],ve,pe),o(R[3],G,ge)}function J(R,N,P){for(let u=0;u<4;u++)x(R[u],N[u],P)}function X(R,N){const P=i(),u=i(),b=i();D(b,N[2]),o(P,N[0],b),o(u,N[1],b),j(R,u),R[31]^=A(P)<<7}function d(R,N,P){v(R[0],c),v(R[1],a),v(R[2],a),v(R[3],c);for(let u=255;u>=0;--u){const b=P[u/8|0]>>(u&7)&1;J(R,N,b),q(N,R),q(R,R),J(R,N,b)}}function m(R,N){const P=[i(),i(),i(),i()];v(P[0],f),v(P[1],O),v(P[2],a),o(P[3],f,O),d(R,P,N)}function U(R){if(R.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const N=(0,r.hash)(R);N[0]&=248,N[31]&=127,N[31]|=64;const P=new Uint8Array(32),u=[i(),i(),i(),i()];m(u,N),X(P,u);const b=new Uint8Array(64);return b.set(R),b.set(P,32),{publicKey:P,secretKey:b}}t.generateKeyPairFromSeed=U;function M(R){const N=(0,e.randomBytes)(32,R),P=U(N);return(0,n.wipe)(N),P}t.generateKeyPair=M;function L(R){if(R.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(R.subarray(32))}t.extractPublicKeyFromSecretKey=L;const T=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function k(R,N){let P,u,b,B;for(u=63;u>=32;--u){for(P=0,b=u-32,B=u-12;b<B;++b)N[b]+=P-16*N[u]*T[b-(u-32)],P=Math.floor((N[b]+128)/256),N[b]-=P*256;N[b]+=P,N[u]=0}for(P=0,b=0;b<32;b++)N[b]+=P-(N[31]>>4)*T[b],P=N[b]>>8,N[b]&=255;for(b=0;b<32;b++)N[b]-=P*T[b];for(u=0;u<32;u++)N[u+1]+=N[u]>>8,R[u]=N[u]&255}function z(R){const N=new Float64Array(64);for(let P=0;P<64;P++)N[P]=R[P];for(let P=0;P<64;P++)R[P]=0;k(R,N)}function Q(R,N){const P=new Float64Array(64),u=[i(),i(),i(),i()],b=(0,r.hash)(R.subarray(0,32));b[0]&=248,b[31]&=127,b[31]|=64;const B=new Uint8Array(64);B.set(b.subarray(32),32);const G=new r.SHA512;G.update(B.subarray(32)),G.update(N);const pe=G.digest();G.clean(),z(pe),m(u,pe),X(B,u),G.reset(),G.update(B.subarray(0,32)),G.update(R.subarray(32)),G.update(N);const ve=G.digest();z(ve);for(let ge=0;ge<32;ge++)P[ge]=pe[ge];for(let ge=0;ge<32;ge++)for(let Ee=0;Ee<32;Ee++)P[ge+Ee]+=ve[ge]*b[Ee];return k(B.subarray(32),P),B}t.sign=Q;function $(R,N){const P=i(),u=i(),b=i(),B=i(),G=i(),pe=i(),ve=i();return v(R[2],a),y(R[1],N),p(b,R[1]),o(B,b,l),E(b,b,R[2]),S(B,R[2],B),p(G,B),p(pe,G),o(ve,pe,G),o(P,ve,b),o(P,P,B),H(P,P),o(P,P,b),o(P,P,B),o(P,P,B),o(R[0],P,B),p(u,R[0]),o(u,u,B),I(u,b)&&o(R[0],R[0],w),p(u,R[0]),o(u,u,B),I(u,b)?-1:(A(R[0])===N[31]>>7&&E(R[0],c,R[0]),o(R[3],R[0],R[1]),0)}function ee(R,N,P){const u=new Uint8Array(32),b=[i(),i(),i(),i()],B=[i(),i(),i(),i()];if(P.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if($(B,R))return!1;const G=new r.SHA512;G.update(P.subarray(0,32)),G.update(R),G.update(N);const pe=G.digest();return z(pe),d(b,B,pe),m(B,P.subarray(32)),q(b,B),X(u,b),!K(P,u)}t.verify=ee;function Y(R){let N=[i(),i(),i(),i()];if($(N,R))throw new Error("Ed25519: invalid public key");let P=i(),u=i(),b=N[1];S(P,a,b),E(u,a,b),D(u,u),o(P,P,u);let B=new Uint8Array(32);return j(B,P),B}t.convertPublicKeyToX25519=Y;function ce(R){const N=(0,r.hash)(R.subarray(0,32));N[0]&=248,N[31]&=127,N[31]|=64;const P=new Uint8Array(N.subarray(0,32));return(0,n.wipe)(N),P}t.convertSecretKeyToX25519=ce}(Zn);const Sl="EdDSA",Ol="JWT",eo=".",to="base64url",Il="utf8",Pl="utf8",Fl=":",Al="did",Nl="key",ro="base58btc",Rl="z",xl="K36",Tl=32;function no(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function ni(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=no(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function Ll(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),c=s.charCodeAt(0);if(r[c]!==255)throw new TypeError(s+" is ambiguous");r[c]=i}var a=t.length,l=t.charAt(0),h=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function O(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var x=0,j=0,K=0,I=_.length;K!==I&&_[K]===0;)K++,x++;for(var A=(I-K)*f+1>>>0,y=new Uint8Array(A);K!==I;){for(var S=_[K],E=0,o=A-1;(S!==0||E<j)&&o!==-1;o--,E++)S+=256*y[o]>>>0,y[o]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");j=E,K++}for(var p=A-j;p!==A&&y[p]===0;)p++;for(var D=l.repeat(x);p<A;++p)D+=t.charAt(y[p]);return D}function w(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var x=0;if(_[x]!==" "){for(var j=0,K=0;_[x]===l;)j++,x++;for(var I=(_.length-x)*h+1>>>0,A=new Uint8Array(I);_[x];){var y=r[_.charCodeAt(x)];if(y===255)return;for(var S=0,E=I-1;(y!==0||S<K)&&E!==-1;E--,S++)y+=a*A[E]>>>0,A[E]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");K=S,x++}if(_[x]!==" "){for(var o=I-K;o!==I&&A[o]===0;)o++;for(var p=new Uint8Array(j+(I-o)),D=j;o!==I;)p[D++]=A[o++];return p}}}function v(_){var x=w(_);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:O,decodeUnsafe:w,decode:v}}var Cl=Ll,jl=Cl;const io=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Ul=t=>new TextEncoder().encode(t),Ml=t=>new TextDecoder().decode(t);class Dl{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class kl{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return so(this,e)}}class zl{constructor(e){this.decoders=e}or(e){return so(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const so=(t,e)=>new zl({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Hl{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Dl(e,r,n),this.decoder=new kl(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const pn=({name:t,prefix:e,encode:r,decode:n})=>new Hl(t,e,r,n),jr=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=jl(r,e);return pn({prefix:t,name:e,encode:n,decode:s=>io(i(s))})},Kl=(t,e,r,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;const c=new Uint8Array(s*r/8|0);let a=0,l=0,h=0;for(let f=0;f<s;++f){const O=i[t[f]];if(O===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|O,a+=r,a>=8&&(a-=8,c[h++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return c},$l=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",c=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],c+=8;c>r;)c-=r,s+=e[i&a>>c];if(c&&(s+=e[i&a<<r-c]),n)for(;s.length*r&7;)s+="=";return s},nt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>pn({prefix:e,name:t,encode(i){return $l(i,n,r)},decode(i){return Kl(i,n,r,t)}}),Bl=pn({prefix:"\0",name:"identity",encode:t=>Ml(t),decode:t=>Ul(t)});var Vl=Object.freeze({__proto__:null,identity:Bl});const ql=nt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Gl=Object.freeze({__proto__:null,base2:ql});const Wl=nt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Yl=Object.freeze({__proto__:null,base8:Wl});const Jl=jr({prefix:"9",name:"base10",alphabet:"0123456789"});var Xl=Object.freeze({__proto__:null,base10:Jl});const Zl=nt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ql=nt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ef=Object.freeze({__proto__:null,base16:Zl,base16upper:Ql});const tf=nt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),rf=nt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),nf=nt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sf=nt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),of=nt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),af=nt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cf=nt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uf=nt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hf=nt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var lf=Object.freeze({__proto__:null,base32:tf,base32upper:rf,base32pad:nf,base32padupper:sf,base32hex:of,base32hexupper:af,base32hexpad:cf,base32hexpadupper:uf,base32z:hf});const ff=jr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pf=jr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var df=Object.freeze({__proto__:null,base36:ff,base36upper:pf});const gf=jr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yf=jr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var bf=Object.freeze({__proto__:null,base58btc:gf,base58flickr:yf});const mf=nt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vf=nt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wf=nt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_f=nt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ef=Object.freeze({__proto__:null,base64:mf,base64pad:vf,base64url:wf,base64urlpad:_f});const oo=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Sf=oo.reduce((t,e,r)=>(t[r]=e,t),[]),Of=oo.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function If(t){return t.reduce((e,r)=>(e+=Sf[r],e),"")}function Pf(t){const e=[];for(const r of t){const n=Of[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Ff=pn({prefix:"\u{1F680}",name:"base256emoji",encode:If,decode:Pf});var Af=Object.freeze({__proto__:null,base256emoji:Ff}),Nf=co,ao=128,Rf=127,xf=~Rf,Tf=Math.pow(2,31);function co(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Tf;)e[r++]=t&255|ao,t/=128;for(;t&xf;)e[r++]=t&255|ao,t>>>=7;return e[r]=t|0,co.bytes=r-n+1,e}var Lf=ii,Cf=128,uo=127;function ii(t,n){var r=0,n=n||0,i=0,s=n,c,a=t.length;do{if(s>=a)throw ii.bytes=0,new RangeError("Could not decode varint");c=t[s++],r+=i<28?(c&uo)<<i:(c&uo)*Math.pow(2,i),i+=7}while(c>=Cf);return ii.bytes=s-n,r}var jf=Math.pow(2,7),Uf=Math.pow(2,14),Mf=Math.pow(2,21),Df=Math.pow(2,28),kf=Math.pow(2,35),zf=Math.pow(2,42),Hf=Math.pow(2,49),Kf=Math.pow(2,56),$f=Math.pow(2,63),Bf=function(t){return t<jf?1:t<Uf?2:t<Mf?3:t<Df?4:t<kf?5:t<zf?6:t<Hf?7:t<Kf?8:t<$f?9:10},Vf={encode:Nf,decode:Lf,encodingLength:Bf},ho=Vf;const lo=(t,e,r=0)=>(ho.encode(t,e,r),e),fo=t=>ho.encodingLength(t),si=(t,e)=>{const r=e.byteLength,n=fo(t),i=n+fo(r),s=new Uint8Array(i+r);return lo(t,s,0),lo(r,s,n),s.set(e,i),new qf(t,r,e,s)};class qf{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const po=({name:t,code:e,encode:r})=>new Gf(t,e,r);class Gf{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?si(this.code,r):r.then(n=>si(this.code,n))}else throw Error("Unknown type, must be binary type")}}const go=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Wf=po({name:"sha2-256",code:18,encode:go("SHA-256")}),Yf=po({name:"sha2-512",code:19,encode:go("SHA-512")});var Jf=Object.freeze({__proto__:null,sha256:Wf,sha512:Yf});const yo=0,Xf="identity",bo=io;var Zf=Object.freeze({__proto__:null,identity:{code:yo,name:Xf,encode:bo,digest:t=>si(yo,bo(t))}});new TextEncoder,new TextDecoder;const mo={...Vl,...Gl,...Yl,...Xl,...ef,...lf,...df,...bf,...Ef,...Af};({...Jf,...Zf});function vo(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const wo=vo("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),oi=vo("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=no(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),_o={utf8:wo,"utf-8":wo,hex:mo.base16,latin1:oi,ascii:oi,binary:oi,...mo};function dt(t,e="utf8"){const r=_o[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function gt(t,e="utf8"){const r=_o[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function dn(t){return dt(gt(Cr(t),Il),to)}function Eo(t){const e=gt(xl,ro),r=Rl+dt(ni([e,t]),ro);return[Al,Nl,r].join(Fl)}function Qf(t){return dt(t,to)}function ep(t){return gt([dn(t.header),dn(t.payload)].join(eo),Pl)}function tp(t){return[dn(t.header),dn(t.payload),Qf(t.signature)].join(eo)}function So(t=gr.randomBytes(Tl)){return Zn.generateKeyPairFromSeed(t)}async function rp(t,e,r,n,i=Z.fromMiliseconds(Date.now())){const s={alg:Sl,typ:Ol},c=Eo(n.publicKey),a=i+r,l={iss:c,sub:t,aud:e,iat:i,exp:a},h=ep({header:s,payload:l}),f=Zn.sign(n.secretKey,h);return tp({header:s,payload:l,signature:f})}var ai={},gn={};Object.defineProperty(gn,"__esModule",{value:!0});var ct=ne,ci=mt,np=20;function ip(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,c=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],O=r[19]<<24|r[18]<<16|r[17]<<8|r[16],w=r[23]<<24|r[22]<<16|r[21]<<8|r[20],v=r[27]<<24|r[26]<<16|r[25]<<8|r[24],_=r[31]<<24|r[30]<<16|r[29]<<8|r[28],x=e[3]<<24|e[2]<<16|e[1]<<8|e[0],j=e[7]<<24|e[6]<<16|e[5]<<8|e[4],K=e[11]<<24|e[10]<<16|e[9]<<8|e[8],I=e[15]<<24|e[14]<<16|e[13]<<8|e[12],A=n,y=i,S=s,E=c,o=a,p=l,D=h,H=f,q=O,J=w,X=v,d=_,m=x,U=j,M=K,L=I,T=0;T<np;T+=2)A=A+o|0,m^=A,m=m>>>32-16|m<<16,q=q+m|0,o^=q,o=o>>>32-12|o<<12,y=y+p|0,U^=y,U=U>>>32-16|U<<16,J=J+U|0,p^=J,p=p>>>32-12|p<<12,S=S+D|0,M^=S,M=M>>>32-16|M<<16,X=X+M|0,D^=X,D=D>>>32-12|D<<12,E=E+H|0,L^=E,L=L>>>32-16|L<<16,d=d+L|0,H^=d,H=H>>>32-12|H<<12,S=S+D|0,M^=S,M=M>>>32-8|M<<8,X=X+M|0,D^=X,D=D>>>32-7|D<<7,E=E+H|0,L^=E,L=L>>>32-8|L<<8,d=d+L|0,H^=d,H=H>>>32-7|H<<7,y=y+p|0,U^=y,U=U>>>32-8|U<<8,J=J+U|0,p^=J,p=p>>>32-7|p<<7,A=A+o|0,m^=A,m=m>>>32-8|m<<8,q=q+m|0,o^=q,o=o>>>32-7|o<<7,A=A+p|0,L^=A,L=L>>>32-16|L<<16,X=X+L|0,p^=X,p=p>>>32-12|p<<12,y=y+D|0,m^=y,m=m>>>32-16|m<<16,d=d+m|0,D^=d,D=D>>>32-12|D<<12,S=S+H|0,U^=S,U=U>>>32-16|U<<16,q=q+U|0,H^=q,H=H>>>32-12|H<<12,E=E+o|0,M^=E,M=M>>>32-16|M<<16,J=J+M|0,o^=J,o=o>>>32-12|o<<12,S=S+H|0,U^=S,U=U>>>32-8|U<<8,q=q+U|0,H^=q,H=H>>>32-7|H<<7,E=E+o|0,M^=E,M=M>>>32-8|M<<8,J=J+M|0,o^=J,o=o>>>32-7|o<<7,y=y+D|0,m^=y,m=m>>>32-8|m<<8,d=d+m|0,D^=d,D=D>>>32-7|D<<7,A=A+p|0,L^=A,L=L>>>32-8|L<<8,X=X+L|0,p^=X,p=p>>>32-7|p<<7;ct.writeUint32LE(A+n|0,t,0),ct.writeUint32LE(y+i|0,t,4),ct.writeUint32LE(S+s|0,t,8),ct.writeUint32LE(E+c|0,t,12),ct.writeUint32LE(o+a|0,t,16),ct.writeUint32LE(p+l|0,t,20),ct.writeUint32LE(D+h|0,t,24),ct.writeUint32LE(H+f|0,t,28),ct.writeUint32LE(q+O|0,t,32),ct.writeUint32LE(J+w|0,t,36),ct.writeUint32LE(X+v|0,t,40),ct.writeUint32LE(d+_|0,t,44),ct.writeUint32LE(m+x|0,t,48),ct.writeUint32LE(U+j|0,t,52),ct.writeUint32LE(M+K|0,t,56),ct.writeUint32LE(L+I|0,t,60)}function Oo(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,c;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),c=s.length-e.length,s.set(e,c)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,c=i}for(var a=new Uint8Array(64),l=0;l<r.length;l+=64){ip(a,s,t);for(var h=l;h<l+64&&h<r.length;h++)n[h]=r[h]^a[h-l];op(s,0,c)}return ci.wipe(a),i===0&&ci.wipe(s),n}gn.streamXOR=Oo;function sp(t,e,r,n){return n===void 0&&(n=0),ci.wipe(r),Oo(t,e,r,r,n)}gn.stream=sp;function op(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Io={},Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});function ap(t,e,r){return~(t-1)&e|t-1&r}Ht.select=ap;function cp(t,e){return(t|0)-(e|0)-1>>>31&1}Ht.lessOrEqual=cp;function Po(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Ht.compare=Po;function up(t,e){return t.length===0||e.length===0?!1:Po(t,e)!==0}Ht.equal=up,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ht,r=mt;t.DIGEST_LENGTH=16;var n=function(){function c(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var l=a[0]|a[1]<<8;this._r[0]=l&8191;var h=a[2]|a[3]<<8;this._r[1]=(l>>>13|h<<3)&8191;var f=a[4]|a[5]<<8;this._r[2]=(h>>>10|f<<6)&7939;var O=a[6]|a[7]<<8;this._r[3]=(f>>>7|O<<9)&8191;var w=a[8]|a[9]<<8;this._r[4]=(O>>>4|w<<12)&255,this._r[5]=w>>>1&8190;var v=a[10]|a[11]<<8;this._r[6]=(w>>>14|v<<2)&8191;var _=a[12]|a[13]<<8;this._r[7]=(v>>>11|_<<5)&8065;var x=a[14]|a[15]<<8;this._r[8]=(_>>>8|x<<8)&8191,this._r[9]=x>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return c.prototype._blocks=function(a,l,h){for(var f=this._fin?0:2048,O=this._h[0],w=this._h[1],v=this._h[2],_=this._h[3],x=this._h[4],j=this._h[5],K=this._h[6],I=this._h[7],A=this._h[8],y=this._h[9],S=this._r[0],E=this._r[1],o=this._r[2],p=this._r[3],D=this._r[4],H=this._r[5],q=this._r[6],J=this._r[7],X=this._r[8],d=this._r[9];h>=16;){var m=a[l+0]|a[l+1]<<8;O+=m&8191;var U=a[l+2]|a[l+3]<<8;w+=(m>>>13|U<<3)&8191;var M=a[l+4]|a[l+5]<<8;v+=(U>>>10|M<<6)&8191;var L=a[l+6]|a[l+7]<<8;_+=(M>>>7|L<<9)&8191;var T=a[l+8]|a[l+9]<<8;x+=(L>>>4|T<<12)&8191,j+=T>>>1&8191;var k=a[l+10]|a[l+11]<<8;K+=(T>>>14|k<<2)&8191;var z=a[l+12]|a[l+13]<<8;I+=(k>>>11|z<<5)&8191;var Q=a[l+14]|a[l+15]<<8;A+=(z>>>8|Q<<8)&8191,y+=Q>>>5|f;var $=0,ee=$;ee+=O*S,ee+=w*(5*d),ee+=v*(5*X),ee+=_*(5*J),ee+=x*(5*q),$=ee>>>13,ee&=8191,ee+=j*(5*H),ee+=K*(5*D),ee+=I*(5*p),ee+=A*(5*o),ee+=y*(5*E),$+=ee>>>13,ee&=8191;var Y=$;Y+=O*E,Y+=w*S,Y+=v*(5*d),Y+=_*(5*X),Y+=x*(5*J),$=Y>>>13,Y&=8191,Y+=j*(5*q),Y+=K*(5*H),Y+=I*(5*D),Y+=A*(5*p),Y+=y*(5*o),$+=Y>>>13,Y&=8191;var ce=$;ce+=O*o,ce+=w*E,ce+=v*S,ce+=_*(5*d),ce+=x*(5*X),$=ce>>>13,ce&=8191,ce+=j*(5*J),ce+=K*(5*q),ce+=I*(5*H),ce+=A*(5*D),ce+=y*(5*p),$+=ce>>>13,ce&=8191;var R=$;R+=O*p,R+=w*o,R+=v*E,R+=_*S,R+=x*(5*d),$=R>>>13,R&=8191,R+=j*(5*X),R+=K*(5*J),R+=I*(5*q),R+=A*(5*H),R+=y*(5*D),$+=R>>>13,R&=8191;var N=$;N+=O*D,N+=w*p,N+=v*o,N+=_*E,N+=x*S,$=N>>>13,N&=8191,N+=j*(5*d),N+=K*(5*X),N+=I*(5*J),N+=A*(5*q),N+=y*(5*H),$+=N>>>13,N&=8191;var P=$;P+=O*H,P+=w*D,P+=v*p,P+=_*o,P+=x*E,$=P>>>13,P&=8191,P+=j*S,P+=K*(5*d),P+=I*(5*X),P+=A*(5*J),P+=y*(5*q),$+=P>>>13,P&=8191;var u=$;u+=O*q,u+=w*H,u+=v*D,u+=_*p,u+=x*o,$=u>>>13,u&=8191,u+=j*E,u+=K*S,u+=I*(5*d),u+=A*(5*X),u+=y*(5*J),$+=u>>>13,u&=8191;var b=$;b+=O*J,b+=w*q,b+=v*H,b+=_*D,b+=x*p,$=b>>>13,b&=8191,b+=j*o,b+=K*E,b+=I*S,b+=A*(5*d),b+=y*(5*X),$+=b>>>13,b&=8191;var B=$;B+=O*X,B+=w*J,B+=v*q,B+=_*H,B+=x*D,$=B>>>13,B&=8191,B+=j*p,B+=K*o,B+=I*E,B+=A*S,B+=y*(5*d),$+=B>>>13,B&=8191;var G=$;G+=O*d,G+=w*X,G+=v*J,G+=_*q,G+=x*H,$=G>>>13,G&=8191,G+=j*D,G+=K*p,G+=I*o,G+=A*E,G+=y*S,$+=G>>>13,G&=8191,$=($<<2)+$|0,$=$+ee|0,ee=$&8191,$=$>>>13,Y+=$,O=ee,w=Y,v=ce,_=R,x=N,j=P,K=u,I=b,A=B,y=G,l+=16,h-=16}this._h[0]=O,this._h[1]=w,this._h[2]=v,this._h[3]=_,this._h[4]=x,this._h[5]=j,this._h[6]=K,this._h[7]=I,this._h[8]=A,this._h[9]=y},c.prototype.finish=function(a,l){l===void 0&&(l=0);var h=new Uint16Array(10),f,O,w,v;if(this._leftover){for(v=this._leftover,this._buffer[v++]=1;v<16;v++)this._buffer[v]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,v=2;v<10;v++)this._h[v]+=f,f=this._h[v]>>>13,this._h[v]&=8191;for(this._h[0]+=f*5,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,h[0]=this._h[0]+5,f=h[0]>>>13,h[0]&=8191,v=1;v<10;v++)h[v]=this._h[v]+f,f=h[v]>>>13,h[v]&=8191;for(h[9]-=1<<13,O=(f^1)-1,v=0;v<10;v++)h[v]&=O;for(O=~O,v=0;v<10;v++)this._h[v]=this._h[v]&O|h[v];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,w=this._h[0]+this._pad[0],this._h[0]=w&65535,v=1;v<8;v++)w=(this._h[v]+this._pad[v]|0)+(w>>>16)|0,this._h[v]=w&65535;return a[l+0]=this._h[0]>>>0,a[l+1]=this._h[0]>>>8,a[l+2]=this._h[1]>>>0,a[l+3]=this._h[1]>>>8,a[l+4]=this._h[2]>>>0,a[l+5]=this._h[2]>>>8,a[l+6]=this._h[3]>>>0,a[l+7]=this._h[3]>>>8,a[l+8]=this._h[4]>>>0,a[l+9]=this._h[4]>>>8,a[l+10]=this._h[5]>>>0,a[l+11]=this._h[5]>>>8,a[l+12]=this._h[6]>>>0,a[l+13]=this._h[6]>>>8,a[l+14]=this._h[7]>>>0,a[l+15]=this._h[7]>>>8,this._finished=!0,this},c.prototype.update=function(a){var l=0,h=a.length,f;if(this._leftover){f=16-this._leftover,f>h&&(f=h);for(var O=0;O<f;O++)this._buffer[this._leftover+O]=a[l+O];if(h-=f,l+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(h>=16&&(f=h-h%16,this._blocks(a,l,f),l+=f,h-=f),h){for(var O=0;O<h;O++)this._buffer[this._leftover+O]=a[l+O];this._leftover+=h}return this},c.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},c.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},c}();t.Poly1305=n;function i(c,a){var l=new n(c);l.update(a);var h=l.digest();return l.clean(),h}t.oneTimeAuth=i;function s(c,a){return c.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(c,a)}t.equal=s}(Io),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=gn,r=Io,n=mt,i=ne,s=Ht;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var c=new Uint8Array(16),a=function(){function l(h){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,h.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(h)}return l.prototype.seal=function(h,f,O,w){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var v=new Uint8Array(16);v.set(h,v.length-h.length);var _=new Uint8Array(32);e.stream(this._key,v,_,4);var x=f.length+this.tagLength,j;if(w){if(w.length!==x)throw new Error("ChaCha20Poly1305: incorrect destination length");j=w}else j=new Uint8Array(x);return e.streamXOR(this._key,v,f,j,4),this._authenticate(j.subarray(j.length-this.tagLength,j.length),_,j.subarray(0,j.length-this.tagLength),O),n.wipe(v),j},l.prototype.open=function(h,f,O,w){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(f.length<this.tagLength)return null;var v=new Uint8Array(16);v.set(h,v.length-h.length);var _=new Uint8Array(32);e.stream(this._key,v,_,4);var x=new Uint8Array(this.tagLength);if(this._authenticate(x,_,f.subarray(0,f.length-this.tagLength),O),!s.equal(x,f.subarray(f.length-this.tagLength,f.length)))return null;var j=f.length-this.tagLength,K;if(w){if(w.length!==j)throw new Error("ChaCha20Poly1305: incorrect destination length");K=w}else K=new Uint8Array(j);return e.streamXOR(this._key,v,f.subarray(0,f.length-this.tagLength),K,4),n.wipe(v),K},l.prototype.clean=function(){return n.wipe(this._key),this},l.prototype._authenticate=function(h,f,O,w){var v=new r.Poly1305(f);w&&(v.update(w),w.length%16>0&&v.update(c.subarray(w.length%16))),v.update(O),O.length%16>0&&v.update(c.subarray(O.length%16));var _=new Uint8Array(8);w&&i.writeUint64LE(w.length,_),v.update(_),i.writeUint64LE(O.length,_),v.update(_);for(var x=v.digest(),j=0;j<x.length;j++)h[j]=x[j];v.clean(),n.wipe(x),n.wipe(_)},l}();t.ChaCha20Poly1305=a}(ai);var Fo={},Ur={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});function hp(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}ui.isSerializableHash=hp,Object.defineProperty(Ur,"__esModule",{value:!0});var Rt=ui,lp=Ht,fp=mt,Ao=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Rt.isSerializableHash(this._inner)&&Rt.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),fp.wipe(n)}return t.prototype.reset=function(){if(!Rt.isSerializableHash(this._inner)||!Rt.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Rt.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Rt.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Rt.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Rt.isSerializableHash(this._inner)||!Rt.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Rt.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();Ur.HMAC=Ao;function pp(t,e,r){var n=new Ao(t,e);n.update(r);var i=n.digest();return n.clean(),i}Ur.hmac=pp,Ur.equal=lp.equal,Object.defineProperty(Fo,"__esModule",{value:!0});var No=Ur,Ro=mt,dp=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=No.hmac(this._hash,n,r);this._hmac=new No.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Ro.wipe(this._buffer),Ro.wipe(this._counter),this._bufpos=0},t}(),gp=Fo.HKDF=dp,yn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ne,r=mt;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var f=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&h>0;)this._buffer[this._bufferLength++]=l[f++],h--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(f=s(this._temp,this._state,l,f,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[f++],h--;return this},a.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,f=this._bufferLength,O=h/536870912|0,w=h<<3,v=h%64<56?64:128;this._buffer[f]=128;for(var _=f+1;_<v-8;_++)this._buffer[_]=0;e.writeUint32BE(O,this._buffer,v-8),e.writeUint32BE(w,this._buffer,v-4),s(this._temp,this._state,this._buffer,0,v),this._finished=!0}for(var _=0;_<this.digestLength/4;_++)e.writeUint32BE(this._state[_],l,_*4);return this},a.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(l){return this._state.set(l.state),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(l){r.wipe(l.state),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,l,h,f,O){for(;O>=64;){for(var w=l[0],v=l[1],_=l[2],x=l[3],j=l[4],K=l[5],I=l[6],A=l[7],y=0;y<16;y++){var S=f+y*4;a[y]=e.readUint32BE(h,S)}for(var y=16;y<64;y++){var E=a[y-2],o=(E>>>17|E<<32-17)^(E>>>19|E<<32-19)^E>>>10;E=a[y-15];var p=(E>>>7|E<<32-7)^(E>>>18|E<<32-18)^E>>>3;a[y]=(o+a[y-7]|0)+(p+a[y-16]|0)}for(var y=0;y<64;y++){var o=(((j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7))+(j&K^~j&I)|0)+(A+(i[y]+a[y]|0)|0)|0,p=((w>>>2|w<<32-2)^(w>>>13|w<<32-13)^(w>>>22|w<<32-22))+(w&v^w&_^v&_)|0;A=I,I=K,K=j,j=x+o|0,x=_,_=v,v=w,w=o+p|0}l[0]+=w,l[1]+=v,l[2]+=_,l[3]+=x,l[4]+=j,l[5]+=K,l[6]+=I,l[7]+=A,f+=64,O-=64}return f}function c(a){var l=new n;l.update(a);var h=l.digest();return l.clean(),h}t.hash=c})(yn);var hi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=gr,r=mt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(y){const S=new Float64Array(16);if(y)for(let E=0;E<y.length;E++)S[E]=y[E];return S}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function c(y){let S=1;for(let E=0;E<16;E++){let o=y[E]+S+65535;S=Math.floor(o/65536),y[E]=o-S*65536}y[0]+=S-1+37*(S-1)}function a(y,S,E){const o=~(E-1);for(let p=0;p<16;p++){const D=o&(y[p]^S[p]);y[p]^=D,S[p]^=D}}function l(y,S){const E=n(),o=n();for(let p=0;p<16;p++)o[p]=S[p];c(o),c(o),c(o);for(let p=0;p<2;p++){E[0]=o[0]-65517;for(let H=1;H<15;H++)E[H]=o[H]-65535-(E[H-1]>>16&1),E[H-1]&=65535;E[15]=o[15]-32767-(E[14]>>16&1);const D=E[15]>>16&1;E[14]&=65535,a(o,E,1-D)}for(let p=0;p<16;p++)y[2*p]=o[p]&255,y[2*p+1]=o[p]>>8}function h(y,S){for(let E=0;E<16;E++)y[E]=S[2*E]+(S[2*E+1]<<8);y[15]&=32767}function f(y,S,E){for(let o=0;o<16;o++)y[o]=S[o]+E[o]}function O(y,S,E){for(let o=0;o<16;o++)y[o]=S[o]-E[o]}function w(y,S,E){let o,p,D=0,H=0,q=0,J=0,X=0,d=0,m=0,U=0,M=0,L=0,T=0,k=0,z=0,Q=0,$=0,ee=0,Y=0,ce=0,R=0,N=0,P=0,u=0,b=0,B=0,G=0,pe=0,ve=0,ge=0,Ee=0,ke=0,Le=0,me=E[0],ye=E[1],de=E[2],he=E[3],ue=E[4],ae=E[5],se=E[6],te=E[7],le=E[8],be=E[9],ie=E[10],we=E[11],_e=E[12],Oe=E[13],Ie=E[14],Se=E[15];o=S[0],D+=o*me,H+=o*ye,q+=o*de,J+=o*he,X+=o*ue,d+=o*ae,m+=o*se,U+=o*te,M+=o*le,L+=o*be,T+=o*ie,k+=o*we,z+=o*_e,Q+=o*Oe,$+=o*Ie,ee+=o*Se,o=S[1],H+=o*me,q+=o*ye,J+=o*de,X+=o*he,d+=o*ue,m+=o*ae,U+=o*se,M+=o*te,L+=o*le,T+=o*be,k+=o*ie,z+=o*we,Q+=o*_e,$+=o*Oe,ee+=o*Ie,Y+=o*Se,o=S[2],q+=o*me,J+=o*ye,X+=o*de,d+=o*he,m+=o*ue,U+=o*ae,M+=o*se,L+=o*te,T+=o*le,k+=o*be,z+=o*ie,Q+=o*we,$+=o*_e,ee+=o*Oe,Y+=o*Ie,ce+=o*Se,o=S[3],J+=o*me,X+=o*ye,d+=o*de,m+=o*he,U+=o*ue,M+=o*ae,L+=o*se,T+=o*te,k+=o*le,z+=o*be,Q+=o*ie,$+=o*we,ee+=o*_e,Y+=o*Oe,ce+=o*Ie,R+=o*Se,o=S[4],X+=o*me,d+=o*ye,m+=o*de,U+=o*he,M+=o*ue,L+=o*ae,T+=o*se,k+=o*te,z+=o*le,Q+=o*be,$+=o*ie,ee+=o*we,Y+=o*_e,ce+=o*Oe,R+=o*Ie,N+=o*Se,o=S[5],d+=o*me,m+=o*ye,U+=o*de,M+=o*he,L+=o*ue,T+=o*ae,k+=o*se,z+=o*te,Q+=o*le,$+=o*be,ee+=o*ie,Y+=o*we,ce+=o*_e,R+=o*Oe,N+=o*Ie,P+=o*Se,o=S[6],m+=o*me,U+=o*ye,M+=o*de,L+=o*he,T+=o*ue,k+=o*ae,z+=o*se,Q+=o*te,$+=o*le,ee+=o*be,Y+=o*ie,ce+=o*we,R+=o*_e,N+=o*Oe,P+=o*Ie,u+=o*Se,o=S[7],U+=o*me,M+=o*ye,L+=o*de,T+=o*he,k+=o*ue,z+=o*ae,Q+=o*se,$+=o*te,ee+=o*le,Y+=o*be,ce+=o*ie,R+=o*we,N+=o*_e,P+=o*Oe,u+=o*Ie,b+=o*Se,o=S[8],M+=o*me,L+=o*ye,T+=o*de,k+=o*he,z+=o*ue,Q+=o*ae,$+=o*se,ee+=o*te,Y+=o*le,ce+=o*be,R+=o*ie,N+=o*we,P+=o*_e,u+=o*Oe,b+=o*Ie,B+=o*Se,o=S[9],L+=o*me,T+=o*ye,k+=o*de,z+=o*he,Q+=o*ue,$+=o*ae,ee+=o*se,Y+=o*te,ce+=o*le,R+=o*be,N+=o*ie,P+=o*we,u+=o*_e,b+=o*Oe,B+=o*Ie,G+=o*Se,o=S[10],T+=o*me,k+=o*ye,z+=o*de,Q+=o*he,$+=o*ue,ee+=o*ae,Y+=o*se,ce+=o*te,R+=o*le,N+=o*be,P+=o*ie,u+=o*we,b+=o*_e,B+=o*Oe,G+=o*Ie,pe+=o*Se,o=S[11],k+=o*me,z+=o*ye,Q+=o*de,$+=o*he,ee+=o*ue,Y+=o*ae,ce+=o*se,R+=o*te,N+=o*le,P+=o*be,u+=o*ie,b+=o*we,B+=o*_e,G+=o*Oe,pe+=o*Ie,ve+=o*Se,o=S[12],z+=o*me,Q+=o*ye,$+=o*de,ee+=o*he,Y+=o*ue,ce+=o*ae,R+=o*se,N+=o*te,P+=o*le,u+=o*be,b+=o*ie,B+=o*we,G+=o*_e,pe+=o*Oe,ve+=o*Ie,ge+=o*Se,o=S[13],Q+=o*me,$+=o*ye,ee+=o*de,Y+=o*he,ce+=o*ue,R+=o*ae,N+=o*se,P+=o*te,u+=o*le,b+=o*be,B+=o*ie,G+=o*we,pe+=o*_e,ve+=o*Oe,ge+=o*Ie,Ee+=o*Se,o=S[14],$+=o*me,ee+=o*ye,Y+=o*de,ce+=o*he,R+=o*ue,N+=o*ae,P+=o*se,u+=o*te,b+=o*le,B+=o*be,G+=o*ie,pe+=o*we,ve+=o*_e,ge+=o*Oe,Ee+=o*Ie,ke+=o*Se,o=S[15],ee+=o*me,Y+=o*ye,ce+=o*de,R+=o*he,N+=o*ue,P+=o*ae,u+=o*se,b+=o*te,B+=o*le,G+=o*be,pe+=o*ie,ve+=o*we,ge+=o*_e,Ee+=o*Oe,ke+=o*Ie,Le+=o*Se,D+=38*Y,H+=38*ce,q+=38*R,J+=38*N,X+=38*P,d+=38*u,m+=38*b,U+=38*B,M+=38*G,L+=38*pe,T+=38*ve,k+=38*ge,z+=38*Ee,Q+=38*ke,$+=38*Le,p=1,o=D+p+65535,p=Math.floor(o/65536),D=o-p*65536,o=H+p+65535,p=Math.floor(o/65536),H=o-p*65536,o=q+p+65535,p=Math.floor(o/65536),q=o-p*65536,o=J+p+65535,p=Math.floor(o/65536),J=o-p*65536,o=X+p+65535,p=Math.floor(o/65536),X=o-p*65536,o=d+p+65535,p=Math.floor(o/65536),d=o-p*65536,o=m+p+65535,p=Math.floor(o/65536),m=o-p*65536,o=U+p+65535,p=Math.floor(o/65536),U=o-p*65536,o=M+p+65535,p=Math.floor(o/65536),M=o-p*65536,o=L+p+65535,p=Math.floor(o/65536),L=o-p*65536,o=T+p+65535,p=Math.floor(o/65536),T=o-p*65536,o=k+p+65535,p=Math.floor(o/65536),k=o-p*65536,o=z+p+65535,p=Math.floor(o/65536),z=o-p*65536,o=Q+p+65535,p=Math.floor(o/65536),Q=o-p*65536,o=$+p+65535,p=Math.floor(o/65536),$=o-p*65536,o=ee+p+65535,p=Math.floor(o/65536),ee=o-p*65536,D+=p-1+37*(p-1),p=1,o=D+p+65535,p=Math.floor(o/65536),D=o-p*65536,o=H+p+65535,p=Math.floor(o/65536),H=o-p*65536,o=q+p+65535,p=Math.floor(o/65536),q=o-p*65536,o=J+p+65535,p=Math.floor(o/65536),J=o-p*65536,o=X+p+65535,p=Math.floor(o/65536),X=o-p*65536,o=d+p+65535,p=Math.floor(o/65536),d=o-p*65536,o=m+p+65535,p=Math.floor(o/65536),m=o-p*65536,o=U+p+65535,p=Math.floor(o/65536),U=o-p*65536,o=M+p+65535,p=Math.floor(o/65536),M=o-p*65536,o=L+p+65535,p=Math.floor(o/65536),L=o-p*65536,o=T+p+65535,p=Math.floor(o/65536),T=o-p*65536,o=k+p+65535,p=Math.floor(o/65536),k=o-p*65536,o=z+p+65535,p=Math.floor(o/65536),z=o-p*65536,o=Q+p+65535,p=Math.floor(o/65536),Q=o-p*65536,o=$+p+65535,p=Math.floor(o/65536),$=o-p*65536,o=ee+p+65535,p=Math.floor(o/65536),ee=o-p*65536,D+=p-1+37*(p-1),y[0]=D,y[1]=H,y[2]=q,y[3]=J,y[4]=X,y[5]=d,y[6]=m,y[7]=U,y[8]=M,y[9]=L,y[10]=T,y[11]=k,y[12]=z,y[13]=Q,y[14]=$,y[15]=ee}function v(y,S){w(y,S,S)}function _(y,S){const E=n();for(let o=0;o<16;o++)E[o]=S[o];for(let o=253;o>=0;o--)v(E,E),o!==2&&o!==4&&w(E,E,S);for(let o=0;o<16;o++)y[o]=E[o]}function x(y,S){const E=new Uint8Array(32),o=new Float64Array(80),p=n(),D=n(),H=n(),q=n(),J=n(),X=n();for(let M=0;M<31;M++)E[M]=y[M];E[31]=y[31]&127|64,E[0]&=248,h(o,S);for(let M=0;M<16;M++)D[M]=o[M];p[0]=q[0]=1;for(let M=254;M>=0;--M){const L=E[M>>>3]>>>(M&7)&1;a(p,D,L),a(H,q,L),f(J,p,H),O(p,p,H),f(H,D,q),O(D,D,q),v(q,J),v(X,p),w(p,H,p),w(H,D,J),f(J,p,H),O(p,p,H),v(D,p),O(H,q,X),w(p,H,s),f(p,p,q),w(H,H,p),w(p,q,X),w(q,D,o),v(D,J),a(p,D,L),a(H,q,L)}for(let M=0;M<16;M++)o[M+16]=p[M],o[M+32]=H[M],o[M+48]=D[M],o[M+64]=q[M];const d=o.subarray(32),m=o.subarray(16);_(d,d),w(m,m,d);const U=new Uint8Array(32);return l(U,m),U}t.scalarMult=x;function j(y){return x(y,i)}t.scalarMultBase=j;function K(y){if(y.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const S=new Uint8Array(y);return{publicKey:j(S),secretKey:S}}t.generateKeyPairFromSeed=K;function I(y){const S=(0,e.randomBytes)(32,y),E=K(S);return(0,r.wipe)(S),E}t.generateKeyPair=I;function A(y,S,E=!1){if(y.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(S.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const o=x(y,S);if(E){let p=0;for(let D=0;D<o.length;D++)p|=o[D];if(p===0)throw new Error("X25519: invalid shared key")}return o}t.sharedKey=A})(hi);var xo=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},yp=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),bp=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),mp=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),vp=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),wp=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),_p=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ep=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,To=3,Sp=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",_p]],Lo=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Op(t){return t?Co(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new wp:typeof navigator<"u"?Co(navigator.userAgent):Fp()}function Ip(t){return t!==""&&Sp.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Co(t){var e=Ip(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new vp;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<To&&(i=xo(xo([],i,!0),Ap(To-i.length),!0)):i=[];var s=i.join("."),c=Pp(t),a=Ep.exec(t);return a&&a[1]?new mp(r,s,c,a[1]):new yp(r,s,c)}function Pp(t){for(var e=0,r=Lo.length;e<r;e++){var n=Lo[e],i=n[0],s=n[1],c=s.exec(t);if(c)return i}return null}function Fp(){var t=typeof process<"u"&&process.version;return t?new bp(process.version.slice(1)):null}function Ap(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.getLocalStorage=Ne.getLocalStorageOrThrow=Ne.getCrypto=Ne.getCryptoOrThrow=Uo=Ne.getLocation=Ne.getLocationOrThrow=li=Ne.getNavigator=Ne.getNavigatorOrThrow=jo=Ne.getDocument=Ne.getDocumentOrThrow=Ne.getFromWindowOrThrow=Ne.getFromWindow=void 0;function tr(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ne.getFromWindow=tr;function yr(t){const e=tr(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ne.getFromWindowOrThrow=yr;function Np(){return yr("document")}Ne.getDocumentOrThrow=Np;function Rp(){return tr("document")}var jo=Ne.getDocument=Rp;function xp(){return yr("navigator")}Ne.getNavigatorOrThrow=xp;function Tp(){return tr("navigator")}var li=Ne.getNavigator=Tp;function Lp(){return yr("location")}Ne.getLocationOrThrow=Lp;function Cp(){return tr("location")}var Uo=Ne.getLocation=Cp;function jp(){return yr("crypto")}Ne.getCryptoOrThrow=jp;function Up(){return tr("crypto")}Ne.getCrypto=Up;function Mp(){return yr("localStorage")}Ne.getLocalStorageOrThrow=Mp;function Dp(){return tr("localStorage")}Ne.getLocalStorage=Dp;var fi={};Object.defineProperty(fi,"__esModule",{value:!0});var Mo=fi.getWindowMetadata=void 0;const Do=Ne;function kp(){let t,e;try{t=Do.getDocumentOrThrow(),e=Do.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),O=[];for(let w=0;w<f.length;w++){const v=f[w],_=v.getAttribute("rel");if(_&&_.toLowerCase().indexOf("icon")>-1){const x=v.getAttribute("href");if(x)if(x.toLowerCase().indexOf("https:")===-1&&x.toLowerCase().indexOf("http:")===-1&&x.indexOf("//")!==0){let j=e.protocol+"//"+e.host;if(x.indexOf("/")===0)j+=x;else{const K=e.pathname.split("/");K.pop(),j+=K.join("/")+"/"+x}O.push(j)}else if(x.indexOf("//")===0){const j=e.protocol+x;O.push(j)}else O.push(x)}}return O}function n(...f){const O=t.getElementsByTagName("meta");for(let w=0;w<O.length;w++){const v=O[w],_=["itemprop","property","name"].map(x=>v.getAttribute(x)).filter(x=>x?f.includes(x):!1);if(_.length&&_){const x=v.getAttribute("content");if(x)return x}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const c=i(),a=s(),l=e.origin,h=r();return{description:a,url:l,icons:h,name:c}}Mo=fi.getWindowMetadata=kp;var Mr={},zp=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),ko="%[a-f0-9]{2}",zo=new RegExp("("+ko+")|([^%]+?)","gi"),Ho=new RegExp("("+ko+")+","gi");function pi(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],pi(r),pi(n))}function Hp(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(zo)||[],r=1;r<e.length;r++)t=pi(e,r).join(""),e=t.match(zo)||[];return t}}function Kp(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=Ho.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Hp(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Ho.exec(t)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),s=0;s<i.length;s++){var c=i[s];t=t.replace(new RegExp(c,"g"),e[c])}return t}var $p=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Kp(t)}},Bp=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Vp=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var c=n[s],a=t[c];(i?e.indexOf(c)!==-1:e(c,a,t))&&(r[c]=a)}return r};(function(t){const e=zp,r=$p,n=Bp,i=Vp,s=I=>I==null,c=Symbol("encodeFragmentIdentifier");function a(I){switch(I.arrayFormat){case"index":return A=>(y,S)=>{const E=y.length;return S===void 0||I.skipNull&&S===null||I.skipEmptyString&&S===""?y:S===null?[...y,[f(A,I),"[",E,"]"].join("")]:[...y,[f(A,I),"[",f(E,I),"]=",f(S,I)].join("")]};case"bracket":return A=>(y,S)=>S===void 0||I.skipNull&&S===null||I.skipEmptyString&&S===""?y:S===null?[...y,[f(A,I),"[]"].join("")]:[...y,[f(A,I),"[]=",f(S,I)].join("")];case"colon-list-separator":return A=>(y,S)=>S===void 0||I.skipNull&&S===null||I.skipEmptyString&&S===""?y:S===null?[...y,[f(A,I),":list="].join("")]:[...y,[f(A,I),":list=",f(S,I)].join("")];case"comma":case"separator":case"bracket-separator":{const A=I.arrayFormat==="bracket-separator"?"[]=":"=";return y=>(S,E)=>E===void 0||I.skipNull&&E===null||I.skipEmptyString&&E===""?S:(E=E===null?"":E,S.length===0?[[f(y,I),A,f(E,I)].join("")]:[[S,f(E,I)].join(I.arrayFormatSeparator)])}default:return A=>(y,S)=>S===void 0||I.skipNull&&S===null||I.skipEmptyString&&S===""?y:S===null?[...y,f(A,I)]:[...y,[f(A,I),"=",f(S,I)].join("")]}}function l(I){let A;switch(I.arrayFormat){case"index":return(y,S,E)=>{if(A=/\[(\d*)\]$/.exec(y),y=y.replace(/\[\d*\]$/,""),!A){E[y]=S;return}E[y]===void 0&&(E[y]={}),E[y][A[1]]=S};case"bracket":return(y,S,E)=>{if(A=/(\[\])$/.exec(y),y=y.replace(/\[\]$/,""),!A){E[y]=S;return}if(E[y]===void 0){E[y]=[S];return}E[y]=[].concat(E[y],S)};case"colon-list-separator":return(y,S,E)=>{if(A=/(:list)$/.exec(y),y=y.replace(/:list$/,""),!A){E[y]=S;return}if(E[y]===void 0){E[y]=[S];return}E[y]=[].concat(E[y],S)};case"comma":case"separator":return(y,S,E)=>{const o=typeof S=="string"&&S.includes(I.arrayFormatSeparator),p=typeof S=="string"&&!o&&O(S,I).includes(I.arrayFormatSeparator);S=p?O(S,I):S;const D=o||p?S.split(I.arrayFormatSeparator).map(H=>O(H,I)):S===null?S:O(S,I);E[y]=D};case"bracket-separator":return(y,S,E)=>{const o=/(\[\])$/.test(y);if(y=y.replace(/\[\]$/,""),!o){E[y]=S&&O(S,I);return}const p=S===null?[]:S.split(I.arrayFormatSeparator).map(D=>O(D,I));if(E[y]===void 0){E[y]=p;return}E[y]=[].concat(E[y],p)};default:return(y,S,E)=>{if(E[y]===void 0){E[y]=S;return}E[y]=[].concat(E[y],S)}}}function h(I){if(typeof I!="string"||I.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function f(I,A){return A.encode?A.strict?e(I):encodeURIComponent(I):I}function O(I,A){return A.decode?r(I):I}function w(I){return Array.isArray(I)?I.sort():typeof I=="object"?w(Object.keys(I)).sort((A,y)=>Number(A)-Number(y)).map(A=>I[A]):I}function v(I){const A=I.indexOf("#");return A!==-1&&(I=I.slice(0,A)),I}function _(I){let A="";const y=I.indexOf("#");return y!==-1&&(A=I.slice(y)),A}function x(I){I=v(I);const A=I.indexOf("?");return A===-1?"":I.slice(A+1)}function j(I,A){return A.parseNumbers&&!Number.isNaN(Number(I))&&typeof I=="string"&&I.trim()!==""?I=Number(I):A.parseBooleans&&I!==null&&(I.toLowerCase()==="true"||I.toLowerCase()==="false")&&(I=I.toLowerCase()==="true"),I}function K(I,A){A=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},A),h(A.arrayFormatSeparator);const y=l(A),S=Object.create(null);if(typeof I!="string"||(I=I.trim().replace(/^[?#&]/,""),!I))return S;for(const E of I.split("&")){if(E==="")continue;let[o,p]=n(A.decode?E.replace(/\+/g," "):E,"=");p=p===void 0?null:["comma","separator","bracket-separator"].includes(A.arrayFormat)?p:O(p,A),y(O(o,A),p,S)}for(const E of Object.keys(S)){const o=S[E];if(typeof o=="object"&&o!==null)for(const p of Object.keys(o))o[p]=j(o[p],A);else S[E]=j(o,A)}return A.sort===!1?S:(A.sort===!0?Object.keys(S).sort():Object.keys(S).sort(A.sort)).reduce((E,o)=>{const p=S[o];return Boolean(p)&&typeof p=="object"&&!Array.isArray(p)?E[o]=w(p):E[o]=p,E},Object.create(null))}t.extract=x,t.parse=K,t.stringify=(I,A)=>{if(!I)return"";A=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},A),h(A.arrayFormatSeparator);const y=p=>A.skipNull&&s(I[p])||A.skipEmptyString&&I[p]==="",S=a(A),E={};for(const p of Object.keys(I))y(p)||(E[p]=I[p]);const o=Object.keys(E);return A.sort!==!1&&o.sort(A.sort),o.map(p=>{const D=I[p];return D===void 0?"":D===null?f(p,A):Array.isArray(D)?D.length===0&&A.arrayFormat==="bracket-separator"?f(p,A)+"[]":D.reduce(S(p),[]).join("&"):f(p,A)+"="+f(D,A)}).filter(p=>p.length>0).join("&")},t.parseUrl=(I,A)=>{A=Object.assign({decode:!0},A);const[y,S]=n(I,"#");return Object.assign({url:y.split("?")[0]||"",query:K(x(I),A)},A&&A.parseFragmentIdentifier&&S?{fragmentIdentifier:O(S,A)}:{})},t.stringifyUrl=(I,A)=>{A=Object.assign({encode:!0,strict:!0,[c]:!0},A);const y=v(I.url).split("?")[0]||"",S=t.extract(I.url),E=t.parse(S,{sort:!1}),o=Object.assign(E,I.query);let p=t.stringify(o,A);p&&(p=`?${p}`);let D=_(I.url);return I.fragmentIdentifier&&(D=`#${A[c]?f(I.fragmentIdentifier,A):I.fragmentIdentifier}`),`${y}${p}${D}`},t.pick=(I,A,y)=>{y=Object.assign({parseFragmentIdentifier:!0,[c]:!1},y);const{url:S,query:E,fragmentIdentifier:o}=t.parseUrl(I,y);return t.stringifyUrl({url:S,query:i(E,A),fragmentIdentifier:o},y)},t.exclude=(I,A,y)=>{const S=Array.isArray(A)?E=>!A.includes(E):(E,o)=>!A(E,o);return t.pick(I,S,y)}})(Mr);const qp={waku:{publish:"waku_publish",subscribe:"waku_subscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe"},irn:{publish:"irn_publish",subscribe:"irn_subscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe"},iridium:{publish:"iridium_publish",subscribe:"iridium_subscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe"}};function di(t,e){return t.includes(":")?[t]:e.chains||[]}const Ko="base10",yt="base16",gi="base64pad",yi="utf8",$o=0,rr=1,Gp=0,Bo=1,bi=12,mi=32;function Wp(){const t=hi.generateKeyPair();return{privateKey:dt(t.secretKey,yt),publicKey:dt(t.publicKey,yt)}}function vi(){const t=gr.randomBytes(mi);return dt(t,yt)}function Yp(t,e){const r=hi.sharedKey(gt(t,yt),gt(e,yt)),n=new gp(yn.SHA256,r).expand(mi);return dt(n,yt)}function Jp(t){const e=yn.hash(gt(t,yt));return dt(e,yt)}function bn(t){const e=yn.hash(gt(t,yi));return dt(e,yt)}function Xp(t){return gt(`${t}`,Ko)}function Dr(t){return Number(dt(t,Ko))}function Zp(t){const e=Xp(typeof t.type<"u"?t.type:$o);if(Dr(e)===rr&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?gt(t.senderPublicKey,yt):void 0,n=typeof t.iv<"u"?gt(t.iv,yt):gr.randomBytes(bi),i=new ai.ChaCha20Poly1305(gt(t.symKey,yt)).seal(n,gt(t.message,yi));return ed({type:e,sealed:i,iv:n,senderPublicKey:r})}function Qp(t){const e=new ai.ChaCha20Poly1305(gt(t.symKey,yt)),{sealed:r,iv:n}=wi(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return dt(i,yi)}function ed(t){if(Dr(t.type)===rr){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return dt(ni([t.type,t.senderPublicKey,t.iv,t.sealed]),gi)}return dt(ni([t.type,t.iv,t.sealed]),gi)}function wi(t){const e=gt(t,gi),r=e.slice(Gp,Bo),n=Bo;if(Dr(r)===rr){const a=n+mi,l=a+bi,h=e.slice(n,a),f=e.slice(a,l),O=e.slice(l);return{type:r,sealed:O,iv:f,senderPublicKey:h}}const i=n+bi,s=e.slice(n,i),c=e.slice(i);return{type:r,sealed:c,iv:s}}function td(t,e){const r=wi(t);return Vo({type:Dr(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?dt(r.senderPublicKey,yt):void 0,receiverPublicKey:e?.receiverPublicKey})}function Vo(t){const e=t?.type||$o;if(e===rr){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function qo(t){return t.type===rr&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var rd=Object.defineProperty,Go=Object.getOwnPropertySymbols,nd=Object.prototype.hasOwnProperty,id=Object.prototype.propertyIsEnumerable,Wo=(t,e,r)=>e in t?rd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yo=(t,e)=>{for(var r in e||(e={}))nd.call(e,r)&&Wo(t,r,e[r]);if(Go)for(var r of Go(e))id.call(e,r)&&Wo(t,r,e[r]);return t};const sd="ReactNative",kr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},od="js";function Jo(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ad(){return!jo()&&!!li()&&navigator.product===sd}function cd(){return!Jo()&&!!li()}function ud(){return ad()?kr.reactNative:Jo()?kr.node:cd()?kr.browser:kr.unknown}function hd(t,e){let r=Mr.parse(t);return r=Yo(Yo({},r),e),t=Mr.stringify(r),t}function ld(){return Mo()||{name:"",description:"",url:"",icons:[""]}}function fd(){const t=Op();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function pd(){var t;const e=ud();return e===kr.browser?[e,((t=Uo())==null?void 0:t.host)||"unknown"].join(":"):e}function dd(t,e,r){const n=fd(),i=pd();return[[t,e].join("-"),[od,r].join("-"),n,i].join("/")}function gd({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s}){const c=r.split("?"),a=dd(t,e,n),l={auth:i,ua:a,projectId:s},h=hd(c[1]||"",l);return c[0]+"?"+h}function Kt(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Xo(t){return Object.fromEntries(t.entries())}function Zo(t){return new Map(Object.entries(t))}function nr(t){const e=Z.toMiliseconds(t||Z.FIVE_MINUTES);let r,n,i;return{resolve:s=>{i&&r&&(clearTimeout(i),r(s))},reject:s=>{i&&n&&(clearTimeout(i),n(s))},done:()=>new Promise((s,c)=>{i=setTimeout(c,e),r=s,n=c})}}function Qo(t,e){return new Promise(async(r,n)=>{const i=setTimeout(()=>n(),e),s=await t;clearTimeout(i),r(s)})}function ea(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function yd(t){return ea("topic",t)}function bd(t){return ea("id",t)}function ta(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function xt(t,e){return Z.fromMiliseconds((e||Date.now())+Z.toMiliseconds(t))}function $t(t){return Date.now()>=Z.toMiliseconds(t)}function De(t,e){return`${t}${e?`:${e}`:""}`}const md="irn";function _i(t){return t?.relay||{protocol:md}}function Ei(t){const e=qp[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var vd=Object.defineProperty,ra=Object.getOwnPropertySymbols,wd=Object.prototype.hasOwnProperty,_d=Object.prototype.propertyIsEnumerable,na=(t,e,r)=>e in t?vd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ed=(t,e)=>{for(var r in e||(e={}))wd.call(e,r)&&na(t,r,e[r]);if(ra)for(var r of ra(e))_d.call(e,r)&&na(t,r,e[r]);return t};function Sd(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),c=t[i];r[s]=c}}),r}function Od(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",c=Mr.parse(s);return{protocol:n,topic:i[0],version:parseInt(i[1],10),symKey:c.symKey,relay:Sd(c)}}function Id(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function Pd(t){return`${t.protocol}:${t.topic}@${t.version}?`+Mr.stringify(Ed({symKey:t.symKey},Id(t.relay)))}function zr(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Fd(t){const e=[];return Object.values(t).forEach(r=>{e.push(...zr(r.accounts))}),e}function Ad(t,e){const r=[];return Object.values(t).forEach(n=>{zr(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Nd(t,e){const r=[];return Object.values(t).forEach(n=>{zr(n.accounts).includes(e)&&r.push(...n.events)}),r}function Rd(t,e){const r=mn(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(c=>`${c.split(":")[0]}:${c.split(":")[1]}`)};return n}const xd={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Td={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function V(t,e){const{message:r,code:n}=Td[t];return{message:e?`${r} ${e}`:r,code:n}}function ze(t,e){const{message:r,code:n}=xd[t];return{message:e?`${r} ${e}`:r,code:n}}function Hr(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Kr(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function lt(t){return typeof t>"u"}function Ge(t,e){return e&&lt(t)?!0:typeof t=="string"&&Boolean(t.trim().length)}function Si(t,e){return e&&lt(t)?!0:typeof t=="number"&&!isNaN(t)}function Ld(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return Kt(i,n)?(n.forEach(c=>{const{accounts:a,methods:l,events:h}=t.namespaces[c],f=zr(a),O=r[c];(!Kt(di(c,O),f)||!Kt(O.methods,l)||!Kt(O.events,h))&&(s=!1)}),s):!1}function Oi(t){return Ge(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Cd(t){if(Ge(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Oi(r)}}return!1}function jd(t){if(Ge(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Ud(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function Md(t){return t?.topic}function Dd(t,e){let r=null;return Ge(t?.publicKey,!1)||(r=V("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function ia(t){let e=!0;return Hr(t)?t.length&&(e=t.every(r=>Ge(r,!1))):e=!1,e}function kd(t,e,r){let n=null;return Hr(e)?e.forEach(i=>{n||(!Oi(i)||!i.includes(t))&&(n=ze("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):n=ze("UNSUPPORTED_CHAINS",`${r}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),n}function zd(t,e){let r=null;return Object.entries(t).forEach(([n,i])=>{if(r)return;const s=kd(n,di(n,i),`${e} requiredNamespace`);s&&(r=s)}),r}function Hd(t,e){let r=null;return Hr(t)?t.forEach(n=>{r||Cd(n)||(r=ze("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=ze("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Kd(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Hd(n?.accounts,`${e} namespace`);i&&(r=i)}),r}function $d(t,e){let r=null;return ia(t?.methods)?ia(t?.events)||(r=ze("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=ze("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function sa(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=$d(n,`${e}, namespace`);i&&(r=i)}),r}function Bd(t,e,r){let n=null;if(t&&Kr(t)){const i=sa(t,e);i&&(n=i);const s=zd(t,e);s&&(n=s)}else n=V("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function mn(t,e){let r=null;if(t&&Kr(t)){const n=sa(t,e);n&&(r=n);const i=Kd(t,e);i&&(r=i)}else r=V("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function oa(t){return Ge(t.protocol,!0)}function Vd(t,e){let r=!1;return e&&!t?r=!0:t&&Hr(t)&&t.length&&t.forEach(n=>{r=oa(n)}),r}function qd(t){return typeof t=="number"}function bt(t){return typeof t<"u"&&typeof t!==null}function Gd(t){return!(!t||typeof t!="object"||!t.code||!Si(t.code,!1)||!t.message||!Ge(t.message,!1))}function Wd(t){return!(lt(t)||!Ge(t.method,!1))}function Yd(t){return!(lt(t)||lt(t.result)&&lt(t.error)||!Si(t.id,!1)||!Ge(t.jsonrpc,!1))}function Jd(t){return!(lt(t)||!Ge(t.name,!1))}function aa(t,e){return!(!Oi(e)||!Fd(t).includes(e))}function Xd(t,e,r){return Ge(r,!1)?Ad(t,e).includes(r):!1}function Zd(t,e,r){return Ge(r,!1)?Nd(t,e).includes(r):!1}function Ii(t,e,r,n){let i=null;const s=Object.keys(t),c=Object.keys(e);return Kt(s,c)?s.forEach(a=>{if(i)return;const l=zr(e[a].accounts);Kt(di(a,t[a]),l)?Kt(t[a].methods,e[a].methods)?Kt(t[a].events,e[a].events)||(i=V("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${a}`)):i=V("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${a}`):i=V("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace chains for ${a}`)}):i=V("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy ${n}`),i}function Qd(t,e){return Si(t,!1)&&t<=e.max&&t>=e.min}const eg="PARSE_ERROR",tg="INVALID_REQUEST",rg="METHOD_NOT_FOUND",ng="INVALID_PARAMS",ca="INTERNAL_ERROR",Pi="SERVER_ERROR",ig=[-32700,-32600,-32601,-32602,-32603],$r={[eg]:{code:-32700,message:"Parse error"},[tg]:{code:-32600,message:"Invalid Request"},[rg]:{code:-32601,message:"Method not found"},[ng]:{code:-32602,message:"Invalid params"},[ca]:{code:-32603,message:"Internal error"},[Pi]:{code:-32e3,message:"Server error"}},ua=Pi;function sg(t){return ig.includes(t)}function ha(t){return Object.keys($r).includes(t)?$r[t]:$r[ua]}function og(t){return Object.values($r).find(r=>r.code===t)||$r[ua]}function la(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var fa={};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var Fi=function(t,e){return Fi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Fi(t,e)};function ag(t,e){Fi(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ai=function(){return Ai=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ai.apply(this,arguments)};function cg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function ug(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function hg(t,e){return function(r,n){e(r,n,t)}}function lg(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function fg(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function a(f){try{h(n.next(f))}catch(O){c(O)}}function l(f){try{h(n.throw(f))}catch(O){c(O)}}function h(f){f.done?s(f.value):i(f.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}function pg(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(h){return function(f){return l([h,f])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function dg(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function gg(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Ni(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pa(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function yg(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(pa(arguments[e]));return t}function bg(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,a=s.length;c<a;c++,i++)n[i]=s[c];return n}function Br(t){return this instanceof Br?(this.v=t,this):new Br(t)}function mg(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(w){n[w]&&(i[w]=function(v){return new Promise(function(_,x){s.push([w,v,_,x])>1||a(w,v)})})}function a(w,v){try{l(n[w](v))}catch(_){O(s[0][3],_)}}function l(w){w.value instanceof Br?Promise.resolve(w.value.v).then(h,f):O(s[0][2],w)}function h(w){a("next",w)}function f(w){a("throw",w)}function O(w,v){w(v),s.shift(),s.length&&a(s[0][0],s[0][1])}}function vg(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:Br(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function wg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Ni=="function"?Ni(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(a,l){c=t[s](c),i(a,l,c.done,c.value)})}}function i(s,c,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},c)}}function _g(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Eg(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Sg(t){return t&&t.__esModule?t:{default:t}}function Og(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Ig(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Pg=Object.freeze({__proto__:null,__extends:ag,get __assign(){return Ai},__rest:cg,__decorate:ug,__param:hg,__metadata:lg,__awaiter:fg,__generator:pg,__createBinding:dg,__exportStar:gg,__values:Ni,__read:pa,__spread:yg,__spreadArrays:bg,__await:Br,__asyncGenerator:mg,__asyncDelegator:vg,__asyncValues:wg,__makeTemplateObject:_g,__importStar:Eg,__importDefault:Sg,__classPrivateFieldGet:Og,__classPrivateFieldSet:Ig}),Fg=re(Pg),Ut={},da;function Ag(){if(da)return Ut;da=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.isBrowserCryptoAvailable=Ut.getSubtleCrypto=Ut.getBrowerCrypto=void 0;function t(){return Me?.crypto||Me?.msCrypto||{}}Ut.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Ut.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Ut.isBrowserCryptoAvailable=r,Ut}var Mt={},ga;function Ng(){if(ga)return Mt;ga=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.isBrowser=Mt.isNode=Mt.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Mt.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Mt.isNode=e;function r(){return!t()&&!e()}return Mt.isBrowser=r,Mt}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Fg;e.__exportStar(Ag(),t),e.__exportStar(Ng(),t)})(fa);function Rg(){const t=Date.now()*Math.pow(10,3),e=Math.floor(Math.random()*Math.pow(10,3));return t+e}function vn(t,e,r){return{id:r||Rg(),jsonrpc:"2.0",method:t,params:e}}function Ri(t,e){return{id:t,jsonrpc:"2.0",result:e}}function wn(t,e,r){return{id:t,jsonrpc:"2.0",error:xg(e,r)}}function xg(t,e){return typeof t>"u"?ha(ca):(typeof t=="string"&&(t=Object.assign(Object.assign({},ha(Pi)),{message:t})),typeof e<"u"&&(t.data=e),sg(t.code)&&(t=og(t.code)),t)}class Tg{}class Lg extends Tg{constructor(){super()}}class Cg extends Lg{constructor(e){super()}}const jg="^https?:",Ug="^wss?:";function Mg(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function ya(t,e){const r=Mg(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function ba(t){return ya(t,jg)}function ma(t){return ya(t,Ug)}function Dg(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function va(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function xi(t){return va(t)&&"method"in t}function Ti(t){return va(t)&&(Dt(t)||Pt(t))}function Dt(t){return"result"in t}function Pt(t){return"error"in t}class Vr extends Cg{constructor(e){super(e),this.events=new at.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(vn(e.method,e.params||[]),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Pt(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Ti(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",()=>this.events.emit("disconnect")),this.connection.on("error",e=>this.events.emit("error",e)),this.hasRegisteredEventListeners=!0)}}const wa=10,kg=()=>typeof mr<"u"&&typeof mr.WebSocket<"u"?mr.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:Nb(),zg=()=>typeof window<"u",Hg=kg();class Kg{constructor(e){if(this.url=e,this.events=new at.exports.EventEmitter,this.registering=!1,!ma(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=()=>{this.onClose(),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Cr(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!ma(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=fa.isReactNative()?void 0:{rejectUnauthorized:!Dg(e)},s=new Hg(e,[],i);zg()?s.onerror=c=>{const a=c;n(this.emitError(a.error))}:s.on("error",c=>{n(this.emitError(c))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=()=>this.onClose(),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(){this.socket=void 0,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Xn(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=wn(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return la(e,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>wa&&this.events.setMaxListeners(wa)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var Li={exports:{}};(function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,c=9007199254740991,a="[object Arguments]",l="[object Array]",h="[object AsyncFunction]",f="[object Boolean]",O="[object Date]",w="[object Error]",v="[object Function]",_="[object GeneratorFunction]",x="[object Map]",j="[object Number]",K="[object Null]",I="[object Object]",A="[object Promise]",y="[object Proxy]",S="[object RegExp]",E="[object Set]",o="[object String]",p="[object Symbol]",D="[object Undefined]",H="[object WeakMap]",q="[object ArrayBuffer]",J="[object DataView]",X="[object Float32Array]",d="[object Float64Array]",m="[object Int8Array]",U="[object Int16Array]",M="[object Int32Array]",L="[object Uint8Array]",T="[object Uint8ClampedArray]",k="[object Uint16Array]",z="[object Uint32Array]",Q=/[\\^$.*+?()[\]{}|]/g,$=/^\[object .+?Constructor\]$/,ee=/^(?:0|[1-9]\d*)$/,Y={};Y[X]=Y[d]=Y[m]=Y[U]=Y[M]=Y[L]=Y[T]=Y[k]=Y[z]=!0,Y[a]=Y[l]=Y[q]=Y[f]=Y[J]=Y[O]=Y[w]=Y[v]=Y[x]=Y[j]=Y[I]=Y[S]=Y[E]=Y[o]=Y[H]=!1;var ce=typeof Me=="object"&&Me&&Me.Object===Object&&Me,R=typeof self=="object"&&self&&self.Object===Object&&self,N=ce||R||Function("return this")(),P=e&&!e.nodeType&&e,u=P&&!0&&t&&!t.nodeType&&t,b=u&&u.exports===P,B=b&&ce.process,G=function(){try{return B&&B.binding&&B.binding("util")}catch{}}(),pe=G&&G.isTypedArray;function ve(g,F){for(var C=-1,W=g==null?0:g.length,Re=0,oe=[];++C<W;){var Ue=g[C];F(Ue,C,g)&&(oe[Re++]=Ue)}return oe}function ge(g,F){for(var C=-1,W=F.length,Re=g.length;++C<W;)g[Re+C]=F[C];return g}function Ee(g,F){for(var C=-1,W=g==null?0:g.length;++C<W;)if(F(g[C],C,g))return!0;return!1}function ke(g,F){for(var C=-1,W=Array(g);++C<g;)W[C]=F(C);return W}function Le(g){return function(F){return g(F)}}function me(g,F){return g.has(F)}function ye(g,F){return g?.[F]}function de(g){var F=-1,C=Array(g.size);return g.forEach(function(W,Re){C[++F]=[Re,W]}),C}function he(g,F){return function(C){return g(F(C))}}function ue(g){var F=-1,C=Array(g.size);return g.forEach(function(W){C[++F]=W}),C}var ae=Array.prototype,se=Function.prototype,te=Object.prototype,le=N["__core-js_shared__"],be=se.toString,ie=te.hasOwnProperty,we=function(){var g=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),_e=te.toString,Oe=RegExp("^"+be.call(ie).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=b?N.Buffer:void 0,Se=N.Symbol,Ft=N.Uint8Array,Ct=te.propertyIsEnumerable,qt=ae.splice,vt=Se?Se.toStringTag:void 0,ir=Object.getOwnPropertySymbols,Jr=Ie?Ie.isBuffer:void 0,Rn=he(Object.keys,Object),He=br(N,"DataView"),Ce=br(N,"Map"),Ke=br(N,"Promise"),$e=br(N,"Set"),Be=br(N,"WeakMap"),je=br(Object,"create"),We=or(He),Ye=or(Ce),Je=or(Ke),Xe=or($e),Ze=or(Be),qe=Se?Se.prototype:void 0,Ve=qe?qe.valueOf:void 0;function xe(g){var F=-1,C=g==null?0:g.length;for(this.clear();++F<C;){var W=g[F];this.set(W[0],W[1])}}function Qe(){this.__data__=je?je(null):{},this.size=0}function et(g){var F=this.has(g)&&delete this.__data__[g];return this.size-=F?1:0,F}function H0(g){var F=this.__data__;if(je){var C=F[g];return C===n?void 0:C}return ie.call(F,g)?F[g]:void 0}function K0(g){var F=this.__data__;return je?F[g]!==void 0:ie.call(F,g)}function $0(g,F){var C=this.__data__;return this.size+=this.has(g)?0:1,C[g]=je&&F===void 0?n:F,this}xe.prototype.clear=Qe,xe.prototype.delete=et,xe.prototype.get=H0,xe.prototype.has=K0,xe.prototype.set=$0;function kt(g){var F=-1,C=g==null?0:g.length;for(this.clear();++F<C;){var W=g[F];this.set(W[0],W[1])}}function B0(){this.__data__=[],this.size=0}function V0(g){var F=this.__data__,C=Tn(F,g);if(C<0)return!1;var W=F.length-1;return C==W?F.pop():qt.call(F,C,1),--this.size,!0}function q0(g){var F=this.__data__,C=Tn(F,g);return C<0?void 0:F[C][1]}function G0(g){return Tn(this.__data__,g)>-1}function W0(g,F){var C=this.__data__,W=Tn(C,g);return W<0?(++this.size,C.push([g,F])):C[W][1]=F,this}kt.prototype.clear=B0,kt.prototype.delete=V0,kt.prototype.get=q0,kt.prototype.has=G0,kt.prototype.set=W0;function sr(g){var F=-1,C=g==null?0:g.length;for(this.clear();++F<C;){var W=g[F];this.set(W[0],W[1])}}function Y0(){this.size=0,this.__data__={hash:new xe,map:new(Ce||kt),string:new xe}}function J0(g){var F=Ln(this,g).delete(g);return this.size-=F?1:0,F}function X0(g){return Ln(this,g).get(g)}function Z0(g){return Ln(this,g).has(g)}function Q0(g,F){var C=Ln(this,g),W=C.size;return C.set(g,F),this.size+=C.size==W?0:1,this}sr.prototype.clear=Y0,sr.prototype.delete=J0,sr.prototype.get=X0,sr.prototype.has=Z0,sr.prototype.set=Q0;function xn(g){var F=-1,C=g==null?0:g.length;for(this.__data__=new sr;++F<C;)this.add(g[F])}function eb(g){return this.__data__.set(g,n),this}function tb(g){return this.__data__.has(g)}xn.prototype.add=xn.prototype.push=eb,xn.prototype.has=tb;function Gt(g){var F=this.__data__=new kt(g);this.size=F.size}function rb(){this.__data__=new kt,this.size=0}function nb(g){var F=this.__data__,C=F.delete(g);return this.size=F.size,C}function ib(g){return this.__data__.get(g)}function sb(g){return this.__data__.has(g)}function ob(g,F){var C=this.__data__;if(C instanceof kt){var W=C.__data__;if(!Ce||W.length<r-1)return W.push([g,F]),this.size=++C.size,this;C=this.__data__=new sr(W)}return C.set(g,F),this.size=C.size,this}Gt.prototype.clear=rb,Gt.prototype.delete=nb,Gt.prototype.get=ib,Gt.prototype.has=sb,Gt.prototype.set=ob;function ab(g,F){var C=Cn(g),W=!C&&Eb(g),Re=!C&&!W&&Gi(g),oe=!C&&!W&&!Re&&_c(g),Ue=C||W||Re||oe,tt=Ue?ke(g.length,String):[],ot=tt.length;for(var Te in g)(F||ie.call(g,Te))&&!(Ue&&(Te=="length"||Re&&(Te=="offset"||Te=="parent")||oe&&(Te=="buffer"||Te=="byteLength"||Te=="byteOffset")||bb(Te,ot)))&&tt.push(Te);return tt}function Tn(g,F){for(var C=g.length;C--;)if(bc(g[C][0],F))return C;return-1}function cb(g,F,C){var W=F(g);return Cn(g)?W:ge(W,C(g))}function Xr(g){return g==null?g===void 0?D:K:vt&&vt in Object(g)?gb(g):_b(g)}function pc(g){return Zr(g)&&Xr(g)==a}function dc(g,F,C,W,Re){return g===F?!0:g==null||F==null||!Zr(g)&&!Zr(F)?g!==g&&F!==F:ub(g,F,C,W,dc,Re)}function ub(g,F,C,W,Re,oe){var Ue=Cn(g),tt=Cn(F),ot=Ue?l:Wt(g),Te=tt?l:Wt(F);ot=ot==a?I:ot,Te=Te==a?I:Te;var wt=ot==I,At=Te==I,ut=ot==Te;if(ut&&Gi(g)){if(!Gi(F))return!1;Ue=!0,wt=!1}if(ut&&!wt)return oe||(oe=new Gt),Ue||_c(g)?gc(g,F,C,W,Re,oe):pb(g,F,ot,C,W,Re,oe);if(!(C&i)){var Ot=wt&&ie.call(g,"__wrapped__"),It=At&&ie.call(F,"__wrapped__");if(Ot||It){var Yt=Ot?g.value():g,zt=It?F.value():F;return oe||(oe=new Gt),Re(Yt,zt,C,W,oe)}}return ut?(oe||(oe=new Gt),db(g,F,C,W,Re,oe)):!1}function hb(g){if(!wc(g)||vb(g))return!1;var F=mc(g)?Oe:$;return F.test(or(g))}function lb(g){return Zr(g)&&vc(g.length)&&!!Y[Xr(g)]}function fb(g){if(!wb(g))return Rn(g);var F=[];for(var C in Object(g))ie.call(g,C)&&C!="constructor"&&F.push(C);return F}function gc(g,F,C,W,Re,oe){var Ue=C&i,tt=g.length,ot=F.length;if(tt!=ot&&!(Ue&&ot>tt))return!1;var Te=oe.get(g);if(Te&&oe.get(F))return Te==F;var wt=-1,At=!0,ut=C&s?new xn:void 0;for(oe.set(g,F),oe.set(F,g);++wt<tt;){var Ot=g[wt],It=F[wt];if(W)var Yt=Ue?W(It,Ot,wt,F,g,oe):W(Ot,It,wt,g,F,oe);if(Yt!==void 0){if(Yt)continue;At=!1;break}if(ut){if(!Ee(F,function(zt,ar){if(!me(ut,ar)&&(Ot===zt||Re(Ot,zt,C,W,oe)))return ut.push(ar)})){At=!1;break}}else if(!(Ot===It||Re(Ot,It,C,W,oe))){At=!1;break}}return oe.delete(g),oe.delete(F),At}function pb(g,F,C,W,Re,oe,Ue){switch(C){case J:if(g.byteLength!=F.byteLength||g.byteOffset!=F.byteOffset)return!1;g=g.buffer,F=F.buffer;case q:return!(g.byteLength!=F.byteLength||!oe(new Ft(g),new Ft(F)));case f:case O:case j:return bc(+g,+F);case w:return g.name==F.name&&g.message==F.message;case S:case o:return g==F+"";case x:var tt=de;case E:var ot=W&i;if(tt||(tt=ue),g.size!=F.size&&!ot)return!1;var Te=Ue.get(g);if(Te)return Te==F;W|=s,Ue.set(g,F);var wt=gc(tt(g),tt(F),W,Re,oe,Ue);return Ue.delete(g),wt;case p:if(Ve)return Ve.call(g)==Ve.call(F)}return!1}function db(g,F,C,W,Re,oe){var Ue=C&i,tt=yc(g),ot=tt.length,Te=yc(F),wt=Te.length;if(ot!=wt&&!Ue)return!1;for(var At=ot;At--;){var ut=tt[At];if(!(Ue?ut in F:ie.call(F,ut)))return!1}var Ot=oe.get(g);if(Ot&&oe.get(F))return Ot==F;var It=!0;oe.set(g,F),oe.set(F,g);for(var Yt=Ue;++At<ot;){ut=tt[At];var zt=g[ut],ar=F[ut];if(W)var Ec=Ue?W(ar,zt,ut,F,g,oe):W(zt,ar,ut,g,F,oe);if(!(Ec===void 0?zt===ar||Re(zt,ar,C,W,oe):Ec)){It=!1;break}Yt||(Yt=ut=="constructor")}if(It&&!Yt){var jn=g.constructor,Un=F.constructor;jn!=Un&&"constructor"in g&&"constructor"in F&&!(typeof jn=="function"&&jn instanceof jn&&typeof Un=="function"&&Un instanceof Un)&&(It=!1)}return oe.delete(g),oe.delete(F),It}function yc(g){return cb(g,Ib,yb)}function Ln(g,F){var C=g.__data__;return mb(F)?C[typeof F=="string"?"string":"hash"]:C.map}function br(g,F){var C=ye(g,F);return hb(C)?C:void 0}function gb(g){var F=ie.call(g,vt),C=g[vt];try{g[vt]=void 0;var W=!0}catch{}var Re=_e.call(g);return W&&(F?g[vt]=C:delete g[vt]),Re}var yb=ir?function(g){return g==null?[]:(g=Object(g),ve(ir(g),function(F){return Ct.call(g,F)}))}:Pb,Wt=Xr;(He&&Wt(new He(new ArrayBuffer(1)))!=J||Ce&&Wt(new Ce)!=x||Ke&&Wt(Ke.resolve())!=A||$e&&Wt(new $e)!=E||Be&&Wt(new Be)!=H)&&(Wt=function(g){var F=Xr(g),C=F==I?g.constructor:void 0,W=C?or(C):"";if(W)switch(W){case We:return J;case Ye:return x;case Je:return A;case Xe:return E;case Ze:return H}return F});function bb(g,F){return F=F??c,!!F&&(typeof g=="number"||ee.test(g))&&g>-1&&g%1==0&&g<F}function mb(g){var F=typeof g;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?g!=="__proto__":g===null}function vb(g){return!!we&&we in g}function wb(g){var F=g&&g.constructor,C=typeof F=="function"&&F.prototype||te;return g===C}function _b(g){return _e.call(g)}function or(g){if(g!=null){try{return be.call(g)}catch{}try{return g+""}catch{}}return""}function bc(g,F){return g===F||g!==g&&F!==F}var Eb=pc(function(){return arguments}())?pc:function(g){return Zr(g)&&ie.call(g,"callee")&&!Ct.call(g,"callee")},Cn=Array.isArray;function Sb(g){return g!=null&&vc(g.length)&&!mc(g)}var Gi=Jr||Fb;function Ob(g,F){return dc(g,F)}function mc(g){if(!wc(g))return!1;var F=Xr(g);return F==v||F==_||F==h||F==y}function vc(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=c}function wc(g){var F=typeof g;return g!=null&&(F=="object"||F=="function")}function Zr(g){return g!=null&&typeof g=="object"}var _c=pe?Le(pe):lb;function Ib(g){return Sb(g)?ab(g):fb(g)}function Pb(){return[]}function Fb(){return!1}t.exports=Ob})(Li,Li.exports);var $g=Li.exports,Bg=Object.defineProperty,_a=Object.getOwnPropertySymbols,Vg=Object.prototype.hasOwnProperty,qg=Object.prototype.propertyIsEnumerable,Ea=(t,e,r)=>e in t?Bg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ft=(t,e)=>{for(var r in e||(e={}))Vg.call(e,r)&&Ea(t,r,e[r]);if(_a)for(var r of _a(e))qg.call(e,r)&&Ea(t,r,e[r]);return t};function Gg(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),c=s.charCodeAt(0);if(r[c]!==255)throw new TypeError(s+" is ambiguous");r[c]=i}var a=t.length,l=t.charAt(0),h=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function O(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var x=0,j=0,K=0,I=_.length;K!==I&&_[K]===0;)K++,x++;for(var A=(I-K)*f+1>>>0,y=new Uint8Array(A);K!==I;){for(var S=_[K],E=0,o=A-1;(S!==0||E<j)&&o!==-1;o--,E++)S+=256*y[o]>>>0,y[o]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");j=E,K++}for(var p=A-j;p!==A&&y[p]===0;)p++;for(var D=l.repeat(x);p<A;++p)D+=t.charAt(y[p]);return D}function w(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var x=0;if(_[x]!==" "){for(var j=0,K=0;_[x]===l;)j++,x++;for(var I=(_.length-x)*h+1>>>0,A=new Uint8Array(I);_[x];){var y=r[_.charCodeAt(x)];if(y===255)return;for(var S=0,E=I-1;(y!==0||S<K)&&E!==-1;E--,S++)y+=a*A[E]>>>0,A[E]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");K=S,x++}if(_[x]!==" "){for(var o=I-K;o!==I&&A[o]===0;)o++;for(var p=new Uint8Array(j+(I-o)),D=j;o!==I;)p[D++]=A[o++];return p}}}function v(_){var x=w(_);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:O,decodeUnsafe:w,decode:v}}var Wg=Gg,Yg=Wg;const Sa=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Jg=t=>new TextEncoder().encode(t),Xg=t=>new TextDecoder().decode(t);class Zg{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Qg{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Oa(this,e)}}class ey{constructor(e){this.decoders=e}or(e){return Oa(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Oa=(t,e)=>new ey(ft(ft({},t.decoders||{[t.prefix]:t}),e.decoders||{[e.prefix]:e}));class ty{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Zg(e,r,n),this.decoder=new Qg(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const _n=({name:t,prefix:e,encode:r,decode:n})=>new ty(t,e,r,n),qr=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Yg(r,e);return _n({prefix:t,name:e,encode:n,decode:s=>Sa(i(s))})},ry=(t,e,r,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;const c=new Uint8Array(s*r/8|0);let a=0,l=0,h=0;for(let f=0;f<s;++f){const O=i[t[f]];if(O===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|O,a+=r,a>=8&&(a-=8,c[h++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return c},ny=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",c=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],c+=8;c>r;)c-=r,s+=e[i&a>>c];if(c&&(s+=e[i&a<<r-c]),n)for(;s.length*r&7;)s+="=";return s},it=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>_n({prefix:e,name:t,encode(i){return ny(i,n,r)},decode(i){return ry(i,n,r,t)}}),iy=_n({prefix:"\0",name:"identity",encode:t=>Xg(t),decode:t=>Jg(t)});var sy=Object.freeze({__proto__:null,identity:iy});const oy=it({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ay=Object.freeze({__proto__:null,base2:oy});const cy=it({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var uy=Object.freeze({__proto__:null,base8:cy});const hy=qr({prefix:"9",name:"base10",alphabet:"0123456789"});var ly=Object.freeze({__proto__:null,base10:hy});const fy=it({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),py=it({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var dy=Object.freeze({__proto__:null,base16:fy,base16upper:py});const gy=it({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yy=it({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),by=it({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),my=it({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vy=it({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wy=it({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_y=it({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ey=it({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Sy=it({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Oy=Object.freeze({__proto__:null,base32:gy,base32upper:yy,base32pad:by,base32padupper:my,base32hex:vy,base32hexupper:wy,base32hexpad:_y,base32hexpadupper:Ey,base32z:Sy});const Iy=qr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Py=qr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Fy=Object.freeze({__proto__:null,base36:Iy,base36upper:Py});const Ay=qr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ny=qr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ry=Object.freeze({__proto__:null,base58btc:Ay,base58flickr:Ny});const xy=it({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ty=it({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ly=it({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Cy=it({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var jy=Object.freeze({__proto__:null,base64:xy,base64pad:Ty,base64url:Ly,base64urlpad:Cy});const Ia=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Uy=Ia.reduce((t,e,r)=>(t[r]=e,t),[]),My=Ia.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Dy(t){return t.reduce((e,r)=>(e+=Uy[r],e),"")}function ky(t){const e=[];for(const r of t){const n=My[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const zy=_n({prefix:"\u{1F680}",name:"base256emoji",encode:Dy,decode:ky});var Hy=Object.freeze({__proto__:null,base256emoji:zy}),Ky=Fa,Pa=128,$y=127,By=~$y,Vy=Math.pow(2,31);function Fa(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Vy;)e[r++]=t&255|Pa,t/=128;for(;t&By;)e[r++]=t&255|Pa,t>>>=7;return e[r]=t|0,Fa.bytes=r-n+1,e}var qy=Ci,Gy=128,Aa=127;function Ci(t,n){var r=0,n=n||0,i=0,s=n,c,a=t.length;do{if(s>=a)throw Ci.bytes=0,new RangeError("Could not decode varint");c=t[s++],r+=i<28?(c&Aa)<<i:(c&Aa)*Math.pow(2,i),i+=7}while(c>=Gy);return Ci.bytes=s-n,r}var Wy=Math.pow(2,7),Yy=Math.pow(2,14),Jy=Math.pow(2,21),Xy=Math.pow(2,28),Zy=Math.pow(2,35),Qy=Math.pow(2,42),e1=Math.pow(2,49),t1=Math.pow(2,56),r1=Math.pow(2,63),n1=function(t){return t<Wy?1:t<Yy?2:t<Jy?3:t<Xy?4:t<Zy?5:t<Qy?6:t<e1?7:t<t1?8:t<r1?9:10},i1={encode:Ky,decode:qy,encodingLength:n1},Na=i1;const Ra=(t,e,r=0)=>(Na.encode(t,e,r),e),xa=t=>Na.encodingLength(t),ji=(t,e)=>{const r=e.byteLength,n=xa(t),i=n+xa(r),s=new Uint8Array(i+r);return Ra(t,s,0),Ra(r,s,n),s.set(e,i),new s1(t,r,e,s)};class s1{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Ta=({name:t,code:e,encode:r})=>new o1(t,e,r);class o1{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?ji(this.code,r):r.then(n=>ji(this.code,n))}else throw Error("Unknown type, must be binary type")}}const La=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),a1=Ta({name:"sha2-256",code:18,encode:La("SHA-256")}),c1=Ta({name:"sha2-512",code:19,encode:La("SHA-512")});var u1=Object.freeze({__proto__:null,sha256:a1,sha512:c1});const Ca=0,h1="identity",ja=Sa;var l1=Object.freeze({__proto__:null,identity:{code:Ca,name:h1,encode:ja,digest:t=>ji(Ca,ja(t))}});new TextEncoder,new TextDecoder;const Ua=ft(ft(ft(ft(ft(ft(ft(ft(ft(ft({},sy),ay),uy),ly),dy),Oy),Fy),Ry),jy),Hy);ft(ft({},u1),l1);function f1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Ma(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Da=Ma("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ui=Ma("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=f1(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),p1=ft({utf8:Da,"utf-8":Da,hex:Ua.base16,latin1:Ui,ascii:Ui,binary:Ui},Ua);function d1(t,e="utf8"){const r=p1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}const ka="wc",g1=2,Mi="core",Bt=`${ka}@${2}:${Mi}:`,y1={name:Mi,logger:"error"},b1={database:":memory:"},m1="crypto",za="client_ed25519_seed",v1=Z.ONE_DAY,w1="keychain",_1="0.3",E1="messages",S1="0.3",O1=Z.SIX_HOURS,I1="publisher",Ha="irn",P1="error",Ka="wss://relay.walletconnect.com",F1="relayer",st={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},A1="_subscription",En={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},$a=Z.ONE_SECOND,N1="2.4.3",R1="0.3",Tt={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},x1="subscription",T1="0.3",L1=Z.FIVE_SECONDS*1e3,C1="pairing",j1="0.3",Gr={wc_pairingDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:0},res:{ttl:Z.ONE_DAY,prompt:!1,tag:0}}},Lt={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},U1="history",M1="0.3",D1="expirer",Et={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},k1="0.3";class z1{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=w1,this.version=_1,this.initialized=!1,this.storagePrefix=Bt,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=V("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Pe.generateChildLogger(r,this.name)}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Xo(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Zo(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}class H1{constructor(e,r,n){this.core=e,this.logger=r,this.name=m1,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=So(i);return Eo(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=Wp();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),c=So(s),a=vi();return await rp(a,i,v1,c)},this.generateSharedKey=(i,s,c)=>{this.isInitialized();const a=this.getPrivateKey(i),l=Yp(a,s);return this.setSymKey(l,c)},this.setSymKey=async(i,s)=>{this.isInitialized();const c=s||Jp(i);return await this.keychain.set(c,i),c},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,c)=>{this.isInitialized();const a=Vo(c),l=Cr(s);if(qo(a)){const w=a.senderPublicKey,v=a.receiverPublicKey;i=await this.generateSharedKey(w,v)}const h=this.getSymKey(i),{type:f,senderPublicKey:O}=a;return Zp({type:f,symKey:h,message:l,senderPublicKey:O})},this.decode=async(i,s,c)=>{this.isInitialized();const a=td(s,c);if(qo(a)){const f=a.receiverPublicKey,O=a.senderPublicKey;i=await this.generateSharedKey(f,O)}const l=this.getSymKey(i),h=Qp({symKey:l,encoded:s});return Xn(h)},this.core=e,this.logger=Pe.generateChildLogger(r,this.name),this.keychain=n||new z1(this.core,this.logger)}get context(){return Pe.getLoggerContext(this.logger)}getPayloadType(e){const r=wi(e);return Dr(r.type)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(za)}catch{e=vi(),await this.keychain.set(za,e)}return d1(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}class K1 extends Dh{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=E1,this.version=S1,this.initialized=!1,this.storagePrefix=Bt,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=bn(i);let c=this.messages.get(n);return typeof c>"u"&&(c={}),typeof c[s]<"u"||(c[s]=i,this.messages.set(n,c),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),c=bn(i);return typeof s[c]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Pe.generateChildLogger(e,this.name),this.core=r}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Xo(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Zo(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}class $1 extends kh{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new at.exports.EventEmitter,this.name=I1,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(n,i,s)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const c=s?.ttl||O1,a=_i(s),l=s?.prompt||!1,h=s?.tag||0,f={topic:n,message:i,opts:{ttl:c,relay:a,prompt:l,tag:h}},O=bn(i);this.queue.set(O,f);try{await await Qo(this.rpcPublish(n,i,c,a,l,h),this.publishTimeout),this.relayer.events.emit(st.publish,f)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(st.connection_stalled);return}this.onPublish(O,f),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(c){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(c),c}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Pe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Pe.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,c){var a,l,h,f;const O={method:Ei(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:c}};return lt((a=O.params)==null?void 0:a.prompt)&&((l=O.params)==null||delete l.prompt),lt((h=O.params)==null?void 0:h.tag)&&((f=O.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:O}),this.relayer.provider.request(O)}onPublish(e,r){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Pr.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class B1{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var V1=Object.defineProperty,q1=Object.defineProperties,G1=Object.getOwnPropertyDescriptors,Ba=Object.getOwnPropertySymbols,W1=Object.prototype.hasOwnProperty,Y1=Object.prototype.propertyIsEnumerable,Va=(t,e,r)=>e in t?V1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Sn=(t,e)=>{for(var r in e||(e={}))W1.call(e,r)&&Va(t,r,e[r]);if(Ba)for(var r of Ba(e))Y1.call(e,r)&&Va(t,r,e[r]);return t},Di=(t,e)=>q1(t,G1(e));class J1 extends Kh{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new B1,this.events=new at.exports.EventEmitter,this.name=x1,this.version=T1,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Bt,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=_i(i),c={topic:n,relay:s};this.pending.set(n,c);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const c=new Z.Watch;c.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),c.stop(this.pendingSubscriptionWatchLabel),i(!0)),c.elapsed(this.pendingSubscriptionWatchLabel)>=L1&&(clearInterval(a),c.stop(this.pendingSubscriptionWatchLabel),s(!1))},this.pollingInterval)}),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Pe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear(),this.initialized=!1}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=_i(n);await this.rpcUnsubscribe(e,r,i);const s=ze("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:Ei(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Qo(this.relayer.provider.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(st.connection_stalled)}return bn(e+this.clientId)}rpcUnsubscribe(e,r,n){const i={method:Ei(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.provider.request(i)}onSubscribe(e,r){this.setSubscription(e,Di(Sn({},r),{id:e})),this.pending.delete(r.topic)}onResubscribe(e,r){this.addSubscription(e,Di(Sn({},r),{id:e})),this.pending.delete(r.topic)}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Sn({},r)),this.topicMap.set(r.topic,e),this.events.emit(Tt.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=V("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Tt.deleted,Di(Sn({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Tt.sync)}async reset(){this.cached.length&&await Promise.all(this.cached.map(async e=>await this.resubscribe(e))),this.events.emit(Tt.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=V("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async resubscribe(e){if(!this.ids.includes(e.id)){const{topic:r,relay:n}=e,i={topic:r,relay:n};this.pending.set(i.topic,i);const s=await this.rpcSubscribe(i.topic,i.relay);this.onResubscribe(s,i)}}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}checkPending(){this.relayer.transportExplicitlyClosed||this.pending.forEach(async e=>{const r=await this.rpcSubscribe(e.topic,e.relay);this.onSubscribe(r,e)})}registerEventListeners(){this.relayer.core.heartbeat.on(Pr.HEARTBEAT_EVENTS.pulse,()=>{this.checkPending()}),this.relayer.on(st.connect,async()=>{await this.onConnect()}),this.relayer.on(st.disconnect,()=>{this.onDisconnect()}),this.events.on(Tt.created,async e=>{const r=Tt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Tt.deleted,async e=>{const r=Tt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var X1=Object.defineProperty,qa=Object.getOwnPropertySymbols,Z1=Object.prototype.hasOwnProperty,Q1=Object.prototype.propertyIsEnumerable,Ga=(t,e,r)=>e in t?X1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,e0=(t,e)=>{for(var r in e||(e={}))Z1.call(e,r)&&Ga(t,r,e[r]);if(qa)for(var r of qa(e))Q1.call(e,r)&&Ga(t,r,e[r]);return t};class t0 extends zh{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new at.exports.EventEmitter,this.name=F1,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Pe.generateChildLogger(e.logger,this.name):rt(Pe.getDefaultLoggerOptions({level:e.logger||P1})),this.messages=new K1(this.logger,e.core),this.subscriber=new J1(this,this.logger),this.publisher=new $1(this,this.logger),this.relayUrl=e?.relayUrl||Ka,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.provider=await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Pe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r})}async subscribe(e,r){this.isInitialized();let n="";return await Promise.all([new Promise(i=>{this.subscriber.once(Tt.created,s=>{s.topic===e&&i()})}),new Promise(async i=>{n=await this.subscriber.subscribe(e,r),i()})]),n}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(st.transport_closed))}async transportOpen(e){if(!this.reconnecting){this.relayUrl=e||this.relayUrl,this.transportExplicitlyClosed=!1,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Tt.resubscribed,()=>{r()})}),await Promise.race([new Promise(async r=>{await this.provider.connect(),this.removeListener(st.transport_closed,this.rejectTransportOpen),r()}),new Promise(r=>this.once(st.transport_closed,this.rejectTransportOpen))])])}catch(r){const n=r;if(!/socket hang up/i.test(n.message))throw r;this.logger.error(r),this.events.emit(st.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||(await this.transportClose(),await new Promise(r=>setTimeout(r,$a)),await this.transportOpen(e))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);return new Vr(new Kg(gd({sdkVersion:N1,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e})))}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,n):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),xi(e)){if(!e.method.endsWith(A1))return;const r=e.params,{topic:n,message:i}=r.data,s={topic:n,message:i};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(e0({type:"event",event:r.id},s)),this.events.emit(r.id,s),await this.acknowledgePayload(e),await this.onMessageEvent(s)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(st.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Ri(e.id,!0);await this.provider.connection.send(r)}registerEventListeners(){this.provider.on(En.payload,e=>this.onProviderPayload(e)),this.provider.on(En.connect,()=>{this.events.emit(st.connect)}),this.provider.on(En.disconnect,()=>{this.events.emit(st.disconnect),this.attemptToReconnect()}),this.provider.on(En.error,e=>this.events.emit(st.error,e)),this.events.on(st.connection_stalled,async()=>{await this.restartTransport()})}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.transportOpen()},Z.toMiliseconds($a))}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}var r0=Object.defineProperty,Wa=Object.getOwnPropertySymbols,n0=Object.prototype.hasOwnProperty,i0=Object.prototype.propertyIsEnumerable,Ya=(t,e,r)=>e in t?r0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ja=(t,e)=>{for(var r in e||(e={}))n0.call(e,r)&&Ya(t,r,e[r]);if(Wa)for(var r of Wa(e))i0.call(e,r)&&Ya(t,r,e[r]);return t};class On extends Hh{constructor(e,r,n,i=Bt,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=R1,this.cached=[],this.initialized=!1,this.storagePrefix=Bt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{Ud(c)?this.map.set(c.id,c):Md(c)?this.map.set(c.topic,c):this.getKey&&c!==null&&!lt(c)&&this.map.set(this.getKey(c),c)}),this.cached=[],this.initialized=!0)},this.set=async(c,a)=>{this.isInitialized(),this.map.has(c)?await this.update(c,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:a}),this.map.set(c,a),await this.persist())},this.get=c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c)),this.getAll=c=>(this.isInitialized(),c?this.values.filter(a=>Object.keys(c).every(l=>$g(a[l],c[l]))):this.values),this.update=async(c,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:a});const l=Ja(Ja({},this.getData(c)),a);this.map.set(c,l),await this.persist()},this.delete=async(c,a)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:a}),this.map.delete(c),await this.persist())},this.logger=Pe.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=V("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=V("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}class s0{constructor(e,r){this.core=e,this.logger=r,this.name=C1,this.version=j1,this.events=new at.exports,this.initialized=!1,this.storagePrefix=Bt,this.ignoredPayloadTypes=[rr],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=vi(),i=await this.core.crypto.setSymKey(n),s=xt(Z.FIVE_MINUTES),c={protocol:Ha},a={topic:i,expiry:s,relay:c,active:!1},l=Pd({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:c});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:l}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:c}=Od(n.uri),a=xt(Z.FIVE_MINUTES),l={topic:i,relay:c,expiry:a,active:!1};return await this.pairings.set(i,l),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:c}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),l},this.activate=async({topic:n})=>{this.isInitialized();const i=xt(Z.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:a,reject:l}=nr();this.events.once(De("pairing_ping",s),({error:h})=>{h?l(h):a()}),await c()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",ze("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const c=vn(i,s),a=await this.core.crypto.encode(n,c),l=Gr[i].req;return this.core.history.set(n,c),await this.core.relayer.publish(n,a,l),c.id},this.sendResult=async(n,i,s)=>{const c=Ri(n,s),a=await this.core.crypto.encode(i,c),l=await this.core.history.get(i,n),h=Gr[l.request.method].res;await this.core.relayer.publish(i,a,h),await this.core.history.resolve(c)},this.sendError=async(n,i,s)=>{const c=wn(n,s),a=await this.core.crypto.encode(i,c),l=await this.core.history.get(i,n),h=Gr[l.request.method]?Gr[l.request.method].res:Gr.unregistered_method.res;await this.core.relayer.publish(i,a,h),await this.core.history.resolve(c)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,ze("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>$t(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n,c=s.method;if(this.pairings.keys.includes(i))switch(c){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,c=(await this.core.history.get(i,s.id)).request.method;if(this.pairings.keys.includes(i))switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(c)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Dt(i)?this.events.emit(De("pairing_ping",s),{}):Pt(i)&&this.events.emit(De("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.sendResult(s,n,!0),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:c}=i;try{if(this.registeredMethods.includes(c))return;const a=ze("WC_METHOD_UNSUPPORTED",c);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(ze("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!bt(n)){const{message:i}=V("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!jd(n.uri)){const{message:i}=V("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!bt(n)){const{message:s}=V("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!bt(n)){const{message:s}=V("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!Ge(n,!1)){const{message:i}=V("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=V("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if($t(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=V("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Pe.generateChildLogger(r,this.name),this.pairings=new On(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Pe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(st.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);xi(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Ti(i)&&(await this.core.history.resolve(i),this.onRelayEventResponse({topic:r,payload:i}))})}registerExpirerEvents(){this.core.expirer.on(Et.expired,async e=>{const{topic:r}=ta(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class o0 extends Mh{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new at.exports.EventEmitter,this.name=U1,this.version=M1,this.cached=[],this.initialized=!1,this.storagePrefix=Bt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const c={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s};this.records.set(c.id,c),this.events.emit(Lt.created,c)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Pt(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(Lt.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Lt.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Pe.generateChildLogger(r,this.name)}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:vn(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=V("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Lt.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=V("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Lt.created,e=>{const r=Lt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Lt.updated,e=>{const r=Lt.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Lt.deleted,e=>{const r=Lt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}class a0 extends $h{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new at.exports.EventEmitter,this.name=D1,this.version=k1,this.cached=[],this.initialized=!1,this.storagePrefix=Bt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),c={target:s,expiry:i};this.expirations.set(s,c),this.checkExpiry(s,c),this.events.emit(Et.created,{target:s,expiration:c})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Et.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Pe.generateChildLogger(r,this.name)}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return yd(e);if(typeof e=="number")return bd(e);const{message:r}=V("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Et.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=V("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=V("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;Z.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Et.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Pr.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Et.created,e=>{const r=Et.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Et.expired,e=>{const r=Et.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Et.deleted,e=>{const r=Et.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}var c0=Object.defineProperty,Xa=Object.getOwnPropertySymbols,u0=Object.prototype.hasOwnProperty,h0=Object.prototype.propertyIsEnumerable,Za=(t,e,r)=>e in t?c0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qa=(t,e)=>{for(var r in e||(e={}))u0.call(e,r)&&Za(t,r,e[r]);if(Xa)for(var r of Xa(e))h0.call(e,r)&&Za(t,r,e[r]);return t};class ki extends Uh{constructor(e){super(e),this.protocol=ka,this.version=g1,this.name=Mi,this.events=new at.exports.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Ka;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:rt(Pe.getDefaultLoggerOptions({level:e?.logger||y1.logger}));this.logger=Pe.generateChildLogger(r,this.name),this.heartbeat=new Pr.HeartBeat,this.crypto=new H1(this,this.logger,e?.keychain),this.history=new o0(this,this.logger),this.expirer=new a0(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new du(Qa(Qa({},b1),e?.storageOptions)),this.relayer=new t0({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new s0(this,this.logger)}static async init(e){const r=new ki(e);return await r.initialize(),r}get context(){return Pe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const l0=ki,ec="wc",tc=2,rc="client",zi=`${ec}@${tc}:${rc}:`,Hi={name:rc,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},f0="proposal",p0="session",In=Z.SEVEN_DAYS,d0="engine",Wr={wc_sessionPropose:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1115}}},Ki={min:Z.FIVE_MINUTES,max:Z.SEVEN_DAYS},g0="request";var y0=Object.defineProperty,b0=Object.defineProperties,m0=Object.getOwnPropertyDescriptors,nc=Object.getOwnPropertySymbols,v0=Object.prototype.hasOwnProperty,w0=Object.prototype.propertyIsEnumerable,ic=(t,e,r)=>e in t?y0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,St=(t,e)=>{for(var r in e||(e={}))v0.call(e,r)&&ic(t,r,e[r]);if(nc)for(var r of nc(e))w0.call(e,r)&&ic(t,r,e[r]);return t},$i=(t,e)=>b0(t,m0(e));class _0 extends Vh{constructor(e){super(e),this.name=d0,this.events=new at.exports,this.initialized=!1,this.ignoredPayloadTypes=[rr],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Wr)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const n=$i(St({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:c,sessionProperties:a,relays:l}=n;let h=i,f,O=!1;if(h&&(O=this.client.core.pairing.pairings.get(h).active),!h||!O){const{topic:A,uri:y}=await this.client.core.pairing.create();h=A,f=y}const w=await this.client.core.crypto.generateKeyPair(),v=St({requiredNamespaces:s,optionalNamespaces:c,relays:l??[{protocol:Ha}],proposer:{publicKey:w,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:_,resolve:x,done:j}=nr();if(this.events.once(De("session_connect"),async({error:A,session:y})=>{if(A)_(A);else if(y){y.self.publicKey=w;const S=$i(St({},y),{requiredNamespaces:y.requiredNamespaces,optionalNamespaces:y.optionalNamespaces});await this.client.session.set(y.topic,S),await this.setExpiry(y.topic,y.expiry),h&&await this.client.core.pairing.updateMetadata({topic:h,metadata:y.peer.metadata}),x(S)}}),!h){const{message:A}=V("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(A)}const K=await this.sendRequest(h,"wc_sessionPropose",v),I=xt(Z.FIVE_MINUTES);return await this.setProposal(K,St({id:K,expiry:I},v)),{uri:f,approval:j}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:c}=r,a=this.client.proposal.get(n);let{pairingTopic:l,proposer:h,requiredNamespaces:f,optionalNamespaces:O}=a;Kr(f)||(f=Rd(s,"approve()"));const w=await this.client.core.crypto.generateKeyPair(),v=h.publicKey,_=await this.client.core.crypto.generateSharedKey(w,v);l&&n&&(await this.client.core.pairing.updateMetadata({topic:l,metadata:h.metadata}),await this.sendResult(n,l,{relay:{protocol:i??"irn"},responderPublicKey:w}),await this.client.proposal.delete(n,ze("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:l}));const x=St({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:f,optionalNamespaces:O,controller:{publicKey:w,metadata:this.client.metadata},expiry:xt(In)},c&&{sessionProperties:c});await this.client.core.relayer.subscribe(_);const j=await this.sendRequest(_,"wc_sessionSettle",x),{done:K,resolve:I,reject:A}=nr();this.events.once(De("session_approve",j),({error:S})=>{S?A(S):I(this.client.session.get(_))});const y=$i(St({},x),{topic:_,acknowledged:!1,self:x.controller,peer:{publicKey:h.publicKey,metadata:h.metadata},controller:w});return await this.client.session.set(_,y),await this.setExpiry(_,xt(In)),{topic:_,acknowledged:K}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,ze("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:i}),{done:c,resolve:a,reject:l}=nr();return this.events.once(De("session_update",s),({error:h})=>{h?l(h):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:c}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest(n,"wc_sessionExtend",{}),{done:s,resolve:c,reject:a}=nr();return this.events.once(De("session_extend",i),({error:l})=>{l?a(l):c()}),await this.setExpiry(n,xt(In)),{acknowledged:s}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:c}=r,a=await this.sendRequest(s,"wc_sessionRequest",{request:i,chainId:n},c),{done:l,resolve:h,reject:f}=nr(c);return this.events.once(De("session_request",a),({error:O,result:w})=>{O?f(O):h(w)}),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n}),await l()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;Dt(i)?await this.sendResult(s,n,i.result):Pt(i)&&await this.sendError(s,n,i.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest(n,"wc_sessionPing",{}),{done:s,resolve:c,reject:a}=nr();this.events.once(De("session_ping",i),({error:l})=>{l?a(l):c()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest(n,"wc_sessionEvent",{event:i,chainId:s})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest(n,"wc_sessionDelete",ze("USER_DISCONNECTED")),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Ld(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,ze("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.deleteSymKey(r),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,ze("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=Wr.wc_sessionRequest.req.ttl,{id:i,topic:s,params:c}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:c}),n&&this.client.core.expirer.set(i,xt(n))},this.sendRequest=async(r,n,i,s)=>{const c=vn(n,i),a=await this.client.core.crypto.encode(r,c),l=Wr[n].req;return s&&(l.ttl=s),this.client.core.history.set(r,c),this.client.core.relayer.publish(r,a,l),c.id},this.sendResult=async(r,n,i)=>{const s=Ri(r,i),c=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),l=Wr[a.request.method].res;this.client.core.relayer.publish(n,c,l),await this.client.core.history.resolve(s)},this.sendError=async(r,n,i)=>{const s=wn(r,i),c=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),l=Wr[a.request.method].res;this.client.core.relayer.publish(n,c,l),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{$t(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{$t(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(St({},n.params));const c=xt(Z.FIVE_MINUTES),a=St({id:s,pairingTopic:r,expiry:c},i);await this.setProposal(s,a),this.client.events.emit("session_proposal",{id:s,params:a})}catch(c){await this.sendError(s,r,c),this.client.logger.error(c)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(Dt(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const c=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:c});const a=c.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const l=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const h=await this.client.core.crypto.generateSharedKey(a,l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:h});const f=await this.client.core.relayer.subscribe(h);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:f}),await this.client.core.pairing.activate({topic:r})}else Pt(n)&&(await this.client.proposal.delete(i,ze("USER_DISCONNECTED")),this.events.emit(De("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:c,controller:a,expiry:l,namespaces:h,requiredNamespaces:f,optionalNamespaces:O,sessionProperties:w}=n.params,v=St({topic:r,relay:c,expiry:l,namespaces:h,acknowledged:!0,requiredNamespaces:f,optionalNamespaces:O,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},w&&{sessionProperties:w});await this.sendResult(n.id,r,!0),this.events.emit(De("session_connect"),{session:v})}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Dt(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(De("session_approve",i),{})):Pt(n)&&(await this.client.session.delete(r,ze("USER_DISCONNECTED")),this.events.emit(De("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidUpdate(St({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult(s,r,!0),this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(c){await this.sendError(s,r,c),this.client.logger.error(c)}},this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;Dt(n)?this.events.emit(De("session_update",i),{}):Pt(n)&&this.events.emit(De("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,xt(In)),await this.sendResult(i,r,!0),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;Dt(n)?this.events.emit(De("session_extend",i),{}):Pt(n)&&this.events.emit(De("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{Dt(n)?this.events.emit(De("session_ping",i),{}):Pt(n)&&this.events.emit(De("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),this.client.core.relayer.once(st.publish,async()=>{await this.deleteSession(r)}),await this.sendResult(i,r,!0),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(St({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.client.events.emit("session_request",{id:i,topic:r,params:s})}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;Dt(n)?this.events.emit(De("session_request",i),{result:n.result}):Pt(n)&&this.events.emit(De("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidEmit(St({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s})}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.isValidConnect=async r=>{if(!bt(r)){const{message:l}=V("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:c,relays:a}=r;if(lt(n)||await this.isValidPairingTopic(n),!Vd(a,!0)){const{message:l}=V("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(l)}!lt(i)&&Kr(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!lt(s)&&Kr(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),lt(c)||this.validateSessionProps(c,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=Bd(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!bt(r))throw new Error(V("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:c}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),l=mn(i,"approve()");if(l)throw new Error(l.message);const h=Ii(a.requiredNamespaces,i,"approve()","requiredNamespaces");if(h)throw new Error(h.message);if(!Ge(s,!0)){const{message:f}=V("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(f)}if(Object.keys(i).length>Object.keys(a.requiredNamespaces).length){const f=Object.keys(a.optionalNamespaces).filter(v=>i[v]),O={};for(const v in a.optionalNamespaces)f.includes(v)&&(O[v]=a.optionalNamespaces[v]);const w=Ii(O,i,"approve()","optionalNamespaces");if(w)throw new Error(w.message)}lt(c)||this.validateSessionProps(c,"sessionProperties")},this.isValidReject=async r=>{if(!bt(r)){const{message:s}=V("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!Gd(i)){const{message:s}=V("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!bt(r)){const{message:h}=V("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(h)}const{relay:n,controller:i,namespaces:s,expiry:c}=r;if(!oa(n)){const{message:h}=V("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const a=Dd(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const l=mn(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);if($t(c)){const{message:h}=V("EXPIRED","onSessionSettleRequest()");throw new Error(h)}},this.isValidUpdate=async r=>{if(!bt(r)){const{message:l}=V("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(l)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),c=mn(i,"update()");if(c)throw new Error(c.message);const a=Ii(s.requiredNamespaces,i,"update()","requiredNamespaces");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!bt(r)){const{message:i}=V("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!bt(r)){const{message:l}=V("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(l)}const{topic:n,request:i,chainId:s,expiry:c}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!aa(a,s)){const{message:l}=V("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(l)}if(!Wd(i)){const{message:l}=V("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(l)}if(!Xd(a,s,i.method)){const{message:l}=V("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(l)}if(c&&!Qd(c,Ki)){const{message:l}=V("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${Ki.min} and ${Ki.max}`);throw new Error(l)}},this.isValidRespond=async r=>{if(!bt(r)){const{message:s}=V("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!Yd(i)){const{message:s}=V("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!bt(r)){const{message:i}=V("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!bt(r)){const{message:a}=V("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:c}=this.client.session.get(n);if(!aa(c,s)){const{message:a}=V("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!Jd(i)){const{message:a}=V("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!Zd(c,s,i.name)){const{message:a}=V("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!bt(r)){const{message:i}=V("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!Ge(i,!1)){const{message:s}=V("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(st.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);xi(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Ti(i)&&(await this.client.core.history.resolve(i),this.onRelayEventResponse({topic:r,payload:i}))})}registerExpirerEvents(){this.client.core.expirer.on(Et.expired,async e=>{const{topic:r,id:n}=ta(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,V("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!Ge(e,!1)){const{message:r}=V("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=V("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if($t(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=V("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Ge(e,!1)){const{message:r}=V("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=V("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if($t(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=V("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Ge(e,!1)){const{message:r}=V("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=V("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!qd(e)){const{message:r}=V("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=V("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if($t(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=V("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class E0 extends On{constructor(e,r){super(e,r,f0,zi),this.core=e,this.logger=r}}class S0 extends On{constructor(e,r){super(e,r,p0,zi),this.core=e,this.logger=r}}class O0 extends On{constructor(e,r){super(e,r,g0,zi),this.core=e,this.logger=r}}class Bi extends Bh{constructor(e){super(e),this.protocol=ec,this.version=tc,this.name=Hi.name,this.events=new at.exports.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=e?.name||Hi.name,this.metadata=e?.metadata||ld();const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:rt(Pe.getDefaultLoggerOptions({level:e?.logger||Hi.logger}));this.core=e?.core||new l0(e),this.logger=Pe.generateChildLogger(r,this.name),this.session=new S0(this.core,this.logger),this.proposal=new E0(this.core,this.logger),this.pendingRequest=new O0(this.core,this.logger),this.engine=new _0(this)}static async init(e){const r=new Bi(e);return await r.initialize(),r}get context(){return Pe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var Vi={exports:{}};(function(t,e){var r=typeof self<"u"?self:Me,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(c){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function l(d){return d&&DataView.prototype.isPrototypeOf(d)}if(a.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(d){return d&&h.indexOf(Object.prototype.toString.call(d))>-1};function O(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function w(d){return typeof d!="string"&&(d=String(d)),d}function v(d){var m={next:function(){var U=d.shift();return{done:U===void 0,value:U}}};return a.iterable&&(m[Symbol.iterator]=function(){return m}),m}function _(d){this.map={},d instanceof _?d.forEach(function(m,U){this.append(U,m)},this):Array.isArray(d)?d.forEach(function(m){this.append(m[0],m[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(m){this.append(m,d[m])},this)}_.prototype.append=function(d,m){d=O(d),m=w(m);var U=this.map[d];this.map[d]=U?U+", "+m:m},_.prototype.delete=function(d){delete this.map[O(d)]},_.prototype.get=function(d){return d=O(d),this.has(d)?this.map[d]:null},_.prototype.has=function(d){return this.map.hasOwnProperty(O(d))},_.prototype.set=function(d,m){this.map[O(d)]=w(m)},_.prototype.forEach=function(d,m){for(var U in this.map)this.map.hasOwnProperty(U)&&d.call(m,this.map[U],U,this)},_.prototype.keys=function(){var d=[];return this.forEach(function(m,U){d.push(U)}),v(d)},_.prototype.values=function(){var d=[];return this.forEach(function(m){d.push(m)}),v(d)},_.prototype.entries=function(){var d=[];return this.forEach(function(m,U){d.push([U,m])}),v(d)},a.iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);function x(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function j(d){return new Promise(function(m,U){d.onload=function(){m(d.result)},d.onerror=function(){U(d.error)}})}function K(d){var m=new FileReader,U=j(m);return m.readAsArrayBuffer(d),U}function I(d){var m=new FileReader,U=j(m);return m.readAsText(d),U}function A(d){for(var m=new Uint8Array(d),U=new Array(m.length),M=0;M<m.length;M++)U[M]=String.fromCharCode(m[M]);return U.join("")}function y(d){if(d.slice)return d.slice(0);var m=new Uint8Array(d.byteLength);return m.set(new Uint8Array(d)),m.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:a.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:a.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():a.arrayBuffer&&a.blob&&l(d)?(this._bodyArrayBuffer=y(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||f(d))?this._bodyArrayBuffer=y(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var d=x(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?x(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(K)}),this.text=function(){var d=x(this);if(d)return d;if(this._bodyBlob)return I(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function o(d){var m=d.toUpperCase();return E.indexOf(m)>-1?m:d}function p(d,m){m=m||{};var U=m.body;if(d instanceof p){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,m.headers||(this.headers=new _(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!U&&d._bodyInit!=null&&(U=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new _(m.headers)),this.method=o(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&U)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(U)}p.prototype.clone=function(){return new p(this,{body:this._bodyInit})};function D(d){var m=new FormData;return d.trim().split("&").forEach(function(U){if(U){var M=U.split("="),L=M.shift().replace(/\+/g," "),T=M.join("=").replace(/\+/g," ");m.append(decodeURIComponent(L),decodeURIComponent(T))}}),m}function H(d){var m=new _,U=d.replace(/\r?\n[\t ]+/g," ");return U.split(/\r?\n/).forEach(function(M){var L=M.split(":"),T=L.shift().trim();if(T){var k=L.join(":").trim();m.append(T,k)}}),m}S.call(p.prototype);function q(d,m){m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in m?m.statusText:"OK",this.headers=new _(m.headers),this.url=m.url||"",this._initBody(d)}S.call(q.prototype),q.prototype.clone=function(){return new q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},q.error=function(){var d=new q(null,{status:0,statusText:""});return d.type="error",d};var J=[301,302,303,307,308];q.redirect=function(d,m){if(J.indexOf(m)===-1)throw new RangeError("Invalid status code");return new q(null,{status:m,headers:{location:d}})},c.DOMException=s.DOMException;try{new c.DOMException}catch{c.DOMException=function(d,m){this.message=d,this.name=m;var U=Error(d);this.stack=U.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function X(d,m){return new Promise(function(U,M){var L=new p(d,m);if(L.signal&&L.signal.aborted)return M(new c.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function k(){T.abort()}T.onload=function(){var z={status:T.status,statusText:T.statusText,headers:H(T.getAllResponseHeaders()||"")};z.url="responseURL"in T?T.responseURL:z.headers.get("X-Request-URL");var Q="response"in T?T.response:T.responseText;U(new q(Q,z))},T.onerror=function(){M(new TypeError("Network request failed"))},T.ontimeout=function(){M(new TypeError("Network request failed"))},T.onabort=function(){M(new c.DOMException("Aborted","AbortError"))},T.open(L.method,L.url,!0),L.credentials==="include"?T.withCredentials=!0:L.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&a.blob&&(T.responseType="blob"),L.headers.forEach(function(z,Q){T.setRequestHeader(Q,z)}),L.signal&&(L.signal.addEventListener("abort",k),T.onreadystatechange=function(){T.readyState===4&&L.signal.removeEventListener("abort",k)}),T.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return X.polyfill=!0,s.fetch||(s.fetch=X,s.Headers=_,s.Request=p,s.Response=q),c.Headers=_,c.Request=p,c.Response=q,c.fetch=X,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(Vi,Vi.exports);var sc=pt(Vi.exports);const oc={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},ac=10;class Pn{constructor(e){if(this.url=e,this.events=new at.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!ba(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const n=Cr(e),i=await(await sc(this.url,Object.assign(Object.assign({},oc),{body:n}))).json();this.onPayload({data:i})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!ba(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{const r=Cr({id:1,jsonrpc:"2.0",method:"test",params:[]});await sc(e,Object.assign(Object.assign({},oc),{body:r})),this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Xn(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=wn(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return la(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>ac&&this.events.setMaxListeners(ac)}}function Vt(t,e){let r;return e.rpcMap&&(r=e.rpcMap[cc(t)]),r}function cc(t){return Number(t.split(":")[1])}function I0(t,e){if(!e.includes(t))throw new Error(`Chain '${t}' not approved. Please use one of the following: ${e.toString()}`)}function P0(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}const Fn=(t,e)=>{const r=n=>{n.request!==e.request||n.topic!==e.topic||(t.events.removeListener("session_request_sent",r),F0())};t.on("session_request_sent",r)};function F0(){if(typeof window<"u")try{const t=window.localStorage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(t){const e=JSON.parse(t);window.open(e.href,"_self","noreferrer noopener")}}catch(t){console.error(t)}}const uc="error",A0="wss://relay.walletconnect.com",N0="wc",R0="universal_provider",hc=`${N0}@${2}:${R0}:`,Yr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};class x0{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){var r;switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?(Fn(this.client,e),await this.client.request(e)):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){const n=parseInt(e);if(!this.httpProviders[e]){const i=r||Vt(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(n,i)}this.chainId=n,this.events.emit(Yr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Vt(`${this.name}:${e}`,this.namespace);return typeof n>"u"?void 0:new Vr(new Pn(n))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(cc(r))}),e}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}handleSwitchChain(e){const r=parseInt(e,16),n=`${this.name}:${r}`;I0(n,this.namespace.chains),this.setDefaultChain(`${r}`)}}class T0{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(Fn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Vt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Yr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Vt(e,this.namespace);return typeof n>"u"?void 0:new Vr(new Pn(n))}}class L0{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(Fn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Vt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Yr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Vt(e,this.namespace);return typeof n>"u"?void 0:new Vr(new Pn(n))}}class C0{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(Fn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Vt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Yr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Vt(e,this.namespace);return typeof n>"u"?void 0:new Vr(new Pn(n))}}var j0=Object.defineProperty,U0=Object.defineProperties,M0=Object.getOwnPropertyDescriptors,lc=Object.getOwnPropertySymbols,D0=Object.prototype.hasOwnProperty,k0=Object.prototype.propertyIsEnumerable,fc=(t,e,r)=>e in t?j0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,An=(t,e)=>{for(var r in e||(e={}))D0.call(e,r)&&fc(t,r,e[r]);if(lc)for(var r of lc(e))k0.call(e,r)&&fc(t,r,e[r]);return t},qi=(t,e)=>U0(t,M0(e));class Nn{constructor(e){this.events=new at.exports,this.rpcProviders={},this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:rt(Pe.getDefaultLoggerOptions({level:e?.logger||uc}))}static async init(e){const r=new Nn(e);return await r.initialize(),r}async request(e,r){const[n,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:An({},e),chainId:`${n}:${i}`,topic:this.session.topic})}sendAsync(e,r,n){this.request(e,n).then(i=>r(null,i)).catch(i=>r(i,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:ze("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});return r&&(this.uri=r,this.events.emit("display_uri",r)),this.session=await n(),this.createProviders(),this.onConnect(),this.session}setDefaultChain(e,r){try{const[n,i]=this.validateChain(e);this.getProvider(n).setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Hr(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Bi.init({logger:this.providerOpts.logger||uc,relayUrl:this.providerOpts.relayUrl||A0,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");Object.keys(this.namespaces).forEach(e=>{var r,n,i;const s=((r=this.session)==null?void 0:r.namespaces[e].accounts)||[],c=P0(s),a=qi(An({},Object.assign(this.namespaces[e],(i=(n=this.optionalNamespaces)==null?void 0:n[e])!=null?i:{})),{accounts:s,chains:c});switch(e){case"eip155":this.rpcProviders[e]=new x0({client:this.client,namespace:a,events:this.events});break;case"solana":this.rpcProviders[e]=new T0({client:this.client,namespace:a,events:this.events});break;case"cosmos":this.rpcProviders[e]=new L0({client:this.client,namespace:a,events:this.events});break;case"polkadot":break;case"cip34":this.rpcProviders[e]=new C0({client:this.client,namespace:a,events:this.events});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:n}=r;n.name==="accountsChanged"?this.events.emit("accountsChanged",n.data):n.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(n.name,n.data),this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n;const{namespaces:i}=r,s=(n=this.client)==null?void 0:n.session.get(e);this.session=qi(An({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",qi(An({},ze("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Yr.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i}=e;if(!r||!Object.keys(r).length)throw new Error("Namespaces must be not empty");this.namespaces=r,this.optionalNamespaces=n,this.sessionProperties=i,this.persist("namespaces",r),this.persist("optionalNamespaces",n)}validateChain(e){const[r,n]=e?.split(":")||["",""];if(r&&!Object.keys(this.namespaces).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=Object.keys(this.namespaces)[0],s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){const[n,i]=this.validateChain(e);r||this.getProvider(n).setDefaultChain(i),this.namespaces[n].defaultChain=i,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i)}onConnect(){this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${hc}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${hc}/${e}`)}}const z0=Nn;Ae.UniversalProvider=z0,Ae.default=Nn,Object.defineProperty(Ae,"__esModule",{value:!0})})})(Yi,Yi.exports);const Rb=Ab(Yi.exports);var xb=globalThis&&globalThis.__awaiter||function(Jt,vr,Ae,Me){function pt(re){return re instanceof Ae?re:new Ae(function(_t){_t(re)})}return new(Ae||(Ae=Promise))(function(re,_t){function Xt(rt){try{fe(Me.next(rt))}catch(jt){_t(jt)}}function wr(rt){try{fe(Me.throw(rt))}catch(jt){_t(jt)}}function fe(rt){rt.done?re(rt.value):pt(rt.value).then(Xt,wr)}fe((Me=Me.apply(Jt,vr||[])).next())})},Tb=globalThis&&globalThis.__generator||function(Jt,vr){var Ae={label:0,sent:function(){if(re[0]&1)throw re[1];return re[1]},trys:[],ops:[]},Me,pt,re,_t;return _t={next:Xt(0),throw:Xt(1),return:Xt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Xt(fe){return function(rt){return wr([fe,rt])}}function wr(fe){if(Me)throw new TypeError("Generator is already executing.");for(;_t&&(_t=0,fe[0]&&(Ae=0)),Ae;)try{if(Me=1,pt&&(re=fe[0]&2?pt.return:fe[0]?pt.throw||((re=pt.return)&&re.call(pt),0):pt.next)&&!(re=re.call(pt,fe[1])).done)return re;switch(pt=0,re&&(fe=[fe[0]&2,re.value]),fe[0]){case 0:case 1:re=fe;break;case 4:return Ae.label++,{value:fe[1],done:!1};case 5:Ae.label++,pt=fe[1],fe=[0];continue;case 7:fe=Ae.ops.pop(),Ae.trys.pop();continue;default:if(re=Ae.trys,!(re=re.length>0&&re[re.length-1])&&(fe[0]===6||fe[0]===2)){Ae=0;continue}if(fe[0]===3&&(!re||fe[1]>re[0]&&fe[1]<re[3])){Ae.label=fe[1];break}if(fe[0]===6&&Ae.label<re[1]){Ae.label=re[1],re=fe;break}if(re&&Ae.label<re[2]){Ae.label=re[2],Ae.ops.push(fe);break}re[2]&&Ae.ops.pop(),Ae.trys.pop();continue}fe=vr.call(Jt,Ae)}catch(rt){fe=[6,rt],pt=0}finally{Me=re=0}if(fe[0]&5)throw fe[1];return{value:fe[0]?fe[1]:void 0,done:!0}}},Cb={1:"https://ethereum.publicnode.com",5:"https://eth-goerli.g.alchemy.com/v2/yVhq9zPJorAWsw-F87fEabSUl7cCU6z4",137:"https://polygon-rpc.com/",80001:"https://polygon-mumbai.g.alchemy.com/v2/rVI6pOV4irVsrw20cJxc1fxK_1cSeiY0",56:"https://bsc-dataseed.binance.org/",43114:"https://api.avax.network/ext/bc/C/rpc",250:"https://rpc.fantom.network/",25:"https://evm-cronos.crypto.org",42161:"https://arb1.arbitrum.io/rpc",10:"https://mainnet.optimism.io"},jb=["eip155:1","eip155:137","eip155:250","eip155:25","eip155:42161","eip155:10"],Ub=function(){return xb(void 0,void 0,void 0,function(){return Tb(this,function(Jt){switch(Jt.label){case 0:return[4,Rb.init({projectId:"2ec7ead81da1226703ad789c0b2f7b30",logger:"debug",relayUrl:"wss://relay.walletconnect.com"})];case 1:return[2,Jt.sent()]}})})};export{Cb as CUSTOM_RPCS_FOR_WC_V2,jb as WC_V2_CHAINS,Ub as getWalletConnectV2ProviderInstance};
