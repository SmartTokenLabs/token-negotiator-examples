import{d as vr,g as Pb}from"./index.9dc9b16c.js";var $i={exports:{}},qi,wc;function Fb(){return wc||(wc=1,qi=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),qi}(function(Jt,mr){(function(Ae,Me){Me(mr)})(vr,function(Ae){var Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof vr<"u"?vr:typeof self<"u"?self:{};function pt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function re(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}function _t(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Xt=wr;function wr(t,e,r){var n=r&&r.stringify||_t,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var c=new Array(s);c[0]=n(t);for(var a=1;a<s;a++)c[a]=n(e[a]);return c.join(" ")}if(typeof t!="string")return t;var l=e.length;if(l===0)return t;for(var h="",f=1-i,O=-1,w=t&&t.length||0,m=0;m<w;){if(t.charCodeAt(m)===37&&m+1<w){switch(O=O>-1?O:0,t.charCodeAt(m+1)){case 100:case 102:if(f>=l||e[f]==null)break;O<m&&(h+=t.slice(O,m)),h+=Number(e[f]),O=m+2,m++;break;case 105:if(f>=l||e[f]==null)break;O<m&&(h+=t.slice(O,m)),h+=Math.floor(Number(e[f])),O=m+2,m++;break;case 79:case 111:case 106:if(f>=l||e[f]===void 0)break;O<m&&(h+=t.slice(O,m));var _=typeof e[f];if(_==="string"){h+="'"+e[f]+"'",O=m+2,m++;break}if(_==="function"){h+=e[f].name||"<anonymous>",O=m+2,m++;break}h+=n(e[f]),O=m+2,m++;break;case 115:if(f>=l)break;O<m&&(h+=t.slice(O,m)),h+=String(e[f]),O=m+2,m++;break;case 37:O<m&&(h+=t.slice(O,m)),h+="%",O=m+2,m++,f--;break}++f}++m}return O===-1?t:(O<w&&(h+=t.slice(O)),h)}const fe=Xt;var rt=Nt;const Ut=Rc().console||{},_c={mapHttpRequest:Qr,mapHttpResponse:Qr,wrapRequestSerializer:Cn,wrapResponseSerializer:Cn,wrapErrorSerializer:Cn,req:Qr,res:Qr,err:Pc};function Ec(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Nt(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||Ut;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=Ec(t.browser.serialize,n);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const c=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const a=t.level||"info",l=Object.create(r);l.log||(l.log=_r),Object.defineProperty(l,"levelVal",{get:f}),Object.defineProperty(l,"level",{get:O,set:w});const h={transmit:e,serialize:i,asObject:t.browser.asObject,levels:c,timestamp:Fc(t)};l.levels=Nt.levels,l.level=a,l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=_r,l.serializers=n,l._serialize=i,l._stdErrSerialize=s,l.child=m,e&&(l._logEvent=Un());function f(){return this.level==="silent"?1/0:this.levels.values[this.level]}function O(){return this._level}function w(_){if(_!=="silent"&&!this.levels.values[_])throw Error("unknown level "+_);this._level=_,cr(h,l,"error","log"),cr(h,l,"fatal","error"),cr(h,l,"warn","error"),cr(h,l,"info","log"),cr(h,l,"debug","log"),cr(h,l,"trace","log")}function m(_,x){if(!_)throw new Error("missing bindings for child Pino");x=x||{},i&&_.serializers&&(x.serializers=_.serializers);const U=x.serializers;if(i&&U){var H=Object.assign({},n,U),I=t.browser.serialize===!0?Object.keys(H):i;delete _.serializers,Zr([_],I,H,this._stdErrSerialize)}function A(y){this._childLevel=(y._childLevel|0)+1,this.error=ur(y,_,"error"),this.fatal=ur(y,_,"fatal"),this.warn=ur(y,_,"warn"),this.info=ur(y,_,"info"),this.debug=ur(y,_,"debug"),this.trace=ur(y,_,"trace"),H&&(this.serializers=H,this._serialize=I),e&&(this._logEvent=Un([].concat(y._logEvent.bindings,_)))}return A.prototype=this,new A(this)}return l}Nt.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},Nt.stdSerializers=_c,Nt.stdTimeFunctions=Object.assign({},{nullTime:Gi,epochTime:Wi,unixTime:Ac,isoTime:Nc});function cr(t,e,r,n){const i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?_r:i[r]?i[r]:Ut[r]||Ut[n]||_r,Sc(t,e,r)}function Sc(t,e,r){!t.transmit&&e[r]===_r||(e[r]=function(n){return function(){const i=t.timestamp(),s=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Ut?Ut:this;for(var a=0;a<s.length;a++)s[a]=arguments[a];if(t.serialize&&!t.asObject&&Zr(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(c,Oc(this,r,s,i)):n.apply(c,s),t.transmit){const l=t.transmit.level||e.level,h=Nt.levels.values[l],f=Nt.levels.values[r];if(f<h)return;Ic(this,{ts:i,methodLevel:r,methodValue:f,transmitLevel:l,transmitValue:Nt.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},s)}}}(e[r]))}function Oc(t,e,r,n){t._serialize&&Zr(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let s=i[0];const c={};n&&(c.time=n),c.level=Nt.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(c,i.shift());s=i.length?fe(i.shift(),i):void 0}else typeof s=="string"&&(s=fe(i.shift(),i));return s!==void 0&&(c.msg=s),c}function Zr(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=Nt.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function ur(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function Ic(t,e,r){const n=e.send,i=e.ts,s=e.methodLevel,c=e.methodValue,a=e.val,l=t._logEvent.bindings;Zr(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(h){return l.indexOf(h)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=c,n(s,t._logEvent,a),t._logEvent=Un(l)}function Un(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Pc(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function Fc(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Gi:Wi}function Qr(){return{}}function Cn(t){return t}function _r(){}function Gi(){return!1}function Wi(){return Date.now()}function Ac(){return Math.round(Date.now()/1e3)}function Nc(){return new Date(Date.now()).toISOString()}function Rc(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}var at={exports:{}},hr=typeof Reflect=="object"?Reflect:null,Yi=hr&&typeof hr.apply=="function"?hr.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},en;hr&&typeof hr.ownKeys=="function"?en=hr.ownKeys:Object.getOwnPropertySymbols?en=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:en=function(t){return Object.getOwnPropertyNames(t)};function xc(t){console&&console.warn&&console.warn(t)}var Ji=Number.isNaN||function(t){return t!==t};function Fe(){Fe.init.call(this)}at.exports=Fe,at.exports.once=Uc,Fe.EventEmitter=Fe,Fe.prototype._events=void 0,Fe.prototype._eventsCount=0,Fe.prototype._maxListeners=void 0;var Xi=10;function tn(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Fe,"defaultMaxListeners",{enumerable:!0,get:function(){return Xi},set:function(t){if(typeof t!="number"||t<0||Ji(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Xi=t}}),Fe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Fe.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Ji(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Zi(t){return t._maxListeners===void 0?Fe.defaultMaxListeners:t._maxListeners}Fe.prototype.getMaxListeners=function(){return Zi(this)},Fe.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=t==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var c=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw c.context=s,c}var a=i[t];if(a===void 0)return!1;if(typeof a=="function")Yi(a,this,e);else for(var l=a.length,h=ns(a,l),r=0;r<l;++r)Yi(h[r],this,e);return!0};function Qi(t,e,r,n){var i,s,c;if(tn(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),c=s[e]),c===void 0)c=s[e]=r,++t._eventsCount;else if(typeof c=="function"?c=s[e]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),i=Zi(t),i>0&&c.length>i&&!c.warned){c.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=c.length,xc(a)}return t}Fe.prototype.addListener=function(t,e){return Qi(this,t,e,!1)},Fe.prototype.on=Fe.prototype.addListener,Fe.prototype.prependListener=function(t,e){return Qi(this,t,e,!0)};function Tc(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function es(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Tc.bind(n);return i.listener=r,n.wrapFn=i,i}Fe.prototype.once=function(t,e){return tn(e),this.on(t,es(this,t,e)),this},Fe.prototype.prependOnceListener=function(t,e){return tn(e),this.prependListener(t,es(this,t,e)),this},Fe.prototype.removeListener=function(t,e){var r,n,i,s,c;if(tn(e),n=this._events,n===void 0)return this;if(r=n[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){c=r[s].listener,i=s;break}if(i<0)return this;i===0?r.shift():Lc(r,i),r.length===1&&(n[t]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",t,c||e)}return this},Fe.prototype.off=Fe.prototype.removeListener,Fe.prototype.removeAllListeners=function(t){var e,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var i=Object.keys(r),s;for(n=0;n<i.length;++n)s=i[n],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this};function ts(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?jc(i):ns(i,i.length)}Fe.prototype.listeners=function(t){return ts(this,t,!0)},Fe.prototype.rawListeners=function(t){return ts(this,t,!1)},Fe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):rs.call(t,e)},Fe.prototype.listenerCount=rs;function rs(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Fe.prototype.eventNames=function(){return this._eventsCount>0?en(this._events):[]};function ns(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Lc(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function jc(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Uc(t,e){return new Promise(function(r,n){function i(c){t.removeListener(e,s),n(c)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}is(t,e,s,{once:!0}),e!=="error"&&Cc(t,i,{once:!0})})}function Cc(t,e,r){typeof t.on=="function"&&is(t,"error",e,r)}function is(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var rn={};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var Mn=function(t,e){return Mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Mn(t,e)};function Mc(t,e){Mn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var kn=function(){return kn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},kn.apply(this,arguments)};function kc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Dc(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function zc(t,e){return function(r,n){e(r,n,t)}}function Kc(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Hc(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function a(f){try{h(n.next(f))}catch(O){c(O)}}function l(f){try{h(n.throw(f))}catch(O){c(O)}}function h(f){f.done?s(f.value):i(f.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}function Bc(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(h){return function(f){return l([h,f])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Vc(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function qc(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Dn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ss(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function $c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ss(arguments[e]));return t}function Gc(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,a=s.length;c<a;c++,i++)n[i]=s[c];return n}function Er(t){return this instanceof Er?(this.v=t,this):new Er(t)}function Wc(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(w){n[w]&&(i[w]=function(m){return new Promise(function(_,x){s.push([w,m,_,x])>1||a(w,m)})})}function a(w,m){try{l(n[w](m))}catch(_){O(s[0][3],_)}}function l(w){w.value instanceof Er?Promise.resolve(w.value.v).then(h,f):O(s[0][2],w)}function h(w){a("next",w)}function f(w){a("throw",w)}function O(w,m){w(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Yc(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:Er(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function Jc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Dn=="function"?Dn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(a,l){c=t[s](c),i(a,l,c.done,c.value)})}}function i(s,c,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},c)}}function Xc(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Zc(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Qc(t){return t&&t.__esModule?t:{default:t}}function eu(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function tu(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var ru=Object.freeze({__proto__:null,__extends:Mc,get __assign(){return kn},__rest:kc,__decorate:Dc,__param:zc,__metadata:Kc,__awaiter:Hc,__generator:Bc,__createBinding:Vc,__exportStar:qc,__values:Dn,__read:ss,__spread:$c,__spreadArrays:Gc,__await:Er,__asyncGenerator:Wc,__asyncDelegator:Yc,__asyncValues:Jc,__makeTemplateObject:Xc,__importStar:Zc,__importDefault:Qc,__classPrivateFieldGet:eu,__classPrivateFieldSet:tu}),os=re(ru),Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});function nu(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}Sr.safeJsonParse=nu;function iu(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}Sr.safeJsonStringify=iu;var nn={exports:{}},as;function su(){return as||(as=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Me<"u"&&Me.localStorage?nn.exports=Me.localStorage:typeof window<"u"&&window.localStorage?nn.exports=window.localStorage:nn.exports=new e}()),nn.exports}var cs={},Or={},us;function ou(){if(us)return Or;us=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.IKeyValueStorage=void 0;class t{}return Or.IKeyValueStorage=t,Or}var Ir={},hs;function au(){if(hs)return Ir;hs=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.parseEntry=void 0;const t=Sr;function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return Ir.parseEntry=e,Ir}var ls;function cu(){return ls||(ls=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=os;e.__exportStar(ou(),t),e.__exportStar(au(),t)}(cs)),cs}Object.defineProperty(rn,"__esModule",{value:!0}),rn.KeyValueStorage=void 0;const lr=os,fs=Sr,uu=lr.__importDefault(su()),hu=cu();class ps{constructor(){this.localStorage=uu.default}getKeys(){return lr.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return lr.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(hu.parseEntry)})}getItem(e){return lr.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return fs.safeJsonParse(r)})}setItem(e,r){return lr.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,fs.safeJsonStringify(r))})}removeItem(e){return lr.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}rn.KeyValueStorage=ps;var lu=rn.default=ps,Pr={};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var zn=function(t,e){return zn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},zn(t,e)};function fu(t,e){zn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Kn=function(){return Kn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Kn.apply(this,arguments)};function pu(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function du(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function gu(t,e){return function(r,n){e(r,n,t)}}function yu(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function bu(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function a(f){try{h(n.next(f))}catch(O){c(O)}}function l(f){try{h(n.throw(f))}catch(O){c(O)}}function h(f){f.done?s(f.value):i(f.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}function vu(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(h){return function(f){return l([h,f])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function mu(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function wu(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Hn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ds(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function _u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ds(arguments[e]));return t}function Eu(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,a=s.length;c<a;c++,i++)n[i]=s[c];return n}function Fr(t){return this instanceof Fr?(this.v=t,this):new Fr(t)}function Su(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(w){n[w]&&(i[w]=function(m){return new Promise(function(_,x){s.push([w,m,_,x])>1||a(w,m)})})}function a(w,m){try{l(n[w](m))}catch(_){O(s[0][3],_)}}function l(w){w.value instanceof Fr?Promise.resolve(w.value.v).then(h,f):O(s[0][2],w)}function h(w){a("next",w)}function f(w){a("throw",w)}function O(w,m){w(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Ou(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:Fr(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function Iu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Hn=="function"?Hn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(a,l){c=t[s](c),i(a,l,c.done,c.value)})}}function i(s,c,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},c)}}function Pu(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Fu(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Au(t){return t&&t.__esModule?t:{default:t}}function Nu(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Ru(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var xu=Object.freeze({__proto__:null,__extends:fu,get __assign(){return Kn},__rest:pu,__decorate:du,__param:gu,__metadata:yu,__awaiter:bu,__generator:vu,__createBinding:mu,__exportStar:wu,__values:Hn,__read:ds,__spread:_u,__spreadArrays:Eu,__await:Fr,__asyncGenerator:Su,__asyncDelegator:Ou,__asyncValues:Iu,__makeTemplateObject:Pu,__importStar:Fu,__importDefault:Au,__classPrivateFieldGet:Nu,__classPrivateFieldSet:Ru}),sn=re(xu),Ar={},Z={};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var Bn=function(t,e){return Bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Bn(t,e)};function Tu(t,e){Bn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Vn=function(){return Vn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Vn.apply(this,arguments)};function Lu(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function ju(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Uu(t,e){return function(r,n){e(r,n,t)}}function Cu(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Mu(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function a(f){try{h(n.next(f))}catch(O){c(O)}}function l(f){try{h(n.throw(f))}catch(O){c(O)}}function h(f){f.done?s(f.value):i(f.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}function ku(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(h){return function(f){return l([h,f])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Du(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function zu(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function qn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gs(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function Ku(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(gs(arguments[e]));return t}function Hu(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,a=s.length;c<a;c++,i++)n[i]=s[c];return n}function Nr(t){return this instanceof Nr?(this.v=t,this):new Nr(t)}function Bu(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(w){n[w]&&(i[w]=function(m){return new Promise(function(_,x){s.push([w,m,_,x])>1||a(w,m)})})}function a(w,m){try{l(n[w](m))}catch(_){O(s[0][3],_)}}function l(w){w.value instanceof Nr?Promise.resolve(w.value.v).then(h,f):O(s[0][2],w)}function h(w){a("next",w)}function f(w){a("throw",w)}function O(w,m){w(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Vu(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:Nr(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function qu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof qn=="function"?qn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(a,l){c=t[s](c),i(a,l,c.done,c.value)})}}function i(s,c,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},c)}}function $u(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Gu(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Wu(t){return t&&t.__esModule?t:{default:t}}function Yu(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Ju(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Xu=Object.freeze({__proto__:null,__extends:Tu,get __assign(){return Vn},__rest:Lu,__decorate:ju,__param:Uu,__metadata:Cu,__awaiter:Mu,__generator:ku,__createBinding:Du,__exportStar:zu,__values:qn,__read:gs,__spread:Ku,__spreadArrays:Hu,__await:Nr,__asyncGenerator:Bu,__asyncDelegator:Vu,__asyncValues:qu,__makeTemplateObject:$u,__importStar:Gu,__importDefault:Wu,__classPrivateFieldGet:Yu,__classPrivateFieldSet:Ju}),on=re(Xu),ys={},Rr={},bs;function Zu(){if(bs)return Rr;bs=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Rr.delay=t,Rr}var Zt={},vs={},fr={},ms;function Qu(){return ms||(ms=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.ONE_THOUSAND=fr.ONE_HUNDRED=void 0,fr.ONE_HUNDRED=100,fr.ONE_THOUSAND=1e3),fr}var ws={},_s;function eh(){return _s||(_s=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(ws)),ws}var Es;function Ss(){return Es||(Es=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=on;e.__exportStar(Qu(),t),e.__exportStar(eh(),t)}(vs)),vs}var Os;function th(){if(Os)return Zt;Os=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.fromMiliseconds=Zt.toMiliseconds=void 0;const t=Ss();function e(n){return n*t.ONE_THOUSAND}Zt.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Zt.fromMiliseconds=r,Zt}var Is;function rh(){return Is||(Is=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=on;e.__exportStar(Zu(),t),e.__exportStar(th(),t)}(ys)),ys}var pr={},Ps;function nh(){if(Ps)return pr;Ps=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return pr.Watch=t,pr.default=t,pr}var Fs={},xr={},As;function ih(){if(As)return xr;As=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.IWatch=void 0;class t{}return xr.IWatch=t,xr}var Ns;function sh(){return Ns||(Ns=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),on.__exportStar(ih(),t)}(Fs)),Fs}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=on;e.__exportStar(rh(),t),e.__exportStar(nh(),t),e.__exportStar(sh(),t),e.__exportStar(Ss(),t)})(Z);var Rs={},Tr={};class Qt{}var oh=Object.freeze({__proto__:null,IEvents:Qt}),ah=re(oh),xs;function ch(){if(xs)return Tr;xs=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.IHeartBeat=void 0;const t=ah;class e extends t.IEvents{constructor(n){super()}}return Tr.IHeartBeat=e,Tr}var Ts;function Ls(){return Ts||(Ts=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),sn.__exportStar(ch(),t)}(Rs)),Rs}var js={},er={},Us;function uh(){if(Us)return er;Us=1,Object.defineProperty(er,"__esModule",{value:!0}),er.HEARTBEAT_EVENTS=er.HEARTBEAT_INTERVAL=void 0;const t=Z;return er.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,er.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},er}var Cs;function Ms(){return Cs||(Cs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),sn.__exportStar(uh(),t)}(js)),js}var ks;function hh(){if(ks)return Ar;ks=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.HeartBeat=void 0;const t=sn,e=at.exports,r=Z,n=Ls(),i=Ms();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=a?.interval||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const l=new s(a);return yield l.init(),l})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,l){this.events.on(a,l)}once(a,l){this.events.once(a,l)}off(a,l){this.events.off(a,l)}removeListener(a,l){this.events.removeListener(a,l)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Ar.HeartBeat=s,Ar}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=sn;e.__exportStar(hh(),t),e.__exportStar(Ls(),t),e.__exportStar(Ms(),t)})(Pr);var Pe={};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var $n=function(t,e){return $n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},$n(t,e)};function lh(t,e){$n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Gn=function(){return Gn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gn.apply(this,arguments)};function fh(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function ph(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function dh(t,e){return function(r,n){e(r,n,t)}}function gh(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function yh(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function a(f){try{h(n.next(f))}catch(O){c(O)}}function l(f){try{h(n.throw(f))}catch(O){c(O)}}function h(f){f.done?s(f.value):i(f.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}function bh(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(h){return function(f){return l([h,f])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function vh(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function mh(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Wn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ds(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function wh(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ds(arguments[e]));return t}function _h(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,a=s.length;c<a;c++,i++)n[i]=s[c];return n}function Lr(t){return this instanceof Lr?(this.v=t,this):new Lr(t)}function Eh(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(w){n[w]&&(i[w]=function(m){return new Promise(function(_,x){s.push([w,m,_,x])>1||a(w,m)})})}function a(w,m){try{l(n[w](m))}catch(_){O(s[0][3],_)}}function l(w){w.value instanceof Lr?Promise.resolve(w.value.v).then(h,f):O(s[0][2],w)}function h(w){a("next",w)}function f(w){a("throw",w)}function O(w,m){w(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Sh(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:Lr(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function Oh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Wn=="function"?Wn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(a,l){c=t[s](c),i(a,l,c.done,c.value)})}}function i(s,c,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},c)}}function Ih(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ph(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Fh(t){return t&&t.__esModule?t:{default:t}}function Ah(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Nh(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Rh=Object.freeze({__proto__:null,__extends:lh,get __assign(){return Gn},__rest:fh,__decorate:ph,__param:dh,__metadata:gh,__awaiter:yh,__generator:bh,__createBinding:vh,__exportStar:mh,__values:Wn,__read:Ds,__spread:wh,__spreadArrays:_h,__await:Lr,__asyncGenerator:Eh,__asyncDelegator:Sh,__asyncValues:Oh,__makeTemplateObject:Ih,__importStar:Ph,__importDefault:Fh,__classPrivateFieldGet:Ah,__classPrivateFieldSet:Nh}),xh=re(Rh),dr={},zs;function Ks(){return zs||(zs=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.PINO_CUSTOM_CONTEXT_KEY=dr.PINO_LOGGER_DEFAULTS=void 0,dr.PINO_LOGGER_DEFAULTS={level:"info"},dr.PINO_CUSTOM_CONTEXT_KEY="custom_context"),dr}var ht={},Hs;function Th(){if(Hs)return ht;Hs=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.generateChildLogger=ht.formatChildLoggerContext=ht.getLoggerContext=ht.setBrowserLoggerContext=ht.getBrowserLoggerContext=ht.getDefaultLoggerOptions=void 0;const t=Ks();function e(a){return Object.assign(Object.assign({},a),{level:a?.level||t.PINO_LOGGER_DEFAULTS.level})}ht.getDefaultLoggerOptions=e;function r(a,l=t.PINO_CUSTOM_CONTEXT_KEY){return a[l]||""}ht.getBrowserLoggerContext=r;function n(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){return a[h]=l,a}ht.setBrowserLoggerContext=n;function i(a,l=t.PINO_CUSTOM_CONTEXT_KEY){let h="";return typeof a.bindings>"u"?h=r(a,l):h=a.bindings().context||"",h}ht.getLoggerContext=i;function s(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){const f=i(a,h);return f.trim()?`${f}/${l}`:l}ht.formatChildLoggerContext=s;function c(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){const f=s(a,l,h),O=a.child({context:f});return n(O,f,h)}return ht.generateChildLogger=c,ht}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=xh,r=e.__importDefault(rt);Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(Ks(),t),e.__exportStar(Th(),t)})(Pe);class Lh extends Qt{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class jh extends Qt{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class Uh{constructor(e,r){this.logger=e,this.core=r}}class Ch extends Qt{constructor(e,r){super(),this.relayer=e,this.logger=r}}class Mh extends Qt{constructor(e){super()}}class kh{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}}class Dh extends Qt{constructor(e,r){super(),this.relayer=e,this.logger=r}}class zh extends Qt{constructor(e,r){super(),this.core=e,this.logger=r}}class Kh{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class Hh{constructor(e){this.client=e}}function Yn(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function jr(t){return typeof t=="string"?t:JSON.stringify(t)}var Jn={},gr={},an={},cn={};Object.defineProperty(cn,"__esModule",{value:!0}),cn.BrowserRandomSource=void 0;const Bs=65536;class Bh{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Bs)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Bs)));return r}}cn.BrowserRandomSource=Bh;function Vh(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var un={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});function qh(t){for(var e=0;e<t.length;e++)t[e]=0;return t}vt.wipe=qh;var $h={},Gh=Object.freeze({__proto__:null,default:$h}),Wh=re(Gh);Object.defineProperty(un,"__esModule",{value:!0}),un.NodeRandomSource=void 0;const Yh=vt;class Jh{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Vh<"u"){const e=Wh;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,Yh.wipe)(r),n}}un.NodeRandomSource=Jh,Object.defineProperty(an,"__esModule",{value:!0}),an.SystemRandomSource=void 0;const Xh=cn,Zh=un;class Qh{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Xh.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Zh.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}an.SystemRandomSource=Qh;var ne={},Vs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,l){var h=a>>>16&65535,f=a&65535,O=l>>>16&65535,w=l&65535;return f*w+(h*w+f*O<<16>>>0)|0}t.mul=Math.imul||e;function r(a,l){return a+l|0}t.add=r;function n(a,l){return a-l|0}t.sub=n;function i(a,l){return a<<l|a>>>32-l}t.rotl=i;function s(a,l){return a<<32-l|a>>>l}t.rotr=s;function c(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||c,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(Vs),Object.defineProperty(ne,"__esModule",{value:!0});var qs=Vs;function el(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}ne.readInt16BE=el;function tl(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}ne.readUint16BE=tl;function rl(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}ne.readInt16LE=rl;function nl(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}ne.readUint16LE=nl;function $s(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}ne.writeUint16BE=$s,ne.writeInt16BE=$s;function Gs(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}ne.writeUint16LE=Gs,ne.writeInt16LE=Gs;function Xn(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}ne.readInt32BE=Xn;function Zn(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}ne.readUint32BE=Zn;function Qn(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}ne.readInt32LE=Qn;function ei(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}ne.readUint32LE=ei;function hn(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}ne.writeUint32BE=hn,ne.writeInt32BE=hn;function ln(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}ne.writeUint32LE=ln,ne.writeInt32LE=ln;function il(t,e){e===void 0&&(e=0);var r=Xn(t,e),n=Xn(t,e+4);return r*4294967296+n-(n>>31)*4294967296}ne.readInt64BE=il;function sl(t,e){e===void 0&&(e=0);var r=Zn(t,e),n=Zn(t,e+4);return r*4294967296+n}ne.readUint64BE=sl;function ol(t,e){e===void 0&&(e=0);var r=Qn(t,e),n=Qn(t,e+4);return n*4294967296+r-(r>>31)*4294967296}ne.readInt64LE=ol;function al(t,e){e===void 0&&(e=0);var r=ei(t,e),n=ei(t,e+4);return n*4294967296+r}ne.readUint64LE=al;function Ws(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),hn(t/4294967296>>>0,e,r),hn(t>>>0,e,r+4),e}ne.writeUint64BE=Ws,ne.writeInt64BE=Ws;function Ys(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),ln(t>>>0,e,r),ln(t/4294967296>>>0,e,r+4),e}ne.writeUint64LE=Ys,ne.writeInt64LE=Ys;function cl(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}ne.readUintBE=cl;function ul(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}ne.readUintLE=ul;function hl(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!qs.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}ne.writeUintBE=hl;function ll(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!qs.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}ne.writeUintLE=ll;function fl(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}ne.readFloat32BE=fl;function pl(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}ne.readFloat32LE=pl;function dl(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}ne.readFloat64BE=dl;function gl(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}ne.readFloat64LE=gl;function yl(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}ne.writeFloat32BE=yl;function bl(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}ne.writeFloat32LE=bl;function vl(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}ne.writeFloat64BE=vl;function ml(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}ne.writeFloat64LE=ml,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=an,r=ne,n=vt;t.defaultRandomSource=new e.SystemRandomSource;function i(h,f=t.defaultRandomSource){return f.randomBytes(h)}t.randomBytes=i;function s(h=t.defaultRandomSource){const f=i(4,h),O=(0,r.readUint32LE)(f);return(0,n.wipe)(f),O}t.randomUint32=s;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(h,f=c,O=t.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let w="";const m=f.length,_=256-256%m;for(;h>0;){const x=i(Math.ceil(h*256/_),O);for(let U=0;U<x.length&&h>0;U++){const H=x[U];H<_&&(w+=f.charAt(H%m),h--)}(0,n.wipe)(x)}return w}t.randomString=a;function l(h,f=c,O=t.defaultRandomSource){const w=Math.ceil(h/(Math.log(f.length)/Math.LN2));return a(w,f,O)}t.randomStringForEntropy=l}(gr);var Js={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ne,r=vt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&h>0;)this._buffer[this._bufferLength++]=l[f++],h--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(f=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,l,f,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[f++],h--;return this},a.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,f=this._bufferLength,O=h/536870912|0,w=h<<3,m=h%128<112?128:256;this._buffer[f]=128;for(var _=f+1;_<m-8;_++)this._buffer[_]=0;e.writeUint32BE(O,this._buffer,m-8),e.writeUint32BE(w,this._buffer,m-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,m),this._finished=!0}for(var _=0;_<this.digestLength/8;_++)e.writeUint32BE(this._stateHi[_],l,_*8),e.writeUint32BE(this._stateLo[_],l,_*8+4);return this},a.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(l){return this._stateHi.set(l.stateHi),this._stateLo.set(l.stateLo),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(l){r.wipe(l.stateHi),r.wipe(l.stateLo),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,l,h,f,O,w,m){for(var _=h[0],x=h[1],U=h[2],H=h[3],I=h[4],A=h[5],y=h[6],S=h[7],E=f[0],o=f[1],p=f[2],k=f[3],K=f[4],$=f[5],J=f[6],X=f[7],d,v,C,M,L,T,D,z;m>=128;){for(var Q=0;Q<16;Q++){var B=8*Q+w;a[Q]=e.readUint32BE(O,B),l[Q]=e.readUint32BE(O,B+4)}for(var Q=0;Q<80;Q++){var ee=_,Y=x,ce=U,R=H,N=I,P=A,u=y,b=S,V=E,G=o,pe=p,me=k,ge=K,Ee=$,De=J,Le=X;if(d=S,v=X,L=v&65535,T=v>>>16,D=d&65535,z=d>>>16,d=(I>>>14|K<<32-14)^(I>>>18|K<<32-18)^(K>>>41-32|I<<32-(41-32)),v=(K>>>14|I<<32-14)^(K>>>18|I<<32-18)^(I>>>41-32|K<<32-(41-32)),L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,d=I&A^~I&y,v=K&$^~K&J,L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,d=i[Q*2],v=i[Q*2+1],L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,d=a[Q%16],v=l[Q%16],L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,T+=L>>>16,D+=T>>>16,z+=D>>>16,C=D&65535|z<<16,M=L&65535|T<<16,d=C,v=M,L=v&65535,T=v>>>16,D=d&65535,z=d>>>16,d=(_>>>28|E<<32-28)^(E>>>34-32|_<<32-(34-32))^(E>>>39-32|_<<32-(39-32)),v=(E>>>28|_<<32-28)^(_>>>34-32|E<<32-(34-32))^(_>>>39-32|E<<32-(39-32)),L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,d=_&x^_&U^x&U,v=E&o^E&p^o&p,L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,T+=L>>>16,D+=T>>>16,z+=D>>>16,b=D&65535|z<<16,Le=L&65535|T<<16,d=R,v=me,L=v&65535,T=v>>>16,D=d&65535,z=d>>>16,d=C,v=M,L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,T+=L>>>16,D+=T>>>16,z+=D>>>16,R=D&65535|z<<16,me=L&65535|T<<16,x=ee,U=Y,H=ce,I=R,A=N,y=P,S=u,_=b,o=V,p=G,k=pe,K=me,$=ge,J=Ee,X=De,E=Le,Q%16===15)for(var B=0;B<16;B++)d=a[B],v=l[B],L=v&65535,T=v>>>16,D=d&65535,z=d>>>16,d=a[(B+9)%16],v=l[(B+9)%16],L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,C=a[(B+1)%16],M=l[(B+1)%16],d=(C>>>1|M<<32-1)^(C>>>8|M<<32-8)^C>>>7,v=(M>>>1|C<<32-1)^(M>>>8|C<<32-8)^(M>>>7|C<<32-7),L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,C=a[(B+14)%16],M=l[(B+14)%16],d=(C>>>19|M<<32-19)^(M>>>61-32|C<<32-(61-32))^C>>>6,v=(M>>>19|C<<32-19)^(C>>>61-32|M<<32-(61-32))^(M>>>6|C<<32-6),L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,T+=L>>>16,D+=T>>>16,z+=D>>>16,a[B]=D&65535|z<<16,l[B]=L&65535|T<<16}d=_,v=E,L=v&65535,T=v>>>16,D=d&65535,z=d>>>16,d=h[0],v=f[0],L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,T+=L>>>16,D+=T>>>16,z+=D>>>16,h[0]=_=D&65535|z<<16,f[0]=E=L&65535|T<<16,d=x,v=o,L=v&65535,T=v>>>16,D=d&65535,z=d>>>16,d=h[1],v=f[1],L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,T+=L>>>16,D+=T>>>16,z+=D>>>16,h[1]=x=D&65535|z<<16,f[1]=o=L&65535|T<<16,d=U,v=p,L=v&65535,T=v>>>16,D=d&65535,z=d>>>16,d=h[2],v=f[2],L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,T+=L>>>16,D+=T>>>16,z+=D>>>16,h[2]=U=D&65535|z<<16,f[2]=p=L&65535|T<<16,d=H,v=k,L=v&65535,T=v>>>16,D=d&65535,z=d>>>16,d=h[3],v=f[3],L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,T+=L>>>16,D+=T>>>16,z+=D>>>16,h[3]=H=D&65535|z<<16,f[3]=k=L&65535|T<<16,d=I,v=K,L=v&65535,T=v>>>16,D=d&65535,z=d>>>16,d=h[4],v=f[4],L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,T+=L>>>16,D+=T>>>16,z+=D>>>16,h[4]=I=D&65535|z<<16,f[4]=K=L&65535|T<<16,d=A,v=$,L=v&65535,T=v>>>16,D=d&65535,z=d>>>16,d=h[5],v=f[5],L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,T+=L>>>16,D+=T>>>16,z+=D>>>16,h[5]=A=D&65535|z<<16,f[5]=$=L&65535|T<<16,d=y,v=J,L=v&65535,T=v>>>16,D=d&65535,z=d>>>16,d=h[6],v=f[6],L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,T+=L>>>16,D+=T>>>16,z+=D>>>16,h[6]=y=D&65535|z<<16,f[6]=J=L&65535|T<<16,d=S,v=X,L=v&65535,T=v>>>16,D=d&65535,z=d>>>16,d=h[7],v=f[7],L+=v&65535,T+=v>>>16,D+=d&65535,z+=d>>>16,T+=L>>>16,D+=T>>>16,z+=D>>>16,h[7]=S=D&65535|z<<16,f[7]=X=L&65535|T<<16,w+=128,m-=128}return w}function c(a){var l=new n;l.update(a);var h=l.digest();return l.clean(),h}t.hash=c})(Js),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=gr,r=Js,n=vt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(R){const N=new Float64Array(16);if(R)for(let P=0;P<R.length;P++)N[P]=R[P];return N}const s=new Uint8Array(32);s[0]=9;const c=i(),a=i([1]),l=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),O=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),w=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function m(R,N){for(let P=0;P<16;P++)R[P]=N[P]|0}function _(R){let N=1;for(let P=0;P<16;P++){let u=R[P]+N+65535;N=Math.floor(u/65536),R[P]=u-N*65536}R[0]+=N-1+37*(N-1)}function x(R,N,P){const u=~(P-1);for(let b=0;b<16;b++){const V=u&(R[b]^N[b]);R[b]^=V,N[b]^=V}}function U(R,N){const P=i(),u=i();for(let b=0;b<16;b++)u[b]=N[b];_(u),_(u),_(u);for(let b=0;b<2;b++){P[0]=u[0]-65517;for(let G=1;G<15;G++)P[G]=u[G]-65535-(P[G-1]>>16&1),P[G-1]&=65535;P[15]=u[15]-32767-(P[14]>>16&1);const V=P[15]>>16&1;P[14]&=65535,x(u,P,1-V)}for(let b=0;b<16;b++)R[2*b]=u[b]&255,R[2*b+1]=u[b]>>8}function H(R,N){let P=0;for(let u=0;u<32;u++)P|=R[u]^N[u];return(1&P-1>>>8)-1}function I(R,N){const P=new Uint8Array(32),u=new Uint8Array(32);return U(P,R),U(u,N),H(P,u)}function A(R){const N=new Uint8Array(32);return U(N,R),N[0]&1}function y(R,N){for(let P=0;P<16;P++)R[P]=N[2*P]+(N[2*P+1]<<8);R[15]&=32767}function S(R,N,P){for(let u=0;u<16;u++)R[u]=N[u]+P[u]}function E(R,N,P){for(let u=0;u<16;u++)R[u]=N[u]-P[u]}function o(R,N,P){let u,b,V=0,G=0,pe=0,me=0,ge=0,Ee=0,De=0,Le=0,ve=0,ye=0,de=0,he=0,ue=0,ae=0,se=0,te=0,le=0,be=0,ie=0,we=0,_e=0,Oe=0,Ie=0,Se=0,Ft=0,jt=0,$t=0,mt=0,ir=0,Yr=0,An=0,ze=P[0],je=P[1],Ke=P[2],He=P[3],Be=P[4],Ue=P[5],We=P[6],Ye=P[7],Je=P[8],Xe=P[9],Ze=P[10],$e=P[11],Ve=P[12],xe=P[13],Qe=P[14],et=P[15];u=N[0],V+=u*ze,G+=u*je,pe+=u*Ke,me+=u*He,ge+=u*Be,Ee+=u*Ue,De+=u*We,Le+=u*Ye,ve+=u*Je,ye+=u*Xe,de+=u*Ze,he+=u*$e,ue+=u*Ve,ae+=u*xe,se+=u*Qe,te+=u*et,u=N[1],G+=u*ze,pe+=u*je,me+=u*Ke,ge+=u*He,Ee+=u*Be,De+=u*Ue,Le+=u*We,ve+=u*Ye,ye+=u*Je,de+=u*Xe,he+=u*Ze,ue+=u*$e,ae+=u*Ve,se+=u*xe,te+=u*Qe,le+=u*et,u=N[2],pe+=u*ze,me+=u*je,ge+=u*Ke,Ee+=u*He,De+=u*Be,Le+=u*Ue,ve+=u*We,ye+=u*Ye,de+=u*Je,he+=u*Xe,ue+=u*Ze,ae+=u*$e,se+=u*Ve,te+=u*xe,le+=u*Qe,be+=u*et,u=N[3],me+=u*ze,ge+=u*je,Ee+=u*Ke,De+=u*He,Le+=u*Be,ve+=u*Ue,ye+=u*We,de+=u*Ye,he+=u*Je,ue+=u*Xe,ae+=u*Ze,se+=u*$e,te+=u*Ve,le+=u*xe,be+=u*Qe,ie+=u*et,u=N[4],ge+=u*ze,Ee+=u*je,De+=u*Ke,Le+=u*He,ve+=u*Be,ye+=u*Ue,de+=u*We,he+=u*Ye,ue+=u*Je,ae+=u*Xe,se+=u*Ze,te+=u*$e,le+=u*Ve,be+=u*xe,ie+=u*Qe,we+=u*et,u=N[5],Ee+=u*ze,De+=u*je,Le+=u*Ke,ve+=u*He,ye+=u*Be,de+=u*Ue,he+=u*We,ue+=u*Ye,ae+=u*Je,se+=u*Xe,te+=u*Ze,le+=u*$e,be+=u*Ve,ie+=u*xe,we+=u*Qe,_e+=u*et,u=N[6],De+=u*ze,Le+=u*je,ve+=u*Ke,ye+=u*He,de+=u*Be,he+=u*Ue,ue+=u*We,ae+=u*Ye,se+=u*Je,te+=u*Xe,le+=u*Ze,be+=u*$e,ie+=u*Ve,we+=u*xe,_e+=u*Qe,Oe+=u*et,u=N[7],Le+=u*ze,ve+=u*je,ye+=u*Ke,de+=u*He,he+=u*Be,ue+=u*Ue,ae+=u*We,se+=u*Ye,te+=u*Je,le+=u*Xe,be+=u*Ze,ie+=u*$e,we+=u*Ve,_e+=u*xe,Oe+=u*Qe,Ie+=u*et,u=N[8],ve+=u*ze,ye+=u*je,de+=u*Ke,he+=u*He,ue+=u*Be,ae+=u*Ue,se+=u*We,te+=u*Ye,le+=u*Je,be+=u*Xe,ie+=u*Ze,we+=u*$e,_e+=u*Ve,Oe+=u*xe,Ie+=u*Qe,Se+=u*et,u=N[9],ye+=u*ze,de+=u*je,he+=u*Ke,ue+=u*He,ae+=u*Be,se+=u*Ue,te+=u*We,le+=u*Ye,be+=u*Je,ie+=u*Xe,we+=u*Ze,_e+=u*$e,Oe+=u*Ve,Ie+=u*xe,Se+=u*Qe,Ft+=u*et,u=N[10],de+=u*ze,he+=u*je,ue+=u*Ke,ae+=u*He,se+=u*Be,te+=u*Ue,le+=u*We,be+=u*Ye,ie+=u*Je,we+=u*Xe,_e+=u*Ze,Oe+=u*$e,Ie+=u*Ve,Se+=u*xe,Ft+=u*Qe,jt+=u*et,u=N[11],he+=u*ze,ue+=u*je,ae+=u*Ke,se+=u*He,te+=u*Be,le+=u*Ue,be+=u*We,ie+=u*Ye,we+=u*Je,_e+=u*Xe,Oe+=u*Ze,Ie+=u*$e,Se+=u*Ve,Ft+=u*xe,jt+=u*Qe,$t+=u*et,u=N[12],ue+=u*ze,ae+=u*je,se+=u*Ke,te+=u*He,le+=u*Be,be+=u*Ue,ie+=u*We,we+=u*Ye,_e+=u*Je,Oe+=u*Xe,Ie+=u*Ze,Se+=u*$e,Ft+=u*Ve,jt+=u*xe,$t+=u*Qe,mt+=u*et,u=N[13],ae+=u*ze,se+=u*je,te+=u*Ke,le+=u*He,be+=u*Be,ie+=u*Ue,we+=u*We,_e+=u*Ye,Oe+=u*Je,Ie+=u*Xe,Se+=u*Ze,Ft+=u*$e,jt+=u*Ve,$t+=u*xe,mt+=u*Qe,ir+=u*et,u=N[14],se+=u*ze,te+=u*je,le+=u*Ke,be+=u*He,ie+=u*Be,we+=u*Ue,_e+=u*We,Oe+=u*Ye,Ie+=u*Je,Se+=u*Xe,Ft+=u*Ze,jt+=u*$e,$t+=u*Ve,mt+=u*xe,ir+=u*Qe,Yr+=u*et,u=N[15],te+=u*ze,le+=u*je,be+=u*Ke,ie+=u*He,we+=u*Be,_e+=u*Ue,Oe+=u*We,Ie+=u*Ye,Se+=u*Je,Ft+=u*Xe,jt+=u*Ze,$t+=u*$e,mt+=u*Ve,ir+=u*xe,Yr+=u*Qe,An+=u*et,V+=38*le,G+=38*be,pe+=38*ie,me+=38*we,ge+=38*_e,Ee+=38*Oe,De+=38*Ie,Le+=38*Se,ve+=38*Ft,ye+=38*jt,de+=38*$t,he+=38*mt,ue+=38*ir,ae+=38*Yr,se+=38*An,b=1,u=V+b+65535,b=Math.floor(u/65536),V=u-b*65536,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=pe+b+65535,b=Math.floor(u/65536),pe=u-b*65536,u=me+b+65535,b=Math.floor(u/65536),me=u-b*65536,u=ge+b+65535,b=Math.floor(u/65536),ge=u-b*65536,u=Ee+b+65535,b=Math.floor(u/65536),Ee=u-b*65536,u=De+b+65535,b=Math.floor(u/65536),De=u-b*65536,u=Le+b+65535,b=Math.floor(u/65536),Le=u-b*65536,u=ve+b+65535,b=Math.floor(u/65536),ve=u-b*65536,u=ye+b+65535,b=Math.floor(u/65536),ye=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=he+b+65535,b=Math.floor(u/65536),he=u-b*65536,u=ue+b+65535,b=Math.floor(u/65536),ue=u-b*65536,u=ae+b+65535,b=Math.floor(u/65536),ae=u-b*65536,u=se+b+65535,b=Math.floor(u/65536),se=u-b*65536,u=te+b+65535,b=Math.floor(u/65536),te=u-b*65536,V+=b-1+37*(b-1),b=1,u=V+b+65535,b=Math.floor(u/65536),V=u-b*65536,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=pe+b+65535,b=Math.floor(u/65536),pe=u-b*65536,u=me+b+65535,b=Math.floor(u/65536),me=u-b*65536,u=ge+b+65535,b=Math.floor(u/65536),ge=u-b*65536,u=Ee+b+65535,b=Math.floor(u/65536),Ee=u-b*65536,u=De+b+65535,b=Math.floor(u/65536),De=u-b*65536,u=Le+b+65535,b=Math.floor(u/65536),Le=u-b*65536,u=ve+b+65535,b=Math.floor(u/65536),ve=u-b*65536,u=ye+b+65535,b=Math.floor(u/65536),ye=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=he+b+65535,b=Math.floor(u/65536),he=u-b*65536,u=ue+b+65535,b=Math.floor(u/65536),ue=u-b*65536,u=ae+b+65535,b=Math.floor(u/65536),ae=u-b*65536,u=se+b+65535,b=Math.floor(u/65536),se=u-b*65536,u=te+b+65535,b=Math.floor(u/65536),te=u-b*65536,V+=b-1+37*(b-1),R[0]=V,R[1]=G,R[2]=pe,R[3]=me,R[4]=ge,R[5]=Ee,R[6]=De,R[7]=Le,R[8]=ve,R[9]=ye,R[10]=de,R[11]=he,R[12]=ue,R[13]=ae,R[14]=se,R[15]=te}function p(R,N){o(R,N,N)}function k(R,N){const P=i();let u;for(u=0;u<16;u++)P[u]=N[u];for(u=253;u>=0;u--)p(P,P),u!==2&&u!==4&&o(P,P,N);for(u=0;u<16;u++)R[u]=P[u]}function K(R,N){const P=i();let u;for(u=0;u<16;u++)P[u]=N[u];for(u=250;u>=0;u--)p(P,P),u!==1&&o(P,P,N);for(u=0;u<16;u++)R[u]=P[u]}function $(R,N){const P=i(),u=i(),b=i(),V=i(),G=i(),pe=i(),me=i(),ge=i(),Ee=i();E(P,R[1],R[0]),E(Ee,N[1],N[0]),o(P,P,Ee),S(u,R[0],R[1]),S(Ee,N[0],N[1]),o(u,u,Ee),o(b,R[3],N[3]),o(b,b,h),o(V,R[2],N[2]),S(V,V,V),E(G,u,P),E(pe,V,b),S(me,V,b),S(ge,u,P),o(R[0],G,pe),o(R[1],ge,me),o(R[2],me,pe),o(R[3],G,ge)}function J(R,N,P){for(let u=0;u<4;u++)x(R[u],N[u],P)}function X(R,N){const P=i(),u=i(),b=i();k(b,N[2]),o(P,N[0],b),o(u,N[1],b),U(R,u),R[31]^=A(P)<<7}function d(R,N,P){m(R[0],c),m(R[1],a),m(R[2],a),m(R[3],c);for(let u=255;u>=0;--u){const b=P[u/8|0]>>(u&7)&1;J(R,N,b),$(N,R),$(R,R),J(R,N,b)}}function v(R,N){const P=[i(),i(),i(),i()];m(P[0],f),m(P[1],O),m(P[2],a),o(P[3],f,O),d(R,P,N)}function C(R){if(R.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const N=(0,r.hash)(R);N[0]&=248,N[31]&=127,N[31]|=64;const P=new Uint8Array(32),u=[i(),i(),i(),i()];v(u,N),X(P,u);const b=new Uint8Array(64);return b.set(R),b.set(P,32),{publicKey:P,secretKey:b}}t.generateKeyPairFromSeed=C;function M(R){const N=(0,e.randomBytes)(32,R),P=C(N);return(0,n.wipe)(N),P}t.generateKeyPair=M;function L(R){if(R.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(R.subarray(32))}t.extractPublicKeyFromSecretKey=L;const T=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function D(R,N){let P,u,b,V;for(u=63;u>=32;--u){for(P=0,b=u-32,V=u-12;b<V;++b)N[b]+=P-16*N[u]*T[b-(u-32)],P=Math.floor((N[b]+128)/256),N[b]-=P*256;N[b]+=P,N[u]=0}for(P=0,b=0;b<32;b++)N[b]+=P-(N[31]>>4)*T[b],P=N[b]>>8,N[b]&=255;for(b=0;b<32;b++)N[b]-=P*T[b];for(u=0;u<32;u++)N[u+1]+=N[u]>>8,R[u]=N[u]&255}function z(R){const N=new Float64Array(64);for(let P=0;P<64;P++)N[P]=R[P];for(let P=0;P<64;P++)R[P]=0;D(R,N)}function Q(R,N){const P=new Float64Array(64),u=[i(),i(),i(),i()],b=(0,r.hash)(R.subarray(0,32));b[0]&=248,b[31]&=127,b[31]|=64;const V=new Uint8Array(64);V.set(b.subarray(32),32);const G=new r.SHA512;G.update(V.subarray(32)),G.update(N);const pe=G.digest();G.clean(),z(pe),v(u,pe),X(V,u),G.reset(),G.update(V.subarray(0,32)),G.update(R.subarray(32)),G.update(N);const me=G.digest();z(me);for(let ge=0;ge<32;ge++)P[ge]=pe[ge];for(let ge=0;ge<32;ge++)for(let Ee=0;Ee<32;Ee++)P[ge+Ee]+=me[ge]*b[Ee];return D(V.subarray(32),P),V}t.sign=Q;function B(R,N){const P=i(),u=i(),b=i(),V=i(),G=i(),pe=i(),me=i();return m(R[2],a),y(R[1],N),p(b,R[1]),o(V,b,l),E(b,b,R[2]),S(V,R[2],V),p(G,V),p(pe,G),o(me,pe,G),o(P,me,b),o(P,P,V),K(P,P),o(P,P,b),o(P,P,V),o(P,P,V),o(R[0],P,V),p(u,R[0]),o(u,u,V),I(u,b)&&o(R[0],R[0],w),p(u,R[0]),o(u,u,V),I(u,b)?-1:(A(R[0])===N[31]>>7&&E(R[0],c,R[0]),o(R[3],R[0],R[1]),0)}function ee(R,N,P){const u=new Uint8Array(32),b=[i(),i(),i(),i()],V=[i(),i(),i(),i()];if(P.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(B(V,R))return!1;const G=new r.SHA512;G.update(P.subarray(0,32)),G.update(R),G.update(N);const pe=G.digest();return z(pe),d(b,V,pe),v(V,P.subarray(32)),$(b,V),X(u,b),!H(P,u)}t.verify=ee;function Y(R){let N=[i(),i(),i(),i()];if(B(N,R))throw new Error("Ed25519: invalid public key");let P=i(),u=i(),b=N[1];S(P,a,b),E(u,a,b),k(u,u),o(P,P,u);let V=new Uint8Array(32);return U(V,P),V}t.convertPublicKeyToX25519=Y;function ce(R){const N=(0,r.hash)(R.subarray(0,32));N[0]&=248,N[31]&=127,N[31]|=64;const P=new Uint8Array(N.subarray(0,32));return(0,n.wipe)(N),P}t.convertSecretKeyToX25519=ce}(Jn);const wl="EdDSA",_l="JWT",Xs=".",Zs="base64url",El="utf8",Sl="utf8",Ol=":",Il="did",Pl="key",Qs="base58btc",Fl="z",Al="K36",Nl=32;function eo(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function ti(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=eo(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function Rl(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),c=s.charCodeAt(0);if(r[c]!==255)throw new TypeError(s+" is ambiguous");r[c]=i}var a=t.length,l=t.charAt(0),h=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function O(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var x=0,U=0,H=0,I=_.length;H!==I&&_[H]===0;)H++,x++;for(var A=(I-H)*f+1>>>0,y=new Uint8Array(A);H!==I;){for(var S=_[H],E=0,o=A-1;(S!==0||E<U)&&o!==-1;o--,E++)S+=256*y[o]>>>0,y[o]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");U=E,H++}for(var p=A-U;p!==A&&y[p]===0;)p++;for(var k=l.repeat(x);p<A;++p)k+=t.charAt(y[p]);return k}function w(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var x=0;if(_[x]!==" "){for(var U=0,H=0;_[x]===l;)U++,x++;for(var I=(_.length-x)*h+1>>>0,A=new Uint8Array(I);_[x];){var y=r[_.charCodeAt(x)];if(y===255)return;for(var S=0,E=I-1;(y!==0||S<H)&&E!==-1;E--,S++)y+=a*A[E]>>>0,A[E]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");H=S,x++}if(_[x]!==" "){for(var o=I-H;o!==I&&A[o]===0;)o++;for(var p=new Uint8Array(U+(I-o)),k=U;o!==I;)p[k++]=A[o++];return p}}}function m(_){var x=w(_);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:O,decodeUnsafe:w,decode:m}}var xl=Rl,Tl=xl;const to=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Ll=t=>new TextEncoder().encode(t),jl=t=>new TextDecoder().decode(t);class Ul{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Cl{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ro(this,e)}}class Ml{constructor(e){this.decoders=e}or(e){return ro(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ro=(t,e)=>new Ml({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class kl{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Ul(e,r,n),this.decoder=new Cl(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const fn=({name:t,prefix:e,encode:r,decode:n})=>new kl(t,e,r,n),Ur=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Tl(r,e);return fn({prefix:t,name:e,encode:n,decode:s=>to(i(s))})},Dl=(t,e,r,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;const c=new Uint8Array(s*r/8|0);let a=0,l=0,h=0;for(let f=0;f<s;++f){const O=i[t[f]];if(O===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|O,a+=r,a>=8&&(a-=8,c[h++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return c},zl=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",c=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],c+=8;c>r;)c-=r,s+=e[i&a>>c];if(c&&(s+=e[i&a<<r-c]),n)for(;s.length*r&7;)s+="=";return s},nt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>fn({prefix:e,name:t,encode(i){return zl(i,n,r)},decode(i){return Dl(i,n,r,t)}}),Kl=fn({prefix:"\0",name:"identity",encode:t=>jl(t),decode:t=>Ll(t)});var Hl=Object.freeze({__proto__:null,identity:Kl});const Bl=nt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Vl=Object.freeze({__proto__:null,base2:Bl});const ql=nt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var $l=Object.freeze({__proto__:null,base8:ql});const Gl=Ur({prefix:"9",name:"base10",alphabet:"0123456789"});var Wl=Object.freeze({__proto__:null,base10:Gl});const Yl=nt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Jl=nt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Xl=Object.freeze({__proto__:null,base16:Yl,base16upper:Jl});const Zl=nt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ql=nt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ef=nt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),tf=nt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rf=nt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),nf=nt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),sf=nt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),of=nt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),af=nt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var cf=Object.freeze({__proto__:null,base32:Zl,base32upper:Ql,base32pad:ef,base32padupper:tf,base32hex:rf,base32hexupper:nf,base32hexpad:sf,base32hexpadupper:of,base32z:af});const uf=Ur({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),hf=Ur({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var lf=Object.freeze({__proto__:null,base36:uf,base36upper:hf});const ff=Ur({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pf=Ur({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var df=Object.freeze({__proto__:null,base58btc:ff,base58flickr:pf});const gf=nt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yf=nt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),bf=nt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),vf=nt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var mf=Object.freeze({__proto__:null,base64:gf,base64pad:yf,base64url:bf,base64urlpad:vf});const no=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),wf=no.reduce((t,e,r)=>(t[r]=e,t),[]),_f=no.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Ef(t){return t.reduce((e,r)=>(e+=wf[r],e),"")}function Sf(t){const e=[];for(const r of t){const n=_f[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Of=fn({prefix:"\u{1F680}",name:"base256emoji",encode:Ef,decode:Sf});var If=Object.freeze({__proto__:null,base256emoji:Of}),Pf=so,io=128,Ff=127,Af=~Ff,Nf=Math.pow(2,31);function so(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Nf;)e[r++]=t&255|io,t/=128;for(;t&Af;)e[r++]=t&255|io,t>>>=7;return e[r]=t|0,so.bytes=r-n+1,e}var Rf=ri,xf=128,oo=127;function ri(t,n){var r=0,n=n||0,i=0,s=n,c,a=t.length;do{if(s>=a)throw ri.bytes=0,new RangeError("Could not decode varint");c=t[s++],r+=i<28?(c&oo)<<i:(c&oo)*Math.pow(2,i),i+=7}while(c>=xf);return ri.bytes=s-n,r}var Tf=Math.pow(2,7),Lf=Math.pow(2,14),jf=Math.pow(2,21),Uf=Math.pow(2,28),Cf=Math.pow(2,35),Mf=Math.pow(2,42),kf=Math.pow(2,49),Df=Math.pow(2,56),zf=Math.pow(2,63),Kf=function(t){return t<Tf?1:t<Lf?2:t<jf?3:t<Uf?4:t<Cf?5:t<Mf?6:t<kf?7:t<Df?8:t<zf?9:10},Hf={encode:Pf,decode:Rf,encodingLength:Kf},ao=Hf;const co=(t,e,r=0)=>(ao.encode(t,e,r),e),uo=t=>ao.encodingLength(t),ni=(t,e)=>{const r=e.byteLength,n=uo(t),i=n+uo(r),s=new Uint8Array(i+r);return co(t,s,0),co(r,s,n),s.set(e,i),new Bf(t,r,e,s)};class Bf{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const ho=({name:t,code:e,encode:r})=>new Vf(t,e,r);class Vf{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?ni(this.code,r):r.then(n=>ni(this.code,n))}else throw Error("Unknown type, must be binary type")}}const lo=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),qf=ho({name:"sha2-256",code:18,encode:lo("SHA-256")}),$f=ho({name:"sha2-512",code:19,encode:lo("SHA-512")});var Gf=Object.freeze({__proto__:null,sha256:qf,sha512:$f});const fo=0,Wf="identity",po=to;var Yf=Object.freeze({__proto__:null,identity:{code:fo,name:Wf,encode:po,digest:t=>ni(fo,po(t))}});new TextEncoder,new TextDecoder;const go={...Hl,...Vl,...$l,...Wl,...Xl,...cf,...lf,...df,...mf,...If};({...Gf,...Yf});function yo(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const bo=yo("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ii=yo("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=eo(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),vo={utf8:bo,"utf-8":bo,hex:go.base16,latin1:ii,ascii:ii,binary:ii,...go};function dt(t,e="utf8"){const r=vo[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function gt(t,e="utf8"){const r=vo[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function pn(t){return dt(gt(jr(t),El),Zs)}function mo(t){const e=gt(Al,Qs),r=Fl+dt(ti([e,t]),Qs);return[Il,Pl,r].join(Ol)}function Jf(t){return dt(t,Zs)}function Xf(t){return gt([pn(t.header),pn(t.payload)].join(Xs),Sl)}function Zf(t){return[pn(t.header),pn(t.payload),Jf(t.signature)].join(Xs)}function wo(t=gr.randomBytes(Nl)){return Jn.generateKeyPairFromSeed(t)}async function Qf(t,e,r,n,i=Z.fromMiliseconds(Date.now())){const s={alg:wl,typ:_l},c=mo(n.publicKey),a=i+r,l={iss:c,sub:t,aud:e,iat:i,exp:a},h=Xf({header:s,payload:l}),f=Jn.sign(n.secretKey,h);return Zf({header:s,payload:l,signature:f})}var si={},dn={};Object.defineProperty(dn,"__esModule",{value:!0});var ct=ne,oi=vt,ep=20;function tp(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,c=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],O=r[19]<<24|r[18]<<16|r[17]<<8|r[16],w=r[23]<<24|r[22]<<16|r[21]<<8|r[20],m=r[27]<<24|r[26]<<16|r[25]<<8|r[24],_=r[31]<<24|r[30]<<16|r[29]<<8|r[28],x=e[3]<<24|e[2]<<16|e[1]<<8|e[0],U=e[7]<<24|e[6]<<16|e[5]<<8|e[4],H=e[11]<<24|e[10]<<16|e[9]<<8|e[8],I=e[15]<<24|e[14]<<16|e[13]<<8|e[12],A=n,y=i,S=s,E=c,o=a,p=l,k=h,K=f,$=O,J=w,X=m,d=_,v=x,C=U,M=H,L=I,T=0;T<ep;T+=2)A=A+o|0,v^=A,v=v>>>32-16|v<<16,$=$+v|0,o^=$,o=o>>>32-12|o<<12,y=y+p|0,C^=y,C=C>>>32-16|C<<16,J=J+C|0,p^=J,p=p>>>32-12|p<<12,S=S+k|0,M^=S,M=M>>>32-16|M<<16,X=X+M|0,k^=X,k=k>>>32-12|k<<12,E=E+K|0,L^=E,L=L>>>32-16|L<<16,d=d+L|0,K^=d,K=K>>>32-12|K<<12,S=S+k|0,M^=S,M=M>>>32-8|M<<8,X=X+M|0,k^=X,k=k>>>32-7|k<<7,E=E+K|0,L^=E,L=L>>>32-8|L<<8,d=d+L|0,K^=d,K=K>>>32-7|K<<7,y=y+p|0,C^=y,C=C>>>32-8|C<<8,J=J+C|0,p^=J,p=p>>>32-7|p<<7,A=A+o|0,v^=A,v=v>>>32-8|v<<8,$=$+v|0,o^=$,o=o>>>32-7|o<<7,A=A+p|0,L^=A,L=L>>>32-16|L<<16,X=X+L|0,p^=X,p=p>>>32-12|p<<12,y=y+k|0,v^=y,v=v>>>32-16|v<<16,d=d+v|0,k^=d,k=k>>>32-12|k<<12,S=S+K|0,C^=S,C=C>>>32-16|C<<16,$=$+C|0,K^=$,K=K>>>32-12|K<<12,E=E+o|0,M^=E,M=M>>>32-16|M<<16,J=J+M|0,o^=J,o=o>>>32-12|o<<12,S=S+K|0,C^=S,C=C>>>32-8|C<<8,$=$+C|0,K^=$,K=K>>>32-7|K<<7,E=E+o|0,M^=E,M=M>>>32-8|M<<8,J=J+M|0,o^=J,o=o>>>32-7|o<<7,y=y+k|0,v^=y,v=v>>>32-8|v<<8,d=d+v|0,k^=d,k=k>>>32-7|k<<7,A=A+p|0,L^=A,L=L>>>32-8|L<<8,X=X+L|0,p^=X,p=p>>>32-7|p<<7;ct.writeUint32LE(A+n|0,t,0),ct.writeUint32LE(y+i|0,t,4),ct.writeUint32LE(S+s|0,t,8),ct.writeUint32LE(E+c|0,t,12),ct.writeUint32LE(o+a|0,t,16),ct.writeUint32LE(p+l|0,t,20),ct.writeUint32LE(k+h|0,t,24),ct.writeUint32LE(K+f|0,t,28),ct.writeUint32LE($+O|0,t,32),ct.writeUint32LE(J+w|0,t,36),ct.writeUint32LE(X+m|0,t,40),ct.writeUint32LE(d+_|0,t,44),ct.writeUint32LE(v+x|0,t,48),ct.writeUint32LE(C+U|0,t,52),ct.writeUint32LE(M+H|0,t,56),ct.writeUint32LE(L+I|0,t,60)}function _o(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,c;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),c=s.length-e.length,s.set(e,c)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,c=i}for(var a=new Uint8Array(64),l=0;l<r.length;l+=64){tp(a,s,t);for(var h=l;h<l+64&&h<r.length;h++)n[h]=r[h]^a[h-l];np(s,0,c)}return oi.wipe(a),i===0&&oi.wipe(s),n}dn.streamXOR=_o;function rp(t,e,r,n){return n===void 0&&(n=0),oi.wipe(r),_o(t,e,r,r,n)}dn.stream=rp;function np(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Eo={},Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});function ip(t,e,r){return~(t-1)&e|t-1&r}Kt.select=ip;function sp(t,e){return(t|0)-(e|0)-1>>>31&1}Kt.lessOrEqual=sp;function So(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Kt.compare=So;function op(t,e){return t.length===0||e.length===0?!1:So(t,e)!==0}Kt.equal=op,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Kt,r=vt;t.DIGEST_LENGTH=16;var n=function(){function c(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var l=a[0]|a[1]<<8;this._r[0]=l&8191;var h=a[2]|a[3]<<8;this._r[1]=(l>>>13|h<<3)&8191;var f=a[4]|a[5]<<8;this._r[2]=(h>>>10|f<<6)&7939;var O=a[6]|a[7]<<8;this._r[3]=(f>>>7|O<<9)&8191;var w=a[8]|a[9]<<8;this._r[4]=(O>>>4|w<<12)&255,this._r[5]=w>>>1&8190;var m=a[10]|a[11]<<8;this._r[6]=(w>>>14|m<<2)&8191;var _=a[12]|a[13]<<8;this._r[7]=(m>>>11|_<<5)&8065;var x=a[14]|a[15]<<8;this._r[8]=(_>>>8|x<<8)&8191,this._r[9]=x>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return c.prototype._blocks=function(a,l,h){for(var f=this._fin?0:2048,O=this._h[0],w=this._h[1],m=this._h[2],_=this._h[3],x=this._h[4],U=this._h[5],H=this._h[6],I=this._h[7],A=this._h[8],y=this._h[9],S=this._r[0],E=this._r[1],o=this._r[2],p=this._r[3],k=this._r[4],K=this._r[5],$=this._r[6],J=this._r[7],X=this._r[8],d=this._r[9];h>=16;){var v=a[l+0]|a[l+1]<<8;O+=v&8191;var C=a[l+2]|a[l+3]<<8;w+=(v>>>13|C<<3)&8191;var M=a[l+4]|a[l+5]<<8;m+=(C>>>10|M<<6)&8191;var L=a[l+6]|a[l+7]<<8;_+=(M>>>7|L<<9)&8191;var T=a[l+8]|a[l+9]<<8;x+=(L>>>4|T<<12)&8191,U+=T>>>1&8191;var D=a[l+10]|a[l+11]<<8;H+=(T>>>14|D<<2)&8191;var z=a[l+12]|a[l+13]<<8;I+=(D>>>11|z<<5)&8191;var Q=a[l+14]|a[l+15]<<8;A+=(z>>>8|Q<<8)&8191,y+=Q>>>5|f;var B=0,ee=B;ee+=O*S,ee+=w*(5*d),ee+=m*(5*X),ee+=_*(5*J),ee+=x*(5*$),B=ee>>>13,ee&=8191,ee+=U*(5*K),ee+=H*(5*k),ee+=I*(5*p),ee+=A*(5*o),ee+=y*(5*E),B+=ee>>>13,ee&=8191;var Y=B;Y+=O*E,Y+=w*S,Y+=m*(5*d),Y+=_*(5*X),Y+=x*(5*J),B=Y>>>13,Y&=8191,Y+=U*(5*$),Y+=H*(5*K),Y+=I*(5*k),Y+=A*(5*p),Y+=y*(5*o),B+=Y>>>13,Y&=8191;var ce=B;ce+=O*o,ce+=w*E,ce+=m*S,ce+=_*(5*d),ce+=x*(5*X),B=ce>>>13,ce&=8191,ce+=U*(5*J),ce+=H*(5*$),ce+=I*(5*K),ce+=A*(5*k),ce+=y*(5*p),B+=ce>>>13,ce&=8191;var R=B;R+=O*p,R+=w*o,R+=m*E,R+=_*S,R+=x*(5*d),B=R>>>13,R&=8191,R+=U*(5*X),R+=H*(5*J),R+=I*(5*$),R+=A*(5*K),R+=y*(5*k),B+=R>>>13,R&=8191;var N=B;N+=O*k,N+=w*p,N+=m*o,N+=_*E,N+=x*S,B=N>>>13,N&=8191,N+=U*(5*d),N+=H*(5*X),N+=I*(5*J),N+=A*(5*$),N+=y*(5*K),B+=N>>>13,N&=8191;var P=B;P+=O*K,P+=w*k,P+=m*p,P+=_*o,P+=x*E,B=P>>>13,P&=8191,P+=U*S,P+=H*(5*d),P+=I*(5*X),P+=A*(5*J),P+=y*(5*$),B+=P>>>13,P&=8191;var u=B;u+=O*$,u+=w*K,u+=m*k,u+=_*p,u+=x*o,B=u>>>13,u&=8191,u+=U*E,u+=H*S,u+=I*(5*d),u+=A*(5*X),u+=y*(5*J),B+=u>>>13,u&=8191;var b=B;b+=O*J,b+=w*$,b+=m*K,b+=_*k,b+=x*p,B=b>>>13,b&=8191,b+=U*o,b+=H*E,b+=I*S,b+=A*(5*d),b+=y*(5*X),B+=b>>>13,b&=8191;var V=B;V+=O*X,V+=w*J,V+=m*$,V+=_*K,V+=x*k,B=V>>>13,V&=8191,V+=U*p,V+=H*o,V+=I*E,V+=A*S,V+=y*(5*d),B+=V>>>13,V&=8191;var G=B;G+=O*d,G+=w*X,G+=m*J,G+=_*$,G+=x*K,B=G>>>13,G&=8191,G+=U*k,G+=H*p,G+=I*o,G+=A*E,G+=y*S,B+=G>>>13,G&=8191,B=(B<<2)+B|0,B=B+ee|0,ee=B&8191,B=B>>>13,Y+=B,O=ee,w=Y,m=ce,_=R,x=N,U=P,H=u,I=b,A=V,y=G,l+=16,h-=16}this._h[0]=O,this._h[1]=w,this._h[2]=m,this._h[3]=_,this._h[4]=x,this._h[5]=U,this._h[6]=H,this._h[7]=I,this._h[8]=A,this._h[9]=y},c.prototype.finish=function(a,l){l===void 0&&(l=0);var h=new Uint16Array(10),f,O,w,m;if(this._leftover){for(m=this._leftover,this._buffer[m++]=1;m<16;m++)this._buffer[m]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,m=2;m<10;m++)this._h[m]+=f,f=this._h[m]>>>13,this._h[m]&=8191;for(this._h[0]+=f*5,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,h[0]=this._h[0]+5,f=h[0]>>>13,h[0]&=8191,m=1;m<10;m++)h[m]=this._h[m]+f,f=h[m]>>>13,h[m]&=8191;for(h[9]-=1<<13,O=(f^1)-1,m=0;m<10;m++)h[m]&=O;for(O=~O,m=0;m<10;m++)this._h[m]=this._h[m]&O|h[m];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,w=this._h[0]+this._pad[0],this._h[0]=w&65535,m=1;m<8;m++)w=(this._h[m]+this._pad[m]|0)+(w>>>16)|0,this._h[m]=w&65535;return a[l+0]=this._h[0]>>>0,a[l+1]=this._h[0]>>>8,a[l+2]=this._h[1]>>>0,a[l+3]=this._h[1]>>>8,a[l+4]=this._h[2]>>>0,a[l+5]=this._h[2]>>>8,a[l+6]=this._h[3]>>>0,a[l+7]=this._h[3]>>>8,a[l+8]=this._h[4]>>>0,a[l+9]=this._h[4]>>>8,a[l+10]=this._h[5]>>>0,a[l+11]=this._h[5]>>>8,a[l+12]=this._h[6]>>>0,a[l+13]=this._h[6]>>>8,a[l+14]=this._h[7]>>>0,a[l+15]=this._h[7]>>>8,this._finished=!0,this},c.prototype.update=function(a){var l=0,h=a.length,f;if(this._leftover){f=16-this._leftover,f>h&&(f=h);for(var O=0;O<f;O++)this._buffer[this._leftover+O]=a[l+O];if(h-=f,l+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(h>=16&&(f=h-h%16,this._blocks(a,l,f),l+=f,h-=f),h){for(var O=0;O<h;O++)this._buffer[this._leftover+O]=a[l+O];this._leftover+=h}return this},c.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},c.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},c}();t.Poly1305=n;function i(c,a){var l=new n(c);l.update(a);var h=l.digest();return l.clean(),h}t.oneTimeAuth=i;function s(c,a){return c.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(c,a)}t.equal=s}(Eo),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=dn,r=Eo,n=vt,i=ne,s=Kt;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var c=new Uint8Array(16),a=function(){function l(h){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,h.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(h)}return l.prototype.seal=function(h,f,O,w){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var m=new Uint8Array(16);m.set(h,m.length-h.length);var _=new Uint8Array(32);e.stream(this._key,m,_,4);var x=f.length+this.tagLength,U;if(w){if(w.length!==x)throw new Error("ChaCha20Poly1305: incorrect destination length");U=w}else U=new Uint8Array(x);return e.streamXOR(this._key,m,f,U,4),this._authenticate(U.subarray(U.length-this.tagLength,U.length),_,U.subarray(0,U.length-this.tagLength),O),n.wipe(m),U},l.prototype.open=function(h,f,O,w){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(f.length<this.tagLength)return null;var m=new Uint8Array(16);m.set(h,m.length-h.length);var _=new Uint8Array(32);e.stream(this._key,m,_,4);var x=new Uint8Array(this.tagLength);if(this._authenticate(x,_,f.subarray(0,f.length-this.tagLength),O),!s.equal(x,f.subarray(f.length-this.tagLength,f.length)))return null;var U=f.length-this.tagLength,H;if(w){if(w.length!==U)throw new Error("ChaCha20Poly1305: incorrect destination length");H=w}else H=new Uint8Array(U);return e.streamXOR(this._key,m,f.subarray(0,f.length-this.tagLength),H,4),n.wipe(m),H},l.prototype.clean=function(){return n.wipe(this._key),this},l.prototype._authenticate=function(h,f,O,w){var m=new r.Poly1305(f);w&&(m.update(w),w.length%16>0&&m.update(c.subarray(w.length%16))),m.update(O),O.length%16>0&&m.update(c.subarray(O.length%16));var _=new Uint8Array(8);w&&i.writeUint64LE(w.length,_),m.update(_),i.writeUint64LE(O.length,_),m.update(_);for(var x=m.digest(),U=0;U<x.length;U++)h[U]=x[U];m.clean(),n.wipe(x),n.wipe(_)},l}();t.ChaCha20Poly1305=a}(si);var Oo={},Cr={},ai={};Object.defineProperty(ai,"__esModule",{value:!0});function ap(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}ai.isSerializableHash=ap,Object.defineProperty(Cr,"__esModule",{value:!0});var Rt=ai,cp=Kt,up=vt,Io=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Rt.isSerializableHash(this._inner)&&Rt.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),up.wipe(n)}return t.prototype.reset=function(){if(!Rt.isSerializableHash(this._inner)||!Rt.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Rt.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Rt.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Rt.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Rt.isSerializableHash(this._inner)||!Rt.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Rt.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();Cr.HMAC=Io;function hp(t,e,r){var n=new Io(t,e);n.update(r);var i=n.digest();return n.clean(),i}Cr.hmac=hp,Cr.equal=cp.equal,Object.defineProperty(Oo,"__esModule",{value:!0});var Po=Cr,Fo=vt,lp=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Po.hmac(this._hash,n,r);this._hmac=new Po.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Fo.wipe(this._buffer),Fo.wipe(this._counter),this._bufpos=0},t}(),fp=Oo.HKDF=lp,gn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ne,r=vt;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var f=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&h>0;)this._buffer[this._bufferLength++]=l[f++],h--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(f=s(this._temp,this._state,l,f,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[f++],h--;return this},a.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,f=this._bufferLength,O=h/536870912|0,w=h<<3,m=h%64<56?64:128;this._buffer[f]=128;for(var _=f+1;_<m-8;_++)this._buffer[_]=0;e.writeUint32BE(O,this._buffer,m-8),e.writeUint32BE(w,this._buffer,m-4),s(this._temp,this._state,this._buffer,0,m),this._finished=!0}for(var _=0;_<this.digestLength/4;_++)e.writeUint32BE(this._state[_],l,_*4);return this},a.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(l){return this._state.set(l.state),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(l){r.wipe(l.state),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,l,h,f,O){for(;O>=64;){for(var w=l[0],m=l[1],_=l[2],x=l[3],U=l[4],H=l[5],I=l[6],A=l[7],y=0;y<16;y++){var S=f+y*4;a[y]=e.readUint32BE(h,S)}for(var y=16;y<64;y++){var E=a[y-2],o=(E>>>17|E<<32-17)^(E>>>19|E<<32-19)^E>>>10;E=a[y-15];var p=(E>>>7|E<<32-7)^(E>>>18|E<<32-18)^E>>>3;a[y]=(o+a[y-7]|0)+(p+a[y-16]|0)}for(var y=0;y<64;y++){var o=(((U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7))+(U&H^~U&I)|0)+(A+(i[y]+a[y]|0)|0)|0,p=((w>>>2|w<<32-2)^(w>>>13|w<<32-13)^(w>>>22|w<<32-22))+(w&m^w&_^m&_)|0;A=I,I=H,H=U,U=x+o|0,x=_,_=m,m=w,w=o+p|0}l[0]+=w,l[1]+=m,l[2]+=_,l[3]+=x,l[4]+=U,l[5]+=H,l[6]+=I,l[7]+=A,f+=64,O-=64}return f}function c(a){var l=new n;l.update(a);var h=l.digest();return l.clean(),h}t.hash=c})(gn);var ci={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=gr,r=vt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(y){const S=new Float64Array(16);if(y)for(let E=0;E<y.length;E++)S[E]=y[E];return S}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function c(y){let S=1;for(let E=0;E<16;E++){let o=y[E]+S+65535;S=Math.floor(o/65536),y[E]=o-S*65536}y[0]+=S-1+37*(S-1)}function a(y,S,E){const o=~(E-1);for(let p=0;p<16;p++){const k=o&(y[p]^S[p]);y[p]^=k,S[p]^=k}}function l(y,S){const E=n(),o=n();for(let p=0;p<16;p++)o[p]=S[p];c(o),c(o),c(o);for(let p=0;p<2;p++){E[0]=o[0]-65517;for(let K=1;K<15;K++)E[K]=o[K]-65535-(E[K-1]>>16&1),E[K-1]&=65535;E[15]=o[15]-32767-(E[14]>>16&1);const k=E[15]>>16&1;E[14]&=65535,a(o,E,1-k)}for(let p=0;p<16;p++)y[2*p]=o[p]&255,y[2*p+1]=o[p]>>8}function h(y,S){for(let E=0;E<16;E++)y[E]=S[2*E]+(S[2*E+1]<<8);y[15]&=32767}function f(y,S,E){for(let o=0;o<16;o++)y[o]=S[o]+E[o]}function O(y,S,E){for(let o=0;o<16;o++)y[o]=S[o]-E[o]}function w(y,S,E){let o,p,k=0,K=0,$=0,J=0,X=0,d=0,v=0,C=0,M=0,L=0,T=0,D=0,z=0,Q=0,B=0,ee=0,Y=0,ce=0,R=0,N=0,P=0,u=0,b=0,V=0,G=0,pe=0,me=0,ge=0,Ee=0,De=0,Le=0,ve=E[0],ye=E[1],de=E[2],he=E[3],ue=E[4],ae=E[5],se=E[6],te=E[7],le=E[8],be=E[9],ie=E[10],we=E[11],_e=E[12],Oe=E[13],Ie=E[14],Se=E[15];o=S[0],k+=o*ve,K+=o*ye,$+=o*de,J+=o*he,X+=o*ue,d+=o*ae,v+=o*se,C+=o*te,M+=o*le,L+=o*be,T+=o*ie,D+=o*we,z+=o*_e,Q+=o*Oe,B+=o*Ie,ee+=o*Se,o=S[1],K+=o*ve,$+=o*ye,J+=o*de,X+=o*he,d+=o*ue,v+=o*ae,C+=o*se,M+=o*te,L+=o*le,T+=o*be,D+=o*ie,z+=o*we,Q+=o*_e,B+=o*Oe,ee+=o*Ie,Y+=o*Se,o=S[2],$+=o*ve,J+=o*ye,X+=o*de,d+=o*he,v+=o*ue,C+=o*ae,M+=o*se,L+=o*te,T+=o*le,D+=o*be,z+=o*ie,Q+=o*we,B+=o*_e,ee+=o*Oe,Y+=o*Ie,ce+=o*Se,o=S[3],J+=o*ve,X+=o*ye,d+=o*de,v+=o*he,C+=o*ue,M+=o*ae,L+=o*se,T+=o*te,D+=o*le,z+=o*be,Q+=o*ie,B+=o*we,ee+=o*_e,Y+=o*Oe,ce+=o*Ie,R+=o*Se,o=S[4],X+=o*ve,d+=o*ye,v+=o*de,C+=o*he,M+=o*ue,L+=o*ae,T+=o*se,D+=o*te,z+=o*le,Q+=o*be,B+=o*ie,ee+=o*we,Y+=o*_e,ce+=o*Oe,R+=o*Ie,N+=o*Se,o=S[5],d+=o*ve,v+=o*ye,C+=o*de,M+=o*he,L+=o*ue,T+=o*ae,D+=o*se,z+=o*te,Q+=o*le,B+=o*be,ee+=o*ie,Y+=o*we,ce+=o*_e,R+=o*Oe,N+=o*Ie,P+=o*Se,o=S[6],v+=o*ve,C+=o*ye,M+=o*de,L+=o*he,T+=o*ue,D+=o*ae,z+=o*se,Q+=o*te,B+=o*le,ee+=o*be,Y+=o*ie,ce+=o*we,R+=o*_e,N+=o*Oe,P+=o*Ie,u+=o*Se,o=S[7],C+=o*ve,M+=o*ye,L+=o*de,T+=o*he,D+=o*ue,z+=o*ae,Q+=o*se,B+=o*te,ee+=o*le,Y+=o*be,ce+=o*ie,R+=o*we,N+=o*_e,P+=o*Oe,u+=o*Ie,b+=o*Se,o=S[8],M+=o*ve,L+=o*ye,T+=o*de,D+=o*he,z+=o*ue,Q+=o*ae,B+=o*se,ee+=o*te,Y+=o*le,ce+=o*be,R+=o*ie,N+=o*we,P+=o*_e,u+=o*Oe,b+=o*Ie,V+=o*Se,o=S[9],L+=o*ve,T+=o*ye,D+=o*de,z+=o*he,Q+=o*ue,B+=o*ae,ee+=o*se,Y+=o*te,ce+=o*le,R+=o*be,N+=o*ie,P+=o*we,u+=o*_e,b+=o*Oe,V+=o*Ie,G+=o*Se,o=S[10],T+=o*ve,D+=o*ye,z+=o*de,Q+=o*he,B+=o*ue,ee+=o*ae,Y+=o*se,ce+=o*te,R+=o*le,N+=o*be,P+=o*ie,u+=o*we,b+=o*_e,V+=o*Oe,G+=o*Ie,pe+=o*Se,o=S[11],D+=o*ve,z+=o*ye,Q+=o*de,B+=o*he,ee+=o*ue,Y+=o*ae,ce+=o*se,R+=o*te,N+=o*le,P+=o*be,u+=o*ie,b+=o*we,V+=o*_e,G+=o*Oe,pe+=o*Ie,me+=o*Se,o=S[12],z+=o*ve,Q+=o*ye,B+=o*de,ee+=o*he,Y+=o*ue,ce+=o*ae,R+=o*se,N+=o*te,P+=o*le,u+=o*be,b+=o*ie,V+=o*we,G+=o*_e,pe+=o*Oe,me+=o*Ie,ge+=o*Se,o=S[13],Q+=o*ve,B+=o*ye,ee+=o*de,Y+=o*he,ce+=o*ue,R+=o*ae,N+=o*se,P+=o*te,u+=o*le,b+=o*be,V+=o*ie,G+=o*we,pe+=o*_e,me+=o*Oe,ge+=o*Ie,Ee+=o*Se,o=S[14],B+=o*ve,ee+=o*ye,Y+=o*de,ce+=o*he,R+=o*ue,N+=o*ae,P+=o*se,u+=o*te,b+=o*le,V+=o*be,G+=o*ie,pe+=o*we,me+=o*_e,ge+=o*Oe,Ee+=o*Ie,De+=o*Se,o=S[15],ee+=o*ve,Y+=o*ye,ce+=o*de,R+=o*he,N+=o*ue,P+=o*ae,u+=o*se,b+=o*te,V+=o*le,G+=o*be,pe+=o*ie,me+=o*we,ge+=o*_e,Ee+=o*Oe,De+=o*Ie,Le+=o*Se,k+=38*Y,K+=38*ce,$+=38*R,J+=38*N,X+=38*P,d+=38*u,v+=38*b,C+=38*V,M+=38*G,L+=38*pe,T+=38*me,D+=38*ge,z+=38*Ee,Q+=38*De,B+=38*Le,p=1,o=k+p+65535,p=Math.floor(o/65536),k=o-p*65536,o=K+p+65535,p=Math.floor(o/65536),K=o-p*65536,o=$+p+65535,p=Math.floor(o/65536),$=o-p*65536,o=J+p+65535,p=Math.floor(o/65536),J=o-p*65536,o=X+p+65535,p=Math.floor(o/65536),X=o-p*65536,o=d+p+65535,p=Math.floor(o/65536),d=o-p*65536,o=v+p+65535,p=Math.floor(o/65536),v=o-p*65536,o=C+p+65535,p=Math.floor(o/65536),C=o-p*65536,o=M+p+65535,p=Math.floor(o/65536),M=o-p*65536,o=L+p+65535,p=Math.floor(o/65536),L=o-p*65536,o=T+p+65535,p=Math.floor(o/65536),T=o-p*65536,o=D+p+65535,p=Math.floor(o/65536),D=o-p*65536,o=z+p+65535,p=Math.floor(o/65536),z=o-p*65536,o=Q+p+65535,p=Math.floor(o/65536),Q=o-p*65536,o=B+p+65535,p=Math.floor(o/65536),B=o-p*65536,o=ee+p+65535,p=Math.floor(o/65536),ee=o-p*65536,k+=p-1+37*(p-1),p=1,o=k+p+65535,p=Math.floor(o/65536),k=o-p*65536,o=K+p+65535,p=Math.floor(o/65536),K=o-p*65536,o=$+p+65535,p=Math.floor(o/65536),$=o-p*65536,o=J+p+65535,p=Math.floor(o/65536),J=o-p*65536,o=X+p+65535,p=Math.floor(o/65536),X=o-p*65536,o=d+p+65535,p=Math.floor(o/65536),d=o-p*65536,o=v+p+65535,p=Math.floor(o/65536),v=o-p*65536,o=C+p+65535,p=Math.floor(o/65536),C=o-p*65536,o=M+p+65535,p=Math.floor(o/65536),M=o-p*65536,o=L+p+65535,p=Math.floor(o/65536),L=o-p*65536,o=T+p+65535,p=Math.floor(o/65536),T=o-p*65536,o=D+p+65535,p=Math.floor(o/65536),D=o-p*65536,o=z+p+65535,p=Math.floor(o/65536),z=o-p*65536,o=Q+p+65535,p=Math.floor(o/65536),Q=o-p*65536,o=B+p+65535,p=Math.floor(o/65536),B=o-p*65536,o=ee+p+65535,p=Math.floor(o/65536),ee=o-p*65536,k+=p-1+37*(p-1),y[0]=k,y[1]=K,y[2]=$,y[3]=J,y[4]=X,y[5]=d,y[6]=v,y[7]=C,y[8]=M,y[9]=L,y[10]=T,y[11]=D,y[12]=z,y[13]=Q,y[14]=B,y[15]=ee}function m(y,S){w(y,S,S)}function _(y,S){const E=n();for(let o=0;o<16;o++)E[o]=S[o];for(let o=253;o>=0;o--)m(E,E),o!==2&&o!==4&&w(E,E,S);for(let o=0;o<16;o++)y[o]=E[o]}function x(y,S){const E=new Uint8Array(32),o=new Float64Array(80),p=n(),k=n(),K=n(),$=n(),J=n(),X=n();for(let M=0;M<31;M++)E[M]=y[M];E[31]=y[31]&127|64,E[0]&=248,h(o,S);for(let M=0;M<16;M++)k[M]=o[M];p[0]=$[0]=1;for(let M=254;M>=0;--M){const L=E[M>>>3]>>>(M&7)&1;a(p,k,L),a(K,$,L),f(J,p,K),O(p,p,K),f(K,k,$),O(k,k,$),m($,J),m(X,p),w(p,K,p),w(K,k,J),f(J,p,K),O(p,p,K),m(k,p),O(K,$,X),w(p,K,s),f(p,p,$),w(K,K,p),w(p,$,X),w($,k,o),m(k,J),a(p,k,L),a(K,$,L)}for(let M=0;M<16;M++)o[M+16]=p[M],o[M+32]=K[M],o[M+48]=k[M],o[M+64]=$[M];const d=o.subarray(32),v=o.subarray(16);_(d,d),w(v,v,d);const C=new Uint8Array(32);return l(C,v),C}t.scalarMult=x;function U(y){return x(y,i)}t.scalarMultBase=U;function H(y){if(y.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const S=new Uint8Array(y);return{publicKey:U(S),secretKey:S}}t.generateKeyPairFromSeed=H;function I(y){const S=(0,e.randomBytes)(32,y),E=H(S);return(0,r.wipe)(S),E}t.generateKeyPair=I;function A(y,S,E=!1){if(y.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(S.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const o=x(y,S);if(E){let p=0;for(let k=0;k<o.length;k++)p|=o[k];if(p===0)throw new Error("X25519: invalid shared key")}return o}t.sharedKey=A})(ci);var Ao=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},pp=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),dp=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),gp=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),yp=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),bp=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),vp=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,mp=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,No=3,wp=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",vp]],Ro=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function _p(t){return t?xo(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new bp:typeof navigator<"u"?xo(navigator.userAgent):Op()}function Ep(t){return t!==""&&wp.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function xo(t){var e=Ep(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new yp;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<No&&(i=Ao(Ao([],i,!0),Ip(No-i.length),!0)):i=[];var s=i.join("."),c=Sp(t),a=mp.exec(t);return a&&a[1]?new gp(r,s,c,a[1]):new pp(r,s,c)}function Sp(t){for(var e=0,r=Ro.length;e<r;e++){var n=Ro[e],i=n[0],s=n[1],c=s.exec(t);if(c)return i}return null}function Op(){var t=typeof process<"u"&&process.version;return t?new dp(process.version.slice(1)):null}function Ip(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.getLocalStorage=Ne.getLocalStorageOrThrow=Ne.getCrypto=Ne.getCryptoOrThrow=Lo=Ne.getLocation=Ne.getLocationOrThrow=ui=Ne.getNavigator=Ne.getNavigatorOrThrow=To=Ne.getDocument=Ne.getDocumentOrThrow=Ne.getFromWindowOrThrow=Ne.getFromWindow=void 0;function tr(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ne.getFromWindow=tr;function yr(t){const e=tr(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ne.getFromWindowOrThrow=yr;function Pp(){return yr("document")}Ne.getDocumentOrThrow=Pp;function Fp(){return tr("document")}var To=Ne.getDocument=Fp;function Ap(){return yr("navigator")}Ne.getNavigatorOrThrow=Ap;function Np(){return tr("navigator")}var ui=Ne.getNavigator=Np;function Rp(){return yr("location")}Ne.getLocationOrThrow=Rp;function xp(){return tr("location")}var Lo=Ne.getLocation=xp;function Tp(){return yr("crypto")}Ne.getCryptoOrThrow=Tp;function Lp(){return tr("crypto")}Ne.getCrypto=Lp;function jp(){return yr("localStorage")}Ne.getLocalStorageOrThrow=jp;function Up(){return tr("localStorage")}Ne.getLocalStorage=Up;var hi={};Object.defineProperty(hi,"__esModule",{value:!0});var jo=hi.getWindowMetadata=void 0;const Uo=Ne;function Cp(){let t,e;try{t=Uo.getDocumentOrThrow(),e=Uo.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),O=[];for(let w=0;w<f.length;w++){const m=f[w],_=m.getAttribute("rel");if(_&&_.toLowerCase().indexOf("icon")>-1){const x=m.getAttribute("href");if(x)if(x.toLowerCase().indexOf("https:")===-1&&x.toLowerCase().indexOf("http:")===-1&&x.indexOf("//")!==0){let U=e.protocol+"//"+e.host;if(x.indexOf("/")===0)U+=x;else{const H=e.pathname.split("/");H.pop(),U+=H.join("/")+"/"+x}O.push(U)}else if(x.indexOf("//")===0){const U=e.protocol+x;O.push(U)}else O.push(x)}}return O}function n(...f){const O=t.getElementsByTagName("meta");for(let w=0;w<O.length;w++){const m=O[w],_=["itemprop","property","name"].map(x=>m.getAttribute(x)).filter(x=>x?f.includes(x):!1);if(_.length&&_){const x=m.getAttribute("content");if(x)return x}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const c=i(),a=s(),l=e.origin,h=r();return{description:a,url:l,icons:h,name:c}}jo=hi.getWindowMetadata=Cp;var Mr={},Mp=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Co="%[a-f0-9]{2}",Mo=new RegExp("("+Co+")|([^%]+?)","gi"),ko=new RegExp("("+Co+")+","gi");function li(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],li(r),li(n))}function kp(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Mo)||[],r=1;r<e.length;r++)t=li(e,r).join(""),e=t.match(Mo)||[];return t}}function Dp(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=ko.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=kp(r[0]);n!==r[0]&&(e[r[0]]=n)}r=ko.exec(t)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),s=0;s<i.length;s++){var c=i[s];t=t.replace(new RegExp(c,"g"),e[c])}return t}var zp=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Dp(t)}},Kp=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Hp=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var c=n[s],a=t[c];(i?e.indexOf(c)!==-1:e(c,a,t))&&(r[c]=a)}return r};(function(t){const e=Mp,r=zp,n=Kp,i=Hp,s=I=>I==null,c=Symbol("encodeFragmentIdentifier");function a(I){switch(I.arrayFormat){case"index":return A=>(y,S)=>{const E=y.length;return S===void 0||I.skipNull&&S===null||I.skipEmptyString&&S===""?y:S===null?[...y,[f(A,I),"[",E,"]"].join("")]:[...y,[f(A,I),"[",f(E,I),"]=",f(S,I)].join("")]};case"bracket":return A=>(y,S)=>S===void 0||I.skipNull&&S===null||I.skipEmptyString&&S===""?y:S===null?[...y,[f(A,I),"[]"].join("")]:[...y,[f(A,I),"[]=",f(S,I)].join("")];case"colon-list-separator":return A=>(y,S)=>S===void 0||I.skipNull&&S===null||I.skipEmptyString&&S===""?y:S===null?[...y,[f(A,I),":list="].join("")]:[...y,[f(A,I),":list=",f(S,I)].join("")];case"comma":case"separator":case"bracket-separator":{const A=I.arrayFormat==="bracket-separator"?"[]=":"=";return y=>(S,E)=>E===void 0||I.skipNull&&E===null||I.skipEmptyString&&E===""?S:(E=E===null?"":E,S.length===0?[[f(y,I),A,f(E,I)].join("")]:[[S,f(E,I)].join(I.arrayFormatSeparator)])}default:return A=>(y,S)=>S===void 0||I.skipNull&&S===null||I.skipEmptyString&&S===""?y:S===null?[...y,f(A,I)]:[...y,[f(A,I),"=",f(S,I)].join("")]}}function l(I){let A;switch(I.arrayFormat){case"index":return(y,S,E)=>{if(A=/\[(\d*)\]$/.exec(y),y=y.replace(/\[\d*\]$/,""),!A){E[y]=S;return}E[y]===void 0&&(E[y]={}),E[y][A[1]]=S};case"bracket":return(y,S,E)=>{if(A=/(\[\])$/.exec(y),y=y.replace(/\[\]$/,""),!A){E[y]=S;return}if(E[y]===void 0){E[y]=[S];return}E[y]=[].concat(E[y],S)};case"colon-list-separator":return(y,S,E)=>{if(A=/(:list)$/.exec(y),y=y.replace(/:list$/,""),!A){E[y]=S;return}if(E[y]===void 0){E[y]=[S];return}E[y]=[].concat(E[y],S)};case"comma":case"separator":return(y,S,E)=>{const o=typeof S=="string"&&S.includes(I.arrayFormatSeparator),p=typeof S=="string"&&!o&&O(S,I).includes(I.arrayFormatSeparator);S=p?O(S,I):S;const k=o||p?S.split(I.arrayFormatSeparator).map(K=>O(K,I)):S===null?S:O(S,I);E[y]=k};case"bracket-separator":return(y,S,E)=>{const o=/(\[\])$/.test(y);if(y=y.replace(/\[\]$/,""),!o){E[y]=S&&O(S,I);return}const p=S===null?[]:S.split(I.arrayFormatSeparator).map(k=>O(k,I));if(E[y]===void 0){E[y]=p;return}E[y]=[].concat(E[y],p)};default:return(y,S,E)=>{if(E[y]===void 0){E[y]=S;return}E[y]=[].concat(E[y],S)}}}function h(I){if(typeof I!="string"||I.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function f(I,A){return A.encode?A.strict?e(I):encodeURIComponent(I):I}function O(I,A){return A.decode?r(I):I}function w(I){return Array.isArray(I)?I.sort():typeof I=="object"?w(Object.keys(I)).sort((A,y)=>Number(A)-Number(y)).map(A=>I[A]):I}function m(I){const A=I.indexOf("#");return A!==-1&&(I=I.slice(0,A)),I}function _(I){let A="";const y=I.indexOf("#");return y!==-1&&(A=I.slice(y)),A}function x(I){I=m(I);const A=I.indexOf("?");return A===-1?"":I.slice(A+1)}function U(I,A){return A.parseNumbers&&!Number.isNaN(Number(I))&&typeof I=="string"&&I.trim()!==""?I=Number(I):A.parseBooleans&&I!==null&&(I.toLowerCase()==="true"||I.toLowerCase()==="false")&&(I=I.toLowerCase()==="true"),I}function H(I,A){A=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},A),h(A.arrayFormatSeparator);const y=l(A),S=Object.create(null);if(typeof I!="string"||(I=I.trim().replace(/^[?#&]/,""),!I))return S;for(const E of I.split("&")){if(E==="")continue;let[o,p]=n(A.decode?E.replace(/\+/g," "):E,"=");p=p===void 0?null:["comma","separator","bracket-separator"].includes(A.arrayFormat)?p:O(p,A),y(O(o,A),p,S)}for(const E of Object.keys(S)){const o=S[E];if(typeof o=="object"&&o!==null)for(const p of Object.keys(o))o[p]=U(o[p],A);else S[E]=U(o,A)}return A.sort===!1?S:(A.sort===!0?Object.keys(S).sort():Object.keys(S).sort(A.sort)).reduce((E,o)=>{const p=S[o];return Boolean(p)&&typeof p=="object"&&!Array.isArray(p)?E[o]=w(p):E[o]=p,E},Object.create(null))}t.extract=x,t.parse=H,t.stringify=(I,A)=>{if(!I)return"";A=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},A),h(A.arrayFormatSeparator);const y=p=>A.skipNull&&s(I[p])||A.skipEmptyString&&I[p]==="",S=a(A),E={};for(const p of Object.keys(I))y(p)||(E[p]=I[p]);const o=Object.keys(E);return A.sort!==!1&&o.sort(A.sort),o.map(p=>{const k=I[p];return k===void 0?"":k===null?f(p,A):Array.isArray(k)?k.length===0&&A.arrayFormat==="bracket-separator"?f(p,A)+"[]":k.reduce(S(p),[]).join("&"):f(p,A)+"="+f(k,A)}).filter(p=>p.length>0).join("&")},t.parseUrl=(I,A)=>{A=Object.assign({decode:!0},A);const[y,S]=n(I,"#");return Object.assign({url:y.split("?")[0]||"",query:H(x(I),A)},A&&A.parseFragmentIdentifier&&S?{fragmentIdentifier:O(S,A)}:{})},t.stringifyUrl=(I,A)=>{A=Object.assign({encode:!0,strict:!0,[c]:!0},A);const y=m(I.url).split("?")[0]||"",S=t.extract(I.url),E=t.parse(S,{sort:!1}),o=Object.assign(E,I.query);let p=t.stringify(o,A);p&&(p=`?${p}`);let k=_(I.url);return I.fragmentIdentifier&&(k=`#${A[c]?f(I.fragmentIdentifier,A):I.fragmentIdentifier}`),`${y}${p}${k}`},t.pick=(I,A,y)=>{y=Object.assign({parseFragmentIdentifier:!0,[c]:!1},y);const{url:S,query:E,fragmentIdentifier:o}=t.parseUrl(I,y);return t.stringifyUrl({url:S,query:i(E,A),fragmentIdentifier:o},y)},t.exclude=(I,A,y)=>{const S=Array.isArray(A)?E=>!A.includes(E):(E,o)=>!A(E,o);return t.pick(I,S,y)}})(Mr);const Bp={waku:{publish:"waku_publish",subscribe:"waku_subscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe"},irn:{publish:"irn_publish",subscribe:"irn_subscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe"},iridium:{publish:"iridium_publish",subscribe:"iridium_subscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe"}};function fi(t,e){return t.includes(":")?[t]:e.chains||[]}const Do="base10",yt="base16",pi="base64pad",di="utf8",zo=0,rr=1,Vp=0,Ko=1,gi=12,yi=32;function qp(){const t=ci.generateKeyPair();return{privateKey:dt(t.secretKey,yt),publicKey:dt(t.publicKey,yt)}}function bi(){const t=gr.randomBytes(yi);return dt(t,yt)}function $p(t,e){const r=ci.sharedKey(gt(t,yt),gt(e,yt)),n=new fp(gn.SHA256,r).expand(yi);return dt(n,yt)}function Gp(t){const e=gn.hash(gt(t,yt));return dt(e,yt)}function yn(t){const e=gn.hash(gt(t,di));return dt(e,yt)}function Wp(t){return gt(`${t}`,Do)}function kr(t){return Number(dt(t,Do))}function Yp(t){const e=Wp(typeof t.type<"u"?t.type:zo);if(kr(e)===rr&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?gt(t.senderPublicKey,yt):void 0,n=typeof t.iv<"u"?gt(t.iv,yt):gr.randomBytes(gi),i=new si.ChaCha20Poly1305(gt(t.symKey,yt)).seal(n,gt(t.message,di));return Xp({type:e,sealed:i,iv:n,senderPublicKey:r})}function Jp(t){const e=new si.ChaCha20Poly1305(gt(t.symKey,yt)),{sealed:r,iv:n}=vi(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return dt(i,di)}function Xp(t){if(kr(t.type)===rr){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return dt(ti([t.type,t.senderPublicKey,t.iv,t.sealed]),pi)}return dt(ti([t.type,t.iv,t.sealed]),pi)}function vi(t){const e=gt(t,pi),r=e.slice(Vp,Ko),n=Ko;if(kr(r)===rr){const a=n+yi,l=a+gi,h=e.slice(n,a),f=e.slice(a,l),O=e.slice(l);return{type:r,sealed:O,iv:f,senderPublicKey:h}}const i=n+gi,s=e.slice(n,i),c=e.slice(i);return{type:r,sealed:c,iv:s}}function Zp(t,e){const r=vi(t);return Ho({type:kr(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?dt(r.senderPublicKey,yt):void 0,receiverPublicKey:e?.receiverPublicKey})}function Ho(t){const e=t?.type||zo;if(e===rr){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function Bo(t){return t.type===rr&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var Qp=Object.defineProperty,Vo=Object.getOwnPropertySymbols,ed=Object.prototype.hasOwnProperty,td=Object.prototype.propertyIsEnumerable,qo=(t,e,r)=>e in t?Qp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$o=(t,e)=>{for(var r in e||(e={}))ed.call(e,r)&&qo(t,r,e[r]);if(Vo)for(var r of Vo(e))td.call(e,r)&&qo(t,r,e[r]);return t};const rd="ReactNative",Dr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},nd="js";function Go(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function id(){return!To()&&!!ui()&&navigator.product===rd}function sd(){return!Go()&&!!ui()}function od(){return id()?Dr.reactNative:Go()?Dr.node:sd()?Dr.browser:Dr.unknown}function ad(t,e){let r=Mr.parse(t);return r=$o($o({},r),e),t=Mr.stringify(r),t}function cd(){return jo()||{name:"",description:"",url:"",icons:[""]}}function ud(){const t=_p();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function hd(){var t;const e=od();return e===Dr.browser?[e,((t=Lo())==null?void 0:t.host)||"unknown"].join(":"):e}function ld(t,e,r){const n=ud(),i=hd();return[[t,e].join("-"),[nd,r].join("-"),n,i].join("/")}function fd({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s}){const c=r.split("?"),a=ld(t,e,n),l={auth:i,ua:a,projectId:s},h=ad(c[1]||"",l);return c[0]+"?"+h}function Ht(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Wo(t){return Object.fromEntries(t.entries())}function Yo(t){return new Map(Object.entries(t))}function nr(t){const e=Z.toMiliseconds(t||Z.FIVE_MINUTES);let r,n,i;return{resolve:s=>{i&&r&&(clearTimeout(i),r(s))},reject:s=>{i&&n&&(clearTimeout(i),n(s))},done:()=>new Promise((s,c)=>{i=setTimeout(c,e),r=s,n=c})}}function Jo(t,e){return new Promise(async(r,n)=>{const i=setTimeout(()=>n(),e),s=await t;clearTimeout(i),r(s)})}function Xo(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function pd(t){return Xo("topic",t)}function dd(t){return Xo("id",t)}function Zo(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function xt(t,e){return Z.fromMiliseconds((e||Date.now())+Z.toMiliseconds(t))}function Bt(t){return Date.now()>=Z.toMiliseconds(t)}function ke(t,e){return`${t}${e?`:${e}`:""}`}const gd="irn";function mi(t){return t?.relay||{protocol:gd}}function wi(t){const e=Bp[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var yd=Object.defineProperty,Qo=Object.getOwnPropertySymbols,bd=Object.prototype.hasOwnProperty,vd=Object.prototype.propertyIsEnumerable,ea=(t,e,r)=>e in t?yd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,md=(t,e)=>{for(var r in e||(e={}))bd.call(e,r)&&ea(t,r,e[r]);if(Qo)for(var r of Qo(e))vd.call(e,r)&&ea(t,r,e[r]);return t};function wd(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),c=t[i];r[s]=c}}),r}function _d(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",c=Mr.parse(s);return{protocol:n,topic:i[0],version:parseInt(i[1],10),symKey:c.symKey,relay:wd(c)}}function Ed(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function Sd(t){return`${t.protocol}:${t.topic}@${t.version}?`+Mr.stringify(md({symKey:t.symKey},Ed(t.relay)))}function zr(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Od(t){const e=[];return Object.values(t).forEach(r=>{e.push(...zr(r.accounts))}),e}function Id(t,e){const r=[];return Object.values(t).forEach(n=>{zr(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Pd(t,e){const r=[];return Object.values(t).forEach(n=>{zr(n.accounts).includes(e)&&r.push(...n.events)}),r}function Fd(t,e){const r=bn(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(c=>`${c.split(":")[0]}:${c.split(":")[1]}`)};return n}const Ad={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Nd={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function q(t,e){const{message:r,code:n}=Nd[t];return{message:e?`${r} ${e}`:r,code:n}}function qe(t,e){const{message:r,code:n}=Ad[t];return{message:e?`${r} ${e}`:r,code:n}}function Kr(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Hr(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function lt(t){return typeof t>"u"}function Ge(t,e){return e&&lt(t)?!0:typeof t=="string"&&Boolean(t.trim().length)}function _i(t,e){return e&&lt(t)?!0:typeof t=="number"&&!isNaN(t)}function Rd(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return Ht(i,n)?(n.forEach(c=>{const{accounts:a,methods:l,events:h}=t.namespaces[c],f=zr(a),O=r[c];(!Ht(fi(c,O),f)||!Ht(O.methods,l)||!Ht(O.events,h))&&(s=!1)}),s):!1}function Ei(t){return Ge(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function xd(t){if(Ge(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Ei(r)}}return!1}function Td(t){if(Ge(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Ld(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function jd(t){return t?.topic}function Ud(t,e){let r=null;return Ge(t?.publicKey,!1)||(r=q("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function ta(t){let e=!0;return Kr(t)?t.length&&(e=t.every(r=>Ge(r,!1))):e=!1,e}function Cd(t,e,r){let n=null;return Kr(e)?e.forEach(i=>{n||(!Ei(i)||!i.includes(t))&&(n=qe("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):n=qe("UNSUPPORTED_CHAINS",`${r}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),n}function Md(t,e){let r=null;return Object.entries(t).forEach(([n,i])=>{if(r)return;const s=Cd(n,fi(n,i),`${e} requiredNamespace`);s&&(r=s)}),r}function kd(t,e){let r=null;return Kr(t)?t.forEach(n=>{r||xd(n)||(r=qe("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=qe("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Dd(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=kd(n?.accounts,`${e} namespace`);i&&(r=i)}),r}function zd(t,e){let r=null;return ta(t?.methods)?ta(t?.events)||(r=qe("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=qe("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function ra(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=zd(n,`${e}, namespace`);i&&(r=i)}),r}function Kd(t,e,r){let n=null;if(t&&Hr(t)){const i=ra(t,e);i&&(n=i);const s=Md(t,e);s&&(n=s)}else n=q("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function bn(t,e){let r=null;if(t&&Hr(t)){const n=ra(t,e);n&&(r=n);const i=Dd(t,e);i&&(r=i)}else r=q("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function na(t){return Ge(t.protocol,!0)}function Hd(t,e){let r=!1;return e&&!t?r=!0:t&&Kr(t)&&t.length&&t.forEach(n=>{r=na(n)}),r}function Bd(t){return typeof t=="number"}function bt(t){return typeof t<"u"&&typeof t!==null}function Vd(t){return!(!t||typeof t!="object"||!t.code||!_i(t.code,!1)||!t.message||!Ge(t.message,!1))}function qd(t){return!(lt(t)||!Ge(t.method,!1))}function $d(t){return!(lt(t)||lt(t.result)&&lt(t.error)||!_i(t.id,!1)||!Ge(t.jsonrpc,!1))}function Gd(t){return!(lt(t)||!Ge(t.name,!1))}function ia(t,e){return!(!Ei(e)||!Od(t).includes(e))}function Wd(t,e,r){return Ge(r,!1)?Id(t,e).includes(r):!1}function Yd(t,e,r){return Ge(r,!1)?Pd(t,e).includes(r):!1}function Si(t,e,r,n){let i=null;const s=Object.keys(t),c=Object.keys(e);return Ht(s,c)?s.forEach(a=>{if(i)return;const l=zr(e[a].accounts);Ht(fi(a,t[a]),l)?Ht(t[a].methods,e[a].methods)?Ht(t[a].events,e[a].events)||(i=q("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${a}`)):i=q("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${a}`):i=q("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace chains for ${a}`)}):i=q("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy ${n}`),i}function Jd(t,e){return _i(t,!1)&&t<=e.max&&t>=e.min}const Xd="PARSE_ERROR",Zd="INVALID_REQUEST",Qd="METHOD_NOT_FOUND",eg="INVALID_PARAMS",sa="INTERNAL_ERROR",Oi="SERVER_ERROR",tg=[-32700,-32600,-32601,-32602,-32603],Br={[Xd]:{code:-32700,message:"Parse error"},[Zd]:{code:-32600,message:"Invalid Request"},[Qd]:{code:-32601,message:"Method not found"},[eg]:{code:-32602,message:"Invalid params"},[sa]:{code:-32603,message:"Internal error"},[Oi]:{code:-32e3,message:"Server error"}},oa=Oi;function rg(t){return tg.includes(t)}function aa(t){return Object.keys(Br).includes(t)?Br[t]:Br[oa]}function ng(t){return Object.values(Br).find(r=>r.code===t)||Br[oa]}function ca(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var ua={};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var Ii=function(t,e){return Ii=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ii(t,e)};function ig(t,e){Ii(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Pi=function(){return Pi=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Pi.apply(this,arguments)};function sg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function og(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function ag(t,e){return function(r,n){e(r,n,t)}}function cg(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ug(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function a(f){try{h(n.next(f))}catch(O){c(O)}}function l(f){try{h(n.throw(f))}catch(O){c(O)}}function h(f){f.done?s(f.value):i(f.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}function hg(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(h){return function(f){return l([h,f])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function lg(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function fg(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Fi(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ha(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function pg(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ha(arguments[e]));return t}function dg(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,a=s.length;c<a;c++,i++)n[i]=s[c];return n}function Vr(t){return this instanceof Vr?(this.v=t,this):new Vr(t)}function gg(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(w){n[w]&&(i[w]=function(m){return new Promise(function(_,x){s.push([w,m,_,x])>1||a(w,m)})})}function a(w,m){try{l(n[w](m))}catch(_){O(s[0][3],_)}}function l(w){w.value instanceof Vr?Promise.resolve(w.value.v).then(h,f):O(s[0][2],w)}function h(w){a("next",w)}function f(w){a("throw",w)}function O(w,m){w(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function yg(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:Vr(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function bg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Fi=="function"?Fi(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(a,l){c=t[s](c),i(a,l,c.done,c.value)})}}function i(s,c,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},c)}}function vg(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function mg(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function wg(t){return t&&t.__esModule?t:{default:t}}function _g(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Eg(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Sg=Object.freeze({__proto__:null,__extends:ig,get __assign(){return Pi},__rest:sg,__decorate:og,__param:ag,__metadata:cg,__awaiter:ug,__generator:hg,__createBinding:lg,__exportStar:fg,__values:Fi,__read:ha,__spread:pg,__spreadArrays:dg,__await:Vr,__asyncGenerator:gg,__asyncDelegator:yg,__asyncValues:bg,__makeTemplateObject:vg,__importStar:mg,__importDefault:wg,__classPrivateFieldGet:_g,__classPrivateFieldSet:Eg}),Og=re(Sg),Ct={},la;function Ig(){if(la)return Ct;la=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.isBrowserCryptoAvailable=Ct.getSubtleCrypto=Ct.getBrowerCrypto=void 0;function t(){return Me?.crypto||Me?.msCrypto||{}}Ct.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Ct.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Ct.isBrowserCryptoAvailable=r,Ct}var Mt={},fa;function Pg(){if(fa)return Mt;fa=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.isBrowser=Mt.isNode=Mt.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Mt.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Mt.isNode=e;function r(){return!t()&&!e()}return Mt.isBrowser=r,Mt}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Og;e.__exportStar(Ig(),t),e.__exportStar(Pg(),t)})(ua);function Fg(){const t=Date.now()*Math.pow(10,3),e=Math.floor(Math.random()*Math.pow(10,3));return t+e}function vn(t,e,r){return{id:r||Fg(),jsonrpc:"2.0",method:t,params:e}}function Ai(t,e){return{id:t,jsonrpc:"2.0",result:e}}function mn(t,e,r){return{id:t,jsonrpc:"2.0",error:Ag(e,r)}}function Ag(t,e){return typeof t>"u"?aa(sa):(typeof t=="string"&&(t=Object.assign(Object.assign({},aa(Oi)),{message:t})),typeof e<"u"&&(t.data=e),rg(t.code)&&(t=ng(t.code)),t)}class Ng{}class Rg extends Ng{constructor(){super()}}class xg extends Rg{constructor(e){super()}}const Tg="^https?:",Lg="^wss?:";function jg(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function pa(t,e){const r=jg(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function da(t){return pa(t,Tg)}function ga(t){return pa(t,Lg)}function Ug(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function ya(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Ni(t){return ya(t)&&"method"in t}function Ri(t){return ya(t)&&(kt(t)||Pt(t))}function kt(t){return"result"in t}function Pt(t){return"error"in t}class qr extends xg{constructor(e){super(e),this.events=new at.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(vn(e.method,e.params||[]),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Pt(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Ri(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",()=>this.events.emit("disconnect")),this.connection.on("error",e=>this.events.emit("error",e)),this.hasRegisteredEventListeners=!0)}}const ba=10,Cg=()=>typeof vr<"u"&&typeof vr.WebSocket<"u"?vr.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:Fb(),Mg=()=>typeof window<"u",kg=Cg();class Dg{constructor(e){if(this.url=e,this.events=new at.exports.EventEmitter,this.registering=!1,!ga(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=()=>{this.onClose(),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(jr(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!ga(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=ua.isReactNative()?void 0:{rejectUnauthorized:!Ug(e)},s=new kg(e,[],i);Mg()?s.onerror=c=>{const a=c;n(this.emitError(a.error))}:s.on("error",c=>{n(this.emitError(c))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=()=>this.onClose(),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(){this.socket=void 0,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Yn(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=mn(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return ca(e,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>ba&&this.events.setMaxListeners(ba)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var xi={exports:{}};(function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,c=9007199254740991,a="[object Arguments]",l="[object Array]",h="[object AsyncFunction]",f="[object Boolean]",O="[object Date]",w="[object Error]",m="[object Function]",_="[object GeneratorFunction]",x="[object Map]",U="[object Number]",H="[object Null]",I="[object Object]",A="[object Promise]",y="[object Proxy]",S="[object RegExp]",E="[object Set]",o="[object String]",p="[object Symbol]",k="[object Undefined]",K="[object WeakMap]",$="[object ArrayBuffer]",J="[object DataView]",X="[object Float32Array]",d="[object Float64Array]",v="[object Int8Array]",C="[object Int16Array]",M="[object Int32Array]",L="[object Uint8Array]",T="[object Uint8ClampedArray]",D="[object Uint16Array]",z="[object Uint32Array]",Q=/[\\^$.*+?()[\]{}|]/g,B=/^\[object .+?Constructor\]$/,ee=/^(?:0|[1-9]\d*)$/,Y={};Y[X]=Y[d]=Y[v]=Y[C]=Y[M]=Y[L]=Y[T]=Y[D]=Y[z]=!0,Y[a]=Y[l]=Y[$]=Y[f]=Y[J]=Y[O]=Y[w]=Y[m]=Y[x]=Y[U]=Y[I]=Y[S]=Y[E]=Y[o]=Y[K]=!1;var ce=typeof Me=="object"&&Me&&Me.Object===Object&&Me,R=typeof self=="object"&&self&&self.Object===Object&&self,N=ce||R||Function("return this")(),P=e&&!e.nodeType&&e,u=P&&!0&&t&&!t.nodeType&&t,b=u&&u.exports===P,V=b&&ce.process,G=function(){try{return V&&V.binding&&V.binding("util")}catch{}}(),pe=G&&G.isTypedArray;function me(g,F){for(var j=-1,W=g==null?0:g.length,Re=0,oe=[];++j<W;){var Ce=g[j];F(Ce,j,g)&&(oe[Re++]=Ce)}return oe}function ge(g,F){for(var j=-1,W=F.length,Re=g.length;++j<W;)g[Re+j]=F[j];return g}function Ee(g,F){for(var j=-1,W=g==null?0:g.length;++j<W;)if(F(g[j],j,g))return!0;return!1}function De(g,F){for(var j=-1,W=Array(g);++j<g;)W[j]=F(j);return W}function Le(g){return function(F){return g(F)}}function ve(g,F){return g.has(F)}function ye(g,F){return g?.[F]}function de(g){var F=-1,j=Array(g.size);return g.forEach(function(W,Re){j[++F]=[Re,W]}),j}function he(g,F){return function(j){return g(F(j))}}function ue(g){var F=-1,j=Array(g.size);return g.forEach(function(W){j[++F]=W}),j}var ae=Array.prototype,se=Function.prototype,te=Object.prototype,le=N["__core-js_shared__"],be=se.toString,ie=te.hasOwnProperty,we=function(){var g=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),_e=te.toString,Oe=RegExp("^"+be.call(ie).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=b?N.Buffer:void 0,Se=N.Symbol,Ft=N.Uint8Array,jt=te.propertyIsEnumerable,$t=ae.splice,mt=Se?Se.toStringTag:void 0,ir=Object.getOwnPropertySymbols,Yr=Ie?Ie.isBuffer:void 0,An=he(Object.keys,Object),ze=br(N,"DataView"),je=br(N,"Map"),Ke=br(N,"Promise"),He=br(N,"Set"),Be=br(N,"WeakMap"),Ue=br(Object,"create"),We=or(ze),Ye=or(je),Je=or(Ke),Xe=or(He),Ze=or(Be),$e=Se?Se.prototype:void 0,Ve=$e?$e.valueOf:void 0;function xe(g){var F=-1,j=g==null?0:g.length;for(this.clear();++F<j;){var W=g[F];this.set(W[0],W[1])}}function Qe(){this.__data__=Ue?Ue(null):{},this.size=0}function et(g){var F=this.has(g)&&delete this.__data__[g];return this.size-=F?1:0,F}function D0(g){var F=this.__data__;if(Ue){var j=F[g];return j===n?void 0:j}return ie.call(F,g)?F[g]:void 0}function z0(g){var F=this.__data__;return Ue?F[g]!==void 0:ie.call(F,g)}function K0(g,F){var j=this.__data__;return this.size+=this.has(g)?0:1,j[g]=Ue&&F===void 0?n:F,this}xe.prototype.clear=Qe,xe.prototype.delete=et,xe.prototype.get=D0,xe.prototype.has=z0,xe.prototype.set=K0;function Dt(g){var F=-1,j=g==null?0:g.length;for(this.clear();++F<j;){var W=g[F];this.set(W[0],W[1])}}function H0(){this.__data__=[],this.size=0}function B0(g){var F=this.__data__,j=Rn(F,g);if(j<0)return!1;var W=F.length-1;return j==W?F.pop():$t.call(F,j,1),--this.size,!0}function V0(g){var F=this.__data__,j=Rn(F,g);return j<0?void 0:F[j][1]}function q0(g){return Rn(this.__data__,g)>-1}function $0(g,F){var j=this.__data__,W=Rn(j,g);return W<0?(++this.size,j.push([g,F])):j[W][1]=F,this}Dt.prototype.clear=H0,Dt.prototype.delete=B0,Dt.prototype.get=V0,Dt.prototype.has=q0,Dt.prototype.set=$0;function sr(g){var F=-1,j=g==null?0:g.length;for(this.clear();++F<j;){var W=g[F];this.set(W[0],W[1])}}function G0(){this.size=0,this.__data__={hash:new xe,map:new(je||Dt),string:new xe}}function W0(g){var F=xn(this,g).delete(g);return this.size-=F?1:0,F}function Y0(g){return xn(this,g).get(g)}function J0(g){return xn(this,g).has(g)}function X0(g,F){var j=xn(this,g),W=j.size;return j.set(g,F),this.size+=j.size==W?0:1,this}sr.prototype.clear=G0,sr.prototype.delete=W0,sr.prototype.get=Y0,sr.prototype.has=J0,sr.prototype.set=X0;function Nn(g){var F=-1,j=g==null?0:g.length;for(this.__data__=new sr;++F<j;)this.add(g[F])}function Z0(g){return this.__data__.set(g,n),this}function Q0(g){return this.__data__.has(g)}Nn.prototype.add=Nn.prototype.push=Z0,Nn.prototype.has=Q0;function Gt(g){var F=this.__data__=new Dt(g);this.size=F.size}function eb(){this.__data__=new Dt,this.size=0}function tb(g){var F=this.__data__,j=F.delete(g);return this.size=F.size,j}function rb(g){return this.__data__.get(g)}function nb(g){return this.__data__.has(g)}function ib(g,F){var j=this.__data__;if(j instanceof Dt){var W=j.__data__;if(!je||W.length<r-1)return W.push([g,F]),this.size=++j.size,this;j=this.__data__=new sr(W)}return j.set(g,F),this.size=j.size,this}Gt.prototype.clear=eb,Gt.prototype.delete=tb,Gt.prototype.get=rb,Gt.prototype.has=nb,Gt.prototype.set=ib;function sb(g,F){var j=Tn(g),W=!j&&wb(g),Re=!j&&!W&&Vi(g),oe=!j&&!W&&!Re&&vc(g),Ce=j||W||Re||oe,tt=Ce?De(g.length,String):[],ot=tt.length;for(var Te in g)(F||ie.call(g,Te))&&!(Ce&&(Te=="length"||Re&&(Te=="offset"||Te=="parent")||oe&&(Te=="buffer"||Te=="byteLength"||Te=="byteOffset")||gb(Te,ot)))&&tt.push(Te);return tt}function Rn(g,F){for(var j=g.length;j--;)if(dc(g[j][0],F))return j;return-1}function ob(g,F,j){var W=F(g);return Tn(g)?W:ge(W,j(g))}function Jr(g){return g==null?g===void 0?k:H:mt&&mt in Object(g)?pb(g):mb(g)}function hc(g){return Xr(g)&&Jr(g)==a}function lc(g,F,j,W,Re){return g===F?!0:g==null||F==null||!Xr(g)&&!Xr(F)?g!==g&&F!==F:ab(g,F,j,W,lc,Re)}function ab(g,F,j,W,Re,oe){var Ce=Tn(g),tt=Tn(F),ot=Ce?l:Wt(g),Te=tt?l:Wt(F);ot=ot==a?I:ot,Te=Te==a?I:Te;var wt=ot==I,At=Te==I,ut=ot==Te;if(ut&&Vi(g)){if(!Vi(F))return!1;Ce=!0,wt=!1}if(ut&&!wt)return oe||(oe=new Gt),Ce||vc(g)?fc(g,F,j,W,Re,oe):lb(g,F,ot,j,W,Re,oe);if(!(j&i)){var Ot=wt&&ie.call(g,"__wrapped__"),It=At&&ie.call(F,"__wrapped__");if(Ot||It){var Yt=Ot?g.value():g,zt=It?F.value():F;return oe||(oe=new Gt),Re(Yt,zt,j,W,oe)}}return ut?(oe||(oe=new Gt),fb(g,F,j,W,Re,oe)):!1}function cb(g){if(!bc(g)||bb(g))return!1;var F=gc(g)?Oe:B;return F.test(or(g))}function ub(g){return Xr(g)&&yc(g.length)&&!!Y[Jr(g)]}function hb(g){if(!vb(g))return An(g);var F=[];for(var j in Object(g))ie.call(g,j)&&j!="constructor"&&F.push(j);return F}function fc(g,F,j,W,Re,oe){var Ce=j&i,tt=g.length,ot=F.length;if(tt!=ot&&!(Ce&&ot>tt))return!1;var Te=oe.get(g);if(Te&&oe.get(F))return Te==F;var wt=-1,At=!0,ut=j&s?new Nn:void 0;for(oe.set(g,F),oe.set(F,g);++wt<tt;){var Ot=g[wt],It=F[wt];if(W)var Yt=Ce?W(It,Ot,wt,F,g,oe):W(Ot,It,wt,g,F,oe);if(Yt!==void 0){if(Yt)continue;At=!1;break}if(ut){if(!Ee(F,function(zt,ar){if(!ve(ut,ar)&&(Ot===zt||Re(Ot,zt,j,W,oe)))return ut.push(ar)})){At=!1;break}}else if(!(Ot===It||Re(Ot,It,j,W,oe))){At=!1;break}}return oe.delete(g),oe.delete(F),At}function lb(g,F,j,W,Re,oe,Ce){switch(j){case J:if(g.byteLength!=F.byteLength||g.byteOffset!=F.byteOffset)return!1;g=g.buffer,F=F.buffer;case $:return!(g.byteLength!=F.byteLength||!oe(new Ft(g),new Ft(F)));case f:case O:case U:return dc(+g,+F);case w:return g.name==F.name&&g.message==F.message;case S:case o:return g==F+"";case x:var tt=de;case E:var ot=W&i;if(tt||(tt=ue),g.size!=F.size&&!ot)return!1;var Te=Ce.get(g);if(Te)return Te==F;W|=s,Ce.set(g,F);var wt=fc(tt(g),tt(F),W,Re,oe,Ce);return Ce.delete(g),wt;case p:if(Ve)return Ve.call(g)==Ve.call(F)}return!1}function fb(g,F,j,W,Re,oe){var Ce=j&i,tt=pc(g),ot=tt.length,Te=pc(F),wt=Te.length;if(ot!=wt&&!Ce)return!1;for(var At=ot;At--;){var ut=tt[At];if(!(Ce?ut in F:ie.call(F,ut)))return!1}var Ot=oe.get(g);if(Ot&&oe.get(F))return Ot==F;var It=!0;oe.set(g,F),oe.set(F,g);for(var Yt=Ce;++At<ot;){ut=tt[At];var zt=g[ut],ar=F[ut];if(W)var mc=Ce?W(ar,zt,ut,F,g,oe):W(zt,ar,ut,g,F,oe);if(!(mc===void 0?zt===ar||Re(zt,ar,j,W,oe):mc)){It=!1;break}Yt||(Yt=ut=="constructor")}if(It&&!Yt){var Ln=g.constructor,jn=F.constructor;Ln!=jn&&"constructor"in g&&"constructor"in F&&!(typeof Ln=="function"&&Ln instanceof Ln&&typeof jn=="function"&&jn instanceof jn)&&(It=!1)}return oe.delete(g),oe.delete(F),It}function pc(g){return ob(g,Sb,db)}function xn(g,F){var j=g.__data__;return yb(F)?j[typeof F=="string"?"string":"hash"]:j.map}function br(g,F){var j=ye(g,F);return cb(j)?j:void 0}function pb(g){var F=ie.call(g,mt),j=g[mt];try{g[mt]=void 0;var W=!0}catch{}var Re=_e.call(g);return W&&(F?g[mt]=j:delete g[mt]),Re}var db=ir?function(g){return g==null?[]:(g=Object(g),me(ir(g),function(F){return jt.call(g,F)}))}:Ob,Wt=Jr;(ze&&Wt(new ze(new ArrayBuffer(1)))!=J||je&&Wt(new je)!=x||Ke&&Wt(Ke.resolve())!=A||He&&Wt(new He)!=E||Be&&Wt(new Be)!=K)&&(Wt=function(g){var F=Jr(g),j=F==I?g.constructor:void 0,W=j?or(j):"";if(W)switch(W){case We:return J;case Ye:return x;case Je:return A;case Xe:return E;case Ze:return K}return F});function gb(g,F){return F=F??c,!!F&&(typeof g=="number"||ee.test(g))&&g>-1&&g%1==0&&g<F}function yb(g){var F=typeof g;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?g!=="__proto__":g===null}function bb(g){return!!we&&we in g}function vb(g){var F=g&&g.constructor,j=typeof F=="function"&&F.prototype||te;return g===j}function mb(g){return _e.call(g)}function or(g){if(g!=null){try{return be.call(g)}catch{}try{return g+""}catch{}}return""}function dc(g,F){return g===F||g!==g&&F!==F}var wb=hc(function(){return arguments}())?hc:function(g){return Xr(g)&&ie.call(g,"callee")&&!jt.call(g,"callee")},Tn=Array.isArray;function _b(g){return g!=null&&yc(g.length)&&!gc(g)}var Vi=Yr||Ib;function Eb(g,F){return lc(g,F)}function gc(g){if(!bc(g))return!1;var F=Jr(g);return F==m||F==_||F==h||F==y}function yc(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=c}function bc(g){var F=typeof g;return g!=null&&(F=="object"||F=="function")}function Xr(g){return g!=null&&typeof g=="object"}var vc=pe?Le(pe):ub;function Sb(g){return _b(g)?sb(g):hb(g)}function Ob(){return[]}function Ib(){return!1}t.exports=Eb})(xi,xi.exports);var zg=xi.exports,Kg=Object.defineProperty,va=Object.getOwnPropertySymbols,Hg=Object.prototype.hasOwnProperty,Bg=Object.prototype.propertyIsEnumerable,ma=(t,e,r)=>e in t?Kg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ft=(t,e)=>{for(var r in e||(e={}))Hg.call(e,r)&&ma(t,r,e[r]);if(va)for(var r of va(e))Bg.call(e,r)&&ma(t,r,e[r]);return t};function Vg(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),c=s.charCodeAt(0);if(r[c]!==255)throw new TypeError(s+" is ambiguous");r[c]=i}var a=t.length,l=t.charAt(0),h=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function O(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var x=0,U=0,H=0,I=_.length;H!==I&&_[H]===0;)H++,x++;for(var A=(I-H)*f+1>>>0,y=new Uint8Array(A);H!==I;){for(var S=_[H],E=0,o=A-1;(S!==0||E<U)&&o!==-1;o--,E++)S+=256*y[o]>>>0,y[o]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");U=E,H++}for(var p=A-U;p!==A&&y[p]===0;)p++;for(var k=l.repeat(x);p<A;++p)k+=t.charAt(y[p]);return k}function w(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var x=0;if(_[x]!==" "){for(var U=0,H=0;_[x]===l;)U++,x++;for(var I=(_.length-x)*h+1>>>0,A=new Uint8Array(I);_[x];){var y=r[_.charCodeAt(x)];if(y===255)return;for(var S=0,E=I-1;(y!==0||S<H)&&E!==-1;E--,S++)y+=a*A[E]>>>0,A[E]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");H=S,x++}if(_[x]!==" "){for(var o=I-H;o!==I&&A[o]===0;)o++;for(var p=new Uint8Array(U+(I-o)),k=U;o!==I;)p[k++]=A[o++];return p}}}function m(_){var x=w(_);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:O,decodeUnsafe:w,decode:m}}var qg=Vg,$g=qg;const wa=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Gg=t=>new TextEncoder().encode(t),Wg=t=>new TextDecoder().decode(t);class Yg{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Jg{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _a(this,e)}}class Xg{constructor(e){this.decoders=e}or(e){return _a(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const _a=(t,e)=>new Xg(ft(ft({},t.decoders||{[t.prefix]:t}),e.decoders||{[e.prefix]:e}));class Zg{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Yg(e,r,n),this.decoder=new Jg(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const wn=({name:t,prefix:e,encode:r,decode:n})=>new Zg(t,e,r,n),$r=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=$g(r,e);return wn({prefix:t,name:e,encode:n,decode:s=>wa(i(s))})},Qg=(t,e,r,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;const c=new Uint8Array(s*r/8|0);let a=0,l=0,h=0;for(let f=0;f<s;++f){const O=i[t[f]];if(O===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|O,a+=r,a>=8&&(a-=8,c[h++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return c},ey=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",c=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],c+=8;c>r;)c-=r,s+=e[i&a>>c];if(c&&(s+=e[i&a<<r-c]),n)for(;s.length*r&7;)s+="=";return s},it=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>wn({prefix:e,name:t,encode(i){return ey(i,n,r)},decode(i){return Qg(i,n,r,t)}}),ty=wn({prefix:"\0",name:"identity",encode:t=>Wg(t),decode:t=>Gg(t)});var ry=Object.freeze({__proto__:null,identity:ty});const ny=it({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var iy=Object.freeze({__proto__:null,base2:ny});const sy=it({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var oy=Object.freeze({__proto__:null,base8:sy});const ay=$r({prefix:"9",name:"base10",alphabet:"0123456789"});var cy=Object.freeze({__proto__:null,base10:ay});const uy=it({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),hy=it({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ly=Object.freeze({__proto__:null,base16:uy,base16upper:hy});const fy=it({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),py=it({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dy=it({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gy=it({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),yy=it({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),by=it({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vy=it({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),my=it({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),wy=it({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var _y=Object.freeze({__proto__:null,base32:fy,base32upper:py,base32pad:dy,base32padupper:gy,base32hex:yy,base32hexupper:by,base32hexpad:vy,base32hexpadupper:my,base32z:wy});const Ey=$r({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Sy=$r({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Oy=Object.freeze({__proto__:null,base36:Ey,base36upper:Sy});const Iy=$r({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Py=$r({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Fy=Object.freeze({__proto__:null,base58btc:Iy,base58flickr:Py});const Ay=it({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ny=it({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ry=it({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xy=it({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ty=Object.freeze({__proto__:null,base64:Ay,base64pad:Ny,base64url:Ry,base64urlpad:xy});const Ea=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Ly=Ea.reduce((t,e,r)=>(t[r]=e,t),[]),jy=Ea.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Uy(t){return t.reduce((e,r)=>(e+=Ly[r],e),"")}function Cy(t){const e=[];for(const r of t){const n=jy[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const My=wn({prefix:"\u{1F680}",name:"base256emoji",encode:Uy,decode:Cy});var ky=Object.freeze({__proto__:null,base256emoji:My}),Dy=Oa,Sa=128,zy=127,Ky=~zy,Hy=Math.pow(2,31);function Oa(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Hy;)e[r++]=t&255|Sa,t/=128;for(;t&Ky;)e[r++]=t&255|Sa,t>>>=7;return e[r]=t|0,Oa.bytes=r-n+1,e}var By=Ti,Vy=128,Ia=127;function Ti(t,n){var r=0,n=n||0,i=0,s=n,c,a=t.length;do{if(s>=a)throw Ti.bytes=0,new RangeError("Could not decode varint");c=t[s++],r+=i<28?(c&Ia)<<i:(c&Ia)*Math.pow(2,i),i+=7}while(c>=Vy);return Ti.bytes=s-n,r}var qy=Math.pow(2,7),$y=Math.pow(2,14),Gy=Math.pow(2,21),Wy=Math.pow(2,28),Yy=Math.pow(2,35),Jy=Math.pow(2,42),Xy=Math.pow(2,49),Zy=Math.pow(2,56),Qy=Math.pow(2,63),e1=function(t){return t<qy?1:t<$y?2:t<Gy?3:t<Wy?4:t<Yy?5:t<Jy?6:t<Xy?7:t<Zy?8:t<Qy?9:10},t1={encode:Dy,decode:By,encodingLength:e1},Pa=t1;const Fa=(t,e,r=0)=>(Pa.encode(t,e,r),e),Aa=t=>Pa.encodingLength(t),Li=(t,e)=>{const r=e.byteLength,n=Aa(t),i=n+Aa(r),s=new Uint8Array(i+r);return Fa(t,s,0),Fa(r,s,n),s.set(e,i),new r1(t,r,e,s)};class r1{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Na=({name:t,code:e,encode:r})=>new n1(t,e,r);class n1{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Li(this.code,r):r.then(n=>Li(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Ra=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),i1=Na({name:"sha2-256",code:18,encode:Ra("SHA-256")}),s1=Na({name:"sha2-512",code:19,encode:Ra("SHA-512")});var o1=Object.freeze({__proto__:null,sha256:i1,sha512:s1});const xa=0,a1="identity",Ta=wa;var c1=Object.freeze({__proto__:null,identity:{code:xa,name:a1,encode:Ta,digest:t=>Li(xa,Ta(t))}});new TextEncoder,new TextDecoder;const La=ft(ft(ft(ft(ft(ft(ft(ft(ft(ft({},ry),iy),oy),cy),ly),_y),Oy),Fy),Ty),ky);ft(ft({},o1),c1);function u1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function ja(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Ua=ja("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ji=ja("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=u1(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),h1=ft({utf8:Ua,"utf-8":Ua,hex:La.base16,latin1:ji,ascii:ji,binary:ji},La);function l1(t,e="utf8"){const r=h1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}const Ca="wc",f1=2,Ui="core",Vt=`${Ca}@${2}:${Ui}:`,p1={name:Ui,logger:"error"},d1={database:":memory:"},g1="crypto",Ma="client_ed25519_seed",y1=Z.ONE_DAY,b1="keychain",v1="0.3",m1="messages",w1="0.3",_1=Z.SIX_HOURS,E1="publisher",ka="irn",S1="error",Da="wss://relay.walletconnect.com",O1="relayer",st={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},I1="_subscription",_n={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},za=Z.ONE_SECOND,P1="2.4.3",F1="0.3",Tt={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},A1="subscription",N1="0.3",R1=Z.FIVE_SECONDS*1e3,x1="pairing",T1="0.3",Gr={wc_pairingDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:0},res:{ttl:Z.ONE_DAY,prompt:!1,tag:0}}},Lt={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},L1="history",j1="0.3",U1="expirer",Et={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},C1="0.3";class M1{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=b1,this.version=v1,this.initialized=!1,this.storagePrefix=Vt,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=q("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Pe.generateChildLogger(r,this.name)}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Wo(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Yo(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class k1{constructor(e,r,n){this.core=e,this.logger=r,this.name=g1,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=wo(i);return mo(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=qp();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),c=wo(s),a=bi();return await Qf(a,i,y1,c)},this.generateSharedKey=(i,s,c)=>{this.isInitialized();const a=this.getPrivateKey(i),l=$p(a,s);return this.setSymKey(l,c)},this.setSymKey=async(i,s)=>{this.isInitialized();const c=s||Gp(i);return await this.keychain.set(c,i),c},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,c)=>{this.isInitialized();const a=Ho(c),l=jr(s);if(Bo(a)){const w=a.senderPublicKey,m=a.receiverPublicKey;i=await this.generateSharedKey(w,m)}const h=this.getSymKey(i),{type:f,senderPublicKey:O}=a;return Yp({type:f,symKey:h,message:l,senderPublicKey:O})},this.decode=async(i,s,c)=>{this.isInitialized();const a=Zp(s,c);if(Bo(a)){const f=a.receiverPublicKey,O=a.senderPublicKey;i=await this.generateSharedKey(f,O)}const l=this.getSymKey(i),h=Jp({symKey:l,encoded:s});return Yn(h)},this.core=e,this.logger=Pe.generateChildLogger(r,this.name),this.keychain=n||new M1(this.core,this.logger)}get context(){return Pe.getLoggerContext(this.logger)}getPayloadType(e){const r=vi(e);return kr(r.type)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Ma)}catch{e=bi(),await this.keychain.set(Ma,e)}return l1(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class D1 extends Uh{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=m1,this.version=w1,this.initialized=!1,this.storagePrefix=Vt,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=yn(i);let c=this.messages.get(n);return typeof c>"u"&&(c={}),typeof c[s]<"u"||(c[s]=i,this.messages.set(n,c),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),c=yn(i);return typeof s[c]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Pe.generateChildLogger(e,this.name),this.core=r}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Wo(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Yo(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class z1 extends Ch{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new at.exports.EventEmitter,this.name=E1,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(n,i,s)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const c=s?.ttl||_1,a=mi(s),l=s?.prompt||!1,h=s?.tag||0,f={topic:n,message:i,opts:{ttl:c,relay:a,prompt:l,tag:h}},O=yn(i);this.queue.set(O,f);try{await await Jo(this.rpcPublish(n,i,c,a,l,h),this.publishTimeout),this.relayer.events.emit(st.publish,f)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(st.connection_stalled);return}this.onPublish(O,f),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(c){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(c),c}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Pe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Pe.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,c){var a,l,h,f;const O={method:wi(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:c}};return lt((a=O.params)==null?void 0:a.prompt)&&((l=O.params)==null||delete l.prompt),lt((h=O.params)==null?void 0:h.tag)&&((f=O.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:O}),this.relayer.provider.request(O)}onPublish(e,r){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Pr.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class K1{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var H1=Object.defineProperty,B1=Object.defineProperties,V1=Object.getOwnPropertyDescriptors,Ka=Object.getOwnPropertySymbols,q1=Object.prototype.hasOwnProperty,$1=Object.prototype.propertyIsEnumerable,Ha=(t,e,r)=>e in t?H1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,En=(t,e)=>{for(var r in e||(e={}))q1.call(e,r)&&Ha(t,r,e[r]);if(Ka)for(var r of Ka(e))$1.call(e,r)&&Ha(t,r,e[r]);return t},Ci=(t,e)=>B1(t,V1(e));class G1 extends Dh{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new K1,this.events=new at.exports.EventEmitter,this.name=A1,this.version=N1,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Vt,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=mi(i),c={topic:n,relay:s};this.pending.set(n,c);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const c=new Z.Watch;c.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),c.stop(this.pendingSubscriptionWatchLabel),i(!0)),c.elapsed(this.pendingSubscriptionWatchLabel)>=R1&&(clearInterval(a),c.stop(this.pendingSubscriptionWatchLabel),s(!1))},this.pollingInterval)}),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Pe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear(),this.initialized=!1}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=mi(n);await this.rpcUnsubscribe(e,r,i);const s=qe("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:wi(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Jo(this.relayer.provider.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(st.connection_stalled)}return yn(e+this.clientId)}rpcUnsubscribe(e,r,n){const i={method:wi(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.provider.request(i)}onSubscribe(e,r){this.setSubscription(e,Ci(En({},r),{id:e})),this.pending.delete(r.topic)}onResubscribe(e,r){this.addSubscription(e,Ci(En({},r),{id:e})),this.pending.delete(r.topic)}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,En({},r)),this.topicMap.set(r.topic,e),this.events.emit(Tt.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Tt.deleted,Ci(En({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Tt.sync)}async reset(){this.cached.length&&await Promise.all(this.cached.map(async e=>await this.resubscribe(e))),this.events.emit(Tt.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async resubscribe(e){if(!this.ids.includes(e.id)){const{topic:r,relay:n}=e,i={topic:r,relay:n};this.pending.set(i.topic,i);const s=await this.rpcSubscribe(i.topic,i.relay);this.onResubscribe(s,i)}}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}checkPending(){this.relayer.transportExplicitlyClosed||this.pending.forEach(async e=>{const r=await this.rpcSubscribe(e.topic,e.relay);this.onSubscribe(r,e)})}registerEventListeners(){this.relayer.core.heartbeat.on(Pr.HEARTBEAT_EVENTS.pulse,()=>{this.checkPending()}),this.relayer.on(st.connect,async()=>{await this.onConnect()}),this.relayer.on(st.disconnect,()=>{this.onDisconnect()}),this.events.on(Tt.created,async e=>{const r=Tt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Tt.deleted,async e=>{const r=Tt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var W1=Object.defineProperty,Ba=Object.getOwnPropertySymbols,Y1=Object.prototype.hasOwnProperty,J1=Object.prototype.propertyIsEnumerable,Va=(t,e,r)=>e in t?W1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,X1=(t,e)=>{for(var r in e||(e={}))Y1.call(e,r)&&Va(t,r,e[r]);if(Ba)for(var r of Ba(e))J1.call(e,r)&&Va(t,r,e[r]);return t};class Z1 extends Mh{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new at.exports.EventEmitter,this.name=O1,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Pe.generateChildLogger(e.logger,this.name):rt(Pe.getDefaultLoggerOptions({level:e.logger||S1})),this.messages=new D1(this.logger,e.core),this.subscriber=new G1(this,this.logger),this.publisher=new z1(this,this.logger),this.relayUrl=e?.relayUrl||Da,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.provider=await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Pe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r})}async subscribe(e,r){this.isInitialized();let n="";return await Promise.all([new Promise(i=>{this.subscriber.once(Tt.created,s=>{s.topic===e&&i()})}),new Promise(async i=>{n=await this.subscriber.subscribe(e,r),i()})]),n}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(st.transport_closed))}async transportOpen(e){if(!this.reconnecting){this.relayUrl=e||this.relayUrl,this.transportExplicitlyClosed=!1,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Tt.resubscribed,()=>{r()})}),await Promise.race([new Promise(async r=>{await this.provider.connect(),this.removeListener(st.transport_closed,this.rejectTransportOpen),r()}),new Promise(r=>this.once(st.transport_closed,this.rejectTransportOpen))])])}catch(r){const n=r;if(!/socket hang up/i.test(n.message))throw r;this.logger.error(r),this.events.emit(st.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||(await this.transportClose(),await new Promise(r=>setTimeout(r,za)),await this.transportOpen(e))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);return new qr(new Dg(fd({sdkVersion:P1,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e})))}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,n):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Ni(e)){if(!e.method.endsWith(I1))return;const r=e.params,{topic:n,message:i}=r.data,s={topic:n,message:i};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(X1({type:"event",event:r.id},s)),this.events.emit(r.id,s),await this.acknowledgePayload(e),await this.onMessageEvent(s)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(st.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Ai(e.id,!0);await this.provider.connection.send(r)}registerEventListeners(){this.provider.on(_n.payload,e=>this.onProviderPayload(e)),this.provider.on(_n.connect,()=>{this.events.emit(st.connect)}),this.provider.on(_n.disconnect,()=>{this.events.emit(st.disconnect),this.attemptToReconnect()}),this.provider.on(_n.error,e=>this.events.emit(st.error,e)),this.events.on(st.connection_stalled,async()=>{await this.restartTransport()})}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.transportOpen()},Z.toMiliseconds(za))}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Q1=Object.defineProperty,qa=Object.getOwnPropertySymbols,e0=Object.prototype.hasOwnProperty,t0=Object.prototype.propertyIsEnumerable,$a=(t,e,r)=>e in t?Q1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ga=(t,e)=>{for(var r in e||(e={}))e0.call(e,r)&&$a(t,r,e[r]);if(qa)for(var r of qa(e))t0.call(e,r)&&$a(t,r,e[r]);return t};class Sn extends kh{constructor(e,r,n,i=Vt,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=F1,this.cached=[],this.initialized=!1,this.storagePrefix=Vt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{Ld(c)?this.map.set(c.id,c):jd(c)?this.map.set(c.topic,c):this.getKey&&c!==null&&!lt(c)&&this.map.set(this.getKey(c),c)}),this.cached=[],this.initialized=!0)},this.set=async(c,a)=>{this.isInitialized(),this.map.has(c)?await this.update(c,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:a}),this.map.set(c,a),await this.persist())},this.get=c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c)),this.getAll=c=>(this.isInitialized(),c?this.values.filter(a=>Object.keys(c).every(l=>zg(a[l],c[l]))):this.values),this.update=async(c,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:a});const l=Ga(Ga({},this.getData(c)),a);this.map.set(c,l),await this.persist()},this.delete=async(c,a)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:a}),this.map.delete(c),await this.persist())},this.logger=Pe.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class r0{constructor(e,r){this.core=e,this.logger=r,this.name=x1,this.version=T1,this.events=new at.exports,this.initialized=!1,this.storagePrefix=Vt,this.ignoredPayloadTypes=[rr],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=bi(),i=await this.core.crypto.setSymKey(n),s=xt(Z.FIVE_MINUTES),c={protocol:ka},a={topic:i,expiry:s,relay:c,active:!1},l=Sd({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:c});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:l}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:c}=_d(n.uri),a=xt(Z.FIVE_MINUTES),l={topic:i,relay:c,expiry:a,active:!1};return await this.pairings.set(i,l),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:c}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),l},this.activate=async({topic:n})=>{this.isInitialized();const i=xt(Z.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:a,reject:l}=nr();this.events.once(ke("pairing_ping",s),({error:h})=>{h?l(h):a()}),await c()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",qe("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const c=vn(i,s),a=await this.core.crypto.encode(n,c),l=Gr[i].req;return this.core.history.set(n,c),await this.core.relayer.publish(n,a,l),c.id},this.sendResult=async(n,i,s)=>{const c=Ai(n,s),a=await this.core.crypto.encode(i,c),l=await this.core.history.get(i,n),h=Gr[l.request.method].res;await this.core.relayer.publish(i,a,h),await this.core.history.resolve(c)},this.sendError=async(n,i,s)=>{const c=mn(n,s),a=await this.core.crypto.encode(i,c),l=await this.core.history.get(i,n),h=Gr[l.request.method]?Gr[l.request.method].res:Gr.unregistered_method.res;await this.core.relayer.publish(i,a,h),await this.core.history.resolve(c)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,qe("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Bt(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n,c=s.method;if(this.pairings.keys.includes(i))switch(c){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,c=(await this.core.history.get(i,s.id)).request.method;if(this.pairings.keys.includes(i))switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(c)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{kt(i)?this.events.emit(ke("pairing_ping",s),{}):Pt(i)&&this.events.emit(ke("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.sendResult(s,n,!0),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:c}=i;try{if(this.registeredMethods.includes(c))return;const a=qe("WC_METHOD_UNSUPPORTED",c);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(qe("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!bt(n)){const{message:i}=q("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!Td(n.uri)){const{message:i}=q("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!bt(n)){const{message:s}=q("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!bt(n)){const{message:s}=q("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!Ge(n,!1)){const{message:i}=q("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Bt(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=q("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Pe.generateChildLogger(r,this.name),this.pairings=new Sn(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Pe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(st.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);Ni(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Ri(i)&&(await this.core.history.resolve(i),this.onRelayEventResponse({topic:r,payload:i}))})}registerExpirerEvents(){this.core.expirer.on(Et.expired,async e=>{const{topic:r}=Zo(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class n0 extends jh{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new at.exports.EventEmitter,this.name=L1,this.version=j1,this.cached=[],this.initialized=!1,this.storagePrefix=Vt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const c={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s};this.records.set(c.id,c),this.events.emit(Lt.created,c)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Pt(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(Lt.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Lt.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Pe.generateChildLogger(r,this.name)}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:vn(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Lt.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Lt.created,e=>{const r=Lt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Lt.updated,e=>{const r=Lt.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Lt.deleted,e=>{const r=Lt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class i0 extends zh{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new at.exports.EventEmitter,this.name=U1,this.version=C1,this.cached=[],this.initialized=!1,this.storagePrefix=Vt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),c={target:s,expiry:i};this.expirations.set(s,c),this.checkExpiry(s,c),this.events.emit(Et.created,{target:s,expiration:c})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Et.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Pe.generateChildLogger(r,this.name)}get context(){return Pe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return pd(e);if(typeof e=="number")return dd(e);const{message:r}=q("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Et.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;Z.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Et.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Pr.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Et.created,e=>{const r=Et.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Et.expired,e=>{const r=Et.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Et.deleted,e=>{const r=Et.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var s0=Object.defineProperty,Wa=Object.getOwnPropertySymbols,o0=Object.prototype.hasOwnProperty,a0=Object.prototype.propertyIsEnumerable,Ya=(t,e,r)=>e in t?s0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ja=(t,e)=>{for(var r in e||(e={}))o0.call(e,r)&&Ya(t,r,e[r]);if(Wa)for(var r of Wa(e))a0.call(e,r)&&Ya(t,r,e[r]);return t};class Mi extends Lh{constructor(e){super(e),this.protocol=Ca,this.version=f1,this.name=Ui,this.events=new at.exports.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Da;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:rt(Pe.getDefaultLoggerOptions({level:e?.logger||p1.logger}));this.logger=Pe.generateChildLogger(r,this.name),this.heartbeat=new Pr.HeartBeat,this.crypto=new k1(this,this.logger,e?.keychain),this.history=new n0(this,this.logger),this.expirer=new i0(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new lu(Ja(Ja({},d1),e?.storageOptions)),this.relayer=new Z1({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new r0(this,this.logger)}static async init(e){const r=new Mi(e);return await r.initialize(),r}get context(){return Pe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const c0=Mi,Xa="wc",Za=2,Qa="client",ki=`${Xa}@${Za}:${Qa}:`,Di={name:Qa,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},u0="proposal",h0="session",On=Z.SEVEN_DAYS,l0="engine",Wr={wc_sessionPropose:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1115}}},zi={min:Z.FIVE_MINUTES,max:Z.SEVEN_DAYS},f0="request";var p0=Object.defineProperty,d0=Object.defineProperties,g0=Object.getOwnPropertyDescriptors,ec=Object.getOwnPropertySymbols,y0=Object.prototype.hasOwnProperty,b0=Object.prototype.propertyIsEnumerable,tc=(t,e,r)=>e in t?p0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,St=(t,e)=>{for(var r in e||(e={}))y0.call(e,r)&&tc(t,r,e[r]);if(ec)for(var r of ec(e))b0.call(e,r)&&tc(t,r,e[r]);return t},Ki=(t,e)=>d0(t,g0(e));class v0 extends Hh{constructor(e){super(e),this.name=l0,this.events=new at.exports,this.initialized=!1,this.ignoredPayloadTypes=[rr],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Wr)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const n=Ki(St({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:c,sessionProperties:a,relays:l}=n;let h=i,f,O=!1;if(h&&(O=this.client.core.pairing.pairings.get(h).active),!h||!O){const{topic:A,uri:y}=await this.client.core.pairing.create();h=A,f=y}const w=await this.client.core.crypto.generateKeyPair(),m=St({requiredNamespaces:s,optionalNamespaces:c,relays:l??[{protocol:ka}],proposer:{publicKey:w,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:_,resolve:x,done:U}=nr();if(this.events.once(ke("session_connect"),async({error:A,session:y})=>{if(A)_(A);else if(y){y.self.publicKey=w;const S=Ki(St({},y),{requiredNamespaces:y.requiredNamespaces,optionalNamespaces:y.optionalNamespaces});await this.client.session.set(y.topic,S),await this.setExpiry(y.topic,y.expiry),h&&await this.client.core.pairing.updateMetadata({topic:h,metadata:y.peer.metadata}),x(S)}}),!h){const{message:A}=q("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(A)}const H=await this.sendRequest(h,"wc_sessionPropose",m),I=xt(Z.FIVE_MINUTES);return await this.setProposal(H,St({id:H,expiry:I},m)),{uri:f,approval:U}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:c}=r,a=this.client.proposal.get(n);let{pairingTopic:l,proposer:h,requiredNamespaces:f,optionalNamespaces:O}=a;Hr(f)||(f=Fd(s,"approve()"));const w=await this.client.core.crypto.generateKeyPair(),m=h.publicKey,_=await this.client.core.crypto.generateSharedKey(w,m);l&&n&&(await this.client.core.pairing.updateMetadata({topic:l,metadata:h.metadata}),await this.sendResult(n,l,{relay:{protocol:i??"irn"},responderPublicKey:w}),await this.client.proposal.delete(n,qe("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:l}));const x=St({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:f,optionalNamespaces:O,controller:{publicKey:w,metadata:this.client.metadata},expiry:xt(On)},c&&{sessionProperties:c});await this.client.core.relayer.subscribe(_);const U=await this.sendRequest(_,"wc_sessionSettle",x),{done:H,resolve:I,reject:A}=nr();this.events.once(ke("session_approve",U),({error:S})=>{S?A(S):I(this.client.session.get(_))});const y=Ki(St({},x),{topic:_,acknowledged:!1,self:x.controller,peer:{publicKey:h.publicKey,metadata:h.metadata},controller:w});return await this.client.session.set(_,y),await this.setExpiry(_,xt(On)),{topic:_,acknowledged:H}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,qe("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:i}),{done:c,resolve:a,reject:l}=nr();return this.events.once(ke("session_update",s),({error:h})=>{h?l(h):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:c}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest(n,"wc_sessionExtend",{}),{done:s,resolve:c,reject:a}=nr();return this.events.once(ke("session_extend",i),({error:l})=>{l?a(l):c()}),await this.setExpiry(n,xt(On)),{acknowledged:s}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:c}=r,a=await this.sendRequest(s,"wc_sessionRequest",{request:i,chainId:n},c),{done:l,resolve:h,reject:f}=nr(c);return this.events.once(ke("session_request",a),({error:O,result:w})=>{O?f(O):h(w)}),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n}),await l()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;kt(i)?await this.sendResult(s,n,i.result):Pt(i)&&await this.sendError(s,n,i.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest(n,"wc_sessionPing",{}),{done:s,resolve:c,reject:a}=nr();this.events.once(ke("session_ping",i),({error:l})=>{l?a(l):c()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest(n,"wc_sessionEvent",{event:i,chainId:s})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest(n,"wc_sessionDelete",qe("USER_DISCONNECTED")),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Rd(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,qe("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.deleteSymKey(r),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,qe("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=Wr.wc_sessionRequest.req.ttl,{id:i,topic:s,params:c}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:c}),n&&this.client.core.expirer.set(i,xt(n))},this.sendRequest=async(r,n,i,s)=>{const c=vn(n,i),a=await this.client.core.crypto.encode(r,c),l=Wr[n].req;return s&&(l.ttl=s),this.client.core.history.set(r,c),this.client.core.relayer.publish(r,a,l),c.id},this.sendResult=async(r,n,i)=>{const s=Ai(r,i),c=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),l=Wr[a.request.method].res;this.client.core.relayer.publish(n,c,l),await this.client.core.history.resolve(s)},this.sendError=async(r,n,i)=>{const s=mn(r,i),c=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),l=Wr[a.request.method].res;this.client.core.relayer.publish(n,c,l),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{Bt(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Bt(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(St({},n.params));const c=xt(Z.FIVE_MINUTES),a=St({id:s,pairingTopic:r,expiry:c},i);await this.setProposal(s,a),this.client.events.emit("session_proposal",{id:s,params:a})}catch(c){await this.sendError(s,r,c),this.client.logger.error(c)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(kt(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const c=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:c});const a=c.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const l=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const h=await this.client.core.crypto.generateSharedKey(a,l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:h});const f=await this.client.core.relayer.subscribe(h);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:f}),await this.client.core.pairing.activate({topic:r})}else Pt(n)&&(await this.client.proposal.delete(i,qe("USER_DISCONNECTED")),this.events.emit(ke("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:c,controller:a,expiry:l,namespaces:h,requiredNamespaces:f,optionalNamespaces:O,sessionProperties:w}=n.params,m=St({topic:r,relay:c,expiry:l,namespaces:h,acknowledged:!0,requiredNamespaces:f,optionalNamespaces:O,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},w&&{sessionProperties:w});await this.sendResult(n.id,r,!0),this.events.emit(ke("session_connect"),{session:m})}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;kt(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(ke("session_approve",i),{})):Pt(n)&&(await this.client.session.delete(r,qe("USER_DISCONNECTED")),this.events.emit(ke("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidUpdate(St({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult(s,r,!0),this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(c){await this.sendError(s,r,c),this.client.logger.error(c)}},this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;kt(n)?this.events.emit(ke("session_update",i),{}):Pt(n)&&this.events.emit(ke("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,xt(On)),await this.sendResult(i,r,!0),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;kt(n)?this.events.emit(ke("session_extend",i),{}):Pt(n)&&this.events.emit(ke("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{kt(n)?this.events.emit(ke("session_ping",i),{}):Pt(n)&&this.events.emit(ke("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),this.client.core.relayer.once(st.publish,async()=>{await this.deleteSession(r)}),await this.sendResult(i,r,!0),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(St({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.client.events.emit("session_request",{id:i,topic:r,params:s})}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;kt(n)?this.events.emit(ke("session_request",i),{result:n.result}):Pt(n)&&this.events.emit(ke("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidEmit(St({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s})}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.isValidConnect=async r=>{if(!bt(r)){const{message:l}=q("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:c,relays:a}=r;if(lt(n)||await this.isValidPairingTopic(n),!Hd(a,!0)){const{message:l}=q("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(l)}!lt(i)&&Hr(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!lt(s)&&Hr(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),lt(c)||this.validateSessionProps(c,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=Kd(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!bt(r))throw new Error(q("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:c}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),l=bn(i,"approve()");if(l)throw new Error(l.message);const h=Si(a.requiredNamespaces,i,"approve()","requiredNamespaces");if(h)throw new Error(h.message);if(!Ge(s,!0)){const{message:f}=q("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(f)}if(Object.keys(i).length>Object.keys(a.requiredNamespaces).length){const f=Object.keys(a.optionalNamespaces).filter(m=>i[m]),O={};for(const m in a.optionalNamespaces)f.includes(m)&&(O[m]=a.optionalNamespaces[m]);const w=Si(O,i,"approve()","optionalNamespaces");if(w)throw new Error(w.message)}lt(c)||this.validateSessionProps(c,"sessionProperties")},this.isValidReject=async r=>{if(!bt(r)){const{message:s}=q("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!Vd(i)){const{message:s}=q("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!bt(r)){const{message:h}=q("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(h)}const{relay:n,controller:i,namespaces:s,expiry:c}=r;if(!na(n)){const{message:h}=q("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const a=Ud(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const l=bn(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);if(Bt(c)){const{message:h}=q("EXPIRED","onSessionSettleRequest()");throw new Error(h)}},this.isValidUpdate=async r=>{if(!bt(r)){const{message:l}=q("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(l)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),c=bn(i,"update()");if(c)throw new Error(c.message);const a=Si(s.requiredNamespaces,i,"update()","requiredNamespaces");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!bt(r)){const{message:i}=q("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!bt(r)){const{message:l}=q("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(l)}const{topic:n,request:i,chainId:s,expiry:c}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!ia(a,s)){const{message:l}=q("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(l)}if(!qd(i)){const{message:l}=q("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(l)}if(!Wd(a,s,i.method)){const{message:l}=q("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(l)}if(c&&!Jd(c,zi)){const{message:l}=q("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${zi.min} and ${zi.max}`);throw new Error(l)}},this.isValidRespond=async r=>{if(!bt(r)){const{message:s}=q("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!$d(i)){const{message:s}=q("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!bt(r)){const{message:i}=q("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!bt(r)){const{message:a}=q("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:c}=this.client.session.get(n);if(!ia(c,s)){const{message:a}=q("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!Gd(i)){const{message:a}=q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!Yd(c,s,i.name)){const{message:a}=q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!bt(r)){const{message:i}=q("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!Ge(i,!1)){const{message:s}=q("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}isInitialized(){if(!this.initialized){const{message:e}=q("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(st.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);Ni(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Ri(i)&&(await this.client.core.history.resolve(i),this.onRelayEventResponse({topic:r,payload:i}))})}registerExpirerEvents(){this.client.core.expirer.on(Et.expired,async e=>{const{topic:r,id:n}=Zo(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,q("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!Ge(e,!1)){const{message:r}=q("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Bt(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=q("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Ge(e,!1)){const{message:r}=q("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=q("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Bt(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=q("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Ge(e,!1)){const{message:r}=q("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=q("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Bd(e)){const{message:r}=q("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=q("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Bt(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=q("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class m0 extends Sn{constructor(e,r){super(e,r,u0,ki),this.core=e,this.logger=r}}class w0 extends Sn{constructor(e,r){super(e,r,h0,ki),this.core=e,this.logger=r}}class _0 extends Sn{constructor(e,r){super(e,r,f0,ki),this.core=e,this.logger=r}}class Hi extends Kh{constructor(e){super(e),this.protocol=Xa,this.version=Za,this.name=Di.name,this.events=new at.exports.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=e?.name||Di.name,this.metadata=e?.metadata||cd();const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:rt(Pe.getDefaultLoggerOptions({level:e?.logger||Di.logger}));this.core=e?.core||new c0(e),this.logger=Pe.generateChildLogger(r,this.name),this.session=new w0(this.core,this.logger),this.proposal=new m0(this.core,this.logger),this.pendingRequest=new _0(this.core,this.logger),this.engine=new v0(this)}static async init(e){const r=new Hi(e);return await r.initialize(),r}get context(){return Pe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var Bi={exports:{}};(function(t,e){var r=typeof self<"u"?self:Me,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(c){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function l(d){return d&&DataView.prototype.isPrototypeOf(d)}if(a.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(d){return d&&h.indexOf(Object.prototype.toString.call(d))>-1};function O(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function w(d){return typeof d!="string"&&(d=String(d)),d}function m(d){var v={next:function(){var C=d.shift();return{done:C===void 0,value:C}}};return a.iterable&&(v[Symbol.iterator]=function(){return v}),v}function _(d){this.map={},d instanceof _?d.forEach(function(v,C){this.append(C,v)},this):Array.isArray(d)?d.forEach(function(v){this.append(v[0],v[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(v){this.append(v,d[v])},this)}_.prototype.append=function(d,v){d=O(d),v=w(v);var C=this.map[d];this.map[d]=C?C+", "+v:v},_.prototype.delete=function(d){delete this.map[O(d)]},_.prototype.get=function(d){return d=O(d),this.has(d)?this.map[d]:null},_.prototype.has=function(d){return this.map.hasOwnProperty(O(d))},_.prototype.set=function(d,v){this.map[O(d)]=w(v)},_.prototype.forEach=function(d,v){for(var C in this.map)this.map.hasOwnProperty(C)&&d.call(v,this.map[C],C,this)},_.prototype.keys=function(){var d=[];return this.forEach(function(v,C){d.push(C)}),m(d)},_.prototype.values=function(){var d=[];return this.forEach(function(v){d.push(v)}),m(d)},_.prototype.entries=function(){var d=[];return this.forEach(function(v,C){d.push([C,v])}),m(d)},a.iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);function x(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function U(d){return new Promise(function(v,C){d.onload=function(){v(d.result)},d.onerror=function(){C(d.error)}})}function H(d){var v=new FileReader,C=U(v);return v.readAsArrayBuffer(d),C}function I(d){var v=new FileReader,C=U(v);return v.readAsText(d),C}function A(d){for(var v=new Uint8Array(d),C=new Array(v.length),M=0;M<v.length;M++)C[M]=String.fromCharCode(v[M]);return C.join("")}function y(d){if(d.slice)return d.slice(0);var v=new Uint8Array(d.byteLength);return v.set(new Uint8Array(d)),v.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:a.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:a.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():a.arrayBuffer&&a.blob&&l(d)?(this._bodyArrayBuffer=y(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||f(d))?this._bodyArrayBuffer=y(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var d=x(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?x(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(H)}),this.text=function(){var d=x(this);if(d)return d;if(this._bodyBlob)return I(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function o(d){var v=d.toUpperCase();return E.indexOf(v)>-1?v:d}function p(d,v){v=v||{};var C=v.body;if(d instanceof p){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,v.headers||(this.headers=new _(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!C&&d._bodyInit!=null&&(C=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=v.credentials||this.credentials||"same-origin",(v.headers||!this.headers)&&(this.headers=new _(v.headers)),this.method=o(v.method||this.method||"GET"),this.mode=v.mode||this.mode||null,this.signal=v.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&C)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(C)}p.prototype.clone=function(){return new p(this,{body:this._bodyInit})};function k(d){var v=new FormData;return d.trim().split("&").forEach(function(C){if(C){var M=C.split("="),L=M.shift().replace(/\+/g," "),T=M.join("=").replace(/\+/g," ");v.append(decodeURIComponent(L),decodeURIComponent(T))}}),v}function K(d){var v=new _,C=d.replace(/\r?\n[\t ]+/g," ");return C.split(/\r?\n/).forEach(function(M){var L=M.split(":"),T=L.shift().trim();if(T){var D=L.join(":").trim();v.append(T,D)}}),v}S.call(p.prototype);function $(d,v){v||(v={}),this.type="default",this.status=v.status===void 0?200:v.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in v?v.statusText:"OK",this.headers=new _(v.headers),this.url=v.url||"",this._initBody(d)}S.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},$.error=function(){var d=new $(null,{status:0,statusText:""});return d.type="error",d};var J=[301,302,303,307,308];$.redirect=function(d,v){if(J.indexOf(v)===-1)throw new RangeError("Invalid status code");return new $(null,{status:v,headers:{location:d}})},c.DOMException=s.DOMException;try{new c.DOMException}catch{c.DOMException=function(d,v){this.message=d,this.name=v;var C=Error(d);this.stack=C.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function X(d,v){return new Promise(function(C,M){var L=new p(d,v);if(L.signal&&L.signal.aborted)return M(new c.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function D(){T.abort()}T.onload=function(){var z={status:T.status,statusText:T.statusText,headers:K(T.getAllResponseHeaders()||"")};z.url="responseURL"in T?T.responseURL:z.headers.get("X-Request-URL");var Q="response"in T?T.response:T.responseText;C(new $(Q,z))},T.onerror=function(){M(new TypeError("Network request failed"))},T.ontimeout=function(){M(new TypeError("Network request failed"))},T.onabort=function(){M(new c.DOMException("Aborted","AbortError"))},T.open(L.method,L.url,!0),L.credentials==="include"?T.withCredentials=!0:L.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&a.blob&&(T.responseType="blob"),L.headers.forEach(function(z,Q){T.setRequestHeader(Q,z)}),L.signal&&(L.signal.addEventListener("abort",D),T.onreadystatechange=function(){T.readyState===4&&L.signal.removeEventListener("abort",D)}),T.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return X.polyfill=!0,s.fetch||(s.fetch=X,s.Headers=_,s.Request=p,s.Response=$),c.Headers=_,c.Request=p,c.Response=$,c.fetch=X,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(Bi,Bi.exports);var rc=pt(Bi.exports);const nc={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},ic=10;class In{constructor(e){if(this.url=e,this.events=new at.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!da(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const n=jr(e),i=await(await rc(this.url,Object.assign(Object.assign({},nc),{body:n}))).json();this.onPayload({data:i})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!da(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{const r=jr({id:1,jsonrpc:"2.0",method:"test",params:[]});await rc(e,Object.assign(Object.assign({},nc),{body:r})),this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Yn(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=mn(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return ca(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>ic&&this.events.setMaxListeners(ic)}}function E0(t){var e;const r=(e=t[Object.keys(t)[0]])==null?void 0:e.chains[0];return[r.split(":")[0],r.split(":")[1]]}function qt(t,e){let r;return e.rpcMap&&(r=e.rpcMap[S0([t])]),r}function S0(t){return Number(t[0].split(":")[1])}const Pn=(t,e)=>{const r=n=>{n.request!==e.request||n.topic!==e.topic||(t.events.removeListener("session_request_sent",r),O0())};t.on("session_request_sent",r)};function O0(){if(typeof window<"u")try{const t=window.localStorage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(t){const e=JSON.parse(t);window.open(e.href,"_self","noreferrer noopener")}}catch(t){console.error(t)}}class I0{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=this.getDefaultChainId()}async request(e){var r;switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":{const n=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";return this.setDefaultChain(parseInt(n,16).toString()),null}case"eth_chainId":return this.getDefaultChainId()}return this.namespace.methods.includes(e.request.method)?(Pn(this.client,e),await this.client.request(e)):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){if(this.chainId=parseInt(e),!this.httpProviders[e]){const n=r||qt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}requestAccounts(){return this.getAccounts()}createHttpProvider(e,r){const n=r||qt(e,this.namespace);return typeof n>"u"?void 0:new qr(new In(n))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return parseInt(e.split(":")[1])}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}}class P0{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(Pn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||qt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||qt(e,this.namespace);return typeof n>"u"?void 0:new qr(new In(n))}}class F0{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(Pn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||qt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||qt(e,this.namespace);return typeof n>"u"?void 0:new qr(new In(n))}}class A0{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(Pn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||qt(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||qt(e,this.namespace);return typeof n>"u"?void 0:new qr(new In(n))}}const sc="error",N0="wss://relay.walletconnect.com",R0="wc",x0="universal_provider",oc=`${R0}@${2}:${x0}:`;var T0=Object.defineProperty,L0=Object.defineProperties,j0=Object.getOwnPropertyDescriptors,ac=Object.getOwnPropertySymbols,U0=Object.prototype.hasOwnProperty,C0=Object.prototype.propertyIsEnumerable,cc=(t,e,r)=>e in t?T0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,uc=(t,e)=>{for(var r in e||(e={}))U0.call(e,r)&&cc(t,r,e[r]);if(ac)for(var r of ac(e))C0.call(e,r)&&cc(t,r,e[r]);return t},M0=(t,e)=>L0(t,j0(e));class Fn{constructor(e){this.events=new at.exports,this.rpcProviders={},this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:rt(Pe.getDefaultLoggerOptions({level:e?.logger||sc}))}static async init(e){const r=new Fn(e);return await r.initialize(),r}async request(e,r){const[n,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:uc({},e),chainId:`${n}:${i}`,topic:this.session.topic})}sendAsync(e,r,n){this.request(e,n).then(i=>r(null,i)).catch(i=>r(i,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:qe("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),this.createProviders(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});return r&&(this.uri=r,this.events.emit("display_uri",r)),this.session=await n(),this.onSessionUpdate(),this.onConnect(),this.session}setDefaultChain(e,r){try{const[n,i]=this.validateChain(e);this.getProvider(n).setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Kr(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.namespaces&&this.createProviders(),this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.onSessionUpdate()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Hi.init({logger:this.providerOpts.logger||sc,relayUrl:this.providerOpts.relayUrl||N0,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");Object.keys(this.namespaces).forEach(e=>{var r;const n=Object.assign({},this.namespaces[e],(r=this.optionalNamespaces)==null?void 0:r[e]);switch(e){case"eip155":this.rpcProviders[e]=new I0({client:this.client,namespace:n,events:this.events});break;case"solana":this.rpcProviders[e]=new P0({client:this.client,namespace:n,events:this.events});break;case"cosmos":this.rpcProviders[e]=new F0({client:this.client,namespace:n,events:this.events});break;case"polkadot":break;case"cip34":this.rpcProviders[e]=new A0({client:this.client,namespace:n,events:this.events});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:n}=r;n.name==="accountsChanged"?this.events.emit("accountsChanged",n.data):n.name==="chainChanged"?this.onChainChanged(n.data,r.chainId):this.events.emit(n.name,n.data),this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n;const{namespaces:i}=r,s=(n=this.client)==null?void 0:n.session.get(e);this.session=M0(uc({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i}=e;if(!r||!Object.keys(r).length)throw new Error("Namespaces must be not empty");this.namespaces=r,this.optionalNamespaces=n,this.sessionProperties=i,this.persist("namespaces",r),this.persist("optionalNamespaces",n)}validateChain(e){const[r,n]=e?.split(":")||["",""];if(r&&!Object.keys(this.namespaces).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);return!r||!n?E0(this.namespaces):[r,n]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r){const[n,i]=this.validateChain(r);this.getProvider(n).setDefaultChain(i),this.events.emit("chainChanged",e)}onConnect(){this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${oc}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${oc}/${e}`)}}const k0=Fn;Ae.UniversalProvider=k0,Ae.default=Fn,Object.defineProperty(Ae,"__esModule",{value:!0})})})($i,$i.exports);const Ab=Pb($i.exports);var Nb=globalThis&&globalThis.__awaiter||function(Jt,mr,Ae,Me){function pt(re){return re instanceof Ae?re:new Ae(function(_t){_t(re)})}return new(Ae||(Ae=Promise))(function(re,_t){function Xt(rt){try{fe(Me.next(rt))}catch(Ut){_t(Ut)}}function wr(rt){try{fe(Me.throw(rt))}catch(Ut){_t(Ut)}}function fe(rt){rt.done?re(rt.value):pt(rt.value).then(Xt,wr)}fe((Me=Me.apply(Jt,mr||[])).next())})},Rb=globalThis&&globalThis.__generator||function(Jt,mr){var Ae={label:0,sent:function(){if(re[0]&1)throw re[1];return re[1]},trys:[],ops:[]},Me,pt,re,_t;return _t={next:Xt(0),throw:Xt(1),return:Xt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Xt(fe){return function(rt){return wr([fe,rt])}}function wr(fe){if(Me)throw new TypeError("Generator is already executing.");for(;_t&&(_t=0,fe[0]&&(Ae=0)),Ae;)try{if(Me=1,pt&&(re=fe[0]&2?pt.return:fe[0]?pt.throw||((re=pt.return)&&re.call(pt),0):pt.next)&&!(re=re.call(pt,fe[1])).done)return re;switch(pt=0,re&&(fe=[fe[0]&2,re.value]),fe[0]){case 0:case 1:re=fe;break;case 4:return Ae.label++,{value:fe[1],done:!1};case 5:Ae.label++,pt=fe[1],fe=[0];continue;case 7:fe=Ae.ops.pop(),Ae.trys.pop();continue;default:if(re=Ae.trys,!(re=re.length>0&&re[re.length-1])&&(fe[0]===6||fe[0]===2)){Ae=0;continue}if(fe[0]===3&&(!re||fe[1]>re[0]&&fe[1]<re[3])){Ae.label=fe[1];break}if(fe[0]===6&&Ae.label<re[1]){Ae.label=re[1],re=fe;break}if(re&&Ae.label<re[2]){Ae.label=re[2],Ae.ops.push(fe);break}re[2]&&Ae.ops.pop(),Ae.trys.pop();continue}fe=mr.call(Jt,Ae)}catch(rt){fe=[6,rt],pt=0}finally{Me=re=0}if(fe[0]&5)throw fe[1];return{value:fe[0]?fe[1]:void 0,done:!0}}},Tb={1:"https://ethereum.publicnode.com",5:"https://eth-goerli.g.alchemy.com/v2/yVhq9zPJorAWsw-F87fEabSUl7cCU6z4",137:"https://polygon-rpc.com/",80001:"https://polygon-mumbai.g.alchemy.com/v2/rVI6pOV4irVsrw20cJxc1fxK_1cSeiY0",56:"https://bsc-dataseed.binance.org/",43114:"https://api.avax.network/ext/bc/C/rpc",250:"https://rpc.fantom.network/",25:"https://evm-cronos.crypto.org",42161:"https://arb1.arbitrum.io/rpc",10:"https://mainnet.optimism.io"},Lb=["eip155:1","eip155:137","eip155:250","eip155:25","eip155:42161","eip155:10"],jb=function(){return Nb(void 0,void 0,void 0,function(){return Rb(this,function(Jt){switch(Jt.label){case 0:return[4,Ab.init({projectId:"2ec7ead81da1226703ad789c0b2f7b30",logger:"debug",relayUrl:"wss://relay.walletconnect.com"})];case 1:return[2,Jt.sent()]}})})};export{Tb as CUSTOM_RPCS_FOR_WC_V2,Lb as WC_V2_CHAINS,jb as getWalletConnectV2ProviderInstance};
