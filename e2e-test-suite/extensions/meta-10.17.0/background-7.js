LavaPack.loadBundle([[5435,{"./Index":5433,"./Replicator":5434,"./replication-info":5436,buffer:2175,events:2176,"ipfs-log":4564,logplease:5269,"orbit-db-io":5422,"p-each-series":5432,"readable-stream":5780},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("events").EventEmitter,i=e("readable-stream"),o=e("p-each-series"),s=e("ipfs-log"),a=e("./Index"),u=e("./Replicator"),c=e("./replication-info"),l=e("logplease"),f=l.create("orbit-db.store",{color:l.Colors.Blue});l.setLogLevel("ERROR");const h=e("orbit-db-io"),d={Index:a,maxHistory:-1,directory:"./orbitdb",fetchEntryTimeout:null,replicate:!0,referenceCount:64,replicationConcurrency:128,syncLocal:!1,sortFn:undefined};t.exports=class{constructor(e,t,n,i){if(!t)throw new Error("Identity required");let o=Object.assign({},d);Object.assign(o,i),this.options=o,this._type="store",this.id=n.toString(),this.identity=t,this.address=n,this.dbname=n.path||"",this.events=new r,this._ipfs=e,this._cache=i.cache;const a={canAppend:e=>e.identity.publicKey===t.publicKey};this.access=i.accessController||a,this._oplog=new s(this._ipfs,this.identity,{logId:this.id,access:this.access,sortFn:this.options.sortFn}),this._index=new this.options.Index(this.address.root),this._replicationStatus=new c,this._stats={snapshot:{bytesLoaded:-1},syncRequestsReceieved:0};try{this._replicator=new u(this,this.options.replicationConcurrency),this._loader=this._replicator,this._replicator.on("load.added",(e=>{this._replicationStatus.queued++,this._recalculateReplicationMax(e.clock?e.clock.time:0),this.events.emit("replicate",this.address.toString(),e)})),this._replicator.on("load.progress",((e,t,n,r,i)=>{this._replicationStatus.buffered>i?this._recalculateReplicationProgress(this.replicationStatus.progress+i):this._recalculateReplicationProgress(this._oplog.length+i),this._replicationStatus.buffered=i,this._recalculateReplicationMax(this.replicationStatus.progress),this.events.emit("replicate.progress",this.address.toString(),t,n,this.replicationStatus.progress,this.replicationStatus.max)}));const e=async(e,t)=>{try{for(let t of e)await this._oplog.join(t);this._replicationStatus.queued-=e.length,this._replicationStatus.buffered=this._replicator._buffer.length,await this._updateIndex();const t=this._oplog.heads;await this._cache.set("_remoteHeads",t),f.debug(`Saved heads ${t.length} [${t.map((e=>e.hash)).join(", ")}]`),this.events.emit("replicated",this.address.toString(),e.length)}catch(e){console.error(e)}};this._replicator.on("load.end",e)}catch(e){console.error("Store Error:",e)}}get all(){return Array.isArray(this._index._index)?this._index._index:Object.keys(this._index._index).map((e=>this._index._index[e]))}get index(){return this._index._index}get type(){return this._type}get key(){return this._key}get replicationStatus(){return this._replicationStatus}setIdentity(e){this.identity=e,this._oplog.setIdentity(e)}async close(){return this.options.onClose&&await this.options.onClose(this.address.toString()),this._replicator.stop(),this._replicationStatus.reset(),this._stats={snapshot:{bytesLoaded:-1},syncRequestsReceieved:0},this.events.removeAllListeners("load"),this.events.removeAllListeners("load.progress"),this.events.removeAllListeners("replicate"),this.events.removeAllListeners("replicate.progress"),this.events.removeAllListeners("replicated"),this.events.removeAllListeners("ready"),this.events.removeAllListeners("write"),await this._cache.close(),this.events.emit("closed",this.address.toString()),Promise.resolve()}async drop(){await this.close(),await this._cache.destroy(),this._index=new this.options.Index(this.address.root),this._oplog=new s(this._ipfs,this.identity,{logId:this.id,access:this.access,sortFn:this.options.sortFn}),this._cache=this.options.cache}async load(e,{fetchEntryTimeout:t}={}){e=e||this.options.maxHistory,t=t||this.options.fetchEntryTimeout;const n=await this._cache.get("_localHeads")||[],r=await this._cache.get("_remoteHeads")||[],i=n.concat(r);i.length>0&&this.events.emit("load",this.address.toString(),i),await o(i,(async n=>{this._recalculateReplicationMax(n.clock.time);const r=await s.fromEntryHash(this._ipfs,this.identity,n.hash,{logId:this._oplog.id,access:this.access,sortFn:this.options.sortFn,length:e,exclude:this._oplog.values,onProgressCallback:this._onLoadProgress.bind(this),timeout:t});await this._oplog.join(r,e)})),i.length>0&&await this._updateIndex(),this.events.emit("ready",this.address.toString(),this._oplog.heads)}sync(e){if(this._stats.syncRequestsReceieved+=1,f.debug(`Sync request #${this._stats.syncRequestsReceieved} ${e.length}`),0===e.length)return;return o(e,(async e=>{if(!e)return console.warn("Warning: Given input entry was 'null'."),Promise.resolve(null);const t=this.identity.provider;if(!t)throw new Error("Identity-provider is required, cannot verify entry");if(!await this.access.canAppend(e,t))return console.warn("Warning: Given input entry is not allowed in this log and was discarded (no write access)."),Promise.resolve(null);const n=Object.assign({},e);n.hash=null;const r=0===n.v?"dag-pb":"dag-cbor";return await h.write(this._ipfs,r,n,{links:["next"],onlyHash:!0})!==e.hash&&console.warn("\"WARNING! Head hash didn't match the contents"),e})).then((async e=>this._replicator.load(e.filter((e=>null!==e)))))}loadMoreFrom(e,t){this._replicator.load(t)}async saveSnapshot(){const e=this._replicator.getQueue();let t=this._oplog.toSnapshot(),r=n.from(JSON.stringify({id:t.id,heads:t.heads,size:t.values.length,type:this.type}));const o=new i;let s=new Uint16Array([r.length]),a=n.from(s.buffer);o.push(a),o.push(r);t.values.forEach((e=>{let t=n.from(JSON.stringify(e)),r=new Uint16Array([t.length]);o.push(n.from(r.buffer)),o.push(t)})),o.push(null);const u=this._ipfs.files.add?await this._ipfs.files.add(o):await this._ipfs.add(o);return await this._cache.set("snapshot",u[u.length-1]),await this._cache.set("queue",e),f.debug(`Saved snapshot: ${u[u.length-1].hash}, queue length: ${e.length}`),u}async loadFromSnapshot(e){this.events.emit("load",this.address.toString());const t=(e,t)=>Math.max(e,t.clock.time),r=await this._cache.get("queue");this.sync(r||[]);const i=await this._cache.get("snapshot");if(!i)throw new Error(`Snapshot for ${this.address} not found!`);{const e=this._ipfs.files.catReadableStream?await this._ipfs.files.catReadableStream(i.hash):await this._ipfs.catReadableStream(i.hash),r=()=>new Promise(((t,r)=>{let i=n.alloc(0),o=[];e.on("data",(e=>{if(this._byteSize+=e.length,o.length<2e4)o.push(e);else{const e=n.concat(o);i=n.concat([i,e]),o=[]}})),e.on("end",(()=>{if(o.length>0){const e=n.concat(o);i=n.concat([i,e])}function e(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;++r)n[r]=e[r];return t}const r=parseInt(new Uint16Array(e(i.slice(0,2))));let s;try{s=JSON.parse(i.slice(2,r+2))}catch(e){}let a=[],u=2+r;for(;u<i.length;){const t=parseInt(new Uint16Array(e(i.slice(u,u+2))));u+=2;const n=i.slice(u,u+t);try{const e=JSON.parse(n);a.push(e)}catch(e){}u+=t}s?(this._type=s.type,t({values:a,id:s.id,heads:s.heads,type:s.type})):t({values:a,id:null,heads:null,type:null})}))})),o=(e,t,n,r)=>{this._recalculateReplicationStatus(n,t.clock.time),this._onLoadProgress(e,t)},a=await r();if(this._recalculateReplicationMax(a.values.reduce(t,0)),a){const e=await s.fromJSON(this._ipfs,this.identity,a,{access:this.access,sortFn:this.options.sortFn,length:-1,timeout:1e3,onProgressCallback:o});await this._oplog.join(e),await this._updateIndex(),this.events.emit("replicated",this.address.toString())}this.events.emit("ready",this.address.toString(),this._oplog.heads)}return this}async _updateIndex(){this._recalculateReplicationMax(),await this._index.updateIndex(this._oplog),this._recalculateReplicationProgress()}async syncLocal(){const e=await this._cache.get("_localHeads")||[],t=await this._cache.get("_remoteHeads")||[],n=e.concat(t);for(let e=0;e<n.length;e++){const t=n[e];if(!this._oplog.heads.includes(t)){await this.load();break}}}async _addOperation(e,t,n,r){if(this._oplog){this.options.syncLocal&&await this.syncLocal();const t=await this._oplog.append(e,this.options.referenceCount);return this._recalculateReplicationStatus(this.replicationStatus.progress+1,t.clock.time),await this._cache.set("_localHeads",[t]),await this._updateIndex(),this.events.emit("write",this.address.toString(),t,this._oplog.heads),r&&r(t),t.hash}}_addOperationBatch(e,t,n,r){throw new Error("Not implemented!")}_onLoadProgress(e,t,n,r){this._recalculateReplicationStatus(n,r),this.events.emit("load.progress",this.address.toString(),e,t,this.replicationStatus.progress,this.replicationStatus.max)}_recalculateReplicationProgress(e){this._replicationStatus.progress=Math.max.apply(null,[this._replicationStatus.progress,this._oplog.length,e||0]),this._recalculateReplicationMax(this.replicationStatus.progress)}_recalculateReplicationMax(e){this._replicationStatus.max=Math.max.apply(null,[this._replicationStatus.max,this._oplog.length,e||0])}_recalculateReplicationStatus(e,t){this._recalculateReplicationProgress(e),this._recalculateReplicationMax(t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>orbit-db>orbit-db-store"}],[5436,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=class{constructor(){this.reset()}reset(){this.progress=0,this.max=0,this.buffered=0,this.queued=0}}}}},{package:"3box>orbit-db>orbit-db-store"}],[5437,{"./db-manifest":5438,"./exchange-heads":5439,"./orbit-db-address":5440,"./utils":5441,logplease:5269,"orbit-db-access-controllers":5394,"orbit-db-cache":5406,"orbit-db-counterstore":5408,"orbit-db-docstore":5411,"orbit-db-eventstore":5413,"orbit-db-feedstore":5415,"orbit-db-identity-provider":5416,"orbit-db-keystore":5423,"orbit-db-kvstore":5429,"orbit-db-pubsub":5430,path:5476},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("path"),i=e("orbit-db-eventstore"),o=e("orbit-db-feedstore"),s=e("orbit-db-kvstore"),a=e("orbit-db-counterstore"),u=e("orbit-db-docstore"),c=e("orbit-db-pubsub"),l=e("orbit-db-cache"),f=e("orbit-db-keystore"),h=e("orbit-db-identity-provider");let d=e("orbit-db-access-controllers");const p=e("./orbit-db-address"),g=e("./db-manifest"),m=e("./exchange-heads"),{isDefined:b,io:y}=e("./utils"),_=e("logplease"),v=_.create("orbit-db");_.setLogLevel("ERROR");let w={counter:a,eventlog:i,feed:o,docstore:u,keyvalue:s};class E{constructor(e,t,n={}){if(!b(e))throw new Error("IPFS is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");if(!b(t))throw new Error("identity is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");this._ipfs=e,this.identity=t,this.id=n.peerId,this._pubsub=n&&n.broker?new n.broker(this._ipfs):new c(this._ipfs,this.id),this.directory=n.directory||"./orbitdb",this.keystore=n.keystore,this.cache=n.cache||l,this.stores={},this._directConnections={},d=n.AccessControllers||d}static async createInstance(e,t={}){if(!b(e))throw new Error("IPFS is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");const{id:n}=await e.id(),i=t.directory||"./orbitdb",o=t.keystore||f.create(r.join(i,n,"/keystore")),s=t.identity||await h.createIdentity({id:t.id||n,keystore:o});t=Object.assign({},t,{peerId:n,directory:i,keystore:o});return new E(e,s,t)}async feed(e,t={}){return t=Object.assign({create:!0,type:"feed"},t),this.open(e,t)}async log(e,t={}){return t=Object.assign({create:!0,type:"eventlog"},t),this.open(e,t)}async eventlog(e,t={}){return this.log(e,t)}async keyvalue(e,t={}){return t=Object.assign({create:!0,type:"keyvalue"},t),this.open(e,t)}async kvstore(e,t={}){return this.keyvalue(e,t)}async counter(e,t={}){return t=Object.assign({create:!0,type:"counter"},t),this.open(e,t)}async docs(e,t={}){return t=Object.assign({create:!0,type:"docstore"},t),this.open(e,t)}async docstore(e,t={}){return this.docs(e,t)}async disconnect(){this.keystore.close&&await this.keystore.close();const e=Object.values(this.stores);for(let t of e)await t.close(),delete this.stores[t.address.toString()];Object.keys(this._directConnections).forEach((e=>{this._directConnections[e].close(),delete this._directConnections[e]})),this._pubsub&&await this._pubsub.disconnect(),this.stores={}}async stop(){await this.disconnect()}async _createStore(e,t,n){const r=w[e];if(!r)throw new Error(`Invalid database type '${e}'`);let i;n.accessControllerAddress&&(i=await d.resolve(this,n.accessControllerAddress,n.accessController));const o=await this._loadCache(this.directory,t),s=Object.assign({replicate:!0},n,{accessController:i,keystore:this.keystore,cache:o,onClose:this._onClose.bind(this)}),a=n.identity||this.identity,u=new r(this._ipfs,a,t,s);u.events.on("write",this._onWrite.bind(this));const c=t.toString();return this.stores[c]=u,s.replicate&&this._pubsub&&this._pubsub.subscribe(c,this._onMessage.bind(this),this._onPeerConnected.bind(this)),u}_onWrite(e,t,n){if(!n)throw new Error("'heads' not defined");this._pubsub&&this._pubsub.publish(e,n)}async _onMessage(e,t){const n=this.stores[e];try{v.debug(`Received ${t.length} heads for '${e}':\n`,JSON.stringify(t.map((e=>e.hash)),null,2)),n&&t&&t.length>0&&await n.sync(t)}catch(e){v.error(e)}}async _onPeerConnected(e,t){v.debug(`New peer '${t}' connected to '${e}'`);const n=e=>this.stores[e];await m(this._ipfs,e,t,n,(e=>this._directConnections[e]),((e,t)=>this._onMessage(e,t)),(e=>this._directConnections[e._receiverID]=e));n(e)&&n(e).events.emit("peer",t)}async _onClose(e){v.debug(`Close ${e}`),this._pubsub&&await this._pubsub.unsubscribe(e),delete this.stores[e]}async _determineAddress(e,t,n={}){if(!E.isValidType(t))throw new Error(`Invalid database type '${t}'`);if(p.isValid(e))throw new Error("Given database name is an address. Please give only the name of the database!");n.accessController=Object.assign({},{name:e,type:"ipfs"},n.accessController);const i=await d.create(this,n.accessController.type,n.accessController||{}),o=await g(this._ipfs,e,t,i,n);return p.parse(r.join("/orbitdb",o,e))}async create(e,t,n={}){v.debug("create()");const r=n.directory||this.directory;v.debug(`Creating database '${e}' as ${t} in '${r}'`);const i=await this._determineAddress(e,t,n),o=await this._loadCache(r,i);if(await this._haveLocalData(o,i)&&!n.overwrite)throw new Error(`Database '${i}' already exists!`);return await this._addManifestToCache(r,i),v.debug(`Created database '${i}'`),this.open(i,n)}async determineAddress(e,t,n={}){const r=Object.assign({},{onlyHash:!0},n);return this._determineAddress(e,t,r)}async open(e,t={}){v.debug("open()"),t=Object.assign({localOnly:!1,create:!1},t),v.debug(`Open database '${e}'`);const n=t.directory||this.directory;if(v.debug(`Look from '${n}'`),!p.isValid(e)){if(t.create){if(t.create&&!t.type)throw new Error(`Database type not provided! Provide a type with 'options.type' (${E.databaseTypes.join("|")})`);return v.warn(`Not a valid OrbitDB address '${e}', creating the database`),t.overwrite=!t.overwrite||t.overwrite,this.create(e,t.type,t)}throw new Error("'options.create' set to 'false'. If you want to create a database, set 'options.create' to 'true'.")}const r=p.parse(e),i=await this._loadCache(n,r),o=await this._haveLocalData(i,r);if(v.debug((o?"Found":"Didn't find")+` database '${r}'`),t.localOnly&&!o)throw v.warn(`Database '${r}' doesn't exist!`),new Error(`Database '${r}' doesn't exist!`);v.debug(`Loading Manifest for '${r}'`);const s=await y.read(this._ipfs,r.root);if(v.debug(`Manifest for '${r}':\n${JSON.stringify(s,null,2)}`),t.type&&s.type!==t.type)throw new Error(`Database '${r}' is type '${s.type}' but was opened as '${t.type}'`);return await this._addManifestToCache(n,r),t=Object.assign({},t,{accessControllerAddress:s.accessController}),this._createStore(s.type,r,t)}async _addManifestToCache(e,t){const n=await this._loadCache(e,t);await n.set(r.join(t.toString(),"_manifest"),t.root),v.debug(`Saved manifest to IPFS as '${t.root}'`)}async _loadCache(e,t){let n;try{n=await this.cache.load(e,t)}catch(e){console.log(e),v.error("Couldn't load Cache:",e)}return n}async _haveLocalData(e,t){if(!e)return!1;const n=await e.get(r.join(t.toString(),"_manifest"));return n!==undefined&&null!==n}static get databaseTypes(){return Object.keys(w)}static isValidType(e){return Object.keys(w).includes(e)}static addDatabaseType(e,t){if(w[e])throw new Error(`Type already exists: ${e}`);w[e]=t}static getDatabaseTypes(){return w}static isValidAddress(e){return p.isValid(e)}static parseAddress(e){return p.parse(e)}}t.exports=E}}},{package:"3box>orbit-db"}],[5438,{"orbit-db-io":5422,path:5476},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("path"),i=e("orbit-db-io");t.exports=async(e,t,n,o,s)=>{const a={name:t,type:n,accessController:r.join("/ipfs",o)};return i.write(e,s.format||"dag-cbor",a,s)}}}},{package:"3box>orbit-db"}],[5439,{"ipfs-pubsub-1on1":4599,logplease:5269},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("ipfs-pubsub-1on1"),i=e("logplease"),o=i.create("exchange-heads",{color:i.Colors.Yellow});i.setLogLevel("ERROR");t.exports=async(e,t,n,i,s,a,u)=>{const c=e=>{const t=JSON.parse(e.data),{address:n,heads:r}=t;a(n,r)};let l=s(n);if(!l)try{o.debug(`Create a channel to ${n}`),l=await r.open(e,n),l.on("message",c),o.debug(`Channel created to ${n}`),u(l)}catch(e){o.error(e)}await l.connect(),o.debug(`Connected to ${n}`);const f=(h=i(t))&&h._oplog?h._oplog.heads:[];var h;return o.debug(`Send latest heads of '${t}':\n`,JSON.stringify(f.map((e=>e.hash)),null,2)),f&&await l.send(JSON.stringify({address:t,heads:f})),l}}}},{package:"3box>orbit-db"}],[5440,{cids:2212,multihashes:5320,path:5476},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("path"),i=(e("multihashes"),e("cids")),o=e=>""!==e&&" "!==e;class s{constructor(e,t){this.root=e,this.path=t}toString(){return r.join("/orbitdb",this.root,this.path)}static isValid(e){const t=e.toString().split("/").filter(((t,n)=>!((0===n||1===n)&&0===e.toString().indexOf("/orbit")&&"orbitdb"===t))).filter(o);let n;try{n=t[0].indexOf("zd")>-1||t[0].indexOf("Qm")>-1?new i(t[0]).toBaseEncodedString():null}catch(e){return!1}return null!==n}static parse(e){if(!e)throw new Error(`Not a valid OrbitDB address: ${e}`);if(!s.isValid(e))throw new Error(`Not a valid OrbitDB address: ${e}`);const t=e.toString().split("/").filter(((t,n)=>!((0===n||1===n)&&0===e.toString().indexOf("/orbit")&&"orbitdb"===t))).filter((e=>""!==e&&" "!==e));return new s(t[0],t.slice(1,t.length).join("/"))}}t.exports=s}}},{package:"3box>orbit-db"}],[5441,{"./is-defined":5442,"orbit-db-io":5422},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./is-defined"),i=e("orbit-db-io");t.exports={isDefined:r,io:i}}}},{package:"3box>orbit-db"}],[5442,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e=>e!==undefined&&null!==e}}},{package:"3box>orbit-db"}],[5444,{},function(){with(this)return function(){"use strict";return function(e,t,n){const r=async(e,t)=>{let n=0;for(const r of e)await t(await r,n++);return e};t.exports=r,t.exports.default=r}}},{package:"jest>@jest/core>p-each-series"}],[5445,{"p-reduce":5448},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("p-reduce");t.exports=(e,t)=>{const n=[];return r(e,((e,r,i)=>Promise.resolve(t(r,i)).then((e=>{n.push(e)})))).then((()=>n))}}}},{package:"3box>orbit-db>orbit-db-access-controllers>p-map-series"}],[5446,{},function(){with(this)return function(){"use strict";return function(e,t,n){const r=(e,t,n)=>new Promise(((r,i)=>{if(n=Object.assign({concurrency:Infinity},n),"function"!=typeof t)throw new TypeError("Mapper function is required");const{concurrency:o}=n;if(!("number"==typeof o&&o>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${o}\` (${typeof o})`);const s=[],a=e[Symbol.iterator]();let u=!1,c=!1,l=0,f=0;const h=()=>{if(u)return;const e=a.next(),n=f;if(f++,e.done)return c=!0,void(0===l&&r(s));l++,Promise.resolve(e.value).then((e=>t(e,n))).then((e=>{s[n]=e,l--,h()}),(e=>{u=!0,i(e)}))};for(let e=0;e<o&&(h(),!c);e++);}));t.exports=r,t.exports.default=r}}},{package:"3box>ipfs>libp2p-kad-dht>p-times>p-map"}],[5447,{eventemitter3:2673},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("eventemitter3");class i{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const r=function(e,t,n){let r=0,i=e.length;for(;i>0;){const o=i/2|0;let s=r+o;n(e[s],t)<=0?(r=++s,i-=o+1):i=o}return r}(this._queue,n,((e,t)=>t.priority-e.priority));this._queue.splice(r,0,n)}dequeue(){return this._queue.shift().run}get size(){return this._queue.length}}t.exports=class extends r{constructor(e){if(super(),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Infinity,interval:0,concurrency:Infinity,autoStart:!0,queueClass:i,...e}).concurrency&&e.concurrency>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e.concurrency}\` (${typeof e.concurrency})`);if(!("number"==typeof e.intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap}\` (${typeof e.intervalCap})`);if(!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===Infinity||0===e.interval,this._intervalCount=0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._intervalId=null,this._intervalEnd=0,this._timeoutId=null,this.queue=new e.queueClass,this._queueClass=e.queueClass,this._pendingCount=0,this._concurrency=e.concurrency,this._isPaused=!1===e.autoStart,this._resolveEmpty=()=>{},this._resolveIdle=()=>{}}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother()}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=()=>{},0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=()=>{})}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=null}_intervalPaused(){const e=Date.now();if(null===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return null===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this.queue.size)return clearInterval(this._intervalId),this._intervalId=null,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._intervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this.queue.dequeue()(),e&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||null!==this._intervalId||(this._intervalId=setInterval((()=>this._onInterval()),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){for(0===this._intervalCount&&0===this._pendingCount&&(clearInterval(this._intervalId),this._intervalId=null),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;this._tryToStartAnother(););}async add(e,t){return new Promise(((n,r)=>{this.queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{n(await e())}catch(e){r(e)}this._next()}),t),this._tryToStartAnother()}))}async addAll(e,t){return Promise.all(e.map((e=>this.add(e,t))))}start(){if(this._isPaused)for(this._isPaused=!1;this._tryToStartAnother(););}pause(){this._isPaused=!0}clear(){this.queue=new this._queueClass}async onEmpty(){if(0!==this.queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this.queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this.queue.size}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}}}}},{package:"3box>ipfs>libp2p-kad-dht>p-queue"}],[5448,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=(e,t,n)=>new Promise(((r,i)=>{const o=e[Symbol.iterator]();let s=0;const a=e=>{const n=o.next();n.done?r(e):Promise.all([e,n.value]).then((e=>{a(t(e[0],e[1],s++))})).catch(i)};a(n)}))}}},{package:"3box>orbit-db>orbit-db-store>p-each-series>p-reduce"}],[5449,{"@sindresorhus/is":5450,"p-reduce":5448},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("p-reduce"),i=e("@sindresorhus/is");t.exports=e=>{const t=[];for(const t of e){const e=i(t);if("Function"!==e)return Promise.reject(new TypeError(`Expected task to be a \`Function\`, received \`${e}\``))}return r(e,((e,n)=>Promise.resolve().then(n).then((e=>{t.push(e)})))).then((()=>t))}}}},{package:"3box>orbit-db>orbit-db-pubsub>p-series"}],[545,{"@ethereumjs/tx":548,"@keystonehq/bc-ur-registry-eth":553,buffer:2175,"ethereumjs-util":2612,hdkey:4484,uuid:6096},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,o=e("ethereumjs-util"),s=e("@ethereumjs/tx"),a=e("@keystonehq/bc-ur-registry-eth"),u=e("uuid");const c="QR Hardware Wallet Device",l="m",f="0/*";var h,d;!function(e){e.hd="hd",e.pubkey="pubkey"}(h||(h={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(d||(d={}));class p{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type=c,this.requestSignature=async(e,t,n,r)=>{const i=await this.getInteraction().requestSignature(t,n,r),o=i.getRequestId(),s=i.getSignature();if(o){if(u.stringify(o)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId")}return{r:s.slice(0,32),s:s.slice(32,64),v:s.slice(64)}},this.__readCryptoHDKey=e=>{var t,n;const r=`m/${e.getOrigin().getPath()}`,i=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),o=(null==(n=e.getChildren())?void 0:n.getPath())||f,s=e.getName();if(e.getNote()===d.standard?this.keyringAccount=d.standard:e.getNote()===d.ledger_legacy&&(this.keyringAccount=d.ledger_legacy),!i)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const a=e.getBip32Key();this.xfp=i,this.xpub=a,this.hdPath=r,this.childrenPath=o,s!==undefined&&""!==s&&(this.name=s),this.initialized=!0},this.__readCryptoAccount=e=>{var t,n;const r=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!r)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=r,this.initialized=!0;let i=!1;const s=e.getOutputDescriptors();if(!s||0===s.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(s.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(n=e.getOutputDescriptors())||n.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),n=`M/${t.getOrigin().getPath()}`,r="0x"+o.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===d.ledger_live&&(this.keyringAccount=d.ledger_live),this.paths[o.toChecksumAddress(r)]===undefined&&(i=!0),this.paths[o.toChecksumAddress(r)]=n}}catch(e){throw new Error(`KeystoneError#invalid_data: ${e}`)}})),i},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=e=>(this.page+=e,this.page<=0&&(this.page=1),new Promise((async(e,t)=>{try{const t=(this.page-1)*this.perPage,n=t+this.perPage,r=[];for(let e=t;e<n;e++){const t=await this.__addressFromIndex(l,e);r.push({address:t,balance:null,index:e}),this.indexes[o.toChecksumAddress(t)]=e}e(r)}catch(e){t(e)}}))),this.__getLedgerLivePage=e=>{const t=this.page+e;return new Promise((async(n,r)=>{try{const r=(t-1)*this.perPage,i=r+this.perPage,o=[];for(let e=r;e<i;e++){const t=await this.__addressFromIndex(l,e);o.push({address:t,balance:null,index:e})}this.page+=e,n(o)}catch(e){r(e)}}))},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===h.hd){this.checkKeyring(),this.hdk||(this.hdk=i.fromExtendedKey(this.xpub));const n=this.childrenPath.replace("*",String(t)).replaceAll("*","0"),r=this.hdk.derive(`${e}/${n}`),s="0x"+o.publicToAddress(r.publicKey,!0).toString("hex");return o.toChecksumAddress(s)}{const e=Object.keys(this.paths)[t];if(e)return o.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=h.hd,this.keyringAccount=d.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath=f,this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();e.getRegistryType()===a.extend.RegistryTypes.CRYPTO_HDKEY?(this.keyringMode=h.hd,this.__readCryptoHDKey(e)):(this.keyringMode=h.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||h.hd,this.keyringAccount=e.keyringAccount||d.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||f)}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}addAccounts(e=1){return new Promise((async(t,n)=>{try{const n=this.unlockedAccount,r=n+e,i=[];for(let e=n;e<r;e++){const t=await this.__addressFromIndex(l,e);i.push(t),this.page=0,this.unlockedAccount++}this.accounts=this.accounts.concat(i),t(this.accounts)}catch(e){n(e)}}))}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===h.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}static serializeTx(e){return e.v=new o.BN(e.common.chainId()),e.r=new o.BN(0),e.s=new o.BN(0),e.serialize()}async signTransaction(e,t){const n=await this._pathFromAddress(e),r=t.common.chainId(),i=u.v4(),o=a.EthSignRequest.constructETHRequest(p.serializeTx(t),a.DataType.transaction,n,this.xfp,i,r),{r:c,s:l,v:f}=await this.requestSignature(i,o,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),h=t.toJSON();return s.Transaction.fromTxData({to:h.to,gasLimit:h.gasLimit,gasPrice:h.gasPrice,data:h.data,nonce:h.nonce,value:h.value,r:c,s:l,v:f},{common:t.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,n){const r=o.stripHexPrefix(n),i=await this._pathFromAddress(e),s=u.v4(),c=a.EthSignRequest.constructETHRequest(t.from(r,"hex"),a.DataType.personalMessage,i,this.xfp,s,undefined,e),{r:l,s:f,v:h}=await this.requestSignature(s,c,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([l,f,h]).toString("hex")}async signTypedData(e,n){const r=await this._pathFromAddress(e),i=u.v4(),o=a.EthSignRequest.constructETHRequest(t.from(JSON.stringify(n),"utf-8"),a.DataType.typedData,r,this.xfp,i,undefined,e),{r:s,s:c,v:l}=await this.requestSignature(i,o,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([s,c,l]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===h.hd){const t=o.toChecksumAddress(e);let n=this.indexes[t];if(void 0===n)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex(l,e)){n=e;break}if(void 0===n)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",n.toString()).replaceAll("*","0")}`}{const t=o.toChecksumAddress(e),n=this.paths[t];if(void 0===n)throw new Error("Unknown address");return n}}}p.type=c,n.BaseKeyring=p}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring"}],[5450,{"../../../../../is-buffer/index.js":4797,util:2181},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){Object.defineProperty(n,"__esModule",{value:!0});const i=e("util"),o=Object.prototype.toString,s=e=>t=>typeof t===e,a=e=>{const t=o.call(e).slice(8,-1);return t||null},u=e=>t=>a(t)===e;function c(e){if(null===e)return"null";if(!0===e||!1===e)return"boolean";const t=typeof e;if("undefined"===t)return"undefined";if("string"===t)return"string";if("number"===t)return"number";if("symbol"===t)return"symbol";if(c.function_(e))return"Function";if(Array.isArray(e))return"Array";if(r.isBuffer(e))return"Buffer";const n=a(e);if(n)return n;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}!function(e){const t=e=>"object"==typeof e;e.undefined=s("undefined"),e.string=s("string"),e.number=s("number"),e.function_=s("function"),e.null_=e=>null===e,e.class_=t=>e.function_(t)&&t.toString().startsWith("class "),e.boolean=e=>!0===e||!1===e,e.symbol=s("symbol"),e.array=Array.isArray,e.buffer=r.isBuffer,e.nullOrUndefined=t=>e.null_(t)||e.undefined(t),e.object=n=>!e.nullOrUndefined(n)&&(e.function_(n)||t(n)),e.iterable=t=>!e.nullOrUndefined(t)&&e.function_(t[Symbol.iterator]),e.generator=t=>e.iterable(t)&&e.function_(t.next)&&e.function_(t.throw),e.nativePromise=u("Promise");e.promise=n=>e.nativePromise(n)||(n=>!e.null_(n)&&t(n)&&e.function_(n.then)&&e.function_(n.catch))(n);const n=t=>n=>e.function_(n)&&e.function_(n.constructor)&&n.constructor.name===t;e.generatorFunction=n("GeneratorFunction"),e.asyncFunction=n("AsyncFunction"),e.boundFunction=t=>e.function_(t)&&!t.hasOwnProperty("prototype"),e.regExp=u("RegExp"),e.date=u("Date"),e.error=u("Error"),e.map=u("Map"),e.set=u("Set"),e.weakMap=u("WeakMap"),e.weakSet=u("WeakSet"),e.int8Array=u("Int8Array"),e.uint8Array=u("Uint8Array"),e.uint8ClampedArray=u("Uint8ClampedArray"),e.int16Array=u("Int16Array"),e.uint16Array=u("Uint16Array"),e.int32Array=u("Int32Array"),e.uint32Array=u("Uint32Array"),e.float32Array=u("Float32Array"),e.float64Array=u("Float64Array"),e.arrayBuffer=u("ArrayBuffer"),e.sharedArrayBuffer=u("SharedArrayBuffer"),e.dataView=u("DataView"),e.directInstanceOf=(t,n)=>e.object(t)&&e.object(n)&&Object.getPrototypeOf(t)===n.prototype,e.truthy=e=>Boolean(e),e.falsy=e=>!e,e.nan=e=>Number.isNaN(e);const o=new Set(["undefined","string","number","boolean","symbol"]);e.primitive=t=>e.null_(t)||o.has(typeof t),e.integer=e=>Number.isInteger(e),e.safeInteger=e=>Number.isSafeInteger(e),e.plainObject=e=>{let t;return"Object"===a(e)&&(t=Object.getPrototypeOf(e),null===t||t===Object.getPrototypeOf({}))};const c=new Set(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"]);e.typedArray=e=>{const t=a(e);return null!==t&&c.has(t)};e.arrayLike=t=>!e.nullOrUndefined(t)&&!e.function_(t)&&(t=>e.safeInteger(t)&&t>-1)(t.length),e.inRange=(t,n)=>{if(e.number(n))return t>=Math.min(0,n)&&t<=Math.max(n,0);if(e.array(n)&&2===n.length)return t>=Math.min.apply(null,n)&&t<=Math.max.apply(null,n);throw new TypeError(`Invalid range: ${i.inspect(n)}`)};const l=["innerHTML","ownerDocument","style","attributes","nodeValue"];e.domElement=t=>e.object(t)&&1===t.nodeType&&e.string(t.nodeName)&&!e.plainObject(t)&&l.every((e=>e in t)),e.nodeStream=n=>!e.nullOrUndefined(n)&&t(n)&&e.function_(n.pipe),e.infinite=e=>e===Infinity||e===-Infinity;const f=t=>n=>e.integer(n)&&Math.abs(n%2)===t;e.even=f(0),e.odd=f(1);e.empty=t=>e.falsy(t)||(t=>(e.string(t)||e.array(t))&&0===t.length)(t)||(t=>!e.map(t)&&!e.set(t)&&e.object(t)&&0===Object.keys(t).length)(t)||(t=>(e.map(t)||e.set(t))&&0===t.size)(t),e.emptyOrWhitespace=t=>e.empty(t)||(t=>e.string(t)&&!1===/\S/.test(t))(t);const h=(t,n,r)=>{const o=Array.prototype.slice.call(r,1);if(!1===e.function_(n))throw new TypeError(`Invalid predicate: ${i.inspect(n)}`);if(0===o.length)throw new TypeError("Invalid number of values");return t.call(o,n)};e.any=function(e){return h(Array.prototype.some,e,arguments)},e.all=function(e){return h(Array.prototype.every,e,arguments)}}(c||(c={})),Object.defineProperties(c,{class:{value:c.class_},function:{value:c.function_},null:{value:c.null_}}),n.default=c,t.exports=c,t.exports.default=c}).call(this)}).call(this,{isBuffer:e("../../../../../is-buffer/index.js")})}}},{package:"3box>orbit-db>orbit-db-pubsub>p-series>@sindresorhus/is"}],[5451,{"p-map":5446},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("p-map"),i=async(e,t,n)=>r(new Array(e).fill(),((e,n)=>t(n)),n);t.exports=i,t.exports.default=i}}},{package:"3box>ipfs>libp2p-kad-dht>p-times"}],[5452,{},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e=>new Promise((t=>{t(e())}));t.exports=(e,t)=>r((function n(){if(e())return r(t).then(n)}))}}},{package:"3box>3box-orbitdb-plugins>ipfs-log>p-whilst"}],[546,{"@ethereumjs/tx":548,"@keystonehq/bc-ur-registry-eth":553,buffer:2175,"ethereumjs-util":2612,hdkey:4484,uuid:6096},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,i,o,s=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,a=e("ethereumjs-util"),u=e("@ethereumjs/tx"),c=e("@keystonehq/bc-ur-registry-eth"),l=e("uuid");!function(e){e.hd="hd",e.pubkey="pubkey"}(i||(i={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(o||(o={}));class f{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type="QR Hardware Wallet Device",this.requestSignature=async(e,t,n,r)=>{const i=await this.getInteraction().requestSignature(t,n,r),o=i.getRequestId(),s=i.getSignature();if(o&&l.stringify(o)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId");return{r:s.slice(0,32),s:s.slice(32,64),v:s.slice(64)}},this.__readCryptoHDKey=e=>{var t,n;const r="m/"+e.getOrigin().getPath(),i=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),s=(null==(n=e.getChildren())?void 0:n.getPath())||"0/*",a=e.getName();if(e.getNote()===o.standard?this.keyringAccount=o.standard:e.getNote()===o.ledger_legacy&&(this.keyringAccount=o.ledger_legacy),!i)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const u=e.getBip32Key();this.xfp=i,this.xpub=u,this.hdPath=r,this.childrenPath=s,void 0!==a&&""!==a&&(this.name=a),this.initialized=!0},this.__readCryptoAccount=e=>{var t,n;const r=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!r)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=r,this.initialized=!0;let i=!1;const s=e.getOutputDescriptors();if(!s||0===s.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(s.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(n=e.getOutputDescriptors())||n.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),n="M/"+t.getOrigin().getPath(),r="0x"+a.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===o.ledger_live&&(this.keyringAccount=o.ledger_live),void 0===this.paths[a.toChecksumAddress(r)]&&(i=!0),this.paths[a.toChecksumAddress(r)]=n}}catch(e){throw new Error("KeystoneError#invalid_data: "+e)}})),i},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=e=>(this.page+=e,this.page<=0&&(this.page=1),new Promise((async(e,t)=>{try{const t=(this.page-1)*this.perPage,n=t+this.perPage,r=[];for(let e=t;e<n;e++){const t=await this.__addressFromIndex("m",e);r.push({address:t,balance:null,index:e}),this.indexes[a.toChecksumAddress(t)]=e}e(r)}catch(e){t(e)}}))),this.__getLedgerLivePage=e=>{const t=this.page+e;return new Promise((async(n,r)=>{try{const r=(t-1)*this.perPage,i=r+this.perPage,o=[];for(let e=r;e<i;e++){const t=await this.__addressFromIndex("m",e);o.push({address:t,balance:null,index:e})}this.page+=e,n(o)}catch(e){r(e)}}))},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===i.hd){this.checkKeyring(),this.hdk||(this.hdk=s.fromExtendedKey(this.xpub));const n=this.childrenPath.replace("*",String(t)).replaceAll("*","0"),r=this.hdk.derive(`${e}/${n}`),i="0x"+a.publicToAddress(r.publicKey,!0).toString("hex");return a.toChecksumAddress(i)}{const e=Object.keys(this.paths)[t];if(e)return a.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=i.hd,this.keyringAccount=o.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath="0/*",this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();e.getRegistryType()===c.extend.RegistryTypes.CRYPTO_HDKEY?(this.keyringMode=i.hd,this.__readCryptoHDKey(e)):(this.keyringMode=i.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||i.hd,this.keyringAccount=e.keyringAccount||o.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||"0/*")}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}addAccounts(e=1){return new Promise((async(t,n)=>{try{const n=this.unlockedAccount,r=n+e,i=[];for(let e=n;e<r;e++){const t=await this.__addressFromIndex("m",e);i.push(t),this.page=0,this.unlockedAccount++}this.accounts=this.accounts.concat(i),t(this.accounts)}catch(e){n(e)}}))}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===i.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}static serializeTx(e){return e.v=new a.BN(e.common.chainId()),e.r=new a.BN(0),e.s=new a.BN(0),e.serialize()}async signTransaction(e,t){const n=await this._pathFromAddress(e),r=t.common.chainId(),i=l.v4(),o=c.EthSignRequest.constructETHRequest(f.serializeTx(t),c.DataType.transaction,n,this.xfp,i,r),{r:s,s:a,v:h}=await this.requestSignature(i,o,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),d=t.toJSON();return u.Transaction.fromTxData({to:d.to,gasLimit:d.gasLimit,gasPrice:d.gasPrice,data:d.data,nonce:d.nonce,value:d.value,r:s,s:a,v:h},{common:t.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,n){const r=a.stripHexPrefix(n),i=await this._pathFromAddress(e),o=l.v4(),s=c.EthSignRequest.constructETHRequest(t.from(r,"hex"),c.DataType.personalMessage,i,this.xfp,o,void 0,e),{r:u,s:f,v:h}=await this.requestSignature(o,s,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([u,f,h]).toString("hex")}async signTypedData(e,n){const r=await this._pathFromAddress(e),i=l.v4(),o=c.EthSignRequest.constructETHRequest(t.from(JSON.stringify(n),"utf-8"),c.DataType.typedData,r,this.xfp,i,void 0,e),{r:s,s:a,v:u}=await this.requestSignature(i,o,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([s,a,u]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===i.hd){const t=a.toChecksumAddress(e);let n=this.indexes[t];if(void 0===n)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex("m",e)){n=e;break}if(void 0===n)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",n.toString()).replaceAll("*","0")}`}{const t=a.toChecksumAddress(e),n=this.paths[t];if(void 0===n)throw new Error("Unknown address");return n}}}f.type="QR Hardware Wallet Device",n.BaseKeyring=f}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring"}],[547,{"./base-eth-keyring.cjs.development.js":545,"./base-eth-keyring.cjs.production.min.js":546},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./base-eth-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring"}],[5473,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>parseqs"}],[5474,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));for(var s,a,u=r.exec(e||""),c={},l=14;l--;)c[i[l]]=u[l]||"";return-1!=n&&-1!=o&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,c.path),c.queryKey=(s=c.query,a={},s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(a[t]=n)})),a),c}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>parseuri"}],[548,{"./transaction":549,"./types":550},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./transaction");Object.defineProperty(n,"Transaction",{enumerable:!0,get:function(){return o.default}}),i(e("./types"),n)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/tx"}],[5486,{buffer:2175,"buffer-from":2186,duplexify:5487,through2:5488},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("duplexify"),i=e("through2"),o=e("buffer-from"),s=function(e,t){if("number"==typeof e&&(e={maxBuffer:e}),"function"==typeof e)return s(null,e);e||(e={});var a="number"==typeof e.maxBuffer?e.maxBuffer:65535,u=e.strict,c=!1!==e.newline,l=[],f=0,h=r.obj(),d=i.obj({highWaterMark:1},(function(e,t,r){if(function(e){return!n.isBuffer(e)&&"string"!=typeof e}(e))return g(e,null,r);if(n.isBuffer(e)||(e=o(e)),c){var i=Array.prototype.indexOf.call(e,10);if(i>0&&13===e[i-1]&&i--,i>-1)return l.push(e.slice(0,i)),g(n.concat(l),e.slice(i),r)}return l.push(e),(f+=e.length)<a?r():u?r(new Error("No newline found")):void g(n.concat(l),null,r)})),p=function(){if(u)return h.destroy(new Error("No newline found"));h.cork(),g(n.concat(l),null,(function(e){if(e)return h.destroy(e);h.uncork()}))},g=function(e,n,r){h.removeListener("preend",p),t(e,(function(t,i){if(t)return r(t);h.setWritable(i),h.setReadable(i),e&&i.write(e),n&&i.write(n),n=l=d=null,r()}))};return h.on("preend",p),h.setWritable(d),h};t.exports=s}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snap-controllers>gunzip-maybe>peek-stream"}],[5487,{_process:5500,buffer:2175,"end-of-stream":2432,inherits:4515,"readable-stream":5780,"stream-shift":5984},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n,r){(function(){var i=e("readable-stream"),o=e("end-of-stream"),s=e("inherits"),a=e("stream-shift"),u=r.from&&r.from!==Uint8Array.from?r.from([0]):new r([0]),c=function(e,t){e._corked?e.once("uncork",t):t()},l=function(e,t){return function(n){n?function(e,t){e._autoDestroy&&e.destroy(t)}(e,"premature close"===n.message?null:n):t&&!e._ended&&e.end()}},f=function(e,t,n){if(!(this instanceof f))return new f(e,t,n);i.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!n||!1!==n.autoDestroy,this._forwardDestroy=!n||!1!==n.destroy,this._forwardEnd=!n||!1!==n.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)};s(f,i.Duplex),f.obj=function(e,t,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new f(e,t,n)},f.prototype.cork=function(){1==++this._corked&&this.emit("cork")},f.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},f.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)e&&e.destroy&&e.destroy();else if(null!==e&&!1!==e){var t=this,r=o(e,{writable:!0,readable:!1},l(this,this._forwardEnd)),i=function(){var e=t._ondrain;t._ondrain=null,e&&e()};this._unwrite&&n.nextTick(i),this._writable=e,this._writable.on("drain",i),this._unwrite=function(){t._writable.removeListener("drain",i),r()},this.uncork()}else this.end()},f.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)e&&e.destroy&&e.destroy();else{if(null===e||!1===e)return this.push(null),void this.resume();var t,n=this,r=o(e,{writable:!1,readable:!0},l(this)),s=function(){n._forward()},a=function(){n.push(null)};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:(t=e,new i.Readable({objectMode:!0,highWaterMark:16}).wrap(t)),this._readable2.on("readable",s),this._readable2.on("end",a),this._unread=function(){n._readable2.removeListener("readable",s),n._readable2.removeListener("end",a),r()},this._forward()}},f.prototype._read=function(){this._drained=!0,this._forward()},f.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var e;for(this._forwarding=!0;this._drained&&null!==(e=a(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},f.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;n.nextTick((function(){t._destroy(e)}))}},f.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},f.prototype._write=function(e,t,n){return this.destroyed?n():this._corked?c(this,this._write.bind(this,e,t,n)):e===u?this._finish(n):this._writable?void(!1===this._writable.write(e)?this._ondrain=n:n()):n()},f.prototype._finish=function(e){var t=this;this.emit("preend"),c(this,(function(){var n,r;n=t._forwardEnd&&t._writable,r=function(){!1===t._writableState.prefinished&&(t._writableState.prefinished=!0),t.emit("prefinish"),c(t,e)},n?n._writableState&&n._writableState.finished?r():n._writableState?n.end(r):(n.end(),r()):r()}))},f.prototype.end=function(e,t,n){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this.write(u),i.Writable.prototype.end.call(this,n))},t.exports=f}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"@metamask/snap-controllers>gunzip-maybe>peek-stream>duplexify"}],[5488,{_process:5500,"readable-stream":5780,util:2181,xtend:6249},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("readable-stream").Transform,i=e("util").inherits,o=e("xtend");function s(e){r.call(this,e),this._destroyed=!1}function a(e,t,n){n(null,e)}function u(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=a),"function"!=typeof r&&(r=null),e(t,n,r)}}i(s,r),s.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=u((function(e,t,n){var r=new s(e);return r._transform=t,n&&(r._flush=n),r})),t.exports.ctor=u((function(e,t,n){function r(t){if(!(this instanceof r))return new r(t);this.options=o(e,t),s.call(this,this.options)}return i(r,s),r.prototype._transform=t,n&&(r.prototype._flush=n),r})),t.exports.obj=u((function(e,t,n){var r=new s(o({objectMode:!0,highWaterMark:16},e));return r._transform=t,n&&(r._flush=n),r}))}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>gunzip-maybe>peek-stream>through2"}],[5489,{"../../is-buffer/index.js":4797,bs58:2182,"peer-id":5490,"peer-info":5491},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("bs58"),i=e("peer-id"),o=e("peer-info");function s(e){let t;if("string"==typeof e)t=e;else if(n.isBuffer(e))t=r.encode(e).toString();else if(i.isPeerId(e))t=e.toB58String();else{if(!o.isPeerInfo(e))throw new Error("not valid PeerId or PeerInfo, or B58Str");t=e.id.toB58String()}return t}t.exports=class{constructor(){this._peers={}}has(e){const t=s(e);return Boolean(this._peers[t])}put(e,t){const n=this._peers[e.id.toB58String()];if(!n||t)return this._peers[e.id.toB58String()]=e,e;e.multiaddrs.forEach((e=>n.multiaddrs.add(e)));const r=e.isConnected();return r&&n.connect(r),e.protocols.forEach((e=>n.protocols.add(e))),!n.id.privKey&&e.id.privKey&&(n.id.privKey=e.id.privKey),!n.id.pubKey&&e.id.pubKey&&(n.id.pubKey=e.id.pubKey),n}get(e){const t=s(e),n=this._peers[t];if(n)return n;throw new Error("PeerInfo not found")}getAll(){return this._peers}getAllArray(){return Object.keys(this._peers).map((e=>this._peers[e]))}getMultiaddrs(e){return this.get(e).multiaddrs.toArray()}remove(e){const t=s(e);this._peers[t]&&delete this._peers[t]}}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"3box>ipfs>peer-book"}],[549,{"@ethereumjs/common":406,buffer:2175,"ethereumjs-util":2612},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("buffer"),a=e("ethereumjs-util"),u=o(e("@ethereumjs/common")),c=new a.BN("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),l=function(){function e(e,t){var n,o,s,c=e.nonce,l=e.gasPrice,f=e.gasLimit,h=e.to,d=e.value,p=e.data,g=e.v,m=e.r,b=e.s;this.nonce=new a.BN(a.toBuffer(c)),this.gasPrice=new a.BN(a.toBuffer(l)),this.gasLimit=new a.BN(a.toBuffer(f)),this.to=h?new a.Address(a.toBuffer(h)):undefined,this.value=new a.BN(a.toBuffer(d)),this.data=a.toBuffer(p),this.v=new a.BN(a.toBuffer(g)),this.r=new a.BN(a.toBuffer(m)),this.s=new a.BN(a.toBuffer(b));var y={nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,value:this.value,r:this.r,s:this.s};try{for(var _=r(Object.entries(y)),v=_.next();!v.done;v=_.next()){var w=i(v.value,2),E=w[0],S=w[1];if(S&&S.gt(a.MAX_INTEGER))throw new Error(E+" cannot exceed MAX_INTEGER, given "+S)}}catch(e){n={error:e}}finally{try{v&&!v.done&&(o=_.return)&&o.call(_)}finally{if(n)throw n.error}}if(null==t?void 0:t.common)this.common=t.common;else{this.common=new u.default({chain:"mainnet"})}this._validateTxV(this.v),(null===(s=null==t?void 0:t.freeze)||void 0===s||s)&&Object.freeze(this)}return e.fromTxData=function(t,n){return new e(t,n)},e.fromRlpSerializedTx=function(e,t){var n=a.rlp.decode(e);if(!Array.isArray(n))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(n,t)},e.fromValuesArray=function(t,n){if(6!==t.length&&9!==t.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");var r=i(t,9),o=r[0],u=r[1],c=r[2],l=r[3],f=r[4],h=r[5],d=r[6],p=r[7],g=r[8];return new e({nonce:new a.BN(o),gasPrice:new a.BN(u),gasLimit:new a.BN(c),to:l&&l.length>0?new a.Address(l):undefined,value:new a.BN(f),data:h||s.Buffer.from([]),v:d?new a.BN(d):undefined,r:p?new a.BN(p):undefined,s:g?new a.BN(g):undefined},n)},e.prototype.toCreationAddress=function(){return this.to===undefined||0===this.to.buf.length},e.prototype.hash=function(){var e=[a.bnToRlp(this.nonce),a.bnToRlp(this.gasPrice),a.bnToRlp(this.gasLimit),this.to!==undefined?this.to.buf:s.Buffer.from([]),a.bnToRlp(this.value),this.data,this.v?a.bnToRlp(this.v):s.Buffer.from([]),this.r?a.bnToRlp(this.r):s.Buffer.from([]),this.s?a.bnToRlp(this.s):s.Buffer.from([])];return a.rlphash(e)},e.prototype.getMessageToSign=function(){return this._getMessageToSign(this._unsignedTxImplementsEIP155())},e.prototype.getMessageToVerifySignature=function(){return this._getMessageToSign(this._signedTxImplementsEIP155())},e.prototype.getChainId=function(){return this.common.chainId()},e.prototype.getSenderAddress=function(){return new a.Address(a.publicToAddress(this.getSenderPublicKey()))},e.prototype.getSenderPublicKey=function(){var e=this.getMessageToVerifySignature();if(this.common.gteHardfork("homestead")&&this.s&&this.s.gt(c))throw new Error("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");var t=this,n=t.v,r=t.r,i=t.s;if(!n||!r||!i)throw new Error("Missing values to derive sender public key from signed tx");try{return a.ecrecover(e,n.toNumber(),a.bnToRlp(r),a.bnToRlp(i),this._signedTxImplementsEIP155()?this.getChainId():undefined)}catch(e){throw new Error("Invalid Signature")}},e.prototype.verifySignature=function(){try{var e=this.getSenderPublicKey();return 0!==a.unpadBuffer(e).length}catch(e){return!1}},e.prototype.sign=function(t){if(32!==t.length)throw new Error("Private key must be 32 bytes in length.");var n=this.getMessageToSign(),r=a.ecsign(n,t),i=r.v,o=r.r,s=r.s;this._unsignedTxImplementsEIP155()&&(i+=2*this.getChainId()+8);var u={common:this.common};return new e({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:new a.BN(i),r:new a.BN(o),s:new a.BN(s)},u)},e.prototype.getDataFee=function(){for(var e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero"),n=0,r=0;r<this.data.length;r++)0===this.data[r]?n+=e:n+=t;return new a.BN(n)},e.prototype.getBaseFee=function(){var e=this.getDataFee().addn(this.common.param("gasPrices","tx"));return this.common.gteHardfork("homestead")&&this.toCreationAddress()&&e.iaddn(this.common.param("gasPrices","txCreation")),e},e.prototype.getUpfrontCost=function(){return this.gasLimit.mul(this.gasPrice).add(this.value)},e.prototype.validate=function(e){void 0===e&&(e=!1);var t=[];return this.verifySignature()||t.push("Invalid Signature"),this.getBaseFee().gt(this.gasLimit)&&t.push("gasLimit is too low. given "+this.gasLimit+", need at least "+this.getBaseFee()),e?t:0===t.length},e.prototype.raw=function(){return[a.bnToRlp(this.nonce),a.bnToRlp(this.gasPrice),a.bnToRlp(this.gasLimit),this.to!==undefined?this.to.buf:s.Buffer.from([]),a.bnToRlp(this.value),this.data,this.v!==undefined?a.bnToRlp(this.v):s.Buffer.from([]),this.r!==undefined?a.bnToRlp(this.r):s.Buffer.from([]),this.s!==undefined?a.bnToRlp(this.s):s.Buffer.from([])]},e.prototype.serialize=function(){return a.rlp.encode(this.raw())},e.prototype.toJSON=function(){return{nonce:a.bnToHex(this.nonce),gasPrice:a.bnToHex(this.gasPrice),gasLimit:a.bnToHex(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:a.bnToHex(this.value),data:"0x"+this.data.toString("hex"),v:this.v!==undefined?a.bnToHex(this.v):undefined,r:this.r!==undefined?a.bnToHex(this.r):undefined,s:this.s!==undefined?a.bnToHex(this.s):undefined}},e.prototype.isSigned=function(){var e=this,t=e.v,n=e.r,r=e.s;return!!t&&!!n&&!!r},e.prototype._unsignedTxImplementsEIP155=function(){return this.common.gteHardfork("spuriousDragon")},e.prototype._signedTxImplementsEIP155=function(){var e;if(!this.isSigned())throw Error("This transaction is not signed");var t=this.common.gteHardfork("spuriousDragon"),n=null===(e=this.v)||void 0===e?void 0:e.toNumber();return(n===2*this.getChainId()+35||n===2*this.getChainId()+36)&&t},e.prototype._getMessageToSign=function(e){var t=[a.bnToRlp(this.nonce),a.bnToRlp(this.gasPrice),a.bnToRlp(this.gasLimit),this.to!==undefined?this.to.buf:s.Buffer.from([]),a.bnToRlp(this.value),this.data];return e&&(t.push(a.toBuffer(this.getChainId())),t.push(a.unpadBuffer(a.toBuffer(0))),t.push(a.unpadBuffer(a.toBuffer(0)))),a.rlphash(t)},e.prototype._validateTxV=function(e){if(e!==undefined&&0!==e.toNumber()&&this.common.gteHardfork("spuriousDragon")){var t=e.toNumber();if(27!==t&&28!==t)if(!(t===2*this.getChainId()+35||t===2*this.getChainId()+36))throw new Error("Incompatible EIP155-based V "+t+" and chain id "+this.getChainId()+". See the Common parameter of the Transaction constructor to set the chain id.")}},e}();n.default=l}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/tx"}],[5490,{assert:1803,"async/waterfall":1882,buffer:2175,"class-is":2214,"libp2p-crypto/src/keys":4933,multihashes:5320},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){const i=e("multihashes"),o=e("libp2p-crypto/src/keys"),s=e("assert"),a=e("async/waterfall"),u=e("class-is");const c=u(class{constructor(e,t,n){s(r.isBuffer(e),"invalid id provided"),t&&n&&s(t.public.bytes.equals(n.bytes),"inconsistent arguments"),this._id=e,this._idB58String=i.toB58String(this.id),this._privKey=t,this._pubKey=n}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){return this._pubKey?this._pubKey:this._privKey?this._privKey.public:void 0}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return o.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return o.marshalPrivateKey(this.privKey)}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let t=6;return e.length<t&&(t=e.length),"<peer.ID "+e.substr(0,t)+">"}toJSON(){return{id:this.toB58String(),privKey:h(this.marshalPrivKey()),pubKey:h(this.marshalPubKey())}}toHexString(){return i.toHexString(this.id)}toBytes(){return this.id}toB58String(){return this._idB58String}isEqual(e){if(r.isBuffer(e))return this.id.equals(e);if(e.id)return this.id.equals(e.id);throw new Error("not valid Id")}isValid(e){this.privKey&&this.privKey.public&&this.privKey.public.bytes&&r.isBuffer(this.pubKey.bytes)&&this.privKey.public.bytes.equals(this.pubKey.bytes)?e():e(new Error("Keys not match"))}},{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});n=t.exports=c;const l=(e,t)=>{if(e.bytes.length<=42){const n=i.encode(e.bytes,"identity");t(null,n)}else e.hash(((e,n)=>{t(e,n)}))},f=(e,t,n)=>{l(t,((r,i)=>{null!=r?n(r):n(null,new c(i,e,t))}))};function h(e){if(e)return e.toString("base64")}n.create=function(e,t){"function"==typeof e&&(t=e,e={}),(e=e||{}).bits=e.bits||2048,e.keyType=e.keyType||"RSA",o.generateKeyPair(e.keyType,e.bits,((e,n)=>{null!=e?t(e):f(n,n.public,t)}))},n.createFromHexString=function(e){return new c(i.fromHexString(e))},n.createFromBytes=function(e){return new c(e)},n.createFromB58String=function(e){return new c(i.fromB58String(e))},n.createFromPubKey=function(e,t){if("function"!=typeof t)throw new Error("callback is required");let n;try{let t=e;if("string"==typeof t&&(t=r.from(e,"base64")),!r.isBuffer(t))throw new Error("Supplied key is neither a base64 string nor a buffer");n=o.unmarshalPublicKey(t)}catch(e){return t(e)}f(null,n,t)},n.createFromPrivKey=function(e,t){if("function"!=typeof t)throw new Error("callback is required");let n=e;try{if("string"==typeof n&&(n=r.from(e,"base64")),!r.isBuffer(n))throw new Error("Supplied key is neither a base64 string nor a buffer")}catch(e){return t(e)}o.unmarshalPrivateKey(n,((e,n)=>{null!=e?t(e):f(n,n.public,t)}))},n.createFromJSON=function(e,t){if("function"!=typeof t)throw new Error("callback is required");let n,s,u,f;try{n=i.fromB58String(e.id),s=e.privKey&&r.from(e.privKey,"base64"),u=e.pubKey&&r.from(e.pubKey,"base64"),f=u&&o.unmarshalPublicKey(u)}catch(e){return t(e)}s?a([e=>o.unmarshalPrivateKey(s,e),(e,t)=>{l(e.public,((n,r)=>{t(n,r,e)}))},(e,t,n)=>{f?l(f,((r,i)=>{n(r,e,t,i)})):n(null,e,t)}],((e,r,i,o)=>e?t(e):f&&!r.equals(o)?t(new Error("Public and private key do not match")):n&&!r.equals(n)?t(new Error("Id and private key do not match")):void t(null,new c(n,i,f)))):t(null,new c(n,null,f))},n.isPeerId=function(e){return Boolean("object"==typeof e&&e._id&&e._idB58String)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>peer-id"}],[5491,{"./multiaddr-set":5492,"./utils":5493,assert:1803,"peer-id":5490},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("peer-id"),{ensureMultiaddr:i}=e("./utils"),o=e("./multiaddr-set"),s=e("assert");class a{constructor(e){s(e,"Missing peerId. Use Peer.create(cb) to create one"),this.id=e,this.multiaddrs=new o,this.protocols=new Set,this._connectedMultiaddr=undefined}connect(e){if(e=i(e),!this.multiaddrs.has(e)&&e.toString()!==`/ipfs/${this.id.toB58String()}`)throw new Error("can't be connected to missing multiaddr from set");this._connectedMultiaddr=e}disconnect(){this._connectedMultiaddr=undefined}isConnected(){return this._connectedMultiaddr}}a.create=(e,t)=>{if("function"==typeof e)return t=e,e=null,void r.create(((e,n)=>{if(e)return t(e);t(null,new a(n))}));"function"==typeof e.toJSON?t(null,new a(e)):r.createFromJSON(e,((e,n)=>t(e,new a(n))))},a.isPeerInfo=e=>Boolean("object"==typeof e&&e.id&&e.multiaddrs),t.exports=a}}},{package:"3box>ipfs>peer-info"}],[5492,{"./utils":5493,"unique-by":6085},function(){with(this)return function(){"use strict";return function(e,t,n){const{ensureMultiaddr:r}=e("./utils"),i=e("unique-by");t.exports=class{constructor(e){this._multiaddrs=e||[],this._observedMultiaddrs=[]}add(e){e=r(e),this.has(e)||this._multiaddrs.push(e)}addSafe(e){e=r(e);this._observedMultiaddrs.some(((t,n)=>{if(t.equals(e))return this.add(e),this._observedMultiaddrs.splice(n,1),!0}))||this._observedMultiaddrs.push(e)}toArray(){return this._multiaddrs.slice()}get size(){return this._multiaddrs.length}forEach(e){return this._multiaddrs.forEach(e)}filterBy(e){return"object"!=typeof e||"function"!=typeof e.matches||"function"!=typeof e.partialMatch||"function"!=typeof e.toString?[]:this._multiaddrs.filter((t=>e.matches(t)))}has(e){return e=r(e),this._multiaddrs.some((t=>t.equals(e)))}delete(e){e=r(e),this._multiaddrs.some(((t,n)=>{if(t.equals(e))return this._multiaddrs.splice(n,1),!0}))}replace(e,t){Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]),e.forEach((e=>this.delete(e))),t.forEach((e=>this.add(e)))}clear(){this._multiaddrs=[]}distinct(){return i(this._multiaddrs,(e=>[e.toOptions().port,e.toOptions().transport].join()))}}}}},{package:"3box>ipfs>peer-info"}],[5493,{multiaddr:5294},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("multiaddr");t.exports={ensureMultiaddr:function(e){return r.isMultiaddr(e)?e:r(e)}}}}},{package:"3box>ipfs>peer-info"}],[5499,{_process:5500},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}:t.exports=e.nextTick}).call(this)}).call(this,e("_process"))}}},{package:"vinyl>cloneable-readable>process-nextick-args"}],[55,{"./contracts/registry":53,"./contracts/resolver":54,"@babel/runtime/helpers/interopRequireDefault":200,"@ensdomains/content-hash":269,"eth-ens-namehash":2462,"ethjs-contract":2644,"ethjs-query":2661},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function({provider:e,name:t}){const n=new o.default(e),r=i.default.hash(t),f=new s.default(n),h=Number.parseInt(await n.net_version(),10),d=function(e){switch(e){case 1:case 3:case 4:case 5:return"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";default:return null}}(h);if(!d)throw new Error(`EnsIpfsResolver - no known ens-ipfs registry for chainId "${h}"`);const p=f(u.default).at(d),g=(await p.resolver(r))[0];if(l(g))throw new Error(`EnsIpfsResolver - no resolver found for name "${t}"`);const m=f(c.default).at(g),b=await m.supportsInterface("0xbc1c58d1"),y=await m.supportsInterface("0xd8389dc5");if(b[0]){const e=(await m.contenthash(r))[0];let t=a.default.decode(e);const n=a.default.getCodec(e);return"ipfs-ns"!==n&&"ipns-ns"!==n||(t=a.default.helpers.cidV0ToV1Base32(t)),{type:n,hash:t}}if(y[0]){const e=(await m.content(r))[0];if(l(e))throw new Error(`EnsIpfsResolver - no content ID found for name "${t}"`);return{type:"swarm-ns",hash:e.slice(2)}}throw new Error(`EnsIpfsResolver - the resolver for name "${t}" is not standard, it should either supports contenthash() or content()`)};var i=r(e("eth-ens-namehash")),o=r(e("ethjs-query")),s=r(e("ethjs-contract")),a=r(e("@ensdomains/content-hash")),u=r(e("./contracts/registry")),c=r(e("./contracts/resolver"));function l(e){return[undefined,null,"0x","0x0","0x0000000000000000000000000000000000000000000000000000000000000000"].includes(e)}}}},{package:"$root$"}],[550,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/tx"}],[5501,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r;t.exports.timeout=function(e,t){var n,i=new r;return Promise.race([e,new Promise((function(e,r){n=setTimeout((function(){r(i)}),t)}))]).then((function(e){return clearTimeout(n),e}),(function(e){throw clearTimeout(n),e}))};(r=t.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"}).prototype=Object.create(Error.prototype),r.prototype.name="TimeoutError"}}},{package:"3box>ipfs>ipfs-mfs>mortice>promise-timeout"}],[5503,{_process:5500,"is-promise":4812},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r,i=e("is-promise");r="function"==typeof setImediate?setImediate:"object"==typeof n&&n&&n.nextTick?n.nextTick:function(e){setTimeout(e,0)};var o=[];function s(e){if(!(this instanceof s))return"function"==typeof e?new s(e):(n=new s((function(e){t=e})),{resolver:t,promise:n});var t,n,a,u=!1,c=!1,l=[],f=!1;function h(e){l.length?(f=!0,l.shift()(e||!1)):f=!1}this.then=function(e,t){return new s((function(n){l.push((function(i){var o=c?e:t;if("function"==typeof o){function e(){var e;try{e=o(a)}catch(e){return n.reject(e),h()}n.fulfill(e),h(!0)}i?e():r(e)}else c?(n.fulfill(a),h(i)):(n.reject(a),h(i))})),u&&!f&&h()}))},function(){function t(e){u||(u=!0,c=!1,a=e,h())}for(var n={fulfill:function e(n){u||(i(n)?n.then(e,t):(u=c=!0,a=n,h()))},reject:t},r=0;r<o.length;r++)o[r](this,n);if("function"==typeof e)try{e(n)}catch(e){n.reject(e)}}()}t.exports=s,s.use=function(e){o.push(e)}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>multihashing-async>nodeify>promise"}],[5504,{},function(){with(this)return function(){"use strict";return function(e,t,n){
/** PROMISIFY CALLBACK-STYLE FUNCTIONS TO ES6 PROMISES
*
* EXAMPLE:
* const fn = promisify( (callback) => callback(null, "Hello world!") );
* fn((err, str) => console.log(str));
* fn().then((str) => console.log(str));
* //Both functions, will log 'Hello world!'
*
* Note: The function you pass, may have any arguments you want, but the latest
* have to be the callback, which you will call with: next(err, value)
*
* @param method: Function/Array/Map = The function(s) to promisify
* @param options: Map =
*  "context" (default is function): The context which to apply the called function
*  "replace" (default is falsy): When passed an array/map, if to replace the original object
*
* @return: A promise if passed a function, otherwise the object with the promises
*
* @license: MIT
* @version: 1.0.3
* @author: Manuel Di Iorio
**/
var r=function(e,t){return function(){var n=Array.prototype.slice.call(arguments),r=n.length-1,i=n&&n.length>0?n[r]:null,o="function"==typeof i?i:null;return o?e.apply(t,n):new Promise((function(r,i){n.push((function(e,t){if(e)return i(e);r(t)})),e.apply(t,n)}))}};void 0===t&&(t={}),t.exports=function(e,t){t=t||{};var n=Object.prototype.toString.call(e);if("[object Object]"===n||"[object Array]"===n){var i=t.replace?e:{};for(var o in e)e.hasOwnProperty(o)&&(i[o]=r(e[o]));return i}return r(e,t.context||e)},void 0===n&&(this.promisify=t.exports)}}},{package:"3box>ipfs>promisify-es6"}],[551,{"@keystonehq/bc-ur-registry":571,buffer:2175,"ethereumjs-util":2612,hdkey:4484,uuid:6096},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("@keystonehq/bc-ur-registry"),o=e("uuid"),s=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,a=e("ethereumjs-util");const{RegistryType:u}=i.extend,c={ETH_SIGN_REQUEST:new u("eth-sign-request",401),ETH_SIGNATAURE:new u("eth-signature",402)},{decodeToDataItem:l,RegistryTypes:f}=i.extend;var h,d;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(h||(h={})),(d=n.DataType||(n.DataType={}))[d.transaction=1]="transaction",d[d.typedData=2]="typedData",d[d.personalMessage=3]="personalMessage",d[d.typedTransaction=4]="typedTransaction";class p extends i.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.setupData=e=>{this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin},this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[h.requestId]=new i.DataItem(this.requestId,f.UUID.getTag())),this.address&&(e[h.address]=this.address),this.chainId&&(e[h.chainId]=this.chainId),this.origin&&(e[h.origin]=this.origin),e[h.signData]=this.signData,e[h.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[h.derivationPath]=t,new i.DataItem(e)},this.setupData(e)}static constructETHRequest(e,n,r,s,a,u,c,l){const f=r.replace(/[m|M]\//,"").split("/"),h=new i.CryptoKeypath(f.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new i.PathComponent({index:t,hardened:n})})),t.from(s,"hex"));return new p({requestId:a?t.from(o.parse(a)):undefined,signData:e,dataType:n,derivationPath:h,chainId:u,address:c?t.from(c.replace("0x",""),"hex"):undefined,origin:l||undefined})}}p.fromDataItem=e=>{const t=e.getData(),n=t[h.signData],r=t[h.dataType],o=i.CryptoKeypath.fromDataItem(t[h.derivationPath]),s=t[h.chainId]?t[h.chainId]:undefined,a=t[h.address]?t[h.address]:undefined,u=t[h.requestId]?t[h.requestId].getData():undefined,c=t[h.origin]?t[h.origin]:undefined;return new p({requestId:u,signData:n,dataType:r,chainId:s,derivationPath:o,address:a,origin:c})},p.fromCBOR=e=>{const t=l(e);return p.fromDataItem(t)};const{RegistryTypes:g,decodeToDataItem:m}=i.extend;var b;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature"}(b||(b={}));class y extends i.RegistryItem{constructor(e,t){super(),this.getRegistryType=()=>c.ETH_SIGNATAURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.toDataItem=()=>{const e={};return this.requestId&&(e[b.requestId]=new i.DataItem(this.requestId,g.UUID.getTag())),e[b.signature]=this.signature,new i.DataItem(e)},this.signature=e,this.requestId=t}}y.fromDataItem=e=>{const t=e.getData(),n=t[b.signature],r=t[b.requestId]?t[b.requestId].getData():undefined;return new y(n,r)},y.fromCBOR=e=>{const t=m(e);return y.fromDataItem(t)};const _=(e,t)=>{const n=s.fromExtendedKey(e).derive(t),r="0x"+a.publicToAddress(n.publicKey,!0).toString("hex");return a.toChecksumAddress(r)},{cbor:v}=i.extend;v.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(i).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})})),n.ETHSignature=y,n.EthSignRequest=p,n.findHDpatfromAddress=(e,t,n,r)=>{for(let i=0;i<n;i++){const n=_(t,`M/0/${i}`);if(e.toLowerCase()==n.toLowerCase())return`${r}/0/${i}`}return null},n.generateAddressfromXpub=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth"}],[5510,{"./parse":5511,"./stringify":5512},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./parse"),i=e("./stringify");t.exports=r,t.exports.parse=r,t.exports.stringify=i}}},{package:"3box>ipfs>protons>protocol-buffers-schema"}],[5511,{"./tokenize":5513},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./tokenize"),i=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],o=function(e){for(var t={};e.length;)switch(e[0]){case"[":case",":e.shift();var n=e.shift();if("("===n&&(n=e.shift(),e.shift()),"="!==e[0])throw new Error("Unexpected token in field options: "+e[0]);if(e.shift(),"]"===e[0])throw new Error("Unexpected ] in field option");t[n]=e.shift();break;case"]":return e.shift(),t;default:throw new Error("Unexpected token in field options: "+e[0])}throw new Error("No closing tag for field options")},s=function(e){for(var t={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};e.length;)switch(e[0]){case"=":e.shift(),t.tag=Number(e.shift());break;case"map":if(t.type="map",t.map={from:null,to:null},e.shift(),"<"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.from=e.shift(),","!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.to=e.shift(),">"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);e.shift(),t.name=e.shift();break;case"repeated":case"required":case"optional":var n=e.shift();t.required="required"===n,t.repeated="repeated"===n,t.type=e.shift(),t.name=e.shift();break;case"[":t.options=o(e);break;case";":if(null===t.name)throw new Error("Missing field name");if(null===t.type)throw new Error("Missing type in message field: "+t.name);if(-1===t.tag)throw new Error("Missing tag number in message field: "+t.name);return e.shift(),t;default:throw new Error("Unexpected token in message field: "+e[0])}throw new Error("No ; found for message field")},a=function(e){for(var t={enums:[],messages:[],fields:[],extends:[],extensions:null};e.length;)switch(e[0]){case"map":case"repeated":case"optional":case"required":t.fields.push(s(e));break;case"enum":t.enums.push(p(e));break;case"message":t.messages.push(l(e));break;case"extensions":t.extensions=c(e);break;case"oneof":e.shift();var n=e.shift();if("{"!==e[0])throw new Error("Unexpected token in oneof: "+e[0]);for(e.shift();"}"!==e[0];){e.unshift("optional");var r=s(e);r.oneof=n,t.fields.push(r)}e.shift();break;case"extend":t.extends.push(u(e));break;case";":e.shift();break;case"reserved":case"option":for(e.shift();";"!==e[0];)e.shift();break;default:e.unshift("optional"),t.fields.push(s(e))}return t},u=function(e){return{name:e[1],message:l(e)}},c=function(e){e.shift();var t=Number(e.shift());if(isNaN(t))throw new Error("Invalid from in extensions definition");if("to"!==e.shift())throw new Error("Expected keyword 'to' in extensions definition");var n=e.shift();if("max"===n&&(n=536870911),n=Number(n),isNaN(n))throw new Error("Invalid to in extensions definition");if(";"!==e.shift())throw new Error("Missing ; in extensions definition");return{from:t,to:n}},l=function(e){e.shift();var t=1,n=[],r={name:e.shift(),enums:[],extends:[],messages:[],fields:[]};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("{"===e[0]?t++:"}"===e[0]&&t--,!t)return e.shift(),n=a(n),r.enums=n.enums,r.messages=n.messages,r.fields=n.fields,r.extends=n.extends,r.extensions=n.extensions,r;n.push(e.shift())}if(t)throw new Error("No closing tag for message")},f=function(e){e.shift();var t=e.shift();if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},h=function(e){if(e.shift(),"="!==e[0])throw new Error("Expected = but found "+e[0]);e.shift();var t=e.shift();switch(t){case'"proto2"':t=2;break;case'"proto3"':t=3;break;default:throw new Error("Expected protobuf syntax version but found "+t)}if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},d=function(e){if(e.length<4)throw new Error("Invalid enum value: "+e.slice(0,3).join(" "));if("="!==e[1])throw new Error("Expected = but found "+e[1]);if(";"!==e[3]&&"["!==e[3])throw new Error("Expected ; or [ but found "+e[1]);var t=e.shift();e.shift();var n={value:null,options:{}};return n.value=Number(e.shift()),"["===e[0]&&(n.options=o(e)),e.shift(),{name:t,val:n}},p=function(e){e.shift();var t={},n={name:e.shift(),values:{},options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),n;if("option"!==e[0]){var r=d(e);n.values[r.name]=r.val}else t=g(e),n.options[t.name]=t.value}throw new Error("No closing tag for enum")},g=function(e){for(var t=null,n=null,r=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")};e.length;){if(";"===e[0])return e.shift(),{name:t,value:n};switch(e[0]){case"option":e.shift();var i="("===e[0];if(i&&e.shift(),t=e.shift(),i){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}"."===e[0][0]&&(t+=e.shift());break;case"=":if(e.shift(),null===t)throw new Error("Expected key for option with value: "+e[0]);if(n=r(e.shift()),"optimize_for"===t&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(n))throw new Error("Unexpected value for option optimize_for: "+n);"{"===n&&(n=m(e));break;default:throw new Error("Unexpected token in option: "+e[0])}}},m=function(e){for(var t=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")},n={};e.length;){if("}"===e[0])return e.shift(),n;var r="("===e[0];r&&e.shift();var i=e.shift();if(r){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}var o=null;switch(e[0]){case":":if(n[i]!==undefined)throw new Error("Duplicate option map key "+i);e.shift(),"{"===(o=t(e.shift()))&&(o=m(e)),n[i]=o,";"===e[0]&&e.shift();break;case"{":if(e.shift(),o=m(e),n[i]===undefined&&(n[i]=[]),!Array.isArray(n[i]))throw new Error("Duplicate option map key "+i);n[i].push(o);break;default:throw new Error("Unexpected token in option map: "+e[0])}}throw new Error("No closing tag for option map")},b=function(e){e.shift();var t=e.shift().replace(/^"+|"+$/gm,"");if(";"!==e[0])throw new Error("Unexpected token: "+e[0]+'. Expected ";"');return e.shift(),t},y=function(e){e.shift();var t={name:e.shift(),methods:[],options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;switch(e[0]){case"option":var n=g(e);if(t.options[n.name]!==undefined)throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value;break;case"rpc":t.methods.push(_(e));break;default:throw new Error("Unexpected token in service: "+e[0])}}throw new Error("No closing tag for service")},_=function(e){e.shift();var t={name:e.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.client_streaming=!0),t.input_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),"returns"!==e[0])throw new Error("Expected returns but found "+e[0]);if(e.shift(),"("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.server_streaming=!0),t.output_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),";"===e[0])return e.shift(),t;if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"!==e[0])throw new Error("Unexpected token in rpc options: "+e[0]);var n=g(e);if(t.options[n.name]!==undefined)throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value}throw new Error("No closing tag for rpc")};t.exports=function(e){for(var t=r(e.toString()),n=0;n<t.length;n++){var o;if(/^("|')([^'"]*)$/.test(t[n]))for(o=1===t[n].length?n+1:n;o<t.length;o++)if(/^([^'"]*)("|')$/.test(t[o])){t=t.slice(0,n).concat(t.slice(n,o+1).join("")).concat(t.slice(o+1));break}}for(var s={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},a=!0;t.length;){switch(t[0]){case"package":s.package=f(t);break;case"syntax":if(!a)throw new Error("Protobuf syntax version should be first thing in file");s.syntax=h(t);break;case"message":s.messages.push(l(t));break;case"enum":s.enums.push(p(t));break;case"option":var c=g(t);if(s.options[c.name])throw new Error("Duplicate option "+c.name);s.options[c.name]=c.value;break;case"import":s.imports.push(b(t));break;case"extend":s.extends.push(u(t));break;case"service":s.services||(s.services=[]),s.services.push(y(t));break;default:throw new Error("Unexpected token: "+t[0])}a=!1}return s.extends.forEach((function(e){s.messages.forEach((function(t){t.name===e.name&&e.message.fields.forEach((function(e){if(!t.extensions||e.tag<t.extensions.from||e.tag>t.extensions.to)throw new Error(t.name+" does not declare "+e.tag+" as an extension number");t.fields.push(e)}))}))})),s.messages.forEach((function(e){e.fields.forEach((function(t){var n,r,o,a;if(t.options&&"true"===t.options.packed&&-1===i.indexOf(t.type)){if(-1===t.type.indexOf(".")){if(e.enums&&e.enums.some((function(e){return e.name===t.type})))return}else{if((n=t.type.split(".")).length>2)throw new Error("what is this?");if(r=n[0],o=n[1],s.messages.some((function(e){if(e.name===r)return a=e,e})),a&&a.enums&&a.enums.some((function(e){return e.name===o})))return}throw new Error("Fields of type "+t.type+" cannot be declared [packed=true]. "+"Only repeated fields of primitive numeric types (types which use "+'the varint, 32-bit, or 64-bit wire types) can be declared "packed". '+"See https://developers.google.com/protocol-buffers/docs/encoding#optional")}}))})),s}}}},{package:"3box>ipfs>protons>protocol-buffers-schema"}],[5512,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=function(e,t){var n=e.repeated?"repeated":e.required?"required":"optional";"map"===e.type&&(n="map<"+e.map.from+","+e.map.to+">"),e.oneof&&(n="");var r=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return r&&(r=" ["+r+"]"),t.push((n?n+" ":"")+("map"===e.map?"":e.type+" ")+e.name+" = "+e.tag+r+";"),t},i=function(e,t){t.push("message "+e.name+" {"),e.enums||(e.enums=[]),e.enums.forEach((function(e){t.push(o(e,[]))})),e.messages||(e.messages=[]),e.messages.forEach((function(e){t.push(i(e,[]))}));var n={};return e.fields||(e.fields=[]),e.fields.forEach((function(e){e.oneof?(n[e.oneof]||(n[e.oneof]=[]),n[e.oneof].push(r(e,[]))):t.push(r(e,[]))})),Object.keys(n).forEach((function(e){n[e].unshift("oneof "+e+" {"),n[e].push("}"),t.push(n[e])})),t.push("}",""),t},o=function(e,t){t.push("enum "+e.name+" {"),e.options||(e.options={});var n=a(e.options,[]);return n.length>1&&t.push(n.slice(0,-1)),Object.keys(e.values).map((function(n){var r=s(e.values[n]);t.push([n+" = "+r+";"])})),t.push("}",""),t},s=function(e,t){var n=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return n&&(n=" ["+n+"]"),e.value+n},a=function(e,t){var n=Object.keys(e);return n.forEach((function(n){var r=e[n];~n.indexOf(".")&&(n="("+n+")");var i=typeof r;"object"===i?(r=u(r,[])).length&&t.push("option "+n+" = {",r,"};"):("string"===i&&"optimize_for"!==n&&(r='"'+r+'"'),t.push("option "+n+" = "+r+";"))})),n.length>0&&t.push(""),t},u=function(e,t){return Object.keys(e).forEach((function(n){var r=e[n],i=typeof r;"object"===i?Array.isArray(r)?r.forEach((function(e){(e=u(e,[])).length&&t.push(n+" {",e,"}")})):(r=u(r,[])).length&&t.push(n+" {",r,"}"):("string"===i&&(r='"'+r+'"'),t.push(n+": "+r))})),t},c=function(e,t){var n="rpc "+e.name+"(";e.client_streaming&&(n+="stream "),n+=e.input_type+") returns (",e.server_streaming&&(n+="stream "),n+=e.output_type+")",e.options||(e.options={});var r=a(e.options,[]);return r.length>1?t.push(n+" {",r.slice(0,-1),"}"):t.push(n+";"),t},l=function(e){return function(t){return Array.isArray(t)?t.map(l(e+"  ")).join("\n"):e+t}};t.exports=function(e){var t=[];return t.push('syntax = "proto'+e.syntax+'";',""),e.package&&t.push("package "+e.package+";",""),e.options||(e.options={}),a(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){o(e,t)})),e.messages||(e.messages=[]),e.messages.forEach((function(e){i(e,t)})),e.services&&e.services.forEach((function(e){!function(e,t){t.push("service "+e.name+" {"),e.options||(e.options={}),a(e.options,t),e.methods||(e.methods=[]),e.methods.forEach((function(e){t.push(c(e,[]))})),t.push("}","")}(e,t)})),t.map(l("")).join("\n")}}}},{package:"3box>ipfs>protons>protocol-buffers-schema"}],[5513,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){var t,n=function(e){return e.trim()};return e.replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(n).filter(Boolean).map((function(e){var t=e.indexOf("//");return t>-1?e.slice(0,t):e})).map(n).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((t=!1,function(e){return"/*"===e?(t=!0,!1):"*/"===e?(t=!1,!1):!t}))}}}},{package:"3box>ipfs>protons>protocol-buffers-schema"}],[5514,{"./utils":5519,varint:6118},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("varint"),i=e("./utils").defined;var o=function(e,t,n){switch(e){case 0:return r.decode(t,n),n+r.decode.bytes;case 1:return n+8;case 2:var i=r.decode(t,n);return n+r.decode.bytes+i;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4;default:throw new Error("Unknown wire type: "+e)}},s=function(e,t){if(e.map)return{};if(e.repeated)return[];switch(e.type){case"string":return null!=t?t:"";case"bool":return"true"===t;case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return parseInt(t||0,10);default:return null}};t.exports=function(e,t,n){for(var a=[],u={},c=[],l=[],f=0;f<n.length;f++){var h=e.fields[f];u[h.tag]=f;var d=h.options&&h.options.default,p=t(h.type,e.id,!1);l[f]=[d,p&&p.values],e.fields[f].packed=h.repeated&&h.options&&h.options.packed&&"false"!==h.options.packed,h.required&&a.push(h.name),h.oneof&&c.push(h.name)}function g(e,t,n,i,o,s){var a=t.name;if(t.oneof)for(var u=Object.keys(n),l=0;l<u.length;l++)c.indexOf(u[l])>-1&&delete n[u[l]];if(e.message){var f=r.decode(i,o);o+=r.decode.bytes;var h=e.decode(i,o,o+f);t.map?(n[a]=n[a]||{},n[a][h.key]=h.value):t.repeated?(n[a]=n[a]||[],n[a].push(h)):n[a]=h}else t.repeated?(n[a]=n[a]||[],n[a].push(e.decode(i,o))):n[a]=e.decode(i,o);return o+=e.decode.bytes}return function t(f,h,d){if(null==h&&(h=0),null==d&&(d=f.length),!(d<=f.length&&h<=f.length))throw new Error("Decoded message is not valid");for(var p,m=h,b={};;){if(d<=h){var y,_,v="",w=0;for(w=0;w<a.length;w++)if(v=a[w],!i(b[v]))throw new Error("Decoded message is not valid, missing required field: "+v);for(w=0;w<n.length;w++)if(p=e.fields[w],_=l[w][0],y=l[w][1],v=p.name,!i(b[v])){var E=!1;if(p.oneof)for(var S=Object.keys(b),k=0;k<S.length;k++)if(c.indexOf(S[k])>-1){E=!0;break}E||(y?p.repeated?b[v]=[]:(_=_&&y[_]?y[_].value:y[Object.keys(y)[0]].value,b[v]=parseInt(_||0,10)):b[v]=s(p,_))}return t.bytes=h-m,b}var T=r.decode(f,h);h+=r.decode.bytes;var x=u[T>>3];if(null!=x){var I=n[x];if((p=e.fields[x]).packed){var R=r.decode(f,h);for(R+=h+=r.decode.bytes;h<R;)h=g(I,p,b,f,h)}else h=g(I,p,b,f,h)}else h=o(7&T,f,h)}}}}}},{package:"3box>ipfs>protons"}],[5515,{"./utils":5519,buffer:2175,varint:6118},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("./utils").defined,i=e("varint");t.exports=function(e,t,o,s,a){for(var u=Object.keys(s),c=o.length,l={},f=0;f<c;f++){l[f]={p:i.encode(e.fields[f].tag<<3|2),h:i.encode(e.fields[f].tag<<3|o[f].type)};var h=e.fields[f];e.fields[f].packed=h.repeated&&h.options&&h.options.packed&&"false"!==h.options.packed}function d(e,t,n,r,o,s){var a=0;if(!o)for(a=0;a<n.length;a++)e[t++]=n[a];return r.message&&(i.encode(r.encodingLength(s),e,t),t+=i.encode.bytes),r.encode(s,e,t),t+r.encode.bytes}return function t(f,h,p){null==p&&(p=0),null==h&&(h=n.allocUnsafe(a(f)));var g=p,m=Object.keys(f),b=0,y=!1;for(b=0;b<u.length;b++){var _=u[b],v=s[b];if(m.indexOf(v)>-1){if(y)throw new Error("only one of the properties defined in oneof "+_+" can be set");y=!0}}for(b=0;b<c;b++){var w=o[b],E=e.fields[b],S=f[E.name],k=0;if(r(S)){var T,x=l[b].p,I=l[b].h,R=E.packed;if(E.map){var C=Object.keys(S);for(k=0;k<C.length;k++)C[k]={key:C[k],value:S[C[k]]};S=C}if(R){var A=0;for(k=0;k<S.length;k++)r(S[k])&&(A+=w.encodingLength(S[k]));if(A){for(k=0;k<I.length;k++)h[p++]=x[k];i.encode(A,h,p),p+=i.encode.bytes}}if(E.repeated)for(k=0;k<S.length;k++)T=S[k],r(T)&&(p=d(h,p,I,w,R,T));else p=d(h,p,I,w,R,S)}else if(E.required)throw new Error(E.name+" is required")}return t.bytes=p-g,h}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>protons"}],[5516,{"./utils":5519,varint:6118},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./utils").defined,i=e("varint");t.exports=function(e,t,n){for(var o=Object.keys(n),s=t.length,a=new Array(s),u=0;u<e.fields.length;u++){a[u]=i.encodingLength(e.fields[u].tag<<3|t[u].type);var c=e.fields[u];e.fields[u].packed=c.repeated&&c.options&&c.options.packed&&"false"!==c.options.packed}return function(u){var c=0,l=0,f=0;for(l=0;l<o.length;l++){var h=o[l],d=n[h],p=!1;for(f=0;f<d.length;f++)if(r(u[d[f]])){if(p)throw new Error("only one of the properties defined in oneof "+h+" can be set");p=!0}}for(l=0;l<s;l++){var g,m=t[l],b=e.fields[l],y=u[b.name],_=a[l];if(r(y)){if(b.map){var v=Object.keys(y);for(f=0;f<v.length;f++)v[f]={key:v[f],value:y[v[f]]};y=v}if(b.packed){var w=0;for(f=0;f<y.length;f++)r(y[f])&&(w+=g=m.encodingLength(y[f]),m.message&&(w+=i.encodingLength(g)));w&&(c+=_+w+i.encodingLength(w))}else if(b.repeated)for(f=0;f<y.length;f++)r(y[f])&&(c+=_+(g=m.encodingLength(y[f]))+(m.message?i.encodingLength(g):0));else c+=_+(g=m.encodingLength(y))+(m.message?i.encodingLength(g):0)}else if(b.required)throw new Error(b.name+" is required")}return c}}}}},{package:"3box>ipfs>protons"}],[5517,{"safe-buffer":5818,"signed-varint":5908,varint:6118},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i,o,s=e("varint"),a=e("signed-varint"),u=e("safe-buffer").Buffer,c=function(e,t,n,r){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:r}};n.make=c,n.bytes=(r=function(e){return u.isBuffer(e)?e.length:u.byteLength(e)},c(2,i=function(e,t,n){var o=n,a=r(e);return s.encode(a,t,n),n+=s.encode.bytes,u.isBuffer(e)?e.copy(t,n):t.write(e,n,a),n+=a,i.bytes=n-o,t},o=function(e,t){var n=t,r=s.decode(e,t);t+=s.decode.bytes;var i=e.slice(t,t+r);return t+=i.length,o.bytes=t-n,i},(function(e){var t=r(e);return s.encodingLength(t)+t}))),n.string=function(){var e=function(t,n,r){var i=r,o=u.byteLength(t);return s.encode(o,n,r,"utf-8"),r+=s.encode.bytes,n.write(t,r,o),r+=o,e.bytes=r-i,n},t=function(e,n){var r=n,i=s.decode(e,n);n+=s.decode.bytes;var o=e.toString("utf-8",n,n+i);return n+=i,t.bytes=n-r,o};return c(2,e,t,(function(e){var t=u.byteLength(e);return s.encodingLength(t)+t}))}(),n.bool=function(){var e=function(t,n,r){return n[r]=t?1:0,e.bytes=1,n},t=function(e,n){var r=e[n]>0;return t.bytes=1,r};return c(0,e,t,(function(e){return 1}))}(),n.int32=function(){var e=function(t,n){var r=s.decode(t,n);return e.bytes=s.decode.bytes,r>2147483647?r-4294967296:r};return c(0,s.encode,e,(function(e){return s.encodingLength(e<0?e+4294967296:e)}))}(),n.int64=function(){var e=function(t,n){var r=s.decode(t,n);if(r>=Math.pow(2,63)){for(var i=9;255===t[n+i-1];)i--;i=i||9;var o=u.allocUnsafe(i);t.copy(o,0,n,n+i),o[i-1]=127&o[i-1],r=-1*s.decode(o,0),e.bytes=10}else e.bytes=s.decode.bytes;return r},t=function(e,n,r){if(e<0){var i=r+9;for(s.encode(-1*e,n,r),n[r+=s.encode.bytes-1]=128|n[r];r<i-1;)n[++r]=255;n[i]=1,t.bytes=10}else s.encode(e,n,r),t.bytes=s.encode.bytes;return n};return c(0,t,e,(function(e){return e<0?10:s.encodingLength(e)}))}(),n.sint32=n.sint64=c(0,a.encode,a.decode,a.encodingLength),n.uint32=n.uint64=n.enum=n.varint=c(0,s.encode,s.decode,s.encodingLength),n.fixed64=n.sfixed64=function(){var e=function(t,n,r){return t.copy(n,r),e.bytes=8,n},t=function(e,n){var r=e.slice(n,n+8);return t.bytes=8,r};return c(1,e,t,(function(e){return 8}))}(),n.double=function(){var e=function(t,n,r){return n.writeDoubleLE(t,r),e.bytes=8,n},t=function(e,n){var r=e.readDoubleLE(n);return t.bytes=8,r};return c(1,e,t,(function(e){return 8}))}(),n.fixed32=function(){var e=function(t,n,r){return n.writeUInt32LE(t,r),e.bytes=4,n},t=function(e,n){var r=e.readUInt32LE(n);return t.bytes=4,r};return c(5,e,t,(function(e){return 4}))}(),n.sfixed32=function(){var e=function(t,n,r){return n.writeInt32LE(t,r),e.bytes=4,n},t=function(e,n){var r=e.readInt32LE(n);return t.bytes=4,r};return c(5,e,t,(function(e){return 4}))}(),n.float=function(){var e=function(t,n,r){return n.writeFloatLE(t,r),e.bytes=4,n},t=function(e,n){var r=e.readFloatLE(n);return t.bytes=4,r};return c(5,e,t,(function(e){return 4}))}()}}},{package:"3box>ipfs>protons"}],[5518,{"./decode":5514,"./encode":5515,"./encoding-length":5516,"./encodings":5517,varint:6118},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./encodings"),i=e("./decode"),o=e("./encode"),s=e("./encoding-length"),a=e("varint");t.exports=function(e,t){var n={},u={},c={},l=function(e,t){e.enums&&e.enums.forEach((function(e){e.id=t+(t?".":"")+e.name,u[e.id]=e,l(e,e.id)})),e.messages&&e.messages.forEach((function(r){r.id=t+(t?".":"")+r.name,n[r.id]=r,r.fields.forEach((function(r){if(r.map){var i="Map_"+r.map.from+"_"+r.map.to,o={name:i,enums:[],messages:[],fields:[{name:"key",type:r.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:r.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:t+(t?".":"")+i};n[o.id]||(n[o.id]=o,e.messages.push(o)),r.type=i,r.repeated=!0}})),l(r,r.id)}))};l(e,"");var f=function(e,t){e.messages.forEach((function(n){t[n.name]=h(n.name,e.id)})),e.enums.forEach((function(e){t[e.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].value})),t}(e.values)})),t.type=2,t.message=!0,t.name=e.name;var n={};e.fields.forEach((function(e){e.oneof&&(n[e.oneof]||(n[e.oneof]=[]),n[e.oneof].push(e.name))}));var r=e.fields.map((function(t){return h(t.type,e.id)})),a=s(e,r,n),u=o(e,h,r,n,a),c=i(e,h,r);return u.bytes=c.bytes=0,t.buffer=!0,t.encode=u,t.decode=c,t.encodingLength=a,t},h=function(e,i,o){if(t&&t[e])return t[e];if(r[e])return r[e];var s,l,h=(i?i+"."+e:e).split(".").map((function(t,n,r){return r.slice(0,n).concat(e).join(".")})).reverse().reduce((function(e,t){return e||n[t]||u[t]}),null);if(!1===o)return h;if(!h)throw new Error("Could not resolve "+e);return h.values?(s=h,l=Object.keys(s.values||[]).map((function(e){return parseInt(s.values[e].value,10)})),r.make(0,(function e(t,n,r){if(!l.length||-1===l.indexOf(t))throw new Error("Invalid enum value: "+t);return a.encode(t,n,r),e.bytes=a.encode.bytes,n}),(function e(t,n){var r=a.decode(t,n);if(!l.length||-1===l.indexOf(r))throw new Error("Invalid enum value: "+r);return e.bytes=a.decode.bytes,r}),a.encodingLength)):c[h.id]||f(h,c[h.id]={})};return(e.enums||[]).concat((e.messages||[]).map((function(e){return h(e.id)})))}}}},{package:"3box>ipfs>protons"}],[5519,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.defined=function(e){return null!==e&&e!==undefined&&("number"!=typeof e||!isNaN(e))}}}},{package:"3box>ipfs>protons"}],[552,{"@keystonehq/bc-ur-registry":571,buffer:2175,"ethereumjs-util":2612,hdkey:4484,uuid:6096},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("@keystonehq/bc-ur-registry"),o=e("uuid"),s=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,a=e("ethereumjs-util");const{RegistryType:u}=i.extend,c={ETH_SIGN_REQUEST:new u("eth-sign-request",401),ETH_SIGNATAURE:new u("eth-signature",402)},{decodeToDataItem:l,RegistryTypes:f}=i.extend;var h,d;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(h||(h={})),(d=n.DataType||(n.DataType={}))[d.transaction=1]="transaction",d[d.typedData=2]="typedData",d[d.personalMessage=3]="personalMessage",d[d.typedTransaction=4]="typedTransaction";class p extends i.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.setupData=e=>{this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin},this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[h.requestId]=new i.DataItem(this.requestId,f.UUID.getTag())),this.address&&(e[h.address]=this.address),this.chainId&&(e[h.chainId]=this.chainId),this.origin&&(e[h.origin]=this.origin),e[h.signData]=this.signData,e[h.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[h.derivationPath]=t,new i.DataItem(e)},this.setupData(e)}static constructETHRequest(e,n,r,s,a,u,c,l){const f=r.replace(/[m|M]\//,"").split("/"),h=new i.CryptoKeypath(f.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new i.PathComponent({index:t,hardened:n})})),t.from(s,"hex"));return new p({requestId:a?t.from(o.parse(a)):void 0,signData:e,dataType:n,derivationPath:h,chainId:u,address:c?t.from(c.replace("0x",""),"hex"):void 0,origin:l||void 0})}}p.fromDataItem=e=>{const t=e.getData(),n=t[h.signData],r=t[h.dataType],o=i.CryptoKeypath.fromDataItem(t[h.derivationPath]),s=t[h.chainId]?t[h.chainId]:void 0,a=t[h.address]?t[h.address]:void 0,u=t[h.requestId]?t[h.requestId].getData():void 0;return new p({requestId:u,signData:n,dataType:r,chainId:s,derivationPath:o,address:a,origin:t[h.origin]?t[h.origin]:void 0})},p.fromCBOR=e=>{const t=l(e);return p.fromDataItem(t)};const{RegistryTypes:g,decodeToDataItem:m}=i.extend;var b;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature"}(b||(b={}));class y extends i.RegistryItem{constructor(e,t){super(),this.getRegistryType=()=>c.ETH_SIGNATAURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.toDataItem=()=>{const e={};return this.requestId&&(e[b.requestId]=new i.DataItem(this.requestId,g.UUID.getTag())),e[b.signature]=this.signature,new i.DataItem(e)},this.signature=e,this.requestId=t}}y.fromDataItem=e=>{const t=e.getData(),n=t[b.signature],r=t[b.requestId]?t[b.requestId].getData():void 0;return new y(n,r)},y.fromCBOR=e=>{const t=m(e);return y.fromDataItem(t)};const _=(e,t)=>{const n=s.fromExtendedKey(e).derive(t),r="0x"+a.publicToAddress(n.publicKey,!0).toString("hex");return a.toChecksumAddress(r)},{cbor:v}=i.extend;v.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(i).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})})),n.ETHSignature=y,n.EthSignRequest=p,n.findHDpatfromAddress=(e,t,n,r)=>{for(let i=0;i<n;i++){const n=_(t,"M/0/"+i);if(e.toLowerCase()==n.toLowerCase())return`${r}/0/${i}`}return null},n.generateAddressfromXpub=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth"}],[5520,{"../../is-buffer/index.js":4797,"./compile":5518,"protocol-buffers-schema":5510},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("protocol-buffers-schema"),i=e("./compile");t.exports=function(e,t){if(t||(t={}),!e)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var o="object"!=typeof e||n.isBuffer(e)?r.parse(e):e,s=function(){var e=this;i(o,t.encodings||{}).forEach((function(t){e[t.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].value})),t}(t.values)||t}))};return s.prototype.toString=function(){return r.stringify(o)},s.prototype.toJSON=function(){return o},new s}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"3box>ipfs>protons"}],[5521,{},function(){with(this)return function(){"use strict";return function(e,t,n){
/*!
  * prr
  * (c) 2013 Rod Vagg <rod@vagg.org>
  * https://github.com/rvagg/prr
  * License: MIT
  */
var r,i;r=this,i=function(){var e="function"==typeof Object.defineProperty?function(e,t,n){return Object.defineProperty(e,t,n),e}:function(e,t,n){return e[t]=n.value,e};return function(t,n,r,i){var o;if(i=function(e,t){var n="object"==typeof t,r=!n&&"string"==typeof t,i=function(e){return n?!!t[e]:!!r&&t.indexOf(e[0])>-1};return{enumerable:i("enumerable"),configurable:i("configurable"),writable:i("writable"),value:e}}(r,i),"object"==typeof n){for(o in n)Object.hasOwnProperty.call(n,o)&&(i.value=n[o],e(t,o,i));return t}return e(t,n,i)}},void 0!==t&&t.exports?t.exports=i():r.prr=i()}}},{package:"webpack>memory-fs>errno>prr"}],[5529,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){var t,n,r=!1,i=!1;function o(){if(e)return e(r&&!0!==r?r:i&&!0!==i?i:null)}function s(){i=i||!0,function(e){o();var n=t;t=null,n&&n(r||i)}(),n&&n(r,(function(e){t&&t(e||r)}))}function a(e){return n=e,function(n,s){if(t=s,n&&(r=n),i)return s(i);r||(!0,e(n,(function(s,a){if(!1,r)return!n&&e(r,(function(){}));if(t){var u=t;t=null,s?(i=r||s,o(),u(r||s)):u(r||s,a)}})))}}return a.abort=function(e){i||(r=e||!0,s())},a}}}},{package:"3box>ipfs>pull-abortable"}],[553,{"./bc-ur-registry-eth.cjs.development.js":551,"./bc-ur-registry-eth.cjs.production.min.js":552},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./bc-ur-registry-eth.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth"}],[5530,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t,n){var r=e.length;if(!r)return n(t);function i(){--r||n(t)}e.forEach((function(e){e?e(t,i):i()})),r||i()}t.exports=function(e){return function(t,n){!function i(){t?r(e,t,n):e.length?e[0]?e[0](null,(function(t,o){t?(e.shift(),!0===t?i():r(e,t,n)):n(null,o)})):(e.shift(),i()):n(!0)}()}}}}},{package:"3box>ipfs>pull-cat"}],[5531,{"./sink":5533,"./source":5534},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./source"),i=e("./sink");t.exports=function(){var e=r(),t=i();return{source:e,sink:t,resolve:function(n){e.resolve(n.source),t.resolve(n.sink)}}}}}},{package:"3box>ipfs>pull-defer"}],[5532,{"./duplex":5531,"./sink":5533,"./source":5534,"./through":5535},function(){with(this)return function(){"use strict";return function(e,t,n){n.source=e("./source"),n.through=e("./through"),n.sink=e("./sink"),n.duplex=e("./duplex")}}},{package:"3box>ipfs>pull-defer"}],[5533,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){var t,n=!1;function r(r){if(!r)throw new Error("must be passed a readable");t=r,n&&e(t)}return r.resolve=r.ready=r.start=function(i){return n=!0,e=i||e,t&&e(t),r},r}}}},{package:"3box>ipfs>pull-defer"}],[5534,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){var e,t,n,r,i=function(i,o){e?e(i,o):i?(r=i,n=o):t=o};return i.resolve=function(i){if(e)throw new Error("already resolved");if(!(e=i))throw new Error("no read cannot resolve!"+e);t&&i(null,t),n&&i(r,n)},i.abort=function(e){i.resolve((function(t,n){n(e||!0)}))},i}}}},{package:"3box>ipfs>pull-defer"}],[5535,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){var e,t,n,r,i;function o(o){return i?i(o):(e=o,function(e,i){t?t(e,i):(r=e,n=i)})}return o.resolve=function(o){if(i)throw new Error("already resolved");if(!(i=o))throw new Error("resolve *must* be passed a transform stream");e&&(t=i(e),n&&t(r,n))},o}}}},{package:"3box>ipfs>pull-defer"}],[5536,{"pull-cat":5530,"pull-pair":5550,"pull-pushable":5551,"pull-reader":5552},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("pull-reader"),i=e("pull-pushable"),o=e("pull-cat"),s=e("pull-pair");t.exports=function(e,t){"function"==typeof e&&(t=e,e={}),t=function(e){var t=0;return function(n,r,i){t++||e(n,r,i)}}(t||function(){});var n=r(e&&e.timeout||5e3),a=i((function(e){e&&t(e)})),u=s();return{handshake:{read:n.read,abort:function(e){a.end(e),n.abort(e,(function(e){})),t(e)},write:a.push,rest:function(){return a.end(),{source:n.read(),sink:u.sink}}},sink:n,source:o([a,u.source])}}}}},{package:"3box>ipfs>libp2p-secio>pull-handshake"}],[5537,{"pull-pushable":5551,"pull-reader":5552,"safe-buffer":5818,varint:6118},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("varint"),i=e("pull-reader"),o=e("safe-buffer").Buffer,s=e("pull-pushable");n.decode=function(e){let t=new i,n=s((e=>{t.abort(e)}));return r=>(t(r),function r(){let i=!0,o=!1;const s=(e,t)=>{o=!0,e?(n.end(e),i=!1):(n.push(t),i||r())};for(;i;)o=!1,a(t,e,s),o||(i=!1)}(),n)},n.decodeFromReader=function(e,t,n){"function"==typeof t&&(n=t,t={});a(e,t,(function(e,t){if(e)return n(!0===e?new Error("Unexpected end of input from reader."):e);n(null,t)}))};function a(e,t,n){(t=Object.assign({fixed:!1,maxLength:4194304},t||{})).fixed?function(e,t,n){e.read(4,((r,i)=>{if(r)return n(r);const o=i.readInt32BE(0);if(o>t)return n(new Error("size longer than max permitted length of "+t+"!"));u(e,o,n)}))}(e,t.maxLength,n):function(e,t,n){let i=[];0===i.length&&s();function s(){e.read(1,((a,c)=>{if(a)return n(a);if(i.push(c),c&&!(e=>!(128&e))(c[0]))return void s();const l=r.decode(o.concat(i));if(l>t)return n(new Error("size longer than max permitted length of "+t+"!"));u(e,l,((e,t)=>e?n(e):(i=[],t.length<l?n(new Error("Message length does not match prefix specified length.")):void n(null,t))))}))}}(e,t.maxLength,n)}function u(e,t,n){e.read(t,((e,t)=>{if(e)return n(e);n(null,t)}))}}}},{package:"3box>ipfs>libp2p-secio>pull-length-prefixed"}],[5538,{"safe-buffer":5818,varint:6118},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("safe-buffer").Buffer;t.exports=function(t){t=Object.assign({fixed:!1},t||{});const n=e("varint");let o=t.fixed?null:i(),s=0,a=!1;return e=>(u,c)=>{if(u&&(a=u),a)return c(a);e(null,((e,u)=>{if(e&&(a=e),a)return c(a);if(!a&&!r.isBuffer(u))return a=new Error("data must be a buffer"),c(a);const l=a?0:u.length;let f;if(t.fixed?(f=r.alloc(4),f.writeInt32BE(l,0)):(n.encode(l,o,s),s+=n.encode.bytes,f=o.slice(s-n.encode.bytes,s),o.length-s<100&&(o=i(),s=0)),a)return c(null,f);c(null,r.concat([f,u],(t.fixed?4:n.encode.bytes)+l))}))}};function i(){return r.alloc(10240)}}}},{package:"3box>ipfs>libp2p-secio>pull-length-prefixed"}],[5539,{"./decode":5537,"./encode":5538},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./encode"),i=e("./decode");n.encode=r,n.decode=i.decode,n.decodeFromReader=i.decodeFromReader}}},{package:"3box>ipfs>libp2p-secio>pull-length-prefixed"}],[5540,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){var t,n,r=!!e,i=(e||[]).map(s),o=0;function s(e){return{ready:!1,reading:!1,ended:!1,read:e,data:null}}function a(){if(n){!function(){var e=i.length;for(;e--;)i[e].ended&&i.splice(e,1)}();var e=i.length,s=n;if(0===e&&(t||r))return n=null,void s(t||!0);for(var a=0;a<e;a++){var u=i[(o+a)%e];if(u.ready&&!u.ended){var c=u.data;return u.ready=!1,u.data=null,o++,n=null,s(null,c)}}}}function u(){for(var e=i.length;e--;)!function(n){if(e>i.length)throw new Error("this should never happen");if(!(n.reading||n.ended||n.ready)){n.reading=!0;var r=!0;n.read(t,(function e(i,o){n.data=o,n.ready=!0,n.reading=!1,!0===i||t?n.ended=!0:i&&(t=n.ended=i),t&&!i&&n.read(t,e),r||a()})),r=!1}}(i[e]);a()}function c(e,r){t=t||e,n=r,u()}return c.add=function(e){if(!e)return r=!0,u();i.push(s(e)),u()},c.cap=function(e){c.add(null)},c}}}},{package:"3box>ipfs>datastore-core>pull-many"}],[5541,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){var t=!1,n=0;return function(){if(n=!0,!t){for(t=!0;n;)n=!1,e();t=!1}}}}}},{package:"3box>ipfs>pull-mplex>looper"}],[5542,{"./consts":5545,"./util":5549,"async/nextTick":1870,debug:2347,events:2176,looper:5541,"pull-pushable":5551},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-pushable"),i=e("looper"),o=e("async/nextTick"),s=e("events"),a=e("debug"),{Types:u}=e("./consts"),{emitError:c}=e("./util"),l=a("pull-plex:chan");l.err=a("pull-plex:chan:err");t.exports=class extends s{constructor(e){var t;super(),e={initiator:!1,...e},this._id=e.id,this._name=e.name,this._plex=e.plex,this._open=e.open,this._initiator=e.initiator,this._endedRemote=!1,this._endedLocal=!1,this._destroy=!1,this.MSG=this._initiator?u.OUT_MESSAGE:u.IN_MESSAGE,this.END=this._initiator?u.OUT_CLOSE:u.IN_CLOSE,this.RESET=this._initiator?u.OUT_RESET:u.IN_RESET,this._log("new channel",this._name),this._msgs=r((e=>{this._log("source closed",e),e&&"boolean"!=typeof e&&o(c,this,e)})),this._source=this._msgs,this.sink=(t=this,function(e){const n=i((function(){e(null,(function(e,r){if(!t._endedLocal){if(t._endedLocal=e||!1,!0===e)return t.endChan();if(e||t._destroy)return t.destroyChan(),t.emit("error",e||t._destroy),void t.destroy();t.sendMsg(r),n()}}))}));n()})}get source(){return this._source}get id(){return this._id}get open(){return this._open}set open(e){this._open=e}get name(){return this._name}get destroyed(){return this._endedRemote&&this._endedLocal}_log(e,t){l.enabled&&l({op:e,name:this._name,id:this._id,endedLocal:this._endedLocal,endedRemote:this._endedRemote,initiator:this._initiator,data:t&&t.toString()||""})}push(e){this._log("push"),this._msgs.push(e)}close(e){this._log("close",e),this._endedRemote||(this._endedRemote=e||!0,this._msgs.end(this._endedRemote),this.emit("close",e),this.plex=null)}destroy(e){this._log("destroy",e),this._destroy=e||"channel destroyed!",this.close(this._destroy)}openChan(e){this.open||(this.open=!0,this._plex.push([this._id,u.NEW,e!==this._id.toString()?e:this._id.toString()]))}sendMsg(e){this._log("sendMsg",e),this.open||this.openChan(this.name),this._plex.push([this._id,this.MSG,e])}endChan(){this._log("endChan"),this.open&&this._plex.push([this._id,this.END])}destroyChan(){this._log("destroyChan"),this.open&&this._plex.push([this._id,this.RESET])}}}}},{package:"3box>ipfs>pull-mplex"}],[5543,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports="/mplex/6.7.0"}}},{package:"3box>ipfs>pull-mplex"}],[5544,{buffer:2175,debug:2347,"pull-through":5588,varint:6118},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){const r=e("varint"),i=e("pull-through"),o=e("debug"),s=o("pull-plex:coder");s.err=o("pull-plex:coder:err");const a=10240,u=t.alloc(0);n.encode=()=>{let e=t.allocUnsafe(a),n=0;return i((function(i){const o=n;r.encode(i[0]<<3|i[1],e,n),n+=r.encode.bytes,r.encode(i[2]?i[2].length:0,e,n),n+=r.encode.bytes,this.queue(e.slice(o,n)),a-n<100&&(e=t.allocUnsafe(a),n=0),this.queue(i[2]?i[2]:u)}))};const c=0,l=1;n.decode=()=>{let e=c;const n=t=>{const[n,i,o]=(e=>{let t=0,n=0;try{let i=r.decode(e);return t+=r.decode.bytes,n=r.decode(e,t),t+=r.decode.bytes,[i,t,n]}catch(e){s.err(e)}return[]})(t);if(void 0!==n){const r={id:n>>3,type:7&n,data:[]};return e=l,[t.slice(i),r,o]}return[t]};let o=0,a=null,u=!1,f=[];return i((function(r){var i=this;!function s(){if(r&&r.length){if(c===e){if(u&&(f.push(r),r=t.concat(f)),[r,a,o]=n(r),!a)return u||f.push(r),void(u=!0);f=[],u=!1}l===e&&([o,r,a.data]=((n,r,i)=>{if(i<=0)return e=c,[0,n,r];let o=i-n.length;o<0&&(o=0);const s=i-o;if(n.length>0){const e=t.isBuffer(n)?n:t.from(n);r.push(e.slice(0,s))}return o<=0&&(e=c),[o,n.slice(s),r]})(r,a.data,o),o<=0&&c===e&&(a.data=t.concat(a.data),i.queue(a),a=null,o=0)),s()}}()}))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>pull-mplex"}],[5545,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.Types={NEW:0,IN_MESSAGE:1,OUT_MESSAGE:2,IN_CLOSE:3,OUT_CLOSE:4,IN_RESET:5,OUT_RESET:6},n.MAX_MSG_SIZE=1<<20}}},{package:"3box>ipfs>pull-mplex"}],[5546,{"./codec":5543,"./mplex":5547,"./muxer":5548,debug:2347,"pull-abortable":5529,"pull-stream":5557},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-abortable"),i=e("pull-stream"),o=e("debug"),s=e("./codec"),a=e("./mplex"),u=e("./muxer"),c=o("pull-plex");function l(e,t){const n=new a(!t),o=r();i(e,n,o,e);const s=new u(e,n);return s.once("error",(e=>{c.err("got error",e),o.abort(e)})),s.on("close",(()=>{c("closing muxer"),o.abort()})),s}c.err=o("pull-plex:err"),(n=t.exports=l).pullMplex=a,n.multicodec=s,n.dialer=e=>l(e,!1),n.listener=e=>l(e,!0)}}},{package:"3box>ipfs>pull-mplex"}],[5547,{"./channel":5542,"./coder":5544,"./consts":5545,"./util":5549,"async/nextTick":1870,buffer:2175,debug:2347,events:2176,looper:5541,"pull-pushable":5551,"pull-stream":5557,"pull-through":5588},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("pull-stream"),i=e("pull-pushable"),o=e("pull-through"),s=e("looper"),a=e("async/nextTick"),u=e("events"),c=e("debug"),{emitError:l,emitStream:f}=e("./util"),{Types:h,MAX_MSG_SIZE:d}=e("./consts"),p=e("./channel"),g=e("./coder"),m=c("pull-plex");m.err=c("pull-plex:err");t.exports=class extends u{constructor(e){super(),"boolean"==typeof e&&(e={initiator:e}),e={initiator:!0,onChan:null,maxChannels:1e4,maxMsgSize:d,lazy:!1,...e},this._maxChannels=e.maxChannels,this._maxMsgSize=e.maxMsgSize,this._lazy=e.lazy,this._initiator=Boolean(e.initiator),this._chanId=0,this._inChannels=new Array(this._maxChannels/2),this._outChannels=new Array(this._maxChannels/2),this._endedRemote=!1,this._endedLocal=!1,this._chandata=i((e=>{this._log("mplex ended"),this._endedRemote=!0,this.close(e)})),e.onChan&&this.on("stream",(t=>e.onChan(t,t.id))),this.source=r(this._chandata,g.encode());const t=this;this.sink=r(o((function(e){if(e&&e.length>=t._maxMsgSize)return a(l,t,new Error("message too large!")),this.queue(null);this.queue(e)})),g.decode(),(e=>{const n=s((()=>{e(null,((e,r)=>{if(!t._endedLocal){if(!0===e)return t.close();if(e)return t.destroy(e);t._handle(r),n()}}))}));n()}))}_log(e,t){m({op:e,initiator:this._initiator,endedLocal:this._endedLocal,endedRemote:this._endedRemote,data:t&&t.toString()||""})}get initiator(){return this._initiator}close(e){if(this._log("close",e),this.destroyed)return;e&&a(l,this,e),e=e||"Underlying stream has been closed",this._endedLocal=!0;const t=Array.prototype.concat(this._outChannels,this._inChannels);for(let n of t)n&&n.close(e);this.emit("close")}get destroyed(){return this._endedRemote&&this._endedLocal}destroy(e){e=e||new Error("Underlying stream has been closed"),this._chandata.end(e),this.close(e)}push(e){e.data&&n.byteLength(e.data)>this._maxMsgSize&&this._chandata.end(new Error("message too large!")),this._chandata.push(e)}createStream(e){"number"==typeof e&&(e=e.toString());const t=this._newStream(null,!0,!1,e,this._outChannels);return this._lazy||t.openChan(e),t}_newStream(e,t,n,r,i){if(this.chanSize>=this._maxChannels)return void this.emit("error",new Error("max channels exceeded"));if("string"==typeof t&&(r=t,t=!1,n=!1),"string"==typeof n&&(r=n,n=!1),i[e="number"==typeof e?e:this._chanId++])return void this.emit("error",new Error(`channel with id ${e} already exist!`));const o=new p({id:e,name:r,plex:this,initiator:t,open:n||!1});return this._addChan(e,o,i)}_addChan(e,t,n){return t.once("close",(()=>{n[e]=null})),t.once("error",(e=>{m.err("channel error",e)})),n[e]=t,t}get chanSize(){return this._inChannels.size+this._outChannels.size}_handle(e){this._log("_handle",e);const{id:t,type:n,data:r}=e;switch(n){case h.NEW:{const e=this._newStream(t,!1,!0,r.toString(),this._inChannels);a(f,this,e,t);break}case h.OUT_MESSAGE:case h.IN_MESSAGE:{const e=(1&n?this._outChannels:this._inChannels)[t];e&&e.push(r);break}case h.OUT_CLOSE:case h.IN_CLOSE:{const e=(1&n?this._outChannels:this._inChannels)[t];e&&e.close();break}case h.OUT_RESET:case h.IN_RESET:{const e=(1&n?this._outChannels:this._inChannels)[t];e&&e.destroy();break}default:a(l,this,new Error("Invalid message type"))}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>pull-mplex"}],[5548,{"./codec":5543,"async/nextTick":1870,debug:2347,events:2176,"interface-connection":4517},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("events").EventEmitter,i=e("interface-connection").Connection,o=e("async/nextTick"),s=e("debug"),a=e("./codec"),u=s("libp2p-mplex:muxer");function c(){}u.err=s("libp2p-mplex:muxer:error");t.exports=class extends r{constructor(e,t){super(),this.conn=e,this.multiplex=t,this.multicodec=a,t.on("close",(()=>this.emit("close"))),t.on("error",(e=>this.emit("error",e))),t.on("stream",(e=>{e.on("error",(e=>{u.err("receiver stream errored",e)})),this.emit("stream",new i(e,this.conn))}))}newStream(e){e=e||c;let t=this.multiplex.createStream();t.on("error",(e=>{u.err("initiator stream errored",e)}));const n=new i(t,this.conn);return o(e,null,n),n}end(e){if(e=e||c,this.multiplex.destroyed)return o(e);this.multiplex.once("close",e),this.multiplex.close()}}}}},{package:"3box>ipfs>pull-mplex"}],[5549,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports.emitError=function(e,t){e.emit("error",t)},t.exports.emitStream=function(e,t,n){e.emit("stream",t,n)}}}},{package:"3box>ipfs>pull-mplex"}],[5550,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){var e,t;return{source:function(n,r){e?e(n,r):t=[n,r]},sink:function(n){if("function"!=typeof n)throw new Error("read must be function");if(e)throw new Error("already piped");if(e=n,t){var r=t;t=null,e.apply(null,r)}}}}}}},{package:"3box>ipfs>pull-mplex>pull-pair"}],[5551,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){"function"==typeof e&&(t=e,e=!1);var n,r,i,o=[];function s(e,t){e&&(n=e,r&&l(n)),r=t,c()}function a(e){i=i||e||!0,c()}function u(e){i||(r?l(n,e):o.push(e))}if(e)return{push:u,end:a,source:s,buffer:o};return s.push=u,s.end=a,s.buffer=o,s;function c(){r&&(n?l(n):!o.length&&i?l(i):o.length&&l(null,o.shift()))}function l(e,n){var i=r;if(e&&t){var o=t;t=null,o(!0===e?null:e)}r=null,i(e,n)}}}}},{package:"3box>ipfs>pull-pushable"}],[5552,{"./state":5553},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./state");function i(e){return"function"==typeof e}function o(e,t){return t?function(n,r){var i=setTimeout((function(){e(new Error("pull-reader: read exceeded timeout"),r)}),t);e(n,(function(e,t){clearTimeout(i),r(e,t)}))}:e}t.exports=function(e){var t,n,s,a,u,c=[],l=!1,f=r();function h(){for(;c.length;)if(null==c[0].length&&f.has(1))c.shift().cb(null,f.get());else if(f.has(c[0].length)){var e=c.shift();e.cb(null,f.get(e.length))}else if(1==s&&c[0].length&&f.length<c[0].length){var t="stream ended with:"+f.length+" but wanted:"+c[0].length;c.shift().cb(new Error(t))}else{if(!s)return!!c.length;c.shift().cb(s)}return c.length||!f.has(1)||u}function d(){h()&&!l&&(!t||l||a||(l=!0,n(null,(function(e,t){if(l=!1,e)return s=e,h();f.add(t),d()}))))}function p(r){if(u){for(;c.length;)c.shift().cb(u);return cb&&cb(u)}n=o(r,e),t=r,d()}return p.abort=function(e,n){u=e||!0,t?(l=!0,t(u,(function(){for(;c.length;)c.shift().cb(u);n&&n(u)}))):n()},p.read=function(n,r,s){if(i(r)&&(s=r,r=e),!i(s))return a=!0,function(e,n){if(l||f.has(1)){if(e)return t(e,n);c.push({length:null,cb:n}),d()}else o(t,r)(e,(function(e,t){n(e,t)}))};var u;c.push({length:(u=n,Number.isFinite(u)?n:null),cb:s}),d()},p}}}},{package:"3box>ipfs>libp2p-secio>pull-handshake>pull-reader"}],[5553,{buffer:2175},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){t.exports=function(){var t=[],n=0;return{length:n,data:this,add:function(r){if(!e.isBuffer(r))throw new Error("data must be a buffer, was: "+JSON.stringify(r));return this.length=n+=r.length,t.push(r),this},has:function(e){return null==e?n>0:n>=e},get:function(r){var i;if(null==r||r===n){n=0;var o=t;return t=[],1==o.length?o[0]:e.concat(o)}if(t.length>1&&r<=(i=t[0].length)){var s=t[0].slice(0,r);return r===i?t.shift():t[0]=t[0].slice(r,i),n-=r,s}if(r<n){for(var a=[],u=0;u+t[0].length<r;){var c=t.shift();u+=c.length,a.push(c)}return u<r&&(a.push(t[0].slice(0,r-u)),t[0]=t[0].slice(r-u,t[0].length),this.length=n-=r),e.concat(a)}throw new Error("could not get "+r+" bytes")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>libp2p-secio>pull-handshake>pull-reader"}],[5554,{"pull-defer/source":5534,"pull-stream/sinks/collect":5559,"pull-stream/sources/error":5569,"pull-stream/sources/values":5574},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("pull-defer/source"),i=e("pull-stream/sources/error"),o=e("pull-stream/sources/values"),s=e("pull-stream/sinks/collect");t.exports=function(e){var t=r(),n=s((function(n,r){if(n)return t.resolve(i(n));t.resolve(o(r.sort(e)))}));return function(e){return n(e),t}}}}},{package:"3box>ipfs>pull-sort"}],[5555,{"pull-stream/pull":5558},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-stream/pull");t.exports=e=>async function*(){let t;for(r(e,(e=>{t=()=>new Promise(((t,n)=>{e(null,((e,r)=>!0===e?t({end:e}):e?n(e):void t({data:r})))}))}));;){const{end:e,data:n}=await t();if(e)break;yield n}}()}}},{package:"3box>ipfs>pull-stream-to-async-iterator"}],[5556,{_process:5500,stream:2178,timers:6023},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n,r){(function(){var i=e("stream");t.exports=s,t.exports.source=function(e){return s(null,e)},t.exports.sink=function(e){return s(e,null)};var o=void 0===r?n.nextTick:r;function s(e,t){e&&"object"==typeof e&&(t=e.source,e=e.sink);var n,r,s,a=[],u=[],c=new i;c.writable=c.readable=!0,c.write=function(e){return a.length?a.shift()(null,e):u.push(e),a.length||(r=!0),!!a.length},c.end=function(){t?u.length?p():t(n=!0,a.length?a.shift():function(){}):a.length&&a.shift()(!0)},c.source=function(e,t){u.length?(t(null,u.shift()),u.length||c.emit("drain")):((n=n||e)?t(n):a.push(t),r&&(r=!1,c.emit("drain")))},e&&(s=e(c.source)),s&&!t&&(t=s);var l=[],f=!1,h=!1;if(c.sink=function(e){t=e,o(p)},t){c.sink(t);var d=c.pipe.bind(c);c.pipe=function(e,t){var n=d(e,t);return c.paused&&c.resume(),n}}function p(){if(!1,t&&!h){for(;l.length&&!c.paused;)c.emit("data",l.shift());if(!c.paused){if(f)return c.emit("end");h=!0,t(null,(function e(r,i){h=!1,c.paused?(!0===r?f=r:r?c.emit("error",r):l.push(i),!0):r&&!0!==(n=r)?c.emit("error",r):(n=n||r)?c.emit("end"):(c.emit("data",i),h=!0,t(null,e))}))}}}return c.pause=function(){return c.paused=!0,c},c.resume=function(){return c.paused=!1,p(),c},c.destroy=function(){!n&&t&&t(n=!0,(function(){})),n=!0,a.length&&a.shift()(!0),c.emit("close")},c}}).call(this)}).call(this,e("_process"),e("timers").setImmediate)}}},{package:"3box>ipfs>pull-stream-to-stream"}],[5557,{"./pull":5558,"./sinks":5563,"./sources":5570,"./throughs":5579},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./sources"),i=e("./sinks"),o=e("./throughs");for(var s in(n=t.exports=e("./pull")).pull=n,r)n[s]=r[s];for(var s in o)n[s]=o[s];for(var s in i)n[s]=i[s]}}},{package:"3box>ipfs>pull-stream"}],[5558,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function e(t){var n=arguments.length;if("function"==typeof t&&1===t.length){for(var r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return function(t){if(null==r)throw new TypeError("partial sink should only be called once!");var i=r;switch(r=null,n){case 1:return e(t,i[0]);case 2:return e(t,i[0],i[1]);case 3:return e(t,i[0],i[1],i[2]);case 4:return e(t,i[0],i[1],i[2],i[3]);default:return i.unshift(t),e.apply(null,i)}}}var o=t;o&&"function"==typeof o.source&&(o=o.source);for(i=1;i<n;i++){var s=arguments[i];"function"==typeof s?o=s(o):s&&"object"==typeof s&&(s.sink(o),o=s.source)}return o}}}},{package:"3box>ipfs>pull-stream"}],[5559,{"./reduce":5566},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./reduce");t.exports=function(e){return r((function(e,t){return e.push(t),e}),[],e)}}}},{package:"3box>ipfs>pull-stream"}],[5560,{"./reduce":5566},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./reduce");t.exports=function(e){return r((function(e,t){return e+t}),"",e)}}}},{package:"3box>ipfs>pull-stream"}],[5561,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){var n,r;function i(o){if(n=o,r)return i.abort();!function i(){for(var o=!0,s=!1;o;)if(s=!1,n(null,(function(a,u){if(s=!0,a=a||r){if(o=!1,t)t(!0===a?null:a);else if(a&&!0!==a)throw a}else e&&!1===e(u)||r?(o=!1,n(r||!0,t||function(){})):o||i()})),!s)return void(o=!1)}()}return i.abort=function(e,t){if("function"==typeof e&&(t=e,e=!0),r=e||!0,n)return n(r,t||function(){})},i}}}},{package:"3box>ipfs>pull-stream"}],[5562,{"../util/prop":5586,"./drain":5561},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){return e}var i=e("../util/prop"),o=e("./drain");t.exports=function(e,t){var n=!1;return t?e=i(e)||r:(t=e,e=r),o((function(r){if(e(r))return n=!0,t(null,r),!1}),(function(e){n||t(!0===e?null:e,null)}))}}}},{package:"3box>ipfs>pull-stream"}],[5563,{"./collect":5559,"./concat":5560,"./drain":5561,"./find":5562,"./log":5564,"./on-end":5565,"./reduce":5566},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={drain:e("./drain"),onEnd:e("./on-end"),log:e("./log"),find:e("./find"),reduce:e("./reduce"),collect:e("./collect"),concat:e("./concat")}}}},{package:"3box>ipfs>pull-stream"}],[5564,{"./drain":5561},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./drain");t.exports=function(e){return r((function(e){console.log(e)}),e)}}}},{package:"3box>ipfs>pull-stream"}],[5565,{"./drain":5561},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./drain");t.exports=function(e){return r(null,e)}}}},{package:"3box>ipfs>pull-stream"}],[5566,{"./drain":5561},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./drain");t.exports=function(e,t,n){n||(n=t,t=null);var i=r((function(n){t=e(t,n)}),(function(e){n(e,t)}));return 2===arguments.length?function(e){e(null,(function(r,o){if(r)return n(!0===r?null:r);t=o,i(e)}))}:i}}}},{package:"3box>ipfs>pull-stream"}],[5567,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){var t=0;return e=e||Infinity,function(n,r){return n?r&&r(n):t>e?r(!0):void r(null,t++)}}}}},{package:"3box>ipfs>pull-stream"}],[5568,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){return function(e,t){t(!0)}}}}},{package:"3box>ipfs>pull-stream"}],[5569,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){return function(t,n){n(e)}}}}},{package:"3box>ipfs>pull-stream"}],[5570,{"./count":5567,"./empty":5568,"./error":5569,"./infinite":5571,"./keys":5572,"./once":5573,"./values":5574},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={keys:e("./keys"),once:e("./once"),values:e("./values"),count:e("./count"),infinite:e("./infinite"),empty:e("./empty"),error:e("./error")}}}},{package:"3box>ipfs>pull-stream"}],[5571,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){return e=e||Math.random,function(t,n){return t?n&&n(t):n(null,e())}}}}},{package:"3box>ipfs>pull-stream"}],[5572,{"./values":5574},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./values");t.exports=function(e){return r(Object.keys(e))}}}},{package:"3box>ipfs>pull-stream"}],[5573,{"../util/abort-cb":5585},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../util/abort-cb");t.exports=function(e,t){return function(n,i){if(n)return r(i,n,t);if(null!=e){var o=e;e=null,i(null,o)}else i(!0)}}}}},{package:"3box>ipfs>pull-stream"}],[5574,{"../util/abort-cb":5585},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../util/abort-cb");t.exports=function(e,t){if(!e)return function(e,n){return e?r(n,e,t):n(!0)};Array.isArray(e)||(e=Object.keys(e).map((function(t){return e[t]})));var n=0;return function(i,o){if(i)return r(o,i,t);n>=e.length?o(!0):o(null,e[n++])}}}}},{package:"3box>ipfs>pull-stream"}],[5575,{"../util/prop":5586},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){return e}var i=e("../util/prop");t.exports=function(e){if(!e)return r;e=i(e);var t,n,o=!1;return function(r){return function i(s,a){if(n)return a(n);s?(n=s,r(s,o?function(e){o?t=a:a(s)}:function(e){a(s)})):r(null,(function(r,s){r?a(r):n?a(n):(o=!0,e(s,(function(e,r){o=!1,n?(a(n),t&&t(n)):e?i(e,a):a(null,r)})))}))}}}}}},{package:"3box>ipfs>pull-stream"}],[5576,{"../util/tester":5587,"./filter":5577},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../util/tester"),i=e("./filter");t.exports=function(e){return e=r(e),i((function(t){return!e(t)}))}}}},{package:"3box>ipfs>pull-stream"}],[5577,{"../util/tester":5587},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../util/tester");t.exports=function(e){return e=r(e),function(t){return function n(r,i){for(var o,s=!0;s;)s=!1,o=!0,t(r,(function(t,r){if(!t&&!e(r))return o?s=!0:n(t,i);i(t,r)})),o=!1}}}}}},{package:"3box>ipfs>pull-stream"}],[5578,{"../sources/once":5573,"../sources/values":5574},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../sources/values"),i=e("../sources/once");t.exports=function(){return function(e){var t;return function(n,o){function s(){t(null,(function(t,n){!0===t?a():t?e(!0,(function(e){o(t)})):o(null,n)}))}function a(){t=null,e(null,(function(e,n){if(e)return o(e);Array.isArray(n)||n&&"object"==typeof n?n=r(n):"function"!=typeof n&&(n=i(n)),t=n,s()}))}n?t?t(n,(function(t){e(t||n,o)})):e(n,o):t?s():a()}}}}}},{package:"3box>ipfs>pull-stream"}],[5579,{"./async-map":5575,"./filter":5577,"./filter-not":5576,"./flatten":5578,"./map":5580,"./non-unique":5581,"./take":5582,"./through":5583,"./unique":5584},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={map:e("./map"),asyncMap:e("./async-map"),filter:e("./filter"),filterNot:e("./filter-not"),through:e("./through"),take:e("./take"),unique:e("./unique"),nonUnique:e("./non-unique"),flatten:e("./flatten")}}}},{package:"3box>ipfs>pull-stream"}],[5580,{"../util/prop":5586},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){return e}var i=e("../util/prop");t.exports=function(e){return e?(e=i(e),function(t){return function(n,r){t(n,(function(n,i){try{i=n?null:e(i)}catch(e){return t(e,(function(){return r(e)}))}r(n,i)}))}}):r}}}},{package:"3box>ipfs>pull-stream"}],[5581,{"./unique":5584},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./unique");t.exports=function(e){return r(e,!0)}}}},{package:"3box>ipfs>pull-stream"}],[5582,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){var n=(t=t||{}).last||!1,r=!1;if("number"==typeof e){n=!0;var i=e;e=function(){return--i}}return function(t){function i(e){t(!0,(function(t){n=!1,e(t||!0)}))}return function(o,s){r&&!o?n?i(s):s(r):(r=o)?t(r,s):t(null,(function(t,o){(r=r||t)?s(r):e(o)?s(null,o):(r=!0,n?s(null,o):i(s))}))}}}}}},{package:"3box>ipfs>pull-stream"}],[5583,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){var n=!1;function r(e){!n&&t&&(n=!0,t(!0===e?null:e))}return function(t){return function(n,i){return n&&r(n),t(n,(function(t,n){t?r(t):e&&e(n),i(t,n)}))}}}}}},{package:"3box>ipfs>pull-stream"}],[5584,{"../util/prop":5586,"./filter":5577},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){return e}var i=e("../util/prop"),o=e("./filter");t.exports=function(e,t){e=i(e)||r;var n={};return o((function(r){var i=e(r);return n[i]?!!t:(n[i]=!0,!t)}))}}}},{package:"3box>ipfs>pull-stream"}],[5585,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t,n){e(t),n&&n(!0===t?null:t)}}}},{package:"3box>ipfs>pull-stream"}],[5586,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){return e&&("string"==typeof e?function(t){return t[e]}:"object"==typeof e&&"function"==typeof e.exec?function(t){var n=e.exec(t);return n&&n[0]}:e)}}}},{package:"3box>ipfs>pull-stream"}],[5587,{"./prop":5586},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./prop");function i(e){return e}t.exports=function(e){return"object"==typeof e&&"function"==typeof e.test?function(t){return e.test(t)}:r(e)||i}}}},{package:"3box>ipfs>pull-stream"}],[5588,{looper:5270},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("looper");t.exports=function(e,t){return function(n){var i,o,s=[];function a(e){s.push(e)}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var u,c={emit:function(e,t){"data"==e&&a(t),"end"==e&&(i=!0,a(null)),"error"==e&&(o=t)},queue:a};return function(a,l){if(i=i||a,a)return n(a,(function(){if(u){var e=u;u=null,e(a)}l(a)}));u=l,r((function r(a){if(u)if(l=u,o)u=null,l(o);else if(s.length){var f=s.shift();u=null,l(null===f,f)}else n(i,(function(s,f){if(s&&!0!==s)return o=s,a();if(i=i||s)t.call(c);else if(null!==f&&(e.call(c,f),o||i))return n(o||i,(function(){u=null,l(o||i)}));a(r)}))}))}}}}}},{package:"3box>ipfs>pull-mplex>pull-through"}],[5589,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=n.once=function(e){return function(t,n){if(t)return n(t);if(null!=e){var r=e;e=null,n(null,r)}else n(!0)}};n.depthFirst=function(e,t){var n,i=[];return i.unshift(r(e)),function e(r,o){return i.length?n?o(n):void i[0](r,(function(r,s){if(r){if(!0!==r){for(n=r,i.shift();i.length;)i.shift()(r,(function(){}));return o(r)}return i.shift(),e(null,o)}i.unshift(t(s)),o(r,s)})):o(!0)}},n.widthFirst=function(e,t){var n=[];return n.push(r(e)),function e(r,i){if(!n.length)return i(!0);n[0](r,(function(r,o){if(r)return n.shift(),e(null,i);n.push(t(o)),i(r,o)}))}},n.leafFirst=function(e,t){var n=[],i=[];return n.push(r(e)),function e(r,o){n[0](r,(function(r,s){if(r)return n.shift(),i.length?o(null,i.shift()):o(!0);n.unshift(t(s)),i.unshift(s),e(null,o)}))}}}}},{package:"3box>ipfs>pull-traverse"}],[5590,{"./duplex":5591,"./web-socket":5597,"./ws-url":5598},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./web-socket"),i=e("./duplex"),o=e("./ws-url");function s(e){return"function"==typeof e}t.exports=function(e,t){s(t)&&(t={onConnect:t});var n="undefined"==typeof window?{}:window.location,a=o(e,n),u=new r(a),c=i(u,t);return c.remoteAddress=a,c.close=function(e){s(e)&&u.addEventListener("close",e),u.close()},u.addEventListener("open",(function(e){t&&s(t.onConnect)&&t.onConnect(null,c)})),c},t.exports.connect=t.exports}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[5591,{"./sink":5595,"./source":5596},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./source"),i=e("./sink");t.exports=function(e,t){var n=e.upgradeReq||{};t&&t.binaryType?e.binaryType=t.binaryType:t&&t.binary&&(e.binaryType="arraybuffer");return{source:r(e,t&&t.onConnect),sink:i(e,t),headers:n.headers,url:n.url,upgrade:n.upgrade,method:n.method}}}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[5592,{"./client":5590,"./duplex":5591,"./server":2174,"./sink":5595,"./source":5596},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./duplex")).source=e("./source"),n.sink=e("./sink"),n.createServer=e("./server"),n.connect=e("./client")}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[5593,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){var n=e&&(e.removeEventListener||e.removeListener);function r(){"function"==typeof n&&(n.call(e,"open",i),n.call(e,"error",o))}function i(e){r(),t()}function o(e){r(),t(e)}return e.readyState>=2?t(!0):1===e.readyState?t():(e.addEventListener("open",i),void e.addEventListener("error",o))}}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[5594,{"./":5592,events:2176,http:5965,https:4494,url:6091,ws:2174},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./"),i=e("ws"),o=(e("url"),e("http")),s=e("https"),a=e("events").EventEmitter;t.exports=i.Server?function(e,t){var n=new a;function u(e,t){return e.on(t,(function(){var e=[].slice.call(arguments);e.unshift(t),n.emit.apply(n,e)}))}"function"==typeof e&&(t=e,e=null),e=e||{},t&&n.on("connection",t);var c=e.server||(e.key&&e.cert?s.createServer(e):o.createServer()),l=new i.Server({server:c,perMessageDeflate:!1,verifyClient:e.verifyClient});return u(c,"listening"),u(c,"request"),u(c,"close"),l.on("connection",(function(e){var t=r(e);t.remoteAddress=e.upgradeReq.socket.remoteAddress,n.emit("connection",t)})),n.listen=function(e,t){return t&&n.once("listening",t),c.listen(e.port||e),n},n.close=function(e){return c.close(e),l.close(),n},n.address=c.address.bind(c),n}:null}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[5595,{"./ready":5593,_process:5500,timers:6023},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n,r){(function(){var i=e("./ready"),o=void 0!==r?r:n.nextTick;t.exports=function(e,t){return function(n){var r=!1!==(t=t||{}).closeOnEnd,s="function"==typeof t?t:t.onClose;n(null,(function t(a,u){a?r&&e.readyState<=1&&(s&&e.addEventListener("close",(function(e){if(e.wasClean||1006===e.code)s();else{var t=new Error("ws error");t.event=e,s(t)}})),e.close()):i(e,(function(r){if(r)return n(r,(function(){}));e.send(u),o((function(){n(null,t)}))}))}))}}}).call(this)}).call(this,e("_process"),e("timers").setImmediate)}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[5596,{"safe-buffer":5818},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer;t.exports=function(e,t){var n,i,o=[],s=!1;return e.addEventListener("message",(function(e){var t,i=e.data;if(((t=i)instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength)&&(i=r.from(i)),n)return n(null,i);o.push(i)})),e.addEventListener("close",(function(e){i||n&&n(i=!0)})),e.addEventListener("error",(function(e){i||(i=e,s||(s=!0,t&&t(e)),n&&n(i))})),e.addEventListener("open",(function(e){s||i||(s=!0)})),function(t,r){if(n=null,i)return r(i);t?(n=r,e.close()):o.length>0?r(null,o.shift()):n=r}}}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[5597,{ws:2174},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports="undefined"==typeof WebSocket?e("ws"):WebSocket}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[5598,{"relative-url":5807},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("relative-url"),i={http:"ws",https:"wss"};t.exports=function(e,t){return r(e,t,i,"ws")}}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[56,{"../../../../shared/constants/time":6271,"../../../../shared/modules/fetch-with-timeout":6276,"./resolver":55,"@babel/runtime/helpers/interopRequireDefault":200,"base32-encode":2054,"base64-js":2057,"webextension-polyfill":6237},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({provider:e,getCurrentChainId:t,getIpfsGateway:n}){const r=f.map((e=>`*://*.${e}/*`));return s.default.webRequest.onErrorOccurred.addListener(a,{urls:r,types:["main_frame"]}),{remove(){s.default.webRequest.onErrorOccurred.removeListener(a)}};async function a(r){const{tabId:a,url:u}=r;if(-1===a||"0x1"!==t())return;const{hostname:h,pathname:d,search:p,hash:g}=new URL(u),m=h.split("."),b=m[m.length-1];f.includes(b)&&async function({tabId:t,name:r,pathname:a,search:u,fragment:f}){const h=n();s.default.tabs.update(t,{url:"loading.html"});let d=`https://app.ens.domains/name/${r}`;try{const{type:n,hash:p}=await(0,c.default)({provider:e,name:r});if("ipfs-ns"===n||"ipns-ns"===n){const e=`https://${p}.${n.slice(0,4)}.${h}${a}${u||""}${f||""}`;try{200===(await l(e,{method:"HEAD"})).status&&(d=e)}catch(e){console.warn(e)}}else if("swarm-ns"===n)d=`https://swarm-gateways.net/bzz:/${p}${a}${u||""}${f||""}`;else if("onion"===n||"onion3"===n)d=`http://${p}.onion${a}${u||""}${f||""}`;else if("zeronet"===n)d=`http://127.0.0.1:43110/${p}${a}${u||""}${f||""}`;else if("skynet-ns"===n){const e=p.padEnd(p.length+4-p.length%4,"="),t=o.default.toByteArray(e),n={padding:!1};d=`https://${(0,i.default)(t,"RFC4648-HEX",n).toLowerCase()}.siasky.net${a}${u||""}${f||""}`}}catch(e){console.warn(e)}finally{s.default.tabs.update(t,{url:d})}}({tabId:a,name:h,pathname:d,search:p,fragment:g})}};var i=r(e("base32-encode")),o=r(e("base64-js")),s=r(e("webextension-polyfill")),a=e("../../../../shared/constants/time"),u=r(e("../../../../shared/modules/fetch-with-timeout")),c=r(e("./resolver"));const l=(0,u.default)(30*a.SECOND),f=["eth"]}}},{package:"$root$"}],[5631,{"assemblyscript/lib/loader":1802},function(){with(this)return function(){"use strict";return function(e,t,n){const{instantiateStreaming:r}=e("assemblyscript/lib/loader");function i(e={}){if(!i.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,90,16,96,0,0,96,2,127,127,1,127,96,4,127,127,127,127,0,96,1,127,1,127,96,3,127,127,127,0,96,1,126,1,127,96,2,126,126,1,126,96,5,127,127,127,127,127,1,127,96,3,127,127,126,0,96,2,127,127,1,126,96,3,127,127,127,1,127,96,1,127,0,96,2,127,127,0,96,1,127,1,126,96,2,127,126,0,96,0,1,127,2,13,1,3,101,110,118,5,97,98,111,114,116,0,2,3,57,56,3,3,12,3,3,15,5,6,1,8,4,1,9,11,7,4,10,10,11,0,0,0,3,12,3,12,3,12,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,4,4,1,112,0,1,5,3,1,0,1,6,26,5,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,7,253,6,44,6,109,101,109,111,114,121,2,0,5,116,97,98,108,101,1,0,6,100,101,103,114,101,101,0,7,3,109,111,100,0,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,23,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,24,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,25,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,26,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,27,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,28,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,29,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,30,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,31,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,32,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,33,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,34,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,35,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,36,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,37,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,38,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,39,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,40,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,41,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,42,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,43,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,44,27,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,95,100,101,103,114,101,101,0,45,27,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,95,100,101,103,114,101,101,0,46,26,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,95,115,104,105,102,116,0,47,26,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,95,115,104,105,102,116,0,48,22,82,97,98,105,110,35,103,101,116,58,97,118,101,114,97,103,101,95,98,105,116,115,0,49,22,82,97,98,105,110,35,115,101,116,58,97,118,101,114,97,103,101,95,98,105,116,115,0,50,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,51,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,52,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,53,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,54,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,55,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,56,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,15,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,16,14,109,101,109,111,114,121,46,99,111,109,112,97,114,101,0,18,15,109,101,109,111,114,121,46,97,108,108,111,99,97,116,101,0,4,11,109,101,109,111,114,121,46,102,114,101,101,0,19,12,109,101,109,111,114,121,46,114,101,115,101,116,0,20,8,1,21,9,7,1,0,65,0,11,1,22,10,188,30,56,104,1,3,127,32,0,65,128,128,128,128,4,75,4,64,0,11,35,1,34,1,32,0,65,1,32,0,65,1,75,27,106,65,7,106,65,120,113,34,0,63,0,34,2,65,16,116,75,4,64,32,2,32,0,32,1,107,65,255,255,3,106,65,128,128,124,113,65,16,118,34,3,32,2,32,3,74,27,64,0,65,0,72,4,64,32,3,64,0,65,0,72,4,64,0,11,11,11,32,0,36,1,32,1,11,51,1,1,127,32,0,65,248,255,255,255,3,75,4,64,65,0,65,200,0,65,26,65,2,16,0,0,11,65,1,65,32,32,0,65,7,106,103,107,116,16,1,34,1,32,0,54,2,0,32,1,11,145,3,1,1,127,32,1,69,4,64,15,11,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,4,64,15,11,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,4,64,15,11,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,4,64,15,11,65,0,32,0,107,65,3,113,34,2,32,0,106,34,0,65,0,54,2,0,32,1,32,2,107,65,124,113,34,1,32,0,106,65,4,107,65,0,54,2,0,32,1,65,8,77,4,64,15,11,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,4,64,15,11,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,65,4,113,65,24,106,34,2,32,0,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,6,0,32,0,16,1,11,76,1,1,127,65,128,16,16,2,34,1,65,8,106,65,128,16,16,3,32,0,69,4,64,65,12,16,1,33,0,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,32,1,54,2,0,32,0,65,0,54,2,4,32,0,65,128,16,54,2,8,32,0,11,8,0,65,12,16,1,16,5,11,70,2,1,127,1,126,66,128,128,128,128,128,128,128,128,128,127,33,2,3,64,2,64,32,1,65,192,0,78,13,0,32,0,32,2,131,66,0,86,4,64,65,63,32,1,107,15,5,32,2,66,1,136,33,2,32,1,65,1,106,33,1,12,2,11,0,11,11,65,127,11,175,2,2,1,127,2,126,3,64,2,127,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,0,32,3,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,2,127,32,1,33,4,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,3,32,4,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,78,4,64,32,1,2,127,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,0,32,3,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,1,32,3,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,107,172,134,32,0,133,33,0,12,1,11,11,32,0,11,96,1,1,127,32,1,65,248,255,255,255,3,75,4,64,65,0,65,8,65,23,65,34,16,0,0,11,32,1,16,2,34,2,65,8,106,32,1,16,3,32,0,69,4,64,65,12,16,1,33,0,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,32,2,54,2,0,32,0,65,0,54,2,4,32,0,32,1,54,2,8,32,0,11,49,0,32,1,32,0,40,2,8,65,3,118,79,4,64,65,0,65,8,65,50,65,63,16,0,0,11,32,0,40,2,4,32,0,40,2,0,32,1,65,3,116,106,106,32,2,55,3,8,11,43,0,32,1,32,0,40,2,8,79,4,64,65,0,65,8,65,50,65,63,16,0,0,11,32,0,40,2,4,32,1,32,0,40,2,0,106,106,32,2,58,0,8,11,41,0,32,1,32,0,40,2,8,79,4,64,65,0,65,8,65,39,65,63,16,0,0,11,32,0,40,2,4,32,1,32,0,40,2,0,106,106,45,0,8,11,47,0,32,1,32,0,40,2,8,65,3,118,79,4,64,65,0,65,8,65,39,65,63,16,0,0,11,32,0,40,2,4,32,0,40,2,0,32,1,65,3,116,106,106,41,3,8,11,166,10,2,3,127,5,126,35,2,69,4,64,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,4,32,0,41,3,72,33,6,3,64,2,127,32,4,33,5,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,32,6,33,7,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,7,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,78,4,64,32,6,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,6,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,107,172,134,32,5,133,33,4,12,1,11,11,65,0,33,1,3,64,32,1,32,0,40,2,4,65,1,107,72,4,64,32,5,66,8,134,33,4,32,0,41,3,72,33,6,3,64,2,127,32,4,33,5,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,2,127,32,6,33,7,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,7,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,78,4,64,32,6,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,6,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,107,172,134,32,5,133,33,4,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,35,4,32,2,32,5,16,10,32,2,65,1,106,33,2,12,1,11,11,2,127,32,0,41,3,72,33,4,66,128,128,128,128,128,128,128,128,128,127,33,5,65,0,33,2,3,64,32,2,65,192,0,72,4,64,65,63,32,2,107,32,4,32,5,131,66,0,86,13,2,26,32,5,66,1,136,33,5,32,2,65,1,106,33,2,12,1,11,11,65,127,11,172,33,8,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,3,33,3,32,2,172,32,8,134,33,5,32,0,41,3,72,33,6,3,64,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,32,6,33,7,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,7,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,78,4,64,32,6,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,6,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,107,172,134,32,5,133,33,5,12,1,11,11,32,3,32,2,32,2,172,32,8,134,32,5,132,16,10,32,2,65,1,106,33,2,12,1,11,11,65,1,36,2,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,65,0,16,11,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,12,33,1,32,0,40,2,0,32,0,40,2,8,65,1,16,11,32,0,32,0,41,3,40,35,4,32,1,65,255,1,113,16,13,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,41,3,40,32,0,41,3,88,136,167,33,1,32,0,32,0,41,3,40,66,8,134,55,3,40,32,0,32,0,41,3,40,66,1,132,55,3,40,32,0,32,0,41,3,40,35,3,32,1,65,255,1,113,16,13,133,55,3,40,11,234,1,0,32,0,69,4,64,65,128,1,16,1,33,0,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,66,0,55,3,104,32,0,66,0,55,3,112,32,0,66,0,55,3,120,32,0,32,1,173,55,3,96,32,0,32,2,173,55,3,104,32,0,32,3,173,55,3,112,32,0,65,12,16,1,32,4,16,9,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,0,41,3,96,134,66,1,125,55,3,120,32,0,66,243,130,183,218,216,230,232,30,55,3,72,32,0,66,53,55,3,80,32,0,32,0,41,3,80,66,8,125,55,3,88,32,0,16,14,32,0,11,206,4,1,5,127,32,1,40,2,8,33,4,32,1,40,2,0,65,8,106,33,5,3,64,2,127,65,0,33,3,3,64,32,3,32,4,72,4,64,32,3,32,5,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,12,33,6,32,0,40,2,0,32,0,40,2,8,32,1,16,11,32,0,32,0,41,3,40,35,4,32,6,65,255,1,113,16,13,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,41,3,40,32,0,41,3,88,136,167,33,6,32,0,32,0,41,3,40,66,8,134,55,3,40,32,0,32,0,41,3,40,32,1,173,132,55,3,40,32,0,32,0,41,3,40,35,3,32,6,65,255,1,113,16,13,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,2,127,32,0,41,3,16,32,0,41,3,104,90,34,1,4,64,32,0,41,3,40,32,0,41,3,120,131,66,0,81,33,1,11,32,1,69,11,4,127,32,0,41,3,16,32,0,41,3,112,90,5,32,1,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,65,0,16,11,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,12,33,1,32,0,40,2,0,32,0,40,2,8,65,1,16,11,32,0,32,0,41,3,40,35,4,32,1,65,255,1,113,16,13,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,41,3,40,32,0,41,3,88,136,167,33,1,32,0,32,0,41,3,40,66,8,134,55,3,40,32,0,32,0,41,3,40,66,1,132,55,3,40,32,0,32,0,41,3,40,35,3,32,1,65,255,1,113,16,13,133,55,3,40,32,3,65,1,106,12,3,5,32,3,65,1,106,33,3,12,2,11,0,11,11,65,127,11,34,1,65,0,78,4,64,32,4,32,1,107,33,4,32,1,32,5,106,33,5,32,7,34,1,65,1,106,33,7,32,2,40,2,4,32,2,40,2,0,32,1,65,2,116,106,106,32,0,41,3,56,62,2,8,32,2,40,2,4,32,2,40,2,0,32,1,65,2,116,106,106,40,2,8,26,12,1,11,11,11,88,1,1,127,32,0,32,1,70,4,64,65,0,15,11,3,64,32,2,65,0,71,34,3,4,64,32,0,45,0,0,32,1,45,0,0,70,33,3,11,32,3,4,64,32,2,65,1,107,33,2,32,0,65,1,106,33,0,32,1,65,1,106,33,1,12,1,11,11,32,2,4,127,32,0,45,0,0,32,1,45,0,0,107,5,65,0,11,11,10,0,32,0,32,1,32,2,16,17,11,3,0,1,11,6,0,35,0,36,1,11,19,0,65,136,1,36,0,35,0,36,1,16,6,36,3,16,6,36,4,11,3,0,1,11,7,0,32,0,40,2,0,11,9,0,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,7,0,32,0,41,3,104,11,9,0,32,0,32,1,55,3,104,11,7,0,32,0,41,3,112,11,9,0,32,0,32,1,55,3,112,11,7,0,32,0,41,3,120,11,9,0,32,0,32,1,55,3,120,11,11,128,1,2,0,65,8,11,57,27,0,0,0,126,0,108,0,105,0,98,0,47,0,105,0,110,0,116,0,101,0,114,0,110,0,97,0,108,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,200,0,11,59,28,0,0,0,126,0,108,0,105,0,98,0,47,0,105,0,110,0,116,0,101,0,114,0,110,0,97,0,108,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,32,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,14,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return r(new Response(new Blob([t],{type:"application/wasm"})),e)}i.supported="undefined"!=typeof WebAssembly,t.exports=i}}},{package:"3box>ipfs>ipfs-unixfs-importer>rabin-wasm"}],[5632,{"../dist/rabin-wasm.node.js":5631,"./rabin":5633},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./rabin"),i=e("../dist/rabin-wasm.node.js");t.exports={Rabin:r,create:async(e,t,n,o)=>{const s=await i();return new r(e,t,n,o,s)}}}}},{package:"3box>ipfs>ipfs-unixfs-importer>rabin-wasm"}],[5633,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=class{constructor(e=12,t=8192,n=32768,r=64,i){this.bits=e,this.min=t,this.max=n,this.asModule=i,this.rabin=new i.Rabin(e,t,n,r)}fingerprint(e){const t=new Int32Array(Math.ceil(e.length/this.min)),n=this.asModule.newArray(t),r=this.asModule.newArray(e);this.rabin.fingerprint(r,n);const i=this.asModule.getArray(Int32Array,n);this.asModule.freeArray(n),this.asModule.freeArray(r);const o=[];for(let e=0;e<i.length&&0!==i[e];e++)o[e]=i[e];return o}}}}},{package:"3box>ipfs>ipfs-unixfs-importer>rabin-wasm"}],[577,{"./metamask-airgapped-keyring.cjs.development.js":578,"./metamask-airgapped-keyring.cjs.production.min.js":579},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./metamask-airgapped-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring"}],[578,{"@ethereumjs/tx":410,"@keystonehq/base-eth-keyring":547,"@keystonehq/bc-ur-registry-eth":582,"@metamask/obs-store":587,buffer:2175,events:2176,rlp:5816,uuid:6096},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("@keystonehq/base-eth-keyring"),o=e("events"),s=e("@metamask/obs-store"),a=e("@keystonehq/bc-ur-registry-eth"),u=e("uuid"),c=e("@ethereumjs/tx"),l=(r=e("rlp"))&&"object"==typeof r&&"default"in r?r.default:r;class f extends o.EventEmitter{constructor(){if(super(),this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,n)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(n=>{const r=a.CryptoHDKey.fromCBOR(t.from(n,"hex"));this.resetState(),e(r)})),this.on("keystone-sync_success-account",(n=>{const r=a.CryptoAccount.fromCBOR(t.from(n,"hex"));this.resetState(),e(r)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),n(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,n,r)=>new Promise(((i,o)=>{const s=e.toUR(),c=e.getRequestId(),l=u.stringify(c),f={requestId:l,payload:{type:s.type,cbor:s.cbor.toString("hex")},title:n,description:r};this.memStore.updateState({sign:{request:f}}),this.once(`${l}-signed`,(e=>{const n=a.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),i(n)})),this.once(`${l}-canceled`,(()=>{this.resetState(),o(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(`${e}-signed`,t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(`${t}-canceled`)}},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},f.instance)return f.instance;this.memStore=new s.ObservableStore({sync:{reading:!1},sign:{},_version:1}),f.instance=this}}class h extends i.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new f,this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=undefined,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,h.instance)return h.instance.deserialize(e),h.instance;h.instance=this}async signTransaction(e,t){const n=0===t.type?a.DataType.transaction:a.DataType.typedTransaction;let r;r=0===t.type?l.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const i=await this._pathFromAddress(e),o=t.common.chainId(),s=u.v4(),f=a.EthSignRequest.constructETHRequest(r,n,i,this.xfp,s,o),{r:h,s:d,v:p}=await this.requestSignature(s,f,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),g=t.toJSON();g.v=p,g.s=d,g.r=h,g.type=t.type;return c.TransactionFactory.fromTxData(g,{common:t.common})}}h.type=i.BaseKeyring.type,n.MetaMaskKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring"}],[5783,{"readable-stream":5798},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ReadableWebToNodeStream=void 0;const r=e("readable-stream");class i extends r.Readable{constructor(e){super(),this.bytesRead=0,this.released=!1,this.reader=e.getReader()}async _read(){if(this.released)return void this.push(null);this.pendingRead=this.reader.read();const e=await this.pendingRead;delete this.pendingRead,e.done||this.released?this.push(null):(this.bytesRead+=e.value.length,this.push(e.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}n.ReadableWebToNodeStream=i}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream"}],[5784,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,s,a;if("string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(n===undefined||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(o(t,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5785,{"./_stream_readable":5787,"./_stream_writable":5789,_process:5500,inherits:4515},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var i=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(c,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var u=s[a];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5786,{"./_stream_transform":5788,inherits:4515},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=i;var r=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e("inherits")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5787,{"../errors":5784,"./_stream_duplex":5785,"./internal/streams/async_iterator":5790,"./internal/streams/buffer_list":5791,"./internal/streams/destroy":5792,"./internal/streams/from":5794,"./internal/streams/state":5796,"./internal/streams/stream":5797,_process:5500,buffer:2175,events:2176,inherits:4515,"string_decoder/":5986,util:2174},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;t.exports=k,k.ReadableState=S;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},o=e("./internal/streams/stream"),s=e("buffer").Buffer,a=global.Uint8Array||function(){};var u,c=e("util");u=c&&c.debuglog?c.debuglog("stream"):function(){};var l,f,h,d=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),g=e("./internal/streams/state").getHighWaterMark,m=e("../errors").codes,b=m.ERR_INVALID_ARG_TYPE,y=m.ERR_STREAM_PUSH_AFTER_EOF,_=m.ERR_METHOD_NOT_IMPLEMENTED,v=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(k,o);var w=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(t,n,i){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function k(t){if(r=r||e("./_stream_duplex"),!(this instanceof k))return new k(t);var n=this instanceof r;this._readableState=new S(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function T(e,t,n,r,i){u("readableAddChunk",t);var o,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}(e,c);else if(i||(o=function(e,t){var n;r=t,s.isBuffer(r)||r instanceof a||"string"==typeof t||t===undefined||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(c,t)),o)w(e,o);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),r)c.endEmitted?w(e,new v):x(e,c,t,!0);else if(c.ended)w(e,new y);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?x(e,c,t,!1):M(e,c)):x(e,c,t,!1)}else r||(c.reading=!1,M(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function x(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),M(e,t)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=p.destroy,k.prototype._undestroy=p.undestroy,k.prototype._destroy=function(e,t){t(e)},k.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),T(this,e,t,!1,n)},k.prototype.unshift=function(e){return T(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var n=new l(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var I=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(A,e))}function A(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function M(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function D(e){u("readable nexttick read 0"),e.read(0)}function N(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(F,t,e))}function F(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}k.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):C(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&B(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),null===(r=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==r&&this.emit("data",r),r},k.prototype._read=function(e){w(this,new _("_read()"))},k.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,u("pipe count=%d opts=%j",o.pipesCount,t);var s=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?c:m;function a(t,n){u("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",a),r.removeListener("end",c),r.removeListener("end",m),r.removeListener("data",h),f=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function c(){u("onend"),e.end()}o.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,L(e))}}(r);e.on("drain",l);var f=!1;function h(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==U(o.pipes,e))&&!f&&(u("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function d(t){u("onerror",t),m(),e.removeListener("error",d),0===i(e,"error")&&w(e,t)}function p(){e.removeListener("finish",g),m()}function g(){u("onfinish"),e.removeListener("close",p),m()}function m(){u("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",p),e.once("finish",g),e.emit("pipe",r),o.flowing||(u("pipe resume"),r.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=U(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},k.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?C(this):i.reading||n.nextTick(D,this))),r},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(P,this),r},k.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||n.nextTick(P,this),t},k.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(N,e,t))}(this,e)),e.paused=!1,this},k.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&i!==undefined)&&((n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return f===undefined&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=j,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(t,n){return h===undefined&&(h=e("./internal/streams/from")),h(k,t,n)})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5788,{"../errors":5784,"./_stream_duplex":5785,inherits:4515},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=l;var r=e("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}e("inherits")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5789,{"../errors":5784,"./_stream_duplex":5785,"./internal/streams/destroy":5792,"./internal/streams/state":5796,"./internal/streams/stream":5797,_process:5500,buffer:2175,inherits:4515,"util-deprecate":6095},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=k,k.WritableState=S;var o={deprecate:e("util-deprecate")},s=e("./internal/streams/stream"),a=e("buffer").Buffer,u=global.Uint8Array||function(){};var c,l=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,d=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,m=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,v=h.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;function E(){}function S(t,o,s){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=o instanceof i),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(A,e,t),e._writableState.errorEmitted=!0,w(e,i)):(o(i),e._writableState.errorEmitted=!0,w(e,i),A(e,t))}(e,r,i,t,o);else{var s=R(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||I(e,r),i?n.nextTick(x,e,r,s,o):x(e,r,s,o)}}(o,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function k(t){var n=this instanceof(i=i||e("./_stream_duplex"));if(!n&&!c.call(k,this))return new k(t);this._writableState=new S(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function T(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function x(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function I(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)o[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;o.allBuffers=u,T(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,l,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var r=R(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(C,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}e("inherits")(k,s),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===k&&(e&&e._writableState instanceof S)}})):c=function(e){return e instanceof this},k.prototype.pipe=function(){w(this,new m)},k.prototype.write=function(e,t,r){var i,o=this._writableState,s=!1,c=!o.objectMode&&(i=e,a.isBuffer(i)||i instanceof u);return c&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(r=t,t=null),c?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=E),o.ending?function(e,t){var r=new _;w(e,r),n.nextTick(t,r)}(this,r):(c||function(e,t,r,i){var o;return null===r?o=new y:"string"==typeof r||t.objectMode||(o=new d("chunk",["string","Buffer"],r)),!o||(w(e,o),n.nextTick(i,o),!1)}(this,o,e,r))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var u=t.objectMode?1:r.length;t.length+=u;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,u,r,i,o);return c}(this,o,c,e,t,r)),s},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},k.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new v(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(e,t,n){n(new p("_write()"))},k.prototype._writev=null,k.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,A(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),k.prototype.destroy=l.destroy,k.prototype._undestroy=l.undestroy,k.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[579,{"@ethereumjs/tx":410,"@keystonehq/base-eth-keyring":547,"@keystonehq/bc-ur-registry-eth":582,"@metamask/obs-store":587,buffer:2175,events:2176,rlp:5816,uuid:6096},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("@keystonehq/base-eth-keyring"),o=e("events"),s=e("@metamask/obs-store"),a=e("@keystonehq/bc-ur-registry-eth"),u=e("uuid"),c=e("@ethereumjs/tx"),l=(r=e("rlp"))&&"object"==typeof r&&"default"in r?r.default:r;class f extends o.EventEmitter{constructor(){if(super(),this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,n)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(n=>{const r=a.CryptoHDKey.fromCBOR(t.from(n,"hex"));this.resetState(),e(r)})),this.on("keystone-sync_success-account",(n=>{const r=a.CryptoAccount.fromCBOR(t.from(n,"hex"));this.resetState(),e(r)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),n(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,n,r)=>new Promise(((i,o)=>{const s=e.toUR(),c=e.getRequestId(),l=u.stringify(c),f={requestId:l,payload:{type:s.type,cbor:s.cbor.toString("hex")},title:n,description:r};this.memStore.updateState({sign:{request:f}}),this.once(l+"-signed",(e=>{const n=a.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),i(n)})),this.once(l+"-canceled",(()=>{this.resetState(),o(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(e+"-signed",t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(t+"-canceled")}},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},f.instance)return f.instance;this.memStore=new s.ObservableStore({sync:{reading:!1},sign:{},_version:1}),f.instance=this}}class h extends i.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new f,this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=void 0,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,h.instance)return h.instance.deserialize(e),h.instance;h.instance=this}async signTransaction(e,t){const n=0===t.type?a.DataType.transaction:a.DataType.typedTransaction;let r;r=0===t.type?l.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const i=await this._pathFromAddress(e),o=t.common.chainId(),s=u.v4(),f=a.EthSignRequest.constructETHRequest(r,n,i,this.xfp,s,o),{r:h,s:d,v:p}=await this.requestSignature(s,f,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),g=t.toJSON();return g.v=p,g.s=d,g.r=h,g.type=t.type,c.TransactionFactory.fromTxData(g,{common:t.common})}}h.type=i.BaseKeyring.type,n.MetaMaskKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring"}],[5790,{"./end-of-stream":5793,_process:5500},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=e("./end-of-stream"),s=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[l]=null,e[s]=null,e[a]=null,t(d(n,!1)))}}function g(e){n.nextTick(p,e)}var m=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(d(undefined,!0));if(this[h].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[u]?r(e[u]):t(d(undefined,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(d(undefined,!0)):t[f](n,r)}),r)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[f])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(d(undefined,!0))}))}))})),r),m);t.exports=function(e){var t,n=Object.create(b,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[s]=null,n[a]=null,e(d(r,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[l]=null,n[s]=null,n[a]=null,t(e)),void(n[u]=e)}var r=n[s];null!==r&&(n[l]=null,n[s]=null,n[a]=null,r(d(undefined,!0))),n[c]=!0})),e.on("readable",g.bind(null,n)),n}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5791,{buffer:2175,util:2174},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=e("buffer").Buffer,a=e("util").inspect,u=a&&a.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,s.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),c&&o(t,c),e}()}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5792,{_process:5500},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var s=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(r,s):(s._writableState.errorEmitted=!0,e.nextTick(n,s,t)):e.nextTick(n,s,t):o?(e.nextTick(r,s),o(t)):e.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5793,{"../../../errors":5784},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){a=!1,c=!0,s||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,f=!0,a||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return s&&!f?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},g=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?g():t.on("request",g)),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5794,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5795,{"../../../errors":5784,"./end-of-stream":5793},function(){with(this)return function(){"use strict";return function(e,t,n){var r;var i=e("../../../errors").codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(t,n,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;t.on("close",(function(){a=!0})),r===undefined&&(r=e("./end-of-stream")),r(t,{readable:n,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var u=!1;return function(e){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new s("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,n){var o=n<t.length-1;return u(e,o,n>0,(function(e){r||(r=e),e&&s.forEach(c),o||(s.forEach(c),i(r))}))}));return t.reduce(l)}}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5796,{"../../../errors":5784},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5797,{events:2176},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("events").EventEmitter}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5798,{"./lib/_stream_duplex.js":5785,"./lib/_stream_passthrough.js":5786,"./lib/_stream_readable.js":5787,"./lib/_stream_transform.js":5788,"./lib/_stream_writable.js":5789,"./lib/internal/streams/end-of-stream.js":5793,"./lib/internal/streams/pipeline.js":5795},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[5799,{ms:5290},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=s;var r=e("ms"),i=s.prototype,o=new Date%1e9;function s(e){e=e||{},this.id=e.id||(1e9*Math.random()>>>0)+o++,this.max=e.max||Infinity,this.items=e.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(e.lastModified||new Date);for(var t,n,r=this.items.length;r--;)t=this.items[r],n=new Date(t.expires)-new Date,this._lookup[t.key]=t,n>0?this.expire(t.key,n):n<=0&&this.delete(t.key)}i.has=function(e){return e in this._lookup},i.get=function(e){if(!this.has(e))return null;var t=this._lookup[e];return t.refresh&&this.expire(e,t.refresh),this.items.splice(this.items.indexOf(t),1),this.items.push(t),t.value},i.meta=function(e){if(!this.has(e))return null;var t=this._lookup[e];return"meta"in t?t.meta:null},i.set=function(e,t,n){var r=this._lookup[e],i=this._lookup[e]={key:e,value:t};return this.lastModified=new Date,r?(clearTimeout(r.timeout),this.items.splice(this.items.indexOf(r),1,i)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(i),this.size++),n&&("ttl"in n&&this.expire(e,n.ttl),"meta"in n&&(i.meta=n.meta),n.refresh&&(i.refresh=n.ttl)),this},i.delete=function(e){var t=this._lookup[e];return!!t&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(t),1),clearTimeout(t.timeout),delete this._lookup[e],this.size--,this)},i.expire=function(e,t){var n=t||0,i=this._lookup[e];if(!i)return this;if("string"==typeof n&&(n=r(t)),"number"!=typeof n)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(i.timeout),i.timeout=setTimeout(this.delete.bind(this,i.key),n),i.expires=Number(new Date)+n,this},i.clear=function(){for(var e=this.items.length;e--;)this.delete(this.items[e].key);return this},i.toJSON=function(){for(var e,t=new Array(this.items.length),n=t.length;n--;)e=this.items[n],t[n]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:undefined,lastModified:this.lastModified,items:t}}}}},{package:"3box>ipfs>receptacle"}],[580,{"@keystonehq/bc-ur-registry":571,buffer:2175,"ethereumjs-util":2612,hdkey:4484,uuid:6096},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("@keystonehq/bc-ur-registry"),o=e("uuid"),s=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,a=e("ethereumjs-util");const{RegistryType:u}=i.extend,c={ETH_SIGN_REQUEST:new u("eth-sign-request",401),ETH_SIGNATAURE:new u("eth-signature",402)},{decodeToDataItem:l,RegistryTypes:f}=i.extend;var h,d;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(h||(h={})),(d=n.DataType||(n.DataType={}))[d.transaction=1]="transaction",d[d.typedData=2]="typedData",d[d.personalMessage=3]="personalMessage",d[d.typedTransaction=4]="typedTransaction";class p extends i.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.setupData=e=>{this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin},this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[h.requestId]=new i.DataItem(this.requestId,f.UUID.getTag())),this.address&&(e[h.address]=this.address),this.chainId&&(e[h.chainId]=this.chainId),this.origin&&(e[h.origin]=this.origin),e[h.signData]=this.signData,e[h.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[h.derivationPath]=t,new i.DataItem(e)},this.setupData(e)}static constructETHRequest(e,n,r,s,a,u,c,l){const f=r.replace(/[m|M]\//,"").split("/"),h=new i.CryptoKeypath(f.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new i.PathComponent({index:t,hardened:n})})),t.from(s,"hex"));return new p({requestId:a?t.from(o.parse(a)):undefined,signData:e,dataType:n,derivationPath:h,chainId:u,address:c?t.from(c.replace("0x",""),"hex"):undefined,origin:l||undefined})}}p.fromDataItem=e=>{const t=e.getData(),n=t[h.signData],r=t[h.dataType],o=i.CryptoKeypath.fromDataItem(t[h.derivationPath]),s=t[h.chainId]?t[h.chainId]:undefined,a=t[h.address]?t[h.address]:undefined,u=t[h.requestId]?t[h.requestId].getData():undefined,c=t[h.origin]?t[h.origin]:undefined;return new p({requestId:u,signData:n,dataType:r,chainId:s,derivationPath:o,address:a,origin:c})},p.fromCBOR=e=>{const t=l(e);return p.fromDataItem(t)};const{RegistryTypes:g,decodeToDataItem:m}=i.extend;var b;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature"}(b||(b={}));class y extends i.RegistryItem{constructor(e,t){super(),this.getRegistryType=()=>c.ETH_SIGNATAURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.toDataItem=()=>{const e={};return this.requestId&&(e[b.requestId]=new i.DataItem(this.requestId,g.UUID.getTag())),e[b.signature]=this.signature,new i.DataItem(e)},this.signature=e,this.requestId=t}}y.fromDataItem=e=>{const t=e.getData(),n=t[b.signature],r=t[b.requestId]?t[b.requestId].getData():undefined;return new y(n,r)},y.fromCBOR=e=>{const t=m(e);return y.fromDataItem(t)};const _=(e,t)=>{const n=s.fromExtendedKey(e).derive(t),r="0x"+a.publicToAddress(n.publicKey,!0).toString("hex");return a.toChecksumAddress(r)},{cbor:v}=i.extend;v.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(i).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})})),n.ETHSignature=y,n.EthSignRequest=p,n.findHDpatfromAddress=(e,t,n,r)=>{for(let i=0;i<n;i++){const n=_(t,`M/0/${i}`);if(e.toLowerCase()==n.toLowerCase())return`${r}/0/${i}`}return null},n.generateAddressfromXpub=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth"}],[5807,{url:6091},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("url");t.exports=function(e,t,n,i){var o;return n=n||{},o=(e=r.parse(e,!1,!0)).protocol?e.protocol:(n[o=t.protocol?t.protocol.replace(/:$/,""):"http"]||i||o)+":",e.host&&":"===e.host[0]&&(e.host=null),e.hostname?r.format({protocol:o,slashes:!0,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search}):(e.host=t.host,e.port?r.format({protocol:o,slashes:!0,host:t.hostname+":"+e.port,port:e.port,pathname:e.pathname,search:e.search}):e.pathname?r.format({protocol:o,slashes:!0,host:e.host,pathname:e.pathname,search:e.search}):(e.pathname=t.pathname,e.search?r.format({protocol:o,slashes:!0,host:e.host,pathname:e.pathname,search:e.search}):(e.search=t.search,e.format(e))))}}}},{package:"3box>ipfs>libp2p-websockets>pull-ws>relative-url"}],[5808,{},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=function(e){return String(e).replace(n.expr,"")}).expr=/\/+$/}}},{package:"analytics-node>remove-trailing-slash"}],[581,{"@keystonehq/bc-ur-registry":571,buffer:2175,"ethereumjs-util":2612,hdkey:4484,uuid:6096},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("@keystonehq/bc-ur-registry"),o=e("uuid"),s=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,a=e("ethereumjs-util");const{RegistryType:u}=i.extend,c={ETH_SIGN_REQUEST:new u("eth-sign-request",401),ETH_SIGNATAURE:new u("eth-signature",402)},{decodeToDataItem:l,RegistryTypes:f}=i.extend;var h,d;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(h||(h={})),(d=n.DataType||(n.DataType={}))[d.transaction=1]="transaction",d[d.typedData=2]="typedData",d[d.personalMessage=3]="personalMessage",d[d.typedTransaction=4]="typedTransaction";class p extends i.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.setupData=e=>{this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin},this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[h.requestId]=new i.DataItem(this.requestId,f.UUID.getTag())),this.address&&(e[h.address]=this.address),this.chainId&&(e[h.chainId]=this.chainId),this.origin&&(e[h.origin]=this.origin),e[h.signData]=this.signData,e[h.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[h.derivationPath]=t,new i.DataItem(e)},this.setupData(e)}static constructETHRequest(e,n,r,s,a,u,c,l){const f=r.replace(/[m|M]\//,"").split("/"),h=new i.CryptoKeypath(f.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new i.PathComponent({index:t,hardened:n})})),t.from(s,"hex"));return new p({requestId:a?t.from(o.parse(a)):void 0,signData:e,dataType:n,derivationPath:h,chainId:u,address:c?t.from(c.replace("0x",""),"hex"):void 0,origin:l||void 0})}}p.fromDataItem=e=>{const t=e.getData(),n=t[h.signData],r=t[h.dataType],o=i.CryptoKeypath.fromDataItem(t[h.derivationPath]),s=t[h.chainId]?t[h.chainId]:void 0,a=t[h.address]?t[h.address]:void 0,u=t[h.requestId]?t[h.requestId].getData():void 0;return new p({requestId:u,signData:n,dataType:r,chainId:s,derivationPath:o,address:a,origin:t[h.origin]?t[h.origin]:void 0})},p.fromCBOR=e=>{const t=l(e);return p.fromDataItem(t)};const{RegistryTypes:g,decodeToDataItem:m}=i.extend;var b;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature"}(b||(b={}));class y extends i.RegistryItem{constructor(e,t){super(),this.getRegistryType=()=>c.ETH_SIGNATAURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.toDataItem=()=>{const e={};return this.requestId&&(e[b.requestId]=new i.DataItem(this.requestId,g.UUID.getTag())),e[b.signature]=this.signature,new i.DataItem(e)},this.signature=e,this.requestId=t}}y.fromDataItem=e=>{const t=e.getData(),n=t[b.signature],r=t[b.requestId]?t[b.requestId].getData():void 0;return new y(n,r)},y.fromCBOR=e=>{const t=m(e);return y.fromDataItem(t)};const _=(e,t)=>{const n=s.fromExtendedKey(e).derive(t),r="0x"+a.publicToAddress(n.publicKey,!0).toString("hex");return a.toChecksumAddress(r)},{cbor:v}=i.extend;v.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(i).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})})),n.ETHSignature=y,n.EthSignRequest=p,n.findHDpatfromAddress=(e,t,n,r)=>{for(let i=0;i<n;i++){const n=_(t,"M/0/"+i);if(e.toLowerCase()==n.toLowerCase())return`${r}/0/${i}`}return null},n.generateAddressfromXpub=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth"}],[5813,{"./time":5814},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./time");function i(e,t,n){var i=this;this._started=r(),this._rescheduled=0,this._scheduled=t,this._args=n,this._timer=setTimeout((function t(){i._rescheduled>0?(i._scheduled=i._rescheduled-(r()-i._started),i._timer=setTimeout(t,i._scheduled),i._rescheduled=0):e.apply(null,i._args)}),t)}i.prototype.reschedule=function(e){var t=r();return!(t+e-(this._started+this._scheduled)<0)&&(this._started=t,this._rescheduled=e,!0)},i.prototype.clear=function(){clearTimeout(this._timer)},t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("timeout needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new i(arguments[0],arguments[1],e)}}}},{package:"3box>ipfs>libp2p>libp2p-switch>retimer"}],[5814,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){return Date.now()}}}},{package:"3box>ipfs>libp2p>libp2p-switch>retimer"}],[582,{"./bc-ur-registry-eth.cjs.development.js":580,"./bc-ur-registry-eth.cjs.production.min.js":581},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./bc-ur-registry-eth.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth"}],[5820,{"truncate-utf8-bytes":6076},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("truncate-utf8-bytes"),i=/[\/\?<>\\:\*\|"]/g,o=/[\x00-\x1f\x80-\x9f]/g,s=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,u=/[\. ]+$/;function c(e,t){if("string"!=typeof e)throw new Error("Input must be string");var n=e.replace(i,t).replace(o,t).replace(s,t).replace(a,t).replace(u,t);return r(n,255)}t.exports=function(e,t){var n=t&&t.replacement||"",r=c(e,n);return""===n?r:c(r,"")}}}},{package:"3box>ipfs>libp2p-keychain>sanitize-filename"}],[5828,{buffer:2175,pbkdf2:5480},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("pbkdf2").pbkdf2Sync,i=2147483647;function o(e,t,r,i,o){if(n.isBuffer(e)&&n.isBuffer(r))e.copy(r,i,t,t+o);else for(;o--;)r[i++]=e[t++]}t.exports=function(e,t,s,a,u,c,l){if(0===s||0!=(s&s-1))throw Error("N must be > 0 and a power of 2");if(s>i/128/a)throw Error("Parameter N is too large");if(a>i/128/u)throw Error("Parameter r is too large");var f,h=new n(256*a),d=new n(128*a*s),p=new Int32Array(16),g=new Int32Array(16),m=new n(64),b=r(e,t,1,128*u*a,"sha256");if(l){var y=u*s*2,_=0;f=function(){++_%1e3==0&&l({current:_,total:y,percent:_/y*100})}}for(var v=0;v<u;v++)w(b,128*v*a,a,s,d,h);return r(e,b,1,c,"sha256");function w(e,t,n,r,i,o){var s,a=128*n;for(e.copy(o,0,t,t+a),s=0;s<r;s++)o.copy(i,s*a,0,0+a),E(o,0,a,n),f&&f();for(s=0;s<r;s++){var u=0+64*(2*n-1);T(i,(o.readUInt32LE(u)&r-1)*a,o,0,a),E(o,0,a,n),f&&f()}o.copy(e,t,0,0+a)}function E(e,t,n,r){var i;for(o(e,t+64*(2*r-1),m,0,64),i=0;i<2*r;i++)T(e,64*i,m,0,64),k(m),o(m,0,e,n+64*i,64);for(i=0;i<r;i++)o(e,n+2*i*64,e,t+64*i,64);for(i=0;i<r;i++)o(e,n+64*(2*i+1),e,t+64*(i+r),64)}function S(e,t){return e<<t|e>>>32-t}function k(e){var t;for(t=0;t<16;t++)p[t]=(255&e[4*t+0])<<0,p[t]|=(255&e[4*t+1])<<8,p[t]|=(255&e[4*t+2])<<16,p[t]|=(255&e[4*t+3])<<24;for(o(p,0,g,0,16),t=8;t>0;t-=2)g[4]^=S(g[0]+g[12],7),g[8]^=S(g[4]+g[0],9),g[12]^=S(g[8]+g[4],13),g[0]^=S(g[12]+g[8],18),g[9]^=S(g[5]+g[1],7),g[13]^=S(g[9]+g[5],9),g[1]^=S(g[13]+g[9],13),g[5]^=S(g[1]+g[13],18),g[14]^=S(g[10]+g[6],7),g[2]^=S(g[14]+g[10],9),g[6]^=S(g[2]+g[14],13),g[10]^=S(g[6]+g[2],18),g[3]^=S(g[15]+g[11],7),g[7]^=S(g[3]+g[15],9),g[11]^=S(g[7]+g[3],13),g[15]^=S(g[11]+g[7],18),g[1]^=S(g[0]+g[3],7),g[2]^=S(g[1]+g[0],9),g[3]^=S(g[2]+g[1],13),g[0]^=S(g[3]+g[2],18),g[6]^=S(g[5]+g[4],7),g[7]^=S(g[6]+g[5],9),g[4]^=S(g[7]+g[6],13),g[5]^=S(g[4]+g[7],18),g[11]^=S(g[10]+g[9],7),g[8]^=S(g[11]+g[10],9),g[9]^=S(g[8]+g[11],13),g[10]^=S(g[9]+g[8],18),g[12]^=S(g[15]+g[14],7),g[13]^=S(g[12]+g[15],9),g[14]^=S(g[13]+g[12],13),g[15]^=S(g[14]+g[13],18);for(t=0;t<16;++t)p[t]=g[t]+p[t];for(t=0;t<16;t++){var n=4*t;e[n+0]=p[t]>>0&255,e[n+1]=p[t]>>8&255,e[n+2]=p[t]>>16&255,e[n+3]=p[t]>>24&255}}function T(e,t,n,r,i){for(var o=0;o<i;o++)n[r+o]^=e[t+o]}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-wallet>scryptsy"}],[5829,{"./lib":5834,"./lib/elliptic":5833},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./lib")(e("./lib/elliptic"))}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[583,{"./ObservableStore":585},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ComposedStore=void 0;const r=e("./ObservableStore");class i extends r.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const n=t=>{const n=this.getState();n[e]=t,this.putState(n)};t.subscribe(n),n(t.getState())}}n.ComposedStore=i}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store"}],[5830,{"./lib":5834,"./lib/js":5840},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./lib")(e("./lib/js"))}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[5831,{"../../is-buffer/index.js":4797},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){var t=Object.prototype.toString;n.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},n.isBoolean=function(e,n){if("[object Boolean]"!==t.call(e))throw TypeError(n)},n.isBuffer=function(t,n){if(!e.isBuffer(t))throw TypeError(n)},n.isFunction=function(e,n){if("[object Function]"!==t.call(e))throw TypeError(n)},n.isNumber=function(e,n){if("[object Number]"!==t.call(e))throw TypeError(n)},n.isObject=function(e,n){if("[object Object]"!==t.call(e))throw TypeError(n)},n.isBufferLength=function(e,t,n){if(e.length!==t)throw RangeError(n)},n.isBufferLength2=function(e,t,n,r){if(e.length!==t&&e.length!==n)throw RangeError(r)},n.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},n.isNumberInInterval=function(e,t,n,r){if(e<=t||e>=n)throw RangeError(r)}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[5832,{bip66:2064,"safe-buffer":5818},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,i=e("bip66"),o=r.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=r.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);n.privateKeyExport=function(e,t,n){var i=r.from(n?o:s);return e.copy(i,n?8:9),t.copy(i,n?181:214),i},n.privateKeyImport=function(e){var t=e.length,n=0;if(!(t<n+1||48!==e[n])&&!(t<(n+=1)+1)&&128&e[n]){var r=127&e[n];if(n+=1,!(r<1||r>2||t<n+r)){var i=e[n+r-1]|(r>1?e[n+r-2]<<8:0);if(!(t<(n+=r)+i||t<n+3||2!==e[n]||1!==e[n+1]||1!==e[n+2]||t<(n+=3)+2||4!==e[n]||e[n+1]>32||t<n+2+e[n+1]))return e.slice(n+2,n+2+e[n+1])}}},n.signatureExport=function(e){for(var t=r.concat([r.from([0]),e.r]),n=33,o=0;n>1&&0===t[o]&&!(128&t[o+1]);--n,++o);for(var s=r.concat([r.from([0]),e.s]),a=33,u=0;a>1&&0===s[u]&&!(128&s[u+1]);--a,++u);return i.encode(t.slice(o),s.slice(u))},n.signatureImport=function(e){var t=r.alloc(32,0),n=r.alloc(32,0);try{var o=i.decode(e);if(33===o.r.length&&0===o.r[0]&&(o.r=o.r.slice(1)),o.r.length>32)throw new Error("R length is too long");if(33===o.s.length&&0===o.s[0]&&(o.s=o.s.slice(1)),o.s.length>32)throw new Error("S length is too long")}catch(e){return}return o.r.copy(t,32-o.r.length),o.s.copy(n,32-o.s.length),{r:t,s:n}},n.signatureImportLax=function(e){var t=r.alloc(32,0),n=r.alloc(32,0),i=e.length,o=0;if(48===e[o++]){var s=e[o++];if(!(128&s&&(o+=s-128)>i)&&2===e[o++]){var a=e[o++];if(128&a){if(o+(s=a-128)>i)return;for(;s>0&&0===e[o];o+=1,s-=1);for(a=0;s>0;o+=1,s-=1)a=(a<<8)+e[o]}if(!(a>i-o)){var u=o;if(o+=a,2===e[o++]){var c=e[o++];if(128&c){if(o+(s=c-128)>i)return;for(;s>0&&0===e[o];o+=1,s-=1);for(c=0;s>0;o+=1,s-=1)c=(c<<8)+e[o]}if(!(c>i-o)){var l=o;for(o+=c;a>0&&0===e[u];a-=1,u+=1);if(!(a>32)){var f=e.slice(u,u+a);for(f.copy(t,32-f.length);c>0&&0===e[l];c-=1,l+=1);if(!(c>32)){var h=e.slice(l,l+c);return h.copy(n,32-h.length),{r:t,s:n}}}}}}}}}}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[5833,{"../messages.json":5841,"bn.js":2131,"create-hash":2278,elliptic:2409,"safe-buffer":5818},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,i=e("create-hash"),o=e("bn.js"),s=e("elliptic").ec,a=e("../messages.json"),u=new s("secp256k1"),c=u.curve;function l(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var n=new o(t);if(n.cmp(c.p)>=0)return null;var r=(n=n.toRed(c.red)).redSqr().redIMul(n).redIAdd(c.b).redSqrt();return 3===e!==r.isOdd()&&(r=r.redNeg()),u.keyPair({pub:{x:n,y:r}})}(t,e.slice(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,n){var r=new o(t),i=new o(n);if(r.cmp(c.p)>=0||i.cmp(c.p)>=0)return null;if(r=r.toRed(c.red),i=i.toRed(c.red),(6===e||7===e)&&i.isOdd()!==(7===e))return null;var s=r.redSqr().redIMul(r);return i.redSqr().redISub(s.redIAdd(c.b)).isZero()?u.keyPair({pub:{x:r,y:i}}):null}(t,e.slice(1,33),e.slice(33,65));default:return null}}n.privateKeyVerify=function(e){var t=new o(e);return t.cmp(c.n)<0&&!t.isZero()},n.privateKeyExport=function(e,t){var n=new o(e);if(n.cmp(c.n)>=0||n.isZero())throw new Error(a.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return r.from(u.keyFromPrivate(e).getPublic(t,!0))},n.privateKeyNegate=function(e){var t=new o(e);return t.isZero()?r.alloc(32):c.n.sub(t).umod(c.n).toArrayLike(r,"be",32)},n.privateKeyModInverse=function(e){var t=new o(e);if(t.cmp(c.n)>=0||t.isZero())throw new Error(a.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(c.n).toArrayLike(r,"be",32)},n.privateKeyTweakAdd=function(e,t){var n=new o(t);if(n.cmp(c.n)>=0)throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(n.iadd(new o(e)),n.cmp(c.n)>=0&&n.isub(c.n),n.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return n.toArrayLike(r,"be",32)},n.privateKeyTweakMul=function(e,t){var n=new o(t);if(n.cmp(c.n)>=0||n.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return n.imul(new o(e)),n.cmp(c.n)&&(n=n.umod(c.n)),n.toArrayLike(r,"be",32)},n.publicKeyCreate=function(e,t){var n=new o(e);if(n.cmp(c.n)>=0||n.isZero())throw new Error(a.EC_PUBLIC_KEY_CREATE_FAIL);return r.from(u.keyFromPrivate(e).getPublic(t,!0))},n.publicKeyConvert=function(e,t){var n=l(e);if(null===n)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return r.from(n.getPublic(t,!0))},n.publicKeyVerify=function(e){return null!==l(e)},n.publicKeyTweakAdd=function(e,t,n){var i=l(e);if(null===i)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new o(t)).cmp(c.n)>=0)throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var s=c.g.mul(t).add(i.pub);if(s.isInfinity())throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return r.from(s.encode(!0,n))},n.publicKeyTweakMul=function(e,t,n){var i=l(e);if(null===i)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new o(t)).cmp(c.n)>=0||t.isZero())throw new Error(a.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return r.from(i.pub.mul(t).encode(!0,n))},n.publicKeyCombine=function(e,t){for(var n=new Array(e.length),i=0;i<e.length;++i)if(n[i]=l(e[i]),null===n[i])throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);for(var o=n[0].pub,s=1;s<n.length;++s)o=o.add(n[s].pub);if(o.isInfinity())throw new Error(a.EC_PUBLIC_KEY_COMBINE_FAIL);return r.from(o.encode(!0,t))},n.signatureNormalize=function(e){var t=new o(e.slice(0,32)),n=new o(e.slice(32,64));if(t.cmp(c.n)>=0||n.cmp(c.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);var i=r.from(e);return 1===n.cmp(u.nh)&&c.n.sub(n).toArrayLike(r,"be",32).copy(i,32),i},n.signatureExport=function(e){var t=e.slice(0,32),n=e.slice(32,64);if(new o(t).cmp(c.n)>=0||new o(n).cmp(c.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:n}},n.signatureImport=function(e){var t=new o(e.r);t.cmp(c.n)>=0&&(t=new o(0));var n=new o(e.s);return n.cmp(c.n)>=0&&(n=new o(0)),r.concat([t.toArrayLike(r,"be",32),n.toArrayLike(r,"be",32)])},n.sign=function(e,t,n,i){if("function"==typeof n){var s=n;n=function(n){var u=s(e,t,null,i,n);if(!r.isBuffer(u)||32!==u.length)throw new Error(a.ECDSA_SIGN_FAIL);return new o(u)}}var l=new o(t);if(l.cmp(c.n)>=0||l.isZero())throw new Error(a.ECDSA_SIGN_FAIL);var f=u.sign(e,t,{canonical:!0,k:n,pers:i});return{signature:r.concat([f.r.toArrayLike(r,"be",32),f.s.toArrayLike(r,"be",32)]),recovery:f.recoveryParam}},n.verify=function(e,t,n){var r={r:t.slice(0,32),s:t.slice(32,64)},i=new o(r.r),s=new o(r.s);if(i.cmp(c.n)>=0||s.cmp(c.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);if(1===s.cmp(u.nh)||i.isZero()||s.isZero())return!1;var f=l(n);if(null===f)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return u.verify(e,r,{x:f.pub.x,y:f.pub.y})},n.recover=function(e,t,n,i){var s={r:t.slice(0,32),s:t.slice(32,64)},l=new o(s.r),f=new o(s.s);if(l.cmp(c.n)>=0||f.cmp(c.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);try{if(l.isZero()||f.isZero())throw new Error;var h=u.recoverPubKey(e,s,n);return r.from(h.encode(!0,i))}catch(e){throw new Error(a.ECDSA_RECOVER_FAIL)}},n.ecdh=function(e,t){var r=n.ecdhUnsafe(e,t,!0);return i("sha256").update(r).digest()},n.ecdhUnsafe=function(e,t,n){var i=l(e);if(null===i)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);var s=new o(t);if(s.cmp(c.n)>=0||s.isZero())throw new Error(a.ECDH_FAIL);return r.from(i.pub.mul(s).encode(!0,n))}}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[5834,{"./assert":5831,"./der":5832,"./messages.json":5841},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./assert"),i=e("./der"),o=e("./messages.json");function s(e,t){return e===undefined?t:(r.isBoolean(e,o.COMPRESSED_TYPE_INVALID),e)}t.exports=function(e){return{privateKeyVerify:function(t){return r.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,n){r.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),n=s(n,!0);var a=e.privateKeyExport(t,n);return i.privateKeyExport(t,a,n)},privateKeyImport:function(t){if(r.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),(t=i.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(o.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return r.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return r.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,n){return r.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),r.isBuffer(n,o.TWEAK_TYPE_INVALID),r.isBufferLength(n,32,o.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,n)},privateKeyTweakMul:function(t,n){return r.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),r.isBuffer(n,o.TWEAK_TYPE_INVALID),r.isBufferLength(n,32,o.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,n)},publicKeyCreate:function(t,n){return r.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),n=s(n,!0),e.publicKeyCreate(t,n)},publicKeyConvert:function(t,n){return r.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),n=s(n,!0),e.publicKeyConvert(t,n)},publicKeyVerify:function(t){return r.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,n,i){return r.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),r.isBuffer(n,o.TWEAK_TYPE_INVALID),r.isBufferLength(n,32,o.TWEAK_LENGTH_INVALID),i=s(i,!0),e.publicKeyTweakAdd(t,n,i)},publicKeyTweakMul:function(t,n,i){return r.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),r.isBuffer(n,o.TWEAK_TYPE_INVALID),r.isBufferLength(n,32,o.TWEAK_LENGTH_INVALID),i=s(i,!0),e.publicKeyTweakMul(t,n,i)},publicKeyCombine:function(t,n){r.isArray(t,o.EC_PUBLIC_KEYS_TYPE_INVALID),r.isLengthGTZero(t,o.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var i=0;i<t.length;++i)r.isBuffer(t[i],o.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(t[i],33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID);return n=s(n,!0),e.publicKeyCombine(t,n)},signatureNormalize:function(t){return r.isBuffer(t,o.ECDSA_SIGNATURE_TYPE_INVALID),r.isBufferLength(t,64,o.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){r.isBuffer(t,o.ECDSA_SIGNATURE_TYPE_INVALID),r.isBufferLength(t,64,o.ECDSA_SIGNATURE_LENGTH_INVALID);var n=e.signatureExport(t);return i.signatureExport(n)},signatureImport:function(t){r.isBuffer(t,o.ECDSA_SIGNATURE_TYPE_INVALID),r.isLengthGTZero(t,o.ECDSA_SIGNATURE_LENGTH_INVALID);var n=i.signatureImport(t);if(n)return e.signatureImport(n);throw new Error(o.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){r.isBuffer(t,o.ECDSA_SIGNATURE_TYPE_INVALID),r.isLengthGTZero(t,o.ECDSA_SIGNATURE_LENGTH_INVALID);var n=i.signatureImportLax(t);if(n)return e.signatureImport(n);throw new Error(o.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,n,i){r.isBuffer(t,o.MSG32_TYPE_INVALID),r.isBufferLength(t,32,o.MSG32_LENGTH_INVALID),r.isBuffer(n,o.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(n,32,o.EC_PRIVATE_KEY_LENGTH_INVALID);var s=null,a=null;return i!==undefined&&(r.isObject(i,o.OPTIONS_TYPE_INVALID),i.data!==undefined&&(r.isBuffer(i.data,o.OPTIONS_DATA_TYPE_INVALID),r.isBufferLength(i.data,32,o.OPTIONS_DATA_LENGTH_INVALID),s=i.data),i.noncefn!==undefined&&(r.isFunction(i.noncefn,o.OPTIONS_NONCEFN_TYPE_INVALID),a=i.noncefn)),e.sign(t,n,a,s)},verify:function(t,n,i){return r.isBuffer(t,o.MSG32_TYPE_INVALID),r.isBufferLength(t,32,o.MSG32_LENGTH_INVALID),r.isBuffer(n,o.ECDSA_SIGNATURE_TYPE_INVALID),r.isBufferLength(n,64,o.ECDSA_SIGNATURE_LENGTH_INVALID),r.isBuffer(i,o.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(i,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,n,i)},recover:function(t,n,i,a){return r.isBuffer(t,o.MSG32_TYPE_INVALID),r.isBufferLength(t,32,o.MSG32_LENGTH_INVALID),r.isBuffer(n,o.ECDSA_SIGNATURE_TYPE_INVALID),r.isBufferLength(n,64,o.ECDSA_SIGNATURE_LENGTH_INVALID),r.isNumber(i,o.RECOVERY_ID_TYPE_INVALID),r.isNumberInInterval(i,-1,4,o.RECOVERY_ID_VALUE_INVALID),a=s(a,!0),e.recover(t,n,i,a)},ecdh:function(t,n){return r.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),r.isBuffer(n,o.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(n,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,n)},ecdhUnsafe:function(t,n,i){return r.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),r.isBuffer(n,o.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(n,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),i=s(i,!0),e.ecdhUnsafe(t,n,i)}}}}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[5835,{"./optimized":5836,"safe-buffer":5818},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,i=e("./optimized");function o(){this.negative=0,this.words=null,this.length=0}o.fromNumber=function(e){var t=new o;return t.words=[67108863&e],t.length=1,t},o.fromBuffer=function(e){var t=new o;return t.words=new Array(10),t.words[0]=(3&e[28])<<24|e[29]<<16|e[30]<<8|e[31],t.words[1]=(15&e[25])<<22|e[26]<<14|e[27]<<6|e[28]>>>2,t.words[2]=(63&e[22])<<20|e[23]<<12|e[24]<<4|e[25]>>>4,t.words[3]=(255&e[19])<<18|e[20]<<10|e[21]<<2|e[22]>>>6,t.words[4]=(3&e[15])<<24|e[16]<<16|e[17]<<8|e[18],t.words[5]=(15&e[12])<<22|e[13]<<14|e[14]<<6|e[15]>>>2,t.words[6]=(63&e[9])<<20|e[10]<<12|e[11]<<4|e[12]>>>4,t.words[7]=(255&e[6])<<18|e[7]<<10|e[8]<<2|e[9]>>>6,t.words[8]=(3&e[2])<<24|e[3]<<16|e[4]<<8|e[5],t.words[9]=e[0]<<14|e[1]<<6|e[2]>>>2,t.length=10,t.strip()},o.prototype.toBuffer=function(){for(var e=this.words,t=this.length;t<10;++t)e[t]=0;return r.from([e[9]>>>14&255,e[9]>>>6&255,(63&e[9])<<2|e[8]>>>24&3,e[8]>>>16&255,e[8]>>>8&255,255&e[8],e[7]>>>18&255,e[7]>>>10&255,e[7]>>>2&255,(3&e[7])<<6|e[6]>>>20&63,e[6]>>>12&255,e[6]>>>4&255,(15&e[6])<<4|e[5]>>>22&15,e[5]>>>14&255,e[5]>>>6&255,(63&e[5])<<2|e[4]>>>24&3,e[4]>>>16&255,e[4]>>>8&255,255&e[4],e[3]>>>18&255,e[3]>>>10&255,e[3]>>>2&255,(3&e[3])<<6|e[2]>>>20&63,e[2]>>>12&255,e[2]>>>4&255,(15&e[2])<<4|e[1]>>>22&15,e[1]>>>14&255,e[1]>>>6&255,(63&e[1])<<2|e[0]>>>24&3,e[0]>>>16&255,e[0]>>>8&255,255&e[0]])},o.prototype.clone=function(){var e=new o;e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];return e.length=this.length,e.negative=this.negative,e},o.prototype.strip=function(){for(;this.length>1&&0==(0|this.words[this.length-1]);)this.length--;return this},o.prototype.normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.ucmp=function(e){if(this.length!==e.length)return this.length>e.length?1:-1;for(var t=this.length-1;t>=0;--t)if(this.words[t]!==e.words[t])return this.words[t]>e.words[t]?1:-1;return 0},o.prototype.gtOne=function(){return this.length>1||this.words[0]>1},o.prototype.isOverflow=function(){return this.ucmp(o.n)>=0},o.prototype.isHigh=function(){return 1===this.ucmp(o.nh)},o.prototype.bitLengthGT256=function(){return this.length>10||10===this.length&&this.words[9]>4194303},o.prototype.iuaddn=function(e){this.words[0]+=e;for(var t=0;this.words[t]>67108863&&t<this.length;++t)this.words[t]-=67108864,this.words[t+1]+=1;return t===this.length&&(this.words[t]=1,this.length+=1),this},o.prototype.iadd=function(e){if(this.negative!==e.negative)return 0!==this.negative?(this.negative=0,this.isub(e),this.negative^=1):(e.negative=0,this.isub(e),e.negative=1),this.normSign();var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0,i=0;r<n.length;++r){var o=t.words[r]+n.words[r]+i;this.words[r]=67108863&o,i=o>>>26}for(;0!==i&&r<t.length;++r)o=t.words[r]+i,this.words[r]=67108863&o,i=o>>>26;if(this.length=t.length,0!==i)this.words[this.length++]=i;else if(t!==this)for(;r<t.length;++r)this.words[r]=t.words[r];return this},o.prototype.add=function(e){return this.clone().iadd(e)},o.prototype.isub=function(e){if(this.negative!==e.negative)return 0!==this.negative?(this.negative=0,this.iadd(e),this.negative=1):(e.negative=0,this.iadd(e),e.negative=1),this.normSign();var t,n,r=this.ucmp(e);if(0===r)return this.negative=0,this.words[0]=0,this.length=1,this;r>0?(t=this,n=e):(t=e,n=this);for(var i=0,o=0;i<n.length;++i){var s=t.words[i]-n.words[i]+o;o=s>>26,this.words[i]=67108863&s}for(;0!==o&&i<t.length;++i)o=(s=t.words[i]+o)>>26,this.words[i]=67108863&s;if(0===o&&i<t.length&&t!==this)for(;i<t.length;++i)this.words[i]=t.words[i];return this.length=Math.max(this.length,i),t!==this&&(this.negative^=1),this.strip().normSign()},o.prototype.sub=function(e){return this.clone().isub(e)},o.umulTo=function(e,t,n){n.length=e.length+t.length-1;var r=e.words[0]*t.words[0],i=r/67108864|0;n.words[0]=67108863&r;for(var o=1,s=n.length;o<s;o++){for(var a=i>>>26,u=67108863&i,c=Math.max(0,o-e.length+1),l=Math.min(o,t.length-1);c<=l;c++){var f=o-c,h=e.words[f]*t.words[c]+u;a+=h/67108864|0,u=67108863&h}n.words[o]=u,i=a}return 0!==i&&(n.words[n.length++]=i),n.strip()},o.umulTo10x10=Math.imul?i.umulTo10x10:o.umulTo,o.umulnTo=function(e,t,n){if(0===t)return n.words=[0],n.length=1,n;for(var r=0,i=0;r<e.length;++r){var o=e.words[r]*t+i;n.words[r]=67108863&o,i=o/67108864|0}return i>0?(n.words[r]=i,n.length=e.length+1):n.length=e.length,n},o.prototype.umul=function(e){var t=new o;return t.words=new Array(this.length+e.length),10===this.length&&10===e.length?o.umulTo10x10(this,e,t):1===this.length?o.umulnTo(e,this.words[0],t):1===e.length?o.umulnTo(this,e.words[0],t):o.umulTo(this,e,t)},o.prototype.isplit=function(e){e.length=Math.min(this.length,9);for(var t=0;t<e.length;++t)e.words[t]=this.words[t];if(this.length<=9)return this.words[0]=0,this.length=1,this;var n=this.words[9];for(e.words[e.length++]=4194303&n,t=10;t<this.length;++t){var r=this.words[t];this.words[t-10]=(4194303&r)<<4|n>>>22,n=r}return n>>>=22,this.words[t-10]=n,0===n&&this.length>10?this.length-=10:this.length-=9,this},o.prototype.fireduce=function(){return this.isOverflow()&&this.isub(o.n),this},o.prototype.ureduce=function(){var e=this.clone().isplit(o.tmp).umul(o.nc).iadd(o.tmp);return e.bitLengthGT256()&&(e=e.isplit(o.tmp).umul(o.nc).iadd(o.tmp)).bitLengthGT256()&&(e=e.isplit(o.tmp).umul(o.nc).iadd(o.tmp)),e.fireduce()},o.prototype.ishrn=function(e){for(var t=(1<<e)-1,n=26-e,r=this.length-1,i=0;r>=0;--r){var o=this.words[r];this.words[r]=i<<n|o>>>e,i=o&t}return this.length>1&&0===this.words[this.length-1]&&(this.length-=1),this},o.prototype.uinvm=function(){for(var e=this.clone(),t=o.n.clone(),n=o.fromNumber(1),r=o.fromNumber(0),i=o.fromNumber(0),s=o.fromNumber(1);e.isEven()&&t.isEven();){for(var a=1,u=1;0==(e.words[0]&u)&&0==(t.words[0]&u)&&a<26;++a,u<<=1);e.ishrn(a),t.ishrn(a)}for(var c=t.clone(),l=e.clone();!e.isZero();){for(var f=0,h=1;0==(e.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(e.ishrn(f);f-- >0;)(n.isOdd()||r.isOdd())&&(n.iadd(c),r.isub(l)),n.ishrn(1),r.ishrn(1);for(var d=0,p=1;0==(t.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(t.ishrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(c),s.isub(l)),i.ishrn(1),s.ishrn(1);e.ucmp(t)>=0?(e.isub(t),n.isub(i),r.isub(s)):(t.isub(e),i.isub(n),s.isub(r))}if(1===i.negative){i.negative=0;var g=i.ureduce();return g.negative^=1,g.normSign().iadd(o.n)}return i.ureduce()},o.prototype.imulK=function(){this.words[this.length]=0,this.words[this.length+1]=0,this.length+=2;for(var e=0,t=0;e<this.length;++e){var n=0|this.words[e];t+=977*n,this.words[e]=67108863&t,t=64*n+(t/67108864|0)}return 0===this.words[this.length-1]&&(this.length-=1,0===this.words[this.length-1]&&(this.length-=1)),this},o.prototype.redIReduce=function(){this.isplit(o.tmp).imulK().iadd(o.tmp),this.bitLengthGT256()&&this.isplit(o.tmp).imulK().iadd(o.tmp);var e=this.ucmp(o.p);return 0===e?(this.words[0]=0,this.length=1):e>0?this.isub(o.p):this.strip(),this},o.prototype.redNeg=function(){return this.isZero()?o.fromNumber(0):o.p.sub(this)},o.prototype.redAdd=function(e){return this.clone().redIAdd(e)},o.prototype.redIAdd=function(e){return this.iadd(e),this.ucmp(o.p)>=0&&this.isub(o.p),this},o.prototype.redIAdd7=function(){return this.iuaddn(7),this.ucmp(o.p)>=0&&this.isub(o.p),this},o.prototype.redSub=function(e){return this.clone().redISub(e)},o.prototype.redISub=function(e){return this.isub(e),0!==this.negative&&this.iadd(o.p),this},o.prototype.redMul=function(e){return this.umul(e).redIReduce()},o.prototype.redSqr=function(){return this.umul(this).redIReduce()},o.prototype.redSqrt=function(){if(this.isZero())return this.clone();for(var e=this.redSqr(),t=e.redSqr(),n=t.redSqr().redMul(t),r=n.redMul(e),i=r.redMul(this),o=i,s=0;s<54;++s)o=o.redSqr().redSqr().redSqr().redSqr().redMul(i);for(o=o.redSqr().redSqr().redSqr().redSqr().redMul(r),s=0;s<5;++s)o=o.redSqr().redSqr().redSqr().redSqr().redMul(i);return 0===(o=(o=o.redSqr().redSqr().redSqr().redSqr().redMul(n)).redSqr().redSqr().redSqr().redSqr().redSqr().redSqr().redMul(n)).redSqr().ucmp(this)?o:null},o.prototype.redInvm=function(){for(var e,t=this.clone(),n=o.p.clone(),r=o.fromNumber(1),i=o.fromNumber(0);t.gtOne()&&n.gtOne();){for(var s=0,a=1;0==(t.words[0]&a)&&s<26;++s,a<<=1);if(s>0)for(t.ishrn(s);s-- >0;)r.isOdd()&&r.iadd(o.p),r.ishrn(1);for(var u=0,c=1;0==(n.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(n.ishrn(u);u-- >0;)i.isOdd()&&i.iadd(o.p),i.ishrn(1);t.ucmp(n)>=0?(t.isub(n),r.isub(i)):(n.isub(t),i.isub(r))}return 0!==(e=1===t.length&&1===t.words[0]?r:i).negative&&e.iadd(o.p),0!==e.negative?(e.negative=0,e.redIReduce().redNeg()):e.redIReduce()},o.prototype.getNAF=function(e){for(var t=[],n=1<<e+1,r=n-1,i=n>>1,o=this.clone();!o.isZero();){for(var s=0,a=1;0==(o.words[0]&a)&&s<26;++s,a<<=1)t.push(0);if(0!==s)o.ishrn(s);else{var u=o.words[0]&r;if(u>=i)t.push(i-u),o.iuaddn(u-i).ishrn(1);else if(t.push(u),o.words[0]-=u,!o.isZero()){for(s=e-1;s>0;--s)t.push(0);o.ishrn(e)}}}return t},o.prototype.inspect=function(){if(this.isZero())return"0";for(var e=this.toBuffer().toString("hex"),t=0;"0"===e[t];++t);return e.slice(t)},o.n=o.fromBuffer(r.from("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","hex")),o.nh=o.n.clone().ishrn(1),o.nc=o.fromBuffer(r.from("000000000000000000000000000000014551231950B75FC4402DA1732FC9BEBF","hex")),o.p=o.fromBuffer(r.from("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","hex")),o.psn=o.p.sub(o.n),o.tmp=new o,o.tmp.words=new Array(10),o.fromNumber(1).words[3]=0,t.exports=o}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[5836,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.umulTo10x10=function(e,t,n){var r,i,o,s=e.words,a=t.words,u=n.words,c=0,l=0|s[0],f=8191&l,h=l>>>13,d=0|s[1],p=8191&d,g=d>>>13,m=0|s[2],b=8191&m,y=m>>>13,_=0|s[3],v=8191&_,w=_>>>13,E=0|s[4],S=8191&E,k=E>>>13,T=0|s[5],x=8191&T,I=T>>>13,R=0|s[6],C=8191&R,A=R>>>13,M=0|s[7],O=8191&M,P=M>>>13,D=0|s[8],N=8191&D,L=D>>>13,j=0|s[9],B=8191&j,F=j>>>13,U=0|a[0],q=8191&U,z=U>>>13,K=0|a[1],V=8191&K,H=K>>>13,W=0|a[2],G=8191&W,Y=W>>>13,Q=0|a[3],$=8191&Q,J=Q>>>13,Z=0|a[4],X=8191&Z,ee=Z>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],fe=8191&le,he=le>>>13,de=0|a[9],pe=8191&de,ge=de>>>13;n.length=19,r=Math.imul(f,q),i=Math.imul(f,z);var me=c+r+((8191&(i+=Math.imul(h,q)))<<13);c=(o=Math.imul(h,z))+(i>>>13)+(me>>>26),me&=67108863,r=Math.imul(p,q),i=Math.imul(p,z),i+=Math.imul(g,q),o=Math.imul(g,z),r+=Math.imul(f,V),i+=Math.imul(f,H);var be=c+r+((8191&(i+=Math.imul(h,V)))<<13);c=(o+=Math.imul(h,H))+(i>>>13)+(be>>>26),be&=67108863,r=Math.imul(b,q),i=Math.imul(b,z),i+=Math.imul(y,q),o=Math.imul(y,z),r+=Math.imul(p,V),i+=Math.imul(p,H),i+=Math.imul(g,V),o+=Math.imul(g,H),r+=Math.imul(f,G),i+=Math.imul(f,Y);var ye=c+r+((8191&(i+=Math.imul(h,G)))<<13);c=(o+=Math.imul(h,Y))+(i>>>13)+(ye>>>26),ye&=67108863,r=Math.imul(v,q),i=Math.imul(v,z),i+=Math.imul(w,q),o=Math.imul(w,z),r+=Math.imul(b,V),i+=Math.imul(b,H),i+=Math.imul(y,V),o+=Math.imul(y,H),r+=Math.imul(p,G),i+=Math.imul(p,Y),i+=Math.imul(g,G),o+=Math.imul(g,Y),r+=Math.imul(f,$),i+=Math.imul(f,J);var _e=c+r+((8191&(i+=Math.imul(h,$)))<<13);c=(o+=Math.imul(h,J))+(i>>>13)+(_e>>>26),_e&=67108863,r=Math.imul(S,q),i=Math.imul(S,z),i+=Math.imul(k,q),o=Math.imul(k,z),r+=Math.imul(v,V),i+=Math.imul(v,H),i+=Math.imul(w,V),o+=Math.imul(w,H),r+=Math.imul(b,G),i+=Math.imul(b,Y),i+=Math.imul(y,G),o+=Math.imul(y,Y),r+=Math.imul(p,$),i+=Math.imul(p,J),i+=Math.imul(g,$),o+=Math.imul(g,J),r+=Math.imul(f,X),i+=Math.imul(f,ee);var ve=c+r+((8191&(i+=Math.imul(h,X)))<<13);c=(o+=Math.imul(h,ee))+(i>>>13)+(ve>>>26),ve&=67108863,r=Math.imul(x,q),i=Math.imul(x,z),i+=Math.imul(I,q),o=Math.imul(I,z),r+=Math.imul(S,V),i+=Math.imul(S,H),i+=Math.imul(k,V),o+=Math.imul(k,H),r+=Math.imul(v,G),i+=Math.imul(v,Y),i+=Math.imul(w,G),o+=Math.imul(w,Y),r+=Math.imul(b,$),i+=Math.imul(b,J),i+=Math.imul(y,$),o+=Math.imul(y,J),r+=Math.imul(p,X),i+=Math.imul(p,ee),i+=Math.imul(g,X),o+=Math.imul(g,ee),r+=Math.imul(f,ne),i+=Math.imul(f,re);var we=c+r+((8191&(i+=Math.imul(h,ne)))<<13);c=(o+=Math.imul(h,re))+(i>>>13)+(we>>>26),we&=67108863,r=Math.imul(C,q),i=Math.imul(C,z),i+=Math.imul(A,q),o=Math.imul(A,z),r+=Math.imul(x,V),i+=Math.imul(x,H),i+=Math.imul(I,V),o+=Math.imul(I,H),r+=Math.imul(S,G),i+=Math.imul(S,Y),i+=Math.imul(k,G),o+=Math.imul(k,Y),r+=Math.imul(v,$),i+=Math.imul(v,J),i+=Math.imul(w,$),o+=Math.imul(w,J),r+=Math.imul(b,X),i+=Math.imul(b,ee),i+=Math.imul(y,X),o+=Math.imul(y,ee),r+=Math.imul(p,ne),i+=Math.imul(p,re),i+=Math.imul(g,ne),o+=Math.imul(g,re),r+=Math.imul(f,oe),i+=Math.imul(f,se);var Ee=c+r+((8191&(i+=Math.imul(h,oe)))<<13);c=(o+=Math.imul(h,se))+(i>>>13)+(Ee>>>26),Ee&=67108863,r=Math.imul(O,q),i=Math.imul(O,z),i+=Math.imul(P,q),o=Math.imul(P,z),r+=Math.imul(C,V),i+=Math.imul(C,H),i+=Math.imul(A,V),o+=Math.imul(A,H),r+=Math.imul(x,G),i+=Math.imul(x,Y),i+=Math.imul(I,G),o+=Math.imul(I,Y),r+=Math.imul(S,$),i+=Math.imul(S,J),i+=Math.imul(k,$),o+=Math.imul(k,J),r+=Math.imul(v,X),i+=Math.imul(v,ee),i+=Math.imul(w,X),o+=Math.imul(w,ee),r+=Math.imul(b,ne),i+=Math.imul(b,re),i+=Math.imul(y,ne),o+=Math.imul(y,re),r+=Math.imul(p,oe),i+=Math.imul(p,se),i+=Math.imul(g,oe),o+=Math.imul(g,se),r+=Math.imul(f,ue),i+=Math.imul(f,ce);var Se=c+r+((8191&(i+=Math.imul(h,ue)))<<13);c=(o+=Math.imul(h,ce))+(i>>>13)+(Se>>>26),Se&=67108863,r=Math.imul(N,q),i=Math.imul(N,z),i+=Math.imul(L,q),o=Math.imul(L,z),r+=Math.imul(O,V),i+=Math.imul(O,H),i+=Math.imul(P,V),o+=Math.imul(P,H),r+=Math.imul(C,G),i+=Math.imul(C,Y),i+=Math.imul(A,G),o+=Math.imul(A,Y),r+=Math.imul(x,$),i+=Math.imul(x,J),i+=Math.imul(I,$),o+=Math.imul(I,J),r+=Math.imul(S,X),i+=Math.imul(S,ee),i+=Math.imul(k,X),o+=Math.imul(k,ee),r+=Math.imul(v,ne),i+=Math.imul(v,re),i+=Math.imul(w,ne),o+=Math.imul(w,re),r+=Math.imul(b,oe),i+=Math.imul(b,se),i+=Math.imul(y,oe),o+=Math.imul(y,se),r+=Math.imul(p,ue),i+=Math.imul(p,ce),i+=Math.imul(g,ue),o+=Math.imul(g,ce),r+=Math.imul(f,fe),i+=Math.imul(f,he);var ke=c+r+((8191&(i+=Math.imul(h,fe)))<<13);c=(o+=Math.imul(h,he))+(i>>>13)+(ke>>>26),ke&=67108863,r=Math.imul(B,q),i=Math.imul(B,z),i+=Math.imul(F,q),o=Math.imul(F,z),r+=Math.imul(N,V),i+=Math.imul(N,H),i+=Math.imul(L,V),o+=Math.imul(L,H),r+=Math.imul(O,G),i+=Math.imul(O,Y),i+=Math.imul(P,G),o+=Math.imul(P,Y),r+=Math.imul(C,$),i+=Math.imul(C,J),i+=Math.imul(A,$),o+=Math.imul(A,J),r+=Math.imul(x,X),i+=Math.imul(x,ee),i+=Math.imul(I,X),o+=Math.imul(I,ee),r+=Math.imul(S,ne),i+=Math.imul(S,re),i+=Math.imul(k,ne),o+=Math.imul(k,re),r+=Math.imul(v,oe),i+=Math.imul(v,se),i+=Math.imul(w,oe),o+=Math.imul(w,se),r+=Math.imul(b,ue),i+=Math.imul(b,ce),i+=Math.imul(y,ue),o+=Math.imul(y,ce),r+=Math.imul(p,fe),i+=Math.imul(p,he),i+=Math.imul(g,fe),o+=Math.imul(g,he),r+=Math.imul(f,pe),i+=Math.imul(f,ge);var Te=c+r+((8191&(i+=Math.imul(h,pe)))<<13);c=(o+=Math.imul(h,ge))+(i>>>13)+(Te>>>26),Te&=67108863,r=Math.imul(B,V),i=Math.imul(B,H),i+=Math.imul(F,V),o=Math.imul(F,H),r+=Math.imul(N,G),i+=Math.imul(N,Y),i+=Math.imul(L,G),o+=Math.imul(L,Y),r+=Math.imul(O,$),i+=Math.imul(O,J),i+=Math.imul(P,$),o+=Math.imul(P,J),r+=Math.imul(C,X),i+=Math.imul(C,ee),i+=Math.imul(A,X),o+=Math.imul(A,ee),r+=Math.imul(x,ne),i+=Math.imul(x,re),i+=Math.imul(I,ne),o+=Math.imul(I,re),r+=Math.imul(S,oe),i+=Math.imul(S,se),i+=Math.imul(k,oe),o+=Math.imul(k,se),r+=Math.imul(v,ue),i+=Math.imul(v,ce),i+=Math.imul(w,ue),o+=Math.imul(w,ce),r+=Math.imul(b,fe),i+=Math.imul(b,he),i+=Math.imul(y,fe),o+=Math.imul(y,he),r+=Math.imul(p,pe),i+=Math.imul(p,ge);var xe=c+r+((8191&(i+=Math.imul(g,pe)))<<13);c=(o+=Math.imul(g,ge))+(i>>>13)+(xe>>>26),xe&=67108863,r=Math.imul(B,G),i=Math.imul(B,Y),i+=Math.imul(F,G),o=Math.imul(F,Y),r+=Math.imul(N,$),i+=Math.imul(N,J),i+=Math.imul(L,$),o+=Math.imul(L,J),r+=Math.imul(O,X),i+=Math.imul(O,ee),i+=Math.imul(P,X),o+=Math.imul(P,ee),r+=Math.imul(C,ne),i+=Math.imul(C,re),i+=Math.imul(A,ne),o+=Math.imul(A,re),r+=Math.imul(x,oe),i+=Math.imul(x,se),i+=Math.imul(I,oe),o+=Math.imul(I,se),r+=Math.imul(S,ue),i+=Math.imul(S,ce),i+=Math.imul(k,ue),o+=Math.imul(k,ce),r+=Math.imul(v,fe),i+=Math.imul(v,he),i+=Math.imul(w,fe),o+=Math.imul(w,he),r+=Math.imul(b,pe),i+=Math.imul(b,ge);var Ie=c+r+((8191&(i+=Math.imul(y,pe)))<<13);c=(o+=Math.imul(y,ge))+(i>>>13)+(Ie>>>26),Ie&=67108863,r=Math.imul(B,$),i=Math.imul(B,J),i+=Math.imul(F,$),o=Math.imul(F,J),r+=Math.imul(N,X),i+=Math.imul(N,ee),i+=Math.imul(L,X),o+=Math.imul(L,ee),r+=Math.imul(O,ne),i+=Math.imul(O,re),i+=Math.imul(P,ne),o+=Math.imul(P,re),r+=Math.imul(C,oe),i+=Math.imul(C,se),i+=Math.imul(A,oe),o+=Math.imul(A,se),r+=Math.imul(x,ue),i+=Math.imul(x,ce),i+=Math.imul(I,ue),o+=Math.imul(I,ce),r+=Math.imul(S,fe),i+=Math.imul(S,he),i+=Math.imul(k,fe),o+=Math.imul(k,he),r+=Math.imul(v,pe),i+=Math.imul(v,ge);var Re=c+r+((8191&(i+=Math.imul(w,pe)))<<13);c=(o+=Math.imul(w,ge))+(i>>>13)+(Re>>>26),Re&=67108863,r=Math.imul(B,X),i=Math.imul(B,ee),i+=Math.imul(F,X),o=Math.imul(F,ee),r+=Math.imul(N,ne),i+=Math.imul(N,re),i+=Math.imul(L,ne),o+=Math.imul(L,re),r+=Math.imul(O,oe),i+=Math.imul(O,se),i+=Math.imul(P,oe),o+=Math.imul(P,se),r+=Math.imul(C,ue),i+=Math.imul(C,ce),i+=Math.imul(A,ue),o+=Math.imul(A,ce),r+=Math.imul(x,fe),i+=Math.imul(x,he),i+=Math.imul(I,fe),o+=Math.imul(I,he),r+=Math.imul(S,pe),i+=Math.imul(S,ge);var Ce=c+r+((8191&(i+=Math.imul(k,pe)))<<13);c=(o+=Math.imul(k,ge))+(i>>>13)+(Ce>>>26),Ce&=67108863,r=Math.imul(B,ne),i=Math.imul(B,re),i+=Math.imul(F,ne),o=Math.imul(F,re),r+=Math.imul(N,oe),i+=Math.imul(N,se),i+=Math.imul(L,oe),o+=Math.imul(L,se),r+=Math.imul(O,ue),i+=Math.imul(O,ce),i+=Math.imul(P,ue),o+=Math.imul(P,ce),r+=Math.imul(C,fe),i+=Math.imul(C,he),i+=Math.imul(A,fe),o+=Math.imul(A,he),r+=Math.imul(x,pe),i+=Math.imul(x,ge);var Ae=c+r+((8191&(i+=Math.imul(I,pe)))<<13);c=(o+=Math.imul(I,ge))+(i>>>13)+(Ae>>>26),Ae&=67108863,r=Math.imul(B,oe),i=Math.imul(B,se),i+=Math.imul(F,oe),o=Math.imul(F,se),r+=Math.imul(N,ue),i+=Math.imul(N,ce),i+=Math.imul(L,ue),o+=Math.imul(L,ce),r+=Math.imul(O,fe),i+=Math.imul(O,he),i+=Math.imul(P,fe),o+=Math.imul(P,he),r+=Math.imul(C,pe),i+=Math.imul(C,ge);var Me=c+r+((8191&(i+=Math.imul(A,pe)))<<13);c=(o+=Math.imul(A,ge))+(i>>>13)+(Me>>>26),Me&=67108863,r=Math.imul(B,ue),i=Math.imul(B,ce),i+=Math.imul(F,ue),o=Math.imul(F,ce),r+=Math.imul(N,fe),i+=Math.imul(N,he),i+=Math.imul(L,fe),o+=Math.imul(L,he),r+=Math.imul(O,pe),i+=Math.imul(O,ge);var Oe=c+r+((8191&(i+=Math.imul(P,pe)))<<13);c=(o+=Math.imul(P,ge))+(i>>>13)+(Oe>>>26),Oe&=67108863,r=Math.imul(B,fe),i=Math.imul(B,he),i+=Math.imul(F,fe),o=Math.imul(F,he),r+=Math.imul(N,pe),i+=Math.imul(N,ge);var Pe=c+r+((8191&(i+=Math.imul(L,pe)))<<13);c=(o+=Math.imul(L,ge))+(i>>>13)+(Pe>>>26),Pe&=67108863,r=Math.imul(B,pe),i=Math.imul(B,ge);var De=c+r+((8191&(i+=Math.imul(F,pe)))<<13);return c=(o=Math.imul(F,ge))+(i>>>13)+(De>>>26),De&=67108863,u[0]=me,u[1]=be,u[2]=ye,u[3]=_e,u[4]=ve,u[5]=we,u[6]=Ee,u[7]=Se,u[8]=ke,u[9]=Te,u[10]=xe,u[11]=Ie,u[12]=Re,u[13]=Ce,u[14]=Ae,u[15]=Me,u[16]=Oe,u[17]=Pe,u[18]=De,0!==c&&(u[19]=c,n.length++),n}}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[5837,{"./bn":5835},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./bn");function i(e,t,n){null===e&&null===t&&null===n?(this.x=i.one,this.y=i.one,this.z=i.zero):(this.x=e,this.y=t,this.z=n),this.zOne=this.z===i.one}i.zero=r.fromNumber(0),i.one=r.fromNumber(1),i.prototype.neg=function(){return this.inf?this:new i(this.x,this.y.redNeg(),this.z)},i.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;var t=e.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(t),o=e.x.redMul(n),s=this.y.redMul(t).redMul(e.z),a=e.y.redMul(n).redMul(this.z),u=r.redSub(o),c=s.redSub(a);if(u.isZero())return c.isZero()?this.dbl():new i(null,null,null);var l=u.redSqr(),f=r.redMul(l),h=l.redMul(u),d=c.redSqr().redIAdd(h).redISub(f).redISub(f);return new i(d,c.redMul(f.redISub(d)).redISub(s.redMul(h)),this.z.redMul(e.z).redMul(u))},i.prototype.mixedAdd=function(e){if(this.inf)return e.toECJPoint();if(e.inf)return this;var t=this.z.redSqr(),n=this.x,r=e.x.redMul(t),o=this.y,s=e.y.redMul(t).redMul(this.z),a=n.redSub(r),u=o.redSub(s);if(a.isZero())return u.isZero()?this.dbl():new i(null,null,null);var c=a.redSqr(),l=n.redMul(c),f=c.redMul(a),h=u.redSqr().redIAdd(f).redISub(l).redISub(l);return new i(h,u.redMul(l.redISub(h)).redISub(o.redMul(f)),this.z.redMul(a))},i.prototype.dbl=function(){if(this.inf)return this;var e,t,n;if(this.zOne){var r=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(r).redISub(s);a=a.redIAdd(a);var u=r.redAdd(r).redIAdd(r),c=u.redSqr().redISub(a).redISub(a),l=s.redIAdd(s).redIAdd(s).redIAdd(s);e=c,t=u.redMul(a.redISub(c)).redISub(l),n=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(f).redISub(d);p=p.redIAdd(p);var g=f.redAdd(f).redIAdd(f),m=g.redSqr(),b=d.redIAdd(d).redIAdd(d).redIAdd(d);e=m.redISub(p).redISub(p),t=g.redMul(p.redISub(e)).redISub(b),n=(n=this.y.redMul(this.z)).redIAdd(n)}return new i(e,t,n)},i.prototype.dblp=function(e){if(0===e||this.inf)return this;for(var t=this,n=0;n<e;n++)t=t.dbl();return t},Object.defineProperty(i.prototype,"inf",{enumerable:!0,get:function(){return this.z.isZero()}}),t.exports=i}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[5838,{"./bn":5835,"./ecjpoint":5837,"safe-buffer":5818},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,i=e("./bn"),o=e("./ecjpoint");function s(e,t){null===e&&null===t?(this.x=this.y=null,this.inf=!0):(this.x=e,this.y=t,this.inf=!1)}s.fromPublicKey=function(e){var t,n,r=e[0];return 33!==e.length||2!==r&&3!==r?65!==e.length||4!==r&&6!==r&&7!==r?null:(t=i.fromBuffer(e.slice(1,33)),n=i.fromBuffer(e.slice(33,65)),t.ucmp(i.p)>=0||n.ucmp(i.p)>=0?null:6!==r&&7!==r||n.isOdd()===(7===r)?0!==t.redSqr().redMul(t).redIAdd7().ucmp(n.redSqr())?null:new s(t,n):null):(t=i.fromBuffer(e.slice(1,33))).ucmp(i.p)>=0||null===(n=t.redSqr().redMul(t).redIAdd7().redSqrt())?null:(3===r!==n.isOdd()&&(n=n.redNeg()),new s(t,n))},s.prototype.toPublicKey=function(e){var t,n=this.x,i=this.y;return e?((t=r.alloc(33))[0]=i.isOdd()?3:2,n.toBuffer().copy(t,1)):((t=r.alloc(65))[0]=4,n.toBuffer().copy(t,1),i.toBuffer().copy(t,33)),t},s.fromECJPoint=function(e){if(e.inf)return new s(null,null);var t=e.z.redInvm(),n=t.redSqr();return new s(e.x.redMul(n),e.y.redMul(n).redMul(t))},s.prototype.toECJPoint=function(){return this.inf?new o(null,null,null):new o(this.x,this.y,o.one)},s.prototype.neg=function(){return this.inf?this:new s(this.x,this.y.redNeg())},s.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(0===this.x.ucmp(e.x))return 0===this.y.ucmp(e.y)?this.dbl():new s(null,null);var t=this.y.redSub(e.y);t.isZero()||(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x);return new s(n,t.redMul(this.x.redSub(n)).redISub(this.y))},s.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.isZero())return new s(null,null);var t=this.x.redSqr(),n=t.redAdd(t).redIAdd(t).redMul(e.redInvm()),r=n.redSqr().redISub(this.x.redAdd(this.x));return new s(r,n.redMul(this.x.redSub(r)).redISub(this.y))},s.prototype.mul=function(e){for(var t=this._getNAFPoints(4),n=t.points,r=e.getNAF(t.wnd),i=new o(null,null,null),a=r.length-1;a>=0;a--){for(var u=0;a>=0&&0===r[a];a--,++u);if(a>=0&&(u+=1),i=i.dblp(u),a<0)break;var c=r[a];i=c>0?i.mixedAdd(n[c-1>>1]):i.mixedAdd(n[-c-1>>1].neg())}return s.fromECJPoint(i)},s.prototype._getNAFPoints1=function(){return{wnd:1,points:[this]}},s.prototype._getNAFPoints=function(e){var t=new Array((1<<e)-1);t[0]=this;for(var n=this.dbl(),r=1;r<t.length;++r)t[r]=t[r-1].add(n);return{wnd:e,points:t}},t.exports=s}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[5839,{"./bn":5835,"./ecjpoint":5837,"./ecpoint":5838,"safe-buffer":5818},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,i=e("./bn"),o=e("./ecpoint"),s=e("./ecjpoint");function a(){this.x=i.fromBuffer(r.from("79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","hex")),this.y=i.fromBuffer(r.from("483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8","hex")),this.inf=!1,this.precomputed=undefined}a.prototype._precompute=function(){if(this.precomputed===undefined){for(var e=new o(this.x,this.y),t=new Array(1+Math.ceil(64.25)),n=t[0]=e,r=1;r<t.length;++r){for(var i=0;i<4;i++)n=n.dbl();t[r]=n}this.precomputed={naf:e._getNAFPoints(7),doubles:{step:4,points:t,negpoints:t.map((function(e){return e.neg()}))}}}},a.prototype.mul=function(e){this._precompute();for(var t=this.precomputed.doubles.step,n=this.precomputed.doubles.points,r=this.precomputed.doubles.negpoints,i=e.getNAF(1),a=((1<<t+1)-(t%2==0?2:1))/3,u=[],c=0;c<i.length;c+=t){for(var l=0,f=c+t-1;f>=c;f--)l=(l<<1)+i[f];u.push(l)}for(var h=new s(null,null,null),d=new s(null,null,null),p=a;p>0;p--){for(var g=0;g<u.length;g++)u[g]===p?d=d.mixedAdd(n[g]):u[g]===-p&&(d=d.mixedAdd(r[g]));h=h.add(d)}return o.fromECJPoint(h)},a.prototype.mulAdd=function(e,t,n){this._precompute();for(var r=this.precomputed.naf,i=t._getNAFPoints1(),o=[r.points,i.points],a=[e.getNAF(r.wnd),n.getNAF(i.wnd)],u=new s(null,null,null),c=[null,null],l=Math.max(a[0].length,a[1].length);l>=0;l--){for(var f=0;l>=0&&(c[0]=0|a[0][l],c[1]=0|a[1][l],0===c[0]&&0===c[1]);++f,--l);if(l>=0&&(f+=1),u=u.dblp(f),l<0)break;for(var h=0;h<2;h++){var d,p=c[h];0!==p&&(p>0?d=o[h][p>>1]:p<0&&(d=o[h][-p>>1].neg()),u=d.z===undefined?u.mixedAdd(d):u.add(d))}}return u},t.exports=new a}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[584,{"./ObservableStore":585},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MergedStore=void 0;const r=e("./ObservableStore");class i extends r.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}n.MergedStore=i}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store"}],[5840,{"../messages.json":5841,"./bn":5835,"./ecpoint":5838,"./ecpointg":5839,"create-hash":2278,"drbg.js/hmac":2406,"safe-buffer":5818},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,i=e("create-hash"),o=e("drbg.js/hmac"),s=e("../messages.json"),a=e("./bn"),u=e("./ecpoint"),c=e("./ecpointg");n.privateKeyVerify=function(e){var t=a.fromBuffer(e);return!(t.isOverflow()||t.isZero())},n.privateKeyExport=function(e,t){var n=a.fromBuffer(e);if(n.isOverflow()||n.isZero())throw new Error(s.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return c.mul(n).toPublicKey(t)},n.privateKeyNegate=function(e){var t=a.fromBuffer(e);return t.isZero()?r.alloc(32):(t.ucmp(a.n)>0&&t.isub(a.n),a.n.sub(t).toBuffer())},n.privateKeyModInverse=function(e){var t=a.fromBuffer(e);if(t.isOverflow()||t.isZero())throw new Error(s.EC_PRIVATE_KEY_RANGE_INVALID);return t.uinvm().toBuffer()},n.privateKeyTweakAdd=function(e,t){var n=a.fromBuffer(t);if(n.isOverflow())throw new Error(s.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(n.iadd(a.fromBuffer(e)),n.isOverflow()&&n.isub(a.n),n.isZero())throw new Error(s.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return n.toBuffer()},n.privateKeyTweakMul=function(e,t){var n=a.fromBuffer(t);if(n.isOverflow()||n.isZero())throw new Error(s.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);var r=a.fromBuffer(e);return n.umul(r).ureduce().toBuffer()},n.publicKeyCreate=function(e,t){var n=a.fromBuffer(e);if(n.isOverflow()||n.isZero())throw new Error(s.EC_PUBLIC_KEY_CREATE_FAIL);return c.mul(n).toPublicKey(t)},n.publicKeyConvert=function(e,t){var n=u.fromPublicKey(e);if(null===n)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);return n.toPublicKey(t)},n.publicKeyVerify=function(e){return null!==u.fromPublicKey(e)},n.publicKeyTweakAdd=function(e,t,n){var r=u.fromPublicKey(e);if(null===r)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);if((t=a.fromBuffer(t)).isOverflow())throw new Error(s.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var i=c.mul(t).add(r);if(i.inf)throw new Error(s.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return i.toPublicKey(n)},n.publicKeyTweakMul=function(e,t,n){var r=u.fromPublicKey(e);if(null===r)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);if((t=a.fromBuffer(t)).isOverflow()||t.isZero())throw new Error(s.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return r.mul(t).toPublicKey(n)},n.publicKeyCombine=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;++r)if(n[r]=u.fromPublicKey(e[r]),null===n[r])throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);for(var i=n[0],o=1;o<n.length;++o)i=i.add(n[o]);if(i.inf)throw new Error(s.EC_PUBLIC_KEY_COMBINE_FAIL);return i.toPublicKey(t)},n.signatureNormalize=function(e){var t=a.fromBuffer(e.slice(0,32)),n=a.fromBuffer(e.slice(32,64));if(t.isOverflow()||n.isOverflow())throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);var i=r.from(e);return n.isHigh()&&a.n.sub(n).toBuffer().copy(i,32),i},n.signatureExport=function(e){var t=e.slice(0,32),n=e.slice(32,64);if(a.fromBuffer(t).isOverflow()||a.fromBuffer(n).isOverflow())throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:n}},n.signatureImport=function(e){var t=a.fromBuffer(e.r);t.isOverflow()&&(t=a.fromNumber(0));var n=a.fromBuffer(e.s);return n.isOverflow()&&(n=a.fromNumber(0)),r.concat([t.toBuffer(),n.toBuffer()])},n.sign=function(e,t,n,i){var u=a.fromBuffer(t);if(u.isOverflow()||u.isZero())throw new Error(s.ECDSA_SIGN_FAIL);if(null===n){var l=new o("sha256",t,e,i);n=function(){return l.generate(32)}}for(var f=a.fromBuffer(e),h=0;;++h){var d=n(e,t,null,i,h);if(!r.isBuffer(d)||32!==d.length)throw new Error(s.ECDSA_SIGN_FAIL);var p=a.fromBuffer(d);if(!p.isOverflow()&&!p.isZero()){var g=c.mul(p),m=g.x.fireduce();if(!m.isZero()){var b=p.uinvm().umul(m.umul(u).ureduce().iadd(f).fireduce()).ureduce();if(!b.isZero()){var y=(0!==g.x.ucmp(m)?2:0)|(g.y.isOdd()?1:0);return b.isHigh()&&(b=a.n.sub(b),y^=1),{signature:r.concat([m.toBuffer(),b.toBuffer()]),recovery:y}}}}}},n.verify=function(e,t,n){var r=a.fromBuffer(t.slice(0,32)),i=a.fromBuffer(t.slice(32,64));if(r.isOverflow()||i.isOverflow())throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);if(i.isHigh()||r.isZero()||i.isZero())return!1;var o=u.fromPublicKey(n);if(null===o)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);var l=i.uinvm(),f=l.umul(a.fromBuffer(e)).ureduce(),h=l.umul(r).ureduce(),d=c.mulAdd(f,o,h);if(d.inf)return!1;var p=d.z.redSqr();return 0===r.redMul(p).ucmp(d.x)||!(r.ucmp(a.psn)>=0)&&0===r.iadd(a.psn).redMul(p).ucmp(d.x)},n.recover=function(e,t,n,i){var o=a.fromBuffer(t.slice(0,32)),l=a.fromBuffer(t.slice(32,64));if(o.isOverflow()||l.isOverflow())throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);do{if(o.isZero()||l.isZero())break;var f=o;if(n>>1){if(f.ucmp(a.psn)>=0)break;f=o.add(a.n)}var h=r.concat([r.from([2+(1&n)]),f.toBuffer()]),d=u.fromPublicKey(h);if(null===d)break;var p=o.uinvm(),g=a.n.sub(a.fromBuffer(e)).umul(p).ureduce(),m=l.umul(p).ureduce();return u.fromECJPoint(c.mulAdd(g,d,m)).toPublicKey(i)}while(0);throw new Error(s.ECDSA_RECOVER_FAIL)},n.ecdh=function(e,t){var r=n.ecdhUnsafe(e,t,!0);return i("sha256").update(r).digest()},n.ecdhUnsafe=function(e,t,n){var r=u.fromPublicKey(e);if(null===r)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);var i=a.fromBuffer(t);if(i.isOverflow()||i.isZero())throw new Error(s.ECDH_FAIL);return r.mul(i).toPublicKey(n)}}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[5841,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={COMPRESSED_TYPE_INVALID:"compressed should be a boolean",EC_PRIVATE_KEY_TYPE_INVALID:"private key should be a Buffer",EC_PRIVATE_KEY_LENGTH_INVALID:"private key length is invalid",EC_PRIVATE_KEY_RANGE_INVALID:"private key range is invalid",EC_PRIVATE_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting private key is invalid",EC_PRIVATE_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PRIVATE_KEY_EXPORT_DER_FAIL:"couldn't export to DER format",EC_PRIVATE_KEY_IMPORT_DER_FAIL:"couldn't import from DER format",EC_PUBLIC_KEYS_TYPE_INVALID:"public keys should be an Array",EC_PUBLIC_KEYS_LENGTH_INVALID:"public keys Array should have at least 1 element",EC_PUBLIC_KEY_TYPE_INVALID:"public key should be a Buffer",EC_PUBLIC_KEY_LENGTH_INVALID:"public key length is invalid",EC_PUBLIC_KEY_PARSE_FAIL:"the public key could not be parsed or is invalid",EC_PUBLIC_KEY_CREATE_FAIL:"private was invalid, try again",EC_PUBLIC_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting public key is invalid",EC_PUBLIC_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PUBLIC_KEY_COMBINE_FAIL:"the sum of the public keys is not valid",ECDH_FAIL:"scalar was invalid (zero or overflow)",ECDSA_SIGNATURE_TYPE_INVALID:"signature should be a Buffer",ECDSA_SIGNATURE_LENGTH_INVALID:"signature length is invalid",ECDSA_SIGNATURE_PARSE_FAIL:"couldn't parse signature",ECDSA_SIGNATURE_PARSE_DER_FAIL:"couldn't parse DER signature",ECDSA_SIGNATURE_SERIALIZE_DER_FAIL:"couldn't serialize signature to DER format",ECDSA_SIGN_FAIL:"nonce generation function failed or private key is invalid",ECDSA_RECOVER_FAIL:"couldn't recover public key from signature",MSG32_TYPE_INVALID:"message should be a Buffer",MSG32_LENGTH_INVALID:"message length is invalid",OPTIONS_TYPE_INVALID:"options should be an Object",OPTIONS_DATA_TYPE_INVALID:"options.data should be a Buffer",OPTIONS_DATA_LENGTH_INVALID:"options.data length is invalid",OPTIONS_NONCEFN_TYPE_INVALID:"options.noncefn should be a Function",RECOVERY_ID_TYPE_INVALID:"recovery should be a Number",RECOVERY_ID_VALUE_INVALID:"recovery should have value between -1 and 4",TWEAK_TYPE_INVALID:"tweak should be a Buffer",TWEAK_LENGTH_INVALID:"tweak length is invalid"}}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[585,{"@metamask/safe-event-emitter":1319},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.ObservableStore=void 0;const i=r(e("@metamask/safe-event-emitter"));class o extends i.default{constructor(e){super(),this._state=e||{}}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}n.ObservableStore=o}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store"}],[586,{stream:2178},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.storeAsStream=void 0;const r=e("stream");class i extends r.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const n=super.pipe(e,t);return e.write(this.obsStore.getState()),n}_write(e,t,n){this.obsStore.putState(e),n()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}n.storeAsStream=function(e){return new i(e)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store"}],[587,{"./ComposedStore":583,"./MergedStore":584,"./ObservableStore":585,"./asStream":586,"./transform":588},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./asStream"),n),i(e("./ComposedStore"),n),i(e("./MergedStore"),n),i(e("./ObservableStore"),n),i(e("./transform"),n)}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store"}],[588,{through2:589},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.storeTransformStream=void 0;const r=e("through2");n.storeTransformStream=function(e){return r.obj(((t,n,r)=>{try{return r(null,e(t)),undefined}catch(e){return r(e),undefined}}))}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store"}],[589,{_process:5500,"readable-stream":5780,util:2181,xtend:6249},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("readable-stream").Transform,i=e("util").inherits,o=e("xtend");function s(e){r.call(this,e),this._destroyed=!1}function a(e,t,n){n(null,e)}function u(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=a),"function"!=typeof r&&(r=null),e(t,n,r)}}i(s,r),s.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=u((function(e,t,n){var r=new s(e);return r._transform=t,n&&(r._flush=n),r})),t.exports.ctor=u((function(e,t,n){function r(t){if(!(this instanceof r))return new r(t);this.options=o(e,t),s.call(this,this.options)}return i(r,s),r.prototype._transform=t,n&&(r.prototype._flush=n),r})),t.exports.obj=u((function(e,t,n){var r=new s(o({objectMode:!0,highWaterMark:16},e));return r._transform=t,n&&(r._flush=n),r}))}).call(this)}).call(this,e("_process"))}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2"}],[5899,{"./lib/index":5903},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./lib/index")}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[59,{lodash:5255},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return i((0,r.cloneDeep)(e),(e=>null===e?"null":typeof e))};var r=e("lodash");function i(e={},t){return Object.entries(e).forEach((([n,r])=>{e[n]="object"==typeof r&&null!==r?i(r,t):t(r)})),e}}}},{package:"$root$"}],[5900,{"./random/random-from-seed":5906},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i,o,s=e("./random/random-from-seed"),a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function u(){o=!1}function c(e){if(e){if(e!==r){if(e.length!==a.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. These characters were not unique: "+t.join(", "));r=e,u()}}else r!==a&&(r=a,u())}function l(){return o||(o=function(){r||c(a);for(var e,t=r.split(""),n=[],i=s.nextValue();t.length>0;)i=s.nextValue(),e=Math.floor(i*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}t.exports={get:function(){return r||a},characters:function(e){return c(e),r},seed:function(e){s.seed(e),i!==e&&(u(),i=e)},lookup:function(e){return l()[e]},shuffled:l}}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[5901,{"./alphabet":5900,"./generate":5902},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i,o=e("./generate");e("./alphabet");t.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-1459707606518));return n===i?r++:(r=0,i=n),t+=o(6),t+=o(e),r>0&&(t+=o(r)),t+=o(n)}}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[5902,{"./alphabet":5900,"./random/random-byte":5905,"nanoid/format":5342},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./alphabet"),i=e("./random/random-byte"),o=e("nanoid/format");t.exports=function(e){for(var t,n=0,s="";!t;)s+=o(i,r.get(),1),t=e<Math.pow(16,n+1),n++;return s}}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[5903,{"./alphabet":5900,"./build":5901,"./is-valid":5904,"./util/cluster-worker-id":5907},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./alphabet"),i=e("./build"),o=e("./is-valid"),s=e("./util/cluster-worker-id")||0;function a(){return i(s)}t.exports=a,t.exports.generate=a,t.exports.seed=function(e){return r.seed(e),t.exports},t.exports.worker=function(e){return s=e,t.exports},t.exports.characters=function(e){return e!==undefined&&r.characters(e),r.shuffled()},t.exports.isValid=o}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[5904,{"./alphabet":5900},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./alphabet");t.exports=function(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[5905,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i="object"==typeof window&&(window.crypto||window.msCrypto);r=i&&i.getRandomValues?function(e){return i.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},t.exports=r}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[5906,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=1;t.exports={nextValue:function(){return(r=(9301*r+49297)%233280)/233280},seed:function(e){r=e}}}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[5907,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=0}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[5908,{varint:6118},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("varint");n.encode=function e(t,n,i){t=t>=0?2*t:-2*t-1;var o=r.encode(t,n,i);return e.bytes=r.encode.bytes,o},n.decode=function e(t,n){var i=r.decode(t,n);return e.bytes=r.decode.bytes,1&i?(i+1)/-2:i/2},n.encodingLength=function(e){return r.encodingLength(e>=0?2*e:-2*e-1)}}}},{package:"3box>ipfs>protons>signed-varint"}],[5909,{buffer:2175,debug:2347,"get-browser-rtc":4399,inherits:4515,randombytes:5634,"readable-stream":5924},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){t.exports=c;var r=e("debug")("simple-peer"),i=e("get-browser-rtc"),o=e("inherits"),s=e("randombytes"),a=e("readable-stream"),u=65536;function c(e){var t=this;if(!(t instanceof c))return new c(e);if(t._id=s(4).toString("hex").slice(0,7),t._debug("new peer %o",e),e=Object.assign({allowHalfOpen:!1},e),a.Duplex.call(t,e),t.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||c.channelConfig,t.config=Object.assign({},c.config,e.config),t.offerOptions=e.offerOptions||{},t.answerOptions=e.answerOptions||{},t.sdpTransform=e.sdpTransform||function(e){return e},t.streams=e.streams||(e.stream?[e.stream]:[]),t.trickle=e.trickle===undefined||e.trickle,t.allowHalfTrickle=e.allowHalfTrickle!==undefined&&e.allowHalfTrickle,t.iceCompleteTimeout=e.iceCompleteTimeout||5e3,t.destroyed=!1,t._connected=!1,t.remoteAddress=undefined,t.remoteFamily=undefined,t.remotePort=undefined,t.localAddress=undefined,t.localFamily=undefined,t.localPort=undefined,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:i(),!t._wrtc)throw"undefined"==typeof window?f("No WebRTC support: Specify `opts.wrtc` option in this environment","ERR_WEBRTC_SUPPORT"):f("No WebRTC support: Not a supported browser","ERR_WEBRTC_SUPPORT");t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._iceCompleteTimer=null,t._channel=null,t._pendingCandidates=[],t._isNegotiating=!t.initiator,t._batchedNegotiation=!1,t._queuedNegotiation=!1,t._sendersAwaitingStable=[],t._senderMap=new Map,t._firstStable=!0,t._closingInterval=null,t._remoteTracks=[],t._remoteStreams=[],t._chunk=null,t._cb=null,t._interval=null;try{t._pc=new t._wrtc.RTCPeerConnection(t.config)}catch(e){return void setTimeout((()=>t.destroy(e)),0)}t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator?t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)}):t._pc.ondatachannel=function(e){t._setupData(e)},t.streams&&t.streams.forEach((function(e){t.addStream(e)})),t._pc.ontrack=function(e){t._onTrack(e)},t.initiator&&t._needsNegotiation(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}function l(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function f(e,t){var n=new Error(e);return n.code=t,n}o(c,a.Duplex),c.WEBRTC_SUPPORT=!!i(),c.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}],sdpSemantics:"unified-plan"},c.channelConfig={},Object.defineProperty(c.prototype,"bufferSize",{get:function(){return this._channel&&this._channel.bufferedAmount||0}}),Object.defineProperty(c.prototype,"connected",{get:function(){return this._connected&&"open"===this._channel.readyState}}),c.prototype.address=function(){var e=this;return{port:e.localPort,family:e.localFamily,address:e.localAddress}},c.prototype.signal=function(e){var t=this;if(t.destroyed)throw f("cannot signal after peer is destroyed","ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}t._debug("signal()"),e.renegotiate&&t.initiator&&(t._debug("got request to renegotiate"),t._needsNegotiation()),e.transceiverRequest&&t.initiator&&(t._debug("got request for transceiver"),t.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(t._pc.localDescription&&t._pc.localDescription.type&&t._pc.remoteDescription&&t._pc.remoteDescription.type?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e)).then((function(){t.destroyed||(t._pendingCandidates.forEach((function(e){t._addIceCandidate(e)})),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())})).catch((function(e){t.destroy(f(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||t.destroy(f("signal() called with invalid signal data","ERR_SIGNALING"))},c.prototype._addIceCandidate=function(e){var t=this,n=new t._wrtc.RTCIceCandidate(e);t._pc.addIceCandidate(n).catch((function(e){var r;!n.address||n.address.endsWith(".local")?(r="Ignoring unsupported ICE candidate.",console.warn(r)):t.destroy(f(e,"ERR_ADD_ICE_CANDIDATE"))}))},c.prototype.send=function(e){this._channel.send(e)},c.prototype.addTransceiver=function(e,t){var n=this;if(n._debug("addTransceiver()"),n.initiator)try{n._pc.addTransceiver(e,t),n._needsNegotiation()}catch(e){n.destroy(e)}else n.emit("signal",{transceiverRequest:{kind:e,init:t}})},c.prototype.addStream=function(e){var t=this;t._debug("addStream()"),e.getTracks().forEach((function(n){t.addTrack(n,e)}))},c.prototype.addTrack=function(e,t){var n=this;n._debug("addTrack()");var r=n._senderMap.get(e)||new Map,i=r.get(t);i?i.removed?n.destroy(f("Track has been removed. You should enable/disable tracks that you want to re-add.","ERR_SENDER_REMOVED")):n.destroy(f("Track has already been added to that stream.","ERR_SENDER_ALREADY_ADDED")):(i=n._pc.addTrack(e,t),r.set(t,i),n._senderMap.set(e,r),n._needsNegotiation())},c.prototype.replaceTrack=function(e,t,n){var r=this;r._debug("replaceTrack()");var i=r._senderMap.get(e),o=i?i.get(n):null;o||r.destroy(f("Cannot replace track that was never added.","ERR_TRACK_NOT_ADDED")),t&&r._senderMap.set(t,i),null!=o.replaceTrack?o.replaceTrack(t):r.destroy(f("replaceTrack is not supported in this browser","ERR_UNSUPPORTED_REPLACETRACK"))},c.prototype.removeTrack=function(e,t){var n=this;n._debug("removeSender()");var r=n._senderMap.get(e),i=r?r.get(t):null;i||n.destroy(f("Cannot remove track that was never added.","ERR_TRACK_NOT_ADDED"));try{i.removed=!0,n._pc.removeTrack(i)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?n._sendersAwaitingStable.push(i):n.destroy(e)}n._needsNegotiation()},c.prototype.removeStream=function(e){var t=this;t._debug("removeSenders()"),e.getTracks().forEach((function(n){t.removeTrack(n,e)}))},c.prototype._needsNegotiation=function(){var e=this;e._debug("_needsNegotiation"),e._batchedNegotiation||(e._batchedNegotiation=!0,setTimeout((function(){e._batchedNegotiation=!1,e._debug("starting batched negotiation"),e.negotiate()}),0))},c.prototype.negotiate=function(){var e=this;e.initiator?e._isNegotiating?(e._queuedNegotiation=!0,e._debug("already negotiating, queueing")):(e._debug("start negotiation"),setTimeout((()=>{e._createOffer()}),0)):e._isNegotiating||(e._debug("requesting negotiation from initiator"),e.emit("signal",{renegotiate:!0})),e._isNegotiating=!0},c.prototype.destroy=function(e){this._destroy(e,(function(){}))},c.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){if(n._debug("destroy (error: %s)",e&&(e.message||e)),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n.destroyed=!0,n._connected=!1,n._pcReady=!1,n._channelReady=!1,n._remoteTracks=null,n._remoteStreams=null,n._senderMap=null,clearInterval(n._closingInterval),n._closingInterval=null,clearInterval(n._interval),n._interval=null,n._chunk=null,n._cb=null,n._onFinishBound&&n.removeListener("finish",n._onFinishBound),n._onFinishBound=null,n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null,n._channel.onerror=null}if(n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onicegatheringstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null,n._pc.ontrack=null,n._pc.ondatachannel=null}n._pc=null,n._channel=null,e&&n.emit("error",e),n.emit("close"),t()}},c.prototype._setupData=function(e){var t=this;if(!e.channel)return t.destroy(f("Data channel event is missing `channel` property","ERR_DATA_CHANNEL"));t._channel=e.channel,t._channel.binaryType="arraybuffer","number"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=u),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._onChannelMessage(e)},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},t._channel.onerror=function(e){t.destroy(f(e,"ERR_DATA_CHANNEL"))};var n=!1;t._closingInterval=setInterval((function(){t._channel&&"closing"===t._channel.readyState?(n&&t._onChannelClose(),n=!0):n=!1}),5e3)},c.prototype._read=function(){},c.prototype._write=function(e,t,n){var r=this;if(r.destroyed)return n(f("cannot write after peer is destroyed","ERR_DATA_CHANNEL"));if(r._connected){try{r.send(e)}catch(e){return r.destroy(f(e,"ERR_DATA_CHANNEL"))}r._channel.bufferedAmount>u?(r._debug("start backpressure: bufferedAmount %d",r._channel.bufferedAmount),r._cb=n):n(null)}else r._debug("write before connect"),r._chunk=e,r._cb=n},c.prototype._onFinish=function(){var e=this;function t(){setTimeout((function(){e.destroy()}),1e3)}e.destroyed||(e._connected?t():e.once("connect",t))},c.prototype._startIceCompleteTimeout=function(){var e=this;e.destroyed||e._iceCompleteTimer||(e._debug("started iceComplete timeout"),e._iceCompleteTimer=setTimeout((function(){e._iceComplete||(e._iceComplete=!0,e._debug("iceComplete timeout completed"),e.emit("iceTimeout"),e.emit("_iceComplete"))}),e.iceCompleteTimeout))},c.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(e.offerOptions).then((function(t){function n(){if(!e.destroyed){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}}e.destroyed||(e.trickle||e.allowHalfTrickle||(t.sdp=l(t.sdp)),t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t).then((function(){if(e._debug("createOffer success"),e.destroyed)return;e.trickle||e._iceComplete?n():e.once("_iceComplete",n)})).catch((function(t){e.destroy(f(t,"ERR_SET_LOCAL_DESCRIPTION"))})))})).catch((function(t){e.destroy(f(t,"ERR_CREATE_OFFER"))}))},c.prototype._requestMissingTransceivers=function(){var e=this;e._pc.getTransceivers&&e._pc.getTransceivers().forEach((t=>{t.mid||!t.sender.track||t.requested||(t.requested=!0,e.addTransceiver(t.sender.track.kind))}))},c.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(e.answerOptions).then((function(t){function n(){if(!e.destroyed){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp}),e.initiator||e._requestMissingTransceivers()}}e.destroyed||(e.trickle||e.allowHalfTrickle||(t.sdp=l(t.sdp)),t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t).then((function(){if(e.destroyed)return;e.trickle||e._iceComplete?n():e.once("_iceComplete",n)})).catch((function(t){e.destroy(f(t,"ERR_SET_LOCAL_DESCRIPTION"))})))})).catch((function(t){e.destroy(f(t,"ERR_CREATE_ANSWER"))}))},c.prototype._onIceStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceConnectionState,n=e._pc.iceGatheringState;e._debug("iceStateChange (connection: %s) (gathering: %s)",t,n),e.emit("iceStateChange",t,n),"connected"!==t&&"completed"!==t||(e._pcReady=!0,e._maybeReady()),"failed"===t&&e.destroy(f("Ice connection failed.","ERR_ICE_CONNECTION_FAILURE")),"closed"===t&&e.destroy(f("Ice connection closed.","ERR_ICE_CONNECTION_CLOSED"))}},c.prototype.getStats=function(e){var t=this;function n(e){return"[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((function(t){Object.assign(e,t)})),e}0===t._pc.getStats.length?t._pc.getStats().then((function(t){var r=[];t.forEach((function(e){r.push(n(e))})),e(null,r)}),(function(t){e(t)})):t._isReactNativeWebrtc?t._pc.getStats(null,(function(t){var r=[];t.forEach((function(e){r.push(n(e))})),e(null,r)}),(function(t){e(t)})):t._pc.getStats.length>0?t._pc.getStats((function(r){if(!t.destroyed){var i=[];r.result().forEach((function(e){var t={};e.names().forEach((function(n){t[n]=e.stat(n)})),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,i.push(n(t))})),e(null,i)}}),(function(t){e(t)})):e(null,[])},c.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady),!e._connected&&!e._connecting&&e._pcReady&&e._channelReady&&(e._connecting=!0,function t(){e.destroyed||e.getStats((function(n,r){if(!e.destroyed){n&&(r=[]);var i={},o={},s={},a=!1;if(r.forEach((function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(i[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(o[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(s[e.id]=e)})),r.forEach((function(e){"transport"===e.type&&e.selectedCandidatePairId&&c(s[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&c(e)})),a||Object.keys(s).length&&!Object.keys(o).length){if(e._connecting=!1,e._connected=!0,e._chunk){try{e.send(e._chunk)}catch(n){return e.destroy(f(n,"ERR_DATA_CHANNEL"))}e._chunk=null,e._debug('sent chunk from "write before connect"');var u=e._cb;e._cb=null,u(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval((function(){e._onInterval()}),150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}else setTimeout(t,100)}function c(t){a=!0;var n=o[t.localCandidateId];n&&(n.ip||n.address)?(e.localAddress=n.ip||n.address,e.localPort=Number(n.port)):n&&n.ipAddress?(e.localAddress=n.ipAddress,e.localPort=Number(n.portNumber)):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=Number(n[1])),e.localAddress&&(e.localFamily=e.localAddress.includes(":")?"IPv6":"IPv4");var r=i[t.remoteCandidateId];r&&(r.ip||r.address)?(e.remoteAddress=r.ip||r.address,e.remotePort=Number(r.port)):r&&r.ipAddress?(e.remoteAddress=r.ipAddress,e.remotePort=Number(r.portNumber)):"string"==typeof t.googRemoteAddress&&(r=t.googRemoteAddress.split(":"),e.remoteAddress=r[0],e.remotePort=Number(r[1])),e.remoteAddress&&(e.remoteFamily=e.remoteAddress.includes(":")?"IPv6":"IPv4"),e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)}}))}())},c.prototype._onInterval=function(){var e=this;!e._cb||!e._channel||e._channel.bufferedAmount>u||e._onChannelBufferedAmountLow()},c.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||("stable"!==e._pc.signalingState||e._firstStable||(e._isNegotiating=!1,e._debug("flushing sender queue",e._sendersAwaitingStable),e._sendersAwaitingStable.forEach((function(t){e._pc.removeTrack(t),e._queuedNegotiation=!0})),e._sendersAwaitingStable=[],e._queuedNegotiation&&(e._debug("flushing negotiation queue"),e._queuedNegotiation=!1,e._needsNegotiation()),e._debug("negotiate"),e.emit("negotiate")),e._firstStable=!1,e._debug("signalingStateChange %s",e._pc.signalingState),e.emit("signalingStateChange",e._pc.signalingState))},c.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||t._iceComplete||(t._iceComplete=!0,t.emit("_iceComplete")),e.candidate&&t._startIceCompleteTimeout())},c.prototype._onChannelMessage=function(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=n.from(t)),this.push(t)}},c.prototype._onChannelBufferedAmountLow=function(){var e=this;if(!e.destroyed&&e._cb){e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null,t(null)}},c.prototype._onChannelOpen=function(){var e=this;e._connected||e.destroyed||(e._debug("on channel open"),e._channelReady=!0,e._maybeReady())},c.prototype._onChannelClose=function(){var e=this;e.destroyed||(e._debug("on channel close"),e.destroy())},c.prototype._onTrack=function(e){var t=this;t.destroyed||e.streams.forEach((function(n){t._debug("on track"),t.emit("track",e.track,n),t._remoteTracks.push({track:e.track,stream:n}),t._remoteStreams.some((function(e){return e.id===n.id}))||(t._remoteStreams.push(n),setTimeout((function(){t.emit("stream",n)}),0))}))},c.prototype._debug=function(){var e=this,t=[].slice.call(arguments);t[0]="["+e._id+"] "+t[0],r.apply(null,t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer"}],[5910,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,s,a;if("string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(n===undefined||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(o(t,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5911,{"./_stream_readable":5913,"./_stream_writable":5915,_process:5500,inherits:4515},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var i=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(c,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var u=s[a];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5912,{"./_stream_transform":5914,inherits:4515},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=i;var r=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e("inherits")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5913,{"../errors":5910,"./_stream_duplex":5911,"./internal/streams/async_iterator":5916,"./internal/streams/buffer_list":5917,"./internal/streams/destroy":5918,"./internal/streams/from":5920,"./internal/streams/state":5922,"./internal/streams/stream":5923,_process:5500,buffer:2175,events:2176,inherits:4515,"string_decoder/":5986,util:2174},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;t.exports=k,k.ReadableState=S;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},o=e("./internal/streams/stream"),s=e("buffer").Buffer,a=global.Uint8Array||function(){};var u,c=e("util");u=c&&c.debuglog?c.debuglog("stream"):function(){};var l,f,h,d=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),g=e("./internal/streams/state").getHighWaterMark,m=e("../errors").codes,b=m.ERR_INVALID_ARG_TYPE,y=m.ERR_STREAM_PUSH_AFTER_EOF,_=m.ERR_METHOD_NOT_IMPLEMENTED,v=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(k,o);var w=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(t,n,i){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function k(t){if(r=r||e("./_stream_duplex"),!(this instanceof k))return new k(t);var n=this instanceof r;this._readableState=new S(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function T(e,t,n,r,i){u("readableAddChunk",t);var o,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}(e,c);else if(i||(o=function(e,t){var n;r=t,s.isBuffer(r)||r instanceof a||"string"==typeof t||t===undefined||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(c,t)),o)w(e,o);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),r)c.endEmitted?w(e,new v):x(e,c,t,!0);else if(c.ended)w(e,new y);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?x(e,c,t,!1):M(e,c)):x(e,c,t,!1)}else r||(c.reading=!1,M(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function x(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),M(e,t)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=p.destroy,k.prototype._undestroy=p.undestroy,k.prototype._destroy=function(e,t){t(e)},k.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),T(this,e,t,!1,n)},k.prototype.unshift=function(e){return T(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var n=new l(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var I=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(A,e))}function A(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function M(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function D(e){u("readable nexttick read 0"),e.read(0)}function N(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(F,t,e))}function F(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}k.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):C(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&B(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),null===(r=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==r&&this.emit("data",r),r},k.prototype._read=function(e){w(this,new _("_read()"))},k.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,u("pipe count=%d opts=%j",o.pipesCount,t);var s=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?c:m;function a(t,n){u("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",a),r.removeListener("end",c),r.removeListener("end",m),r.removeListener("data",h),f=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function c(){u("onend"),e.end()}o.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,L(e))}}(r);e.on("drain",l);var f=!1;function h(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==U(o.pipes,e))&&!f&&(u("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function d(t){u("onerror",t),m(),e.removeListener("error",d),0===i(e,"error")&&w(e,t)}function p(){e.removeListener("finish",g),m()}function g(){u("onfinish"),e.removeListener("close",p),m()}function m(){u("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",p),e.once("finish",g),e.emit("pipe",r),o.flowing||(u("pipe resume"),r.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=U(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},k.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?C(this):i.reading||n.nextTick(D,this))),r},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(P,this),r},k.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||n.nextTick(P,this),t},k.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(N,e,t))}(this,e)),e.paused=!1,this},k.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&i!==undefined)&&((n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return f===undefined&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=j,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(t,n){return h===undefined&&(h=e("./internal/streams/from")),h(k,t,n)})}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5914,{"../errors":5910,"./_stream_duplex":5911,inherits:4515},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=l;var r=e("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}e("inherits")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5915,{"../errors":5910,"./_stream_duplex":5911,"./internal/streams/destroy":5918,"./internal/streams/state":5922,"./internal/streams/stream":5923,_process:5500,buffer:2175,inherits:4515,"util-deprecate":6095},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=k,k.WritableState=S;var o={deprecate:e("util-deprecate")},s=e("./internal/streams/stream"),a=e("buffer").Buffer,u=global.Uint8Array||function(){};var c,l=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,d=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,m=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,v=h.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;function E(){}function S(t,o,s){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=o instanceof i),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(A,e,t),e._writableState.errorEmitted=!0,w(e,i)):(o(i),e._writableState.errorEmitted=!0,w(e,i),A(e,t))}(e,r,i,t,o);else{var s=R(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||I(e,r),i?n.nextTick(x,e,r,s,o):x(e,r,s,o)}}(o,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function k(t){var n=this instanceof(i=i||e("./_stream_duplex"));if(!n&&!c.call(k,this))return new k(t);this._writableState=new S(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function T(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function x(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function I(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)o[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;o.allBuffers=u,T(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,l,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var r=R(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(C,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}e("inherits")(k,s),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===k&&(e&&e._writableState instanceof S)}})):c=function(e){return e instanceof this},k.prototype.pipe=function(){w(this,new m)},k.prototype.write=function(e,t,r){var i,o=this._writableState,s=!1,c=!o.objectMode&&(i=e,a.isBuffer(i)||i instanceof u);return c&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(r=t,t=null),c?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=E),o.ending?function(e,t){var r=new _;w(e,r),n.nextTick(t,r)}(this,r):(c||function(e,t,r,i){var o;return null===r?o=new y:"string"==typeof r||t.objectMode||(o=new d("chunk",["string","Buffer"],r)),!o||(w(e,o),n.nextTick(i,o),!1)}(this,o,e,r))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var u=t.objectMode?1:r.length;t.length+=u;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,u,r,i,o);return c}(this,o,c,e,t,r)),s},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},k.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new v(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(e,t,n){n(new p("_write()"))},k.prototype._writev=null,k.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,A(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),k.prototype.destroy=l.destroy,k.prototype._undestroy=l.undestroy,k.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5916,{"./end-of-stream":5919,_process:5500},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=e("./end-of-stream"),s=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[l]=null,e[s]=null,e[a]=null,t(d(n,!1)))}}function g(e){n.nextTick(p,e)}var m=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(d(undefined,!0));if(this[h].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[u]?r(e[u]):t(d(undefined,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(d(undefined,!0)):t[f](n,r)}),r)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[f])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(d(undefined,!0))}))}))})),r),m);t.exports=function(e){var t,n=Object.create(b,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[s]=null,n[a]=null,e(d(r,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[l]=null,n[s]=null,n[a]=null,t(e)),void(n[u]=e)}var r=n[s];null!==r&&(n[l]=null,n[s]=null,n[a]=null,r(d(undefined,!0))),n[c]=!0})),e.on("readable",g.bind(null,n)),n}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5917,{buffer:2175,util:2174},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=e("buffer").Buffer,a=e("util").inspect,u=a&&a.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,s.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),c&&o(t,c),e}()}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5918,{_process:5500},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var s=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(r,s):(s._writableState.errorEmitted=!0,e.nextTick(n,s,t)):e.nextTick(n,s,t):o?(e.nextTick(r,s),o(t)):e.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5919,{"../../../errors":5910},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){a=!1,c=!0,s||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,f=!0,a||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return s&&!f?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},g=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?g():t.on("request",g)),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5920,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5921,{"../../../errors":5910,"./end-of-stream":5919},function(){with(this)return function(){"use strict";return function(e,t,n){var r;var i=e("../../../errors").codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(t,n,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;t.on("close",(function(){a=!0})),r===undefined&&(r=e("./end-of-stream")),r(t,{readable:n,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var u=!1;return function(e){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new s("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,n){var o=n<t.length-1;return u(e,o,n>0,(function(e){r||(r=e),e&&s.forEach(c),o||(s.forEach(c),i(r))}))}));return t.reduce(l)}}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5922,{"../../../errors":5910},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5923,{events:2176},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("events").EventEmitter}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5924,{"./lib/_stream_duplex.js":5911,"./lib/_stream_passthrough.js":5912,"./lib/_stream_readable.js":5913,"./lib/_stream_transform.js":5914,"./lib/_stream_writable.js":5915,"./lib/internal/streams/end-of-stream.js":5919,"./lib/internal/streams/pipeline.js":5921},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[5927,{"./manager":5928,"./socket":5930,"./url":5931,debug:5932,"socket.io-parser":5936},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./url"),i=e("socket.io-parser"),o=e("./manager"),s=e("debug")("socket.io-client");t.exports=n=u;var a=n.managers={};function u(e,t){"object"==typeof e&&(t=e,e=undefined),t=t||{};var n,i=r(e),u=i.source,c=i.id,l=i.path,f=a[c]&&l in a[c].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||f?(s("ignoring socket cache for %s",u),n=o(u,t)):(a[c]||(s("new io instance for %s",u),a[c]=o(u,t)),n=a[c]),i.query&&!t.query&&(t.query=i.query),n.socket(i.path,t)}n.protocol=i.protocol,n.connect=u,n.Manager=e("./manager"),n.Socket=e("./socket")}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client"}],[5928,{"./on":5929,"./socket":5930,backo2:2046,"component-bind":2240,"component-emitter":2241,debug:5932,"engine.io-client":2434,indexof:4514,"socket.io-parser":5936},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("engine.io-client"),i=e("./socket"),o=e("component-emitter"),s=e("socket.io-parser"),a=e("./on"),u=e("component-bind"),c=e("debug")("socket.io-client:manager"),l=e("indexof"),f=e("backo2"),h=Object.prototype.hasOwnProperty;function d(e,t){if(!(this instanceof d))return new d(e,t);e&&"object"==typeof e&&(t=e,e=undefined),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||Infinity),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||s;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}t.exports=d,d.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},d.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},d.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},o(d.prototype),d.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},d.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},d.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(e,t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=a(n,"open",(function(){i.onopen(),e&&e()})),s=a(n,"error",(function(t){if(c("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var u=this._timeout;c("connect attempt will timeout after %d",u),0===u&&o.destroy();var l=setTimeout((function(){c("connect attempt timed out after %d",u),o.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",u)}),u);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(o),this.subs.push(s),this},d.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",u(this,"ondata"))),this.subs.push(a(e,"ping",u(this,"onping"))),this.subs.push(a(e,"pong",u(this,"onpong"))),this.subs.push(a(e,"error",u(this,"onerror"))),this.subs.push(a(e,"close",u(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",u(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(e){this.decoder.add(e)},d.prototype.ondecoded=function(e){this.emit("packet",e)},d.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},d.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new i(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",o),n.on("connect",(function(){n.id=r.generateId(e)})),this.autoConnect&&o()}function o(){~l(r.connecting,n)||r.connecting.push(n)}return n},d.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},d.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},d.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},d.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client"}],[5929,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client"}],[5930,{"./on":5929,"component-bind":2240,"component-emitter":2241,debug:5932,"has-binary2":4449,parseqs:5473,"socket.io-parser":5936,"to-array":6028},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("socket.io-parser"),i=e("component-emitter"),o=e("to-array"),s=e("./on"),a=e("component-bind"),u=e("debug")("socket.io-client:socket"),c=e("parseqs"),l=e("has-binary2");t.exports=d;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=i.prototype.emit;function d(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},d.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(f.hasOwnProperty(e))return h.apply(this,arguments),this;var t=o(arguments),n={type:(this.flags.binary!==undefined?this.flags.binary:l(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?c.encode(this.query):this.query;u("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},d.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=o(arguments);u("sending ack %j",i),t.packet({type:l(i)?r.BINARY_ACK:r.ACK,id:e,data:i})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags.compress=e,this},d.prototype.binary=function(e){return this.flags.binary=e,this}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client"}],[5931,{debug:5932,parseuri:5474},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),n=r(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client"}],[5932,{"./debug":5933,_process:5500},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){function i(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(n=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=i,n.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(i())}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>debug"}],[5933,{ms:5934},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){var t;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(t||i);e.diff=o,e.prev=t,e.curr=i,t=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(t,r){if("%%"===t)return t;u++;var i=n.formatters[r];if("function"==typeof i){var o=s[u];t=i.call(e,o),s.splice(u,1),u--}return t})),n.formatArgs.call(e,s);var c=r.log||n.log||console.log.bind(console);c.apply(e,s)}}return r.namespace=e,r.enabled=n.enabled(e),r.useColors=n.useColors(),r.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return n.colors[Math.abs(r)%n.colors.length]}(e),r.destroy=i,"function"==typeof n.init&&n.init(r),n.instances.push(r),r}function i(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}(n=t.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var o=n.instances[t];o.enabled=n.enabled(o.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.instances=[],n.names=[],n.skips=[],n.formatters={}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>debug"}],[5934,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=1e3,i=60*r,o=60*i,s=24*o,a=365.25*s;function u(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}(e);if("number"===c&&!1===isNaN(e))return t.long?u(n=e,s,"day")||u(n,o,"hour")||u(n,i,"minute")||u(n,r,"second")||n+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>debug>ms"}],[5935,{"./is-buffer":5937,isarray:5940},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("isarray"),i=e("./is-buffer"),o=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);function u(e,t){if(!e)return e;if(i(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(r(e)){for(var o=new Array(e.length),s=0;s<e.length;s++)o[s]=u(e[s],t);return o}if("object"==typeof e&&!(e instanceof Date)){o={};for(var a in e)o[a]=u(e[a],t);return o}return e}function c(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(r(e))for(var n=0;n<e.length;n++)e[n]=c(e[n],t);else if("object"==typeof e)for(var i in e)e[i]=c(e[i],t);return e}n.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=u(n,t),r.attachments=t.length,{packet:r,buffers:t}},n.reconstructPacket=function(e,t){return e.data=c(e.data,t),e.attachments=undefined,e},n.removeBlobs=function(e,t){var n=0,o=e;!function e(u,c,l){if(!u)return u;if(s&&u instanceof Blob||a&&u instanceof File){n++;var f=new FileReader;f.onload=function(){l?l[c]=this.result:o=this.result,--n||t(o)},f.readAsArrayBuffer(u)}else if(r(u))for(var h=0;h<u.length;h++)e(u[h],h,u);else if("object"==typeof u&&!i(u))for(var d in u)e(u[d],d,u)}(o),n||t(o)}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser"}],[5936,{"./binary":5935,"./is-buffer":5937,"component-emitter":2241,debug:5938,isarray:5940},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("debug")("socket.io-parser"),i=e("component-emitter"),o=e("./binary"),s=e("isarray"),a=e("./is-buffer");function u(){}n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=u,n.Decoder=f;var c=n.ERROR+'"encode error"';function l(e){var t=""+e.type;if(n.BINARY_EVENT!==e.type&&n.BINARY_ACK!==e.type||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===i)return c;t+=i}return r("encoded %j as %s",e,t),t}function f(){this.reconstructor=null}function h(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:n.ERROR,data:"parser error: "+e}}u.prototype.encode=function(e,t){(r("encoding packet %j",e),n.BINARY_EVENT===e.type||n.BINARY_ACK===e.type)?function(e,t){function n(e){var n=o.deconstructPacket(e),r=l(n.packet),i=n.buffers;i.unshift(r),t(i)}o.removeBlobs(e,n)}(e,t):t([l(e)])},i(f.prototype),f.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t=0,i={type:Number(e.charAt(0))};if(null==n.types[i.type])return d("unknown packet type "+i.type);if(n.BINARY_EVENT===i.type||n.BINARY_ACK===i.type){for(var o=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var a=e.substring(o,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");i.attachments=Number(a)}if("/"===e.charAt(t+1)){for(o=t+1;++t;){if(","===(c=e.charAt(t)))break;if(t===e.length)break}i.nsp=e.substring(o,t)}else i.nsp="/";var u=e.charAt(t+1);if(""!==u&&Number(u)==u){for(o=t+1;++t;){var c;if(null==(c=e.charAt(t))||Number(c)!=c){--t;break}if(t===e.length)break}i.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!(!1!==l&&(i.type===n.ERROR||s(l))))return d("invalid payload");i.data=l}return r("decoded %s as %j",e,i),i}(e),n.BINARY_EVENT===t.type||n.BINARY_ACK===t.type?(this.reconstructor=new h(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser"}],[5937,{buffer:2175},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){t.exports=function(t){return n&&e.isBuffer(t)||r&&(t instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(t))};var n="function"==typeof e&&"function"==typeof e.isBuffer,r="function"==typeof ArrayBuffer}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser"}],[5938,{"./debug":5939,_process:5500},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){function i(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(n=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=i,n.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(i())}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser>debug"}],[5939,{ms:5941},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){var t;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(t||i);e.diff=o,e.prev=t,e.curr=i,t=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(t,r){if("%%"===t)return t;u++;var i=n.formatters[r];if("function"==typeof i){var o=s[u];t=i.call(e,o),s.splice(u,1),u--}return t})),n.formatArgs.call(e,s);var c=r.log||n.log||console.log.bind(console);c.apply(e,s)}}return r.namespace=e,r.enabled=n.enabled(e),r.useColors=n.useColors(),r.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return n.colors[Math.abs(r)%n.colors.length]}(e),r.destroy=i,"function"==typeof n.init&&n.init(r),n.instances.push(r),r}function i(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}(n=t.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var o=n.instances[t];o.enabled=n.enabled(o.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.instances=[],n.names=[],n.skips=[],n.formatters={}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser>debug"}],[5940,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser>isarray"}],[5941,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=1e3,i=60*r,o=60*i,s=24*o,a=365.25*s;function u(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}(e);if("number"===c&&!1===isNaN(e))return t.long?u(n=e,s,"day")||u(n,o,"hour")||u(n,i,"minute")||u(n,r,"second")||n+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser>debug>ms"}],[5942,{"./common":5943,_process:5500},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&(e=console).log.apply(e,arguments)},n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),e.splice(i,0,n)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){var e;try{e=n.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},n.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage=function(){try{return localStorage}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=e("./common")(n),t.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>debug"}],[5943,{ms:5290},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(t){function n(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var t;function s(){if(s.enabled){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=s,a=Number(new Date),u=a-(t||a);o.diff=u,o.prev=t,o.curr=a,t=a,n[0]=r.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,t){if("%%"===e)return e;c++;var i=r.formatters[t];if("function"==typeof i){var s=n[c];e=i.call(o,s),n.splice(c,1),c--}return e})),r.formatArgs.call(o,n);var l=o.log||r.log;l.apply(o,n)}}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=n(e),s.destroy=i,s.extend=o,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function o(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var o=r.instances[t];o.enabled=r.enabled(o.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),Object.keys(t).forEach((function(e){r[e]=t[e]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=n,r.enable(r.load()),r}}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>debug"}],[5944,{"./v1":5947,"./v4":5948},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./v1"),i=e("./v4"),o=i;o.v1=r,o.v4=i,t.exports=o}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>uuid"}],[5945,{},function(){with(this)return function(){"use strict";return function(e,t,n){for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);t.exports=function(e,t){var n=t||0,i=r;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>uuid"}],[5946,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var i=new Uint8Array(16);t.exports=function(){return r(i),i}}else{var o=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>uuid"}],[5947,{"./lib/bytesToUuid":5945,"./lib/rng":5946},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i,o=e("./lib/rng"),s=e("./lib/bytesToUuid"),a=0,u=0;t.exports=function(e,t,n){var c=t&&n||0,l=t||[],f=(e=e||{}).node||r,h=e.clockseq!==undefined?e.clockseq:i;if(null==f||null==h){var d=o();null==f&&(f=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==h&&(h=i=16383&(d[6]<<8|d[7]))}var p=e.msecs!==undefined?e.msecs:(new Date).getTime(),g=e.nsecs!==undefined?e.nsecs:u+1,m=p-a+(g-u)/1e4;if(m<0&&e.clockseq===undefined&&(h=h+1&16383),(m<0||p>a)&&e.nsecs===undefined&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,u=g,i=h;var b=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;l[c++]=b>>>24&255,l[c++]=b>>>16&255,l[c++]=b>>>8&255,l[c++]=255&b;var y=p/4294967296*1e4&268435455;l[c++]=y>>>8&255,l[c++]=255&y,l[c++]=y>>>24&15|16,l[c++]=y>>>16&255,l[c++]=h>>>8|128,l[c++]=255&h;for(var _=0;_<6;++_)l[c+_]=f[_];return t||s(l)}}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>uuid"}],[5948,{"./lib/bytesToUuid":5945,"./lib/rng":5946},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./lib/rng"),i=e("./lib/bytesToUuid");t.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>uuid"}],[5949,{buffer:2175,"data-queue":2325,debug:5942,"pull-stream":5557,uuid:5944},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("data-queue"),i=e("uuid"),o=e("pull-stream"),s=(e,t)=>"socket.io-pull-stream."+e+(t?"."+t:""),a=e("debug")("socket.io-pull-stream");function u(e,t){if(null==t)return t;try{return e(t)}catch(e){return console.error("Codec Error"),console.error(e),!1}}const c={hex:{encode:e=>e.toString("hex"),decode:e=>n.from(e,"hex")},plain:{encode:e=>e,decode:e=>e},buffer:{encode:e=>n.from(e),decode:e=>n.from(e)}};function l(e){if(e||(e="plain"),"object"==typeof e)return e;const t=c[e];if(!t)throw new Error("Invalid codec "+e);return t}t.exports=function(e,t){e.createSink||(e.sioplog=e.id?a.bind(a,"["+e.id+"]"):a,e.createSink=(n,o)=>{n||(n=i());const a=function(e,t,n){const i=r(),o=e.sioplog.bind(e.sioplog,"  sink("+t+")"),a=l(n.codec).encode;let c;function f(e){i.append({err:e}),c=e}return o("create sink"),e.once(s("accept",t),(()=>{o("start transmission"),function n(){i.get(((r,c)=>{let{data:l,err:f}=c||{};if(r&&(f=r),o("send",f&&!0===f?"finish":f?"error":l?"data":"<invalid>"),f&&!r&&i.error(f),f)return e.emit(s("error",t),f);l&&e.emit(s("queue",t),u(a,l)),n()}))}()})),e.once("disconnect",(()=>f(!0))),function(e){e(null,(function t(n,r){return n?f(n):c?e(c,t):(i.append({data:r}),void e(null,t))}))}}(e,n,t||o);return a.id=n,a},e.createSource=(n,i)=>{const o=function(e,t,n){const i=r(),o=e.sioplog.bind(e.sioplog,"source("+t+")"),a=l(n.codec).decode;function c(){e.removeAllListeners(s("error",t)),e.removeAllListeners(s("queue",t))}return o("create source"),e.emit(s("accept",t)),e.on(s("error",t),(e=>{o(!0===e?"finish":"error"),c(),i.append({end:e})})),e.on(s("queue",t),(e=>{o("queue data"),i.append({data:u(a,e)})})),e.once("disconnect",(()=>{c(),i.append({end:!0})})),function(e,t){if(o("reading"),e)return t(e);i.get(((e,n)=>e?t(e):n.end?(i.error(n.end),t(n.end)):t(null,n.data)))}}(e,n,t||i);return o.id=n,o},e.createProxy=(t,n,r)=>{o(e.createSource(t,r),n.createSink(t,r))})}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream"}],[5950,{"is-plain-obj":4811},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("is-plain-obj");t.exports=(e,t)=>{if(!r(e))throw new TypeError("Expected a plain object");if("function"==typeof(t=t||{}))throw new TypeError("Specify the compare function as an option instead");const n=t.deep,i=[],o=[],s=e=>{const a=i.indexOf(e);if(-1!==a)return o[a];const u={},c=Object.keys(e).sort(t.compare);i.push(e),o.push(u);for(let t=0;t<c.length;t++){const i=c[t],o=e[i];if(n&&Array.isArray(o)){const e=[];for(let t=0;t<o.length;t++)e[t]=r(o[t])?s(o[t]):o[t];u[i]=e}else u[i]=n&&r(o)?s(o):o}return u};return s(e)}}}},{package:"3box>ipfs>ipfs-repo>sort-keys"}],[5951,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){return e+i(t)}function i(e){let t=e;return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}function o(e,t){return e[0]-t[0]}function s(e){return e[1]}t.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let n=this._internalPositionFor(e,!1);if(t===undefined)-1!==n&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let r=!1;-1===n?(n=this._data.length,this._setBit(e),this._changedData=!0):r=!0,this._setInternalPos(n,e,t,r),this._changedLength=!0}}unset(e){this.set(e,undefined)}get(e){this._sortData();const t=this._internalPositionFor(e,!0);return-1===t?undefined:this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,n=new Array(this.length);for(;t<this.length;)n[t]=e(this.get(t),t,this),t++;return n}reduce(e,t){let n=0,r=t;for(;n<this.length;){r=e(r,this.get(n),n),n++}return r}find(e){let t,n,r=0;for(;r<this.length&&!t;)n=this.get(r),t=e(n),r++;return t?n:undefined}_internalPositionFor(e,t){const n=this._bytePosFor(e,t);if(n>=this._bitArrays.length)return-1;const o=this._bitArrays[n],s=e-7*n;if(!((o&1<<s)>0))return-1;return this._bitArrays.slice(0,n).reduce(r,0)+i(o&~(4294967295<<s+1))-1}_bytePosFor(e,t){const n=Math.floor(e/7),r=n+1;for(;!t&&this._bitArrays.length<r;)this._bitArrays.push(0);return n}_setBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-7*t}_unsetBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-7*t)}_setInternalPos(e,t,n,r){const i=this._data,o=[t,n];if(r)this._sortData(),i[e]=o;else{if(i.length)if(i[i.length-1][0]>=t)i.push(o);else if(i[0][0]<=t)i.unshift(o);else{const e=Math.round(i.length/2);this._data=i.slice(0,e).concat(o).concat(i.slice(e))}else this._data.push(o);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(o),this._changedData=!1}bitField(){const e=[];let t,n=8,r=0,i=0;const o=this._bitArrays.slice();for(;o.length||r;){0===r&&(t=o.shift(),r=7);const s=Math.min(r,n);i|=(t&~(255<<s))<<8-n,t>>>=s,r-=s,n-=s,n&&(r||o.length)||(e.push(i),i=0,n=8)}for(var s=e.length-1;s>0;s--){if(0!==e[s])break;e.pop()}return e}compactArray(){return this._sortData(),this._data.map(s)}}}}},{package:"3box>ipfs>ipfs-mfs>hamt-sharding>sparse-array"}],[5952,{},function(){with(this)return function(){"use strict";return function(e,t,n){
//! stable.js 0.1.8, https://github.com/Two-Screen/stable
//!  2018 Angry Bytes and contributors. MIT licensed.
!function(e,r){"object"==typeof n&&void 0!==t?t.exports=r():"function"==typeof define&&define.amd?define(r):e.stable=r()}(this,(function(){var e=function(e,n){return t(e.slice(),n)};function t(e,t){"function"!=typeof t&&(t=function(e,t){return String(e).localeCompare(t)});var r=e.length;if(r<=1)return e;for(var i=new Array(r),o=1;o<r;o*=2){n(e,t,o,i);var s=e;e=i,i=s}return e}e.inplace=function(e,r){var i=t(e,r);return i!==e&&n(i,null,e.length,e),e};var n=function(e,t,n,r){var i,o,s,a,u,c=e.length,l=0,f=2*n;for(i=0;i<c;i+=f)for(s=(o=i+n)+n,o>c&&(o=c),s>c&&(s=c),a=i,u=o;;)if(a<o&&u<s)t(e[a],e[u])<=0?r[l++]=e[a++]:r[l++]=e[u++];else if(a<o)r[l++]=e[a++];else{if(!(u<s))break;r[l++]=e[u++]}};return e}))}}},{package:"@storybook/client-api>stable"}],[5953,{"../plugins/json2":5954,"../src/store-engine":5956,"../storages/all":5958},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../src/store-engine"),i=e("../storages/all"),o=[e("../plugins/json2")];t.exports=r.createStore(i,o)}}},{package:"3box>store"}],[5954,{"./lib/json2":5955},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){return e("./lib/json2"),{}}}}},{package:"3box>store"}],[5955,{},function(){with(this)return function(){"use strict";return function(e,t,n){"object"!=typeof JSON&&(JSON={}),function(){var e,t,n,r,i=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,s=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,a=/(?:^|:|,)(?:\s*\[)+/g,u=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function l(e){return e<10?"0"+e:e}function f(){return this.valueOf()}function h(e){return u.lastIndex=0,u.test(e)?'"'+e.replace(u,(function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function d(n,i){var o,s,a,u,c,l=e,f=i[n];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(n)),"function"==typeof r&&(f=r.call(i,n,f)),typeof f){case"string":return h(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(e+=t,c=[],"[object Array]"===Object.prototype.toString.apply(f)){for(u=f.length,o=0;o<u;o+=1)c[o]=d(o,f)||"null";return a=0===c.length?"[]":e?"[\n"+e+c.join(",\n"+e)+"\n"+l+"]":"["+c.join(",")+"]",e=l,a}if(r&&"object"==typeof r)for(u=r.length,o=0;o<u;o+=1)"string"==typeof r[o]&&(a=d(s=r[o],f))&&c.push(h(s)+(e?": ":":")+a);else for(s in f)Object.prototype.hasOwnProperty.call(f,s)&&(a=d(s,f))&&c.push(h(s)+(e?": ":":")+a);return a=0===c.length?"{}":e?"{\n"+e+c.join(",\n"+e)+"\n"+l+"}":"{"+c.join(",")+"}",e=l,a}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+l(this.getUTCMonth()+1)+"-"+l(this.getUTCDate())+"T"+l(this.getUTCHours())+":"+l(this.getUTCMinutes())+":"+l(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=f,Number.prototype.toJSON=f,String.prototype.toJSON=f),"function"!=typeof JSON.stringify&&(n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(n,i,o){var s;if(e="",t="","number"==typeof o)for(s=0;s<o;s+=1)t+=" ";else"string"==typeof o&&(t=o);if(r=i,i&&"function"!=typeof i&&("object"!=typeof i||"number"!=typeof i.length))throw new Error("JSON.stringify");return d("",{"":n})}),"function"!=typeof JSON.parse&&(JSON.parse=function(e,t){var n;if(e=String(e),c.lastIndex=0,c.test(e)&&(e=e.replace(c,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),i.test(e.replace(o,"@").replace(s,"]").replace(a,"")))return n=(0,eval)("("+e+")"),"function"==typeof t?function e(n,r){var i,o,s=n[r];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&((o=e(s,i))!==undefined?s[i]=o:delete s[i]);return t.call(n,r,s)}({"":n},""):n;throw new SyntaxError("JSON.parse")})}()}}},{package:"3box>store"}],[5956,{"./util":5957},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./util"),i=r.slice,o=r.pluck,s=r.each,a=r.bind,u=r.create,c=r.isList,l=r.isFunction,f=r.isObject;t.exports={createStore:d};var h={version:"2.0.12",enabled:!1,get:function(e,t){var n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return t===undefined?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each((function(n,r){e.call(t,t._deserialize(n),(r||"").replace(t._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return d.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return d(this.storage,this.plugins,e)}};function d(e,t,n){n||(n=""),e&&!c(e)&&(e=[e]),t&&!c(t)&&(t=[t]);var r=n?"__storejs_"+n+"_":"",d=n?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var p={_namespacePrefix:r,_namespaceRegexp:d,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var n=e.read(t)===t;return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(e,t){var n=this[t];this[t]=function(){var t=i(arguments,0),r=this;function o(){if(n)return s(arguments,(function(e,n){t[n]=e})),n.apply(r,t)}var a=[o].concat(t);return e.apply(r,a)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var n="";try{n=JSON.parse(e)}catch(t){n=e}return n!==undefined?n:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(c(e))s(e,(function(e){t._addPlugin(e)}));else if(!o(this.plugins,(function(t){return e===t}))){if(this.plugins.push(e),!l(e))throw new Error("Plugins must be function values that return objects");var n=e.call(this);if(!f(n))throw new Error("Plugins must return an object of function properties");s(n,(function(n,r){if(!l(n))throw new Error("Bad plugin property: "+r+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(n,r)}))}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;if(e){(e.warn?e.warn:e.log).apply(e,arguments)}}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},g=u(p,h,{plugins:[]});return g.raw={},s(g,(function(e,t){l(e)&&(g.raw[t]=a(g,e))})),s(e,(function(e){g._addStorage(e)})),s(t,(function(e){g._addPlugin(e)})),g}}}},{package:"3box>store"}],[5957,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=Object.assign?Object.assign:function(e,t,n,r){for(var i=1;i<arguments.length;i++)u(Object(arguments[i]),(function(t,n){e[n]=t}));return e},i=function(){if(Object.create)return function(e,t,n,i){var o=a(arguments,1);return r.apply(this,[Object.create(e)].concat(o))};{function e(){}return function(t,n,i,o){var s=a(arguments,1);return e.prototype=t,r.apply(this,[new e].concat(s))}}}(),o=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},s="undefined"!=typeof window?window:global;function a(e,t){return Array.prototype.slice.call(e,t||0)}function u(e,t){c(e,(function(e,n){return t(e,n),!1}))}function c(e,t){if(l(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function l(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}t.exports={assign:r,create:i,trim:o,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:a,each:u,map:function(e,t){var n=l(e)?[]:{};return c(e,(function(e,r){return n[r]=t(e,r),!1})),n},pluck:c,isList:l,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:s}}}},{package:"3box>store"}],[5958,{"./cookieStorage":5959,"./localStorage":5960,"./memoryStorage":5961,"./oldFF-globalStorage":5962,"./oldIE-userDataStorage":5963,"./sessionStorage":5964},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=[e("./localStorage"),e("./oldFF-globalStorage"),e("./oldIE-userDataStorage"),e("./cookieStorage"),e("./sessionStorage"),e("./memoryStorage")]}}},{package:"3box>store"}],[5959,{"../src/util":5957},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../src/util"),i=r.Global,o=r.trim;t.exports={name:"cookieStorage",read:function(e){if(!e||!c(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(s.cookie.replace(new RegExp(t),"$1"))},write:function(e,t){if(!e)return;s.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},each:a,remove:u,clearAll:function(){a((function(e,t){u(t)}))}};var s=i.document;function a(e){for(var t=s.cookie.split(/; ?/g),n=t.length-1;n>=0;n--)if(o(t[n])){var r=t[n].split("="),i=unescape(r[0]);e(unescape(r[1]),i)}}function u(e){e&&c(e)&&(s.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function c(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(s.cookie)}}}},{package:"3box>store"}],[5960,{"../src/util":5957},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../src/util").Global;function i(){return r.localStorage}function o(e){return i().getItem(e)}t.exports={name:"localStorage",read:o,write:function(e,t){return i().setItem(e,t)},each:function(e){for(var t=i().length-1;t>=0;t--){var n=i().key(t);e(o(n),n)}},remove:function(e){return i().removeItem(e)},clearAll:function(){return i().clear()}}}}},{package:"3box>store"}],[5961,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={name:"memoryStorage",read:function(e){return r[e]},write:function(e,t){r[e]=t},each:function(e){for(var t in r)r.hasOwnProperty(t)&&e(r[t],t)},remove:function(e){delete r[e]},clearAll:function(e){r={}}};var r={}}}},{package:"3box>store"}],[5962,{"../src/util":5957},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../src/util").Global;t.exports={name:"oldFF-globalStorage",read:function(e){return i[e]},write:function(e,t){i[e]=t},each:o,remove:function(e){return i.removeItem(e)},clearAll:function(){o((function(e,t){delete i[e]}))}};var i=r.globalStorage;function o(e){for(var t=i.length-1;t>=0;t--){var n=i.key(t);e(i[n],n)}}}}},{package:"3box>store"}],[5963,{"../src/util":5957},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../src/util").Global;t.exports={name:"oldIE-userDataStorage",write:function(e,t){if(a)return;var n=c(e);s((function(e){e.setAttribute(n,t),e.save(i)}))},read:function(e){if(a)return;var t=c(e),n=null;return s((function(e){n=e.getAttribute(t)})),n},each:function(e){s((function(t){for(var n=t.XMLDocument.documentElement.attributes,r=n.length-1;r>=0;r--){var i=n[r];e(t.getAttribute(i.name),i.name)}}))},remove:function(e){var t=c(e);s((function(e){e.removeAttribute(t),e.save(i)}))},clearAll:function(){s((function(e){var t=e.XMLDocument.documentElement.attributes;e.load(i);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(i)}))}};var i="storejs",o=r.document,s=function(){if(!o||!o.documentElement||!o.documentElement.addBehavior)return null;var e,t,n,r="script";try{(t=new ActiveXObject("htmlfile")).open(),t.write("<"+r+">document.w=window</"+r+'><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,n=e.createElement("div")}catch(t){n=o.createElement("div"),e=o.body}return function(t){var r=[].slice.call(arguments,0);r.unshift(n),e.appendChild(n),n.addBehavior("#default#userData"),n.load(i),t.apply(this,r),e.removeChild(n)}}(),a=(r.navigator?r.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./);var u=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function c(e){return e.replace(/^\d/,"___$&").replace(u,"___")}}}},{package:"3box>store"}],[5964,{"../src/util":5957},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../src/util").Global;function i(){return r.sessionStorage}function o(e){return i().getItem(e)}t.exports={name:"sessionStorage",read:o,write:function(e,t){return i().setItem(e,t)},each:function(e){for(var t=i().length-1;t>=0;t--){var n=i().key(t);e(o(n),n)}},remove:function(e){return i().removeItem(e)},clearAll:function(){return i().clear()}}}}},{package:"3box>store"}],[5984,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){var t=e._readableState;return t?t.objectMode?e.read():e.read(function(e){if(e.buffer.length)return e.buffer.head?e.buffer.head.data.length:e.buffer[0].length;return e.length}(t)):null}}}},{package:"duplexify>stream-shift"}],[5985,{_process:5500,looper:5270,"pull-stream/pull":5558},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){e("pull-stream/pull");var i=e("looper");function o(e){e.destroy?e.destroy():console.error("warning, stream-to-pull-stream: \n"+"the wrapped node-stream does not implement `destroy`, \n"+"this may cause resource leaks.")}function s(e,t,n){var s,a,u=!1;function c(){a||(a=!0,n&&n(!0===s?null:s))}function l(){u||(u=!0,h(),s?c():e(s=!0,c))}function f(t){h(),s||e(s=t,c)}function h(){t.on("finish",l),t.removeListener("close",l),t.removeListener("error",f)}t.on("close",l),t.on("finish",l),t.on("error",f),r.nextTick((function(){i((function(n){e(null,(function(e,r){if(s=s||e,!0===e)return t._isStdio?c():t.end();if(s=s||e)return o(t),c();t._isStdio?t.write(r,(function(){n()})):!1===t.write(r)?t.once("drain",n):n()}))}))}))}function a(e){var t,n=[],r=[],i=!1;function s(){for(;(n.length||t)&&r.length;)r.shift()(n.length?null:t,n.shift());!n.length&&i&&(i=!1,e.resume())}return e.on("data",(function(t){n.push(t),s(),n.length&&e.pause&&(i=!0,e.pause())})),e.on("end",(function(){t=!0,s()})),e.on("close",(function(){t=!0,s()})),e.on("error",(function(e){t=e,s()})),function(n,i){if(!i)throw new Error("*must* provide cb");if(n){function s(){for(;r.length;)r.shift()(n);i(n)}if(t)return s();e.once("close",s),o(e)}else r.push(i),s()}}var u=a,c=function(e,t){return function(n){return s(n,e,t)}},l=function(e){return a(e)};(n=t.exports=function(e,t){return e.writable&&e.write?e.readable?function(n){return s(n,e,t),a(e)}:c(e,t):l(e)}).sink=c,n.source=l,n.read=u,n.read1=a,n.read2=function(e){var t,n=!1,r=!1;function i(){var n=e.read();if(null!==n&&t){var r=t;t=null,r(null,n)}}return e.on("readable",(function(){r=!0,t&&i()})).on("end",(function(){n=!0,t&&t(n)})).on("error",(function(e){n=e,t&&t(n)})),function(e,o){t=o,n?o(n):r&&i()}},n.duplex=function(e,t){return{source:l(e),sink:c(e,t)}},n.transform=function(e){return function(t){var n=l(e);return c(e)(t),n}}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>stream-to-pull-stream"}],[5988,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){r.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),r.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},t.exports=r}}},{package:"pubnub>superagent"}],[5989,{"./agent-base":5988,"./is-object":5990,"./request-base":5991,"./response-base":5992,"component-emitter":2241},function(){with(this)return function(){"use strict";return function(e,t,n){var r;"undefined"!=typeof window?r=window:"undefined"!=typeof self?r=self:(console.warn("Using browser-only version of superagent in non-browser environment"),r=this);var i=e("component-emitter"),o=e("./request-base"),s=e("./is-object"),a=e("./response-base"),u=e("./agent-base");function c(){}var l=n=t.exports=function(e,t){return"function"==typeof t?new n.Request("GET",e).end(t):1==arguments.length?new n.Request("GET",e):new n.Request(e,t)};n.Request=b,l.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&"file:"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var f="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function h(e){if(!s(e))return e;var t=[];for(var n in e)d(t,n,e[n]);return t.join("&")}function d(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach((function(n){d(e,t,n)}));else if(s(n))for(var r in n)d(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function p(e){for(var t,n,r={},i=e.split("&"),o=0,s=i.length;o<s;++o)-1==(n=(t=i[o]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function g(e){return/[\/+]json($|[^-\w])/.test(e)}function m(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,i,o=e.split(/\r?\n/),s={},a=0,u=o.length;a<u;++a)-1!==(t=(n=o[a]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),i=f(n.slice(t+1)),s[r]=i);return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function b(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,r=null;try{r=new m(n)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)}))}function y(e,t,n){var r=l("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}l.serializeObject=h,l.parseString=p,l.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},l.serialize={"application/x-www-form-urlencoded":h,"application/json":JSON.stringify},l.parse={"application/x-www-form-urlencoded":p,"application/json":JSON.parse},a(m.prototype),m.prototype._parseBody=function(e){var t=l.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&g(this.type)&&(t=l.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},m.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},l.Response=m,i(b.prototype),o(b.prototype),b.prototype.type=function(e){return this.set("Content-Type",l.types[e]||e),this},b.prototype.accept=function(e){return this.set("Accept",l.types[e]||e),this},b.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});var r=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,n,r)},b.prototype.query=function(e){return"string"!=typeof e&&(e=h(e)),e&&this._query.push(e),this},b.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},b.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},b.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},b.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},b.prototype.buffer=b.prototype.ca=b.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},b.prototype.pipe=b.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},b.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},b.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||c,this._finalizeQueryString(),this._end()},b.prototype._end=function(){var e=this,t=this.xhr=l.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],o=this._serializer||l.serialize[i?i.split(";")[0]:""];!o&&g(i)&&(o=l.serialize["application/json"]),o&&(n=o(n))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&t.setRequestHeader(s,this.header[s]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},l.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){u.prototype[e.toLowerCase()]=function(t,n){var r=new l.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}})),u.prototype.del=u.prototype.delete,l.get=function(e,t,n){var r=l("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},l.head=function(e,t,n){var r=l("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},l.options=function(e,t,n){var r=l("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.del=y,l.delete=y,l.patch=function(e,t,n){var r=l("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.post=function(e,t,n){var r=l("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.put=function(e,t,n){var r=l("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}}}},{package:"pubnub>superagent"}],[5990,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){return null!==e&&"object"==typeof e}}}},{package:"pubnub>superagent"}],[5991,{"./is-object":5990},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./is-object");function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}t.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},i.prototype.parse=function(e){return this._parser=e,this},i.prototype.responseType=function(e){return this._responseType=e,this},i.prototype.serialize=function(e){return this._serializer=e,this},i.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},i.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var o=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];i.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~o.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},i.prototype.catch=function(e){return this.then(undefined,e)},i.prototype.use=function(e){return e(this),this},i.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},i.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},i.prototype.get=function(e){return this._header[e.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},i.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},i.prototype.field=function(e,t){if(null===e||undefined===e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var i in t)this.field(e,t[i]);return this}if(null===t||undefined===t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},i.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},i.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},i.prototype.withCredentials=function(e){return e==undefined&&(e=!0),this._withCredentials=e,this},i.prototype.redirects=function(e){return this._maxRedirects=e,this},i.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||n||this.type("json"),this},i.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},i.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},i.prototype._appendQueryString=function(){console.trace("Unsupported")},i.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},i.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}}}},{package:"pubnub>superagent"}],[5992,{"./utils":5993},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./utils");function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}t.exports=i,i.prototype.get=function(e){return this.header[e.toLowerCase()]},i.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var i in n)this[i]=n[i];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},i.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}}}},{package:"pubnub>superagent"}],[5993,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.type=function(e){return e.split(/ *; */).shift()},n.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e}),{})},n.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},n.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}}}},{package:"pubnub>superagent"}],[5994,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});class r extends TypeError{static format(e){const{type:t,path:n,value:r}=e;return`Expected a value of type \`${t}\`${n.length?` for \`${n.join(".")}\``:""} but received \`${JSON.stringify(r)}\`.`}constructor(e){super(r.format(e));const{data:t,path:n,value:i,reason:o,type:s,errors:a=[]}=e;this.data=t,this.path=n,this.value=i,this.reason=o,this.type=s,this.errors=a,a.length||a.push(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack}}var i=Object.prototype.toString,o=function(e){if(void 0===e)return"undefined";if(null===e)return"null";var t,n=typeof e;if("boolean"===n)return"boolean";if("string"===n)return"string";if("number"===n)return"number";if("symbol"===n)return"symbol";if("function"===n)return t=e,"GeneratorFunction"===s(t)?"generatorfunction":"function";if(function(e){return Array.isArray?Array.isArray(e):e instanceof Array}(e))return"array";if(function(e){if(e.constructor&&"function"==typeof e.constructor.isBuffer)return e.constructor.isBuffer(e);return!1}(e))return"buffer";if(function(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(e){if(-1!==e.message.indexOf("callee"))return!0}return!1}(e))return"arguments";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(e))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(e))return"error";if(function(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}(e))return"regexp";switch(s(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}(e))return"generator";switch(n=i.call(e)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return n.slice(8,-1).toLowerCase().replace(/\s/g,"")};function s(e){return e.constructor?e.constructor.name:null}const a="@@__STRUCT__@@",u="@@__KIND__@@";function c(e){return!(!e||!e[a])}function l(e,t){return"function"==typeof e?e(t):e}var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};class h{constructor(e,t,n){this.name=e,this.type=t,this.validate=n}}function d(e,t,n){if(c(e))return e[u];if(e instanceof h)return e;switch(o(e)){case"array":return e.length>1?v(e,t,n):m(e,t,n);case"function":return g(e,t,n);case"object":return b(e,t,n);case"string":{let r,i=!0;if(e.endsWith("?")&&(i=!1,e=e.slice(0,-1)),e.includes("|")){r=w(e.split(/\s*\|\s*/g),t,n)}else if(e.includes("&")){r=E(e.split(/\s*&\s*/g),t,n)}else r=_(e,t,n);return i||(r=y(r,undefined,n)),r}}throw new Error(`Invalid schema: ${e}`)}function p(e,t,n){if("array"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=e.map((e=>{try{return JSON.stringify(e)}catch(t){return String(e)}})).join(" | ");return new h("enum",r,((n=l(t))=>e.includes(n)?[undefined,n]:[{data:n,path:[],value:n,type:r}]))}function g(e,t,n){if("function"!==o(e))throw new Error(`Invalid schema: ${e}`);const r="<function>";return new h("function",r,((n=l(t),i)=>{const s=e(n,i);let a,u={path:[],reason:null};switch(o(s)){case"boolean":a=s;break;case"string":a=!1,u.reason=s;break;case"object":a=!1,u=f({},u,s);break;default:throw new Error(`Invalid result: ${s}`)}return a?[undefined,n]:[f({type:r,value:n,data:n},u)]}))}function m(e,t,n){if("array"!==o(e)||1!==e.length)throw new Error(`Invalid schema: ${e}`);const r=_("array",undefined,n),i=d(e[0],undefined,n),s=`[${i.type}]`;return new h("list",s,((e=l(t))=>{const[n,o]=r.validate(e);if(n)return n.type=s,[n];e=o;const a=[],u=[];for(let t=0;t<e.length;t++){const n=e[t],[r,o]=i.validate(n);if(r){(r.errors||[r]).forEach((n=>{n.path=[t].concat(n.path),n.data=e,a.push(n)}))}else u[t]=o}if(a.length){const e=a[0];return e.errors=a,[e]}return[undefined,u]}))}function b(e,t,n){if("object"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=_("object",undefined,n),i=[],s={};for(const t in e){i.push(t);const r=d(e[t],undefined,n);s[t]=r}const a=`{${i.join()}}`;return new h("object",a,((e=l(t))=>{const[n]=r.validate(e);if(n)return n.type=a,[n];const i=[],o={},u=Object.keys(e),c=Object.keys(s);if(new Set(u.concat(c)).forEach((n=>{let r=e[n];const a=s[n];if(r===undefined){r=l(t&&t[n],e)}if(!a){const t={data:e,path:[n],value:r};return void i.push(t)}const[u,c]=a.validate(r,e);if(u){(u.errors||[u]).forEach((t=>{t.path=[n].concat(t.path),t.data=e,i.push(t)}))}else(n in e||c!==undefined)&&(o[n]=c)})),i.length){const e=i[0];return e.errors=i,[e]}return[undefined,o]}))}function y(e,t,n){return w([e,"undefined"],t,n)}function _(e,t,n){if("string"!==o(e))throw new Error(`Invalid schema: ${e}`);const{types:r}=n,i=r[e];if("function"!==o(i))throw new Error(`Invalid type: ${e}`);const s=g(i,t),a=e;return new h("scalar",a,(e=>{const[t,n]=s.validate(e);return t?(t.type=a,[t]):[undefined,n]}))}function v(e,t,n){if("array"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=e.map((e=>d(e,undefined,n))),i=_("array",undefined,n),s=`[${r.map((e=>e.type)).join()}]`;return new h("tuple",s,((e=l(t))=>{const[n]=i.validate(e);if(n)return n.type=s,[n];const o=[],a=[],u=Math.max(e.length,r.length);for(let t=0;t<u;t++){const n=r[t],i=e[t];if(!n){const n={data:e,path:[t],value:i};a.push(n);continue}const[s,u]=n.validate(i);if(s){(s.errors||[s]).forEach((n=>{n.path=[t].concat(n.path),n.data=e,a.push(n)}))}else o[t]=u}if(a.length){const e=a[0];return e.errors=a,[e]}return[undefined,o]}))}function w(e,t,n){if("array"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=e.map((e=>d(e,undefined,n))),i=r.map((e=>e.type)).join(" | ");return new h("union",i,((e=l(t))=>{const n=[];for(const t of r){const[r,i]=t.validate(e);if(!r)return[undefined,i];n.push(r)}return n[0].type=i,n}))}function E(e,t,n){if("array"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=e.map((e=>d(e,undefined,n))),i=r.map((e=>e.type)).join(" & ");return new h("intersection",i,((e=l(t))=>{let n=e;for(const e of r){const[t,r]=e.validate(n);if(t)return t.type=i,[t];n=r}return[undefined,n]}))}const S={any:d,dict:function(e,t,n){if("array"!==o(e)||2!==e.length)throw new Error(`Invalid schema: ${e}`);const r=_("object",undefined,n),i=d(e[0],undefined,n),s=d(e[1],undefined,n),a=`dict<${i.type},${s.type}>`;return new h("dict",a,(e=>{const n=l(t);e=n?f({},n,e):e;const[o]=r.validate(e);if(o)return o.type=a,[o];const u={},c=[];for(let t in e){const n=e[t],[r,o]=i.validate(t);if(r){(r.errors||[r]).forEach((n=>{n.path=[t].concat(n.path),n.data=e,c.push(n)}));continue}t=o;const[a,l]=s.validate(n);if(a){(a.errors||[a]).forEach((n=>{n.path=[t].concat(n.path),n.data=e,c.push(n)}))}else u[t]=l}if(c.length){const e=c[0];return e.errors=c,[e]}return[undefined,u]}))},enum:p,enums:function(e,t,n){return m([p(e,undefined)],t,n)},function:g,instance:function(e,t,n){const r=`instance<${e.name}>`;return new h("instance",r,((n=l(t))=>n instanceof e?[undefined,n]:[{data:n,path:[],value:n,type:r}]))},interface:function(e,t,n){if("object"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=[],i={};for(const t in e){r.push(t);const o=d(e[t],undefined,n);i[t]=o}const s=`{${r.join()}}`;return new h("interface",s,(e=>{const n=l(t);e=n?f({},n,e):e;const r=[],o=e;for(const n in i){let s=e[n];const a=i[n];if(s===undefined){s=l(t&&t[n],e)}const[u,c]=a.validate(s,e);if(u){(u.errors||[u]).forEach((t=>{t.path=[n].concat(t.path),t.data=e,r.push(t)}))}else(n in e||c!==undefined)&&(o[n]=c)}if(r.length){const e=r[0];return e.errors=r,[e]}return[undefined,o]}))},lazy:function(e,t,n){if("function"!==o(e))throw new Error(`Invalid schema: ${e}`);let r,i;return r=new h("lazy","lazy...",(t=>(i=e(),r.name=i.kind,r.type=i.type,r.validate=i.validate,r.validate(t)))),r},list:m,literal:function(e,t,n){const r=`literal: ${JSON.stringify(e)}`;return new h("literal",r,((n=l(t))=>n===e?[undefined,n]:[{data:n,path:[],value:n,type:r}]))},object:b,optional:y,partial:function(e,t,n){if("object"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=_("object",undefined,n),i=[],s={};for(const t in e){i.push(t);const r=d(e[t],undefined,n);s[t]=r}const a=`{${i.join()},...}`;return new h("partial",a,((e=l(t))=>{const[n]=r.validate(e);if(n)return n.type=a,[n];const i=[],o={};for(const n in s){let r=e[n];const a=s[n];if(r===undefined){r=l(t&&t[n],e)}const[u,c]=a.validate(r,e);if(u){(u.errors||[u]).forEach((t=>{t.path=[n].concat(t.path),t.data=e,i.push(t)}))}else(n in e||c!==undefined)&&(o[n]=c)}if(i.length){const e=i[0];return e.errors=i,[e]}return[undefined,o]}))},scalar:_,tuple:v,union:w,intersection:E,dynamic:function(e,t,n){if("function"!==o(e))throw new Error(`Invalid schema: ${e}`);return new h("dynamic","dynamic...",((n=l(t),r)=>{const i=e(n,r);if("function"!==o(i))throw new Error(`Invalid schema: ${i}`);const[s,a]=i.validate(n);return s?[s]:[undefined,a]}))}},k={any:e=>e!==undefined};function T(e={}){const t=f({},k,e.types||{});function n(e,n,i={}){c(e)&&(e=e.schema);const o=S.any(e,n,f({},i,{types:t}));function s(e){if(this instanceof s)throw new Error("Invalid `new` keyword!");return s.assert(e)}return Object.defineProperty(s,a,{value:!0}),Object.defineProperty(s,u,{value:o}),s.kind=o.name,s.type=o.type,s.schema=e,s.defaults=n,s.options=i,s.assert=e=>{const[t,n]=o.validate(e);if(t)throw new r(t);return n},s.test=e=>{const[t]=o.validate(e);return!t},s.validate=e=>{const[t,n]=o.validate(e);return t?[new r(t)]:[undefined,n]},s}return Object.keys(S).forEach((e=>{const r=S[e];n[e]=(e,i,o)=>n(r(e,i,f({},o,{types:t})),i,o)})),n}["arguments","array","boolean","buffer","error","float32array","float64array","function","generatorfunction","int16array","int32array","int8array","map","null","number","object","promise","regexp","set","string","symbol","uint16array","uint32array","uint8array","uint8clampedarray","undefined","weakmap","weakset"].forEach((e=>{k[e]=t=>o(t)===e})),k.date=e=>"date"===o(e)&&!isNaN(e);const x=T();n.struct=x,n.superstruct=T,n.isStruct=c,n.StructError=r}}},{package:"3box>ipfs>superstruct"}],[5996,{},function(){with(this)return function(){"use strict";return function(e,t,n){const r=()=>!0,i=["newListener","removeListener"],o=e=>!i.includes(e);t.exports=function(e,t){let n=(t=t||{}).eventFilter||r;if("skipInternal"===n&&(n=o),"function"!=typeof n)throw new Error("createEventEmitterProxy - Invalid eventFilter");let i=e;return new Proxy({},{get:(e,t)=>"setTarget"===t?s:i[t],set:(e,t,n)=>"setTarget"===t?(s=n,!0):(i[t]=n,!0)});function s(e){const t=i;i=e,t.eventNames().filter(n).forEach((n=>{(function(e,t){if(e.rawListeners)return e.rawListeners(t);let n=e._events[t]||[];Array.isArray(n)||(n=[n]);return n.slice()})(t,n).forEach((t=>e.on(n,t)))})),t.removeAllListeners()}}}}},{package:"swappable-obj-proxy"}],[5997,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){let t=e;return new Proxy({},{get:(e,r)=>"setTarget"===r?n:t[r],set:(e,r,i)=>"setTarget"===r?(n=i,!0):(t[r]=i,!0)});function n(e){t=e}}}}},{package:"swappable-obj-proxy"}],[5998,{"./createEventEmitterProxy":5996,"./createSwappableProxy":5997},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./createSwappableProxy"),i=e("./createEventEmitterProxy");t.exports={createSwappableProxy:r,createEventEmitterProxy:i}}}},{package:"swappable-obj-proxy"}],[5999,{"./headers":6e3,bl:6003,"readable-stream":6018,util:2181},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("util"),i=e("bl"),o=e("./headers"),s=e("readable-stream").Writable,a=e("readable-stream").PassThrough,u=function(){},c=function(e){return(e&=511)&&512-e},l=function(e,t){this._parent=e,this.offset=t,a.call(this,{autoDestroy:!1})};r.inherits(l,a),l.prototype.destroy=function(e){this._parent.destroy(e)};var f=function(e){if(!(this instanceof f))return new f(e);s.call(this,e),e=e||{},this._offset=0,this._buffer=i(),this._missing=0,this._partial=!1,this._onparse=u,this._header=null,this._stream=null,this._overflow=null,this._cb=null,this._locked=!1,this._destroyed=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null;var t=this,n=t._buffer,r=function(){t._continue()},a=function(e){if(t._locked=!1,e)return t.destroy(e);t._stream||r()},h=function(){t._stream=null;var e=c(t._header.size);e?t._parse(e,d):t._parse(512,y),t._locked||r()},d=function(){t._buffer.consume(c(t._header.size)),t._parse(512,y),r()},p=function(){var e=t._header.size;t._paxGlobal=o.decodePax(n.slice(0,e)),n.consume(e),h()},g=function(){var e=t._header.size;t._pax=o.decodePax(n.slice(0,e)),t._paxGlobal&&(t._pax=Object.assign({},t._paxGlobal,t._pax)),n.consume(e),h()},m=function(){var r=t._header.size;this._gnuLongPath=o.decodeLongPath(n.slice(0,r),e.filenameEncoding),n.consume(r),h()},b=function(){var r=t._header.size;this._gnuLongLinkPath=o.decodeLongPath(n.slice(0,r),e.filenameEncoding),n.consume(r),h()},y=function(){var i,s=t._offset;try{i=t._header=o.decode(n.slice(0,512),e.filenameEncoding,e.allowUnknownFormat)}catch(e){t.emit("error",e)}return n.consume(512),i?"gnu-long-path"===i.type?(t._parse(i.size,m),void r()):"gnu-long-link-path"===i.type?(t._parse(i.size,b),void r()):"pax-global-header"===i.type?(t._parse(i.size,p),void r()):"pax-header"===i.type?(t._parse(i.size,g),void r()):(t._gnuLongPath&&(i.name=t._gnuLongPath,t._gnuLongPath=null),t._gnuLongLinkPath&&(i.linkname=t._gnuLongLinkPath,t._gnuLongLinkPath=null),t._pax&&(t._header=i=function(e,t){return t.path&&(e.name=t.path),t.linkpath&&(e.linkname=t.linkpath),t.size&&(e.size=parseInt(t.size,10)),e.pax=t,e}(i,t._pax),t._pax=null),t._locked=!0,i.size&&"directory"!==i.type?(t._stream=new l(t,s),t.emit("entry",i,t._stream,a),t._parse(i.size,h),void r()):(t._parse(512,y),void t.emit("entry",i,function(e,t){var n=new l(e,t);return n.end(),n}(t,s),a))):(t._parse(512,y),void r())};this._onheader=y,this._parse(512,y)};r.inherits(f,s),f.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.emit("close"))},f.prototype._parse=function(e,t){this._destroyed||(this._offset+=e,this._missing=e,t===this._onheader&&(this._partial=!1),this._onparse=t)},f.prototype._continue=function(){if(!this._destroyed){var e=this._cb;this._cb=u,this._overflow?this._write(this._overflow,undefined,e):e()}},f.prototype._write=function(e,t,n){if(!this._destroyed){var r=this._stream,i=this._buffer,o=this._missing;if(e.length&&(this._partial=!0),e.length<o)return this._missing-=e.length,this._overflow=null,r?r.write(e,n):(i.append(e),n());this._cb=n,this._missing=0;var s=null;e.length>o&&(s=e.slice(o),e=e.slice(0,o)),r?r.end(e):i.append(e),this._overflow=s,this._onparse()}},f.prototype._final=function(e){if(this._partial)return this.destroy(new Error("Unexpected end of data"));e()},t.exports=f}}},{package:"@metamask/snap-controllers>tar-stream"}],[6,{"../../../shared/constants/alerts":6261,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200,"@metamask/obs-store":1204},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("@metamask/obs-store"),s=e("../../../shared/constants/alerts");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c={alertEnabledness:s.TOGGLEABLE_ALERT_TYPES.reduce(((e,t)=>(e[t]=!0,e)),{}),unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}};n.default=class{constructor(e={}){const{initState:t={},preferencesStore:n}=e,r=u(u({},c),{},{alertEnabledness:u(u({},c.alertEnabledness),t.alertEnabledness)});this.store=new o.ObservableStore(r),this.selectedAddress=n.getState().selectedAddress,n.subscribe((({selectedAddress:e})=>{this.store.getState().unconnectedAccountAlertShownOrigins&&this.selectedAddress!==e&&(this.selectedAddress=e,this.store.updateState({unconnectedAccountAlertShownOrigins:{}}))}))}setAlertEnabledness(e,t){let{alertEnabledness:n}=this.store.getState();n=u({},n),n[e]=t,this.store.updateState({alertEnabledness:n})}setUnconnectedAccountAlertShown(e){let{unconnectedAccountAlertShownOrigins:t}=this.store.getState();t=u({},t),t[e]=!0,this.store.updateState({unconnectedAccountAlertShownOrigins:t})}getWeb3ShimUsageState(e){return this.store.getState().web3ShimUsageOrigins[e]}setWeb3ShimUsageRecorded(e){this._setWeb3ShimUsageState(e,s.WEB3_SHIM_USAGE_ALERT_STATES.RECORDED)}setWeb3ShimUsageAlertDismissed(e){this._setWeb3ShimUsageState(e,s.WEB3_SHIM_USAGE_ALERT_STATES.DISMISSED)}_setWeb3ShimUsageState(e,t){let{web3ShimUsageOrigins:n}=this.store.getState();n=u({},n),n[e]=t,this.store.updateState({web3ShimUsageOrigins:n})}}}}},{package:"$root$"}],[60,{"./util":83,"@babel/runtime/helpers/interopRequireDefault":200,loglevel:5268,"webextension-polyfill":6237},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("webextension-polyfill")),o=r(e("loglevel")),s=e("./util");n.default=class{constructor(){this.isSupported=Boolean(i.default.storage.local),this.isSupported||o.default.error("Storage local API not available.")}async get(){if(!this.isSupported)return undefined;const e=await this._get();return t=e,0===Object.keys(t).length?undefined:e;var t}async set(e){return this._set(e)}_get(){const{local:e}=i.default.storage;return new Promise(((t,n)=>{e.get(null).then((e=>{const r=(0,s.checkForError)();r?n(r):t(e)}))}))}_set(e){const{local:t}=i.default.storage;return new Promise(((n,r)=>{t.set(e).then((()=>{const e=(0,s.checkForError)();e?r(e):n()}))}))}}}}},{package:"$root$"}],[6e3,{buffer:2175},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){var t=e.alloc,r="0".charCodeAt(0),i=e.from("ustar\0","binary"),o=e.from("00","binary"),s=e.from("ustar ","binary"),a=e.from(" \0","binary"),u=parseInt("7777",8),c=257,l=function(e,t,n,r){for(;n<r;n++)if(e[n]===t)return n;return r},f=function(e){for(var t=256,n=0;n<148;n++)t+=e[n];for(var r=156;r<512;r++)t+=e[r];return t},h=function(e,t){return(e=e.toString(8)).length>t?"7777777777777777777".slice(0,t)+" ":"0000000000000000000".slice(0,t-e.length)+e+" "};var d=function(e,t,n){if(128&(e=e.slice(t,t+n))[t=0])return function(e){var t;if(128===e[0])t=!0;else{if(255!==e[0])return null;t=!1}for(var n=[],r=e.length-1;r>0;r--){var i=e[r];t?n.push(i):n.push(255-i)}var o=0,s=n.length;for(r=0;r<s;r++)o+=n[r]*Math.pow(256,r);return t?o:-1*o}(e);for(;t<e.length&&32===e[t];)t++;for(var r=(i=l(e,32,t,e.length),o=e.length,s=e.length,"number"!=typeof i?s:(i=~~i)>=o?o:i>=0||(i+=o)>=0?i:0);t<r&&0===e[t];)t++;return r===t?0:parseInt(e.slice(t,r).toString(),8);var i,o,s},p=function(e,t,n,r){return e.slice(t,l(e,0,t,t+n)).toString(r)},g=function(t){var n=e.byteLength(t),r=Math.floor(Math.log(n)/Math.log(10))+1;return n+r>=Math.pow(10,r)&&r++,n+r+t};n.decodeLongPath=function(e,t){return p(e,0,e.length,t)},n.encodePax=function(t){var n="";t.name&&(n+=g(" path="+t.name+"\n")),t.linkname&&(n+=g(" linkpath="+t.linkname+"\n"));var r=t.pax;if(r)for(var i in r)n+=g(" "+i+"="+r[i]+"\n");return e.from(n)},n.decodePax=function(e){for(var t={};e.length;){for(var n=0;n<e.length&&32!==e[n];)n++;var r=parseInt(e.slice(0,n).toString(),10);if(!r)return t;var i=e.slice(n+1,r-1).toString(),o=i.indexOf("=");if(-1===o)return t;t[i.slice(0,o)]=i.slice(o+1),e=e.slice(r)}return t},n.encode=function(n){var s=t(512),a=n.name,l="";if(5===n.typeflag&&"/"!==a[a.length-1]&&(a+="/"),e.byteLength(a)!==a.length)return null;for(;e.byteLength(a)>100;){var d=a.indexOf("/");if(-1===d)return null;l+=l?"/"+a.slice(0,d):a.slice(0,d),a=a.slice(d+1)}return e.byteLength(a)>100||e.byteLength(l)>155||n.linkname&&e.byteLength(n.linkname)>100?null:(s.write(a),s.write(h(n.mode&u,6),100),s.write(h(n.uid,6),108),s.write(h(n.gid,6),116),s.write(h(n.size,11),124),s.write(h(n.mtime.getTime()/1e3|0,11),136),s[156]=r+function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(n.type),n.linkname&&s.write(n.linkname,157),i.copy(s,c),o.copy(s,263),n.uname&&s.write(n.uname,265),n.gname&&s.write(n.gname,297),s.write(h(n.devmajor||0,6),329),s.write(h(n.devminor||0,6),337),l&&s.write(l,345),s.write(h(f(s),6),148),s)},n.decode=function(e,t,n){var o=0===e[156]?0:e[156]-r,u=p(e,0,100,t),l=d(e,100,8),h=d(e,108,8),g=d(e,116,8),m=d(e,124,12),b=d(e,136,12),y=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(o),_=0===e[157]?null:p(e,157,100,t),v=p(e,265,32),w=p(e,297,32),E=d(e,329,8),S=d(e,337,8),k=f(e);if(256===k)return null;if(k!==d(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(0===i.compare(e,c,263))e[345]&&(u=p(e,345,155,t)+"/"+u);else if(0===s.compare(e,c,263)&&0===a.compare(e,263,265));else if(!n)throw new Error("Invalid tar header: unknown format.");return 0===o&&u&&"/"===u[u.length-1]&&(o=5),{name:u,mode:l,uid:h,gid:g,size:m,mtime:new Date(1e3*b),type:y,linkname:_,uname:v,gname:w,devmajor:E,devminor:S}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snap-controllers>tar-stream"}],[6001,{"./extract":5999,"./pack":6019},function(){with(this)return function(){"use strict";return function(e,t,n){n.extract=e("./extract"),n.pack=e("./pack")}}},{package:"@metamask/snap-controllers>tar-stream"}],[6002,{buffer:2175},function(){with(this)return function(){"use strict";return function(e,t,n){const{Buffer:r}=e("buffer"),i=Symbol.for("BufferList");function o(e){if(!(this instanceof o))return new o(e);o._init.call(this,e)}o._init=function(e){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},o.prototype._new=function(e){return new o(e)},o.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let n=0;n<this._bufs.length;n++){const r=t+this._bufs[n].length;if(e<r||n===this._bufs.length-1)return[n,e-t];t=r}},o.prototype._reverseOffset=function(e){const t=e[0];let n=e[1];for(let e=0;e<t;e++)n+=this._bufs[e].length;return n},o.prototype.get=function(e){if(e>this.length||e<0)return undefined;const t=this._offset(e);return this._bufs[t[0]][t[1]]},o.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},o.prototype.copy=function(e,t,n,i){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof i||i>this.length)&&(i=this.length),n>=this.length)return e||r.alloc(0);if(i<=0)return e||r.alloc(0);const o=!!e,s=this._offset(n),a=i-n;let u=a,c=o&&t||0,l=s[1];if(0===n&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,c),c+=this._bufs[t].length;return e}if(u<=this._bufs[s[0]].length-l)return o?this._bufs[s[0]].copy(e,t,l,l+u):this._bufs[s[0]].slice(l,l+u);o||(e=r.allocUnsafe(a));for(let t=s[0];t<this._bufs.length;t++){const n=this._bufs[t].length-l;if(!(u>n)){this._bufs[t].copy(e,c,l,l+u),c+=n;break}this._bufs[t].copy(e,c,l),c+=n,u-=n,l&&(l=0)}return e.length>c?e.slice(0,c):e},o.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();const n=this._offset(e),r=this._offset(t),i=this._bufs.slice(n[0],r[0]+1);return 0===r[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,r[1]),0!==n[1]&&(i[0]=i[0].slice(n[1])),this._new(i)},o.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},o.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},o.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(r.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else"number"==typeof e&&(e=e.toString()),this._appendBuffer(r.from(e));return this},o.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},o.prototype.indexOf=function(e,t,n){if(n===undefined&&"string"==typeof t&&(n=t,t=undefined),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=r.from([e]):"string"==typeof e?e=r.from(e,n):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=r.from(e.buffer,e.byteOffset,e.byteLength):r.isBuffer(e)||(e=r.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const i=this._offset(t);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const t=this._bufs[o];for(;s<t.length;){if(t.length-s>=e.length){const n=t.indexOf(e,s);if(-1!==n)return this._reverseOffset([o,n]);s=t.length-e.length+1}else{const t=this._reverseOffset([o,s]);if(this._match(t,e))return t;s++}}s=0}return-1},o.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let n=0;n<t.length;n++)if(this.get(e+n)!==t[n])return!1;return!0},function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e)!function(t){o.prototype[t]=null===e[t]?function(e,n){return this.slice(e,e+n)[t](0,n)}:function(n=0){return this.slice(n,n+e[t])[t](0)}}(t)}(),o.prototype._isBufferList=function(e){return e instanceof o||o.isBufferList(e)},o.isBufferList=function(e){return null!=e&&e[i]},t.exports=o}}},{package:"@metamask/snap-controllers>tar-stream>bl"}],[6003,{"./BufferList":6002,inherits:4515,"readable-stream":6018},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("readable-stream").Duplex,i=e("inherits"),o=e("./BufferList");function s(e){if(!(this instanceof s))return new s(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)})),e=null}o._init.call(this,e),r.call(this)}i(s,r),Object.assign(s.prototype,o.prototype),s.prototype._new=function(e){return new s(e)},s.prototype._write=function(e,t,n){this._appendBuffer(e),"function"==typeof n&&n()},s.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},s.prototype.end=function(e){r.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},s.prototype._isBufferList=function(e){return e instanceof s||e instanceof o||s.isBufferList(e)},s.isBufferList=o.isBufferList,t.exports=s,t.exports.BufferListStream=s,t.exports.BufferList=o}}},{package:"@metamask/snap-controllers>tar-stream>bl"}],[6004,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,s,a;if("string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(n===undefined||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(o(t,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6005,{"./_stream_readable":6007,"./_stream_writable":6009,_process:5500,inherits:4515},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var i=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(c,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var u=s[a];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6006,{"./_stream_transform":6008,inherits:4515},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=i;var r=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e("inherits")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6007,{"../errors":6004,"./_stream_duplex":6005,"./internal/streams/async_iterator":6010,"./internal/streams/buffer_list":6011,"./internal/streams/destroy":6012,"./internal/streams/from":6014,"./internal/streams/state":6016,"./internal/streams/stream":6017,_process:5500,buffer:2175,events:2176,inherits:4515,"string_decoder/":5986,util:2174},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;t.exports=k,k.ReadableState=S;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},o=e("./internal/streams/stream"),s=e("buffer").Buffer,a=global.Uint8Array||function(){};var u,c=e("util");u=c&&c.debuglog?c.debuglog("stream"):function(){};var l,f,h,d=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),g=e("./internal/streams/state").getHighWaterMark,m=e("../errors").codes,b=m.ERR_INVALID_ARG_TYPE,y=m.ERR_STREAM_PUSH_AFTER_EOF,_=m.ERR_METHOD_NOT_IMPLEMENTED,v=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(k,o);var w=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(t,n,i){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function k(t){if(r=r||e("./_stream_duplex"),!(this instanceof k))return new k(t);var n=this instanceof r;this._readableState=new S(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function T(e,t,n,r,i){u("readableAddChunk",t);var o,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}(e,c);else if(i||(o=function(e,t){var n;r=t,s.isBuffer(r)||r instanceof a||"string"==typeof t||t===undefined||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(c,t)),o)w(e,o);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),r)c.endEmitted?w(e,new v):x(e,c,t,!0);else if(c.ended)w(e,new y);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?x(e,c,t,!1):M(e,c)):x(e,c,t,!1)}else r||(c.reading=!1,M(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function x(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),M(e,t)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=p.destroy,k.prototype._undestroy=p.undestroy,k.prototype._destroy=function(e,t){t(e)},k.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),T(this,e,t,!1,n)},k.prototype.unshift=function(e){return T(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var n=new l(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var I=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(A,e))}function A(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function M(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function D(e){u("readable nexttick read 0"),e.read(0)}function N(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(F,t,e))}function F(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}k.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):C(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&B(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),null===(r=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==r&&this.emit("data",r),r},k.prototype._read=function(e){w(this,new _("_read()"))},k.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,u("pipe count=%d opts=%j",o.pipesCount,t);var s=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?c:m;function a(t,n){u("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",a),r.removeListener("end",c),r.removeListener("end",m),r.removeListener("data",h),f=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function c(){u("onend"),e.end()}o.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,L(e))}}(r);e.on("drain",l);var f=!1;function h(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==U(o.pipes,e))&&!f&&(u("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function d(t){u("onerror",t),m(),e.removeListener("error",d),0===i(e,"error")&&w(e,t)}function p(){e.removeListener("finish",g),m()}function g(){u("onfinish"),e.removeListener("close",p),m()}function m(){u("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",p),e.once("finish",g),e.emit("pipe",r),o.flowing||(u("pipe resume"),r.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=U(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},k.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?C(this):i.reading||n.nextTick(D,this))),r},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(P,this),r},k.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||n.nextTick(P,this),t},k.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(N,e,t))}(this,e)),e.paused=!1,this},k.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&i!==undefined)&&((n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return f===undefined&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=j,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(t,n){return h===undefined&&(h=e("./internal/streams/from")),h(k,t,n)})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6008,{"../errors":6004,"./_stream_duplex":6005,inherits:4515},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=l;var r=e("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}e("inherits")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6009,{"../errors":6004,"./_stream_duplex":6005,"./internal/streams/destroy":6012,"./internal/streams/state":6016,"./internal/streams/stream":6017,_process:5500,buffer:2175,inherits:4515,"util-deprecate":6095},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=k,k.WritableState=S;var o={deprecate:e("util-deprecate")},s=e("./internal/streams/stream"),a=e("buffer").Buffer,u=global.Uint8Array||function(){};var c,l=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,d=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,m=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,v=h.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;function E(){}function S(t,o,s){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=o instanceof i),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(A,e,t),e._writableState.errorEmitted=!0,w(e,i)):(o(i),e._writableState.errorEmitted=!0,w(e,i),A(e,t))}(e,r,i,t,o);else{var s=R(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||I(e,r),i?n.nextTick(x,e,r,s,o):x(e,r,s,o)}}(o,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function k(t){var n=this instanceof(i=i||e("./_stream_duplex"));if(!n&&!c.call(k,this))return new k(t);this._writableState=new S(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function T(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function x(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function I(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)o[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;o.allBuffers=u,T(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,l,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var r=R(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(C,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}e("inherits")(k,s),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===k&&(e&&e._writableState instanceof S)}})):c=function(e){return e instanceof this},k.prototype.pipe=function(){w(this,new m)},k.prototype.write=function(e,t,r){var i,o=this._writableState,s=!1,c=!o.objectMode&&(i=e,a.isBuffer(i)||i instanceof u);return c&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(r=t,t=null),c?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=E),o.ending?function(e,t){var r=new _;w(e,r),n.nextTick(t,r)}(this,r):(c||function(e,t,r,i){var o;return null===r?o=new y:"string"==typeof r||t.objectMode||(o=new d("chunk",["string","Buffer"],r)),!o||(w(e,o),n.nextTick(i,o),!1)}(this,o,e,r))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var u=t.objectMode?1:r.length;t.length+=u;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,u,r,i,o);return c}(this,o,c,e,t,r)),s},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},k.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new v(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(e,t,n){n(new p("_write()"))},k.prototype._writev=null,k.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,A(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),k.prototype.destroy=l.destroy,k.prototype._undestroy=l.undestroy,k.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6010,{"./end-of-stream":6013,_process:5500},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=e("./end-of-stream"),s=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[l]=null,e[s]=null,e[a]=null,t(d(n,!1)))}}function g(e){n.nextTick(p,e)}var m=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(d(undefined,!0));if(this[h].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[u]?r(e[u]):t(d(undefined,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(d(undefined,!0)):t[f](n,r)}),r)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[f])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(d(undefined,!0))}))}))})),r),m);t.exports=function(e){var t,n=Object.create(b,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[s]=null,n[a]=null,e(d(r,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[l]=null,n[s]=null,n[a]=null,t(e)),void(n[u]=e)}var r=n[s];null!==r&&(n[l]=null,n[s]=null,n[a]=null,r(d(undefined,!0))),n[c]=!0})),e.on("readable",g.bind(null,n)),n}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6011,{buffer:2175,util:2174},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=e("buffer").Buffer,a=e("util").inspect,u=a&&a.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,s.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),c&&o(t,c),e}()}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6012,{_process:5500},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var s=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(r,s):(s._writableState.errorEmitted=!0,e.nextTick(n,s,t)):e.nextTick(n,s,t):o?(e.nextTick(r,s),o(t)):e.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6013,{"../../../errors":6004},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){a=!1,c=!0,s||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,f=!0,a||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return s&&!f?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},g=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?g():t.on("request",g)),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6014,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6015,{"../../../errors":6004,"./end-of-stream":6013},function(){with(this)return function(){"use strict";return function(e,t,n){var r;var i=e("../../../errors").codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(t,n,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;t.on("close",(function(){a=!0})),r===undefined&&(r=e("./end-of-stream")),r(t,{readable:n,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var u=!1;return function(e){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new s("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,n){var o=n<t.length-1;return u(e,o,n>0,(function(e){r||(r=e),e&&s.forEach(c),o||(s.forEach(c),i(r))}))}));return t.reduce(l)}}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6016,{"../../../errors":6004},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6017,{events:2176},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("events").EventEmitter}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6018,{"./lib/_stream_duplex.js":6005,"./lib/_stream_passthrough.js":6006,"./lib/_stream_readable.js":6007,"./lib/_stream_transform.js":6008,"./lib/_stream_writable.js":6009,"./lib/internal/streams/end-of-stream.js":6013,"./lib/internal/streams/pipeline.js":6015},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6019,{"./headers":6e3,_process:5500,buffer:2175,"end-of-stream":2432,"fs-constants":4393,inherits:4515,"readable-stream":6018,string_decoder:5986},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n,r){(function(){var i=e("fs-constants"),o=e("end-of-stream"),s=e("inherits"),a=r.alloc,u=e("readable-stream").Readable,c=e("readable-stream").Writable,l=e("string_decoder").StringDecoder,f=e("./headers"),h=parseInt("755",8),d=parseInt("644",8),p=a(1024),g=function(){},m=function(e,t){(t&=511)&&e.push(p.slice(0,512-t))};var b=function(e){c.call(this),this.written=0,this._to=e,this._destroyed=!1};s(b,c),b.prototype._write=function(e,t,n){if(this.written+=e.length,this._to.push(e))return n();this._to._drain=n},b.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var y=function(){c.call(this),this.linkname="",this._decoder=new l("utf-8"),this._destroyed=!1};s(y,c),y.prototype._write=function(e,t,n){this.linkname+=this._decoder.write(e),n()},y.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var _=function(){c.call(this),this._destroyed=!1};s(_,c),_.prototype._write=function(e,t,n){n(new Error("No body allowed for this entry"))},_.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var v=function(e){if(!(this instanceof v))return new v(e);u.call(this,e),this._drain=g,this._finalized=!1,this._finalizing=!1,this._destroyed=!1,this._stream=null};s(v,u),v.prototype.entry=function(e,t,s){if(this._stream)throw new Error("already piping an entry");if(!this._finalized&&!this._destroyed){"function"==typeof t&&(s=t,t=null),s||(s=g);var a=this;if(e.size&&"symlink"!==e.type||(e.size=0),e.type||(e.type=function(e){switch(e&i.S_IFMT){case i.S_IFBLK:return"block-device";case i.S_IFCHR:return"character-device";case i.S_IFDIR:return"directory";case i.S_IFIFO:return"fifo";case i.S_IFLNK:return"symlink"}return"file"}(e.mode)),e.mode||(e.mode="directory"===e.type?h:d),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),"string"==typeof t&&(t=r.from(t)),r.isBuffer(t)){e.size=t.length,this._encode(e);var u=this.push(t);return m(a,e.size),u?n.nextTick(s):this._drain=s,new _}if("symlink"===e.type&&!e.linkname){var c=new y;return o(c,(function(t){if(t)return a.destroy(),s(t);e.linkname=c.linkname,a._encode(e),s()})),c}if(this._encode(e),"file"!==e.type&&"contiguous-file"!==e.type)return n.nextTick(s),new _;var l=new b(this);return this._stream=l,o(l,(function(t){return a._stream=null,t?(a.destroy(),s(t)):l.written!==e.size?(a.destroy(),s(new Error("size mismatch"))):(m(a,e.size),a._finalizing&&a.finalize(),void s())})),l}},v.prototype.finalize=function(){this._stream?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(p),this.push(null))},v.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.destroy&&this._stream.destroy())},v.prototype._encode=function(e){if(!e.pax){var t=f.encode(e);if(t)return void this.push(t)}this._encodePax(e)},v.prototype._encodePax=function(e){var t=f.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(f.encode(n)),this.push(t),m(this,t.length),n.size=e.size,n.type=e.type,this.push(f.encode(n))},v.prototype._read=function(e){var t=this._drain;this._drain=g,t()},t.exports=v}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"@metamask/snap-controllers>tar-stream"}],[6021,{_process:5500,stream:2178},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("stream");function i(e,t,i){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var o=!1,s=!1,a=[],u=!1,c=new r;function l(){for(;a.length&&!c.paused;){var e=a.shift();if(null===e)return c.emit("end");c.emit("data",e)}}function f(){c.writable=!1,t.call(c),!c.readable&&c.autoDestroy&&c.destroy()}return c.readable=c.writable=!0,c.paused=!1,c.autoDestroy=!(i&&!1===i.autoDestroy),c.write=function(t){return e.call(this,t),!c.paused},c.queue=c.push=function(e){return u||(null===e&&(u=!0),a.push(e),l()),c},c.on("end",(function(){c.readable=!1,!c.writable&&c.autoDestroy&&n.nextTick((function(){c.destroy()}))})),c.end=function(e){if(!o)return o=!0,arguments.length&&c.write(e),f(),c},c.destroy=function(){if(!s)return s=!0,o=!0,a.length=0,c.writable=c.readable=!1,c.emit("close"),c},c.pause=function(){if(!c.paused)return c.paused=!0,c},c.resume=function(){return c.paused&&(c.paused=!1,c.emit("resume")),l(),c.paused||c.emit("drain"),c},c}t.exports=i,i.through=i}).call(this)}).call(this,e("_process"))}}},{package:"debounce-stream>through"}],[6022,{"lodash.throttle":5080},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("lodash.throttle");t.exports=function e(t){if(!(this instanceof e))return new e(t);const n=(t=t||{}).validity||30,i=new Map,o=r((()=>{i.forEach(((e,t)=>{const r=e.validity||n;(function(e){const t=(new Date).getTime()-e.getTime();return Math.floor(t/1e3)})(e.timestamp)>r&&i.delete(t)}))}),200);this.put=(e,t,n)=>{this.has(e)||i.set(e,{value:t,timestamp:new Date,validity:n}),o()},this.get=e=>{if(i.has(e))return i.get(e).value;throw new Error("key does not exist")},this.has=e=>i.has(e)}}}},{package:"3box>ipfs>libp2p>libp2p-floodsub>libp2p-pubsub>time-cache"}],[6024,{},function(){with(this)return function(){"use strict";return function(e,t,n){
/**
 * Timestamp for 64-bit time_t, nanosecond precision and strftime
 *
 * @author Yusuke Kawasaki
 * @license MIT
 * @see https://github.com/kawanet/timestamp-nano
 */
!function(){void 0!==t&&(t.exports=m);var e=86400,n=3200,r=1168776,i=100982246400,o=1e3*i,s=864e13,a=4294967296,u=1e6,c=1e9,l="000000000",f=Math.trunc||function(e){var t=e-e%1;return 0===t&&(e<0||0===e&&1/e!=1/0)?-0:t},h=m.prototype;m.fromDate=function(e){return new m(+e)},m.fromInt64BE=w(0,1,2,3,0,4),m.fromInt64LE=w(3,2,1,0,4,0),m.fromString=function(e){var t,n=new m,r=(e+="").replace(/^\s*[+\-]?\d+/,(function(e){var t=+e,r=1970+(t-1970)%400;return n.year=t-r,r})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(e,n,r){return n<0&&(r*=-1),t=6e4*(60*+n+ +r),""})).replace(/\.\d+$/,(function(e){return n.nano=+(e+l).substr(1,9),""})).split(/\D+/);r.length>1?r[1]--:r[1]=0;if(n.time=t=Date.UTC.apply(Date,r)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return b(n)},m.fromTimeT=function(e){return _(e,0)},h.year=0,h.time=0,h.nano=0,h.addNano=function(e){return this.nano+=+e||0,this},h.getNano=function(){var e=b(this);return(e.time%1e3*u+ +e.nano+c)%c},h.getTimeT=function(){var t=b(this),i=Math.floor(t.time/1e3),o=t.year;o&&(i+=o*r*e/n);return i},h.getYear=function(){return this.toDate().getUTCFullYear()+this.year},h.toDate=function(){return y(b(this).time)},h.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},h.toString=function(e){var t=this,n=t.toDate(),r={H:function(){return S(n.getUTCHours())},L:function(){return k(n.getUTCMilliseconds(),3)},M:function(){return S(n.getUTCMinutes())},N:function(){return k(t.getNano(),9)},S:function(){return S(n.getUTCSeconds())},Y:function(){var e=t.getYear();return e>999999?"+"+e:e>9999?"+"+k(e,6):e>=0?k(e,4):e>=-999999?"-"+k(-e,6):e},a:function(){return p[n.getUTCDay()]},b:function(){return d[n.getUTCMonth()]},d:function(){return S(n.getUTCDate())},e:function(){return e=n.getUTCDate(),(e>9?"":" ")+(0|e);var e},m:function(){return S(n.getUTCMonth()+1)}};return function e(t){return t.replace(/%./g,(function(t){var n=t[1],i=g[n],o=r[n];return i?e(i):o?o():t}))}(e||"%Y-%m-%dT%H:%M:%S.%NZ")},h.writeInt64BE=v(0,1,2,3,0,4),h.writeInt64LE=v(3,2,1,0,4,0);var d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return m;function m(e,t,n){var r=this;if(!(r instanceof m))return new m(e,t,n);r.time=+e||0,r.nano=+t||0,r.year=+n||0,b(r)}function b(e){var t,r,i=e.year,a=e.time,c=e.nano;if(c<0||u<=c){var l=Math.floor(c/u);c-=l*u,a+=l,t=1}var h=i%n;if(a<-s||s<a||h){(r=f(a/o))&&(i+=r*n,a-=r*o);var d=y(a);d.setUTCFullYear(h+d.getUTCFullYear());var p=(a=+d)+(r=f((i-=h)/n))*o;r&&-s<=p&&p<=s&&(i-=r*n,a=p),t=1}return t&&(e.year=i,e.time=a,e.nano=c),e}function y(e){var t=new Date(0);return t.setTime(e),t}function _(e,t){t|=0,e=+e||0;var r=f((t*=a)/i)+f(e/i),o=t%i+e%i,s=f(o/i);return s&&(r+=s,o-=s*i),new m(1e3*o,0,r*n)}function v(e,t,n,r,i,o){return function(e,t){var n=b(this);e||(e=new Array(8));E(e,t|=0);var r=Math.floor(n.time/1e3),u=31556952*n.year,c=f(u/a)+f(r/a),l=u%a+r%a,h=Math.floor(l/a);h&&(c+=h,l-=h*a);return s(e,t+i,c),s(e,t+o,l),e};function s(i,o,s){i[o+e]=s>>24&255,i[o+t]=s>>16&255,i[o+n]=s>>8&255,i[o+r]=255&s}}function w(e,t,n,r,i,o){return function(e,t){E(e,t|=0);var n=s(e,t+i);return _(s(e,t+o),n)};function s(i,o){return 16777216*i[o+e]+(i[o+t]<<16|i[o+n]<<8|i[o+r])}}function E(e,t){var n=e&&e.length;if(null==n)throw new TypeError("Invalid Buffer");if(n<t+8)throw new RangeError("Out of range")}function S(e){return(e>9?"":"0")+(0|e)}function k(e,t){return(l+(0|e)).substr(-t)}}()}}},{package:"3box>ipfs>ipns>timestamp-nano"}],[6028,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>to-array"}],[6029,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){if(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new DataView(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new DataView(e);throw new TypeError("Expected `data` to be an ArrayBuffer, Buffer, Int8Array, Uint8Array or Uint8ClampedArray")}}}},{package:"base32-encode>to-data-view"}],[6031,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.FIAT_RATES_UPDATE=n.NOTIFICATION=n.BLOCK=n.CONNECT=n.ERROR=void 0;n.ERROR="blockchain-error";n.CONNECT="blockchain-connect";n.BLOCK="blockchain-block";n.NOTIFICATION="blockchain-notification";n.FIAT_RATES_UPDATE="fiat-rates-update"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6032,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.POOL_RELAY_TYPE=n.CERTIFICATE_TYPE=n.ADDRESS_TYPE=n.NETWORK_IDS=n.PROTOCOL_MAGICS=void 0;var r=Object.freeze({mainnet:764824073,testnet:42});n.PROTOCOL_MAGICS=r;var i=Object.freeze({mainnet:1,testnet:0});n.NETWORK_IDS=i;var o=Object.freeze({Base:0,Pointer:4,Enterprise:6,Byron:8,Reward:14});n.ADDRESS_TYPE=o;var s=Object.freeze({StakeRegistration:0,StakeDeregistration:1,StakeDelegation:2,StakePoolRegistration:3});n.CERTIFICATE_TYPE=s;var a=Object.freeze({SingleHostIp:0,SingleHostName:1,MultipleHostName:2});n.POOL_RELAY_TYPE=a}}},{package:"eth-trezor-keyring>trezor-connect"}],[6033,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.WAIT_FOR_SELECTION=n.WORD=n.PASSPHRASE_ON_DEVICE=n.PASSPHRASE=n.PIN=n.BUTTON=n.LOADING=n.USED_ELSEWHERE=n.RELEASED=n.ACQUIRED=n.RELEASE=n.ACQUIRE=n.CHANGED=n.DISCONNECT=n.CONNECT_UNACQUIRED=n.CONNECT=void 0;n.CONNECT="device-connect";n.CONNECT_UNACQUIRED="device-connect_unacquired";n.DISCONNECT="device-disconnect";n.CHANGED="device-changed";n.ACQUIRE="device-acquire";n.RELEASE="device-release";n.ACQUIRED="device-acquired";n.RELEASED="device-released";n.USED_ELSEWHERE="device-used_elsewhere";n.LOADING="device-loading";n.BUTTON="button";n.PIN="pin";n.PASSPHRASE="passphrase";n.PASSPHRASE_ON_DEVICE="passphrase_on_device";n.WORD="word";n.WAIT_FOR_SELECTION="device-wait_for_selection"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6034,{"@babel/runtime/helpers/inheritsLoose":199,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/helpers/wrapNativeSuper":219},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.LIBUSB_ERROR_MESSAGE=n.WEBUSB_ERROR_MESSAGE=n.INVALID_PIN_ERROR_MESSAGE=n.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE=n.TypedError=n.TrezorError=n.ERROR_CODES=void 0;var i=r(e("@babel/runtime/helpers/inheritsLoose")),o=r(e("@babel/runtime/helpers/wrapNativeSuper")),s={Init_NotInitialized:"TrezorConnect not yet initialized",Init_AlreadyInitialized:"TrezorConnect has been already initialized",Init_IframeBlocked:"Iframe blocked",Init_IframeTimeout:"Iframe timeout",Init_ManifestMissing:"Manifest not set. Read more at https://github.com/trezor/connect/blob/develop/docs/index.md",Popup_ConnectionMissing:"Unable to establish connection with iframe",Transport_Missing:"Transport is missing",Transport_InvalidProtobuf:"",Method_InvalidPackage:"This version of trezor-connect is not suitable to work without browser. Use trezor-connect@extended package instead",Method_InvalidParameter:"",Method_NotAllowed:"Method not allowed for this configuration",Method_PermissionsNotGranted:"Permissions not granted",Method_Cancel:"Cancelled",Method_Interrupted:"Popup closed",Method_UnknownCoin:"Coin not found",Method_AddressNotMatch:"Addresses do not match",Method_FirmwareUpdate_DownloadFailed:"Failed to download firmware binary",Method_CustomMessage_Callback:'Parameter "callback" is not a function',Method_Discovery_BundleException:"",Method_Override:"override",Method_NoResponse:"Call resolved without response",Backend_NotSupported:"BlockchainLink settings not found in coins.json",Backend_WorkerMissing:"",Backend_Disconnected:"Backend disconnected",Backend_Invalid:"Invalid backend",Backend_Error:"",Runtime:"",Device_NotFound:"Device not found",Device_InitializeFailed:"",Device_FwException:"",Device_ModeException:"",Device_Disconnected:"Device disconnected",Device_UsedElsewhere:"Device is used in another window",Device_InvalidState:"Passphrase is incorrect",Device_CallInProgress:"Device call in progress"};n.ERROR_CODES=s;var a=function(e){function t(t,n){var r;return(r=e.call(this,n)||this).code=t,r.message=n,r}return(0,i.default)(t,e),t}((0,o.default)(Error));n.TrezorError=a;n.TypedError=function(e,t){return new a(e,t||s[e])};n.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE="wrong previous session";n.INVALID_PIN_ERROR_MESSAGE="PIN invalid";n.WEBUSB_ERROR_MESSAGE="NetworkError: Unable to claim interface.";n.LIBUSB_ERROR_MESSAGE="LIBUSB_ERROR"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6035,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.CALL=n.ERROR=n.INIT=n.LOADED=n.BOOTSTRAP=void 0;n.BOOTSTRAP="iframe-bootstrap";n.LOADED="iframe-loaded";n.INIT="iframe-init";n.ERROR="iframe-error";n.CALL="iframe-call"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6036,{"./blockchain":6031,"./cardano":6032,"./device":6033,"./errors":6034,"./iframe":6035,"./network":6037,"./popup":6038,"./transport":6039,"./ui":6040},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.CARDANO=n.UI=n.TRANSPORT=n.POPUP=n.NETWORK=n.IFRAME=n.ERRORS=n.DEVICE=n.BLOCKCHAIN=n.BLOCKCHAIN_EVENT=n.RESPONSE_EVENT=n.TRANSPORT_EVENT=n.DEVICE_EVENT=n.UI_EVENT=n.CORE_EVENT=void 0;var r=d(e("./blockchain"));n.BLOCKCHAIN=r;var i=d(e("./device"));n.DEVICE=i;var o=d(e("./errors"));n.ERRORS=o;var s=d(e("./iframe"));n.IFRAME=s;var a=d(e("./network"));n.NETWORK=a;var u=d(e("./popup"));n.POPUP=u;var c=d(e("./transport"));n.TRANSPORT=c;var l=d(e("./ui"));n.UI=l;var f=d(e("./cardano"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}n.CARDANO=f;n.CORE_EVENT="CORE_EVENT";n.UI_EVENT="UI_EVENT";n.DEVICE_EVENT="DEVICE_EVENT";n.TRANSPORT_EVENT="TRANSPORT_EVENT";n.RESPONSE_EVENT="RESPONSE_EVENT";n.BLOCKCHAIN_EVENT="BLOCKCHAIN_EVENT"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6037,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.TYPES=void 0;var r=Object.freeze({bitcoin:"Bitcoin",ethereum:"Ethereum",eos:"Eos",nem:"NEM",stellar:"Stellar",cardano:"Cardano",ripple:"Ripple",tezos:"Tezors",binance:"Binance"});n.TYPES=r}}},{package:"eth-trezor-keyring>trezor-connect"}],[6038,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.CLOSE_WINDOW=n.CANCEL_POPUP_REQUEST=n.CLOSED=n.HANDSHAKE=n.EXTENSION_USB_PERMISSIONS=n.ERROR=n.INIT=n.LOADED=n.BOOTSTRAP=void 0;n.BOOTSTRAP="popup-bootstrap";n.LOADED="popup-loaded";n.INIT="popup-init";n.ERROR="popup-error";n.EXTENSION_USB_PERMISSIONS="open-usb-permissions";n.HANDSHAKE="popup-handshake";n.CLOSED="popup-closed";n.CANCEL_POPUP_REQUEST="ui-cancel-popup-request";n.CLOSE_WINDOW="window.close"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6039,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.START_PENDING=n.DISABLE_WEBUSB=n.REQUEST=n.STREAM=n.UPDATE=n.ERROR=n.START=void 0;n.START="transport-start";n.ERROR="transport-error";n.UPDATE="transport-update";n.STREAM="transport-stream";n.REQUEST="transport-request_device";n.DISABLE_WEBUSB="transport-disable_webusb";n.START_PENDING="transport-start_pending"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6040,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.IFRAME_FAILURE=n.ADDRESS_VALIDATION=n.BUNDLE_PROGRESS=n.LOGIN_CHALLENGE_RESPONSE=n.LOGIN_CHALLENGE_REQUEST=n.CUSTOM_MESSAGE_RESPONSE=n.CUSTOM_MESSAGE_REQUEST=n.CHANGE_SETTINGS=n.RECEIVE_WORD=n.RECEIVE_FEE=n.RECEIVE_ACCOUNT=n.CHANGE_ACCOUNT=n.RECEIVE_DEVICE=n.RECEIVE_PASSPHRASE=n.RECEIVE_PIN=n.RECEIVE_CONFIRMATION=n.RECEIVE_PERMISSION=n.REQUEST_WORD=n.REQUEST_BUTTON=n.INSUFFICIENT_FUNDS=n.UPDATE_CUSTOM_FEE=n.SELECT_FEE=n.SELECT_ACCOUNT=n.SELECT_DEVICE=n.SET_OPERATION=n.LOADING=n.CONNECT=n.INVALID_PASSPHRASE_ACTION=n.INVALID_PASSPHRASE=n.REQUEST_PASSPHRASE_ON_DEVICE=n.REQUEST_PASSPHRASE=n.INVALID_PIN=n.REQUEST_PIN=n.REQUEST_CONFIRMATION=n.REQUEST_PERMISSION=n.CLOSE_UI_WINDOW=n.REQUEST_UI_WINDOW=n.DEVICE_NEEDS_BACKUP=n.FIRMWARE_PROGRESS=n.FIRMWARE_NOT_INSTALLED=n.FIRMWARE_NOT_COMPATIBLE=n.FIRMWARE_NOT_SUPPORTED=n.FIRMWARE_OUTDATED=n.FIRMWARE_OLD=n.SEEDLESS=n.INITIALIZE=n.REQUIRE_MODE=n.NOT_IN_BOOTLOADER=n.BOOTLOADER=n.TRANSPORT=void 0;n.TRANSPORT="ui-no_transport";n.BOOTLOADER="ui-device_bootloader_mode";n.NOT_IN_BOOTLOADER="ui-device_not_in_bootloader_mode";n.REQUIRE_MODE="ui-device_require_mode";n.INITIALIZE="ui-device_not_initialized";n.SEEDLESS="ui-device_seedless";n.FIRMWARE_OLD="ui-device_firmware_old";n.FIRMWARE_OUTDATED="ui-device_firmware_outdated";n.FIRMWARE_NOT_SUPPORTED="ui-device_firmware_unsupported";n.FIRMWARE_NOT_COMPATIBLE="ui-device_firmware_not_compatible";n.FIRMWARE_NOT_INSTALLED="ui-device_firmware_not_installed";n.FIRMWARE_PROGRESS="ui-firmware-progress";n.DEVICE_NEEDS_BACKUP="ui-device_needs_backup";n.REQUEST_UI_WINDOW="ui-request_window";n.CLOSE_UI_WINDOW="ui-close_window";n.REQUEST_PERMISSION="ui-request_permission";n.REQUEST_CONFIRMATION="ui-request_confirmation";n.REQUEST_PIN="ui-request_pin";n.INVALID_PIN="ui-invalid_pin";n.REQUEST_PASSPHRASE="ui-request_passphrase";n.REQUEST_PASSPHRASE_ON_DEVICE="ui-request_passphrase_on_device";n.INVALID_PASSPHRASE="ui-invalid_passphrase";n.INVALID_PASSPHRASE_ACTION="ui-invalid_passphrase_action";n.CONNECT="ui-connect";n.LOADING="ui-loading";n.SET_OPERATION="ui-set_operation";n.SELECT_DEVICE="ui-select_device";n.SELECT_ACCOUNT="ui-select_account";n.SELECT_FEE="ui-select_fee";n.UPDATE_CUSTOM_FEE="ui-update_custom_fee";n.INSUFFICIENT_FUNDS="ui-insufficient_funds";n.REQUEST_BUTTON="ui-button";n.REQUEST_WORD="ui-request_word";n.RECEIVE_PERMISSION="ui-receive_permission";n.RECEIVE_CONFIRMATION="ui-receive_confirmation";n.RECEIVE_PIN="ui-receive_pin";n.RECEIVE_PASSPHRASE="ui-receive_passphrase";n.RECEIVE_DEVICE="ui-receive_device";n.CHANGE_ACCOUNT="ui-change_account";n.RECEIVE_ACCOUNT="ui-receive_account";n.RECEIVE_FEE="ui-receive_fee";n.RECEIVE_WORD="ui-receive_word";n.CHANGE_SETTINGS="ui-change_settings";n.CUSTOM_MESSAGE_REQUEST="ui-custom_request";n.CUSTOM_MESSAGE_RESPONSE="ui-custom_response";n.LOGIN_CHALLENGE_REQUEST="ui-login_challenge_request";n.LOGIN_CHALLENGE_RESPONSE="ui-login_challenge_response";n.BUNDLE_PROGRESS="ui-bundle_progress";n.ADDRESS_VALIDATION="ui-address_validation";n.IFRAME_FAILURE="ui-iframe_failure"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6041,{"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.parse=n.corsValidator=n.getEnv=n.DEFAULT_PRIORITY=void 0;var i=r(e("@babel/runtime/helpers/defineProperty"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var s="8.2.6",a="https://connect.trezor.io/"+(s.split(".").map((function(e){return parseInt(e,10)}))[0]+"/");n.DEFAULT_PRIORITY=2;var u={configSrc:"./data/config.json",version:s,debug:!1,priority:2,trustedHost:!1,connectSrc:a,iframeSrc:a+"iframe.html",popup:!0,popupSrc:a+"popup.html",webusbSrc:a+"webusb.html",transportReconnect:!1,webusb:!0,pendingTransportEvent:!0,supportedBrowser:"undefined"==typeof navigator||!/Trident|MSIE|Edge/.test(navigator.userAgent),manifest:null,env:"web",lazyLoad:!1,timestamp:(new Date).getTime(),interactionTimeout:600},c=function(){if("undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect)return"webextension";if("undefined"!=typeof navigator){if("string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return"react-native";if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)return"electron"}return"web"};n.getEnv=c;var l=function(e){if("string"==typeof e)return e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*trezor\.io\//)||e.match(/^https?:\/\/localhost:[58][0-9]{3}\//)||e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*sldev\.cz\//)||e.match(/^https?:\/\/([A-Za-z0-9\-_]+\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\.onion\//)?e:void 0};n.corsValidator=l;n.parse=function(e){void 0===e&&(e={});var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u);if(Object.prototype.hasOwnProperty.call(e,"debug")&&(Array.isArray(e),"boolean"==typeof e.debug?t.debug=e.debug:"string"==typeof e.debug&&(t.debug="true"===e.debug)),"string"==typeof e.connectSrc&&(t.connectSrc=e.connectSrc),"undefined"!=typeof global&&"string"==typeof global.__TREZOR_CONNECT_SRC&&(t.connectSrc=l(global.__TREZOR_CONNECT_SRC),t.debug=!0),"undefined"!=typeof window&&window.location&&"string"==typeof window.location.search){var n=window.location.search.split("&").find((function(e){return e.indexOf("trezor-connect-src")>=0}));if(n){var r=n.split("=")[1];t.connectSrc=l(decodeURIComponent(r)),t.debug=!0}}var s=t.connectSrc||a;return t.iframeSrc=s+"iframe.html",t.popupSrc=s+"popup.html",t.webusbSrc=s+"webusb.html","boolean"==typeof e.transportReconnect&&(t.transportReconnect=e.transportReconnect),"boolean"==typeof e.webusb&&(t.webusb=e.webusb),"boolean"==typeof e.popup&&(t.popup=e.popup),"boolean"==typeof e.lazyLoad&&(t.lazyLoad=e.lazyLoad),"boolean"==typeof e.pendingTransportEvent&&(t.pendingTransportEvent=e.pendingTransportEvent),"undefined"!=typeof window&&window.location&&"file:"===window.location.protocol&&(t.origin="file://"+window.location.pathname,t.webusb=!1),"string"==typeof e.extension&&(t.extension=e.extension),"string"==typeof e.env?t.env=e.env:t.env=c(),"number"==typeof e.timestamp&&(t.timestamp=e.timestamp),"number"==typeof e.interactionTimeout&&(t.interactionTimeout=e.interactionTimeout),"object"==typeof e.manifest&&(t.manifest=function(e){if(e&&"string"==typeof e.email&&"string"==typeof e.appUrl)return{email:e.email,appUrl:e.appUrl}}(e.manifest)),u=t}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6042,{"../../constants":6036,"../../data/ConnectSettings":6041,"../../iframe/builder":6044,"../../message":6048,"../../message/builder":6047,"../../popup/PopupManager":6050,"../../types":6057,"../../utils/debug":6073,"../../webusb/button":6075,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,events:2176},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.disableWebUSB=n.requestLogin=n.customMessage=n.getSettings=n.renderWebUSBButton=n.uiResponse=n.call=n.init=n.cancel=n.dispose=n.manifest=n.eventEmitter=void 0;var i=r(e("@babel/runtime/regenerator")),o=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("@babel/runtime/helpers/asyncToGenerator")),a=r(e("events")),u=r(e("../../popup/PopupManager")),c=b(e("../../iframe/builder")),l=r(e("../../webusb/button")),f=e("../../message"),h=e("../../message/builder"),d=e("../../data/ConnectSettings"),p=e("../../utils/debug"),g=e("../../constants");b(e("../../types"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=new a.default;n.eventEmitter=v;var w,E,S=(0,p.initLog)("[trezor-connect.js]"),k=function(){var e=new u.default(w);return e.on(g.POPUP.CLOSED,(function(e){c.postMessage({type:g.POPUP.CLOSED,payload:e?{error:e}:null},!1)})),e};n.manifest=function(e){w=(0,d.parse)({manifest:e})};var T=function(){v.removeAllListeners(),c.dispose(),E&&E.close()};n.dispose=T;n.cancel=function(e){E&&E.emit(g.POPUP.CLOSED,e)};var x=function(e){if(e.origin===c.origin){var t=(0,f.parseMessage)(e.data),n=t.event,r=t.type,i=t.payload,o=t.id||0;switch(S.log("handleMessage",t),n){case g.RESPONSE_EVENT:c.messagePromises[o]?(c.messagePromises[o].resolve({id:o,success:t.success,payload:i}),delete c.messagePromises[o]):S.warn("Unknown message id "+o);break;case g.DEVICE_EVENT:case g.TRANSPORT_EVENT:case g.BLOCKCHAIN_EVENT:v.emit(n,t),v.emit(r,i);break;case g.UI_EVENT:if(r===g.IFRAME.BOOTSTRAP){c.clearTimeout();break}r===g.IFRAME.LOADED&&c.initPromise.resolve(),r===g.IFRAME.ERROR&&c.initPromise.reject(i.error),v.emit(n,t),v.emit(r,i);break;default:S.log("Undefined message",n,e)}}},I=function(){var e=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),!c.instance){e.next=3;break}throw g.ERRORS.TypedError("Init_AlreadyInitialized");case 3:if(w||(w=(0,d.parse)(t)),w.manifest){e.next=6;break}throw g.ERRORS.TypedError("Init_ManifestMissing");case 6:if(!w.lazyLoad){e.next=9;break}return w.lazyLoad=!1,e.abrupt("return");case 9:return E||(E=k()),S.enabled=!!w.debug,window.addEventListener("message",x),window.addEventListener("unload",T),e.next=15,c.init(w);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.init=I;var R=function(){var e=(0,s.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.instance||c.timeout){e.next=15;break}if((w=(0,d.parse)(w)).manifest){e.next=4;break}return e.abrupt("return",(0,f.errorMessage)(g.ERRORS.TypedError("Init_ManifestMissing")));case 4:return E||(E=k()),E.request(!0),e.prev=6,e.next=9,I(w);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),E&&(["Init_IframeBlocked","Init_IframeTimeout"].includes(e.t0.code)?E.postMessage((0,h.UiMessage)(g.UI.IFRAME_FAILURE)):E.close()),e.abrupt("return",(0,f.errorMessage)(e.t0));case 15:if(!c.timeout){e.next=17;break}return e.abrupt("return",(0,f.errorMessage)(g.ERRORS.TypedError("Init_ManifestMissing")));case 17:if(!c.error){e.next=19;break}return e.abrupt("return",(0,f.errorMessage)(c.error));case 19:return w.popup&&E&&E.request(),e.prev=20,e.next=23,c.postMessage({type:g.IFRAME.CALL,payload:t});case 23:if(!(n=e.sent)){e.next=27;break}return!n.success&&"Device_CallInProgress"!==n.payload.code&&E&&E.unlock(),e.abrupt("return",n);case 27:return E&&E.unlock(),e.abrupt("return",(0,f.errorMessage)(g.ERRORS.TypedError("Method_NoResponse")));case 31:return e.prev=31,e.t1=e.catch(20),S.error("__call error",e.t1),E&&E.close(),e.abrupt("return",(0,f.errorMessage)(e.t1));case 36:case"end":return e.stop()}}),e,null,[[6,11],[20,31]])})));return function(t){return e.apply(this,arguments)}}();n.call=R;var C=function(e){c.postMessage({event:g.UI_EVENT,type:g.UI.CUSTOM_MESSAGE_RESPONSE,payload:e})};n.uiResponse=function(e){var t=e.type,n=e.payload;c.postMessage({event:g.UI_EVENT,type:t,payload:n})};n.renderWebUSBButton=function(e){(0,l.default)(e,w.webusbSrc,c.origin)};n.getSettings=function(){return c.instance?R({method:"getSettings"}):Promise.resolve((0,f.errorMessage)(g.ERRORS.TypedError("Init_NotInitialized")))};var A=function(){var e=(0,s.default)(i.default.mark((function e(t){var n,r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof t.callback){e.next=2;break}return e.abrupt("return",(0,f.errorMessage)(g.ERRORS.TypedError("Method_CustomMessage_Callback")));case 2:return n=t.callback,r=function(){var e=(0,s.default)(i.default.mark((function e(t){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.data)||r.type!==g.UI.CUSTOM_MESSAGE_REQUEST){e.next=6;break}return e.next=4,n(r.payload);case 4:o=e.sent,C(o||{message:"release"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",r,!1),e.next=7,R(_(_({method:"customMessage"},t),{},{callback:null}));case 7:return o=e.sent,window.removeEventListener("message",r),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.customMessage=A;var M=function(){var e=(0,s.default)(i.default.mark((function e(t){var n,r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t.callback){e.next=9;break}return n=t.callback,r=function(){var e=(0,s.default)(i.default.mark((function e(t){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.data)||r.type!==g.UI.LOGIN_CHALLENGE_REQUEST){e.next=12;break}return e.prev=2,e.next=5,n();case 5:o=e.sent,c.postMessage({event:g.UI_EVENT,type:g.UI.LOGIN_CHALLENGE_RESPONSE,payload:o}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),c.postMessage({event:g.UI_EVENT,type:g.UI.LOGIN_CHALLENGE_RESPONSE,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",r,!1),e.next=6,R(_(_({method:"requestLogin"},t),{},{asyncChallenge:!0,callback:null}));case 6:return o=e.sent,window.removeEventListener("message",r),e.abrupt("return",o);case 9:return e.abrupt("return",R(_({method:"requestLogin"},t)));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.requestLogin=M;n.disableWebUSB=function(){c.postMessage({event:g.UI_EVENT,type:g.TRANSPORT.DISABLE_WEBUSB})}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6043,{"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,"cross-fetch":2283},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.getOrigin=n.httpRequest=void 0;var i=r(e("@babel/runtime/regenerator")),o=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("cross-fetch")),a=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n="text"),e.next=3,(0,s.default)(t,{credentials:"same-origin"});case 3:if(!(r=e.sent).ok){e.next=13;break}if("json"!==n){e.next=10;break}return e.next=8,r.text();case 8:return o=e.sent,e.abrupt("return",JSON.parse(o));case 10:if("binary"!==n){e.next=12;break}return e.abrupt("return",r.arrayBuffer());case 12:return e.abrupt("return",r.text());case 13:throw new Error("httpRequest error: "+t+" "+r.statusText);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();n.httpRequest=a;n.getOrigin=function(e){if(0===e.indexOf("file://"))return"file://";var t=e.match(/^.+\:\/\/[^\/]+/);return Array.isArray(t)&&t.length>0?t[0]:"unknown"}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6044,{"../constants":6036,"../env/browser/networkUtils":6043,"../utils/deferred":6074,"./inline-styles":6045,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.clearTimeout=n.dispose=n.postMessage=n.init=n.messagePromises=n.error=n.timeout=n.initPromise=n.origin=n.instance=void 0;var i,o,s=r(e("@babel/runtime/regenerator")),a=r(e("@babel/runtime/helpers/asyncToGenerator")),u=e("../utils/deferred"),c=e("../constants"),l=e("../env/browser/networkUtils"),f=r(e("./inline-styles"));n.instance=i,n.origin=o;var h=(0,u.create)();n.initPromise=h;var d,p=0;n.timeout=p,n.error=d;var g=0,m={};n.messagePromises=m;var b=function(){var e=(0,a.default)(s.default.mark((function e(t){var r,a,f,d,g;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.initPromise=h=(0,u.create)(),(r=document.getElementById("trezorconnect"))?n.instance=i=r:(n.instance=i=document.createElement("iframe"),i.frameBorder="0",i.width="0px",i.height="0px",i.style.position="absolute",i.style.display="none",i.style.border="0px",i.style.width="0px",i.style.height="0px",i.id="trezorconnect"),"web"===t.env?(f=t.manifest?JSON.stringify(t.manifest):"undefined",d="version="+t.version+"&manifest="+encodeURIComponent(btoa(JSON.stringify(f))),a=t.iframeSrc+"?"+d):a=t.iframeSrc,i.setAttribute("src",a),t.webusb&&i.setAttribute("allow","usb"),n.origin=o=(0,l.getOrigin)(i.src),n.timeout=p=window.setTimeout((function(){h.reject(c.ERRORS.TypedError("Init_IframeTimeout"))}),1e4),g=function(){if(i){try{var e=i.contentWindow.location.origin;if(!e||"null"===e)return void _()}catch(e){}var n;"undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect&&(chrome.runtime.onConnect.addListener((function(){})),n=chrome.runtime.id),i.contentWindow.postMessage({type:c.IFRAME.INIT,payload:{settings:t,extension:n}},o),i.onload=undefined}else h.reject(c.ERRORS.TypedError("Init_IframeBlocked"))},i.attachEvent?i.attachEvent("onload",g):i.onload=g,document.body&&(document.body.appendChild(i),y()),e.prev=11,e.next=14,h.promise;case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(11),i&&(i.parentNode&&i.parentNode.removeChild(i),n.instance=i=null),e.t0;case 20:return e.prev=20,window.clearTimeout(p),n.timeout=p=0,e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[11,16,20,24]])})));return function(t){return e.apply(this,arguments)}}();n.init=b;var y=function(){if(!i)throw c.ERRORS.TypedError("Init_IframeBlocked");var e=i.ownerDocument,t=e.head||e.getElementsByTagName("head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.setAttribute("id","TrezorConnectStylesheet"),n.styleSheet?(n.styleSheet.cssText=f.default,t.appendChild(n)):(n.appendChild(document.createTextNode(f.default)),t.append(n))},_=function(){window.clearTimeout(p),n.error=d=c.ERRORS.TypedError("Init_IframeBlocked"),v(),h.reject(d)};n.postMessage=function(e,t){if(void 0===t&&(t=!0),!i)throw c.ERRORS.TypedError("Init_IframeBlocked");if(t){g++,e.id=g,m[g]=(0,u.create)();var n=m[g].promise;return i.contentWindow.postMessage(e,o),n}return i.contentWindow.postMessage(e,o),null};var v=function(){if(i&&i.parentNode)try{i.parentNode.removeChild(i)}catch(e){}n.instance=i=null,n.timeout=p=0};n.dispose=v;n.clearTimeout=function(){window.clearTimeout(p)}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6045,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.default=void 0;n.default='.trezorconnect-container{position:fixed!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-ms-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important;z-index:10000!important;width:100%!important;height:100%!important;top:0!important;left:0!important;background:rgba(0,0,0,.35)!important;overflow:auto!important;padding:20px!important;margin:0!important}.trezorconnect-container .trezorconnect-window{position:relative!important;display:block!important;width:370px!important;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif!important;margin:auto!important;border-radius:3px!important;background-color:#fff!important;text-align:center!important;overflow:hidden!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head{text-align:left;padding:12px 24px!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-logo{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close{cursor:pointer!important;height:24px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close svg{fill:#757575;-webkit-transition:fill .3s ease-in-out!important;transition:fill .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close:hover svg{fill:#494949}.trezorconnect-container .trezorconnect-window .trezorconnect-body{padding:24px 24px 32px!important;background:#FBFBFB!important;border-top:1px solid #EBEBEB}.trezorconnect-container .trezorconnect-window .trezorconnect-body h3{color:#505050!important;font-size:16px!important;font-weight:500!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body p{margin:8px 0 24px!important;font-weight:400!important;color:#A9A9A9!important;font-size:12px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button{width:100%!important;padding:12px 24px!important;margin:0!important;border-radius:3px!important;font-size:14px!important;font-weight:300!important;cursor:pointer!important;background:#01B757!important;color:#fff!important;border:0!important;-webkit-transition:background-color .3s ease-in-out!important;transition:background-color .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:hover{background-color:#00AB51!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:active{background-color:#009546!important}/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0IiwiJHN0ZGluIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLHlCQUNJLFNBQUEsZ0JBQ0EsUUFBQSxzQkFDQSxRQUFBLHVCQUNBLFFBQUEsc0JBRUEsUUFBQSxlQUNBLG1CQUFBLG1CQUNBLHNCQUFBLGlCQUNBLHVCQUFBLGlCQUNBLG1CQUFBLGlCQUNBLGVBQUEsaUJBRUEsa0JBQUEsaUJBQ0Esb0JBQUEsaUJBQ0EsZUFBQSxpQkNmTSxZQUFhLGlCREFyQixRQUFTLGdCQWtCSCxNQUFBLGVBQ0EsT0FBQSxlQUNBLElBQUEsWUFDQSxLQUFBLFlBQ0EsV0FBQSwwQkFDQSxTQUFBLGVBQ0EsUUFBQSxlQUNBLE9BQUEsWUNkUiwrQ0RYRSxTQUFVLG1CQTZCQSxRQUFBLGdCQUNBLE1BQUEsZ0JBQ0EsWUFBQSxjQUFBLG1CQUFBLFdBQUEsT0FBQSxpQkFBQSxNQUFBLHFCQUNBLE9BQUEsZUNmVixjQUFlLGNEakJmLGlCQWlCRSxlQWtCWSxXQUFBLGlCQ2ZkLFNBQVUsaUJEbUJJLG1FQUNBLFdBQUEsS0NoQmQsUUFBUyxLQUFLLGVEeEJkLFFBQVMsc0JBMENTLFFBQUEsdUJBQ0EsUUFBQSxzQkNmbEIsUUFBUyxlRGlCSyxrQkE1QlosaUJBOEJvQixvQkFBQSxpQkNoQmxCLGVBQWdCLGlCRC9CWixZQWlCTixpQkFzQ1EsdUZBQ0EsaUJBQUEsRUNwQlYsYUFBYyxFRHBDVixTQUFVLEVBMkRBLEtBQUEsRUFFQSx3RkNwQmQsT0FBUSxrQkR6Q1IsT0FBUSxlQWlFTSw0RkFDQSxLQUFBLFFBQ0EsbUJBQUEsS0FBQSxJQUFBLHNCQ3BCZCxXQUFZLEtBQUssSUFBSyxzQkR3QlIsa0dBQ0EsS0FBQSxRQUVBLG1FQUNBLFFBQUEsS0FBQSxLQUFBLGVBQ0EsV0FBQSxrQkFDQSxXQUFBLElBQUEsTUFBQSxRQUVBLHNFQUNBLE1BQUEsa0JBQ0EsVUFBQSxlQ3JCZCxZQUFhLGNEd0JLLHFFQ3JCbEIsT0FBUSxJQUFJLEVBQUksZUR3QkYsWUFBQSxjQUNJLE1BQUEsa0JDdEJsQixVQUFXLGVBRWIsMEVBQ0UsTUFBTyxlQUNQLFFBQVMsS0FBSyxlQUNkLE9BQVEsWUFDUixjQUFlLGNBQ2YsVUFBVyxlQUNYLFlBQWEsY0FDYixPQUFRLGtCQUNSLFdBQVksa0JBQ1osTUFBTyxlQUNQLE9BQVEsWUFDUixtQkFBb0IsaUJBQWlCLElBQUssc0JBQzFDLFdBQVksaUJBQWlCLElBQUssc0JBRXBDLGdGQUNFLGlCQUFrQixrQkFFcEIsaUZBQ0UsaUJBQWtCIn0= */'}}},{package:"eth-trezor-keyring>trezor-connect"}],[6046,{"./constants":6036,"./env/node":6042,"./types":6057,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0;var i={};n.default=void 0;var o=r(e("@babel/runtime/helpers/defineProperty")),s=e("./constants");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in n&&n[e]===s[e]||(n[e]=s[e]))}));var a=e("./env/node"),u=e("./types");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in n&&n[e]===u[e]||(n[e]=u[e]))}));var f={manifest:a.manifest,init:a.init,getSettings:a.getSettings,on:function(e,t){a.eventEmitter.on(e,t)},off:function(e,t){a.eventEmitter.removeListener(e,t)},removeAllListeners:function(){a.eventEmitter.removeAllListeners()},uiResponse:a.uiResponse,blockchainGetAccountBalanceHistory:function(e){return(0,a.call)(l({method:"blockchainGetAccountBalanceHistory"},e))},blockchainGetCurrentFiatRates:function(e){return(0,a.call)(l({method:"blockchainGetCurrentFiatRates"},e))},blockchainGetFiatRatesForTimestamps:function(e){return(0,a.call)(l({method:"blockchainGetFiatRatesForTimestamps"},e))},blockchainDisconnect:function(e){return(0,a.call)(l({method:"blockchainDisconnect"},e))},blockchainEstimateFee:function(e){return(0,a.call)(l({method:"blockchainEstimateFee"},e))},blockchainGetTransactions:function(e){return(0,a.call)(l({method:"blockchainGetTransactions"},e))},blockchainSetCustomBackend:function(e){return(0,a.call)(l({method:"blockchainSetCustomBackend"},e))},blockchainSubscribe:function(e){return(0,a.call)(l({method:"blockchainSubscribe"},e))},blockchainSubscribeFiatRates:function(e){return(0,a.call)(l({method:"blockchainSubscribeFiatRates"},e))},blockchainUnsubscribe:function(e){return(0,a.call)(l({method:"blockchainUnsubscribe"},e))},blockchainUnsubscribeFiatRates:function(e){return(0,a.call)(l({method:"blockchainUnsubscribeFiatRates"},e))},customMessage:function(e){return(0,a.customMessage)(e)},requestLogin:function(e){return(0,a.requestLogin)(e)},cardanoGetAddress:function(e){var t=a.eventEmitter.listenerCount(s.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"cardanoGetAddress"},e),{},{useEventListener:t}))},cardanoGetNativeScriptHash:function(e){return(0,a.call)(l({method:"cardanoGetNativeScriptHash"},e))},cardanoGetPublicKey:function(e){return(0,a.call)(l({method:"cardanoGetPublicKey"},e))},cardanoSignTransaction:function(e){return(0,a.call)(l({method:"cardanoSignTransaction"},e))},cipherKeyValue:function(e){return(0,a.call)(l({method:"cipherKeyValue"},e))},composeTransaction:function(e){return(0,a.call)(l({method:"composeTransaction"},e))},ethereumGetAddress:function(e){var t=a.eventEmitter.listenerCount(s.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"ethereumGetAddress"},e),{},{useEventListener:t}))},ethereumGetPublicKey:function(e){return(0,a.call)(l({method:"ethereumGetPublicKey"},e))},ethereumSignMessage:function(e){return(0,a.call)(l({method:"ethereumSignMessage"},e))},ethereumSignTransaction:function(e){return(0,a.call)(l({method:"ethereumSignTransaction"},e))},ethereumSignTypedData:function(e){return(0,a.call)(l({method:"ethereumSignTypedData"},e))},ethereumVerifyMessage:function(e){return(0,a.call)(l({method:"ethereumVerifyMessage"},e))},getAccountInfo:function(e){return(0,a.call)(l({method:"getAccountInfo"},e))},getAddress:function(e){var t=a.eventEmitter.listenerCount(s.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"getAddress"},e),{},{useEventListener:t}))},getDeviceState:function(e){return(0,a.call)(l({method:"getDeviceState"},e))},getFeatures:function(e){return(0,a.call)(l({method:"getFeatures"},e))},getPublicKey:function(e){return(0,a.call)(l({method:"getPublicKey"},e))},liskGetAddress:function(){return(0,a.call)({method:"liskDeprecated"})},liskGetPublicKey:function(){return(0,a.call)({method:"liskDeprecated"})},liskSignMessage:function(){return(0,a.call)({method:"liskDeprecated"})},liskSignTransaction:function(){return(0,a.call)({method:"liskDeprecated"})},liskVerifyMessage:function(){return(0,a.call)({method:"liskDeprecated"})},nemGetAddress:function(e){var t=a.eventEmitter.listenerCount(s.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"nemGetAddress"},e),{},{useEventListener:t}))},nemSignTransaction:function(e){return(0,a.call)(l({method:"nemSignTransaction"},e))},pushTransaction:function(e){return(0,a.call)(l({method:"pushTransaction"},e))},rippleGetAddress:function(e){var t=a.eventEmitter.listenerCount(s.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"rippleGetAddress"},e),{},{useEventListener:t}))},rippleSignTransaction:function(e){return(0,a.call)(l({method:"rippleSignTransaction"},e))},signMessage:function(e){return(0,a.call)(l({method:"signMessage"},e))},signTransaction:function(e){return(0,a.call)(l({method:"signTransaction"},e))},stellarGetAddress:function(e){var t=a.eventEmitter.listenerCount(s.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"stellarGetAddress"},e),{},{useEventListener:t}))},stellarSignTransaction:function(e){return(0,a.call)(l({method:"stellarSignTransaction"},e))},tezosGetAddress:function(e){var t=a.eventEmitter.listenerCount(s.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"tezosGetAddress"},e),{},{useEventListener:t}))},tezosGetPublicKey:function(e){return(0,a.call)(l({method:"tezosGetPublicKey"},e))},tezosSignTransaction:function(e){return(0,a.call)(l({method:"tezosSignTransaction"},e))},eosGetPublicKey:function(e){return(0,a.call)(l({method:"eosGetPublicKey"},e))},eosSignTransaction:function(e){return(0,a.call)(l({method:"eosSignTransaction"},e))},binanceGetAddress:function(e){var t=a.eventEmitter.listenerCount(s.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"binanceGetAddress"},e),{},{useEventListener:t}))},binanceGetPublicKey:function(e){return(0,a.call)(l({method:"binanceGetPublicKey"},e))},binanceSignTransaction:function(e){return(0,a.call)(l({method:"binanceSignTransaction"},e))},verifyMessage:function(e){return(0,a.call)(l({method:"verifyMessage"},e))},resetDevice:function(e){return(0,a.call)(l({method:"resetDevice"},e))},wipeDevice:function(e){return(0,a.call)(l({method:"wipeDevice"},e))},applyFlags:function(e){return(0,a.call)(l({method:"applyFlags"},e))},applySettings:function(e){return(0,a.call)(l({method:"applySettings"},e))},backupDevice:function(e){return(0,a.call)(l({method:"backupDevice"},e))},changePin:function(e){return(0,a.call)(l({method:"changePin"},e))},firmwareUpdate:function(e){return(0,a.call)(l({method:"firmwareUpdate"},e))},recoveryDevice:function(e){return(0,a.call)(l({method:"recoveryDevice"},e))},getCoinInfo:function(e){return(0,a.call)(l({method:"getCoinInfo"},e))},rebootToBootloader:function(e){return(0,a.call)(l({method:"rebootToBootloader"},e))},dispose:a.dispose,cancel:a.cancel,renderWebUSBButton:a.renderWebUSBButton,disableWebUSB:a.disableWebUSB};n.default=f}}},{package:"eth-trezor-keyring>trezor-connect"}],[6047,{"../constants":6036,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.BlockchainMessage=n.ResponseMessage=n.TransportMessage=n.DeviceMessage=n.UiMessage=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("../constants");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.UiMessage=function(e,t){return{event:o.UI_EVENT,type:e,payload:t}};n.DeviceMessage=function(e,t){return{event:o.DEVICE_EVENT,type:e,payload:t}};n.TransportMessage=function(e,t){return{event:o.TRANSPORT_EVENT,type:e,payload:t.error?a(a({},t),{},{error:t.error.message,code:t.error.code}):t}};n.ResponseMessage=function(e,t,n){return void 0===n&&(n=null),{event:o.RESPONSE_EVENT,type:o.RESPONSE_EVENT,id:e,success:t,payload:t?n:{error:n.error.message,code:n.error.code}}};n.BlockchainMessage=function(e,t){return{event:o.BLOCKCHAIN_EVENT,type:e,payload:t}}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6048,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.errorMessage=n.parseMessage=void 0;n.parseMessage=function(e){var t={event:e.event,type:e.type,payload:e.payload};return"number"==typeof e.id&&(t.id=e.id),"boolean"==typeof e.success&&(t.success=e.success),t};n.errorMessage=function(e){return{success:!1,payload:{error:e.message,code:e.code}}}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6049,{"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200,"@metamask/eth-sig-util":1128},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/defineProperty"));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var o=e("@metamask/eth-sig-util");function s(e){switch(Object.prototype.toString.call(e)){case"[object Object]":var t=Object.keys(e).map((function(t){return[t,s(e[t])]}));return Object.fromEntries(t);case"[object Array]":return e.map((function(e){return s(e)}));case"[object BigInt]":return e.toString();default:return e}}t.exports=function(e,t){if(!t)throw new Error("Trezor: Only version 4 of typed data signing is supported");var n=o.SignTypedDataVersion.V4,a=o.TypedDataUtils.sanitizeData(e),u=a.types,c=a.primaryType,l=a.domain,f=a.message;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({domain_separator_hash:o.TypedDataUtils.hashStruct("EIP712Domain",s(l),u,n).toString("hex"),message_hash:o.TypedDataUtils.hashStruct(c,s(f),u,n).toString("hex")},e)}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6050,{"../constants/iframe":6035,"../constants/popup":6038,"../constants/ui":6040,"../env/browser/networkUtils":6043,"../utils/deferred":6074,"./showPopupRequest":6051,"@babel/runtime/helpers/assertThisInitialized":189,"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/inheritsLoose":199,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220,events:2176},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.default=void 0;var i=r(e("@babel/runtime/regenerator")),o=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/assertThisInitialized")),a=r(e("@babel/runtime/helpers/inheritsLoose")),u=r(e("@babel/runtime/helpers/defineProperty")),c=r(e("events")),l=b(e("../constants/popup")),f=b(e("../constants/iframe")),h=b(e("../constants/ui")),d=e("./showPopupRequest"),p=e("../env/browser/networkUtils"),g=e("../utils/deferred");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}var y=function(e){function t(t){var n;return n=e.call(this)||this,(0,u.default)((0,s.default)(n),"requestTimeout",0),(0,u.default)((0,s.default)(n),"closeInterval",0),(0,u.default)((0,s.default)(n),"extensionTabId",0),n.settings=t,n.origin=(0,p.getOrigin)(t.popupSrc),n.handleMessage=n.handleMessage.bind((0,s.default)(n)),n.iframeHandshake=(0,g.create)(f.LOADED),"webextension"===n.settings.env&&(n.handleExtensionConnect=n.handleExtensionConnect.bind((0,s.default)(n)),n.handleExtensionMessage=n.handleExtensionMessage.bind((0,s.default)(n)),chrome.runtime.onConnect.addListener(n.handleExtensionConnect)),window.addEventListener("message",n.handleMessage,!1),n}(0,a.default)(t,e);var n=t.prototype;return n.request=function(e){var t=this;if(void 0===e&&(e=!1),this.locked)this._window&&("webextension"===this.settings.env?chrome.tabs.update(this._window.id,{active:!0}):this._window.focus());else{var n=this.open.bind(this);if(this.locked=!0,this.settings.supportedBrowser){var r=e||"webextension"===this.settings.env?1:850;this.requestTimeout=window.setTimeout((function(){t.requestTimeout=0,n(e)}),r)}else n()}},n.cancel=function(){this.close()},n.unlock=function(){this.locked=!1},n.open=function(e){var t=this,n=this.settings.popupSrc;this.settings.supportedBrowser?(this.popupPromise=(0,g.create)(l.LOADED),this.openWrapper(e?n+"#loading":n),this.closeInterval=window.setInterval((function(){t._window&&("webextension"===t.settings.env?chrome.tabs.get(t._window.id,(function(e){e||(t.close(),t.emit(l.CLOSED))})):t._window.closed&&(t.close(),t.emit(l.CLOSED)))}),500),this.openTimeout=window.setTimeout((function(){t.close(),(0,d.showPopupRequest)(t.open.bind(t),(function(){t.emit(l.CLOSED)}))}),3e3)):this.openWrapper(n+"#unsupported")},n.openWrapper=function(e){var t=this;"webextension"===this.settings.env?chrome.windows.getCurrent(null,(function(n){"normal"!==n.type?chrome.windows.create({url:e},(function(e){chrome.tabs.query({windowId:e.id,active:!0},(function(e){t._window=e[0]}))})):chrome.tabs.query({currentWindow:!0,active:!0},(function(n){t.extensionTabId=n[0].id,chrome.tabs.create({url:e,index:n[0].index+1},(function(e){t._window=e}))}))})):"electron"===this.settings.env?this._window=window.open(e,"modal"):(this._window=window.open("","_blank"),this._window&&(this._window.location.href=e))},n.handleExtensionConnect=function(e){"trezor-connect"===e.name&&(!this._window||this._window&&this._window.id!==e.sender.tab.id?e.disconnect():(window.clearTimeout(this.openTimeout),this.extensionPort=e,this.extensionPort.onMessage.addListener(this.handleExtensionMessage)))},n.handleExtensionMessage=function(e){var t=this;if(this.extensionPort){var n=this.extensionPort,r=e.data;if(r&&"object"==typeof r)if(r.type===l.ERROR){var i=r.payload&&"string"==typeof r.payload.error?r.payload.error:null;this.emit(l.CLOSED,i?"Popup error: "+i:null),this.close()}else r.type===l.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((function(e){n.postMessage({type:l.INIT,payload:{settings:t.settings,useBroadcastChannel:e}})}))):r.type===l.EXTENSION_USB_PERMISSIONS?chrome.tabs.query({currentWindow:!0,active:!0},(function(e){chrome.tabs.create({url:"trezor-usb-permissions.html",index:e[0].index+1},(function(e){}))})):r.type===l.CLOSE_WINDOW&&(this.emit(l.CLOSED),this.close())}},n.handleMessage=function(e){var t=this,n=e.data;if((0,p.getOrigin)(e.origin)===this.origin&&n&&"object"==typeof n)if(n.type===f.LOADED){var r=!(!n.payload||"boolean"!=typeof n.payload.useBroadcastChannel)&&n.payload.useBroadcastChannel;this.iframeHandshake.resolve(r)}else if(n.type===l.BOOTSTRAP)window.clearTimeout(this.openTimeout);else if(n.type===l.ERROR&&this._window){var i=n.payload&&"string"==typeof n.payload.error?n.payload.error:null;this.emit(l.CLOSED,i?"Popup error: "+i:null),this.close()}else n.type===l.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((function(e){t._window.postMessage({type:l.INIT,payload:{settings:t.settings,useBroadcastChannel:e}},t.origin)}))):n.type!==l.CANCEL_POPUP_REQUEST&&n.type!==h.CLOSE_UI_WINDOW||this.close()},n.close=function(){if(this.locked=!1,this.popupPromise=undefined,this.requestTimeout&&(window.clearTimeout(this.requestTimeout),this.requestTimeout=0),this.openTimeout&&(window.clearTimeout(this.openTimeout),this.openTimeout=0),this.closeInterval&&(window.clearInterval(this.closeInterval),this.closeInterval=0),this.extensionPort&&(this.extensionPort.disconnect(),this.extensionPort=null),this.extensionTabId&&(chrome.tabs.update(this.extensionTabId,{active:!0}),this.extensionTabId=0),this._window){if("webextension"===this.settings.env){chrome.runtime.lastError;chrome.tabs.remove(this._window.id,(function(){chrome.runtime.lastError}))}else this._window.close();this._window=null}},n.postMessage=function(){var e=(0,o.default)(i.default.mark((function e(t){var n=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._window||t.type===h.REQUEST_UI_WINDOW||!this.openTimeout){e.next=4;break}return this.close(),(0,d.showPopupRequest)(this.open.bind(this),(function(){n.emit(l.CLOSED)})),e.abrupt("return");case 4:if(!this.popupPromise){e.next=7;break}return e.next=7,this.popupPromise.promise;case 7:this._window&&this._window.postMessage(t,this.origin);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(c.default);n.default=y}}},{package:"eth-trezor-keyring>trezor-connect"}],[6051,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.showPopupRequest=void 0;var r="TrezorConnectInteractionLayer",i='\n    <div class="trezorconnect-container" id="'+r+'">\n        <div class="trezorconnect-window">\n            <div class="trezorconnect-head">\n                <svg class="trezorconnect-logo" x="0px" y="0px" viewBox="0 0 163.7 41.9" width="78px" height="20px" preserveAspectRatio="xMinYMin meet">\n                    <polygon points="101.1,12.8 118.2,12.8 118.2,17.3 108.9,29.9 118.2,29.9 118.2,35.2 101.1,35.2 101.1,30.7 110.4,18.1 101.1,18.1"/>\n                    <path d="M158.8,26.9c2.1-0.8,4.3-2.9,4.3-6.6c0-4.5-3.1-7.4-7.7-7.4h-10.5v22.3h5.8v-7.5h2.2l4.1,7.5h6.7L158.8,26.9z M154.7,22.5 h-4V18h4c1.5,0,2.5,0.9,2.5,2.2C157.2,21.6,156.2,22.5,154.7,22.5z"/>\n                    <path d="M130.8,12.5c-6.8,0-11.6,4.9-11.6,11.5s4.9,11.5,11.6,11.5s11.7-4.9,11.7-11.5S137.6,12.5,130.8,12.5z M130.8,30.3 c-3.4,0-5.7-2.6-5.7-6.3c0-3.8,2.3-6.3,5.7-6.3c3.4,0,5.8,2.6,5.8,6.3C136.6,27.7,134.2,30.3,130.8,30.3z"/>\n                    <polygon points="82.1,12.8 98.3,12.8 98.3,18 87.9,18 87.9,21.3 98,21.3 98,26.4 87.9,26.4 87.9,30 98.3,30 98.3,35.2 82.1,35.2 "/>\n                    <path d="M24.6,9.7C24.6,4.4,20,0,14.4,0S4.2,4.4,4.2,9.7v3.1H0v22.3h0l14.4,6.7l14.4-6.7h0V12.9h-4.2V9.7z M9.4,9.7 c0-2.5,2.2-4.5,5-4.5s5,2,5,4.5v3.1H9.4V9.7z M23,31.5l-8.6,4l-8.6-4V18.1H23V31.5z"/>\n                    <path d="M79.4,20.3c0-4.5-3.1-7.4-7.7-7.4H61.2v22.3H67v-7.5h2.2l4.1,7.5H80l-4.9-8.3C77.2,26.1,79.4,24,79.4,20.3z M71,22.5h-4V18 h4c1.5,0,2.5,0.9,2.5,2.2C73.5,21.6,72.5,22.5,71,22.5z"/>\n                    <polygon points="40.5,12.8 58.6,12.8 58.6,18.1 52.4,18.1 52.4,35.2 46.6,35.2 46.6,18.1 40.5,18.1 "/>\n                </svg>\n                <div class="trezorconnect-close">\n                    <svg x="0px" y="0px" viewBox="24 24 60 60" width="24px" height="24px" preserveAspectRatio="xMinYMin meet">\n                        <polygon class="st0" points="40,67.9 42.1,70 55,57.1 67.9,70 70,67.9 57.1,55 70,42.1 67.9,40 55,52.9 42.1,40 40,42.1 52.9,55 "/>\n                    </svg>\n                </div>\n            </div>\n            <div class="trezorconnect-body">\n                <h3>Popup was blocked</h3>\n                <p>Please click to Continue to open popup manually</p>\n                <button class="trezorconnect-open">Continue</button>\n            </div>\n        </div>\n    </div>\n';n.showPopupRequest=function(e,t){if(!document.getElementById(r)){var n=document.createElement("div");n.id=r,n.className="trezorconnect-container",n.innerHTML=i,document.body&&document.body.appendChild(n),n.getElementsByClassName("trezorconnect-open")[0].onclick=function(){e(),document.body&&document.body.removeChild(n)},n.getElementsByClassName("trezorconnect-close")[0].onclick=function(){t(),document.body&&document.body.removeChild(n)}}}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6052,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6053,{"../constants":6036,"./account":6052,"./backend/blockchain":6054,"./events":6056,"./misc":6058,"./networks/binance":6059,"./networks/bitcoin":6060,"./networks/cardano":6061,"./networks/coinInfo":6062,"./networks/eos":6063,"./networks/ethereum":6064,"./networks/nem":6065,"./networks/ripple":6066,"./networks/stellar":6067,"./networks/tezos":6068,"./params":6069,"./trezor/device":6070,"./trezor/management":6071,"./trezor/protobuf":6072},function(){with(this)return function(){"use strict";return function(e,t,n){i(e("../constants")),i(e("./params")),i(e("./trezor/device")),i(e("./trezor/management")),i(e("./trezor/protobuf")),i(e("./account")),i(e("./networks/bitcoin")),i(e("./networks/binance")),i(e("./networks/cardano")),i(e("./networks/coinInfo")),i(e("./networks/eos")),i(e("./networks/ethereum")),i(e("./networks/nem")),i(e("./networks/ripple")),i(e("./networks/stellar")),i(e("./networks/tezos")),i(e("./misc")),i(e("./events")),i(e("./backend/blockchain"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6054,{"../../constants":6036},function(){with(this)return function(){"use strict";return function(e,t,n){e("../../constants")}}},{package:"eth-trezor-keyring>trezor-connect"}],[6055,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6056,{"../constants":6036},function(){with(this)return function(){"use strict";return function(e,t,n){e("../constants")}}},{package:"eth-trezor-keyring>trezor-connect"}],[6057,{"./account":6052,"./api":6053,"./backend/blockchain":6054,"./backend/transactions":6055,"./events":6056,"./misc":6058,"./networks/binance":6059,"./networks/bitcoin":6060,"./networks/cardano":6061,"./networks/coinInfo":6062,"./networks/eos":6063,"./networks/ethereum":6064,"./networks/nem":6065,"./networks/ripple":6066,"./networks/stellar":6067,"./networks/tezos":6068,"./params":6069,"./trezor/device":6070,"./trezor/management":6071},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0;var r=e("./api");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||(n[e]=r[e]))}));var i=e("./events");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||(n[e]=i[e]))}));var o=e("./misc");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||(n[e]=o[e]))}));var s=e("./params");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||(n[e]=s[e]))}));var a=e("./account");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||(n[e]=a[e]))}));var u=e("./trezor/device");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||(n[e]=u[e]))}));var c=e("./trezor/management");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||(n[e]=c[e]))}));var l=e("./networks/bitcoin");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===l[e]||(n[e]=l[e]))}));var f=e("./networks/binance");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===f[e]||(n[e]=f[e]))}));var h=e("./networks/cardano");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===h[e]||(n[e]=h[e]))}));var d=e("./networks/coinInfo");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===d[e]||(n[e]=d[e]))}));var p=e("./networks/eos");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===p[e]||(n[e]=p[e]))}));var g=e("./networks/ethereum");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===g[e]||(n[e]=g[e]))}));var m=e("./networks/nem");Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===m[e]||(n[e]=m[e]))}));var b=e("./networks/ripple");Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===b[e]||(n[e]=b[e]))}));var y=e("./networks/stellar");Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===y[e]||(n[e]=y[e]))}));var _=e("./networks/tezos");Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===_[e]||(n[e]=_[e]))}));var v=e("./backend/blockchain");Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===v[e]||(n[e]=v[e]))}));var w=e("./backend/transactions");Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===w[e]||(n[e]=w[e]))}))}}},{package:"eth-trezor-keyring>trezor-connect"}],[6058,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6059,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6060,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6061,{"../trezor/protobuf":6072},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.CardanoTxWitnessType=n.CardanoTxSigningMode=n.CardanoPoolRelayType=n.CardanoNativeScriptHashDisplayFormat=n.CardanoNativeScriptType=n.CardanoCertificateType=n.CardanoAddressType=void 0;var r=e("../trezor/protobuf");n.CardanoAddressType=r.Enum_CardanoAddressType,n.CardanoCertificateType=r.Enum_CardanoCertificateType,n.CardanoNativeScriptType=r.Enum_CardanoNativeScriptType,n.CardanoNativeScriptHashDisplayFormat=r.Enum_CardanoNativeScriptHashDisplayFormat,n.CardanoPoolRelayType=r.Enum_CardanoPoolRelayType,n.CardanoTxSigningMode=r.Enum_CardanoTxSigningMode,n.CardanoTxWitnessType=r.Enum_CardanoTxWitnessType}}},{package:"eth-trezor-keyring>trezor-connect"}],[6062,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6063,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6064,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6065,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6066,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6067,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6068,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6069,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6070,{"../../constants":6036},function(){with(this)return function(){"use strict";return function(e,t,n){e("../../constants")}}},{package:"eth-trezor-keyring>trezor-connect"}],[6071,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6072,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.Enum_TezosBallotType=n.Enum_TezosContractType=n.Enum_StellarSignerType=n.Enum_StellarMemoType=n.Enum_StellarAssetType=n.Enum_NEMImportanceTransferMode=n.Enum_NEMModificationType=n.Enum_NEMSupplyChangeType=n.Enum_NEMMosaicLevy=n.Enum_WordRequestType=n.Enum_RecoveryDeviceType=n.Enum_SdProtectOperationType=n.Enum_Capability=n.Enum_SafetyCheckLevel=n.Enum_BackupType=n.Enum_EthereumDataType=n.Enum_PinMatrixRequestType=n.Enum_ButtonRequestType=n.Enum_FailureType=n.Enum_CardanoTxWitnessType=n.Enum_CardanoTxSigningMode=n.Enum_CardanoTxAuxiliaryDataSupplementType=n.Enum_CardanoPoolRelayType=n.Enum_CardanoCertificateType=n.Enum_CardanoNativeScriptHashDisplayFormat=n.Enum_CardanoNativeScriptType=n.Enum_CardanoAddressType=n.Enum_CardanoDerivationType=n.Enum_RequestType=n.Enum_AmountUnit=n.Enum_DecredStakingSpendType=n.Enum_OutputScriptType=n.Enum_InputScriptType=n.Enum_BinanceTimeInForce=n.Enum_BinanceOrderSide=n.Enum_BinanceOrderType=void 0;var r=Object.freeze({OT_UNKNOWN:0,MARKET:1,LIMIT:2,OT_RESERVED:3});n.Enum_BinanceOrderType=r;var i=Object.freeze({SIDE_UNKNOWN:0,BUY:1,SELL:2});n.Enum_BinanceOrderSide=i;var o=Object.freeze({TIF_UNKNOWN:0,GTE:1,TIF_RESERVED:2,IOC:3});n.Enum_BinanceTimeInForce=o;var s=Object.freeze({SPENDADDRESS:0,SPENDMULTISIG:1,EXTERNAL:2,SPENDWITNESS:3,SPENDP2SHWITNESS:4,SPENDTAPROOT:5});n.Enum_InputScriptType=s;var a=Object.freeze({PAYTOADDRESS:0,PAYTOSCRIPTHASH:1,PAYTOMULTISIG:2,PAYTOOPRETURN:3,PAYTOWITNESS:4,PAYTOP2SHWITNESS:5,PAYTOTAPROOT:6});n.Enum_OutputScriptType=a;var u=Object.freeze({SSGen:0,SSRTX:1});n.Enum_DecredStakingSpendType=u;var c=Object.freeze({BITCOIN:0,MILLIBITCOIN:1,MICROBITCOIN:2,SATOSHI:3});n.Enum_AmountUnit=c;var l=Object.freeze({TXINPUT:0,TXOUTPUT:1,TXMETA:2,TXFINISHED:3,TXEXTRADATA:4,TXORIGINPUT:5,TXORIGOUTPUT:6});n.Enum_RequestType=l;var f=Object.freeze({LEDGER:0,ICARUS:1,ICARUS_TREZOR:2});n.Enum_CardanoDerivationType=f;var h=Object.freeze({BASE:0,BASE_SCRIPT_KEY:1,BASE_KEY_SCRIPT:2,BASE_SCRIPT_SCRIPT:3,POINTER:4,POINTER_SCRIPT:5,ENTERPRISE:6,ENTERPRISE_SCRIPT:7,BYRON:8,REWARD:14,REWARD_SCRIPT:15});n.Enum_CardanoAddressType=h;var d=Object.freeze({PUB_KEY:0,ALL:1,ANY:2,N_OF_K:3,INVALID_BEFORE:4,INVALID_HEREAFTER:5});n.Enum_CardanoNativeScriptType=d;var p=Object.freeze({HIDE:0,BECH32:1,POLICY_ID:2});n.Enum_CardanoNativeScriptHashDisplayFormat=p;var g=Object.freeze({STAKE_REGISTRATION:0,STAKE_DEREGISTRATION:1,STAKE_DELEGATION:2,STAKE_POOL_REGISTRATION:3});n.Enum_CardanoCertificateType=g;var m=Object.freeze({SINGLE_HOST_IP:0,SINGLE_HOST_NAME:1,MULTIPLE_HOST_NAME:2});n.Enum_CardanoPoolRelayType=m;var b=Object.freeze({NONE:0,CATALYST_REGISTRATION_SIGNATURE:1});n.Enum_CardanoTxAuxiliaryDataSupplementType=b;var y=Object.freeze({ORDINARY_TRANSACTION:0,POOL_REGISTRATION_AS_OWNER:1,MULTISIG_TRANSACTION:2});n.Enum_CardanoTxSigningMode=y;var _=Object.freeze({BYRON_WITNESS:0,SHELLEY_WITNESS:1});n.Enum_CardanoTxWitnessType=_;var v=Object.freeze({Failure_UnexpectedMessage:1,Failure_ButtonExpected:2,Failure_DataError:3,Failure_ActionCancelled:4,Failure_PinExpected:5,Failure_PinCancelled:6,Failure_PinInvalid:7,Failure_InvalidSignature:8,Failure_ProcessError:9,Failure_NotEnoughFunds:10,Failure_NotInitialized:11,Failure_PinMismatch:12,Failure_WipeCodeMismatch:13,Failure_InvalidSession:14,Failure_FirmwareError:99});n.Enum_FailureType=v;var w=Object.freeze({ButtonRequest_Other:1,ButtonRequest_FeeOverThreshold:2,ButtonRequest_ConfirmOutput:3,ButtonRequest_ResetDevice:4,ButtonRequest_ConfirmWord:5,ButtonRequest_WipeDevice:6,ButtonRequest_ProtectCall:7,ButtonRequest_SignTx:8,ButtonRequest_FirmwareCheck:9,ButtonRequest_Address:10,ButtonRequest_PublicKey:11,ButtonRequest_MnemonicWordCount:12,ButtonRequest_MnemonicInput:13,_Deprecated_ButtonRequest_PassphraseType:14,ButtonRequest_UnknownDerivationPath:15,ButtonRequest_RecoveryHomepage:16,ButtonRequest_Success:17,ButtonRequest_Warning:18,ButtonRequest_PassphraseEntry:19,ButtonRequest_PinEntry:20});n.Enum_ButtonRequestType=w;var E=Object.freeze({PinMatrixRequestType_Current:1,PinMatrixRequestType_NewFirst:2,PinMatrixRequestType_NewSecond:3,PinMatrixRequestType_WipeCodeFirst:4,PinMatrixRequestType_WipeCodeSecond:5});n.Enum_PinMatrixRequestType=E;var S=Object.freeze({UINT:1,INT:2,BYTES:3,STRING:4,BOOL:5,ADDRESS:6,ARRAY:7,STRUCT:8});n.Enum_EthereumDataType=S;var k=Object.freeze({Bip39:0,Slip39_Basic:1,Slip39_Advanced:2});n.Enum_BackupType=k;var T=Object.freeze({Strict:0,PromptAlways:1,PromptTemporarily:2});n.Enum_SafetyCheckLevel=T;var x=Object.freeze({Capability_Bitcoin:1,Capability_Bitcoin_like:2,Capability_Binance:3,Capability_Cardano:4,Capability_Crypto:5,Capability_EOS:6,Capability_Ethereum:7,Capability_Lisk:8,Capability_Monero:9,Capability_NEM:10,Capability_Ripple:11,Capability_Stellar:12,Capability_Tezos:13,Capability_U2F:14,Capability_Shamir:15,Capability_ShamirGroups:16,Capability_PassphraseEntry:17});n.Enum_Capability=x;var I=Object.freeze({DISABLE:0,ENABLE:1,REFRESH:2});n.Enum_SdProtectOperationType=I;var R=Object.freeze({RecoveryDeviceType_ScrambledWords:0,RecoveryDeviceType_Matrix:1});n.Enum_RecoveryDeviceType=R;var C=Object.freeze({WordRequestType_Plain:0,WordRequestType_Matrix9:1,WordRequestType_Matrix6:2});n.Enum_WordRequestType=C;var A=Object.freeze({MosaicLevy_Absolute:1,MosaicLevy_Percentile:2});n.Enum_NEMMosaicLevy=A;var M=Object.freeze({SupplyChange_Increase:1,SupplyChange_Decrease:2});n.Enum_NEMSupplyChangeType=M;var O=Object.freeze({CosignatoryModification_Add:1,CosignatoryModification_Delete:2});n.Enum_NEMModificationType=O;var P=Object.freeze({ImportanceTransfer_Activate:1,ImportanceTransfer_Deactivate:2});n.Enum_NEMImportanceTransferMode=P;var D=Object.freeze({NATIVE:0,ALPHANUM4:1,ALPHANUM12:2});n.Enum_StellarAssetType=D;var N=Object.freeze({NONE:0,TEXT:1,ID:2,HASH:3,RETURN:4});n.Enum_StellarMemoType=N;var L=Object.freeze({ACCOUNT:0,PRE_AUTH:1,HASH:2});n.Enum_StellarSignerType=L;var j=Object.freeze({Implicit:0,Originated:1});n.Enum_TezosContractType=j;var B=Object.freeze({Yay:0,Nay:1,Pass:2});n.Enum_TezosBallotType=B}}},{package:"eth-trezor-keyring>trezor-connect"}],[6073,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.getLog=n.enableLogByPrefix=n.enableLog=n.initLog=void 0;var r={DescriptorStream:"color: #77ab59",DeviceList:"color: #36802d",Device:"color: #bada55",Core:"color: #c9df8a",IFrame:"color: #FFFFFF; background: #f4a742;",Popup:"color: #f48a00"},i=function(){function e(e,t){this.prefix=e,this.enabled=t,this.messages=[],this.css=r[e]||"color: #000000; background: #FFFFFF;"}var t=e.prototype;return t.addMessage=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.messages.push({level:e,prefix:t,message:r,timestamp:(new Date).getTime()}),this.messages.length>100&&this.messages.shift()},t.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(this.addMessage.apply(this,["log",this.prefix].concat(t)),this.enabled)&&(r=console).log.apply(r,[this.prefix].concat(t))},t.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(this.addMessage.apply(this,["error",this.prefix].concat(t)),this.enabled)&&(r=console).error.apply(r,[this.prefix].concat(t))},t.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(this.addMessage.apply(this,["warn",this.prefix].concat(t)),this.enabled)&&(r=console).warn.apply(r,[this.prefix].concat(t))},t.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(this.addMessage.apply(this,["debug",this.prefix].concat(t)),this.enabled)&&(r=console).log.apply(r,["%c"+this.prefix,this.css].concat(t))},e}(),o={};n.initLog=function(e,t){var n=new i(e,!!t);return o[e]=n,n};n.enableLog=function(e){Object.keys(o).forEach((function(t){o[t].enabled=e}))};n.enableLogByPrefix=function(e,t){o[e]&&(o[e].enabled=t)};n.getLog=function(){var e=[];return Object.keys(o).forEach((function(t){e=e.concat(o[t].messages)})),e.sort((function(e,t){return e.timestamp-t.timestamp})),e}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6074,{"@babel/runtime/helpers/asyncToGenerator":190,"@babel/runtime/helpers/interopRequireDefault":200,"@babel/runtime/regenerator":220},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.create=function(e,t){var n,r=function(e){},s=function(e){},a=new Promise(function(){var t=(0,o.default)(i.default.mark((function t(o,a){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o,s=a,"function"!=typeof e){t.next=11;break}return t.prev=3,t.next=6,e();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),a(t.t0);case 11:"string"==typeof e&&(n=e);case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e,n){return t.apply(this,arguments)}}());return{id:n,device:t,resolve:r,reject:s,promise:a}},n.createAsync=function(e){var t=function(e){},n=function(e){},r=new Promise((function(e,r){t=e,n=r})),s=function(){var t=(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{resolve:t,reject:n,promise:r,run:function(){return s(),r}}},n.resolveTimeoutPromise=function(e,t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))},n.rejectTimeoutPromise=void 0;var i=r(e("@babel/runtime/regenerator")),o=r(e("@babel/runtime/helpers/asyncToGenerator"));n.rejectTimeoutPromise=function(e,t){return new Promise((function(n,r){setTimeout((function(){r(t)}),e)}))}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6075,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.default=void 0;var r=function(e,t,n){var r=e||".trezor-webusb-button",i=document.querySelectorAll(r),o=t+"?"+Date.now();i.forEach((function(e){if(e.getElementsByTagName("iframe").length<1){var t=e.getBoundingClientRect(),r=document.createElement("iframe");r.frameBorder="0",r.width=Math.round(t.width)+"px",r.height=Math.round(t.height)+"px",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.zIndex="1",r.setAttribute("allow","usb"),r.setAttribute("scrolling","no"),r.onload=function(){r.contentWindow.postMessage({},n)},r.src=o,e.append(r)}}))};n.default=r}}},{package:"eth-trezor-keyring>trezor-connect"}],[6076,{"./lib/truncate":6077,"utf8-byte-length/browser":6093},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./lib/truncate"),i=e("utf8-byte-length/browser");t.exports=r.bind(null,i)}}},{package:"3box>ipfs>libp2p-keychain>sanitize-filename>truncate-utf8-bytes"}],[6077,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){return e>=55296&&e<=56319}function i(e){return e>=56320&&e<=57343}t.exports=function(e,t,n){if("string"!=typeof t)throw new Error("Input must be string");for(var o,s,a=t.length,u=0,c=0;c<a;c+=1){if(o=t.charCodeAt(c),s=t[c],r(o)&&i(t.charCodeAt(c+1))&&(s+=t[c+=1]),(u+=e(s))===n)return t.slice(0,c+1);if(u>n)return t.slice(0,c-s.length+1)}return t}}}},{package:"3box>ipfs>libp2p-keychain>sanitize-filename>truncate-utf8-bytes"}],[6081,{buffer:2175,"is-typedarray":4817},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("is-typedarray").strict;t.exports=function(e){if(r(e)){var t=n.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return n.from(e)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"stylelint>write-file-atomic>typedarray-to-buffer"}],[6082,{},function(){with(this)return function(){"use strict";return function(e,t,n){!function(e,r){"object"==typeof n&&void 0!==t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).typical={})}(this,(function(e){function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function r(e){return i(e)&&"number"==typeof e.length}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0!==e}function s(e){return"function"==typeof e&&/^class /.test(Function.prototype.toString.call(e))}function a(e){if(null===e)return!0;switch(typeof e){case"string":case"number":case"symbol":case"undefined":case"boolean":return!0;default:return!1}}function u(e){if(e){const t=o(Promise)&&e instanceof Promise,n=e.then&&"function"==typeof e.then;return!(!t&&!n)}return!1}function c(e){return!(null===e||!o(e))&&("function"==typeof e[Symbol.iterator]||"function"==typeof e[Symbol.asyncIterator])}function l(e){return"string"==typeof e}function f(e){return"function"==typeof e}var h={isNumber:t,isPlainObject:n,isArrayLike:r,isObject:i,isDefined:o,isClass:s,isPrimitive:a,isPromise:u,isIterable:c,isString:l,isFunction:f};e.default=h,e.isArrayLike=r,e.isClass=s,e.isDefined=o,e.isFunction=f,e.isIterable=c,e.isNumber=t,e.isObject=i,e.isPlainObject=n,e.isPrimitive=a,e.isPromise=u,e.isString=l,Object.defineProperty(e,"__esModule",{value:!0})}))}}},{package:"3box>ipfs>ipld>typical"}],[6085,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){var n=[],r={};if("function"!=typeof t){var i=t;t=function(e){return e[i]}}return e.forEach((function(e){var i=t(e);r[i]||(r[i]=!0,n.push(e))})),n}}}},{package:"3box>ipfs>peer-info>unique-by"}],[6086,{"./pad-string":6087,buffer:2175},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("buffer"),i=e("./pad-string");function o(e,t){return void 0===t&&(t="utf8"),r.Buffer.isBuffer(e)?a(e.toString("base64")):a(r.Buffer.from(e,t).toString("base64"))}function s(e){return e=e.toString(),i.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function a(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var u=o;u.encode=o,u.decode=function(e,t){return void 0===t&&(t="utf8"),r.Buffer.from(s(e),"base64").toString(t)},u.toBase64=s,u.fromBase64=a,u.toBuffer=function(e){return r.Buffer.from(s(e),"base64")},n.default=u}}},{package:"3box>did-jwt>uport-base64url"}],[6087,{buffer:2175},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("buffer");n.default=function(e){var t=e.length,n=t%4;if(!n)return e;var i=t,o=4-n,s=t+o,a=r.Buffer.alloc(s);for(a.write(e);o--;)a.write("=",i++);return a.toString()}}}},{package:"3box>did-jwt>uport-base64url"}],[6088,{"./dist/base64url":6086},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./dist/base64url").default,t.exports.default=t.exports}}},{package:"3box>did-jwt>uport-base64url"}],[6093,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){return e>=55296&&e<=56319}function i(e){return e>=56320&&e<=57343}t.exports=function(e){if("string"!=typeof e)throw new Error("Input must be string");for(var t=e.length,n=0,o=null,s=null,a=0;a<t;a++)i(o=e.charCodeAt(a))?null!=s&&r(s)?n+=1:n+=3:o<=127?n+=1:o>=128&&o<=2047?n+=2:o>=2048&&o<=65535&&(n+=3),s=o;return n}}}},{package:"3box>ipfs>libp2p-keychain>sanitize-filename>truncate-utf8-bytes>utf8-byte-length"}],[61,{"../../../shared/constants/app":6262,"../../../shared/constants/metametrics":6266,"../../../shared/modules/random-id":6281,"../metamask-controller":84,"@babel/runtime/helpers/interopRequireDefault":200,"@metamask/obs-store":1204,buffer:2175,"eth-rpc-errors":2537,"ethereumjs-util":2612,events:2176},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.normalizeMsgData=d;var i=r(e("events")),o=e("@metamask/obs-store"),s=e("ethereumjs-util"),a=e("eth-rpc-errors"),u=e("../../../shared/constants/app"),c=e("../metamask-controller"),l=r(e("../../../shared/modules/random-id")),f=e("../../../shared/constants/metametrics");class h extends i.default{constructor({metricsEvent:e}){super(),this.memStore=new o.ObservableStore({unapprovedMsgs:{},unapprovedMsgCount:0}),this.messages=[],this.metricsEvent=e}get unapprovedMsgCount(){return Object.keys(this.getUnapprovedMsgs()).length}getUnapprovedMsgs(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}async addUnapprovedMessageAsync(e,t){const n=this.addUnapprovedMessage(e,t);return await new Promise(((t,r)=>{this.once(`${n}:finished`,(n=>{switch(n.status){case"signed":return t(n.rawSig);case"rejected":return r(a.ethErrors.provider.userRejectedRequest("MetaMask Message Signature: User denied message signature."));case"errored":return r(new Error(`MetaMask Message Signature: ${n.error}`));default:return r(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){t&&(e.origin=t.origin),e.data=d(e.data);const n=(new Date).getTime(),r=(0,l.default)(),i={id:r,msgParams:e,time:n,status:"unapproved",type:u.MESSAGE_TYPE.ETH_SIGN};return this.addMsg(i),this.emit("update"),r}addMsg(e){this.messages.push(e),this._saveMsgList()}getMsg(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMsgStatusApproved(e.metamaskId),this.prepMsgForSigning(e)}setMsgStatusApproved(e){this._setMsgStatus(e,"approved")}setMsgStatusSigned(e,t){const n=this.getMsg(e);n.rawSig=t,this._updateMsg(n),this._setMsgStatus(e,"signed")}prepMsgForSigning(e){return delete e.metamaskId,Promise.resolve(e)}rejectMsg(e,t=undefined){if(t){const n=this.getMsg(e);this.metricsEvent({event:t,category:f.EVENT.CATEGORIES.TRANSACTIONS,properties:{action:"Sign Request",type:n.type}})}this._setMsgStatus(e,"rejected")}errorMessage(e,t){const n=this.getMsg(e);n.error=t,this._updateMsg(n),this._setMsgStatus(e,"errored")}clearUnapproved(){this.messages=this.messages.filter((e=>"unapproved"!==e.status)),this._saveMsgList()}_setMsgStatus(e,t){const n=this.getMsg(e);if(!n)throw new Error(`MessageManager - Message not found for id: "${e}".`);n.status=t,this._updateMsg(n),this.emit(`${e}:${t}`,n),"rejected"!==t&&"signed"!==t||this.emit(`${e}:finished`,n)}_updateMsg(e){const t=this.messages.findIndex((t=>t.id===e.id));-1!==t&&(this.messages[t]=e),this._saveMsgList()}_saveMsgList(){const e=this.getUnapprovedMsgs(),t=Object.keys(e).length;this.memStore.updateState({unapprovedMsgs:e,unapprovedMsgCount:t}),this.emit(c.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}}function d(e){return"0x"===e.slice(0,2)?e:(0,s.bufferToHex)(t.from(e,"utf8"))}n.default=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$"}],[6115,{"../../is-buffer/index.js":4797,varint:6118},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("varint");t.exports=e=>{if(!n.isBuffer(e))throw new Error("arg needs to be a buffer");let t=[];for(;e.length>0;){const n=r.decode(e);t.push(n),e=e.slice(r.decode.bytes)}return t}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"3box>ipfs>ipfs-bitswap>varint-decoder"}],[6116,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function e(t,n){var r,i=0,o=0,s=n=n||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[s++],i+=o<28?(127&r)<<o:(127&r)*Math.pow(2,o),o+=7}while(r>=128);return e.bytes=s-n,i}}}},{package:"3box>ipfs>varint"}],[6117,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function e(t,n,i){n=n||[];var o=i=i||0;for(;t>=r;)n[i++]=255&t|128,t/=128;for(;-128&t;)n[i++]=255&t|128,t>>>=7;return n[i]=0|t,e.bytes=i-o+1,n};var r=Math.pow(2,31)}}},{package:"3box>ipfs>varint"}],[6118,{"./decode.js":6116,"./encode.js":6117,"./length.js":6119},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"3box>ipfs>varint"}],[6119,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=Math.pow(2,7),i=Math.pow(2,14),o=Math.pow(2,21),s=Math.pow(2,28),a=Math.pow(2,35),u=Math.pow(2,42),c=Math.pow(2,49),l=Math.pow(2,56),f=Math.pow(2,63);t.exports=function(e){return e<r?1:e<i?2:e<o?3:e<s?4:e<a?5:e<u?6:e<c?7:e<l?8:e<f?9:10}}}},{package:"3box>ipfs>varint"}],[6122,{util:2181},function(){with(this)return function(){"use strict";return function(e,t,n){n.TextEncoder="undefined"!=typeof TextEncoder?TextEncoder:e("util").TextEncoder,n.TextDecoder="undefined"!=typeof TextDecoder?TextDecoder:e("util").TextDecoder}}},{package:"@ensdomains/content-hash>multihashes>web-encoding"}],[6238,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i;self.mozRTCPeerConnection||navigator.mozGetUserMedia?(r="moz",i=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)):(self.webkitRTCPeerConnection||navigator.webkitGetUserMedia)&&(r="webkit",i=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10));var o=self.RTCPeerConnection||self.mozRTCPeerConnection||self.webkitRTCPeerConnection,s=self.mozRTCIceCandidate||self.RTCIceCandidate,a=self.mozRTCSessionDescription||self.RTCSessionDescription,u=self.webkitMediaStream||self.MediaStream,c="https:"===self.location.protocol&&("webkit"===r&&i>=26||"moz"===r&&i>=33),l=self.AudioContext||self.webkitAudioContext,f=self.document&&document.createElement("video"),h=f&&f.canPlayType&&"probably"===f.canPlayType('video/webm; codecs="vp8", vorbis'),d=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;t.exports={prefix:r,browserVersion:i,support:!!o&&!!d,supportRTCPeerConnection:!!o,supportVp8:h,supportGetUserMedia:!!d,supportDataChannel:!!(o&&o.prototype&&o.prototype.createDataChannel),supportWebAudio:!(!l||!l.prototype.createMediaStreamSource),supportMediaStream:!(!u||!u.prototype.removeTrack),supportScreenSharing:!!c,AudioContext:l,PeerConnection:o,SessionDescription:a,IceCandidate:s,MediaStream:u,getUserMedia:d}}}},{package:"3box>ipfs>libp2p-webrtc-star>webrtcsupport"}],[6248,{buffer:2175},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(t,n){if(t.length!==n.length)throw new Error("Inputs should have the same length");for(var r=e.allocUnsafe(t.length),i=0;i<t.length;i++)r[i]=t[i]^n[i];return r}t.exports=n,n.compare=function(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");for(var n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0},n.gt=function(e,t){return 1===n.compare(e,t)},n.lt=function(e,t){return-1===n.compare(e,t)},n.eq=function(e,t){return 0===n.compare(e,t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>libp2p-kad-dht>xor-distance"}],[6250,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e};var r=Object.prototype.hasOwnProperty}}},{package:"watchify>xtend"}],[6253,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},s=0,a=0;function u(e){var t="";do{t=i[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function c(){var e=u(+new Date);return e!==r?(s=0,r=e):e+"."+u(s++)}for(;a<64;a++)o[i[a]]=a;c.encode=u,c.decode=function(e){var t=0;for(a=0;a<e.length;a++)t=64*t+o[e.charAt(a)];return t},t.exports=c}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>engine.io-client>yeast"}],[6269,{"./time":6271},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME=n.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER=n.FALLBACK_SMART_TRANSACTIONS_DEADLINE=void 0;const r=10*e("./time").SECOND;n.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME=r;n.FALLBACK_SMART_TRANSACTIONS_DEADLINE=180;n.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER=2}}},{package:"$root$"}],[63,{"@babel/runtime/helpers/interopRequireDefault":200,events:2176},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("events"));class o extends i.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const n=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||n&&n.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const n of t)try{const t=await n.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==n.version)throw new Error("Migrator - Migration did not update version number correctly");e=t}catch(t){const r=t.message;return t.message=`MetaMask Migration Error #${n.version}: ${r}`,this.emit("error",t),e}return e}generateInitialState(e){return{meta:{version:this.defaultVersion},data:e}}}n.default=o}}},{package:"$root$"}],[64,{"../../../shared/constants/time":6271,"../../../shared/modules/fetch-with-timeout":6276,"@babel/runtime/helpers/defineProperty":194,"@babel/runtime/helpers/interopRequireDefault":200,loglevel:5268},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("loglevel")),s=e("../../../shared/constants/time");const a=(0,r(e("../../../shared/modules/fetch-with-timeout")).default)(30*s.SECOND);n.default=class{constructor(){(0,i.default)(this,"isSupported",!0),this._initialized=!1,this._initializing=this._init(),this._state=undefined}async _init(){try{const e=await a("http://localhost:12345/state.json");e.ok&&(this._state=await e.json())}catch(e){o.default.debug(`Error loading network state: '${e.message}'`)}finally{this._initialized=!0}}async get(){return this._initialized||await this._initializing,this._state}async set(e){this._initialized||await this._initializing,this._state=e}}}}},{package:"$root$"}],[65,{"../platforms/extension":158,"@babel/runtime/helpers/interopRequireDefault":200,"safe-event-emitter":5819},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.NOTIFICATION_MANAGER_EVENTS=void 0;var i=r(e("safe-event-emitter")),o=r(e("../platforms/extension"));const s={POPUP_CLOSED:"onPopupClosed"};n.NOTIFICATION_MANAGER_EVENTS=s;class a extends i.default{constructor(){super(),this.platform=new o.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(){const e=await this._getPopup();if(e)await this.platform.focusWindow(e.id);else{let e=0,t=0;try{const n=await this.platform.getLastFocusedWindow();t=n.top,e=n.left+(n.width-360)}catch(n){const{screenX:r,screenY:i,outerWidth:o}=window;t=Math.max(i,0),e=Math.max(r+(o-360),0)}const n=await this.platform.openWindow({url:"notification.html",type:"popup",width:360,height:620,left:e,top:t});n.left!==e&&"fullscreen"!==n.state&&await this.platform.updateWindowPosition(n.id,e,t),this._popupId=n.id}}_onWindowClosed(e){e===this._popupId&&(this._popupId=undefined,this.emit(s.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}n.default=a}}},{package:"$root$"}],[66,{"../../../shared/constants/app":6262,"../../../shared/constants/metametrics":6266,"../../../shared/modules/random-id":6281,"../metamask-controller":84,"./util":83,"@babel/runtime/helpers/interopRequireDefault":200,"@metamask/obs-store":1204,buffer:2175,"eth-rpc-errors":2537,"ethereumjs-util":2612,events:2176,loglevel:5268},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("events")),o=e("@metamask/obs-store"),s=e("ethereumjs-util"),a=e("eth-rpc-errors"),u=r(e("loglevel")),c=e("../../../shared/constants/app"),l=e("../metamask-controller"),f=r(e("../../../shared/modules/random-id")),h=e("../../../shared/constants/metametrics"),d=e("./util");const p=/^[0-9A-Fa-f]+$/gu;class g extends i.default{constructor({metricsEvent:e}){super(),this.memStore=new o.ObservableStore({unapprovedPersonalMsgs:{},unapprovedPersonalMsgCount:0}),this.messages=[],this.metricsEvent=e}get unapprovedPersonalMsgCount(){return Object.keys(this.getUnapprovedMsgs()).length}getUnapprovedMsgs(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addUnapprovedMessageAsync(e,t){return new Promise(((n,r)=>{if(!e.from)return void r(new Error("MetaMask Message Signature: from field is required."));const i=this.addUnapprovedMessage(e,t);this.once(`${i}:finished`,(t=>{switch(t.status){case"signed":return void n(t.rawSig);case"rejected":return void r(a.ethErrors.provider.userRejectedRequest("MetaMask Message Signature: User denied message signature."));case"errored":return void r(new Error(`MetaMask Message Signature: ${t.error}`));default:r(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){u.default.debug(`PersonalMessageManager addUnapprovedMessage: ${JSON.stringify(e)}`),t&&(e.origin=t.origin),e.data=this.normalizeMsgData(e.data);const n=(new Date).getTime(),r=(0,f.default)(),i={id:r,msgParams:e,time:n,status:"unapproved",type:c.MESSAGE_TYPE.PERSONAL_SIGN};return this.addMsg(i),this.emit("update"),r}addMsg(e){this.messages.push(e),this._saveMsgList()}getMsg(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMsgStatusApproved(e.metamaskId),this.prepMsgForSigning(e)}setMsgStatusApproved(e){this._setMsgStatus(e,"approved")}setMsgStatusSigned(e,t){const n=this.getMsg(e);n.rawSig=t,this._updateMsg(n),this._setMsgStatus(e,"signed")}prepMsgForSigning(e){return delete e.metamaskId,Promise.resolve(e)}rejectMsg(e,t=undefined){if(t){const n=this.getMsg(e);this.metricsEvent({event:t,category:h.EVENT.CATEGORIES.TRANSACTIONS,properties:{action:"Sign Request",type:n.type}})}this._setMsgStatus(e,"rejected")}errorMessage(e,t){const n=this.getMsg(e);n.error=t,this._updateMsg(n),this._setMsgStatus(e,"errored")}clearUnapproved(){this.messages=this.messages.filter((e=>"unapproved"!==e.status)),this._saveMsgList()}_setMsgStatus(e,t){const n=this.getMsg(e);if(!n)throw new Error(`PersonalMessageManager - Message not found for id: "${e}".`);n.status=t,this._updateMsg(n),this.emit(`${e}:${t}`,n),"rejected"!==t&&"signed"!==t||this.emit(`${e}:finished`,n)}_updateMsg(e){const t=this.messages.findIndex((t=>t.id===e.id));-1!==t&&(this.messages[t]=e),this._saveMsgList()}_saveMsgList(){const e=this.getUnapprovedMsgs(),t=Object.keys(e).length;this.memStore.updateState({unapprovedPersonalMsgs:e,unapprovedPersonalMsgCount:t}),this.emit(l.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}normalizeMsgData(e){try{const t=(0,s.stripHexPrefix)(e);if(t.match(p))return(0,d.addHexPrefix)(t)}catch(e){u.default.debug("Message was not hex encoded, interpreting as utf8.")}return(0,s.bufferToHex)(t.from(e,"utf8"))}}n.default=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$"}],[67,{"../../../../shared/constants/network":6267,"./handlers":71,"@babel/runtime/helpers/interopRequireDefault":200,"@metamask/controllers":1061,"@metamask/rpc-methods":1224,"eth-rpc-errors":2537,lodash:5255},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.createMethodMiddleware=function(e){const t=f.filter((t=>!Object.hasOwnProperty.call(e,t)));if(t.length>0)throw new Error(`Missing expected hooks:\n\n${t.join("\n")}\n`);return async function(t,n,r,i){if(u.UNSUPPORTED_RPC_METHODS.has(t.method))return i(s.ethErrors.rpc.methodNotSupported());const a=l.get(t.method);if(a){const{implementation:s,hookNames:u}=a;try{return await s(t,n,r,i,(0,o.selectHooks)(e,u))}catch(e){return console.error(e),i(e)}}return r()}};var i=e("@metamask/controllers"),o=e("@metamask/rpc-methods"),s=e("eth-rpc-errors"),a=e("lodash"),u=e("../../../../shared/constants/network");const c=[...r(e("./handlers")).default,...i.permissionRpcMethods.handlers],l=c.reduce(((e,t)=>{for(const n of t.methodNames)e.set(n,t);return e}),new Map),f=Array.from(new Set((0,a.flatten)(c.map((({hookNames:e})=>Object.keys(e))))).values())}}},{package:"$root$"}]],[],{});